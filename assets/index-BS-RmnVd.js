(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Kk(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ur={},Av=[],Iu=()=>{},iL=()=>!1,Z2=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),jk=e=>e.startsWith("onUpdate:"),Ts=Object.assign,qk=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},IJ=Object.prototype.hasOwnProperty,Ja=(e,t)=>IJ.call(e,t),kn=Array.isArray,mv=e=>lh(e)==="[object Map]",ih=e=>lh(e)==="[object Set]",iP=e=>lh(e)==="[object Date]",FJ=e=>lh(e)==="[object RegExp]",Wn=e=>typeof e=="function",Sr=e=>typeof e=="string",zl=e=>typeof e=="symbol",ir=e=>e!==null&&typeof e=="object",lL=e=>(ir(e)||Wn(e))&&Wn(e.then)&&Wn(e.catch),uL=Object.prototype.toString,lh=e=>uL.call(e),PJ=e=>lh(e).slice(8,-1),cL=e=>lh(e)==="[object Object]",Yk=e=>Sr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,zp=Kk(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ew=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},DJ=/-\w/g,Wo=ew(e=>e.replace(DJ,t=>t.slice(1).toUpperCase())),UJ=/\B([A-Z])/g,df=ew(e=>e.replace(UJ,"-$1").toLowerCase()),Qu=ew(e=>e.charAt(0).toUpperCase()+e.slice(1)),bx=ew(e=>e?`on${Qu(e)}`:""),Vd=(e,t)=>!Object.is(e,t),vv=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},dL=(e,t,n,a=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:a,value:n})},__=e=>{const t=parseFloat(e);return isNaN(t)?e:t},fL=e=>{const t=Sr(e)?Number(e):NaN;return isNaN(t)?e:t};let lP;const tw=()=>lP||(lP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Mt(e){if(kn(e)){const t={};for(let n=0;n<e.length;n++){const a=e[n],r=Sr(a)?LJ(a):Mt(a);if(r)for(const s in r)t[s]=r[s]}return t}else if(Sr(e)||ir(e))return e}const RJ=/;(?![^(]*\))/g,NJ=/:([^]+)/,VJ=/\/\*[^]*?\*\//g;function LJ(e){const t={};return e.replace(VJ,"").split(RJ).forEach(n=>{if(n){const a=n.split(NJ);a.length>1&&(t[a[0].trim()]=a[1].trim())}}),t}function lt(e){let t="";if(Sr(e))t=e;else if(kn(e))for(let n=0;n<e.length;n++){const a=lt(e[n]);a&&(t+=a+" ")}else if(ir(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function fl(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Sr(t)&&(e.class=lt(t)),n&&(e.style=Mt(n)),e}const MJ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",OJ=Kk(MJ);function AL(e){return!!e||e===""}function HJ(e,t){if(e.length!==t.length)return!1;let n=!0;for(let a=0;n&&a<e.length;a++)n=vA(e[a],t[a]);return n}function vA(e,t){if(e===t)return!0;let n=iP(e),a=iP(t);if(n||a)return n&&a?e.getTime()===t.getTime():!1;if(n=zl(e),a=zl(t),n||a)return e===t;if(n=kn(e),a=kn(t),n||a)return n&&a?HJ(e,t):!1;if(n=ir(e),a=ir(t),n||a){if(!n||!a)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const o in e){const l=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(l&&!c||!l&&c||!vA(e[o],t[o]))return!1}}return String(e)===String(t)}function Xk(e,t){return e.findIndex(n=>vA(n,t))}const mL=e=>!!(e&&e.__v_isRef===!0),K=e=>Sr(e)?e:e==null?"":kn(e)||ir(e)&&(e.toString===uL||!Wn(e.toString))?mL(e)?K(e.value):JSON.stringify(e,vL,2):String(e),vL=(e,t)=>mL(t)?vL(e,t.value):mv(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[a,r],s)=>(n[xx(a,s)+" =>"]=r,n),{})}:ih(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>xx(n))}:zl(t)?xx(t):ir(t)&&!kn(t)&&!cL(t)?String(t):t,xx=(e,t="")=>{var n;return zl(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let Ao;class hL{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ao,!t&&Ao&&(this.index=(Ao.scopes||(Ao.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ao;try{return Ao=this,t()}finally{Ao=n}}}on(){++this._on===1&&(this.prevScope=Ao,Ao=this)}off(){this._on>0&&--this._on===0&&(Ao=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(this.effects.length=0,n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Gd(e){return new hL(e)}function pL(){return Ao}function hs(e,t=!1){Ao&&Ao.cleanups.push(e)}let vr;const Cx=new WeakSet;class gL{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ao&&Ao.active&&Ao.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Cx.has(this)&&(Cx.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_L(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,uP(this),wL(this);const t=vr,n=Ol;vr=this,Ol=!0;try{return this.fn()}finally{bL(this),vr=t,Ol=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)eB(t);this.deps=this.depsTail=void 0,uP(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Cx.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){uS(this)&&this.run()}get dirty(){return uS(this)}}let yL=0,Wp,Kp;function _L(e,t=!1){if(e.flags|=8,t){e.next=Kp,Kp=e;return}e.next=Wp,Wp=e}function Jk(){yL++}function Zk(){if(--yL>0)return;if(Kp){let t=Kp;for(Kp=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Wp;){let t=Wp;for(Wp=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(a){e||(e=a)}t=n}}if(e)throw e}function wL(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function bL(e){let t,n=e.depsTail,a=n;for(;a;){const r=a.prevDep;a.version===-1?(a===n&&(n=r),eB(a),$J(a)):t=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=r}e.deps=t,e.depsTail=n}function uS(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(xL(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function xL(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===S0)||(e.globalVersion=S0,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!uS(e))))return;e.flags|=2;const t=e.dep,n=vr,a=Ol;vr=e,Ol=!0;try{wL(e);const r=e.fn(e._value);(t.version===0||Vd(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{vr=n,Ol=a,bL(e),e.flags&=-3}}function eB(e,t=!1){const{dep:n,prevSub:a,nextSub:r}=e;if(a&&(a.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=a,e.nextSub=void 0),n.subs===e&&(n.subs=a,!a&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)eB(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function $J(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ol=!0;const CL=[];function Nc(){CL.push(Ol),Ol=!1}function Vc(){const e=CL.pop();Ol=e===void 0?!0:e}function uP(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=vr;vr=void 0;try{t()}finally{vr=n}}}let S0=0;class QJ{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class tB{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!vr||!Ol||vr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==vr)n=this.activeLink=new QJ(vr,this),vr.deps?(n.prevDep=vr.depsTail,vr.depsTail.nextDep=n,vr.depsTail=n):vr.deps=vr.depsTail=n,SL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const a=n.nextDep;a.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=a),n.prevDep=vr.depsTail,n.nextDep=void 0,vr.depsTail.nextDep=n,vr.depsTail=n,vr.deps===n&&(vr.deps=a)}return n}trigger(t){this.version++,S0++,this.notify(t)}notify(t){Jk();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Zk()}}}function SL(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let a=t.deps;a;a=a.nextDep)SL(a)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const w_=new WeakMap,nA=Symbol(""),cS=Symbol(""),E0=Symbol("");function ho(e,t,n){if(Ol&&vr){let a=w_.get(e);a||w_.set(e,a=new Map);let r=a.get(n);r||(a.set(n,r=new tB),r.map=a,r.key=n),r.track()}}function wc(e,t,n,a,r,s){const o=w_.get(e);if(!o){S0++;return}const l=c=>{c&&c.trigger()};if(Jk(),t==="clear")o.forEach(l);else{const c=kn(e),f=c&&Yk(n);if(c&&n==="length"){const d=Number(a);o.forEach((A,m)=>{(m==="length"||m===E0||!zl(m)&&m>=d)&&l(A)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),f&&l(o.get(E0)),t){case"add":c?f&&l(o.get("length")):(l(o.get(nA)),mv(e)&&l(o.get(cS)));break;case"delete":c||(l(o.get(nA)),mv(e)&&l(o.get(cS)));break;case"set":mv(e)&&l(o.get(nA));break}}Zk()}function GJ(e,t){const n=w_.get(e);return n&&n.get(t)}function Im(e){const t=Sn(e);return t===e?t:(ho(t,"iterate",E0),il(e)?t:t.map(Xs))}function nw(e){return ho(e=Sn(e),"iterate",E0),e}const zJ={__proto__:null,[Symbol.iterator](){return Sx(this,Symbol.iterator,Xs)},concat(...e){return Im(this).concat(...e.map(t=>kn(t)?Im(t):t))},entries(){return Sx(this,"entries",e=>(e[1]=Xs(e[1]),e))},every(e,t){return mc(this,"every",e,t,void 0,arguments)},filter(e,t){return mc(this,"filter",e,t,n=>n.map(Xs),arguments)},find(e,t){return mc(this,"find",e,t,Xs,arguments)},findIndex(e,t){return mc(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return mc(this,"findLast",e,t,Xs,arguments)},findLastIndex(e,t){return mc(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return mc(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ex(this,"includes",e)},indexOf(...e){return Ex(this,"indexOf",e)},join(e){return Im(this).join(e)},lastIndexOf(...e){return Ex(this,"lastIndexOf",e)},map(e,t){return mc(this,"map",e,t,void 0,arguments)},pop(){return ip(this,"pop")},push(...e){return ip(this,"push",e)},reduce(e,...t){return cP(this,"reduce",e,t)},reduceRight(e,...t){return cP(this,"reduceRight",e,t)},shift(){return ip(this,"shift")},some(e,t){return mc(this,"some",e,t,void 0,arguments)},splice(...e){return ip(this,"splice",e)},toReversed(){return Im(this).toReversed()},toSorted(e){return Im(this).toSorted(e)},toSpliced(...e){return Im(this).toSpliced(...e)},unshift(...e){return ip(this,"unshift",e)},values(){return Sx(this,"values",Xs)}};function Sx(e,t,n){const a=nw(e),r=a[t]();return a!==e&&!il(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=n(s.value)),s}),r}const WJ=Array.prototype;function mc(e,t,n,a,r,s){const o=nw(e),l=o!==e&&!il(e),c=o[t];if(c!==WJ[t]){const A=c.apply(e,s);return l?Xs(A):A}let f=n;o!==e&&(l?f=function(A,m){return n.call(this,Xs(A),m,e)}:n.length>2&&(f=function(A,m){return n.call(this,A,m,e)}));const d=c.call(o,f,a);return l&&r?r(d):d}function cP(e,t,n,a){const r=nw(e);let s=n;return r!==e&&(il(e)?n.length>3&&(s=function(o,l,c){return n.call(this,o,l,c,e)}):s=function(o,l,c){return n.call(this,o,Xs(l),c,e)}),r[t](s,...a)}function Ex(e,t,n){const a=Sn(e);ho(a,"iterate",E0);const r=a[t](...n);return(r===-1||r===!1)&&rB(n[0])?(n[0]=Sn(n[0]),a[t](...n)):r}function ip(e,t,n=[]){Nc(),Jk();const a=Sn(e)[t].apply(e,n);return Zk(),Vc(),a}const KJ=Kk("__proto__,__v_isRef,__isVue"),EL=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(zl));function jJ(e){zl(e)||(e=String(e));const t=Sn(this);return ho(t,"has",e),t.hasOwnProperty(e)}class kL{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,a){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return a===(r?s?rZ:FL:s?IL:TL).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(a)?t:void 0;const o=kn(t);if(!r){let c;if(o&&(c=zJ[n]))return c;if(n==="hasOwnProperty")return jJ}const l=Reflect.get(t,n,ts(t)?t:a);return(zl(n)?EL.has(n):KJ(n))||(r||ho(t,"get",n),s)?l:ts(l)?o&&Yk(n)?l:l.value:ir(l)?r?uh(l):As(l):l}}class BL extends kL{constructor(t=!1){super(!1,t)}set(t,n,a,r){let s=t[n];if(!this._isShallow){const c=zd(s);if(!il(a)&&!zd(a)&&(s=Sn(s),a=Sn(a)),!kn(t)&&ts(s)&&!ts(a))return c||(s.value=a),!0}const o=kn(t)&&Yk(n)?Number(n)<t.length:Ja(t,n),l=Reflect.set(t,n,a,ts(t)?t:r);return t===Sn(r)&&(o?Vd(a,s)&&wc(t,"set",n,a):wc(t,"add",n,a)),l}deleteProperty(t,n){const a=Ja(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&a&&wc(t,"delete",n,void 0),r}has(t,n){const a=Reflect.has(t,n);return(!zl(n)||!EL.has(n))&&ho(t,"has",n),a}ownKeys(t){return ho(t,"iterate",kn(t)?"length":nA),Reflect.ownKeys(t)}}class qJ extends kL{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const YJ=new BL,XJ=new qJ,JJ=new BL(!0);const dS=e=>e,W1=e=>Reflect.getPrototypeOf(e);function ZJ(e,t,n){return function(...a){const r=this.__v_raw,s=Sn(r),o=mv(s),l=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,f=r[e](...a),d=n?dS:t?x_:Xs;return!t&&ho(s,"iterate",c?cS:nA),{next(){const{value:A,done:m}=f.next();return m?{value:A,done:m}:{value:l?[d(A[0]),d(A[1])]:d(A),done:m}},[Symbol.iterator](){return this}}}}function K1(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function eZ(e,t){const n={get(r){const s=this.__v_raw,o=Sn(s),l=Sn(r);e||(Vd(r,l)&&ho(o,"get",r),ho(o,"get",l));const{has:c}=W1(o),f=t?dS:e?x_:Xs;if(c.call(o,r))return f(s.get(r));if(c.call(o,l))return f(s.get(l));s!==o&&s.get(r)},get size(){const r=this.__v_raw;return!e&&ho(Sn(r),"iterate",nA),r.size},has(r){const s=this.__v_raw,o=Sn(s),l=Sn(r);return e||(Vd(r,l)&&ho(o,"has",r),ho(o,"has",l)),r===l?s.has(r):s.has(r)||s.has(l)},forEach(r,s){const o=this,l=o.__v_raw,c=Sn(l),f=t?dS:e?x_:Xs;return!e&&ho(c,"iterate",nA),l.forEach((d,A)=>r.call(s,f(d),f(A),o))}};return Ts(n,e?{add:K1("add"),set:K1("set"),delete:K1("delete"),clear:K1("clear")}:{add(r){!t&&!il(r)&&!zd(r)&&(r=Sn(r));const s=Sn(this);return W1(s).has.call(s,r)||(s.add(r),wc(s,"add",r,r)),this},set(r,s){!t&&!il(s)&&!zd(s)&&(s=Sn(s));const o=Sn(this),{has:l,get:c}=W1(o);let f=l.call(o,r);f||(r=Sn(r),f=l.call(o,r));const d=c.call(o,r);return o.set(r,s),f?Vd(s,d)&&wc(o,"set",r,s):wc(o,"add",r,s),this},delete(r){const s=Sn(this),{has:o,get:l}=W1(s);let c=o.call(s,r);c||(r=Sn(r),c=o.call(s,r)),l&&l.call(s,r);const f=s.delete(r);return c&&wc(s,"delete",r,void 0),f},clear(){const r=Sn(this),s=r.size!==0,o=r.clear();return s&&wc(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=ZJ(r,e,t)}),n}function nB(e,t){const n=eZ(e,t);return(a,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?a:Reflect.get(Ja(n,r)&&r in a?n:a,r,s)}const tZ={get:nB(!1,!1)},nZ={get:nB(!1,!0)},aZ={get:nB(!0,!1)};const TL=new WeakMap,IL=new WeakMap,FL=new WeakMap,rZ=new WeakMap;function sZ(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function oZ(e){return e.__v_skip||!Object.isExtensible(e)?0:sZ(PJ(e))}function As(e){return zd(e)?e:aB(e,!1,YJ,tZ,TL)}function PL(e){return aB(e,!1,JJ,nZ,IL)}function uh(e){return aB(e,!0,XJ,aZ,FL)}function aB(e,t,n,a,r){if(!ir(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=oZ(e);if(s===0)return e;const o=r.get(e);if(o)return o;const l=new Proxy(e,s===2?a:n);return r.set(e,l),l}function hv(e){return zd(e)?hv(e.__v_raw):!!(e&&e.__v_isReactive)}function zd(e){return!!(e&&e.__v_isReadonly)}function il(e){return!!(e&&e.__v_isShallow)}function rB(e){return e?!!e.__v_raw:!1}function Sn(e){const t=e&&e.__v_raw;return t?Sn(t):e}function b_(e){return!Ja(e,"__v_skip")&&Object.isExtensible(e)&&dL(e,"__v_skip",!0),e}const Xs=e=>ir(e)?As(e):e,x_=e=>ir(e)?uh(e):e;function ts(e){return e?e.__v_isRef===!0:!1}function R(e){return DL(e,!1)}function Gt(e){return DL(e,!0)}function DL(e,t){return ts(e)?e:new iZ(e,t)}class iZ{constructor(t,n){this.dep=new tB,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Sn(t),this._value=n?t:Xs(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,a=this.__v_isShallow||il(t)||zd(t);t=a?t:Sn(t),Vd(t,n)&&(this._rawValue=t,this._value=a?t:Xs(t),this.dep.trigger())}}function Oe(e){return ts(e)?e.value:e}function Uu(e){return Wn(e)?e():Oe(e)}const lZ={get:(e,t,n)=>t==="__v_raw"?e:Oe(Reflect.get(e,t,n)),set:(e,t,n,a)=>{const r=e[t];return ts(r)&&!ts(n)?(r.value=n,!0):Reflect.set(e,t,n,a)}};function UL(e){return hv(e)?e:new Proxy(e,lZ)}function MA(e){const t=kn(e)?new Array(e.length):{};for(const n in e)t[n]=RL(e,n);return t}class uZ{constructor(t,n,a){this._object=t,this._key=n,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return GJ(Sn(this._object),this._key)}}class cZ{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function qe(e,t,n){return ts(e)?e:Wn(e)?new cZ(e):ir(e)&&arguments.length>1?RL(e,t,n):R(e)}function RL(e,t,n){const a=e[t];return ts(a)?a:new uZ(e,t,n)}class dZ{constructor(t,n,a){this.fn=t,this.setter=n,this._value=void 0,this.dep=new tB(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=S0-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&vr!==this)return _L(this,!0),!0}get value(){const t=this.dep.track();return xL(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function fZ(e,t,n=!1){let a,r;return Wn(e)?a=e:(a=e.get,r=e.set),new dZ(a,r,n)}const j1={},C_=new WeakMap;let Mf;function AZ(e,t=!1,n=Mf){if(n){let a=C_.get(n);a||C_.set(n,a=[]),a.push(e)}}function mZ(e,t,n=ur){const{immediate:a,deep:r,once:s,scheduler:o,augmentJob:l,call:c}=n,f=B=>r?B:il(B)||r===!1||r===0?bc(B,1):bc(B);let d,A,m,p,h=!1,y=!1;if(ts(e)?(A=()=>e.value,h=il(e)):hv(e)?(A=()=>f(e),h=!0):kn(e)?(y=!0,h=e.some(B=>hv(B)||il(B)),A=()=>e.map(B=>{if(ts(B))return B.value;if(hv(B))return f(B);if(Wn(B))return c?c(B,2):B()})):Wn(e)?t?A=c?()=>c(e,2):e:A=()=>{if(m){Nc();try{m()}finally{Vc()}}const B=Mf;Mf=d;try{return c?c(e,3,[p]):e(p)}finally{Mf=B}}:A=Iu,t&&r){const B=A,F=r===!0?1/0:r;A=()=>bc(B(),F)}const g=pL(),_=()=>{d.stop(),g&&g.active&&qk(g.effects,d)};if(s&&t){const B=t;t=(...F)=>{B(...F),_()}}let b=y?new Array(e.length).fill(j1):j1;const S=B=>{if(!(!(d.flags&1)||!d.dirty&&!B))if(t){const F=d.run();if(r||h||(y?F.some((T,E)=>Vd(T,b[E])):Vd(F,b))){m&&m();const T=Mf;Mf=d;try{const E=[F,b===j1?void 0:y&&b[0]===j1?[]:b,p];b=F,c?c(t,3,E):t(...E)}finally{Mf=T}}}else d.run()};return l&&l(S),d=new gL(A),d.scheduler=o?()=>o(S,!1):S,p=B=>AZ(B,!1,d),m=d.onStop=()=>{const B=C_.get(d);if(B){if(c)c(B,4);else for(const F of B)F();C_.delete(d)}},t?a?S(!0):b=d.run():o?o(S.bind(null,!0),!0):d.run(),_.pause=d.pause.bind(d),_.resume=d.resume.bind(d),_.stop=_,_}function bc(e,t=1/0,n){if(t<=0||!ir(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,ts(e))bc(e.value,t,n);else if(kn(e))for(let a=0;a<e.length;a++)bc(e[a],t,n);else if(ih(e)||mv(e))e.forEach(a=>{bc(a,t,n)});else if(cL(e)){for(const a in e)bc(e[a],t,n);for(const a of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,a)&&bc(e[a],t,n)}return e}function pg(e,t,n,a){try{return a?e(...a):e()}catch(r){gg(r,t,n)}}function Wl(e,t,n,a){if(Wn(e)){const r=pg(e,t,n,a);return r&&lL(r)&&r.catch(s=>{gg(s,t,n)}),r}if(kn(e)){const r=[];for(let s=0;s<e.length;s++)r.push(Wl(e[s],t,n,a));return r}}function gg(e,t,n,a=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ur;if(t){let l=t.parent;const c=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let A=0;A<d.length;A++)if(d[A](e,c,f)===!1)return}l=l.parent}if(s){Nc(),pg(s,null,10,[e,c,f]),Vc();return}}vZ(e,n,r,a,o)}function vZ(e,t,n,a=!0,r=!1){if(r)throw e;console.error(e)}const Ho=[];let bu=-1;const pv=[];let _d=null,Jm=0;const NL=Promise.resolve();let S_=null;function Cn(e){const t=S_||NL;return e?t.then(this?e.bind(this):e):t}function hZ(e){let t=bu+1,n=Ho.length;for(;t<n;){const a=t+n>>>1,r=Ho[a],s=k0(r);s<e||s===e&&r.flags&2?t=a+1:n=a}return t}function sB(e){if(!(e.flags&1)){const t=k0(e),n=Ho[Ho.length-1];!n||!(e.flags&2)&&t>=k0(n)?Ho.push(e):Ho.splice(hZ(t),0,e),e.flags|=1,VL()}}function VL(){S_||(S_=NL.then(ML))}function fS(e){kn(e)?pv.push(...e):_d&&e.id===-1?_d.splice(Jm+1,0,e):e.flags&1||(pv.push(e),e.flags|=1),VL()}function dP(e,t,n=bu+1){for(;n<Ho.length;n++){const a=Ho[n];if(a&&a.flags&2){if(e&&a.id!==e.uid)continue;Ho.splice(n,1),n--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function LL(e){if(pv.length){const t=[...new Set(pv)].sort((n,a)=>k0(n)-k0(a));if(pv.length=0,_d){_d.push(...t);return}for(_d=t,Jm=0;Jm<_d.length;Jm++){const n=_d[Jm];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}_d=null,Jm=0}}const k0=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ML(e){try{for(bu=0;bu<Ho.length;bu++){const t=Ho[bu];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),pg(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;bu<Ho.length;bu++){const t=Ho[bu];t&&(t.flags&=-2)}bu=-1,Ho.length=0,LL(),S_=null,(Ho.length||pv.length)&&ML()}}let eo=null,OL=null;function E_(e){const t=eo;return eo=e,OL=e&&e.type.__scopeId||null,t}function u(e,t=eo,n){if(!t||e._n)return e;const a=(...r)=>{a._d&&F_(-1);const s=E_(t);let o;try{o=e(...r)}finally{E_(s),a._d&&F_(1)}return o};return a._n=!0,a._c=!0,a._d=!0,a}function Sa(e,t){if(eo===null)return e;const n=uw(eo),a=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,o,l,c=ur]=t[r];s&&(Wn(s)&&(s={mounted:s,updated:s}),s.deep&&bc(o),a.push({dir:s,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return e}function Tf(e,t,n,a){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const l=r[o];s&&(l.oldValue=s[o].value);let c=l.dir[a];c&&(Nc(),Wl(c,n,8,[e.el,l,e,t]),Vc())}}const HL=Symbol("_vte"),$L=e=>e.__isTeleport,jp=e=>e&&(e.disabled||e.disabled===""),fP=e=>e&&(e.defer||e.defer===""),AP=e=>typeof SVGElement<"u"&&e instanceof SVGElement,mP=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,AS=(e,t)=>{const n=e&&e.to;return Sr(n)?t?t(n):null:n},QL={name:"Teleport",__isTeleport:!0,process(e,t,n,a,r,s,o,l,c,f){const{mc:d,pc:A,pbc:m,o:{insert:p,querySelector:h,createText:y,createComment:g}}=f,_=jp(t.props);let{shapeFlag:b,children:S,dynamicChildren:B}=t;if(e==null){const F=t.el=y(""),T=t.anchor=y("");p(F,n,a),p(T,n,a);const E=(C,D)=>{b&16&&(r&&r.isCE&&(r.ce._teleportTarget=C),d(S,C,D,r,s,o,l,c))},x=()=>{const C=t.target=AS(t.props,h),D=GL(C,t,y,p);C&&(o!=="svg"&&AP(C)?o="svg":o!=="mathml"&&mP(C)&&(o="mathml"),_||(E(C,D),Yy(t,!1)))};_&&(E(n,T),Yy(t,!0)),fP(t.props)?(t.el.__isMounted=!1,bs(()=>{x(),delete t.el.__isMounted},s)):x()}else{if(fP(t.props)&&e.el.__isMounted===!1){bs(()=>{QL.process(e,t,n,a,r,s,o,l,c,f)},s);return}t.el=e.el,t.targetStart=e.targetStart;const F=t.anchor=e.anchor,T=t.target=e.target,E=t.targetAnchor=e.targetAnchor,x=jp(e.props),C=x?n:T,D=x?F:E;if(o==="svg"||AP(T)?o="svg":(o==="mathml"||mP(T))&&(o="mathml"),B?(m(e.dynamicChildren,B,C,r,s,o,l),cB(e,t,!0)):c||A(e,t,C,D,r,s,o,l,!1),_)x?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):q1(t,n,F,f,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const U=t.target=AS(t.props,h);U&&q1(t,U,null,f,0)}else x&&q1(t,T,E,f,1);Yy(t,_)}},remove(e,t,n,{um:a,o:{remove:r}},s){const{shapeFlag:o,children:l,anchor:c,targetStart:f,targetAnchor:d,target:A,props:m}=e;if(A&&(r(f),r(d)),s&&r(c),o&16){const p=s||!jp(m);for(let h=0;h<l.length;h++){const y=l[h];a(y,t,n,p,!!y.dynamicChildren)}}},move:q1,hydrate:pZ};function q1(e,t,n,{o:{insert:a},m:r},s=2){s===0&&a(e.targetAnchor,t,n);const{el:o,anchor:l,shapeFlag:c,children:f,props:d}=e,A=s===2;if(A&&a(o,t,n),(!A||jp(d))&&c&16)for(let m=0;m<f.length;m++)r(f[m],t,n,2);A&&a(l,t,n)}function pZ(e,t,n,a,r,s,{o:{nextSibling:o,parentNode:l,querySelector:c,insert:f,createText:d}},A){function m(y,g,_,b){g.anchor=A(o(y),g,l(y),n,a,r,s),g.targetStart=_,g.targetAnchor=b}const p=t.target=AS(t.props,c),h=jp(t.props);if(p){const y=p._lpa||p.firstChild;if(t.shapeFlag&16)if(h)m(e,t,y,y&&o(y));else{t.anchor=o(e);let g=y;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")t.targetStart=g;else if(g.data==="teleport anchor"){t.targetAnchor=g,p._lpa=t.targetAnchor&&o(t.targetAnchor);break}}g=o(g)}t.targetAnchor||GL(p,t,d,f),A(y&&o(y),t,p,n,a,r,s)}Yy(t,h)}else h&&t.shapeFlag&16&&m(e,t,e,o(e));return t.anchor&&o(t.anchor)}const gZ=QL;function Yy(e,t){const n=e.ctx;if(n&&n.ut){let a,r;for(t?(a=e.el,r=e.anchor):(a=e.targetStart,r=e.targetAnchor);a&&a!==r;)a.nodeType===1&&a.setAttribute("data-v-owner",n.uid),a=a.nextSibling;n.ut()}}function GL(e,t,n,a){const r=t.targetStart=n(""),s=t.targetAnchor=n("");return r[HL]=s,e&&(a(r,e),a(s,e)),s}const _c=Symbol("_leaveCb"),Y1=Symbol("_enterCb");function zL(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return An(()=>{e.isMounted=!0}),ha(()=>{e.isUnmounting=!0}),e}const qi=[Function,Array],WL={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:qi,onEnter:qi,onAfterEnter:qi,onEnterCancelled:qi,onBeforeLeave:qi,onLeave:qi,onAfterLeave:qi,onLeaveCancelled:qi,onBeforeAppear:qi,onAppear:qi,onAfterAppear:qi,onAppearCancelled:qi},KL=e=>{const t=e.subTree;return t.component?KL(t.component):t},yZ={name:"BaseTransition",props:WL,setup(e,{slots:t}){const n=HA(),a=zL();return()=>{const r=t.default&&oB(t.default(),!0);if(!r||!r.length)return;const s=jL(r),o=Sn(e),{mode:l}=o;if(a.isLeaving)return kx(s);const c=vP(s);if(!c)return kx(s);let f=B0(c,o,a,n,A=>f=A);c.type!==ms&&Wd(c,f);let d=n.subTree&&vP(n.subTree);if(d&&d.type!==ms&&!Tl(d,c)&&KL(n).type!==ms){let A=B0(d,o,a,n);if(Wd(d,A),l==="out-in"&&c.type!==ms)return a.isLeaving=!0,A.afterLeave=()=>{a.isLeaving=!1,n.job.flags&8||n.update(),delete A.afterLeave,d=void 0},kx(s);l==="in-out"&&c.type!==ms?A.delayLeave=(m,p,h)=>{const y=qL(a,d);y[String(d.key)]=d,m[_c]=()=>{p(),m[_c]=void 0,delete f.delayedLeave,d=void 0},f.delayedLeave=()=>{h(),delete f.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function jL(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==ms){t=n;break}}return t}const _Z=yZ;function qL(e,t){const{leavingVNodes:n}=e;let a=n.get(t.type);return a||(a=Object.create(null),n.set(t.type,a)),a}function B0(e,t,n,a,r){const{appear:s,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:f,onAfterEnter:d,onEnterCancelled:A,onBeforeLeave:m,onLeave:p,onAfterLeave:h,onLeaveCancelled:y,onBeforeAppear:g,onAppear:_,onAfterAppear:b,onAppearCancelled:S}=t,B=String(e.key),F=qL(n,e),T=(C,D)=>{C&&Wl(C,a,9,D)},E=(C,D)=>{const U=D[1];T(C,D),kn(C)?C.every(L=>L.length<=1)&&U():C.length<=1&&U()},x={mode:o,persisted:l,beforeEnter(C){let D=c;if(!n.isMounted)if(s)D=g||c;else return;C[_c]&&C[_c](!0);const U=F[B];U&&Tl(e,U)&&U.el[_c]&&U.el[_c](),T(D,[C])},enter(C){let D=f,U=d,L=A;if(!n.isMounted)if(s)D=_||f,U=b||d,L=S||A;else return;let H=!1;const oe=C[Y1]=de=>{H||(H=!0,de?T(L,[C]):T(U,[C]),x.delayedLeave&&x.delayedLeave(),C[Y1]=void 0)};D?E(D,[C,oe]):oe()},leave(C,D){const U=String(e.key);if(C[Y1]&&C[Y1](!0),n.isUnmounting)return D();T(m,[C]);let L=!1;const H=C[_c]=oe=>{L||(L=!0,D(),oe?T(y,[C]):T(h,[C]),C[_c]=void 0,F[U]===e&&delete F[U])};F[U]=e,p?E(p,[C,H]):H()},clone(C){const D=B0(C,t,n,a,r);return r&&r(D),D}};return x}function kx(e){if(aw(e))return e=Ru(e),e.children=null,e}function vP(e){if(!aw(e))return $L(e.type)&&e.children?jL(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Wn(n.default))return n.default()}}function Wd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Wd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function oB(e,t=!1,n){let a=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===ze?(o.patchFlag&128&&r++,a=a.concat(oB(o.children,t,l))):(t||o.type!==ms)&&a.push(l!=null?Ru(o,{key:l}):o)}if(r>1)for(let s=0;s<a.length;s++)a[s].patchFlag=-2;return a}function iB(e,t){return Wn(e)?Ts({name:e.name},t,{setup:e}):e}function qo(){const e=HA();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function YL(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const k_=new WeakMap;function qp(e,t,n,a,r=!1){if(kn(e)){e.forEach((h,y)=>qp(h,t&&(kn(t)?t[y]:t),n,a,r));return}if(aA(a)&&!r){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&qp(e,t,n,a.component.subTree);return}const s=a.shapeFlag&4?uw(a.component):a.el,o=r?null:s,{i:l,r:c}=e,f=t&&t.r,d=l.refs===ur?l.refs={}:l.refs,A=l.setupState,m=Sn(A),p=A===ur?iL:h=>Ja(m,h);if(f!=null&&f!==c){if(hP(t),Sr(f))d[f]=null,p(f)&&(A[f]=null);else if(ts(f)){f.value=null;const h=t;h.k&&(d[h.k]=null)}}if(Wn(c))pg(c,l,12,[o,d]);else{const h=Sr(c),y=ts(c);if(h||y){const g=()=>{if(e.f){const _=h?p(c)?A[c]:d[c]:c.value;if(r)kn(_)&&qk(_,s);else if(kn(_))_.includes(s)||_.push(s);else if(h)d[c]=[s],p(c)&&(A[c]=d[c]);else{const b=[s];c.value=b,e.k&&(d[e.k]=b)}}else h?(d[c]=o,p(c)&&(A[c]=o)):y&&(c.value=o,e.k&&(d[e.k]=o))};if(o){const _=()=>{g(),k_.delete(e)};_.id=-1,k_.set(e,_),bs(_,n)}else hP(e),g()}}}function hP(e){const t=k_.get(e);t&&(t.flags|=8,k_.delete(e))}tw().requestIdleCallback;tw().cancelIdleCallback;const aA=e=>!!e.type.__asyncLoader,aw=e=>e.type.__isKeepAlive,wZ={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=HA(),a=n.ctx;if(!a.renderer)return()=>{const b=t.default&&t.default();return b&&b.length===1?b[0]:b};const r=new Map,s=new Set;let o=null;const l=n.suspense,{renderer:{p:c,m:f,um:d,o:{createElement:A}}}=a,m=A("div");a.activate=(b,S,B,F,T)=>{const E=b.component;f(b,S,B,0,l),c(E.vnode,b,S,B,E,l,F,b.slotScopeIds,T),bs(()=>{E.isDeactivated=!1,E.a&&vv(E.a);const x=b.props&&b.props.onVnodeMounted;x&&Ji(x,E.parent,b)},l)},a.deactivate=b=>{const S=b.component;T_(S.m),T_(S.a),f(b,m,null,1,l),bs(()=>{S.da&&vv(S.da);const B=b.props&&b.props.onVnodeUnmounted;B&&Ji(B,S.parent,b),S.isDeactivated=!0},l)};function p(b){Bx(b),d(b,n,l,!0)}function h(b){r.forEach((S,B)=>{const F=bS(S.type);F&&!b(F)&&y(B)})}function y(b){const S=r.get(b);S&&(!o||!Tl(S,o))?p(S):o&&Bx(o),r.delete(b),s.delete(b)}Ge(()=>[e.include,e.exclude],([b,S])=>{b&&h(B=>Bp(b,B)),S&&h(B=>!Bp(S,B))},{flush:"post",deep:!0});let g=null;const _=()=>{g!=null&&(I_(n.subTree.type)?bs(()=>{r.set(g,X1(n.subTree))},n.subTree.suspense):r.set(g,X1(n.subTree)))};return An(_),ow(_),ha(()=>{r.forEach(b=>{const{subTree:S,suspense:B}=n,F=X1(S);if(b.type===F.type&&b.key===F.key){Bx(F);const T=F.component.da;T&&bs(T,B);return}p(b)})}),()=>{if(g=null,!t.default)return o=null;const b=t.default(),S=b[0];if(b.length>1)return o=null,b;if(!Kd(S)||!(S.shapeFlag&4)&&!(S.shapeFlag&128))return o=null,S;let B=X1(S);if(B.type===ms)return o=null,B;const F=B.type,T=bS(aA(B)?B.type.__asyncResolved||{}:F),{include:E,exclude:x,max:C}=e;if(E&&(!T||!Bp(E,T))||x&&T&&Bp(x,T))return B.shapeFlag&=-257,o=B,S;const D=B.key==null?F:B.key,U=r.get(D);return B.el&&(B=Ru(B),S.shapeFlag&128&&(S.ssContent=B)),g=D,U?(B.el=U.el,B.component=U.component,B.transition&&Wd(B,B.transition),B.shapeFlag|=512,s.delete(D),s.add(D)):(s.add(D),C&&s.size>parseInt(C,10)&&y(s.values().next().value)),B.shapeFlag|=256,o=B,I_(S.type)?S:B}}},bZ=wZ;function Bp(e,t){return kn(e)?e.some(n=>Bp(n,t)):Sr(e)?e.split(",").includes(t):FJ(e)?(e.lastIndex=0,e.test(t)):!1}function OA(e,t){XL(e,"a",t)}function rw(e,t){XL(e,"da",t)}function XL(e,t,n=yo){const a=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(sw(t,a,n),n){let r=n.parent;for(;r&&r.parent;)aw(r.parent.vnode)&&xZ(a,t,n,r),r=r.parent}}function xZ(e,t,n,a){const r=sw(t,e,a,!0);Ri(()=>{qk(a[t],r)},n)}function Bx(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function X1(e){return e.shapeFlag&128?e.ssContent:e}function sw(e,t,n=yo,a=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{Nc();const l=_g(n),c=Wl(t,n,e,o);return l(),Vc(),c});return a?r.unshift(s):r.push(s),s}}const Kc=e=>(t,n=yo)=>{(!I0||e==="sp")&&sw(e,(...a)=>t(...a),n)},tu=Kc("bm"),An=Kc("m"),JL=Kc("bu"),ow=Kc("u"),ha=Kc("bum"),Ri=Kc("um"),CZ=Kc("sp"),SZ=Kc("rtg"),EZ=Kc("rtc");function kZ(e,t=yo){sw("ec",e,t)}const ZL="components";function I(e,t){return t8(ZL,e,!0,t)||e}const e8=Symbol.for("v-ndc");function iw(e){return Sr(e)?t8(ZL,e,!1)||e:e||e8}function t8(e,t,n=!0,a=!1){const r=eo||yo;if(r){const s=r.type;{const l=bS(s,!1);if(l&&(l===t||l===Wo(t)||l===Qu(Wo(t))))return s}const o=pP(r[e]||s[e],t)||pP(r.appContext[e],t);return!o&&a?s:o}}function pP(e,t){return e&&(e[t]||e[Wo(t)]||e[Qu(Wo(t))])}function Jt(e,t,n,a){let r;const s=n,o=kn(e);if(o||Sr(e)){const l=o&&hv(e);let c=!1,f=!1;l&&(c=!il(e),f=zd(e),e=nw(e)),r=new Array(e.length);for(let d=0,A=e.length;d<A;d++)r[d]=t(c?f?x_(Xs(e[d])):Xs(e[d]):e[d],d,void 0,s)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,s)}else if(ir(e))if(e[Symbol.iterator])r=Array.from(e,(l,c)=>t(l,c,void 0,s));else{const l=Object.keys(e);r=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const d=l[c];r[c]=t(e[d],d,c,s)}}else r=[];return r}function Dv(e,t){for(let n=0;n<t.length;n++){const a=t[n];if(kn(a))for(let r=0;r<a.length;r++)e[a[r].name]=a[r].fn;else a&&(e[a.name]=a.key?(...r)=>{const s=a.fn(...r);return s&&(s.key=a.key),s}:a.fn)}return e}function BZ(e,t,n={},a,r){if(eo.ce||eo.parent&&aA(eo.parent)&&eo.parent.ce)return P(),he(ze,null,[i("slot",n,a)],64);let s=e[t];s&&s._c&&(s._d=!1),P();const o=s&&n8(s(n)),l=n.key||o&&o.key,c=he(ze,{key:(l&&!zl(l)?l:`_${t}`)+(!o&&a?"_fb":"")},o||[],o&&e._===1?64:-2);return s&&s._c&&(s._d=!0),c}function n8(e){return e.some(t=>Kd(t)?!(t.type===ms||t.type===ze&&!n8(t.children)):!0)?e:null}const mS=e=>e?w8(e)?uw(e):mS(e.parent):null,Yp=Ts(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>mS(e.parent),$root:e=>mS(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>r8(e),$forceUpdate:e=>e.f||(e.f=()=>{sB(e.update)}),$nextTick:e=>e.n||(e.n=Cn.bind(e.proxy)),$watch:e=>qZ.bind(e)}),Tx=(e,t)=>e!==ur&&!e.__isScriptSetup&&Ja(e,t),TZ={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:a,data:r,props:s,accessCache:o,type:l,appContext:c}=e;let f;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return a[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(Tx(a,t))return o[t]=1,a[t];if(r!==ur&&Ja(r,t))return o[t]=2,r[t];if((f=e.propsOptions[0])&&Ja(f,t))return o[t]=3,s[t];if(n!==ur&&Ja(n,t))return o[t]=4,n[t];vS&&(o[t]=0)}}const d=Yp[t];let A,m;if(d)return t==="$attrs"&&ho(e.attrs,"get",""),d(e);if((A=l.__cssModules)&&(A=A[t]))return A;if(n!==ur&&Ja(n,t))return o[t]=4,n[t];if(m=c.config.globalProperties,Ja(m,t))return m[t]},set({_:e},t,n){const{data:a,setupState:r,ctx:s}=e;return Tx(r,t)?(r[t]=n,!0):a!==ur&&Ja(a,t)?(a[t]=n,!0):Ja(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:a,appContext:r,propsOptions:s,type:o}},l){let c,f;return!!(n[l]||e!==ur&&l[0]!=="$"&&Ja(e,l)||Tx(t,l)||(c=s[0])&&Ja(c,l)||Ja(a,l)||Ja(Yp,l)||Ja(r.config.globalProperties,l)||(f=o.__cssModules)&&f[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ja(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function gP(e){return kn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let vS=!0;function IZ(e){const t=r8(e),n=e.proxy,a=e.ctx;vS=!1,t.beforeCreate&&yP(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:l,provide:c,inject:f,created:d,beforeMount:A,mounted:m,beforeUpdate:p,updated:h,activated:y,deactivated:g,beforeDestroy:_,beforeUnmount:b,destroyed:S,unmounted:B,render:F,renderTracked:T,renderTriggered:E,errorCaptured:x,serverPrefetch:C,expose:D,inheritAttrs:U,components:L,directives:H,filters:oe}=t;if(f&&FZ(f,a,null),o)for(const q in o){const ce=o[q];Wn(ce)&&(a[q]=ce.bind(n))}if(r){const q=r.call(n,n);ir(q)&&(e.data=As(q))}if(vS=!0,s)for(const q in s){const ce=s[q],le=Wn(ce)?ce.bind(n,n):Wn(ce.get)?ce.get.bind(n,n):Iu,Z=!Wn(ce)&&Wn(ce.set)?ce.set.bind(n):Iu,ne=ee({get:le,set:Z});Object.defineProperty(a,q,{enumerable:!0,configurable:!0,get:()=>ne.value,set:G=>ne.value=G})}if(l)for(const q in l)a8(l[q],a,n,q);if(c){const q=Wn(c)?c.call(n):c;Reflect.ownKeys(q).forEach(ce=>{za(ce,q[ce])})}d&&yP(d,e,"c");function te(q,ce){kn(ce)?ce.forEach(le=>q(le.bind(n))):ce&&q(ce.bind(n))}if(te(tu,A),te(An,m),te(JL,p),te(ow,h),te(OA,y),te(rw,g),te(kZ,x),te(EZ,T),te(SZ,E),te(ha,b),te(Ri,B),te(CZ,C),kn(D))if(D.length){const q=e.exposed||(e.exposed={});D.forEach(ce=>{Object.defineProperty(q,ce,{get:()=>n[ce],set:le=>n[ce]=le,enumerable:!0})})}else e.exposed||(e.exposed={});F&&e.render===Iu&&(e.render=F),U!=null&&(e.inheritAttrs=U),L&&(e.components=L),H&&(e.directives=H),C&&YL(e)}function FZ(e,t,n=Iu){kn(e)&&(e=hS(e));for(const a in e){const r=e[a];let s;ir(r)?"default"in r?s=Pn(r.from||a,r.default,!0):s=Pn(r.from||a):s=Pn(r),ts(s)?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[a]=s}}function yP(e,t,n){Wl(kn(e)?e.map(a=>a.bind(t.proxy)):e.bind(t.proxy),t,n)}function a8(e,t,n,a){let r=a.includes(".")?v8(n,a):()=>n[a];if(Sr(e)){const s=t[e];Wn(s)&&Ge(r,s)}else if(Wn(e))Ge(r,e.bind(n));else if(ir(e))if(kn(e))e.forEach(s=>a8(s,t,n,a));else{const s=Wn(e.handler)?e.handler.bind(n):t[e.handler];Wn(s)&&Ge(r,s,e)}}function r8(e){const t=e.type,{mixins:n,extends:a}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,l=s.get(t);let c;return l?c=l:!r.length&&!n&&!a?c=t:(c={},r.length&&r.forEach(f=>B_(c,f,o,!0)),B_(c,t,o)),ir(t)&&s.set(t,c),c}function B_(e,t,n,a=!1){const{mixins:r,extends:s}=t;s&&B_(e,s,n,!0),r&&r.forEach(o=>B_(e,o,n,!0));for(const o in t)if(!(a&&o==="expose")){const l=PZ[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const PZ={data:_P,props:wP,emits:wP,methods:Tp,computed:Tp,beforeCreate:Lo,created:Lo,beforeMount:Lo,mounted:Lo,beforeUpdate:Lo,updated:Lo,beforeDestroy:Lo,beforeUnmount:Lo,destroyed:Lo,unmounted:Lo,activated:Lo,deactivated:Lo,errorCaptured:Lo,serverPrefetch:Lo,components:Tp,directives:Tp,watch:UZ,provide:_P,inject:DZ};function _P(e,t){return t?e?function(){return Ts(Wn(e)?e.call(this,this):e,Wn(t)?t.call(this,this):t)}:t:e}function DZ(e,t){return Tp(hS(e),hS(t))}function hS(e){if(kn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Lo(e,t){return e?[...new Set([].concat(e,t))]:t}function Tp(e,t){return e?Ts(Object.create(null),e,t):t}function wP(e,t){return e?kn(e)&&kn(t)?[...new Set([...e,...t])]:Ts(Object.create(null),gP(e),gP(t??{})):t}function UZ(e,t){if(!e)return t;if(!t)return e;const n=Ts(Object.create(null),e);for(const a in t)n[a]=Lo(e[a],t[a]);return n}function s8(){return{app:null,config:{isNativeTag:iL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let RZ=0;function NZ(e,t){return function(a,r=null){Wn(a)||(a=Ts({},a)),r!=null&&!ir(r)&&(r=null);const s=s8(),o=new WeakSet,l=[];let c=!1;const f=s.app={_uid:RZ++,_component:a,_props:r,_container:null,_context:s,_instance:null,version:yee,get config(){return s.config},set config(d){},use(d,...A){return o.has(d)||(d&&Wn(d.install)?(o.add(d),d.install(f,...A)):Wn(d)&&(o.add(d),d(f,...A))),f},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),f},component(d,A){return A?(s.components[d]=A,f):s.components[d]},directive(d,A){return A?(s.directives[d]=A,f):s.directives[d]},mount(d,A,m){if(!c){const p=f._ceVNode||i(a,r);return p.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),e(p,d,m),c=!0,f._container=d,d.__vue_app__=f,uw(p.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Wl(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,A){return s.provides[d]=A,f},runWithContext(d){const A=gv;gv=f;try{return d()}finally{gv=A}}};return f}}let gv=null;function za(e,t){if(yo){let n=yo.provides;const a=yo.parent&&yo.parent.provides;a===n&&(n=yo.provides=Object.create(a)),n[e]=t}}function Pn(e,t,n=!1){const a=HA();if(a||gv){let r=gv?gv._context.provides:a?a.parent==null||a.ce?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&Wn(t)?t.call(a&&a.proxy):t}}const o8={},i8=()=>Object.create(o8),l8=e=>Object.getPrototypeOf(e)===o8;function VZ(e,t,n,a=!1){const r={},s=i8();e.propsDefaults=Object.create(null),u8(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=a?r:PL(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function LZ(e,t,n,a){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,l=Sn(r),[c]=e.propsOptions;let f=!1;if((a||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let A=0;A<d.length;A++){let m=d[A];if(lw(e.emitsOptions,m))continue;const p=t[m];if(c)if(Ja(s,m))p!==s[m]&&(s[m]=p,f=!0);else{const h=Wo(m);r[h]=pS(c,l,h,p,e,!1)}else p!==s[m]&&(s[m]=p,f=!0)}}}else{u8(e,t,r,s)&&(f=!0);let d;for(const A in l)(!t||!Ja(t,A)&&((d=df(A))===A||!Ja(t,d)))&&(c?n&&(n[A]!==void 0||n[d]!==void 0)&&(r[A]=pS(c,l,A,void 0,e,!0)):delete r[A]);if(s!==l)for(const A in s)(!t||!Ja(t,A))&&(delete s[A],f=!0)}f&&wc(e.attrs,"set","")}function u8(e,t,n,a){const[r,s]=e.propsOptions;let o=!1,l;if(t)for(let c in t){if(zp(c))continue;const f=t[c];let d;r&&Ja(r,d=Wo(c))?!s||!s.includes(d)?n[d]=f:(l||(l={}))[d]=f:lw(e.emitsOptions,c)||(!(c in a)||f!==a[c])&&(a[c]=f,o=!0)}if(s){const c=Sn(n),f=l||ur;for(let d=0;d<s.length;d++){const A=s[d];n[A]=pS(r,c,A,f[A],e,!Ja(f,A))}}return o}function pS(e,t,n,a,r,s){const o=e[n];if(o!=null){const l=Ja(o,"default");if(l&&a===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Wn(c)){const{propsDefaults:f}=r;if(n in f)a=f[n];else{const d=_g(r);a=f[n]=c.call(null,t),d()}}else a=c;r.ce&&r.ce._setProp(n,a)}o[0]&&(s&&!l?a=!1:o[1]&&(a===""||a===df(n))&&(a=!0))}return a}const MZ=new WeakMap;function c8(e,t,n=!1){const a=n?MZ:t.propsCache,r=a.get(e);if(r)return r;const s=e.props,o={},l=[];let c=!1;if(!Wn(e)){const d=A=>{c=!0;const[m,p]=c8(A,t,!0);Ts(o,m),p&&l.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!c)return ir(e)&&a.set(e,Av),Av;if(kn(s))for(let d=0;d<s.length;d++){const A=Wo(s[d]);bP(A)&&(o[A]=ur)}else if(s)for(const d in s){const A=Wo(d);if(bP(A)){const m=s[d],p=o[A]=kn(m)||Wn(m)?{type:m}:Ts({},m),h=p.type;let y=!1,g=!0;if(kn(h))for(let _=0;_<h.length;++_){const b=h[_],S=Wn(b)&&b.name;if(S==="Boolean"){y=!0;break}else S==="String"&&(g=!1)}else y=Wn(h)&&h.name==="Boolean";p[0]=y,p[1]=g,(y||Ja(p,"default"))&&l.push(A)}}const f=[o,l];return ir(e)&&a.set(e,f),f}function bP(e){return e[0]!=="$"&&!zp(e)}const lB=e=>e==="_"||e==="_ctx"||e==="$stable",uB=e=>kn(e)?e.map(kl):[kl(e)],OZ=(e,t,n)=>{if(t._n)return t;const a=u((...r)=>uB(t(...r)),n);return a._c=!1,a},d8=(e,t,n)=>{const a=e._ctx;for(const r in e){if(lB(r))continue;const s=e[r];if(Wn(s))t[r]=OZ(r,s,a);else if(s!=null){const o=uB(s);t[r]=()=>o}}},f8=(e,t)=>{const n=uB(t);e.slots.default=()=>n},A8=(e,t,n)=>{for(const a in t)(n||!lB(a))&&(e[a]=t[a])},HZ=(e,t,n)=>{const a=e.slots=i8();if(e.vnode.shapeFlag&32){const r=t._;r?(A8(a,t,n),n&&dL(a,"_",r,!0)):d8(t,a)}else t&&f8(e,t)},$Z=(e,t,n)=>{const{vnode:a,slots:r}=e;let s=!0,o=ur;if(a.shapeFlag&32){const l=t._;l?n&&l===1?s=!1:A8(r,t,n):(s=!t.$stable,d8(t,r)),o=t}else t&&(f8(e,t),o={default:1});if(s)for(const l in r)!lB(l)&&o[l]==null&&delete r[l]},bs=lee;function QZ(e){return GZ(e)}function GZ(e,t){const n=tw();n.__VUE__=!0;const{insert:a,remove:r,patchProp:s,createElement:o,createText:l,createComment:c,setText:f,setElementText:d,parentNode:A,nextSibling:m,setScopeId:p=Iu,insertStaticContent:h}=e,y=(M,z,se,be=null,Fe=null,ye=null,Qe=void 0,_e=null,Se=!!z.dynamicChildren)=>{if(M===z)return;M&&!Tl(M,z)&&(be=j(M),G(M,Fe,ye,!0),M=null),z.patchFlag===-2&&(Se=!1,z.dynamicChildren=null);const{type:Ee,ref:Ue,shapeFlag:je}=z;switch(Ee){case yg:g(M,z,se,be);break;case ms:_(M,z,se,be);break;case Fx:M==null&&b(z,se,be,Qe);break;case ze:L(M,z,se,be,Fe,ye,Qe,_e,Se);break;default:je&1?F(M,z,se,be,Fe,ye,Qe,_e,Se):je&6?H(M,z,se,be,Fe,ye,Qe,_e,Se):(je&64||je&128)&&Ee.process(M,z,se,be,Fe,ye,Qe,_e,Se,X)}Ue!=null&&Fe?qp(Ue,M&&M.ref,ye,z||M,!z):Ue==null&&M&&M.ref!=null&&qp(M.ref,null,ye,M,!0)},g=(M,z,se,be)=>{if(M==null)a(z.el=l(z.children),se,be);else{const Fe=z.el=M.el;z.children!==M.children&&f(Fe,z.children)}},_=(M,z,se,be)=>{M==null?a(z.el=c(z.children||""),se,be):z.el=M.el},b=(M,z,se,be)=>{[M.el,M.anchor]=h(M.children,z,se,be,M.el,M.anchor)},S=({el:M,anchor:z},se,be)=>{let Fe;for(;M&&M!==z;)Fe=m(M),a(M,se,be),M=Fe;a(z,se,be)},B=({el:M,anchor:z})=>{let se;for(;M&&M!==z;)se=m(M),r(M),M=se;r(z)},F=(M,z,se,be,Fe,ye,Qe,_e,Se)=>{z.type==="svg"?Qe="svg":z.type==="math"&&(Qe="mathml"),M==null?T(z,se,be,Fe,ye,Qe,_e,Se):C(M,z,Fe,ye,Qe,_e,Se)},T=(M,z,se,be,Fe,ye,Qe,_e)=>{let Se,Ee;const{props:Ue,shapeFlag:je,transition:at,dirs:mt}=M;if(Se=M.el=o(M.type,ye,Ue&&Ue.is,Ue),je&8?d(Se,M.children):je&16&&x(M.children,Se,null,be,Fe,Ix(M,ye),Qe,_e),mt&&Tf(M,null,be,"created"),E(Se,M,M.scopeId,Qe,be),Ue){for(const Be in Ue)Be!=="value"&&!zp(Be)&&s(Se,Be,null,Ue[Be],ye,be);"value"in Ue&&s(Se,"value",null,Ue.value,ye),(Ee=Ue.onVnodeBeforeMount)&&Ji(Ee,be,M)}mt&&Tf(M,null,be,"beforeMount");const xe=zZ(Fe,at);xe&&at.beforeEnter(Se),a(Se,z,se),((Ee=Ue&&Ue.onVnodeMounted)||xe||mt)&&bs(()=>{Ee&&Ji(Ee,be,M),xe&&at.enter(Se),mt&&Tf(M,null,be,"mounted")},Fe)},E=(M,z,se,be,Fe)=>{if(se&&p(M,se),be)for(let ye=0;ye<be.length;ye++)p(M,be[ye]);if(Fe){let ye=Fe.subTree;if(z===ye||I_(ye.type)&&(ye.ssContent===z||ye.ssFallback===z)){const Qe=Fe.vnode;E(M,Qe,Qe.scopeId,Qe.slotScopeIds,Fe.parent)}}},x=(M,z,se,be,Fe,ye,Qe,_e,Se=0)=>{for(let Ee=Se;Ee<M.length;Ee++){const Ue=M[Ee]=_e?wd(M[Ee]):kl(M[Ee]);y(null,Ue,z,se,be,Fe,ye,Qe,_e)}},C=(M,z,se,be,Fe,ye,Qe)=>{const _e=z.el=M.el;let{patchFlag:Se,dynamicChildren:Ee,dirs:Ue}=z;Se|=M.patchFlag&16;const je=M.props||ur,at=z.props||ur;let mt;if(se&&If(se,!1),(mt=at.onVnodeBeforeUpdate)&&Ji(mt,se,z,M),Ue&&Tf(z,M,se,"beforeUpdate"),se&&If(se,!0),(je.innerHTML&&at.innerHTML==null||je.textContent&&at.textContent==null)&&d(_e,""),Ee?D(M.dynamicChildren,Ee,_e,se,be,Ix(z,Fe),ye):Qe||ce(M,z,_e,null,se,be,Ix(z,Fe),ye,!1),Se>0){if(Se&16)U(_e,je,at,se,Fe);else if(Se&2&&je.class!==at.class&&s(_e,"class",null,at.class,Fe),Se&4&&s(_e,"style",je.style,at.style,Fe),Se&8){const xe=z.dynamicProps;for(let Be=0;Be<xe.length;Be++){const Ye=xe[Be],kt=je[Ye],xt=at[Ye];(xt!==kt||Ye==="value")&&s(_e,Ye,kt,xt,Fe,se)}}Se&1&&M.children!==z.children&&d(_e,z.children)}else!Qe&&Ee==null&&U(_e,je,at,se,Fe);((mt=at.onVnodeUpdated)||Ue)&&bs(()=>{mt&&Ji(mt,se,z,M),Ue&&Tf(z,M,se,"updated")},be)},D=(M,z,se,be,Fe,ye,Qe)=>{for(let _e=0;_e<z.length;_e++){const Se=M[_e],Ee=z[_e],Ue=Se.el&&(Se.type===ze||!Tl(Se,Ee)||Se.shapeFlag&198)?A(Se.el):se;y(Se,Ee,Ue,null,be,Fe,ye,Qe,!0)}},U=(M,z,se,be,Fe)=>{if(z!==se){if(z!==ur)for(const ye in z)!zp(ye)&&!(ye in se)&&s(M,ye,z[ye],null,Fe,be);for(const ye in se){if(zp(ye))continue;const Qe=se[ye],_e=z[ye];Qe!==_e&&ye!=="value"&&s(M,ye,_e,Qe,Fe,be)}"value"in se&&s(M,"value",z.value,se.value,Fe)}},L=(M,z,se,be,Fe,ye,Qe,_e,Se)=>{const Ee=z.el=M?M.el:l(""),Ue=z.anchor=M?M.anchor:l("");let{patchFlag:je,dynamicChildren:at,slotScopeIds:mt}=z;mt&&(_e=_e?_e.concat(mt):mt),M==null?(a(Ee,se,be),a(Ue,se,be),x(z.children||[],se,Ue,Fe,ye,Qe,_e,Se)):je>0&&je&64&&at&&M.dynamicChildren?(D(M.dynamicChildren,at,se,Fe,ye,Qe,_e),(z.key!=null||Fe&&z===Fe.subTree)&&cB(M,z,!0)):ce(M,z,se,Ue,Fe,ye,Qe,_e,Se)},H=(M,z,se,be,Fe,ye,Qe,_e,Se)=>{z.slotScopeIds=_e,M==null?z.shapeFlag&512?Fe.ctx.activate(z,se,be,Qe,Se):oe(z,se,be,Fe,ye,Qe,Se):de(M,z,Se)},oe=(M,z,se,be,Fe,ye,Qe)=>{const _e=M.component=Aee(M,be,Fe);if(aw(M)&&(_e.ctx.renderer=X),mee(_e,!1,Qe),_e.asyncDep){if(Fe&&Fe.registerDep(_e,te,Qe),!M.el){const Se=_e.subTree=i(ms);_(null,Se,z,se),M.placeholder=Se.el}}else te(_e,M,z,se,Fe,ye,Qe)},de=(M,z,se)=>{const be=z.component=M.component;if(nee(M,z,se))if(be.asyncDep&&!be.asyncResolved){q(be,z,se);return}else be.next=z,be.update();else z.el=M.el,be.vnode=z},te=(M,z,se,be,Fe,ye,Qe)=>{const _e=()=>{if(M.isMounted){let{next:je,bu:at,u:mt,parent:xe,vnode:Be}=M;{const At=m8(M);if(At){je&&(je.el=Be.el,q(M,je,Qe)),At.asyncDep.then(()=>{M.isUnmounted||_e()});return}}let Ye=je,kt;If(M,!1),je?(je.el=Be.el,q(M,je,Qe)):je=Be,at&&vv(at),(kt=je.props&&je.props.onVnodeBeforeUpdate)&&Ji(kt,xe,je,Be),If(M,!0);const xt=xP(M),Nt=M.subTree;M.subTree=xt,y(Nt,xt,A(Nt.el),j(Nt),M,Fe,ye),je.el=xt.el,Ye===null&&fB(M,xt.el),mt&&bs(mt,Fe),(kt=je.props&&je.props.onVnodeUpdated)&&bs(()=>Ji(kt,xe,je,Be),Fe)}else{let je;const{el:at,props:mt}=z,{bm:xe,m:Be,parent:Ye,root:kt,type:xt}=M,Nt=aA(z);If(M,!1),xe&&vv(xe),!Nt&&(je=mt&&mt.onVnodeBeforeMount)&&Ji(je,Ye,z),If(M,!0);{kt.ce&&kt.ce._def.shadowRoot!==!1&&kt.ce._injectChildStyle(xt);const At=M.subTree=xP(M);y(null,At,se,be,M,Fe,ye),z.el=At.el}if(Be&&bs(Be,Fe),!Nt&&(je=mt&&mt.onVnodeMounted)){const At=z;bs(()=>Ji(je,Ye,At),Fe)}(z.shapeFlag&256||Ye&&aA(Ye.vnode)&&Ye.vnode.shapeFlag&256)&&M.a&&bs(M.a,Fe),M.isMounted=!0,z=se=be=null}};M.scope.on();const Se=M.effect=new gL(_e);M.scope.off();const Ee=M.update=Se.run.bind(Se),Ue=M.job=Se.runIfDirty.bind(Se);Ue.i=M,Ue.id=M.uid,Se.scheduler=()=>sB(Ue),If(M,!0),Ee()},q=(M,z,se)=>{z.component=M;const be=M.vnode.props;M.vnode=z,M.next=null,LZ(M,z.props,be,se),$Z(M,z.children,se),Nc(),dP(M),Vc()},ce=(M,z,se,be,Fe,ye,Qe,_e,Se=!1)=>{const Ee=M&&M.children,Ue=M?M.shapeFlag:0,je=z.children,{patchFlag:at,shapeFlag:mt}=z;if(at>0){if(at&128){Z(Ee,je,se,be,Fe,ye,Qe,_e,Se);return}else if(at&256){le(Ee,je,se,be,Fe,ye,Qe,_e,Se);return}}mt&8?(Ue&16&&ae(Ee,Fe,ye),je!==Ee&&d(se,je)):Ue&16?mt&16?Z(Ee,je,se,be,Fe,ye,Qe,_e,Se):ae(Ee,Fe,ye,!0):(Ue&8&&d(se,""),mt&16&&x(je,se,be,Fe,ye,Qe,_e,Se))},le=(M,z,se,be,Fe,ye,Qe,_e,Se)=>{M=M||Av,z=z||Av;const Ee=M.length,Ue=z.length,je=Math.min(Ee,Ue);let at;for(at=0;at<je;at++){const mt=z[at]=Se?wd(z[at]):kl(z[at]);y(M[at],mt,se,null,Fe,ye,Qe,_e,Se)}Ee>Ue?ae(M,Fe,ye,!0,!1,je):x(z,se,be,Fe,ye,Qe,_e,Se,je)},Z=(M,z,se,be,Fe,ye,Qe,_e,Se)=>{let Ee=0;const Ue=z.length;let je=M.length-1,at=Ue-1;for(;Ee<=je&&Ee<=at;){const mt=M[Ee],xe=z[Ee]=Se?wd(z[Ee]):kl(z[Ee]);if(Tl(mt,xe))y(mt,xe,se,null,Fe,ye,Qe,_e,Se);else break;Ee++}for(;Ee<=je&&Ee<=at;){const mt=M[je],xe=z[at]=Se?wd(z[at]):kl(z[at]);if(Tl(mt,xe))y(mt,xe,se,null,Fe,ye,Qe,_e,Se);else break;je--,at--}if(Ee>je){if(Ee<=at){const mt=at+1,xe=mt<Ue?z[mt].el:be;for(;Ee<=at;)y(null,z[Ee]=Se?wd(z[Ee]):kl(z[Ee]),se,xe,Fe,ye,Qe,_e,Se),Ee++}}else if(Ee>at)for(;Ee<=je;)G(M[Ee],Fe,ye,!0),Ee++;else{const mt=Ee,xe=Ee,Be=new Map;for(Ee=xe;Ee<=at;Ee++){const bt=z[Ee]=Se?wd(z[Ee]):kl(z[Ee]);bt.key!=null&&Be.set(bt.key,Ee)}let Ye,kt=0;const xt=at-xe+1;let Nt=!1,At=0;const Ot=new Array(xt);for(Ee=0;Ee<xt;Ee++)Ot[Ee]=0;for(Ee=mt;Ee<=je;Ee++){const bt=M[Ee];if(kt>=xt){G(bt,Fe,ye,!0);continue}let Ze;if(bt.key!=null)Ze=Be.get(bt.key);else for(Ye=xe;Ye<=at;Ye++)if(Ot[Ye-xe]===0&&Tl(bt,z[Ye])){Ze=Ye;break}Ze===void 0?G(bt,Fe,ye,!0):(Ot[Ze-xe]=Ee+1,Ze>=At?At=Ze:Nt=!0,y(bt,z[Ze],se,null,Fe,ye,Qe,_e,Se),kt++)}const Dt=Nt?WZ(Ot):Av;for(Ye=Dt.length-1,Ee=xt-1;Ee>=0;Ee--){const bt=xe+Ee,Ze=z[bt],qt=z[bt+1],Vt=bt+1<Ue?qt.el||qt.placeholder:be;Ot[Ee]===0?y(null,Ze,se,Vt,Fe,ye,Qe,_e,Se):Nt&&(Ye<0||Ee!==Dt[Ye]?ne(Ze,se,Vt,2):Ye--)}}},ne=(M,z,se,be,Fe=null)=>{const{el:ye,type:Qe,transition:_e,children:Se,shapeFlag:Ee}=M;if(Ee&6){ne(M.component.subTree,z,se,be);return}if(Ee&128){M.suspense.move(z,se,be);return}if(Ee&64){Qe.move(M,z,se,X);return}if(Qe===ze){a(ye,z,se);for(let je=0;je<Se.length;je++)ne(Se[je],z,se,be);a(M.anchor,z,se);return}if(Qe===Fx){S(M,z,se);return}if(be!==2&&Ee&1&&_e)if(be===0)_e.beforeEnter(ye),a(ye,z,se),bs(()=>_e.enter(ye),Fe);else{const{leave:je,delayLeave:at,afterLeave:mt}=_e,xe=()=>{M.ctx.isUnmounted?r(ye):a(ye,z,se)},Be=()=>{ye._isLeaving&&ye[_c](!0),je(ye,()=>{xe(),mt&&mt()})};at?at(ye,xe,Be):Be()}else a(ye,z,se)},G=(M,z,se,be=!1,Fe=!1)=>{const{type:ye,props:Qe,ref:_e,children:Se,dynamicChildren:Ee,shapeFlag:Ue,patchFlag:je,dirs:at,cacheIndex:mt}=M;if(je===-2&&(Fe=!1),_e!=null&&(Nc(),qp(_e,null,se,M,!0),Vc()),mt!=null&&(z.renderCache[mt]=void 0),Ue&256){z.ctx.deactivate(M);return}const xe=Ue&1&&at,Be=!aA(M);let Ye;if(Be&&(Ye=Qe&&Qe.onVnodeBeforeUnmount)&&Ji(Ye,z,M),Ue&6)O(M.component,se,be);else{if(Ue&128){M.suspense.unmount(se,be);return}xe&&Tf(M,null,z,"beforeUnmount"),Ue&64?M.type.remove(M,z,se,X,be):Ee&&!Ee.hasOnce&&(ye!==ze||je>0&&je&64)?ae(Ee,z,se,!1,!0):(ye===ze&&je&384||!Fe&&Ue&16)&&ae(Se,z,se),be&&W(M)}(Be&&(Ye=Qe&&Qe.onVnodeUnmounted)||xe)&&bs(()=>{Ye&&Ji(Ye,z,M),xe&&Tf(M,null,z,"unmounted")},se)},W=M=>{const{type:z,el:se,anchor:be,transition:Fe}=M;if(z===ze){Q(se,be);return}if(z===Fx){B(M);return}const ye=()=>{r(se),Fe&&!Fe.persisted&&Fe.afterLeave&&Fe.afterLeave()};if(M.shapeFlag&1&&Fe&&!Fe.persisted){const{leave:Qe,delayLeave:_e}=Fe,Se=()=>Qe(se,ye);_e?_e(M.el,ye,Se):Se()}else ye()},Q=(M,z)=>{let se;for(;M!==z;)se=m(M),r(M),M=se;r(z)},O=(M,z,se)=>{const{bum:be,scope:Fe,job:ye,subTree:Qe,um:_e,m:Se,a:Ee}=M;T_(Se),T_(Ee),be&&vv(be),Fe.stop(),ye&&(ye.flags|=8,G(Qe,M,z,se)),_e&&bs(_e,z),bs(()=>{M.isUnmounted=!0},z)},ae=(M,z,se,be=!1,Fe=!1,ye=0)=>{for(let Qe=ye;Qe<M.length;Qe++)G(M[Qe],z,se,be,Fe)},j=M=>{if(M.shapeFlag&6)return j(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const z=m(M.anchor||M.el),se=z&&z[HL];return se?m(se):z};let J=!1;const ie=(M,z,se)=>{M==null?z._vnode&&G(z._vnode,null,null,!0):y(z._vnode||null,M,z,null,null,null,se),z._vnode=M,J||(J=!0,dP(),LL(),J=!1)},X={p:y,um:G,m:ne,r:W,mt:oe,mc:x,pc:ce,pbc:D,n:j,o:e};return{render:ie,hydrate:void 0,createApp:NZ(ie)}}function Ix({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function If({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function zZ(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function cB(e,t,n=!1){const a=e.children,r=t.children;if(kn(a)&&kn(r))for(let s=0;s<a.length;s++){const o=a[s];let l=r[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[s]=wd(r[s]),l.el=o.el),!n&&l.patchFlag!==-2&&cB(o,l)),l.type===yg&&l.patchFlag!==-1&&(l.el=o.el),l.type===ms&&!l.el&&(l.el=o.el)}}function WZ(e){const t=e.slice(),n=[0];let a,r,s,o,l;const c=e.length;for(a=0;a<c;a++){const f=e[a];if(f!==0){if(r=n[n.length-1],e[r]<f){t[a]=r,n.push(a);continue}for(s=0,o=n.length-1;s<o;)l=s+o>>1,e[n[l]]<f?s=l+1:o=l;f<e[n[s]]&&(s>0&&(t[a]=n[s-1]),n[s]=a)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function m8(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:m8(t)}function T_(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const KZ=Symbol.for("v-scx"),jZ=()=>Pn(KZ);function Er(e,t){return dB(e,null,t)}function Ge(e,t,n){return dB(e,t,n)}function dB(e,t,n=ur){const{immediate:a,deep:r,flush:s,once:o}=n,l=Ts({},n),c=t&&a||!t&&s!=="post";let f;if(I0){if(s==="sync"){const p=jZ();f=p.__watcherHandles||(p.__watcherHandles=[])}else if(!c){const p=()=>{};return p.stop=Iu,p.resume=Iu,p.pause=Iu,p}}const d=yo;l.call=(p,h,y)=>Wl(p,d,h,y);let A=!1;s==="post"?l.scheduler=p=>{bs(p,d&&d.suspense)}:s!=="sync"&&(A=!0,l.scheduler=(p,h)=>{h?p():sB(p)}),l.augmentJob=p=>{t&&(p.flags|=4),A&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const m=mZ(e,t,l);return I0&&(f?f.push(m):c&&m()),m}function qZ(e,t,n){const a=this.proxy,r=Sr(e)?e.includes(".")?v8(a,e):()=>a[e]:e.bind(a,a);let s;Wn(t)?s=t:(s=t.handler,n=t);const o=_g(this),l=dB(r,s.bind(a),n);return o(),l}function v8(e,t){const n=t.split(".");return()=>{let a=e;for(let r=0;r<n.length&&a;r++)a=a[n[r]];return a}}const YZ=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Wo(t)}Modifiers`]||e[`${df(t)}Modifiers`];function XZ(e,t,...n){if(e.isUnmounted)return;const a=e.vnode.props||ur;let r=n;const s=t.startsWith("update:"),o=s&&YZ(a,t.slice(7));o&&(o.trim&&(r=n.map(d=>Sr(d)?d.trim():d)),o.number&&(r=n.map(__)));let l,c=a[l=bx(t)]||a[l=bx(Wo(t))];!c&&s&&(c=a[l=bx(df(t))]),c&&Wl(c,e,6,r);const f=a[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Wl(f,e,6,r)}}const JZ=new WeakMap;function h8(e,t,n=!1){const a=n?JZ:t.emitsCache,r=a.get(e);if(r!==void 0)return r;const s=e.emits;let o={},l=!1;if(!Wn(e)){const c=f=>{const d=h8(f,t,!0);d&&(l=!0,Ts(o,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!s&&!l?(ir(e)&&a.set(e,null),null):(kn(s)?s.forEach(c=>o[c]=null):Ts(o,s),ir(e)&&a.set(e,o),o)}function lw(e,t){return!e||!Z2(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ja(e,t[0].toLowerCase()+t.slice(1))||Ja(e,df(t))||Ja(e,t))}function xP(e){const{type:t,vnode:n,proxy:a,withProxy:r,propsOptions:[s],slots:o,attrs:l,emit:c,render:f,renderCache:d,props:A,data:m,setupState:p,ctx:h,inheritAttrs:y}=e,g=E_(e);let _,b;try{if(n.shapeFlag&4){const B=r||a,F=B;_=kl(f.call(F,B,d,A,p,m,h)),b=l}else{const B=t;_=kl(B.length>1?B(A,{attrs:l,slots:o,emit:c}):B(A,null)),b=t.props?l:eee(l)}}catch(B){Xp.length=0,gg(B,e,1),_=i(ms)}let S=_;if(b&&y!==!1){const B=Object.keys(b),{shapeFlag:F}=S;B.length&&F&7&&(s&&B.some(jk)&&(b=tee(b,s)),S=Ru(S,b,!1,!0))}return n.dirs&&(S=Ru(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&Wd(S,n.transition),_=S,E_(g),_}function ZZ(e,t=!0){let n;for(let a=0;a<e.length;a++){const r=e[a];if(Kd(r)){if(r.type!==ms||r.children==="v-if"){if(n)return;n=r}}else return}return n}const eee=e=>{let t;for(const n in e)(n==="class"||n==="style"||Z2(n))&&((t||(t={}))[n]=e[n]);return t},tee=(e,t)=>{const n={};for(const a in e)(!jk(a)||!(a.slice(9)in t))&&(n[a]=e[a]);return n};function nee(e,t,n){const{props:a,children:r,component:s}=e,{props:o,children:l,patchFlag:c}=t,f=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return a?CP(a,o,f):!!o;if(c&8){const d=t.dynamicProps;for(let A=0;A<d.length;A++){const m=d[A];if(o[m]!==a[m]&&!lw(f,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:a===o?!1:a?o?CP(a,o,f):!0:!!o;return!1}function CP(e,t,n){const a=Object.keys(t);if(a.length!==Object.keys(e).length)return!0;for(let r=0;r<a.length;r++){const s=a[r];if(t[s]!==e[s]&&!lw(n,s))return!0}return!1}function fB({vnode:e,parent:t},n){for(;t;){const a=t.subTree;if(a.suspense&&a.suspense.activeBranch===e&&(a.el=e.el),a===e)(e=t.vnode).el=n,t=t.parent;else break}}const I_=e=>e.__isSuspense;let gS=0;const aee={name:"Suspense",__isSuspense:!0,process(e,t,n,a,r,s,o,l,c,f){if(e==null)ree(t,n,a,r,s,o,l,c,f);else{if(s&&s.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}see(e,t,n,a,r,o,l,c,f)}},hydrate:oee,normalize:iee},yS=aee;function T0(e,t){const n=e.props&&e.props[t];Wn(n)&&n()}function ree(e,t,n,a,r,s,o,l,c){const{p:f,o:{createElement:d}}=c,A=d("div"),m=e.suspense=p8(e,r,a,t,A,n,s,o,l,c);f(null,m.pendingBranch=e.ssContent,A,null,a,m,s,o),m.deps>0?(T0(e,"onPending"),T0(e,"onFallback"),f(null,e.ssFallback,t,n,a,null,s,o),yv(m,e.ssFallback)):m.resolve(!1,!0)}function see(e,t,n,a,r,s,o,l,{p:c,um:f,o:{createElement:d}}){const A=t.suspense=e.suspense;A.vnode=t,t.el=e.el;const m=t.ssContent,p=t.ssFallback,{activeBranch:h,pendingBranch:y,isInFallback:g,isHydrating:_}=A;if(y)A.pendingBranch=m,Tl(y,m)?(c(y,m,A.hiddenContainer,null,r,A,s,o,l),A.deps<=0?A.resolve():g&&(_||(c(h,p,n,a,r,null,s,o,l),yv(A,p)))):(A.pendingId=gS++,_?(A.isHydrating=!1,A.activeBranch=y):f(y,r,A),A.deps=0,A.effects.length=0,A.hiddenContainer=d("div"),g?(c(null,m,A.hiddenContainer,null,r,A,s,o,l),A.deps<=0?A.resolve():(c(h,p,n,a,r,null,s,o,l),yv(A,p))):h&&Tl(h,m)?(c(h,m,n,a,r,A,s,o,l),A.resolve(!0)):(c(null,m,A.hiddenContainer,null,r,A,s,o,l),A.deps<=0&&A.resolve()));else if(h&&Tl(h,m))c(h,m,n,a,r,A,s,o,l),yv(A,m);else if(T0(t,"onPending"),A.pendingBranch=m,m.shapeFlag&512?A.pendingId=m.component.suspenseId:A.pendingId=gS++,c(null,m,A.hiddenContainer,null,r,A,s,o,l),A.deps<=0)A.resolve();else{const{timeout:b,pendingId:S}=A;b>0?setTimeout(()=>{A.pendingId===S&&A.fallback(p)},b):b===0&&A.fallback(p)}}function p8(e,t,n,a,r,s,o,l,c,f,d=!1){const{p:A,m,um:p,n:h,o:{parentNode:y,remove:g}}=f;let _;const b=uee(e);b&&t&&t.pendingBranch&&(_=t.pendingId,t.deps++);const S=e.props?fL(e.props.timeout):void 0,B=s,F={vnode:e,parent:t,parentComponent:n,namespace:o,container:a,hiddenContainer:r,deps:0,pendingId:gS++,timeout:typeof S=="number"?S:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(T=!1,E=!1){const{vnode:x,activeBranch:C,pendingBranch:D,pendingId:U,effects:L,parentComponent:H,container:oe}=F;let de=!1;F.isHydrating?F.isHydrating=!1:T||(de=C&&D.transition&&D.transition.mode==="out-in",de&&(C.transition.afterLeave=()=>{U===F.pendingId&&(m(D,oe,s===B?h(C):s,0),fS(L))}),C&&(y(C.el)===oe&&(s=h(C)),p(C,H,F,!0)),de||m(D,oe,s,0)),yv(F,D),F.pendingBranch=null,F.isInFallback=!1;let te=F.parent,q=!1;for(;te;){if(te.pendingBranch){te.effects.push(...L),q=!0;break}te=te.parent}!q&&!de&&fS(L),F.effects=[],b&&t&&t.pendingBranch&&_===t.pendingId&&(t.deps--,t.deps===0&&!E&&t.resolve()),T0(x,"onResolve")},fallback(T){if(!F.pendingBranch)return;const{vnode:E,activeBranch:x,parentComponent:C,container:D,namespace:U}=F;T0(E,"onFallback");const L=h(x),H=()=>{F.isInFallback&&(A(null,T,D,L,C,null,U,l,c),yv(F,T))},oe=T.transition&&T.transition.mode==="out-in";oe&&(x.transition.afterLeave=H),F.isInFallback=!0,p(x,C,null,!0),oe||H()},move(T,E,x){F.activeBranch&&m(F.activeBranch,T,E,x),F.container=T},next(){return F.activeBranch&&h(F.activeBranch)},registerDep(T,E,x){const C=!!F.pendingBranch;C&&F.deps++;const D=T.vnode.el;T.asyncDep.catch(U=>{gg(U,T,0)}).then(U=>{if(T.isUnmounted||F.isUnmounted||F.pendingId!==T.suspenseId)return;T.asyncResolved=!0;const{vnode:L}=T;wS(T,U),D&&(L.el=D);const H=!D&&T.subTree.el;E(T,L,y(D||T.subTree.el),D?null:h(T.subTree),F,o,x),H&&g(H),fB(T,L.el),C&&--F.deps===0&&F.resolve()})},unmount(T,E){F.isUnmounted=!0,F.activeBranch&&p(F.activeBranch,n,T,E),F.pendingBranch&&p(F.pendingBranch,n,T,E)}};return F}function oee(e,t,n,a,r,s,o,l,c){const f=t.suspense=p8(t,a,n,e.parentNode,document.createElement("div"),null,r,s,o,l,!0),d=c(e,f.pendingBranch=t.ssContent,n,f,s,o);return f.deps===0&&f.resolve(!1,!0),d}function iee(e){const{shapeFlag:t,children:n}=e,a=t&32;e.ssContent=SP(a?n.default:n),e.ssFallback=a?SP(n.fallback):i(ms)}function SP(e){let t;if(Wn(e)){const n=Uv&&e._c;n&&(e._d=!1,P()),e=e(),n&&(e._d=!0,t=li,g8())}return kn(e)&&(e=ZZ(e)),e=kl(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function lee(e,t){t&&t.pendingBranch?kn(e)?t.effects.push(...e):t.effects.push(e):fS(e)}function yv(e,t){e.activeBranch=t;const{vnode:n,parentComponent:a}=e;let r=t.el;for(;!r&&t.component;)t=t.component.subTree,r=t.el;n.el=r,a&&a.subTree===n&&(a.vnode.el=r,fB(a,r))}function uee(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const ze=Symbol.for("v-fgt"),yg=Symbol.for("v-txt"),ms=Symbol.for("v-cmt"),Fx=Symbol.for("v-stc"),Xp=[];let li=null;function P(e=!1){Xp.push(li=e?null:[])}function g8(){Xp.pop(),li=Xp[Xp.length-1]||null}let Uv=1;function F_(e,t=!1){Uv+=e,e<0&&li&&t&&(li.hasOnce=!0)}function y8(e){return e.dynamicChildren=Uv>0?li||Av:null,g8(),Uv>0&&li&&li.push(e),e}function Ae(e,t,n,a,r,s){return y8(v(e,t,n,a,r,s,!0))}function he(e,t,n,a,r){return y8(i(e,t,n,a,r,!0))}function Kd(e){return e?e.__v_isVNode===!0:!1}function Tl(e,t){return e.type===t.type&&e.key===t.key}const _8=({key:e})=>e??null,Xy=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Sr(e)||ts(e)||Wn(e)?{i:eo,r:e,k:t,f:!!n}:e:null);function v(e,t=null,n=null,a=0,r=null,s=e===ze?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&_8(t),ref:t&&Xy(t),scopeId:OL,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:a,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:eo};return l?(AB(c,n),s&128&&e.normalize(c)):n&&(c.shapeFlag|=Sr(n)?8:16),Uv>0&&!o&&li&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&li.push(c),c}const i=cee;function cee(e,t=null,n=null,a=0,r=null,s=!1){if((!e||e===e8)&&(e=ms),Kd(e)){const l=Ru(e,t,!0);return n&&AB(l,n),Uv>0&&!s&&li&&(l.shapeFlag&6?li[li.indexOf(e)]=l:li.push(l)),l.patchFlag=-2,l}if(gee(e)&&(e=e.__vccOpts),t){t=Al(t);let{class:l,style:c}=t;l&&!Sr(l)&&(t.class=lt(l)),ir(c)&&(rB(c)&&!kn(c)&&(c=Ts({},c)),t.style=Mt(c))}const o=Sr(e)?1:I_(e)?128:$L(e)?64:ir(e)?4:Wn(e)?2:0;return v(e,t,n,a,r,o,s,!0)}function Al(e){return e?rB(e)||l8(e)?Ts({},e):e:null}function Ru(e,t,n=!1,a=!1){const{props:r,ref:s,patchFlag:o,children:l,transition:c}=e,f=t?Ie(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&_8(f),ref:t&&t.ref?n&&s?kn(s)?s.concat(Xy(t)):[s,Xy(t)]:Xy(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ze?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ru(e.ssContent),ssFallback:e.ssFallback&&Ru(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&a&&Wd(d,c.clone(d)),d}function N(e=" ",t=0){return i(yg,null,e,t)}function ge(e="",t=!1){return t?(P(),he(ms,null,e)):i(ms,null,e)}function kl(e){return e==null||typeof e=="boolean"?i(ms):kn(e)?i(ze,null,e.slice()):Kd(e)?wd(e):i(yg,null,String(e))}function wd(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ru(e)}function AB(e,t){let n=0;const{shapeFlag:a}=e;if(t==null)t=null;else if(kn(t))n=16;else if(typeof t=="object")if(a&65){const r=t.default;r&&(r._c&&(r._d=!1),AB(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!l8(t)?t._ctx=eo:r===3&&eo&&(eo.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Wn(t)?(t={default:t,_ctx:eo},n=32):(t=String(t),a&64?(n=16,t=[N(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ie(...e){const t={};for(let n=0;n<e.length;n++){const a=e[n];for(const r in a)if(r==="class")t.class!==a.class&&(t.class=lt([t.class,a.class]));else if(r==="style")t.style=Mt([t.style,a.style]);else if(Z2(r)){const s=t[r],o=a[r];o&&s!==o&&!(kn(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=a[r])}return t}function Ji(e,t,n,a=null){Wl(e,t,7,[n,a])}const dee=s8();let fee=0;function Aee(e,t,n){const a=e.type,r=(t?t.appContext:e.appContext)||dee,s={uid:fee++,vnode:e,type:a,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:c8(a,r),emitsOptions:h8(a,r),emit:null,emitted:null,propsDefaults:ur,inheritAttrs:a.inheritAttrs,ctx:ur,data:ur,props:ur,attrs:ur,slots:ur,refs:ur,setupState:ur,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=XZ.bind(null,s),e.ce&&e.ce(s),s}let yo=null;const HA=()=>yo||eo;let P_,_S;{const e=tw(),t=(n,a)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(a),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};P_=t("__VUE_INSTANCE_SETTERS__",n=>yo=n),_S=t("__VUE_SSR_SETTERS__",n=>I0=n)}const _g=e=>{const t=yo;return P_(e),e.scope.on(),()=>{e.scope.off(),P_(t)}},EP=()=>{yo&&yo.scope.off(),P_(null)};function w8(e){return e.vnode.shapeFlag&4}let I0=!1;function mee(e,t=!1,n=!1){t&&_S(t);const{props:a,children:r}=e.vnode,s=w8(e);VZ(e,a,s,t),HZ(e,r,n||t);const o=s?vee(e,t):void 0;return t&&_S(!1),o}function vee(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,TZ);const{setup:a}=n;if(a){Nc();const r=e.setupContext=a.length>1?pee(e):null,s=_g(e),o=pg(a,e,0,[e.props,r]),l=lL(o);if(Vc(),s(),(l||e.sp)&&!aA(e)&&YL(e),l){if(o.then(EP,EP),t)return o.then(c=>{wS(e,c)}).catch(c=>{gg(c,e,0)});e.asyncDep=o}else wS(e,o)}else b8(e)}function wS(e,t,n){Wn(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ir(t)&&(e.setupState=UL(t)),b8(e)}function b8(e,t,n){const a=e.type;e.render||(e.render=a.render||Iu);{const r=_g(e);Nc();try{IZ(e)}finally{Vc(),r()}}}const hee={get(e,t){return ho(e,"get",""),e[t]}};function pee(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,hee),slots:e.slots,emit:e.emit,expose:t}}function uw(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(UL(b_(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Yp)return Yp[n](e)},has(t,n){return n in t||n in Yp}})):e.proxy}function bS(e,t=!0){return Wn(e)?e.displayName||e.name:e.name||t&&e.__name}function gee(e){return Wn(e)&&"__vccOpts"in e}const ee=(e,t)=>fZ(e,t,I0);function nu(e,t,n){const a=(s,o,l)=>{F_(-1);try{return i(s,o,l)}finally{F_(1)}},r=arguments.length;return r===2?ir(t)&&!kn(t)?Kd(t)?a(e,null,[t]):a(e,t):a(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Kd(n)&&(n=[n]),a(e,t,n))}const yee="3.5.21";let xS;const kP=typeof window<"u"&&window.trustedTypes;if(kP)try{xS=kP.createPolicy("vue",{createHTML:e=>e})}catch{}const x8=xS?e=>xS.createHTML(e):e=>e,_ee="http://www.w3.org/2000/svg",wee="http://www.w3.org/1998/Math/MathML",yc=typeof document<"u"?document:null,BP=yc&&yc.createElement("template"),bee={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,a)=>{const r=t==="svg"?yc.createElementNS(_ee,e):t==="mathml"?yc.createElementNS(wee,e):n?yc.createElement(e,{is:n}):yc.createElement(e);return e==="select"&&a&&a.multiple!=null&&r.setAttribute("multiple",a.multiple),r},createText:e=>yc.createTextNode(e),createComment:e=>yc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>yc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,a,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{BP.innerHTML=x8(a==="svg"?`<svg>${e}</svg>`:a==="mathml"?`<math>${e}</math>`:e);const l=BP.content;if(a==="svg"||a==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},dd="transition",lp="animation",Rv=Symbol("_vtc"),C8={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},S8=Ts({},WL,C8),xee=e=>(e.displayName="Transition",e.props=S8,e),jd=xee((e,{slots:t})=>nu(_Z,E8(e),t)),Ff=(e,t=[])=>{kn(e)?e.forEach(n=>n(...t)):e&&e(...t)},TP=e=>e?kn(e)?e.some(t=>t.length>1):e.length>1:!1;function E8(e){const t={};for(const L in e)L in C8||(t[L]=e[L]);if(e.css===!1)return t;const{name:n="v",type:a,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:f=o,appearToClass:d=l,leaveFromClass:A=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,h=Cee(r),y=h&&h[0],g=h&&h[1],{onBeforeEnter:_,onEnter:b,onEnterCancelled:S,onLeave:B,onLeaveCancelled:F,onBeforeAppear:T=_,onAppear:E=b,onAppearCancelled:x=S}=t,C=(L,H,oe,de)=>{L._enterCancelled=de,pd(L,H?d:l),pd(L,H?f:o),oe&&oe()},D=(L,H)=>{L._isLeaving=!1,pd(L,A),pd(L,p),pd(L,m),H&&H()},U=L=>(H,oe)=>{const de=L?E:b,te=()=>C(H,L,oe);Ff(de,[H,te]),IP(()=>{pd(H,L?c:s),_u(H,L?d:l),TP(de)||FP(H,a,y,te)})};return Ts(t,{onBeforeEnter(L){Ff(_,[L]),_u(L,s),_u(L,o)},onBeforeAppear(L){Ff(T,[L]),_u(L,c),_u(L,f)},onEnter:U(!1),onAppear:U(!0),onLeave(L,H){L._isLeaving=!0;const oe=()=>D(L,H);_u(L,A),L._enterCancelled?(_u(L,m),CS()):(CS(),_u(L,m)),IP(()=>{L._isLeaving&&(pd(L,A),_u(L,p),TP(B)||FP(L,a,g,oe))}),Ff(B,[L,oe])},onEnterCancelled(L){C(L,!1,void 0,!0),Ff(S,[L])},onAppearCancelled(L){C(L,!0,void 0,!0),Ff(x,[L])},onLeaveCancelled(L){D(L),Ff(F,[L])}})}function Cee(e){if(e==null)return null;if(ir(e))return[Px(e.enter),Px(e.leave)];{const t=Px(e);return[t,t]}}function Px(e){return fL(e)}function _u(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Rv]||(e[Rv]=new Set)).add(t)}function pd(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.remove(a));const n=e[Rv];n&&(n.delete(t),n.size||(e[Rv]=void 0))}function IP(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let See=0;function FP(e,t,n,a){const r=e._endId=++See,s=()=>{r===e._endId&&a()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:l,propCount:c}=k8(e,t);if(!o)return a();const f=o+"end";let d=0;const A=()=>{e.removeEventListener(f,m),s()},m=p=>{p.target===e&&++d>=c&&A()};setTimeout(()=>{d<c&&A()},l+1),e.addEventListener(f,m)}function k8(e,t){const n=window.getComputedStyle(e),a=h=>(n[h]||"").split(", "),r=a(`${dd}Delay`),s=a(`${dd}Duration`),o=PP(r,s),l=a(`${lp}Delay`),c=a(`${lp}Duration`),f=PP(l,c);let d=null,A=0,m=0;t===dd?o>0&&(d=dd,A=o,m=s.length):t===lp?f>0&&(d=lp,A=f,m=c.length):(A=Math.max(o,f),d=A>0?o>f?dd:lp:null,m=d?d===dd?s.length:c.length:0);const p=d===dd&&/\b(?:transform|all)(?:,|$)/.test(a(`${dd}Property`).toString());return{type:d,timeout:A,propCount:m,hasTransform:p}}function PP(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,a)=>DP(n)+DP(e[a])))}function DP(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function CS(){return document.body.offsetHeight}function Eee(e,t,n){const a=e[Rv];a&&(t=(t?[t,...a]:[...a]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const D_=Symbol("_vod"),B8=Symbol("_vsh"),fi={name:"show",beforeMount(e,{value:t},{transition:n}){e[D_]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):up(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:a}){!t!=!n&&(a?t?(a.beforeEnter(e),up(e,!0),a.enter(e)):a.leave(e,()=>{up(e,!1)}):up(e,t))},beforeUnmount(e,{value:t}){up(e,t)}};function up(e,t){e.style.display=t?e[D_]:"none",e[B8]=!t}const kee=Symbol(""),Bee=/(?:^|;)\s*display\s*:/;function Tee(e,t,n){const a=e.style,r=Sr(n);let s=!1;if(n&&!r){if(t)if(Sr(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Jy(a,l,"")}else for(const o in t)n[o]==null&&Jy(a,o,"");for(const o in n)o==="display"&&(s=!0),Jy(a,o,n[o])}else if(r){if(t!==n){const o=a[kee];o&&(n+=";"+o),a.cssText=n,s=Bee.test(n)}}else t&&e.removeAttribute("style");D_ in e&&(e[D_]=s?a.display:"",e[B8]&&(a.display="none"))}const UP=/\s*!important$/;function Jy(e,t,n){if(kn(n))n.forEach(a=>Jy(e,t,a));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const a=Iee(e,t);UP.test(n)?e.setProperty(df(a),n.replace(UP,""),"important"):e[a]=n}}const RP=["Webkit","Moz","ms"],Dx={};function Iee(e,t){const n=Dx[t];if(n)return n;let a=Wo(t);if(a!=="filter"&&a in e)return Dx[t]=a;a=Qu(a);for(let r=0;r<RP.length;r++){const s=RP[r]+a;if(s in e)return Dx[t]=s}return t}const NP="http://www.w3.org/1999/xlink";function VP(e,t,n,a,r,s=OJ(t)){a&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(NP,t.slice(6,t.length)):e.setAttributeNS(NP,t,n):n==null||s&&!AL(n)?e.removeAttribute(t):e.setAttribute(t,s?"":zl(n)?String(n):n)}function LP(e,t,n,a,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?x8(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=AL(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(r||t)}function xc(e,t,n,a){e.addEventListener(t,n,a)}function Fee(e,t,n,a){e.removeEventListener(t,n,a)}const MP=Symbol("_vei");function Pee(e,t,n,a,r=null){const s=e[MP]||(e[MP]={}),o=s[t];if(a&&o)o.value=a;else{const[l,c]=Dee(t);if(a){const f=s[t]=Nee(a,r);xc(e,l,f,c)}else o&&(Fee(e,l,o,c),s[t]=void 0)}}const OP=/(?:Once|Passive|Capture)$/;function Dee(e){let t;if(OP.test(e)){t={};let a;for(;a=e.match(OP);)e=e.slice(0,e.length-a[0].length),t[a[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):df(e.slice(2)),t]}let Ux=0;const Uee=Promise.resolve(),Ree=()=>Ux||(Uee.then(()=>Ux=0),Ux=Date.now());function Nee(e,t){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;Wl(Vee(a,n.value),t,5,[a])};return n.value=e,n.attached=Ree(),n}function Vee(e,t){if(kn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(a=>r=>!r._stopped&&a&&a(r))}else return t}const HP=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Lee=(e,t,n,a,r,s)=>{const o=r==="svg";t==="class"?Eee(e,a,o):t==="style"?Tee(e,n,a):Z2(t)?jk(t)||Pee(e,t,n,a,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Mee(e,t,a,o))?(LP(e,t,a),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&VP(e,t,a,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Sr(a))?LP(e,Wo(t),a,s,t):(t==="true-value"?e._trueValue=a:t==="false-value"&&(e._falseValue=a),VP(e,t,a,o))};function Mee(e,t,n,a){if(a)return!!(t==="innerHTML"||t==="textContent"||t in e&&HP(t)&&Wn(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return HP(t)&&Sr(n)?!1:t in e}const T8=new WeakMap,I8=new WeakMap,U_=Symbol("_moveCb"),$P=Symbol("_enterCb"),Oee=e=>(delete e.props.mode,e),Hee=Oee({name:"TransitionGroup",props:Ts({},S8,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=HA(),a=zL();let r,s;return ow(()=>{if(!r.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!zee(r[0].el,n.vnode.el,o)){r=[];return}r.forEach($ee),r.forEach(Qee);const l=r.filter(Gee);CS(),l.forEach(c=>{const f=c.el,d=f.style;_u(f,o),d.transform=d.webkitTransform=d.transitionDuration="";const A=f[U_]=m=>{m&&m.target!==f||(!m||m.propertyName.endsWith("transform"))&&(f.removeEventListener("transitionend",A),f[U_]=null,pd(f,o))};f.addEventListener("transitionend",A)}),r=[]}),()=>{const o=Sn(e),l=E8(o);let c=o.tag||ze;if(r=[],s)for(let f=0;f<s.length;f++){const d=s[f];d.el&&d.el instanceof Element&&(r.push(d),Wd(d,B0(d,l,a,n)),T8.set(d,d.el.getBoundingClientRect()))}s=t.default?oB(t.default()):[];for(let f=0;f<s.length;f++){const d=s[f];d.key!=null&&Wd(d,B0(d,l,a,n))}return i(c,null,s)}}}),mB=Hee;function $ee(e){const t=e.el;t[U_]&&t[U_](),t[$P]&&t[$P]()}function Qee(e){I8.set(e,e.el.getBoundingClientRect())}function Gee(e){const t=T8.get(e),n=I8.get(e),a=t.left-n.left,r=t.top-n.top;if(a||r){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${a}px,${r}px)`,s.transitionDuration="0s",e}}function zee(e,t,n){const a=e.cloneNode(),r=e[Rv];r&&r.forEach(l=>{l.split(/\s+/).forEach(c=>c&&a.classList.remove(c))}),n.split(/\s+/).forEach(l=>l&&a.classList.add(l)),a.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(a);const{hasTransform:o}=k8(a);return s.removeChild(a),o}const qd=e=>{const t=e.props["onUpdate:modelValue"]||!1;return kn(t)?n=>vv(t,n):t};function Wee(e){e.target.composing=!0}function QP(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ll=Symbol("_assign"),Wf={created(e,{modifiers:{lazy:t,trim:n,number:a}},r){e[ll]=qd(r);const s=a||r.props&&r.props.type==="number";xc(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),s&&(l=__(l)),e[ll](l)}),n&&xc(e,"change",()=>{e.value=e.value.trim()}),t||(xc(e,"compositionstart",Wee),xc(e,"compositionend",QP),xc(e,"change",QP))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:a,trim:r,number:s}},o){if(e[ll]=qd(o),e.composing)return;const l=(s||e.type==="number")&&!/^0\d/.test(e.value)?__(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(a&&t===n||r&&e.value.trim()===c)||(e.value=c))}},Kee={deep:!0,created(e,t,n){e[ll]=qd(n),xc(e,"change",()=>{const a=e._modelValue,r=Nv(e),s=e.checked,o=e[ll];if(kn(a)){const l=Xk(a,r),c=l!==-1;if(s&&!c)o(a.concat(r));else if(!s&&c){const f=[...a];f.splice(l,1),o(f)}}else if(ih(a)){const l=new Set(a);s?l.add(r):l.delete(r),o(l)}else o(F8(e,s))})},mounted:GP,beforeUpdate(e,t,n){e[ll]=qd(n),GP(e,t,n)}};function GP(e,{value:t,oldValue:n},a){e._modelValue=t;let r;if(kn(t))r=Xk(t,a.props.value)>-1;else if(ih(t))r=t.has(a.props.value);else{if(t===n)return;r=vA(t,F8(e,!0))}e.checked!==r&&(e.checked=r)}const jee={created(e,{value:t},n){e.checked=vA(t,n.props.value),e[ll]=qd(n),xc(e,"change",()=>{e[ll](Nv(e))})},beforeUpdate(e,{value:t,oldValue:n},a){e[ll]=qd(a),t!==n&&(e.checked=vA(t,a.props.value))}},qee={deep:!0,created(e,{value:t,modifiers:{number:n}},a){const r=ih(t);xc(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?__(Nv(o)):Nv(o));e[ll](e.multiple?r?new Set(s):s:s[0]),e._assigning=!0,Cn(()=>{e._assigning=!1})}),e[ll]=qd(a)},mounted(e,{value:t}){zP(e,t)},beforeUpdate(e,t,n){e[ll]=qd(n)},updated(e,{value:t}){e._assigning||zP(e,t)}};function zP(e,t){const n=e.multiple,a=kn(t);if(!(n&&!a&&!ih(t))){for(let r=0,s=e.options.length;r<s;r++){const o=e.options[r],l=Nv(o);if(n)if(a){const c=typeof l;c==="string"||c==="number"?o.selected=t.some(f=>String(f)===String(l)):o.selected=Xk(t,l)>-1}else o.selected=t.has(l);else if(vA(Nv(o),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Nv(e){return"_value"in e?e._value:e.value}function F8(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const P8={created(e,t,n){J1(e,t,n,null,"created")},mounted(e,t,n){J1(e,t,n,null,"mounted")},beforeUpdate(e,t,n,a){J1(e,t,n,a,"beforeUpdate")},updated(e,t,n,a){J1(e,t,n,a,"updated")}};function Yee(e,t){switch(e){case"SELECT":return qee;case"TEXTAREA":return Wf;default:switch(t){case"checkbox":return Kee;case"radio":return jee;default:return Wf}}}function J1(e,t,n,a,r){const o=Yee(e.tagName,n.props&&n.props.type)[r];o&&o(e,t,n,a)}const Xee=["ctrl","shift","alt","meta"],Jee={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Xee.some(n=>e[`${n}Key`]&&!t.includes(n))},gn=(e,t)=>{const n=e._withMods||(e._withMods={}),a=t.join(".");return n[a]||(n[a]=((r,...s)=>{for(let o=0;o<t.length;o++){const l=Jee[t[o]];if(l&&l(r,t))return}return e(r,...s)}))},Zee={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Yd=(e,t)=>{const n=e._withKeys||(e._withKeys={}),a=t.join(".");return n[a]||(n[a]=(r=>{if(!("key"in r))return;const s=df(r.key);if(t.some(o=>o===s||Zee[o]===s))return e(r)}))},ete=Ts({patchProp:Lee},bee);let WP;function D8(){return WP||(WP=QZ(ete))}const U8=((...e)=>{D8().render(...e)}),tte=((...e)=>{const t=D8().createApp(...e),{mount:n}=t;return t.mount=a=>{const r=ate(a);if(!r)return;const s=t._component;!Wn(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,nte(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t});function nte(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function ate(e){return Sr(e)?document.querySelector(e):e}function ko(e,t){let n;function a(){n=Gd(),n.run(()=>t.length?t(()=>{n?.stop(),a()}):t())}Ge(e,r=>{r&&!n?a():r||(n?.stop(),n=void 0)},{immediate:!0}),hs(()=>{n?.stop()})}const Ua=typeof window<"u",vB=Ua&&"IntersectionObserver"in window,rte=Ua&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),KP=Ua&&"EyeDropper"in window,ste=Ua&&"matchMedia"in window&&typeof window.matchMedia=="function";function jP(e,t,n){ote(e,t),t.set(e,n)}function ote(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qP(e,t,n){return e.set(R8(e,t),n),n}function vc(e,t){return e.get(R8(e,t))}function R8(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function N8(e,t,n){const a=t.length-1;if(a<0)return e===void 0?n:e;for(let r=0;r<a;r++){if(e==null)return n;e=e[t[r]]}return e==null||e[t[a]]===void 0?n:e[t[a]]}function ks(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const n=Object.keys(e);return n.length!==Object.keys(t).length?!1:n.every(a=>ks(e[a],t[a]))}function hA(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),N8(e,t.split("."),n))}function Or(e,t,n){if(t===!0)return e===void 0?n:e;if(t==null||typeof t=="boolean")return n;if(e!==Object(e)){if(typeof t!="function")return n;const r=t(e,n);return typeof r>"u"?n:r}if(typeof t=="string")return hA(e,t,n);if(Array.isArray(t))return N8(e,t,n);if(typeof t!="function")return n;const a=t(e,n);return typeof a>"u"?n:a}function Bi(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,a)=>t+a)}function Zt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const n=Number(e);return isNaN(n)?String(e):isFinite(n)?`${n}${t}`:void 0}function F0(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function YP(e){let t;return e!==null&&typeof e=="object"&&((t=Object.getPrototypeOf(e))===Object.prototype||t===null)}function hB(e){if(e&&"$el"in e){const t=e.$el;return t?.nodeType===Node.TEXT_NODE?t.nextElementSibling:t}return e}const SS=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function V8(e){return Object.keys(e)}function Kf(e,t){return t.every(n=>e.hasOwnProperty(n))}function jc(e,t){const n={};for(const a of t)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function ES(e,t,n){const a=Object.create(null),r=Object.create(null);for(const s in e)t.some(o=>o instanceof RegExp?o.test(s):o===s)?a[s]=e[s]:r[s]=e[s];return[a,r]}function Wa(e,t){const n={...e};return t.forEach(a=>delete n[a]),n}const L8=/^on[^a-z]/,pB=e=>L8.test(e),ite=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],lte=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function ute(e){return e.isComposing&&lte.includes(e.key)}function ff(e){const[t,n]=ES(e,[L8]),a=Wa(t,ite),[r,s]=ES(n,["class","style","id",/^data-/]);return Object.assign(r,t),Object.assign(s,a),[r,s]}function xr(e){return e==null?[]:Array.isArray(e)?e:[e]}function M8(e,t){let n=0;const a=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];clearTimeout(n),n=setTimeout(()=>e(...s),Oe(t))};return a.clear=()=>{clearTimeout(n)},a.immediate=e,a}function ar(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function XP(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function JP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function ZP(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-e.length))+e}function cte(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let a=0;for(;a<e.length;)n.push(e.substr(a,t)),a+=t;return n}function eD(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<t)return`${e} B`;const n=t===1024?["Ki","Mi","Gi"]:["k","M","G"];let a=-1;for(;Math.abs(e)>=t&&a<n.length-1;)e/=t,++a;return`${e.toFixed(1)} ${n[a]}B`}function bo(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const a={};for(const r in e)a[r]=e[r];for(const r in t){const s=e[r],o=t[r];if(YP(s)&&YP(o)){a[r]=bo(s,o,n);continue}if(n&&Array.isArray(s)&&Array.isArray(o)){a[r]=n(s,o);continue}a[r]=o}return a}function O8(e){return e.map(t=>t.type===ze?O8(t.children):t).flat()}function rA(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(rA.cache.has(e))return rA.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return rA.cache.set(e,t),t}rA.cache=new Map;function av(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(n=>av(e,n)).flat(1);if(t.suspense)return av(e,t.ssContent);if(Array.isArray(t.children))return t.children.map(n=>av(e,n)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return av(e,t.component.subTree).flat(1)}return[]}var Fm=new WeakMap,Pf=new WeakMap;class H8{constructor(t){jP(this,Fm,[]),jP(this,Pf,0),this.size=t}get isFull(){return vc(Fm,this).length===this.size}push(t){vc(Fm,this)[vc(Pf,this)]=t,qP(Pf,this,(vc(Pf,this)+1)%this.size)}values(){return vc(Fm,this).slice(vc(Pf,this)).concat(vc(Fm,this).slice(0,vc(Pf,this)))}clear(){vc(Fm,this).length=0,qP(Pf,this,0)}}function dte(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function gB(e){const t=As({});Er(()=>{const a=e();for(const r in a)t[r]=a[r]},{flush:"sync"});const n={};for(const a in t)n[a]=qe(()=>t[a]);return n}function R_(e,t){return e.includes(t)}function $8(e){return e[2].toLowerCase()+e.slice(3)}const Os=()=>[Function,Array];function tD(e,t){return t="on"+Qu(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function cw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(Array.isArray(e))for(const r of e)r(...n);else typeof e=="function"&&e(...n)}function P0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(a=>`${a}${t?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(n)]}function Q8(e,t,n){let a,r=e.indexOf(document.activeElement);const s=t==="next"?1:-1;do r+=s,a=e[r];while((!a||a.offsetParent==null||!(n?.(a)??!0))&&r<e.length&&r>=0);return a}function sA(e,t){const n=P0(e);if(t==null)(e===document.activeElement||!e.contains(document.activeElement))&&n[0]?.focus();else if(t==="first")n[0]?.focus();else if(t==="last")n.at(-1)?.focus();else if(typeof t=="number")n[t]?.focus();else{const a=Q8(n,t);a?a.focus():sA(e,t==="next"?"first":"last")}}function Z1(e){return e==null||typeof e=="string"&&e.trim()===""}function G8(){}function Vv(e,t){if(!(Ua&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${t})`)))return null;try{return!!e&&e.matches(t)}catch{return null}}function dw(e){return e.some(t=>Kd(t)?t.type===ms?!1:t.type!==ze||dw(t.children):!0)?e:null}function Rx(e,t,n){return e?.(t)??n?.(t)}function fte(e,t){if(!Ua||e===0)return t(),()=>{};const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}function Ate(e,t){const n=e.clientX,a=e.clientY,r=t.getBoundingClientRect(),s=r.left,o=r.top,l=r.right,c=r.bottom;return n>=s&&n<=l&&a>=o&&a<=c}function N_(){const e=Gt(),t=n=>{e.value=n};return Object.defineProperty(t,"value",{enumerable:!0,get:()=>e.value,set:n=>e.value=n}),Object.defineProperty(t,"el",{enumerable:!0,get:()=>hB(e.value)}),t}function Lv(e){const t=e.key.length===1,n=!e.ctrlKey&&!e.metaKey&&!e.altKey;return t&&n}function kS(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function V_(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function mte(e,t,n){const a=new RegExp(`[\\d\\-${V_(n)}]`),r=e.split("").filter(o=>a.test(o)).filter((o,l,c)=>l===0&&/[-]/.test(o)||o===n&&l===c.indexOf(o)||/\d/.test(o)).join("");if(t===0)return r.split(n)[0];const s=new RegExp(`${V_(n)}\\d`);if(t!==null&&s.test(r)){const o=r.split(n);return[o[0],o[1].substring(0,t)].join(n)}return r}function vte(e){const t={};for(const n in e)t[Wo(n)]=e[n];return t}function hte(e){const t=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(n=>{let[a,r]=n;return t.includes(a)?!!r:r!==void 0}))}const z8=["top","bottom"],pte=["start","end","left","right"];function BS(e,t){let[n,a]=e.split(" ");return a||(a=R_(z8,n)?"start":R_(pte,n)?"top":"center"),{side:TS(n,t),align:TS(a,t)}}function TS(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function Nx(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function Vx(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function nD(e){return{side:e.align,align:e.side}}function aD(e){return R_(z8,e.side)?"y":"x"}class Fu{constructor(t){let{x:n,y:a,width:r,height:s}=t;this.x=n,this.y=a,this.width=r,this.height=s}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function rD(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function W8(e){return Array.isArray(e)?new Fu({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function gte(e){if(e===document.documentElement)return visualViewport?new Fu({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale,height:visualViewport.height*visualViewport.scale}):new Fu({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});{const t=e.getBoundingClientRect();return new Fu({x:t.x,y:t.y,width:e.clientWidth,height:e.clientHeight})}}function yB(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e),a=n.transform;if(a){let r,s,o,l,c;if(a.startsWith("matrix3d("))r=a.slice(9,-1).split(/, /),s=Number(r[0]),o=Number(r[5]),l=Number(r[12]),c=Number(r[13]);else if(a.startsWith("matrix("))r=a.slice(7,-1).split(/, /),s=Number(r[0]),o=Number(r[3]),l=Number(r[4]),c=Number(r[5]);else return new Fu(t);const f=n.transformOrigin,d=t.x-l-(1-s)*parseFloat(f),A=t.y-c-(1-o)*parseFloat(f.slice(f.indexOf(" ")+1)),m=s?t.width/s:e.offsetWidth+1,p=o?t.height/o:e.offsetHeight+1;return new Fu({x:d,y:A,width:m,height:p})}else return new Fu(t)}function jf(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let a;try{a=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof a.finished>"u"&&(a.finished=new Promise(r=>{a.onfinish=()=>{r(a)}})),a}const Zy=new WeakMap;function yte(e,t){Object.keys(t).forEach(n=>{if(pB(n)){const a=$8(n),r=Zy.get(e);if(t[n]==null)r?.forEach(s=>{const[o,l]=s;o===a&&(e.removeEventListener(a,l),r.delete(s))});else if(!r||![...r].some(s=>s[0]===a&&s[1]===t[n])){e.addEventListener(a,t[n]);const s=r||new Set;s.add([a,t[n]]),Zy.has(e)||Zy.set(e,s)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function _te(e,t){Object.keys(t).forEach(n=>{if(pB(n)){const a=$8(n),r=Zy.get(e);r?.forEach(s=>{const[o,l]=s;o===a&&(e.removeEventListener(a,l),r.delete(s))})}else e.removeAttribute(n)})}const Pm=2.4,sD=.2126729,oD=.7151522,iD=.072175,wte=.55,bte=.58,xte=.57,Cte=.62,ey=.03,lD=1.45,Ste=5e-4,Ete=1.25,kte=1.25,uD=.078,cD=12.82051282051282,ty=.06,dD=.001;function fD(e,t){const n=(e.r/255)**Pm,a=(e.g/255)**Pm,r=(e.b/255)**Pm,s=(t.r/255)**Pm,o=(t.g/255)**Pm,l=(t.b/255)**Pm;let c=n*sD+a*oD+r*iD,f=s*sD+o*oD+l*iD;if(c<=ey&&(c+=(ey-c)**lD),f<=ey&&(f+=(ey-f)**lD),Math.abs(f-c)<Ste)return 0;let d;if(f>c){const A=(f**wte-c**bte)*Ete;d=A<dD?0:A<uD?A-A*cD*ty:A-ty}else{const A=(f**Cte-c**xte)*kte;d=A>-dD?0:A>-uD?A-A*cD*ty:A+ty}return d*100}function K8(e,t){t=Array.isArray(t)?t.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`}const L_=.20689655172413793,Bte=e=>e>L_**3?Math.cbrt(e):e/(3*L_**2)+4/29,Tte=e=>e>L_?e**3:3*L_**2*(e-4/29);function j8(e){const t=Bte,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function q8(e){const t=Tte,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}const Ite=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],Fte=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,Pte=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Dte=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function Y8(e){const t=Array(3),n=Fte,a=Ite;for(let r=0;r<3;++r)t[r]=Math.round(ar(n(a[r][0]*e[0]+a[r][1]*e[1]+a[r][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function _B(e){let{r:t,g:n,b:a}=e;const r=[0,0,0],s=Dte,o=Pte;t=s(t/255),n=s(n/255),a=s(a/255);for(let l=0;l<3;++l)r[l]=o[l][0]*t+o[l][1]*n+o[l][2]*a;return r}function IS(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function Ute(e){return IS(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const AD=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,Rte={rgb:(e,t,n,a)=>({r:e,g:t,b:n,a}),rgba:(e,t,n,a)=>({r:e,g:t,b:n,a}),hsl:(e,t,n,a)=>mD({h:e,s:t,l:n,a}),hsla:(e,t,n,a)=>mD({h:e,s:t,l:n,a}),hsv:(e,t,n,a)=>Nu({h:e,s:t,v:n,a}),hsva:(e,t,n,a)=>Nu({h:e,s:t,v:n,a})};function Ti(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&AD.test(e)){const{groups:t}=e.match(AD),{fn:n,values:a}=t,r=a.split(/,\s*|\s*\/\s*|\s+/).map((s,o)=>s.endsWith("%")||o>0&&o<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(s)/100:parseFloat(s));return Rte[n](...r)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),e5(t)}else if(typeof e=="object"){if(Kf(e,["r","g","b"]))return e;if(Kf(e,["h","s","l"]))return Nu(wB(e));if(Kf(e,["h","s","v"]))return Nu(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Nu(e){const{h:t,s:n,v:a,a:r}=e,s=l=>{const c=(l+t/60)%6;return a-a*n*Math.max(Math.min(c,4-c,1),0)},o=[s(5),s(3),s(1)].map(l=>Math.round(l*255));return{r:o[0],g:o[1],b:o[2],a:r}}function mD(e){return Nu(wB(e))}function wg(e){if(!e)return{h:0,s:1,v:1,a:1};const t=e.r/255,n=e.g/255,a=e.b/255,r=Math.max(t,n,a),s=Math.min(t,n,a);let o=0;r!==s&&(r===t?o=60*(0+(n-a)/(r-s)):r===n?o=60*(2+(a-t)/(r-s)):r===a&&(o=60*(4+(t-n)/(r-s)))),o<0&&(o=o+360);const l=r===0?0:(r-s)/r,c=[o,l,r];return{h:c[0],s:c[1],v:c[2],a:e.a}}function FS(e){const{h:t,s:n,v:a,a:r}=e,s=a-a*n/2,o=s===1||s===0?0:(a-s)/Math.min(s,1-s);return{h:t,s:o,l:s,a:r}}function wB(e){const{h:t,s:n,l:a,a:r}=e,s=a+n*Math.min(a,1-a),o=s===0?0:2-2*a/s;return{h:t,s:o,v:s,a:r}}function X8(e){let{r:t,g:n,b:a,a:r}=e;return r===void 0?`rgb(${t}, ${n}, ${a})`:`rgba(${t}, ${n}, ${a}, ${r})`}function J8(e){return X8(Nu(e))}function ny(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function Z8(e){let{r:t,g:n,b:a,a:r}=e;return`#${[ny(t),ny(n),ny(a),r!==void 0?ny(Math.round(r*255)):""].join("")}`}function e5(e){e=Vte(e);let[t,n,a,r]=cte(e,2).map(s=>parseInt(s,16));return r=r===void 0?r:r/255,{r:t,g:n,b:a,a:r}}function Nte(e){const t=e5(e);return wg(t)}function t5(e){return Z8(Nu(e))}function Vte(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=JP(JP(e,6),8,"F")),e}function Lte(e,t){const n=j8(_B(e));return n[0]=n[0]+t*10,Y8(q8(n))}function Mte(e,t){const n=j8(_B(e));return n[0]=n[0]-t*10,Y8(q8(n))}function PS(e){const t=Ti(e);return _B(t)[1]}function Ote(e,t){const n=PS(e),a=PS(t),r=Math.max(n,a),s=Math.min(n,a);return(r+.05)/(s+.05)}function n5(e){const t=Math.abs(fD(Ti(0),Ti(e)));return Math.abs(fD(Ti(16777215),Ti(e)))>Math.min(t,50)?"#fff":"#000"}function ot(e,t){return n=>Object.keys(e).reduce((a,r)=>{const o=typeof e[r]=="object"&&e[r]!=null&&!Array.isArray(e[r])?e[r]:{type:e[r]};return n&&r in n?a[r]={...o,default:n[r]}:a[r]=o,t&&!a[r].source&&(a[r].source=t),a},{})}const nn=ot({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function Nr(e,t){const n=HA();if(!n)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return n}function Gu(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=Nr(e).type;return rA(t?.aliasName||t?.name)}function Hte(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nr("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}const Mv=Symbol.for("vuetify:defaults");function $te(e){return R(e)}function bB(){const e=Pn(Mv);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function kr(e,t){const n=bB(),a=R(e),r=ee(()=>{if(Oe(t?.disabled))return n.value;const o=Oe(t?.scoped),l=Oe(t?.reset),c=Oe(t?.root);if(a.value==null&&!(o||l||c))return n.value;let f=bo(a.value,{prev:n.value});if(o)return f;if(l||c){const d=Number(l||1/0);for(let A=0;A<=d&&!(!f||!("prev"in f));A++)f=f.prev;return f&&typeof c=="string"&&c in f&&(f=bo(bo(f,{prev:f}),f[c])),f}return f.prev?bo(f.prev,f):f});return za(Mv,r),r}function Qte(e,t){return e.props&&(typeof e.props[t]<"u"||typeof e.props[rA(t)]<"u")}function Gte(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bB();const a=Nr("useDefaults");if(t=t??a.type.name??a.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const r=ee(()=>n.value?.[e._as??t]),s=new Proxy(e,{get(c,f){const d=Reflect.get(c,f);if(f==="class"||f==="style")return[r.value?.[f],d].filter(p=>p!=null);if(Qte(a.vnode,f))return d;const A=r.value?.[f];if(A!==void 0)return A;const m=n.value?.global?.[f];return m!==void 0?m:d}}),o=Gt();Er(()=>{if(r.value){const c=Object.entries(r.value).filter(f=>{let[d]=f;return d.startsWith(d[0].toUpperCase())});o.value=c.length?Object.fromEntries(c):void 0}else o.value=void 0});function l(){const c=Hte(Mv,a);za(Mv,ee(()=>o.value?bo(c?.value??{},o.value):c?.value))}return{props:s,provideSubDefaults:l}}function Ni(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=ot(e.props??{},e.name)();const t=Object.keys(e.props).filter(n=>n!=="class"&&n!=="style");e.filterProps=function(a){return jc(a,t)},e.props._as=String,e.setup=function(a,r){const s=bB();if(!s.value)return e._setup(a,r);const{props:o,provideSubDefaults:l}=Gte(a,a._as??e.name,s),c=e._setup(o,r);return l(),c}}return e}function St(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?Ni:iB)(t)}function zte(e,t){return t.props=e,t}function qc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return St()({name:n??Qu(Wo(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...nn()},setup(a,r){let{slots:s}=r;return()=>nu(a.tag,{class:[e,a.class],style:a.style},s.default?.())}})}function a5(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const D0="cubic-bezier(0.4, 0, 0.2, 1)",Wte="cubic-bezier(0.0, 0, 0.2, 1)",Kte="cubic-bezier(0.4, 0, 1, 1)",jte={linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5};function vD(e,t,n){return Object.keys(e).filter(a=>pB(a)&&a.endsWith(t)).reduce((a,r)=>(a[r.slice(0,-t.length)]=s=>e[r](s,n(s)),a),{})}function xB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?qte(e):CB(e))return e;e=e.parentElement}return document.scrollingElement}function M_(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(CB(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function CB(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),n=t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight,a=t.overflowX==="scroll"||t.overflowX==="auto"&&e.scrollWidth>e.clientWidth;return n||a}function qte(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function Yte(e){let{depth:t,isLast:n,isLastGroup:a,leafLinks:r,separateRoots:s,parentIndentLines:o,variant:l}=e;if(!o||!t)return{leaf:void 0,node:void 0,children:o};if(l==="simple")return{leaf:[...o,"line"],node:[...o,"line"],children:[...o,"line"]};const c=n&&(!a||s||t>1);return{leaf:[...o,c?"last-leaf":"leaf",...r?["leaf-link"]:[]],node:[...o,c?"last-leaf":"leaf"],children:[...o,c?"none":"line"]}}function Xte(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function It(e){const t=Nr("useRender");t.render=e}function fn(e,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:A=>A,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:A=>A;const s=Nr("useProxiedModel"),o=R(e[t]!==void 0?e[t]:n),l=rA(t),f=ee(l!==t?()=>(e[t],!!((s.vnode.props?.hasOwnProperty(t)||s.vnode.props?.hasOwnProperty(l))&&(s.vnode.props?.hasOwnProperty(`onUpdate:${t}`)||s.vnode.props?.hasOwnProperty(`onUpdate:${l}`)))):()=>(e[t],!!(s.vnode.props?.hasOwnProperty(t)&&s.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));ko(()=>!f.value,()=>{Ge(()=>e[t],A=>{o.value=A})});const d=ee({get(){const A=e[t];return a(f.value?A:o.value)},set(A){const m=r(A),p=Sn(f.value?e[t]:o.value);p===m||a(p)===A||(o.value=m,s?.emit(`update:${t}`,m))}});return Object.defineProperty(d,"externalValue",{get:()=>f.value?e[t]:o.value}),d}const Jte={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}},hD="$vuetify.",pD=(e,t)=>e.replace(/\{(\d+)\}/g,(n,a)=>String(t[Number(a)])),r5=(e,t,n)=>function(a){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];if(!a.startsWith(hD))return pD(a,s);const l=a.replace(hD,""),c=e.value&&n.value[e.value],f=t.value&&n.value[t.value];let d=hA(c,l,null);return d||(`${a}${e.value}`,d=hA(f,l,null)),d||(d=a),typeof d!="string"&&(d=a),pD(d,s)};function SB(e,t){return(n,a)=>new Intl.NumberFormat([e.value,t.value],a).format(n)}function s5(e,t){return SB(e,t)(.1).includes(",")?",":"."}function Lx(e,t,n){const a=fn(e,t,e[t]??n.value);return a.value=e[t]??n.value,Ge(n,r=>{e[t]==null&&(a.value=n.value)}),a}function o5(e){return t=>{const n=Lx(t,"locale",e.current),a=Lx(t,"fallback",e.fallback),r=Lx(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:a,messages:r,decimalSeparator:qe(()=>s5(n,a)),t:r5(n,a,r),n:SB(n,a),provide:o5({current:n,fallback:a,messages:r})}}}function Zte(e){const t=Gt(e?.locale??"en"),n=Gt(e?.fallback??"en"),a=R({en:Jte,...e?.messages});return{name:"vuetify",current:t,fallback:n,messages:a,decimalSeparator:qe(()=>e?.decimalSeparator??s5(t,n)),t:r5(t,n,a),n:SB(t,n),provide:o5({current:t,fallback:n,messages:a})}}const Ov=Symbol.for("vuetify:locale");function ene(e){return e.name!=null}function tne(e){const t=e?.adapter&&ene(e?.adapter)?e?.adapter:Zte(e),n=rne(t,e);return{...t,...n}}function Ka(){const e=Pn(Ov);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function nne(e){const t=Pn(Ov);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");const n=t.provide(e),a=sne(n,t.rtl,e),r={...n,...a};return za(Ov,r),r}function ane(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function rne(e,t){const n=R(t?.rtl??ane()),a=ee(()=>n.value[e.current.value]??!1);return{isRtl:a,rtl:n,rtlClasses:qe(()=>`v-locale--is-${a.value?"rtl":"ltr"}`)}}function sne(e,t,n){const a=ee(()=>n.rtl??t.value[e.current.value]??!1);return{isRtl:a,rtl:t,rtlClasses:qe(()=>`v-locale--is-${a.value?"rtl":"ltr"}`)}}function as(){const e=Pn(Ov);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function bg(e){const t=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):return{firstDay:6,firstWeekSize:1};case t==="MV":return{firstDay:5,firstWeekSize:1};case t==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function one(e,t,n){const a=[];let r=[];const s=i5(e),o=l5(e),l=n??bg(t)?.firstDay??0,c=(s.getDay()-l+7)%7,f=(o.getDay()-l+7)%7;for(let d=0;d<c;d++){const A=new Date(s);A.setDate(A.getDate()-(c-d)),r.push(A)}for(let d=1;d<=o.getDate();d++){const A=new Date(e.getFullYear(),e.getMonth(),d);r.push(A),r.length===7&&(a.push(r),r=[])}for(let d=1;d<7-f;d++){const A=new Date(o);A.setDate(A.getDate()+d),r.push(A)}return r.length>0&&a.push(r),a}function DS(e,t,n){let a=(n??bg(t)?.firstDay??0)%7;[0,1,2,3,4,5,6].includes(a)||(a=0);const r=new Date(e);for(;r.getDay()!==a;)r.setDate(r.getDate()-1);return r}function ine(e,t){const n=new Date(e),a=((bg(t)?.firstDay??0)+6)%7;for(;n.getDay()!==a;)n.setDate(n.getDate()+1);return n}function i5(e){return new Date(e.getFullYear(),e.getMonth(),1)}function l5(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function lne(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const une=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function u5(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let t;if(une.test(e))return lne(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const gD=new Date(2e3,0,2);function cne(e,t,n){const a=t??bg(e)?.firstDay??0;return Bi(7).map(r=>{const s=new Date(gD);return s.setDate(gD.getDate()+a+r),new Intl.DateTimeFormat(e,{weekday:n??"narrow"}).format(s)})}function dne(e,t,n,a){const r=u5(e)??new Date,s=a?.[t];if(typeof s=="function")return s(r,t,n);let o={};switch(t){case"fullDate":o={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":o={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const l=r.getDate(),c=new Intl.DateTimeFormat(n,{month:"long"}).format(r);return`${l} ${c}`;case"normalDateWithWeekday":o={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":o={month:"short",day:"numeric"};break;case"year":o={year:"numeric"};break;case"month":o={month:"long"};break;case"monthShort":o={month:"short"};break;case"monthAndYear":o={month:"long",year:"numeric"};break;case"monthAndDate":o={month:"long",day:"numeric"};break;case"weekday":o={weekday:"long"};break;case"weekdayShort":o={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(r.getDate());case"hours12h":o={hour:"numeric",hour12:!0};break;case"hours24h":o={hour:"numeric",hour12:!1};break;case"minutes":o={minute:"numeric"};break;case"seconds":o={second:"numeric"};break;case"fullTime":o={hour:"numeric",minute:"numeric"};break;case"fullTime12h":o={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":o={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":o={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");case"keyboardDateTime12h":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");case"keyboardDateTime24h":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");default:o=s??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,o).format(r)}function fne(e,t){const n=e.toJsDate(t),a=n.getFullYear(),r=ZP(String(n.getMonth()+1),2,"0"),s=ZP(String(n.getDate()),2,"0");return`${a}-${r}-${s}`}function Ane(e){const[t,n,a]=e.split("-").map(Number);return new Date(t,n-1,a)}function mne(e,t){const n=new Date(e);return n.setMinutes(n.getMinutes()+t),n}function vne(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}function e_(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function hne(e,t){const n=new Date(e);return n.setDate(n.getDate()+t*7),n}function pne(e,t){const n=new Date(e);return n.setDate(1),n.setMonth(n.getMonth()+t),n}function US(e){return e.getFullYear()}function gne(e){return e.getMonth()}function yne(e,t,n,a){const r=bg(t),s=n??r?.firstDay??0,o=a??r?.firstWeekSize??1;function l(p){const h=new Date(p,0,1);return 7-RS(h,DS(h,t,s),"days")}let c=US(e);const f=e_(DS(e,t,s),6);c<US(f)&&l(c+1)>=o&&c++;const d=new Date(c,0,1),A=l(c),m=A>=o?e_(d,A-7):e_(d,A);return 1+RS(c5(e),H_(m),"weeks")}function _ne(e){return e.getDate()}function wne(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function bne(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function xne(e){return e.getHours()}function Cne(e){return e.getMinutes()}function Sne(e){return new Date(e.getFullYear(),0,1)}function Ene(e){return new Date(e.getFullYear(),11,31)}function kne(e,t){return O_(e,t[0])&&Ine(e,t[1])}function Bne(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function O_(e,t){return e.getTime()>t.getTime()}function Tne(e,t){return O_(H_(e),H_(t))}function Ine(e,t){return e.getTime()<t.getTime()}function yD(e,t){return e.getTime()===t.getTime()}function Fne(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Pne(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Dne(e,t){return e.getFullYear()===t.getFullYear()}function RS(e,t,n){const a=new Date(e),r=new Date(t);switch(n){case"years":return a.getFullYear()-r.getFullYear();case"quarters":return Math.floor((a.getMonth()-r.getMonth()+(a.getFullYear()-r.getFullYear())*12)/4);case"months":return a.getMonth()-r.getMonth()+(a.getFullYear()-r.getFullYear())*12;case"weeks":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60*24));case"hours":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60));case"minutes":return Math.floor((a.getTime()-r.getTime())/(1e3*60));case"seconds":return Math.floor((a.getTime()-r.getTime())/1e3);default:return a.getTime()-r.getTime()}}function Une(e,t){const n=new Date(e);return n.setHours(t),n}function Rne(e,t){const n=new Date(e);return n.setMinutes(t),n}function Nne(e,t){const n=new Date(e);return n.setMonth(t),n}function Vne(e,t){const n=new Date(e);return n.setDate(t),n}function Lne(e,t){const n=new Date(e);return n.setFullYear(t),n}function H_(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function c5(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class Mne{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return u5(t)}toJsDate(t){return t}toISO(t){return fne(this,t)}parseISO(t){return Ane(t)}addMinutes(t,n){return mne(t,n)}addHours(t,n){return vne(t,n)}addDays(t,n){return e_(t,n)}addWeeks(t,n){return hne(t,n)}addMonths(t,n){return pne(t,n)}getWeekArray(t,n){const a=n!==void 0?Number(n):void 0;return one(t,this.locale,a)}startOfWeek(t,n){const a=n!==void 0?Number(n):void 0;return DS(t,this.locale,a)}endOfWeek(t){return ine(t,this.locale)}startOfMonth(t){return i5(t)}endOfMonth(t){return l5(t)}format(t,n){return dne(t,n,this.locale,this.formats)}isEqual(t,n){return yD(t,n)}isValid(t){return Bne(t)}isWithinRange(t,n){return kne(t,n)}isAfter(t,n){return O_(t,n)}isAfterDay(t,n){return Tne(t,n)}isBefore(t,n){return!O_(t,n)&&!yD(t,n)}isSameDay(t,n){return Fne(t,n)}isSameMonth(t,n){return Pne(t,n)}isSameYear(t,n){return Dne(t,n)}setMinutes(t,n){return Rne(t,n)}setHours(t,n){return Une(t,n)}setMonth(t,n){return Nne(t,n)}setDate(t,n){return Vne(t,n)}setYear(t,n){return Lne(t,n)}getDiff(t,n,a){return RS(t,n,a)}getWeekdays(t,n){const a=t!==void 0?Number(t):void 0;return cne(this.locale,a,n)}getYear(t){return US(t)}getMonth(t){return gne(t)}getWeek(t,n,a){const r=n!==void 0?Number(n):void 0;return yne(t,this.locale,r,a)}getDate(t){return _ne(t)}getNextMonth(t){return wne(t)}getPreviousMonth(t){return bne(t)}getHours(t){return xne(t)}getMinutes(t){return Cne(t)}startOfDay(t){return H_(t)}endOfDay(t){return c5(t)}startOfYear(t){return Sne(t)}endOfYear(t){return Ene(t)}}const d5=Symbol.for("vuetify:date-options"),_D=Symbol.for("vuetify:date-adapter");function One(e,t){const n=bo({adapter:Mne,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:n,instance:f5(n,t)}}function Hne(e,t,n){const a=e.getDiff(e.endOfDay(n??t),e.startOfDay(t),"days"),r=[t];for(let s=1;s<a;s++){const o=e.addDays(t,s);r.push(o)}return n&&r.push(e.endOfDay(n)),r}function f5(e,t){const n=As(typeof e.adapter=="function"?new e.adapter({locale:e.locale[t.current.value]??t.current.value,formats:e.formats}):e.adapter);return Ge(t.current,a=>{n.locale=e.locale[a]??a??n.locale}),n}function xg(){const e=Pn(d5);if(!e)throw new Error("[Vuetify] Could not find injected date options");const t=Ka();return f5(e,t)}const fw=["sm","md","lg","xl","xxl"],NS=Symbol.for("vuetify:display"),wD={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},$ne=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wD;return bo(wD,e)};function bD(e){return Ua&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function xD(e){return Ua&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function CD(e){const t=Ua&&!e?window.navigator.userAgent:"ssr";function n(h){return!!t.match(h)}const a=n(/android/i),r=n(/iphone|ipad|ipod/i),s=n(/cordova/i),o=n(/electron/i),l=n(/chrome/i),c=n(/edge/i),f=n(/firefox/i),d=n(/opera/i),A=n(/win/i),m=n(/mac/i),p=n(/linux/i);return{android:a,ios:r,cordova:s,electron:o,chrome:l,edge:c,firefox:f,opera:d,win:A,mac:m,linux:p,touch:rte,ssr:t==="ssr"}}function Qne(e,t){const{thresholds:n,mobileBreakpoint:a}=$ne(e),r=Gt(xD(t)),s=Gt(CD(t)),o=As({}),l=Gt(bD(t));function c(){r.value=xD(),l.value=bD()}function f(){c(),s.value=CD()}return Er(()=>{const d=l.value<n.sm,A=l.value<n.md&&!d,m=l.value<n.lg&&!(A||d),p=l.value<n.xl&&!(m||A||d),h=l.value<n.xxl&&!(p||m||A||d),y=l.value>=n.xxl,g=d?"xs":A?"sm":m?"md":p?"lg":h?"xl":"xxl",_=typeof a=="number"?a:n[a],b=l.value<_;o.xs=d,o.sm=A,o.md=m,o.lg=p,o.xl=h,o.xxl=y,o.smAndUp=!d,o.mdAndUp=!(d||A),o.lgAndUp=!(d||A||m),o.xlAndUp=!(d||A||m||p),o.smAndDown=!(m||p||h||y),o.mdAndDown=!(p||h||y),o.lgAndDown=!(h||y),o.xlAndDown=!y,o.name=g,o.height=r.value,o.width=l.value,o.mobile=b,o.mobileBreakpoint=a,o.platform=s.value,o.thresholds=n}),Ua&&(window.addEventListener("resize",c,{passive:!0}),hs(()=>{window.removeEventListener("resize",c)},!0)),{...MA(o),update:f,ssr:!!t}}const $A=ot({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Vi(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gu();const n=Pn(NS);if(!n)throw new Error("Could not find Vuetify display injection");const a=ee(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?n.width.value<e.mobileBreakpoint:e.mobileBreakpoint?n.width.value<n.thresholds.value[e.mobileBreakpoint]:e.mobile===null?n.mobile.value:!1),r=qe(()=>t?{[`${t}--mobile`]:a.value}:{});return{...n,displayClasses:r,mobile:a}}const A5=Symbol.for("vuetify:goto");function m5(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:jte}}function Gne(e){return EB(e)??(document.scrollingElement||document.body)}function EB(e){return typeof e=="string"?document.querySelector(e):hB(e)}function Mx(e,t,n){if(typeof e=="number")return t&&n?-e:e;let a=EB(e),r=0;for(;a;)r+=t?a.offsetLeft:a.offsetTop,a=a.offsetParent;return r}function zne(e,t){return{rtl:t.isRtl,options:bo(m5(),e)}}async function SD(e,t,n,a){const r=n?"scrollLeft":"scrollTop",s=bo(a?.options??m5(),t),o=a?.rtl.value,l=(typeof e=="number"?e:EB(e))??0,c=s.container==="parent"&&l instanceof HTMLElement?l.parentElement:Gne(s.container),f=typeof s.easing=="function"?s.easing:s.patterns[s.easing];if(!f)throw new TypeError(`Easing function "${s.easing}" not found.`);let d;if(typeof l=="number")d=Mx(l,n,o);else if(d=Mx(l,n,o)-Mx(c,n,o),s.layout){const h=window.getComputedStyle(l).getPropertyValue("--v-layout-top");h&&(d-=parseInt(h,10))}d+=s.offset,d=Kne(c,d,!!o,!!n);const A=c[r]??0;if(d===A)return Promise.resolve(d);const m=performance.now();return new Promise(p=>requestAnimationFrame(function h(y){const _=(y-m)/s.duration,b=Math.floor(A+(d-A)*f(ar(_,0,1)));if(c[r]=b,_>=1&&Math.abs(b-c[r])<10)return p(d);if(_>2)return p(c[r]);requestAnimationFrame(h)}))}function Wne(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Pn(A5),{isRtl:n}=as();if(!t)throw new Error("[Vuetify] Could not find injected goto instance");const a={...t,rtl:qe(()=>t.rtl.value||n.value)};async function r(s,o){return SD(s,bo(e,o),!1,a)}return r.horizontal=async(s,o)=>SD(s,bo(e,o),!0,a),r}function Kne(e,t,n,a){const{scrollWidth:r,scrollHeight:s}=e,[o,l]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let c,f;return a?n?(c=-(r-o),f=0):(c=0,f=r-o):(c=0,f=s+-l),ar(t,c,f)}const jne={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},qne={component:e=>nu(BB,{...e,class:"mdi"})},vn=[String,Function,Object,Array],VS=Symbol.for("vuetify:icons"),Aw=ot({icon:{type:vn},tag:{type:[String,Object,Function],required:!0}},"icon"),LS=St()({name:"VComponentIcon",props:Aw(),setup(e,t){let{slots:n}=t;return()=>{const a=e.icon;return i(e.tag,null,{default:()=>[e.icon?i(a,null,null):n.default?.()]})}}}),kB=Ni({name:"VSvgIcon",inheritAttrs:!1,props:Aw(),setup(e,t){let{attrs:n}=t;return()=>i(e.tag,Ie(n,{style:null}),{default:()=>[v("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(a=>Array.isArray(a)?v("path",{d:a[0],"fill-opacity":a[1]},null):v("path",{d:a},null)):v("path",{d:e.icon},null)])]})}}),Yne=Ni({name:"VLigatureIcon",props:Aw(),setup(e){return()=>i(e.tag,null,{default:()=>[e.icon]})}}),BB=Ni({name:"VClassIcon",props:Aw(),setup(e){return()=>i(e.tag,{class:lt(e.icon)},null)}});function Xne(){return{svg:{component:kB},class:{component:BB}}}function Jne(e){const t=Xne(),n=e?.defaultSet??"mdi";return n==="mdi"&&!t.mdi&&(t.mdi=qne),bo({defaultSet:n,sets:t,aliases:{...jne,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const Zne=e=>{const t=Pn(VS);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:ee(()=>{const a=Uu(e);if(!a)return{component:LS};let r=a;if(typeof r=="string"&&(r=r.trim(),r.startsWith("$")&&(r=t.aliases?.[r.slice(1)])),Array.isArray(r))return{component:kB,icon:r};if(typeof r!="string")return{component:LS,icon:r};const s=Object.keys(t.sets).find(c=>typeof r=="string"&&r.startsWith(`${c}:`)),o=s?r.slice(s.length+1):r;return{component:t.sets[s??t.defaultSet].component,icon:o}})}},U0=Symbol.for("vuetify:theme"),Aa=ot({theme:String},"theme");function ED(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function eae(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ED();const t=ED();if(!e)return{...t,isDisabled:!0};const n={};for(const[a,r]of Object.entries(e.themes??{})){const s=r.dark||a==="dark"?t.themes?.dark:t.themes?.light;n[a]=bo(s,r)}return bo(t,{...e,themes:n})}function Df(e,t,n,a){e.push(`${rae(t,a)} {
`,...n.map(r=>`  ${r};
`),`}
`)}function kD(e,t){const n=e.dark?2:1,a=e.dark?1:2,r=[];for(const[s,o]of Object.entries(e.colors)){const l=Ti(o);r.push(`--${t}theme-${s}: ${l.r},${l.g},${l.b}`),s.startsWith("on-")||r.push(`--${t}theme-${s}-overlay-multiplier: ${PS(o)>.18?n:a}`)}for(const[s,o]of Object.entries(e.variables)){const l=typeof o=="string"&&o.startsWith("#")?Ti(o):void 0,c=l?`${l.r}, ${l.g}, ${l.b}`:void 0;r.push(`--${t}${s}: ${c??o}`)}return r}function tae(e,t,n){const a={};if(n)for(const r of["lighten","darken"]){const s=r==="lighten"?Lte:Mte;for(const o of Bi(n[r],1))a[`${e}-${r}-${o}`]=Z8(s(Ti(t),o))}return a}function nae(e,t){if(!t)return{};let n={};for(const a of t.colors){const r=e[a];r&&(n={...n,...tae(a,r,t)})}return n}function aae(e){const t={};for(const n of Object.keys(e)){if(n.startsWith("on-")||e[`on-${n}`])continue;const a=`on-${n}`,r=Ti(e[n]);t[a]=n5(r)}return t}function rae(e,t){if(!t)return e;const n=`:where(${t})`;return e===":root"?n:`${n} ${e}`}function sae(e,t,n){const a=oae(e,t);a&&(a.innerHTML=n)}function oae(e,t){if(!Ua)return null;let n=document.getElementById(e);return n||(n=document.createElement("style"),n.id=e,n.type="text/css",t&&n.setAttribute("nonce",t),document.head.appendChild(n)),n}function iae(e){const t=eae(e),n=Gt(t.defaultTheme),a=R(t.themes),r=Gt("light"),s=ee({get(){return n.value==="system"?r.value:n.value},set(_){n.value=_}}),o=ee(()=>{const _={};for(const[b,S]of Object.entries(a.value)){const B={...S.colors,...nae(S.colors,t.variations)};_[b]={...S,colors:{...B,...aae(B)}}}return _}),l=qe(()=>o.value[s.value]),c=qe(()=>n.value==="system"),f=ee(()=>{const _=[],b=t.unimportant?"":" !important",S=t.scoped?t.prefix:"";l.value?.dark&&Df(_,":root",["color-scheme: dark"],t.scope),Df(_,":root",kD(l.value,t.prefix),t.scope);for(const[B,F]of Object.entries(o.value))Df(_,`.${t.prefix}theme--${B}`,[`color-scheme: ${F.dark?"dark":"normal"}`,...kD(F,t.prefix)],t.scope);if(t.utilities){const B=[],F=[],T=new Set(Object.values(o.value).flatMap(E=>Object.keys(E.colors)));for(const E of T)E.startsWith("on-")?Df(F,`.${E}`,[`color: rgb(var(--${t.prefix}theme-${E}))${b}`],t.scope):(Df(B,`.${S}bg-${E}`,[`--${t.prefix}theme-overlay-multiplier: var(--${t.prefix}theme-${E}-overlay-multiplier)`,`background-color: rgb(var(--${t.prefix}theme-${E}))${b}`,`color: rgb(var(--${t.prefix}theme-on-${E}))${b}`],t.scope),Df(F,`.${S}text-${E}`,[`color: rgb(var(--${t.prefix}theme-${E}))${b}`],t.scope),Df(F,`.${S}border-${E}`,[`--${t.prefix}border-color: var(--${t.prefix}theme-${E})`],t.scope));_.push(...B,...F)}return _.map((B,F)=>F===0?B:`    ${B}`).join("")}),d=qe(()=>t.isDisabled?void 0:`${t.prefix}theme--${s.value}`),A=qe(()=>Object.keys(o.value));if(ste){let b=function(){r.value=_.matches?"dark":"light"};const _=window.matchMedia("(prefers-color-scheme: dark)");b(),_.addEventListener("change",b,{passive:!0}),pL()&&hs(()=>{_.removeEventListener("change",b)})}function m(_){if(t.isDisabled)return;const b=_._context.provides.usehead;if(b){let S=function(){return{style:[{textContent:f.value,id:t.stylesheetId,nonce:t.cspNonce||!1}]}};if(b.push){const B=b.push(S);Ua&&Ge(f,()=>{B.patch(S)})}else Ua?(b.addHeadObjs(qe(S)),Er(()=>b.updateDOM())):b.addHeadObjs(S())}else{let S=function(){sae(t.stylesheetId,t.cspNonce,f.value)};Ua?Ge(f,S,{immediate:!0}):S()}}function p(_){_!=="system"&&!A.value.includes(_)||(s.value=_)}function h(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A.value;const b=_.indexOf(s.value),S=b===-1?0:(b+1)%_.length;p(_[S])}function y(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];h(_)}const g=new Proxy(s,{get(_,b){return Reflect.get(_,b)},set(_,b,S){return b==="value"&&K8(`theme.global.name.value = ${S}`,`theme.change('${S}')`),Reflect.set(_,b,S)}});return{install:m,change:p,cycle:h,toggle:y,isDisabled:t.isDisabled,isSystem:c,name:s,themes:a,current:l,computedThemes:o,prefix:t.prefix,themeClasses:d,styles:f,global:{name:g,current:l}}}function Ra(e){Nr("provideTheme");const t=Pn(U0,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=qe(()=>e.theme??t.name.value),a=qe(()=>t.themes.value[n.value]),r=qe(()=>t.isDisabled?void 0:`${t.prefix}theme--${n.value}`),s={...t,name:n,current:a,themeClasses:r};return za(U0,s),s}function TB(){Nr("useTheme");const e=Pn(U0,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function Kl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=N_(),a=R();if(Ua){const r=new ResizeObserver(s=>{e?.(s,r),s.length&&(t==="content"?a.value=s[0].contentRect:a.value=s[0].target.getBoundingClientRect())});ha(()=>{r.disconnect()}),Ge(()=>n.el,(s,o)=>{o&&(r.unobserve(o),a.value=void 0),s&&r.observe(s)},{flush:"post"})}return{resizeRef:n,contentRect:uh(a)}}const R0=Symbol.for("vuetify:layout"),v5=Symbol.for("vuetify:layout-item"),BD=1e3,h5=ot({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),QA=ot({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function p5(){const e=Pn(R0);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function GA(e){const t=Pn(R0);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${qo()}`,a=Nr("useLayoutItem");za(v5,{id:n});const r=Gt(!1);rw(()=>r.value=!0),OA(()=>r.value=!1);const{layoutItemStyles:s,layoutItemScrimStyles:o}=t.register(a,{...e,active:ee(()=>r.value?!1:e.active.value),id:n});return ha(()=>t.unregister(n)),{layoutItemStyles:s,layoutRect:t.layoutRect,layoutItemScrimStyles:o}}const lae=(e,t,n,a)=>{let r={top:0,left:0,right:0,bottom:0};const s=[{id:"",layer:{...r}}];for(const o of e){const l=t.get(o),c=n.get(o),f=a.get(o);if(!l||!c||!f)continue;const d={...r,[l.value]:parseInt(r[l.value],10)+(f.value?parseInt(c.value,10):0)};s.push({id:o,layer:d}),r=d}return s};function g5(e){const t=Pn(R0,null),n=ee(()=>t?t.rootZIndex.value-100:BD),a=R([]),r=As(new Map),s=As(new Map),o=As(new Map),l=As(new Map),c=As(new Map),{resizeRef:f,contentRect:d}=Kl(),A=ee(()=>{const T=new Map,E=e.overlaps??[];for(const x of E.filter(C=>C.includes(":"))){const[C,D]=x.split(":");if(!a.value.includes(C)||!a.value.includes(D))continue;const U=r.get(C),L=r.get(D),H=s.get(C),oe=s.get(D);!U||!L||!H||!oe||(T.set(D,{position:U.value,amount:parseInt(H.value,10)}),T.set(C,{position:L.value,amount:-parseInt(oe.value,10)}))}return T}),m=ee(()=>{const T=[...new Set([...o.values()].map(x=>x.value))].sort((x,C)=>x-C),E=[];for(const x of T){const C=a.value.filter(D=>o.get(D)?.value===x);E.push(...C)}return lae(E,r,s,l)}),p=ee(()=>!Array.from(c.values()).some(T=>T.value)),h=ee(()=>m.value[m.value.length-1].layer),y=qe(()=>({"--v-layout-left":Zt(h.value.left),"--v-layout-right":Zt(h.value.right),"--v-layout-top":Zt(h.value.top),"--v-layout-bottom":Zt(h.value.bottom),...p.value?void 0:{transition:"none"}})),g=ee(()=>m.value.slice(1).map((T,E)=>{let{id:x}=T;const{layer:C}=m.value[E],D=s.get(x),U=r.get(x);return{id:x,...C,size:Number(D.value),position:U.value}})),_=T=>g.value.find(E=>E.id===T),b=Nr("createLayout"),S=Gt(!1);An(()=>{S.value=!0}),za(R0,{register:(T,E)=>{let{id:x,order:C,position:D,layoutSize:U,elementSize:L,active:H,disableTransitions:oe,absolute:de}=E;o.set(x,C),r.set(x,D),s.set(x,U),l.set(x,H),oe&&c.set(x,oe);const q=av(v5,b?.vnode).indexOf(T);q>-1?a.value.splice(q,0,x):a.value.push(x);const ce=ee(()=>g.value.findIndex(G=>G.id===x)),le=ee(()=>n.value+m.value.length*2-ce.value*2),Z=ee(()=>{const G=D.value==="left"||D.value==="right",W=D.value==="right",Q=D.value==="bottom",O=L.value??U.value,ae=O===0?"%":"px",j={[D.value]:0,zIndex:le.value,transform:`translate${G?"X":"Y"}(${(H.value?0:-(O===0?100:O))*(W||Q?-1:1)}${ae})`,position:de.value||n.value!==BD?"absolute":"fixed",...p.value?void 0:{transition:"none"}};if(!S.value)return j;const J=g.value[ce.value],ie=A.value.get(x);return ie&&(J[ie.position]+=ie.amount),{...j,height:G?`calc(100% - ${J.top}px - ${J.bottom}px)`:L.value?`${L.value}px`:void 0,left:W?void 0:`${J.left}px`,right:W?`${J.right}px`:void 0,top:D.value!=="bottom"?`${J.top}px`:void 0,bottom:D.value!=="top"?`${J.bottom}px`:void 0,width:G?L.value?`${L.value}px`:void 0:`calc(100% - ${J.left}px - ${J.right}px)`}}),ne=ee(()=>({zIndex:le.value-1}));return{layoutItemStyles:Z,layoutItemScrimStyles:ne,zIndex:le}},unregister:T=>{o.delete(T),r.delete(T),s.delete(T),l.delete(T),c.delete(T),a.value=a.value.filter(E=>E!==T)},mainRect:h,mainStyles:y,getLayoutItem:_,items:g,layoutRect:d,rootZIndex:n});const B=qe(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),F=qe(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:B,layoutStyles:F,getLayoutItem:_,items:g,layoutRect:d,layoutRef:f}}function y5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,a=bo(t,n),{aliases:r={},components:s={},directives:o={}}=a,l=Gd();return l.run(()=>{const c=$te(a.defaults),f=Qne(a.display,a.ssr),d=iae(a.theme),A=Jne(a.icons),m=tne(a.locale),p=One(a.date,m),h=zne(a.goTo,m);function y(_){for(const S in o)_.directive(S,o[S]);for(const S in s)_.component(S,s[S]);for(const S in r)_.component(S,Ni({...r[S],name:S,aliasName:r[S].name}));const b=Gd();if(b.run(()=>{d.install(_)}),_.onUnmount(()=>b.stop()),_.provide(Mv,c),_.provide(NS,f),_.provide(U0,d),_.provide(VS,A),_.provide(Ov,m),_.provide(d5,p.options),_.provide(_D,p.instance),_.provide(A5,h),Ua&&a.ssr)if(_.$nuxt)_.$nuxt.hook("app:suspense:resolve",()=>{f.update()});else{const{mount:S}=_;_.mount=function(){const B=S(...arguments);return Cn(()=>f.update()),_.mount=S,B}}_.mixin({computed:{$vuetify(){return As({defaults:Dm.call(this,Mv),display:Dm.call(this,NS),theme:Dm.call(this,U0),icons:Dm.call(this,VS),locale:Dm.call(this,Ov),date:Dm.call(this,_D)})}}})}function g(){l.stop()}return{install:y,unmount:g,defaults:c,display:f,theme:d,icons:A,locale:m,date:p,goTo:h}})}const uae="3.9.7";y5.version=uae;function Dm(e){const t=this.$,n=t.parent?.provides??t.vnode.appContext?.provides;if(n&&e in n)return n[e]}function cae(){return _5().__VUE_DEVTOOLS_GLOBAL_HOOK__}function _5(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const dae=typeof Proxy=="function",fae="devtools-plugin:setup",Aae="plugin:settings:set";let Um,MS;function mae(){var e;return Um!==void 0||(typeof window<"u"&&window.performance?(Um=!0,MS=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(Um=!0,MS=globalThis.perf_hooks.performance):Um=!1),Um}function vae(){return mae()?MS.now():Date.now()}class hae{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const a={};if(t.settings)for(const o in t.settings){const l=t.settings[o];a[o]=l.defaultValue}const r=`__vue-devtools-plugin-settings__${t.id}`;let s=Object.assign({},a);try{const o=localStorage.getItem(r),l=JSON.parse(o);Object.assign(s,l)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}s=o},now(){return vae()}},n&&n.on(Aae,(o,l)=>{o===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(o,l)=>this.target?this.target.on[l]:(...c)=>{this.onQueue.push({method:l,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...c)=>(this.targetQueue.push({method:l,args:c,resolve:()=>{}}),this.fallbacks[l](...c)):(...c)=>new Promise(f=>{this.targetQueue.push({method:l,args:c,resolve:f})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function pae(e,t){const n=e,a=_5(),r=cae(),s=dae&&n.enableEarlyProxy;if(r&&(a.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))r.emit(fae,e,t);else{const o=s?new hae(n,r):null;(a.__VUE_DEVTOOLS_PLUGINS__=a.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}var w5="store";function Ln(e){return e===void 0&&(e=null),Pn(e!==null?e:w5)}function ch(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function gae(e){return e!==null&&typeof e=="object"}function yae(e){return e&&typeof e.then=="function"}function _ae(e,t){return function(){return e(t)}}function b5(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var a=t.indexOf(e);a>-1&&t.splice(a,1)}}function x5(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;mw(e,n,[],e._modules.root,!0),IB(e,n,t)}function IB(e,t,n){var a=e._state,r=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var s=e._wrappedGetters,o={},l={},c=Gd(!0);c.run(function(){ch(s,function(f,d){o[d]=_ae(f,e),l[d]=ee(function(){return o[d]()}),Object.defineProperty(e.getters,d,{get:function(){return l[d].value},enumerable:!0})})}),e._state=As({data:t}),e._scope=c,e.strict&&Sae(e),a&&n&&e._withCommit(function(){a.data=null}),r&&r.stop()}function mw(e,t,n,a,r){var s=!n.length,o=e._modules.getNamespace(n);if(a.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=a),!s&&!r){var l=FB(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit(function(){l[c]=a.state})}var f=a.context=wae(e,o,n);a.forEachMutation(function(d,A){var m=o+A;bae(e,m,d,f)}),a.forEachAction(function(d,A){var m=d.root?A:o+A,p=d.handler||d;xae(e,m,p,f)}),a.forEachGetter(function(d,A){var m=o+A;Cae(e,m,d,f)}),a.forEachChild(function(d,A){mw(e,t,n.concat(A),d,r)})}function wae(e,t,n){var a=t==="",r={dispatch:a?e.dispatch:function(s,o,l){var c=$_(s,o,l),f=c.payload,d=c.options,A=c.type;return(!d||!d.root)&&(A=t+A),e.dispatch(A,f)},commit:a?e.commit:function(s,o,l){var c=$_(s,o,l),f=c.payload,d=c.options,A=c.type;(!d||!d.root)&&(A=t+A),e.commit(A,f,d)}};return Object.defineProperties(r,{getters:{get:a?function(){return e.getters}:function(){return C5(e,t)}},state:{get:function(){return FB(e.state,n)}}}),r}function C5(e,t){if(!e._makeLocalGettersCache[t]){var n={},a=t.length;Object.keys(e.getters).forEach(function(r){if(r.slice(0,a)===t){var s=r.slice(a);Object.defineProperty(n,s,{get:function(){return e.getters[r]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function bae(e,t,n,a){var r=e._mutations[t]||(e._mutations[t]=[]);r.push(function(o){n.call(e,a.state,o)})}function xae(e,t,n,a){var r=e._actions[t]||(e._actions[t]=[]);r.push(function(o){var l=n.call(e,{dispatch:a.dispatch,commit:a.commit,getters:a.getters,state:a.state,rootGetters:e.getters,rootState:e.state},o);return yae(l)||(l=Promise.resolve(l)),e._devtoolHook?l.catch(function(c){throw e._devtoolHook.emit("vuex:error",c),c}):l})}function Cae(e,t,n,a){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(s){return n(a.state,a.getters,s.state,s.getters)})}function Sae(e){Ge(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function FB(e,t){return t.reduce(function(n,a){return n[a]},e)}function $_(e,t,n){return gae(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var Eae="vuex bindings",TD="vuex:mutations",Ox="vuex:actions",Rm="vuex",kae=0;function Bae(e,t){pae({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Eae]},function(n){n.addTimelineLayer({id:TD,label:"Vuex Mutations",color:ID}),n.addTimelineLayer({id:Ox,label:"Vuex Actions",color:ID}),n.addInspector({id:Rm,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(a){if(a.app===e&&a.inspectorId===Rm)if(a.filter){var r=[];B5(r,t._modules.root,a.filter,""),a.rootNodes=r}else a.rootNodes=[k5(t._modules.root,"")]}),n.on.getInspectorState(function(a){if(a.app===e&&a.inspectorId===Rm){var r=a.nodeId;C5(t,r),a.state=Fae(Dae(t._modules,r),r==="root"?t.getters:t._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(a){if(a.app===e&&a.inspectorId===Rm){var r=a.nodeId,s=a.path;r!=="root"&&(s=r.split("/").filter(Boolean).concat(s)),t._withCommit(function(){a.set(t._state.data,s,a.state.value)})}}),t.subscribe(function(a,r){var s={};a.payload&&(s.payload=a.payload),s.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(Rm),n.sendInspectorState(Rm),n.addTimelineEvent({layerId:TD,event:{time:Date.now(),title:a.type,data:s}})}),t.subscribeAction({before:function(a,r){var s={};a.payload&&(s.payload=a.payload),a._id=kae++,a._time=Date.now(),s.state=r,n.addTimelineEvent({layerId:Ox,event:{time:a._time,title:a.type,groupId:a._id,subtitle:"start",data:s}})},after:function(a,r){var s={},o=Date.now()-a._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},a.payload&&(s.payload=a.payload),s.state=r,n.addTimelineEvent({layerId:Ox,event:{time:Date.now(),title:a.type,groupId:a._id,subtitle:"end",data:s}})}})})}var ID=8702998,Tae=6710886,Iae=16777215,S5={label:"namespaced",textColor:Iae,backgroundColor:Tae};function E5(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function k5(e,t){return{id:t||"root",label:E5(t),tags:e.namespaced?[S5]:[],children:Object.keys(e._children).map(function(n){return k5(e._children[n],t+n+"/")})}}function B5(e,t,n,a){a.includes(n)&&e.push({id:a||"root",label:a.endsWith("/")?a.slice(0,a.length-1):a||"Root",tags:t.namespaced?[S5]:[]}),Object.keys(t._children).forEach(function(r){B5(e,t._children[r],n,a+r+"/")})}function Fae(e,t,n){t=n==="root"?t:t[n];var a=Object.keys(t),r={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(a.length){var s=Pae(t);r.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?E5(o):o,editable:!1,value:OS(function(){return s[o]})}})}return r}function Pae(e){var t={};return Object.keys(e).forEach(function(n){var a=n.split("/");if(a.length>1){var r=t,s=a.pop();a.forEach(function(o){r[o]||(r[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),r=r[o]._custom.value}),r[s]=OS(function(){return e[n]})}else t[n]=OS(function(){return e[n]})}),t}function Dae(e,t){var n=t.split("/").filter(function(a){return a});return n.reduce(function(a,r,s){var o=a[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+t+'".');return s===n.length-1?o:o._children},t==="root"?e:e.root._children)}function OS(e){try{return e()}catch(t){return t}}var au=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var a=t.state;this.state=(typeof a=="function"?a():a)||{}},T5={namespaced:{configurable:!0}};T5.namespaced.get=function(){return!!this._rawModule.namespaced};au.prototype.addChild=function(t,n){this._children[t]=n};au.prototype.removeChild=function(t){delete this._children[t]};au.prototype.getChild=function(t){return this._children[t]};au.prototype.hasChild=function(t){return t in this._children};au.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};au.prototype.forEachChild=function(t){ch(this._children,t)};au.prototype.forEachGetter=function(t){this._rawModule.getters&&ch(this._rawModule.getters,t)};au.prototype.forEachAction=function(t){this._rawModule.actions&&ch(this._rawModule.actions,t)};au.prototype.forEachMutation=function(t){this._rawModule.mutations&&ch(this._rawModule.mutations,t)};Object.defineProperties(au.prototype,T5);var zA=function(t){this.register([],t,!1)};zA.prototype.get=function(t){return t.reduce(function(n,a){return n.getChild(a)},this.root)};zA.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(a,r){return n=n.getChild(r),a+(n.namespaced?r+"/":"")},"")};zA.prototype.update=function(t){I5([],this.root,t)};zA.prototype.register=function(t,n,a){var r=this;a===void 0&&(a=!0);var s=new au(n,a);if(t.length===0)this.root=s;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],s)}n.modules&&ch(n.modules,function(l,c){r.register(t.concat(c),l,a)})};zA.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),a=t[t.length-1],r=n.getChild(a);r&&r.runtime&&n.removeChild(a)};zA.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),a=t[t.length-1];return n?n.hasChild(a):!1};function I5(e,t,n){if(t.update(n),n.modules)for(var a in n.modules){if(!t.getChild(a))return;I5(e.concat(a),t.getChild(a),n.modules[a])}}function Uae(e){return new mi(e)}var mi=function(t){var n=this;t===void 0&&(t={});var a=t.plugins;a===void 0&&(a=[]);var r=t.strict;r===void 0&&(r=!1);var s=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new zA(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=s;var o=this,l=this,c=l.dispatch,f=l.commit;this.dispatch=function(m,p){return c.call(o,m,p)},this.commit=function(m,p,h){return f.call(o,m,p,h)},this.strict=r;var d=this._modules.root.state;mw(this,d,[],this._modules.root),IB(this,d),a.forEach(function(A){return A(n)})},PB={state:{configurable:!0}};mi.prototype.install=function(t,n){t.provide(n||w5,this),t.config.globalProperties.$store=this;var a=this._devtools!==void 0?this._devtools:!1;a&&Bae(t,this)};PB.state.get=function(){return this._state.data};PB.state.set=function(e){};mi.prototype.commit=function(t,n,a){var r=this,s=$_(t,n,a),o=s.type,l=s.payload,c={type:o,payload:l},f=this._mutations[o];f&&(this._withCommit(function(){f.forEach(function(A){A(l)})}),this._subscribers.slice().forEach(function(d){return d(c,r.state)}))};mi.prototype.dispatch=function(t,n){var a=this,r=$_(t,n),s=r.type,o=r.payload,l={type:s,payload:o},c=this._actions[s];if(c){try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(l,a.state)})}catch{}var f=c.length>1?Promise.all(c.map(function(d){return d(o)})):c[0](o);return new Promise(function(d,A){f.then(function(m){try{a._actionSubscribers.filter(function(p){return p.after}).forEach(function(p){return p.after(l,a.state)})}catch{}d(m)},function(m){try{a._actionSubscribers.filter(function(p){return p.error}).forEach(function(p){return p.error(l,a.state,m)})}catch{}A(m)})})}};mi.prototype.subscribe=function(t,n){return b5(t,this._subscribers,n)};mi.prototype.subscribeAction=function(t,n){var a=typeof t=="function"?{before:t}:t;return b5(a,this._actionSubscribers,n)};mi.prototype.watch=function(t,n,a){var r=this;return Ge(function(){return t(r.state,r.getters)},n,Object.assign({},a))};mi.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};mi.prototype.registerModule=function(t,n,a){a===void 0&&(a={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),mw(this,this.state,t,this._modules.get(t),a.preserveState),IB(this,this.state)};mi.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var a=FB(n.state,t.slice(0,-1));delete a[t[t.length-1]]}),x5(this)};mi.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};mi.prototype.hotUpdate=function(t){this._modules.update(t),x5(this,!0)};mi.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(mi.prototype,PB);const Zm=typeof document<"u";function F5(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Rae(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&F5(e.default)}const Xa=Object.assign;function Hx(e,t){const n={};for(const a in t){const r=t[a];n[a]=jl(r)?r.map(e):e(r)}return n}const Jp=()=>{},jl=Array.isArray,P5=/#/g,Nae=/&/g,Vae=/\//g,Lae=/=/g,Mae=/\?/g,D5=/\+/g,Oae=/%5B/g,Hae=/%5D/g,U5=/%5E/g,$ae=/%60/g,R5=/%7B/g,Qae=/%7C/g,N5=/%7D/g,Gae=/%20/g;function DB(e){return encodeURI(""+e).replace(Qae,"|").replace(Oae,"[").replace(Hae,"]")}function zae(e){return DB(e).replace(R5,"{").replace(N5,"}").replace(U5,"^")}function HS(e){return DB(e).replace(D5,"%2B").replace(Gae,"+").replace(P5,"%23").replace(Nae,"%26").replace($ae,"`").replace(R5,"{").replace(N5,"}").replace(U5,"^")}function Wae(e){return HS(e).replace(Lae,"%3D")}function Kae(e){return DB(e).replace(P5,"%23").replace(Mae,"%3F")}function jae(e){return e==null?"":Kae(e).replace(Vae,"%2F")}function N0(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const qae=/\/$/,Yae=e=>e.replace(qae,"");function $x(e,t,n="/"){let a,r={},s="",o="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(a=t.slice(0,c),s=t.slice(c+1,l>-1?l:t.length),r=e(s)),l>-1&&(a=a||t.slice(0,l),o=t.slice(l,t.length)),a=ere(a??t,n),{fullPath:a+(s&&"?")+s+o,path:a,query:r,hash:N0(o)}}function Xae(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function FD(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Jae(e,t,n){const a=t.matched.length-1,r=n.matched.length-1;return a>-1&&a===r&&Hv(t.matched[a],n.matched[r])&&V5(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Hv(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function V5(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Zae(e[n],t[n]))return!1;return!0}function Zae(e,t){return jl(e)?PD(e,t):jl(t)?PD(t,e):e===t}function PD(e,t){return jl(t)?e.length===t.length&&e.every((n,a)=>n===t[a]):e.length===1&&e[0]===t}function ere(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),a=e.split("/"),r=a[a.length-1];(r===".."||r===".")&&a.push("");let s=n.length-1,o,l;for(o=0;o<a.length;o++)if(l=a[o],l!==".")if(l==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+a.slice(o).join("/")}const fd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var V0;(function(e){e.pop="pop",e.push="push"})(V0||(V0={}));var Zp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Zp||(Zp={}));function tre(e){if(!e)if(Zm){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Yae(e)}const nre=/^[^#]+#/;function are(e,t){return e.replace(nre,"#")+t}function rre(e,t){const n=document.documentElement.getBoundingClientRect(),a=e.getBoundingClientRect();return{behavior:t.behavior,left:a.left-n.left-(t.left||0),top:a.top-n.top-(t.top||0)}}const vw=()=>({left:window.scrollX,top:window.scrollY});function sre(e){let t;if("el"in e){const n=e.el,a=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=rre(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function DD(e,t){return(history.state?history.state.position-t:-1)+e}const $S=new Map;function ore(e,t){$S.set(e,t)}function ire(e){const t=$S.get(e);return $S.delete(e),t}let lre=()=>location.protocol+"//"+location.host;function L5(e,t){const{pathname:n,search:a,hash:r}=t,s=e.indexOf("#");if(s>-1){let l=r.includes(e.slice(s))?e.slice(s).length:1,c=r.slice(l);return c[0]!=="/"&&(c="/"+c),FD(c,"")}return FD(n,e)+a+r}function ure(e,t,n,a){let r=[],s=[],o=null;const l=({state:m})=>{const p=L5(e,location),h=n.value,y=t.value;let g=0;if(m){if(n.value=p,t.value=m,o&&o===h){o=null;return}g=y?m.position-y.position:0}else a(p);r.forEach(_=>{_(n.value,h,{delta:g,type:V0.pop,direction:g?g>0?Zp.forward:Zp.back:Zp.unknown})})};function c(){o=n.value}function f(m){r.push(m);const p=()=>{const h=r.indexOf(m);h>-1&&r.splice(h,1)};return s.push(p),p}function d(){const{history:m}=window;m.state&&m.replaceState(Xa({},m.state,{scroll:vw()}),"")}function A(){for(const m of s)m();s=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:f,destroy:A}}function UD(e,t,n,a=!1,r=!1){return{back:e,current:t,forward:n,replaced:a,position:window.history.length,scroll:r?vw():null}}function cre(e){const{history:t,location:n}=window,a={value:L5(e,n)},r={value:t.state};r.value||s(a.value,{back:null,current:a.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(c,f,d){const A=e.indexOf("#"),m=A>-1?(n.host&&document.querySelector("base")?e:e.slice(A))+c:lre()+e+c;try{t[d?"replaceState":"pushState"](f,"",m),r.value=f}catch(p){console.error(p),n[d?"replace":"assign"](m)}}function o(c,f){const d=Xa({},t.state,UD(r.value.back,c,r.value.forward,!0),f,{position:r.value.position});s(c,d,!0),a.value=c}function l(c,f){const d=Xa({},r.value,t.state,{forward:c,scroll:vw()});s(d.current,d,!0);const A=Xa({},UD(a.value,c,null),{position:d.position+1},f);s(c,A,!1),a.value=c}return{location:a,state:r,push:l,replace:o}}function dre(e){e=tre(e);const t=cre(e),n=ure(e,t.state,t.location,t.replace);function a(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=Xa({location:"",base:e,go:a,createHref:are.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function fre(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),dre(e)}function Are(e){return typeof e=="string"||e&&typeof e=="object"}function M5(e){return typeof e=="string"||typeof e=="symbol"}const O5=Symbol("");var RD;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(RD||(RD={}));function $v(e,t){return Xa(new Error,{type:e,[O5]:!0},t)}function hc(e,t){return e instanceof Error&&O5 in e&&(t==null||!!(e.type&t))}const ND="[^/]+?",mre={sensitive:!1,strict:!1,start:!0,end:!0},vre=/[.+*?^${}()[\]/\\]/g;function hre(e,t){const n=Xa({},mre,t),a=[];let r=n.start?"^":"";const s=[];for(const f of e){const d=f.length?[]:[90];n.strict&&!f.length&&(r+="/");for(let A=0;A<f.length;A++){const m=f[A];let p=40+(n.sensitive?.25:0);if(m.type===0)A||(r+="/"),r+=m.value.replace(vre,"\\$&"),p+=40;else if(m.type===1){const{value:h,repeatable:y,optional:g,regexp:_}=m;s.push({name:h,repeatable:y,optional:g});const b=_||ND;if(b!==ND){p+=10;try{new RegExp(`(${b})`)}catch(B){throw new Error(`Invalid custom RegExp for param "${h}" (${b}): `+B.message)}}let S=y?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;A||(S=g&&f.length<2?`(?:/${S})`:"/"+S),g&&(S+="?"),r+=S,p+=20,g&&(p+=-8),y&&(p+=-20),b===".*"&&(p+=-50)}d.push(p)}a.push(d)}if(n.strict&&n.end){const f=a.length-1;a[f][a[f].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(f){const d=f.match(o),A={};if(!d)return null;for(let m=1;m<d.length;m++){const p=d[m]||"",h=s[m-1];A[h.name]=p&&h.repeatable?p.split("/"):p}return A}function c(f){let d="",A=!1;for(const m of e){(!A||!d.endsWith("/"))&&(d+="/"),A=!1;for(const p of m)if(p.type===0)d+=p.value;else if(p.type===1){const{value:h,repeatable:y,optional:g}=p,_=h in f?f[h]:"";if(jl(_)&&!y)throw new Error(`Provided param "${h}" is an array but it is not repeatable (* or + modifiers)`);const b=jl(_)?_.join("/"):_;if(!b)if(g)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):A=!0);else throw new Error(`Missing required param "${h}"`);d+=b}}return d||"/"}return{re:o,score:a,keys:s,parse:l,stringify:c}}function pre(e,t){let n=0;for(;n<e.length&&n<t.length;){const a=t[n]-e[n];if(a)return a;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function H5(e,t){let n=0;const a=e.score,r=t.score;for(;n<a.length&&n<r.length;){const s=pre(a[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-a.length)===1){if(VD(a))return 1;if(VD(r))return-1}return r.length-a.length}function VD(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const gre={type:0,value:""},yre=/[a-zA-Z0-9_]/;function _re(e){if(!e)return[[]];if(e==="/")return[[gre]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${n})/"${f}": ${p}`)}let n=0,a=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let l=0,c,f="",d="";function A(){f&&(n===0?s.push({type:0,value:f}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:f,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),f="")}function m(){f+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:c==="/"?(f&&A(),o()):c===":"?(A(),n=1):m();break;case 4:m(),n=a;break;case 1:c==="("?n=2:yre.test(c)?m():(A(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:A(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${f}"`),A(),o(),r}function wre(e,t,n){const a=hre(_re(e.path),n),r=Xa(a,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function bre(e,t){const n=[],a=new Map;t=HD({strict:!1,end:!0,sensitive:!1},t);function r(A){return a.get(A)}function s(A,m,p){const h=!p,y=MD(A);y.aliasOf=p&&p.record;const g=HD(t,A),_=[y];if("alias"in A){const B=typeof A.alias=="string"?[A.alias]:A.alias;for(const F of B)_.push(MD(Xa({},y,{components:p?p.record.components:y.components,path:F,aliasOf:p?p.record:y})))}let b,S;for(const B of _){const{path:F}=B;if(m&&F[0]!=="/"){const T=m.record.path,E=T[T.length-1]==="/"?"":"/";B.path=m.record.path+(F&&E+F)}if(b=wre(B,m,g),p?p.alias.push(b):(S=S||b,S!==b&&S.alias.push(b),h&&A.name&&!OD(b)&&o(A.name)),$5(b)&&c(b),y.children){const T=y.children;for(let E=0;E<T.length;E++)s(T[E],b,p&&p.children[E])}p=p||b}return S?()=>{o(S)}:Jp}function o(A){if(M5(A)){const m=a.get(A);m&&(a.delete(A),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(A);m>-1&&(n.splice(m,1),A.record.name&&a.delete(A.record.name),A.children.forEach(o),A.alias.forEach(o))}}function l(){return n}function c(A){const m=Sre(A,n);n.splice(m,0,A),A.record.name&&!OD(A)&&a.set(A.record.name,A)}function f(A,m){let p,h={},y,g;if("name"in A&&A.name){if(p=a.get(A.name),!p)throw $v(1,{location:A});g=p.record.name,h=Xa(LD(m.params,p.keys.filter(S=>!S.optional).concat(p.parent?p.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),A.params&&LD(A.params,p.keys.map(S=>S.name))),y=p.stringify(h)}else if(A.path!=null)y=A.path,p=n.find(S=>S.re.test(y)),p&&(h=p.parse(y),g=p.record.name);else{if(p=m.name?a.get(m.name):n.find(S=>S.re.test(m.path)),!p)throw $v(1,{location:A,currentLocation:m});g=p.record.name,h=Xa({},m.params,A.params),y=p.stringify(h)}const _=[];let b=p;for(;b;)_.unshift(b.record),b=b.parent;return{name:g,path:y,params:h,matched:_,meta:Cre(_)}}e.forEach(A=>s(A));function d(){n.length=0,a.clear()}return{addRoute:s,resolve:f,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:r}}function LD(e,t){const n={};for(const a of t)a in e&&(n[a]=e[a]);return n}function MD(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:xre(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function xre(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const a in e.components)t[a]=typeof n=="object"?n[a]:n;return t}function OD(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Cre(e){return e.reduce((t,n)=>Xa(t,n.meta),{})}function HD(e,t){const n={};for(const a in e)n[a]=a in t?t[a]:e[a];return n}function Sre(e,t){let n=0,a=t.length;for(;n!==a;){const s=n+a>>1;H5(e,t[s])<0?a=s:n=s+1}const r=Ere(e);return r&&(a=t.lastIndexOf(r,a-1)),a}function Ere(e){let t=e;for(;t=t.parent;)if($5(t)&&H5(e,t)===0)return t}function $5({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function kre(e){const t={};if(e===""||e==="?")return t;const a=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<a.length;++r){const s=a[r].replace(D5," "),o=s.indexOf("="),l=N0(o<0?s:s.slice(0,o)),c=o<0?null:N0(s.slice(o+1));if(l in t){let f=t[l];jl(f)||(f=t[l]=[f]),f.push(c)}else t[l]=c}return t}function $D(e){let t="";for(let n in e){const a=e[n];if(n=Wae(n),a==null){a!==void 0&&(t+=(t.length?"&":"")+n);continue}(jl(a)?a.map(s=>s&&HS(s)):[a&&HS(a)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function Bre(e){const t={};for(const n in e){const a=e[n];a!==void 0&&(t[n]=jl(a)?a.map(r=>r==null?null:""+r):a==null?a:""+a)}return t}const Tre=Symbol(""),QD=Symbol(""),hw=Symbol(""),UB=Symbol(""),QS=Symbol("");function cp(){let e=[];function t(a){return e.push(a),()=>{const r=e.indexOf(a);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function bd(e,t,n,a,r,s=o=>o()){const o=a&&(a.enterCallbacks[r]=a.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const f=m=>{m===!1?c($v(4,{from:n,to:t})):m instanceof Error?c(m):Are(m)?c($v(2,{from:t,to:m})):(o&&a.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},d=s(()=>e.call(a&&a.instances[r],t,n,f));let A=Promise.resolve(d);e.length<3&&(A=A.then(f)),A.catch(m=>c(m))})}function Qx(e,t,n,a,r=s=>s()){const s=[];for(const o of e)for(const l in o.components){let c=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(F5(c)){const d=(c.__vccOpts||c)[t];d&&s.push(bd(d,n,a,o,l,r))}else{let f=c();s.push(()=>f.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const A=Rae(d)?d.default:d;o.mods[l]=d,o.components[l]=A;const p=(A.__vccOpts||A)[t];return p&&bd(p,n,a,o,l,r)()}))}}return s}function GD(e){const t=Pn(hw),n=Pn(UB),a=ee(()=>{const c=Oe(e.to);return t.resolve(c)}),r=ee(()=>{const{matched:c}=a.value,{length:f}=c,d=c[f-1],A=n.matched;if(!d||!A.length)return-1;const m=A.findIndex(Hv.bind(null,d));if(m>-1)return m;const p=zD(c[f-2]);return f>1&&zD(d)===p&&A[A.length-1].path!==p?A.findIndex(Hv.bind(null,c[f-2])):m}),s=ee(()=>r.value>-1&&Ure(n.params,a.value.params)),o=ee(()=>r.value>-1&&r.value===n.matched.length-1&&V5(n.params,a.value.params));function l(c={}){if(Dre(c)){const f=t[Oe(e.replace)?"replace":"push"](Oe(e.to)).catch(Jp);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>f),f}return Promise.resolve()}return{route:a,href:ee(()=>a.value.href),isActive:s,isExactActive:o,navigate:l}}function Ire(e){return e.length===1?e[0]:e}const Fre=iB({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:GD,setup(e,{slots:t}){const n=As(GD(e)),{options:a}=Pn(hw),r=ee(()=>({[WD(e.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[WD(e.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&Ire(t.default(n));return e.custom?s:nu("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),Pre=Fre;function Dre(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ure(e,t){for(const n in t){const a=t[n],r=e[n];if(typeof a=="string"){if(a!==r)return!1}else if(!jl(r)||r.length!==a.length||a.some((s,o)=>s!==r[o]))return!1}return!0}function zD(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const WD=(e,t,n)=>e??t??n,Rre=iB({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const a=Pn(QS),r=ee(()=>e.route||a.value),s=Pn(QD,0),o=ee(()=>{let f=Oe(s);const{matched:d}=r.value;let A;for(;(A=d[f])&&!A.components;)f++;return f}),l=ee(()=>r.value.matched[o.value]);za(QD,ee(()=>o.value+1)),za(Tre,l),za(QS,r);const c=R();return Ge(()=>[c.value,l.value,e.name],([f,d,A],[m,p,h])=>{d&&(d.instances[A]=f,p&&p!==d&&f&&f===m&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),f&&d&&(!p||!Hv(d,p)||!m)&&(d.enterCallbacks[A]||[]).forEach(y=>y(f))},{flush:"post"}),()=>{const f=r.value,d=e.name,A=l.value,m=A&&A.components[d];if(!m)return KD(n.default,{Component:m,route:f});const p=A.props[d],h=p?p===!0?f.params:typeof p=="function"?p(f):p:null,g=nu(m,Xa({},h,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(A.instances[d]=null)},ref:c}));return KD(n.default,{Component:g,route:f})||g}}});function KD(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Nre=Rre;function Vre(e){const t=bre(e.routes,e),n=e.parseQuery||kre,a=e.stringifyQuery||$D,r=e.history,s=cp(),o=cp(),l=cp(),c=Gt(fd);let f=fd;Zm&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Hx.bind(null,j=>""+j),A=Hx.bind(null,jae),m=Hx.bind(null,N0);function p(j,J){let ie,X;return M5(j)?(ie=t.getRecordMatcher(j),X=J):X=j,t.addRoute(X,ie)}function h(j){const J=t.getRecordMatcher(j);J&&t.removeRoute(J)}function y(){return t.getRoutes().map(j=>j.record)}function g(j){return!!t.getRecordMatcher(j)}function _(j,J){if(J=Xa({},J||c.value),typeof j=="string"){const se=$x(n,j,J.path),be=t.resolve({path:se.path},J),Fe=r.createHref(se.fullPath);return Xa(se,be,{params:m(be.params),hash:N0(se.hash),redirectedFrom:void 0,href:Fe})}let ie;if(j.path!=null)ie=Xa({},j,{path:$x(n,j.path,J.path).path});else{const se=Xa({},j.params);for(const be in se)se[be]==null&&delete se[be];ie=Xa({},j,{params:A(se)}),J.params=A(J.params)}const X=t.resolve(ie,J),fe=j.hash||"";X.params=d(m(X.params));const M=Xae(a,Xa({},j,{hash:zae(fe),path:X.path})),z=r.createHref(M);return Xa({fullPath:M,hash:fe,query:a===$D?Bre(j.query):j.query||{}},X,{redirectedFrom:void 0,href:z})}function b(j){return typeof j=="string"?$x(n,j,c.value.path):Xa({},j)}function S(j,J){if(f!==j)return $v(8,{from:J,to:j})}function B(j){return E(j)}function F(j){return B(Xa(b(j),{replace:!0}))}function T(j){const J=j.matched[j.matched.length-1];if(J&&J.redirect){const{redirect:ie}=J;let X=typeof ie=="function"?ie(j):ie;return typeof X=="string"&&(X=X.includes("?")||X.includes("#")?X=b(X):{path:X},X.params={}),Xa({query:j.query,hash:j.hash,params:X.path!=null?{}:j.params},X)}}function E(j,J){const ie=f=_(j),X=c.value,fe=j.state,M=j.force,z=j.replace===!0,se=T(ie);if(se)return E(Xa(b(se),{state:typeof se=="object"?Xa({},fe,se.state):fe,force:M,replace:z}),J||ie);const be=ie;be.redirectedFrom=J;let Fe;return!M&&Jae(a,X,ie)&&(Fe=$v(16,{to:be,from:X}),ne(X,X,!0,!1)),(Fe?Promise.resolve(Fe):D(be,X)).catch(ye=>hc(ye)?hc(ye,2)?ye:Z(ye):ce(ye,be,X)).then(ye=>{if(ye){if(hc(ye,2))return E(Xa({replace:z},b(ye.to),{state:typeof ye.to=="object"?Xa({},fe,ye.to.state):fe,force:M}),J||be)}else ye=L(be,X,!0,z,fe);return U(be,X,ye),ye})}function x(j,J){const ie=S(j,J);return ie?Promise.reject(ie):Promise.resolve()}function C(j){const J=Q.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(j):j()}function D(j,J){let ie;const[X,fe,M]=Lre(j,J);ie=Qx(X.reverse(),"beforeRouteLeave",j,J);for(const se of X)se.leaveGuards.forEach(be=>{ie.push(bd(be,j,J))});const z=x.bind(null,j,J);return ie.push(z),ae(ie).then(()=>{ie=[];for(const se of s.list())ie.push(bd(se,j,J));return ie.push(z),ae(ie)}).then(()=>{ie=Qx(fe,"beforeRouteUpdate",j,J);for(const se of fe)se.updateGuards.forEach(be=>{ie.push(bd(be,j,J))});return ie.push(z),ae(ie)}).then(()=>{ie=[];for(const se of M)if(se.beforeEnter)if(jl(se.beforeEnter))for(const be of se.beforeEnter)ie.push(bd(be,j,J));else ie.push(bd(se.beforeEnter,j,J));return ie.push(z),ae(ie)}).then(()=>(j.matched.forEach(se=>se.enterCallbacks={}),ie=Qx(M,"beforeRouteEnter",j,J,C),ie.push(z),ae(ie))).then(()=>{ie=[];for(const se of o.list())ie.push(bd(se,j,J));return ie.push(z),ae(ie)}).catch(se=>hc(se,8)?se:Promise.reject(se))}function U(j,J,ie){l.list().forEach(X=>C(()=>X(j,J,ie)))}function L(j,J,ie,X,fe){const M=S(j,J);if(M)return M;const z=J===fd,se=Zm?history.state:{};ie&&(X||z?r.replace(j.fullPath,Xa({scroll:z&&se&&se.scroll},fe)):r.push(j.fullPath,fe)),c.value=j,ne(j,J,ie,z),Z()}let H;function oe(){H||(H=r.listen((j,J,ie)=>{if(!O.listening)return;const X=_(j),fe=T(X);if(fe){E(Xa(fe,{replace:!0,force:!0}),X).catch(Jp);return}f=X;const M=c.value;Zm&&ore(DD(M.fullPath,ie.delta),vw()),D(X,M).catch(z=>hc(z,12)?z:hc(z,2)?(E(Xa(b(z.to),{force:!0}),X).then(se=>{hc(se,20)&&!ie.delta&&ie.type===V0.pop&&r.go(-1,!1)}).catch(Jp),Promise.reject()):(ie.delta&&r.go(-ie.delta,!1),ce(z,X,M))).then(z=>{z=z||L(X,M,!1),z&&(ie.delta&&!hc(z,8)?r.go(-ie.delta,!1):ie.type===V0.pop&&hc(z,20)&&r.go(-1,!1)),U(X,M,z)}).catch(Jp)}))}let de=cp(),te=cp(),q;function ce(j,J,ie){Z(j);const X=te.list();return X.length?X.forEach(fe=>fe(j,J,ie)):console.error(j),Promise.reject(j)}function le(){return q&&c.value!==fd?Promise.resolve():new Promise((j,J)=>{de.add([j,J])})}function Z(j){return q||(q=!j,oe(),de.list().forEach(([J,ie])=>j?ie(j):J()),de.reset()),j}function ne(j,J,ie,X){const{scrollBehavior:fe}=e;if(!Zm||!fe)return Promise.resolve();const M=!ie&&ire(DD(j.fullPath,0))||(X||!ie)&&history.state&&history.state.scroll||null;return Cn().then(()=>fe(j,J,M)).then(z=>z&&sre(z)).catch(z=>ce(z,j,J))}const G=j=>r.go(j);let W;const Q=new Set,O={currentRoute:c,listening:!0,addRoute:p,removeRoute:h,clearRoutes:t.clearRoutes,hasRoute:g,getRoutes:y,resolve:_,options:e,push:B,replace:F,go:G,back:()=>G(-1),forward:()=>G(1),beforeEach:s.add,beforeResolve:o.add,afterEach:l.add,onError:te.add,isReady:le,install(j){const J=this;j.component("RouterLink",Pre),j.component("RouterView",Nre),j.config.globalProperties.$router=J,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>Oe(c)}),Zm&&!W&&c.value===fd&&(W=!0,B(r.location).catch(fe=>{}));const ie={};for(const fe in fd)Object.defineProperty(ie,fe,{get:()=>c.value[fe],enumerable:!0});j.provide(hw,J),j.provide(UB,PL(ie)),j.provide(QS,c);const X=j.unmount;Q.add(j),j.unmount=function(){Q.delete(j),Q.size<1&&(f=fd,H&&H(),H=null,c.value=fd,W=!1,q=!1),X()}}};function ae(j){return j.reduce((J,ie)=>J.then(()=>C(ie)),Promise.resolve())}return O}function Lre(e,t){const n=[],a=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const l=t.matched[o];l&&(e.matched.find(f=>Hv(f,l))?a.push(l):n.push(l));const c=e.matched[o];c&&(t.matched.find(f=>Hv(f,c))||r.push(c))}return[n,a,r]}function ml(){return Pn(hw)}function WA(e){return Pn(UB)}function la(){const e=Ln(),t=ee(()=>e.getters["snackbar/snackbar"]),n=ee(()=>e.getters["snackbar/isSnackbarVisible"]),a=m=>{e.dispatch("snackbar/showSnackbar",m)},r=()=>{e.dispatch("snackbar/hideSnackbar")},s=m=>{e.dispatch("snackbar/setSnackbarVisibility",m)},o=m=>{e.dispatch("snackbar/showSuccess",m)},l=m=>{e.dispatch("snackbar/showError",m)};return{snackbar:t,isVisible:n,showSnackbar:a,hideSnackbar:r,setVisibility:s,showSuccess:o,showError:l,showWarning:m=>{e.dispatch("snackbar/showWarning",m)},showInfo:m=>{e.dispatch("snackbar/showInfo",m)},handleApiResponse:(m,p=null)=>{if(m.success){const h=p||m.message||"Operation successful";o(h)}else{const h=m.error||m.message||"An error occurred";l(h)}},handleApiError:(m,p="An error occurred")=>{let h=p;m.response?.data?.error?h=m.response.data.error:m.response?.data?.message?h=m.response.data.message:m.message&&(h=m.message),l(h)}}}const hu={HTTPS_SERVER:29200,HTTP_SERVER:29201,WEBSOCKET:29200,HEALTH_ENDPOINTS:{HTTPS:"/health",HTTP:"/health"}},xo=(e="localhost")=>({https:`https://${e}:${hu.HTTPS_SERVER}`,http:`http://${e}:${hu.HTTP_SERVER}`,api:{https:`https://${e}:${hu.HTTPS_SERVER}/api`,http:`http://${e}:${hu.HTTP_SERVER}/api`},websocket:{wss:`wss://${e}:${hu.WEBSOCKET}`,ws:`ws://${e}:${hu.HTTP_SERVER}`},health:{https:`https://${e}:${hu.HTTPS_SERVER}${hu.HEALTH_ENDPOINTS.HTTPS}`,http:`http://${e}:${hu.HTTP_SERVER}${hu.HEALTH_ENDPOINTS.HTTP}`}}),Oa=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",Nm=()=>!Oa(),Mre=()=>{try{let e=null;if(window.location.search&&(e=new URLSearchParams(window.location.search).get("endpoint"),e))return console.log("[environment] Retrieved endpoint from URL search params:",e),e;try{if(e=new URL(window.location.href).searchParams.get("endpoint"),e)return console.log("[environment] Retrieved endpoint from URL object:",e),e}catch(t){console.warn("[environment] Failed to parse URL from window.location.href:",t)}if(window.location.hash&&window.location.hash.includes("?")){const t=window.location.hash.split("?");if(t.length>1&&(e=new URLSearchParams("?"+t[1]).get("endpoint"),e))return console.log("[environment] Retrieved endpoint from hash params:",e),e}return null}catch(e){return console.warn("[environment] Failed to extract endpoint from URL:",e),null}},RB=()=>{if(Oa()){const a=xo("localhost").api.http;return console.log("[environment] Electron mode - using base URL:",a),a}const e=Mre();if(!e){const a="Web mode requires an endpoint parameter in the URL. Please add ?endpoint=https://your-api-server.com to the URL.";throw console.error("[environment]",a),new Error(a)}if(e.includes("localhost")||e.includes("127.0.0.1")){const a="Web mode requires a remote endpoint URL, not localhost. Please provide a valid remote server endpoint.";throw console.error("[environment]",a),new Error(a)}if(!e.startsWith("http://")&&!e.startsWith("https://")){const a="Web mode requires a full endpoint URL (http:// or https://).";throw console.error("[environment]",a),new Error(a)}const t=e.replace(/\/$/,""),n=t.endsWith("/api")?t:t+"/api";return console.log("[environment] Web mode - using base URL:",n),n},Q5=()=>{try{return RB().replace(/\/api\/?$/,"")}catch(e){if(console.error("[environment] Failed to get server base URL:",e),Oa())return xo("localhost").http;throw e}},Ore=(e="/ws/transcribe")=>{try{const t=RB(),n=new URL(t),r=`${n.protocol==="https:"?"wss:":"ws:"}//${n.host}${e}`;return console.log("[environment] WebSocket URL:",r),r}catch(t){if(console.error("[environment] Failed to get WebSocket URL:",t),Oa())return`${xo("localhost").websocket.ws}${e}`;throw t}};function G5(e,t){return function(){return e.apply(t,arguments)}}const{toString:Hre}=Object.prototype,{getPrototypeOf:NB}=Object,{iterator:pw,toStringTag:z5}=Symbol,gw=(e=>t=>{const n=Hre.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ru=e=>(e=e.toLowerCase(),t=>gw(t)===e),yw=e=>t=>typeof t===e,{isArray:dh}=Array,Qv=yw("undefined");function Cg(e){return e!==null&&!Qv(e)&&e.constructor!==null&&!Qv(e.constructor)&&ci(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const W5=ru("ArrayBuffer");function $re(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&W5(e.buffer),t}const Qre=yw("string"),ci=yw("function"),K5=yw("number"),Sg=e=>e!==null&&typeof e=="object",Gre=e=>e===!0||e===!1,t_=e=>{if(gw(e)!=="object")return!1;const t=NB(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(z5 in e)&&!(pw in e)},zre=e=>{if(!Sg(e)||Cg(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Wre=ru("Date"),Kre=ru("File"),jre=ru("Blob"),qre=ru("FileList"),Yre=e=>Sg(e)&&ci(e.pipe),Xre=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ci(e.append)&&((t=gw(e))==="formdata"||t==="object"&&ci(e.toString)&&e.toString()==="[object FormData]"))},Jre=ru("URLSearchParams"),[Zre,ese,tse,nse]=["ReadableStream","Request","Response","Headers"].map(ru),ase=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Eg(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,r;if(typeof e!="object"&&(e=[e]),dh(e))for(a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else{if(Cg(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let l;for(a=0;a<o;a++)l=s[a],t.call(null,e[l],l,e)}}function j5(e,t){if(Cg(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a=n.length,r;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const qf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,q5=e=>!Qv(e)&&e!==qf;function GS(){const{caseless:e,skipUndefined:t}=q5(this)&&this||{},n={},a=(r,s)=>{const o=e&&j5(n,s)||s;t_(n[o])&&t_(r)?n[o]=GS(n[o],r):t_(r)?n[o]=GS({},r):dh(r)?n[o]=r.slice():(!t||!Qv(r))&&(n[o]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Eg(arguments[r],a);return n}const rse=(e,t,n,{allOwnKeys:a}={})=>(Eg(t,(r,s)=>{n&&ci(r)?e[s]=G5(r,n):e[s]=r},{allOwnKeys:a}),e),sse=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ose=(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},ise=(e,t,n,a)=>{let r,s,o;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],(!a||a(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&NB(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},lse=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return a!==-1&&a===n},use=e=>{if(!e)return null;if(dh(e))return e;let t=e.length;if(!K5(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},cse=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&NB(Uint8Array)),dse=(e,t)=>{const a=(e&&e[pw]).call(e);let r;for(;(r=a.next())&&!r.done;){const s=r.value;t.call(e,s[0],s[1])}},fse=(e,t)=>{let n;const a=[];for(;(n=e.exec(t))!==null;)a.push(n);return a},Ase=ru("HTMLFormElement"),mse=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,r){return a.toUpperCase()+r}),jD=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),vse=ru("RegExp"),Y5=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};Eg(n,(r,s)=>{let o;(o=t(r,s,e))!==!1&&(a[s]=o||r)}),Object.defineProperties(e,a)},hse=e=>{Y5(e,(t,n)=>{if(ci(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(ci(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},pse=(e,t)=>{const n={},a=r=>{r.forEach(s=>{n[s]=!0})};return dh(e)?a(e):a(String(e).split(t)),n},gse=()=>{},yse=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function _se(e){return!!(e&&ci(e.append)&&e[z5]==="FormData"&&e[pw])}const wse=e=>{const t=new Array(10),n=(a,r)=>{if(Sg(a)){if(t.indexOf(a)>=0)return;if(Cg(a))return a;if(!("toJSON"in a)){t[r]=a;const s=dh(a)?[]:{};return Eg(a,(o,l)=>{const c=n(o,r+1);!Qv(c)&&(s[l]=c)}),t[r]=void 0,s}}return a};return n(e,0)},bse=ru("AsyncFunction"),xse=e=>e&&(Sg(e)||ci(e))&&ci(e.then)&&ci(e.catch),X5=((e,t)=>e?setImmediate:t?((n,a)=>(qf.addEventListener("message",({source:r,data:s})=>{r===qf&&s===n&&a.length&&a.shift()()},!1),r=>{a.push(r),qf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ci(qf.postMessage)),Cse=typeof queueMicrotask<"u"?queueMicrotask.bind(qf):typeof process<"u"&&process.nextTick||X5,Sse=e=>e!=null&&ci(e[pw]),Tt={isArray:dh,isArrayBuffer:W5,isBuffer:Cg,isFormData:Xre,isArrayBufferView:$re,isString:Qre,isNumber:K5,isBoolean:Gre,isObject:Sg,isPlainObject:t_,isEmptyObject:zre,isReadableStream:Zre,isRequest:ese,isResponse:tse,isHeaders:nse,isUndefined:Qv,isDate:Wre,isFile:Kre,isBlob:jre,isRegExp:vse,isFunction:ci,isStream:Yre,isURLSearchParams:Jre,isTypedArray:cse,isFileList:qre,forEach:Eg,merge:GS,extend:rse,trim:ase,stripBOM:sse,inherits:ose,toFlatObject:ise,kindOf:gw,kindOfTest:ru,endsWith:lse,toArray:use,forEachEntry:dse,matchAll:fse,isHTMLForm:Ase,hasOwnProperty:jD,hasOwnProp:jD,reduceDescriptors:Y5,freezeMethods:hse,toObjectSet:pse,toCamelCase:mse,noop:gse,toFiniteNumber:yse,findKey:j5,global:qf,isContextDefined:q5,isSpecCompliantForm:_se,toJSONObject:wse,isAsyncFn:bse,isThenable:xse,setImmediate:X5,asap:Cse,isIterable:Sse};function oa(e,t,n,a,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),r&&(this.response=r,this.status=r.status?r.status:null)}Tt.inherits(oa,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Tt.toJSONObject(this.config),code:this.code,status:this.status}}});const J5=oa.prototype,Z5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Z5[e]={value:e}});Object.defineProperties(oa,Z5);Object.defineProperty(J5,"isAxiosError",{value:!0});oa.from=(e,t,n,a,r,s)=>{const o=Object.create(J5);Tt.toFlatObject(e,o,function(d){return d!==Error.prototype},f=>f!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return oa.call(o,l,c,n,a,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",s&&Object.assign(o,s),o};const Ese=null;function zS(e){return Tt.isPlainObject(e)||Tt.isArray(e)}function e6(e){return Tt.endsWith(e,"[]")?e.slice(0,-2):e}function qD(e,t,n){return e?e.concat(t).map(function(r,s){return r=e6(r),!n&&s?"["+r+"]":r}).join(n?".":""):t}function kse(e){return Tt.isArray(e)&&!e.some(zS)}const Bse=Tt.toFlatObject(Tt,{},null,function(t){return/^is[A-Z]/.test(t)});function _w(e,t,n){if(!Tt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Tt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,g){return!Tt.isUndefined(g[y])});const a=n.metaTokens,r=n.visitor||d,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Tt.isSpecCompliantForm(t);if(!Tt.isFunction(r))throw new TypeError("visitor must be a function");function f(h){if(h===null)return"";if(Tt.isDate(h))return h.toISOString();if(Tt.isBoolean(h))return h.toString();if(!c&&Tt.isBlob(h))throw new oa("Blob is not supported. Use a Buffer instead.");return Tt.isArrayBuffer(h)||Tt.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function d(h,y,g){let _=h;if(h&&!g&&typeof h=="object"){if(Tt.endsWith(y,"{}"))y=a?y:y.slice(0,-2),h=JSON.stringify(h);else if(Tt.isArray(h)&&kse(h)||(Tt.isFileList(h)||Tt.endsWith(y,"[]"))&&(_=Tt.toArray(h)))return y=e6(y),_.forEach(function(S,B){!(Tt.isUndefined(S)||S===null)&&t.append(o===!0?qD([y],B,s):o===null?y:y+"[]",f(S))}),!1}return zS(h)?!0:(t.append(qD(g,y,s),f(h)),!1)}const A=[],m=Object.assign(Bse,{defaultVisitor:d,convertValue:f,isVisitable:zS});function p(h,y){if(!Tt.isUndefined(h)){if(A.indexOf(h)!==-1)throw Error("Circular reference detected in "+y.join("."));A.push(h),Tt.forEach(h,function(_,b){(!(Tt.isUndefined(_)||_===null)&&r.call(t,_,Tt.isString(b)?b.trim():b,y,m))===!0&&p(_,y?y.concat(b):[b])}),A.pop()}}if(!Tt.isObject(e))throw new TypeError("data must be an object");return p(e),t}function YD(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function VB(e,t){this._pairs=[],e&&_w(e,this,t)}const t6=VB.prototype;t6.append=function(t,n){this._pairs.push([t,n])};t6.toString=function(t){const n=t?function(a){return t.call(this,a,YD)}:YD;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Tse(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function n6(e,t,n){if(!t)return e;const a=n&&n.encode||Tse;Tt.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(r?s=r(t,n):s=Tt.isURLSearchParams(t)?t.toString():new VB(t,n).toString(a),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class XD{constructor(){this.handlers=[]}use(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Tt.forEach(this.handlers,function(a){a!==null&&t(a)})}}const a6={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ise=typeof URLSearchParams<"u"?URLSearchParams:VB,Fse=typeof FormData<"u"?FormData:null,Pse=typeof Blob<"u"?Blob:null,Dse={isBrowser:!0,classes:{URLSearchParams:Ise,FormData:Fse,Blob:Pse},protocols:["http","https","file","blob","url","data"]},LB=typeof window<"u"&&typeof document<"u",WS=typeof navigator=="object"&&navigator||void 0,Use=LB&&(!WS||["ReactNative","NativeScript","NS"].indexOf(WS.product)<0),Rse=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Nse=LB&&window.location.href||"http://localhost",Vse=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:LB,hasStandardBrowserEnv:Use,hasStandardBrowserWebWorkerEnv:Rse,navigator:WS,origin:Nse},Symbol.toStringTag,{value:"Module"})),_o={...Vse,...Dse};function Lse(e,t){return _w(e,new _o.classes.URLSearchParams,{visitor:function(n,a,r,s){return _o.isNode&&Tt.isBuffer(n)?(this.append(a,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function Mse(e){return Tt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Ose(e){const t={},n=Object.keys(e);let a;const r=n.length;let s;for(a=0;a<r;a++)s=n[a],t[s]=e[s];return t}function r6(e){function t(n,a,r,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=s>=n.length;return o=!o&&Tt.isArray(r)?r.length:o,c?(Tt.hasOwnProp(r,o)?r[o]=[r[o],a]:r[o]=a,!l):((!r[o]||!Tt.isObject(r[o]))&&(r[o]=[]),t(n,a,r[o],s)&&Tt.isArray(r[o])&&(r[o]=Ose(r[o])),!l)}if(Tt.isFormData(e)&&Tt.isFunction(e.entries)){const n={};return Tt.forEachEntry(e,(a,r)=>{t(Mse(a),r,n,0)}),n}return null}function Hse(e,t,n){if(Tt.isString(e))try{return(t||JSON.parse)(e),Tt.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const kg={transitional:a6,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const a=n.getContentType()||"",r=a.indexOf("application/json")>-1,s=Tt.isObject(t);if(s&&Tt.isHTMLForm(t)&&(t=new FormData(t)),Tt.isFormData(t))return r?JSON.stringify(r6(t)):t;if(Tt.isArrayBuffer(t)||Tt.isBuffer(t)||Tt.isStream(t)||Tt.isFile(t)||Tt.isBlob(t)||Tt.isReadableStream(t))return t;if(Tt.isArrayBufferView(t))return t.buffer;if(Tt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(s){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Lse(t,this.formSerializer).toString();if((l=Tt.isFileList(t))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return _w(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),Hse(t)):t}],transformResponse:[function(t){const n=this.transitional||kg.transitional,a=n&&n.forcedJSONParsing,r=this.responseType==="json";if(Tt.isResponse(t)||Tt.isReadableStream(t))return t;if(t&&Tt.isString(t)&&(a&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?oa.from(l,oa.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_o.classes.FormData,Blob:_o.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Tt.forEach(["delete","get","head","post","put","patch"],e=>{kg.headers[e]={}});const $se=Tt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qse=e=>{const t={};let n,a,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),a=o.substring(r+1).trim(),!(!n||t[n]&&$se[n])&&(n==="set-cookie"?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t},JD=Symbol("internals");function dp(e){return e&&String(e).trim().toLowerCase()}function n_(e){return e===!1||e==null?e:Tt.isArray(e)?e.map(n_):String(e)}function Gse(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}const zse=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Gx(e,t,n,a,r){if(Tt.isFunction(a))return a.call(this,t,n);if(r&&(t=n),!!Tt.isString(t)){if(Tt.isString(a))return t.indexOf(a)!==-1;if(Tt.isRegExp(a))return a.test(t)}}function Wse(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,a)=>n.toUpperCase()+a)}function Kse(e,t){const n=Tt.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(r,s,o){return this[a].call(this,t,r,s,o)},configurable:!0})})}let di=class{constructor(t){t&&this.set(t)}set(t,n,a){const r=this;function s(l,c,f){const d=dp(c);if(!d)throw new Error("header name must be a non-empty string");const A=Tt.findKey(r,d);(!A||r[A]===void 0||f===!0||f===void 0&&r[A]!==!1)&&(r[A||c]=n_(l))}const o=(l,c)=>Tt.forEach(l,(f,d)=>s(f,d,c));if(Tt.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(Tt.isString(t)&&(t=t.trim())&&!zse(t))o(Qse(t),n);else if(Tt.isObject(t)&&Tt.isIterable(t)){let l={},c,f;for(const d of t){if(!Tt.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[f=d[0]]=(c=l[f])?Tt.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,n)}else t!=null&&s(n,t,a);return this}get(t,n){if(t=dp(t),t){const a=Tt.findKey(this,t);if(a){const r=this[a];if(!n)return r;if(n===!0)return Gse(r);if(Tt.isFunction(n))return n.call(this,r,a);if(Tt.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=dp(t),t){const a=Tt.findKey(this,t);return!!(a&&this[a]!==void 0&&(!n||Gx(this,this[a],a,n)))}return!1}delete(t,n){const a=this;let r=!1;function s(o){if(o=dp(o),o){const l=Tt.findKey(a,o);l&&(!n||Gx(a,a[l],l,n))&&(delete a[l],r=!0)}}return Tt.isArray(t)?t.forEach(s):s(t),r}clear(t){const n=Object.keys(this);let a=n.length,r=!1;for(;a--;){const s=n[a];(!t||Gx(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const n=this,a={};return Tt.forEach(this,(r,s)=>{const o=Tt.findKey(a,s);if(o){n[o]=n_(r),delete n[s];return}const l=t?Wse(s):String(s).trim();l!==s&&delete n[s],n[l]=n_(r),a[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Tt.forEach(this,(a,r)=>{a!=null&&a!==!1&&(n[r]=t&&Tt.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const a=new this(t);return n.forEach(r=>a.set(r)),a}static accessor(t){const a=(this[JD]=this[JD]={accessors:{}}).accessors,r=this.prototype;function s(o){const l=dp(o);a[l]||(Kse(r,o),a[l]=!0)}return Tt.isArray(t)?t.forEach(s):s(t),this}};di.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Tt.reduceDescriptors(di.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[n]=a}}});Tt.freezeMethods(di);function zx(e,t){const n=this||kg,a=t||n,r=di.from(a.headers);let s=a.data;return Tt.forEach(e,function(l){s=l.call(n,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function s6(e){return!!(e&&e.__CANCEL__)}function fh(e,t,n){oa.call(this,e??"canceled",oa.ERR_CANCELED,t,n),this.name="CanceledError"}Tt.inherits(fh,oa,{__CANCEL__:!0});function o6(e,t,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):t(new oa("Request failed with status code "+n.status,[oa.ERR_BAD_REQUEST,oa.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function jse(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function qse(e,t){e=e||10;const n=new Array(e),a=new Array(e);let r=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const f=Date.now(),d=a[s];o||(o=f),n[r]=c,a[r]=f;let A=s,m=0;for(;A!==r;)m+=n[A++],A=A%e;if(r=(r+1)%e,r===s&&(s=(s+1)%e),f-o<t)return;const p=d&&f-d;return p?Math.round(m*1e3/p):void 0}}function Yse(e,t){let n=0,a=1e3/t,r,s;const o=(f,d=Date.now())=>{n=d,r=null,s&&(clearTimeout(s),s=null),e(...f)};return[(...f)=>{const d=Date.now(),A=d-n;A>=a?o(f,d):(r=f,s||(s=setTimeout(()=>{s=null,o(r)},a-A)))},()=>r&&o(r)]}const Q_=(e,t,n=3)=>{let a=0;const r=qse(50,250);return Yse(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,c=o-a,f=r(c),d=o<=l;a=o;const A={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:f||void 0,estimated:f&&l&&d?(l-o)/f:void 0,event:s,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(A)},n)},ZD=(e,t)=>{const n=e!=null;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},e3=e=>(...t)=>Tt.asap(()=>e(...t)),Xse=_o.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,_o.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(_o.origin),_o.navigator&&/(msie|trident)/i.test(_o.navigator.userAgent)):()=>!0,Jse=_o.hasStandardBrowserEnv?{write(e,t,n,a,r,s,o){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];Tt.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),Tt.isString(a)&&l.push(`path=${a}`),Tt.isString(r)&&l.push(`domain=${r}`),s===!0&&l.push("secure"),Tt.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Zse(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function eoe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function i6(e,t,n){let a=!Zse(t);return e&&(a||n==!1)?eoe(e,t):t}const t3=e=>e instanceof di?{...e}:e;function pA(e,t){t=t||{};const n={};function a(f,d,A,m){return Tt.isPlainObject(f)&&Tt.isPlainObject(d)?Tt.merge.call({caseless:m},f,d):Tt.isPlainObject(d)?Tt.merge({},d):Tt.isArray(d)?d.slice():d}function r(f,d,A,m){if(Tt.isUndefined(d)){if(!Tt.isUndefined(f))return a(void 0,f,A,m)}else return a(f,d,A,m)}function s(f,d){if(!Tt.isUndefined(d))return a(void 0,d)}function o(f,d){if(Tt.isUndefined(d)){if(!Tt.isUndefined(f))return a(void 0,f)}else return a(void 0,d)}function l(f,d,A){if(A in t)return a(f,d);if(A in e)return a(void 0,f)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(f,d,A)=>r(t3(f),t3(d),A,!0)};return Tt.forEach(Object.keys({...e,...t}),function(d){const A=c[d]||r,m=A(e[d],t[d],d);Tt.isUndefined(m)&&A!==l||(n[d]=m)}),n}const l6=e=>{const t=pA({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:l}=t;if(t.headers=o=di.from(o),t.url=n6(i6(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Tt.isFormData(n)){if(_o.hasStandardBrowserEnv||_o.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Tt.isFunction(n.getHeaders)){const c=n.getHeaders(),f=["content-type","content-length"];Object.entries(c).forEach(([d,A])=>{f.includes(d.toLowerCase())&&o.set(d,A)})}}if(_o.hasStandardBrowserEnv&&(a&&Tt.isFunction(a)&&(a=a(t)),a||a!==!1&&Xse(t.url))){const c=r&&s&&Jse.read(s);c&&o.set(r,c)}return t},toe=typeof XMLHttpRequest<"u",noe=toe&&function(e){return new Promise(function(n,a){const r=l6(e);let s=r.data;const o=di.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:f}=r,d,A,m,p,h;function y(){p&&p(),h&&h(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let g=new XMLHttpRequest;g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout;function _(){if(!g)return;const S=di.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),F={data:!l||l==="text"||l==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:S,config:e,request:g};o6(function(E){n(E),y()},function(E){a(E),y()},F),g=null}"onloadend"in g?g.onloadend=_:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(_)},g.onabort=function(){g&&(a(new oa("Request aborted",oa.ECONNABORTED,e,g)),g=null)},g.onerror=function(B){const F=B&&B.message?B.message:"Network Error",T=new oa(F,oa.ERR_NETWORK,e,g);T.event=B||null,a(T),g=null},g.ontimeout=function(){let B=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const F=r.transitional||a6;r.timeoutErrorMessage&&(B=r.timeoutErrorMessage),a(new oa(B,F.clarifyTimeoutError?oa.ETIMEDOUT:oa.ECONNABORTED,e,g)),g=null},s===void 0&&o.setContentType(null),"setRequestHeader"in g&&Tt.forEach(o.toJSON(),function(B,F){g.setRequestHeader(F,B)}),Tt.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),l&&l!=="json"&&(g.responseType=r.responseType),f&&([m,h]=Q_(f,!0),g.addEventListener("progress",m)),c&&g.upload&&([A,p]=Q_(c),g.upload.addEventListener("progress",A),g.upload.addEventListener("loadend",p)),(r.cancelToken||r.signal)&&(d=S=>{g&&(a(!S||S.type?new fh(null,e,g):S),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const b=jse(r.url);if(b&&_o.protocols.indexOf(b)===-1){a(new oa("Unsupported protocol "+b+":",oa.ERR_BAD_REQUEST,e));return}g.send(s||null)})},aoe=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let a=new AbortController,r;const s=function(f){if(!r){r=!0,l();const d=f instanceof Error?f:this.reason;a.abort(d instanceof oa?d:new fh(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,s(new oa(`timeout ${t} of ms exceeded`,oa.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),e=null)};e.forEach(f=>f.addEventListener("abort",s));const{signal:c}=a;return c.unsubscribe=()=>Tt.asap(l),c}},roe=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let a=0,r;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},soe=async function*(e,t){for await(const n of ooe(e))yield*roe(n,t)},ooe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:a}=await t.read();if(n)break;yield a}}finally{await t.cancel()}},n3=(e,t,n,a)=>{const r=soe(e,t);let s=0,o,l=c=>{o||(o=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:f,value:d}=await r.next();if(f){l(),c.close();return}let A=d.byteLength;if(n){let m=s+=A;n(m)}c.enqueue(new Uint8Array(d))}catch(f){throw l(f),f}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},a3=64*1024,{isFunction:ay}=Tt,ioe=(({Request:e,Response:t})=>({Request:e,Response:t}))(Tt.global),{ReadableStream:r3,TextEncoder:s3}=Tt.global,o3=(e,...t)=>{try{return!!e(...t)}catch{return!1}},loe=e=>{e=Tt.merge.call({skipUndefined:!0},ioe,e);const{fetch:t,Request:n,Response:a}=e,r=t?ay(t):typeof fetch=="function",s=ay(n),o=ay(a);if(!r)return!1;const l=r&&ay(r3),c=r&&(typeof s3=="function"?(h=>y=>h.encode(y))(new s3):async h=>new Uint8Array(await new n(h).arrayBuffer())),f=s&&l&&o3(()=>{let h=!1;const y=new n(_o.origin,{body:new r3,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!y}),d=o&&l&&o3(()=>Tt.isReadableStream(new a("").body)),A={stream:d&&(h=>h.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!A[h]&&(A[h]=(y,g)=>{let _=y&&y[h];if(_)return _.call(y);throw new oa(`Response type '${h}' is not supported`,oa.ERR_NOT_SUPPORT,g)})});const m=async h=>{if(h==null)return 0;if(Tt.isBlob(h))return h.size;if(Tt.isSpecCompliantForm(h))return(await new n(_o.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(Tt.isArrayBufferView(h)||Tt.isArrayBuffer(h))return h.byteLength;if(Tt.isURLSearchParams(h)&&(h=h+""),Tt.isString(h))return(await c(h)).byteLength},p=async(h,y)=>{const g=Tt.toFiniteNumber(h.getContentLength());return g??m(y)};return async h=>{let{url:y,method:g,data:_,signal:b,cancelToken:S,timeout:B,onDownloadProgress:F,onUploadProgress:T,responseType:E,headers:x,withCredentials:C="same-origin",fetchOptions:D}=l6(h),U=t||fetch;E=E?(E+"").toLowerCase():"text";let L=aoe([b,S&&S.toAbortSignal()],B),H=null;const oe=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let de;try{if(T&&f&&g!=="get"&&g!=="head"&&(de=await p(x,_))!==0){let ne=new n(y,{method:"POST",body:_,duplex:"half"}),G;if(Tt.isFormData(_)&&(G=ne.headers.get("content-type"))&&x.setContentType(G),ne.body){const[W,Q]=ZD(de,Q_(e3(T)));_=n3(ne.body,a3,W,Q)}}Tt.isString(C)||(C=C?"include":"omit");const te=s&&"credentials"in n.prototype,q={...D,signal:L,method:g.toUpperCase(),headers:x.normalize().toJSON(),body:_,duplex:"half",credentials:te?C:void 0};H=s&&new n(y,q);let ce=await(s?U(H,D):U(y,q));const le=d&&(E==="stream"||E==="response");if(d&&(F||le&&oe)){const ne={};["status","statusText","headers"].forEach(O=>{ne[O]=ce[O]});const G=Tt.toFiniteNumber(ce.headers.get("content-length")),[W,Q]=F&&ZD(G,Q_(e3(F),!0))||[];ce=new a(n3(ce.body,a3,W,()=>{Q&&Q(),oe&&oe()}),ne)}E=E||"text";let Z=await A[Tt.findKey(A,E)||"text"](ce,h);return!le&&oe&&oe(),await new Promise((ne,G)=>{o6(ne,G,{data:Z,headers:di.from(ce.headers),status:ce.status,statusText:ce.statusText,config:h,request:H})})}catch(te){throw oe&&oe(),te&&te.name==="TypeError"&&/Load failed|fetch/i.test(te.message)?Object.assign(new oa("Network Error",oa.ERR_NETWORK,h,H),{cause:te.cause||te}):oa.from(te,te&&te.code,h,H)}}},uoe=new Map,u6=e=>{let t=e&&e.env||{};const{fetch:n,Request:a,Response:r}=t,s=[a,r,n];let o=s.length,l=o,c,f,d=uoe;for(;l--;)c=s[l],f=d.get(c),f===void 0&&d.set(c,f=l?new Map:loe(t)),d=f;return f};u6();const MB={http:Ese,xhr:noe,fetch:{get:u6}};Tt.forEach(MB,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const i3=e=>`- ${e}`,coe=e=>Tt.isFunction(e)||e===null||e===!1;function doe(e,t){e=Tt.isArray(e)?e:[e];const{length:n}=e;let a,r;const s={};for(let o=0;o<n;o++){a=e[o];let l;if(r=a,!coe(a)&&(r=MB[(l=String(a)).toLowerCase()],r===void 0))throw new oa(`Unknown adapter '${l}'`);if(r&&(Tt.isFunction(r)||(r=r.get(t))))break;s[l||"#"+o]=r}if(!r){const o=Object.entries(s).map(([c,f])=>`adapter ${c} `+(f===!1?"is not supported by the environment":"is not available in the build"));let l=n?o.length>1?`since :
`+o.map(i3).join(`
`):" "+i3(o[0]):"as no adapter specified";throw new oa("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r}const c6={getAdapter:doe,adapters:MB};function Wx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fh(null,e)}function l3(e){return Wx(e),e.headers=di.from(e.headers),e.data=zx.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),c6.getAdapter(e.adapter||kg.adapter,e)(e).then(function(a){return Wx(e),a.data=zx.call(e,e.transformResponse,a),a.headers=di.from(a.headers),a},function(a){return s6(a)||(Wx(e),a&&a.response&&(a.response.data=zx.call(e,e.transformResponse,a.response),a.response.headers=di.from(a.response.headers))),Promise.reject(a)})}const d6="1.13.2",ww={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ww[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const u3={};ww.transitional=function(t,n,a){function r(s,o){return"[Axios v"+d6+"] Transitional option '"+s+"'"+o+(a?". "+a:"")}return(s,o,l)=>{if(t===!1)throw new oa(r(o," has been removed"+(n?" in "+n:"")),oa.ERR_DEPRECATED);return n&&!u3[o]&&(u3[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,l):!0}};ww.spelling=function(t){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function foe(e,t,n){if(typeof e!="object")throw new oa("options must be an object",oa.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let r=a.length;for(;r-- >0;){const s=a[r],o=t[s];if(o){const l=e[s],c=l===void 0||o(l,s,e);if(c!==!0)throw new oa("option "+s+" must be "+c,oa.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new oa("Unknown option "+s,oa.ERR_BAD_OPTION)}}const a_={assertOptions:foe,validators:ww},pu=a_.validators;let oA=class{constructor(t){this.defaults=t||{},this.interceptors={request:new XD,response:new XD}}async request(t,n){try{return await this._request(t,n)}catch(a){if(a instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{a.stack?s&&!String(a.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+s):a.stack=s}catch{}}throw a}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=pA(this.defaults,n);const{transitional:a,paramsSerializer:r,headers:s}=n;a!==void 0&&a_.assertOptions(a,{silentJSONParsing:pu.transitional(pu.boolean),forcedJSONParsing:pu.transitional(pu.boolean),clarifyTimeoutError:pu.transitional(pu.boolean)},!1),r!=null&&(Tt.isFunction(r)?n.paramsSerializer={serialize:r}:a_.assertOptions(r,{encode:pu.function,serialize:pu.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),a_.assertOptions(n,{baseUrl:pu.spelling("baseURL"),withXsrfToken:pu.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Tt.merge(s.common,s[n.method]);s&&Tt.forEach(["delete","get","head","post","put","patch","common"],h=>{delete s[h]}),n.headers=di.concat(o,s);const l=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(c=c&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const f=[];this.interceptors.response.forEach(function(y){f.push(y.fulfilled,y.rejected)});let d,A=0,m;if(!c){const h=[l3.bind(this),void 0];for(h.unshift(...l),h.push(...f),m=h.length,d=Promise.resolve(n);A<m;)d=d.then(h[A++],h[A++]);return d}m=l.length;let p=n;for(;A<m;){const h=l[A++],y=l[A++];try{p=h(p)}catch(g){y.call(this,g);break}}try{d=l3.call(this,p)}catch(h){return Promise.reject(h)}for(A=0,m=f.length;A<m;)d=d.then(f[A++],f[A++]);return d}getUri(t){t=pA(this.defaults,t);const n=i6(t.baseURL,t.url,t.allowAbsoluteUrls);return n6(n,t.params,t.paramsSerializer)}};Tt.forEach(["delete","get","head","options"],function(t){oA.prototype[t]=function(n,a){return this.request(pA(a||{},{method:t,url:n,data:(a||{}).data}))}});Tt.forEach(["post","put","patch"],function(t){function n(a){return function(s,o,l){return this.request(pA(l||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}oA.prototype[t]=n(),oA.prototype[t+"Form"]=n(!0)});let Aoe=class f6{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const a=this;this.promise.then(r=>{if(!a._listeners)return;let s=a._listeners.length;for(;s-- >0;)a._listeners[s](r);a._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(l=>{a.subscribe(l),s=l}).then(r);return o.cancel=function(){a.unsubscribe(s)},o},t(function(s,o,l){a.reason||(a.reason=new fh(s,o,l),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=a=>{t.abort(a)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new f6(function(r){t=r}),cancel:t}}};function moe(e){return function(n){return e.apply(null,n)}}function voe(e){return Tt.isObject(e)&&e.isAxiosError===!0}const KS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(KS).forEach(([e,t])=>{KS[t]=e});function A6(e){const t=new oA(e),n=G5(oA.prototype.request,t);return Tt.extend(n,oA.prototype,t,{allOwnKeys:!0}),Tt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return A6(pA(e,r))},n}const Rr=A6(kg);Rr.Axios=oA;Rr.CanceledError=fh;Rr.CancelToken=Aoe;Rr.isCancel=s6;Rr.VERSION=d6;Rr.toFormData=_w;Rr.AxiosError=oa;Rr.Cancel=Rr.CanceledError;Rr.all=function(t){return Promise.all(t)};Rr.spread=moe;Rr.isAxiosError=voe;Rr.mergeConfig=pA;Rr.AxiosHeaders=di;Rr.formToJSON=e=>r6(Tt.isHTMLForm(e)?new FormData(e):e);Rr.getAdapter=c6.getAdapter;Rr.HttpStatusCode=KS;Rr.default=Rr;const{Axios:Yst,AxiosError:Xst,CanceledError:Jst,isCancel:Zst,CancelToken:eot,VERSION:tot,all:not,Cancel:aot,isAxiosError:rot,spread:sot,toFormData:oot,AxiosHeaders:iot,HttpStatusCode:lot,formToJSON:uot,getAdapter:cot,mergeConfig:dot}=Rr,hoe=()=>{};var c3={};const m6={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const dn=function(e,t){if(!e)throw Ah(t)},Ah=function(e){return new Error("Firebase Database ("+m6.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};const v6=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let r=e.charCodeAt(a);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&a+1<e.length&&(e.charCodeAt(a+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++a)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},poe=function(e){const t=[];let n=0,a=0;for(;n<e.length;){const r=e[n++];if(r<128)t[a++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[a++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],l=e[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[a++]=String.fromCharCode(55296+(c>>10)),t[a++]=String.fromCharCode(56320+(c&1023))}else{const s=e[n++],o=e[n++];t[a++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},bw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,l=o?e[r+1]:0,c=r+2<e.length,f=c?e[r+2]:0,d=s>>2,A=(s&3)<<4|l>>4;let m=(l&15)<<2|f>>6,p=f&63;c||(p=64,o||(m=64)),a.push(n[d],n[A],n[m],n[p])}return a.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(v6(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):poe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const f=r<e.length?n[e.charAt(r)]:64;++r;const A=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||f==null||A==null)throw new goe;const m=s<<2|l>>4;if(a.push(m),f!==64){const p=l<<4&240|f>>2;if(a.push(p),A!==64){const h=f<<6&192|A;a.push(h)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class goe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h6=function(e){const t=v6(e);return bw.encodeByteArray(t,!0)},p6=function(e){return h6(e).replace(/\./g,"")},G_=function(e){try{return bw.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function yoe(e){return g6(void 0,e)}function g6(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!_oe(n)||(e[n]=g6(e[n],t[n]));return e}function _oe(e){return e!=="__proto__"}function woe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const boe=()=>woe().__FIREBASE_DEFAULTS__,xoe=()=>{if(typeof process>"u"||typeof c3>"u")return;const e=c3.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Coe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&G_(e[1]);return t&&JSON.parse(t)},OB=()=>{try{return hoe()||boe()||xoe()||Coe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Soe=e=>{var t,n;return(n=(t=OB())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},y6=()=>{var e;return(e=OB())===null||e===void 0?void 0:e.config},_6=e=>{var t;return(t=OB())===null||t===void 0?void 0:t[`_${e}`]};class L0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,a))}}}function xw(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Eoe(e){return(await fetch(e,{credentials:"include"})).ok}const e0={};function koe(){const e={prod:[],emulator:[]};for(const t of Object.keys(e0))e0[t]?e.emulator.push(t):e.prod.push(t);return e}function Boe(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let d3=!1;function Toe(e,t){if(typeof window>"u"||typeof document>"u"||!xw(window.location.host)||e0[e]===t||e0[e]||d3)return;e0[e]=t;function n(m){return`__firebase__banner__${m}`}const a="__firebase__banner",s=koe().prod.length>0;function o(){const m=document.getElementById(a);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,p){m.setAttribute("width","24"),m.setAttribute("id",p),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function f(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{d3=!0,o()},m}function d(m,p){m.setAttribute("id",p),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function A(){const m=Boe(a),p=n("text"),h=document.getElementById(p)||document.createElement("span"),y=n("learnmore"),g=document.getElementById(y)||document.createElement("a"),_=n("preprendIcon"),b=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;l(S),d(g,y);const B=f();c(b,_),S.append(b,h,g,B),document.body.appendChild(S)}s?(h.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,h.innerText="Preview backend running in this workspace."),h.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function Ko(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HB(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ko())}function Ioe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Foe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function w6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Poe(){const e=Ko();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Doe(){return m6.NODE_ADMIN===!0}function b6(){try{return typeof indexedDB=="object"}catch{return!1}}function Uoe(){return new Promise((e,t)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(a);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(a),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}const Roe="FirebaseError";class zu extends Error{constructor(t,n,a){super(n),this.code=t,this.customData=a,this.name=Roe,Object.setPrototypeOf(this,zu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mh.prototype.create)}}class mh{constructor(t,n,a){this.service=t,this.serviceName=n,this.errors=a}create(t,...n){const a=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Noe(s,a):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new zu(r,l,a)}}function Noe(e,t){return e.replace(Voe,(n,a)=>{const r=t[a];return r!=null?String(r):`<${a}?>`})}const Voe=/\{\$([^}]+)}/g;function M0(e){return JSON.parse(e)}function Zs(e){return JSON.stringify(e)}const x6=function(e){let t={},n={},a={},r="";try{const s=e.split(".");t=M0(G_(s[0])||""),n=M0(G_(s[1])||""),r=s[2],a=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:a,signature:r}},Loe=function(e){const t=x6(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Moe=function(e){const t=x6(e).claims;return typeof t=="object"&&t.admin===!0};function Yc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Gv(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function jS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function z_(e,t,n){const a={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=t.call(n,e[r],r,e));return a}function zv(e,t){if(e===t)return!0;const n=Object.keys(e),a=Object.keys(t);for(const r of n){if(!a.includes(r))return!1;const s=e[r],o=t[r];if(f3(s)&&f3(o)){if(!zv(s,o))return!1}else if(s!==o)return!1}for(const r of a)if(!n.includes(r))return!1;return!0}function f3(e){return e!==null&&typeof e=="object"}function vh(e){const t=[];for(const[n,a]of Object.entries(e))Array.isArray(a)?a.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}class Ooe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const a=this.W_;if(typeof t=="string")for(let A=0;A<16;A++)a[A]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let A=0;A<16;A++)a[A]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let A=16;A<80;A++){const m=a[A-3]^a[A-8]^a[A-14]^a[A-16];a[A]=(m<<1|m>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4],f,d;for(let A=0;A<80;A++){A<40?A<20?(f=l^s&(o^l),d=1518500249):(f=s^o^l,d=1859775393):A<60?(f=s&o|l&(s|o),d=2400959708):(f=s^o^l,d=3395469782);const m=(r<<5|r>>>27)+f+c+d+a[A]&4294967295;c=l,l=o,o=(s<<30|s>>>2)&4294967295,s=r,r=m}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const a=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=a;)this.compress_(t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<n;)if(s[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=t[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let a=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)t[a]=this.chain_[r]>>s&255,++a;return t}}function Hoe(e,t){const n=new $oe(e,t);return n.subscribe.bind(n)}class $oe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,a){let r;if(t===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");Qoe(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:a},r.next===void 0&&(r.next=Kx),r.error===void 0&&(r.error=Kx),r.complete===void 0&&(r.complete=Kx);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qoe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Kx(){}function Goe(e,t){return`${e} failed: ${t} argument `}const zoe=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let r=e.charCodeAt(a);if(r>=55296&&r<=56319){const s=r-55296;a++,dn(a<e.length,"Surrogate pair missing trail surrogate.");const o=e.charCodeAt(a)-56320;r=65536+(s<<10)+o}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},Cw=function(e){let t=0;for(let n=0;n<e.length;n++){const a=e.charCodeAt(n);a<128?t++:a<2048?t+=2:a>=55296&&a<=56319?(t+=4,n++):t+=3}return t};function Wu(e){return e&&e._delegate?e._delegate:e}class ql{constructor(t,n,a){this.name=t,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Of="[DEFAULT]";class Woe{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const a=new L0;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&a.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const a=this.normalizeInstanceIdentifier(t?.identifier),r=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(joe(t))try{this.getOrInitializeService({instanceIdentifier:Of})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});a.resolve(s)}catch{}}}}clearInstance(t=Of){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Of){return this.instances.has(t)}getOptions(t=Of){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);a===l&&o.resolve(r)}return r}onInit(t,n){var a;const r=this.normalizeInstanceIdentifier(n),s=(a=this.onInitCallbacks.get(r))!==null&&a!==void 0?a:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const a=this.onInitCallbacks.get(n);if(a)for(const r of a)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Koe(t),options:n}),this.instances.set(t,a),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=Of){return this.component?this.component.multipleInstances?t:Of:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Koe(e){return e===Of?void 0:e}function joe(e){return e.instantiationMode==="EAGER"}class qoe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Woe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var Za;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Za||(Za={}));const Yoe={debug:Za.DEBUG,verbose:Za.VERBOSE,info:Za.INFO,warn:Za.WARN,error:Za.ERROR,silent:Za.SILENT},Xoe=Za.INFO,Joe={[Za.DEBUG]:"log",[Za.VERBOSE]:"log",[Za.INFO]:"info",[Za.WARN]:"warn",[Za.ERROR]:"error"},Zoe=(e,t,...n)=>{if(t<e.logLevel)return;const a=new Date().toISOString(),r=Joe[t];if(r)console[r](`[${a}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let Bg=class{constructor(t){this.name=t,this._logLevel=Xoe,this._logHandler=Zoe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Za))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Yoe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Za.DEBUG,...t),this._logHandler(this,Za.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Za.VERBOSE,...t),this._logHandler(this,Za.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Za.INFO,...t),this._logHandler(this,Za.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Za.WARN,...t),this._logHandler(this,Za.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Za.ERROR,...t),this._logHandler(this,Za.ERROR,...t)}};const eie=(e,t)=>t.some(n=>e instanceof n);let A3,m3;function tie(){return A3||(A3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nie(){return m3||(m3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C6=new WeakMap,qS=new WeakMap,S6=new WeakMap,jx=new WeakMap,$B=new WeakMap;function aie(e){const t=new Promise((n,a)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Ld(e.result)),r()},o=()=>{a(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&C6.set(n,e)}).catch(()=>{}),$B.set(t,e),t}function rie(e){if(qS.has(e))return;const t=new Promise((n,a)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{a(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});qS.set(e,t)}let YS={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return qS.get(e);if(t==="objectStoreNames")return e.objectStoreNames||S6.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ld(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function sie(e){YS=e(YS)}function oie(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const a=e.call(qx(this),t,...n);return S6.set(a,t.sort?t.sort():[t]),Ld(a)}:nie().includes(e)?function(...t){return e.apply(qx(this),t),Ld(C6.get(this))}:function(...t){return Ld(e.apply(qx(this),t))}}function iie(e){return typeof e=="function"?oie(e):(e instanceof IDBTransaction&&rie(e),eie(e,tie())?new Proxy(e,YS):e)}function Ld(e){if(e instanceof IDBRequest)return aie(e);if(jx.has(e))return jx.get(e);const t=iie(e);return t!==e&&(jx.set(e,t),$B.set(t,e)),t}const qx=e=>$B.get(e);function lie(e,t,{blocked:n,upgrade:a,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),l=Ld(o);return a&&o.addEventListener("upgradeneeded",c=>{a(Ld(o.result),c.oldVersion,c.newVersion,Ld(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const uie=["get","getKey","getAll","getAllKeys","count"],cie=["put","add","delete","clear"],Yx=new Map;function v3(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Yx.get(t))return Yx.get(t);const n=t.replace(/FromIndex$/,""),a=t!==n,r=cie.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(r||uie.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let f=c.store;return a&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),r&&c.done]))[0]};return Yx.set(t,s),s}sie(e=>({...e,get:(t,n,a)=>v3(t,n)||e.get(t,n,a),has:(t,n)=>!!v3(t,n)||e.has(t,n)}));class die{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fie(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function fie(e){const t=e.getComponent();return t?.type==="VERSION"}const XS="@firebase/app",h3="0.13.2";const Lc=new Bg("@firebase/app"),Aie="@firebase/app-compat",mie="@firebase/analytics-compat",vie="@firebase/analytics",hie="@firebase/app-check-compat",pie="@firebase/app-check",gie="@firebase/auth",yie="@firebase/auth-compat",_ie="@firebase/database",wie="@firebase/data-connect",bie="@firebase/database-compat",xie="@firebase/functions",Cie="@firebase/functions-compat",Sie="@firebase/installations",Eie="@firebase/installations-compat",kie="@firebase/messaging",Bie="@firebase/messaging-compat",Tie="@firebase/performance",Iie="@firebase/performance-compat",Fie="@firebase/remote-config",Pie="@firebase/remote-config-compat",Die="@firebase/storage",Uie="@firebase/storage-compat",Rie="@firebase/firestore",Nie="@firebase/ai",Vie="@firebase/firestore-compat",Lie="firebase",Mie="11.10.0";const JS="[DEFAULT]",Oie={[XS]:"fire-core",[Aie]:"fire-core-compat",[vie]:"fire-analytics",[mie]:"fire-analytics-compat",[pie]:"fire-app-check",[hie]:"fire-app-check-compat",[gie]:"fire-auth",[yie]:"fire-auth-compat",[_ie]:"fire-rtdb",[wie]:"fire-data-connect",[bie]:"fire-rtdb-compat",[xie]:"fire-fn",[Cie]:"fire-fn-compat",[Sie]:"fire-iid",[Eie]:"fire-iid-compat",[kie]:"fire-fcm",[Bie]:"fire-fcm-compat",[Tie]:"fire-perf",[Iie]:"fire-perf-compat",[Fie]:"fire-rc",[Pie]:"fire-rc-compat",[Die]:"fire-gcs",[Uie]:"fire-gcs-compat",[Rie]:"fire-fst",[Vie]:"fire-fst-compat",[Nie]:"fire-vertex","fire-js":"fire-js",[Lie]:"fire-js-all"};const W_=new Map,Hie=new Map,ZS=new Map;function p3(e,t){try{e.container.addComponent(t)}catch(n){Lc.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Vu(e){const t=e.name;if(ZS.has(t))return Lc.debug(`There were multiple attempts to register component ${t}.`),!1;ZS.set(t,e);for(const n of W_.values())p3(n,e);for(const n of Hie.values())p3(n,e);return!0}function E6(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function nl(e){return e==null?!1:e.settings!==void 0}const $ie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Md=new mh("app","Firebase",$ie);class Qie{constructor(t,n,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ql("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Md.create("app-deleted",{appName:this._name})}}const Af=Mie;function k6(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const a=Object.assign({name:JS,automaticDataCollectionEnabled:!0},t),r=a.name;if(typeof r!="string"||!r)throw Md.create("bad-app-name",{appName:String(r)});if(n||(n=y6()),!n)throw Md.create("no-options");const s=W_.get(r);if(s){if(zv(n,s.options)&&zv(a,s.config))return s;throw Md.create("duplicate-app",{appName:r})}const o=new qoe(r);for(const c of ZS.values())o.addComponent(c);const l=new Qie(n,a,o);return W_.set(r,l),l}function B6(e=JS){const t=W_.get(e);if(!t&&e===JS&&y6())return k6();if(!t)throw Md.create("no-app",{appName:e});return t}function Pi(e,t,n){var a;let r=(a=Oie[e])!==null&&a!==void 0?a:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${t}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Lc.warn(l.join(" "));return}Vu(new ql(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Gie="firebase-heartbeat-database",zie=1,O0="firebase-heartbeat-store";let Xx=null;function T6(){return Xx||(Xx=lie(Gie,zie,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(O0)}catch(n){console.warn(n)}}}}).catch(e=>{throw Md.create("idb-open",{originalErrorMessage:e.message})})),Xx}async function Wie(e){try{const n=(await T6()).transaction(O0),a=await n.objectStore(O0).get(I6(e));return await n.done,a}catch(t){if(t instanceof zu)Lc.warn(t.message);else{const n=Md.create("idb-get",{originalErrorMessage:t?.message});Lc.warn(n.message)}}}async function g3(e,t){try{const a=(await T6()).transaction(O0,"readwrite");await a.objectStore(O0).put(t,I6(e)),await a.done}catch(n){if(n instanceof zu)Lc.warn(n.message);else{const a=Md.create("idb-set",{originalErrorMessage:n?.message});Lc.warn(a.message)}}}function I6(e){return`${e.name}!${e.options.appId}`}const Kie=1024,jie=30;class qie{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xie(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=y3();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>jie){const o=Jie(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Lc.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=y3(),{heartbeatsToSend:a,unsentEntries:r}=Yie(this._heartbeatsCache.heartbeats),s=p6(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Lc.warn(n),""}}}function y3(){return new Date().toISOString().substring(0,10)}function Yie(e,t=Kie){const n=[];let a=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),_3(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),_3(n)>t){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class Xie{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b6()?Uoe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Wie(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return g3(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return g3(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function _3(e){return p6(JSON.stringify({version:2,heartbeats:e})).length}function Jie(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let a=1;a<e.length;a++)e[a].date<n&&(n=e[a].date,t=a);return t}function Zie(e){Vu(new ql("platform-logger",t=>new die(t),"PRIVATE")),Vu(new ql("heartbeat",t=>new qie(t),"PRIVATE")),Pi(XS,h3,e),Pi(XS,h3,"esm2017"),Pi("fire-js","")}Zie("");var ele="firebase",tle="11.10.0";Pi(ele,tle,"app");function QB(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n}function F6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nle=F6,P6=new mh("auth","Firebase",F6());const K_=new Bg("@firebase/auth");function ale(e,...t){K_.logLevel<=Za.WARN&&K_.warn(`Auth (${Af}): ${e}`,...t)}function r_(e,...t){K_.logLevel<=Za.ERROR&&K_.error(`Auth (${Af}): ${e}`,...t)}function Mc(e,...t){throw GB(e,...t)}function Pu(e,...t){return GB(e,...t)}function D6(e,t,n){const a=Object.assign(Object.assign({},nle()),{[t]:n});return new mh("auth","Firebase",a).create(t,{appName:e.name})}function iA(e){return D6(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GB(e,...t){if(typeof e!="string"){const n=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=e.name),e._errorFactory.create(n,...a)}return P6.create(e,...t)}function jn(e,t,...n){if(!e)throw GB(t,...n)}function Sc(e){const t="INTERNAL ASSERTION FAILED: "+e;throw r_(t),new Error(t)}function Oc(e,t){e||Sc(t)}function eE(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function rle(){return w3()==="http:"||w3()==="https:"}function w3(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function sle(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rle()||Foe()||"connection"in navigator)?navigator.onLine:!0}function ole(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class Tg{constructor(t,n){this.shortDelay=t,this.longDelay=n,Oc(n>t,"Short delay should be less than long delay!"),this.isMobile=HB()||w6()}get(){return sle()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zB(e,t){Oc(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class U6{static initialize(t,n,a){this.fetchImpl=t,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ile={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const lle=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ule=new Tg(3e4,6e4);function WB(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function hh(e,t,n,a,r={}){return R6(e,r,async()=>{let s={},o={};a&&(t==="GET"?o=a:s={body:JSON.stringify(a)});const l=vh(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const f=Object.assign({method:t,headers:c},s);return Ioe()||(f.referrerPolicy="no-referrer"),e.emulatorConfig&&xw(e.emulatorConfig.host)&&(f.credentials="include"),U6.fetch()(await N6(e,e.config.apiHost,n,l),f)})}async function R6(e,t,n){e._canInitEmulator=!1;const a=Object.assign(Object.assign({},ile),t);try{const r=new dle(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ry(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ry(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ry(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw ry(e,"user-disabled",o);const d=a[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw D6(e,d,f);Mc(e,d)}}catch(r){if(r instanceof zu)throw r;Mc(e,"network-request-failed",{message:String(r)})}}async function cle(e,t,n,a,r={}){const s=await hh(e,t,n,a,r);return"mfaPendingCredential"in s&&Mc(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function N6(e,t,n,a){const r=`${t}${n}?${a}`,s=e,o=s.config.emulator?zB(e.config,r):`${e.config.apiScheme}://${r}`;return lle.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class dle{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Pu(this.auth,"network-request-failed")),ule.get())})}}function ry(e,t,n){const a={appName:e.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const r=Pu(e,t,a);return r.customData._tokenResponse=n,r}async function fle(e,t){return hh(e,"POST","/v1/accounts:delete",t)}async function j_(e,t){return hh(e,"POST","/v1/accounts:lookup",t)}function t0(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Ale(e,t=!1){const n=Wu(e),a=await n.getIdToken(t),r=KB(a);jn(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:a,authTime:t0(Jx(r.auth_time)),issuedAtTime:t0(Jx(r.iat)),expirationTime:t0(Jx(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Jx(e){return Number(e)*1e3}function KB(e){const[t,n,a]=e.split(".");if(t===void 0||n===void 0||a===void 0)return r_("JWT malformed, contained fewer than 3 sections"),null;try{const r=G_(n);return r?JSON.parse(r):(r_("Failed to decode base64 JWT payload"),null)}catch(r){return r_("Caught error parsing JWT payload as JSON",r?.toString()),null}}function b3(e){const t=KB(e);return jn(t,"internal-error"),jn(typeof t.exp<"u","internal-error"),jn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function H0(e,t,n=!1){if(n)return t;try{return await t}catch(a){throw a instanceof zu&&mle(a)&&e.auth.currentUser===e&&await e.auth.signOut(),a}}function mle({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}class vle{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class tE{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=t0(this.lastLoginAt),this.creationTime=t0(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function q_(e){var t;const n=e.auth,a=await e.getIdToken(),r=await H0(e,j_(n,{idToken:a}));jn(r?.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?V6(s.providerUserInfo):[],l=ple(e.providerData,o),c=e.isAnonymous,f=!(e.email&&s.passwordHash)&&!l?.length,d=c?f:!1,A={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new tE(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,A)}async function hle(e){const t=Wu(e);await q_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ple(e,t){return[...e.filter(a=>!t.some(r=>r.providerId===a.providerId)),...t]}function V6(e){return e.map(t=>{var{providerId:n}=t,a=QB(t,["providerId"]);return{providerId:n,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}async function gle(e,t){const n=await R6(e,{},async()=>{const a=vh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=await N6(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:a};return e.emulatorConfig&&xw(e.emulatorConfig.host)&&(c.credentials="include"),U6.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yle(e,t){return hh(e,"POST","/v2/accounts:revokeToken",WB(e,t))}class _v{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){jn(t.idToken,"internal-error"),jn(typeof t.idToken<"u","internal-error"),jn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):b3(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){jn(t.length!==0,"internal-error");const n=b3(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(jn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:a,refreshToken:r,expiresIn:s}=await gle(t,n);this.updateTokensAndExpiration(a,r,Number(s))}updateTokensAndExpiration(t,n,a){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,n){const{refreshToken:a,accessToken:r,expirationTime:s}=n,o=new _v;return a&&(jn(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),r&&(jn(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(jn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new _v,this.toJSON())}_performRefresh(){return Sc("not implemented")}}function Ad(e,t){jn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Dl{constructor(t){var{uid:n,auth:a,stsTokenManager:r}=t,s=QB(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vle(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=a,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tE(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await H0(this,this.stsTokenManager.getToken(this.auth,t));return jn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Ale(this,t)}reload(){return hle(this)}_assign(t){this!==t&&(jn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Dl(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){jn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),n&&await q_(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nl(this.auth.app))return Promise.reject(iA(this.auth));const t=await this.getIdToken();return await H0(this,fle(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var a,r,s,o,l,c,f,d;const A=(a=n.displayName)!==null&&a!==void 0?a:void 0,m=(r=n.email)!==null&&r!==void 0?r:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,h=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(l=n.tenantId)!==null&&l!==void 0?l:void 0,g=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(f=n.createdAt)!==null&&f!==void 0?f:void 0,b=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:B,isAnonymous:F,providerData:T,stsTokenManager:E}=n;jn(S&&E,t,"internal-error");const x=_v.fromJSON(this.name,E);jn(typeof S=="string",t,"internal-error"),Ad(A,t.name),Ad(m,t.name),jn(typeof B=="boolean",t,"internal-error"),jn(typeof F=="boolean",t,"internal-error"),Ad(p,t.name),Ad(h,t.name),Ad(y,t.name),Ad(g,t.name),Ad(_,t.name),Ad(b,t.name);const C=new Dl({uid:S,auth:t,email:m,emailVerified:B,displayName:A,isAnonymous:F,photoURL:h,phoneNumber:p,tenantId:y,stsTokenManager:x,createdAt:_,lastLoginAt:b});return T&&Array.isArray(T)&&(C.providerData=T.map(D=>Object.assign({},D))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,a=!1){const r=new _v;r.updateFromServerResponse(n);const s=new Dl({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:a});return await q_(s),s}static async _fromGetAccountInfoResponse(t,n,a){const r=n.users[0];jn(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?V6(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,l=new _v;l.updateFromIdToken(a);const c=new Dl({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:o}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new tE(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,f),c}}const x3=new Map;function Ec(e){Oc(e instanceof Function,"Expected a class definition");let t=x3.get(e);return t?(Oc(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,x3.set(e,t),t)}class L6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}L6.type="NONE";const C3=L6;function s_(e,t,n){return`firebase:${e}:${t}:${n}`}class wv{constructor(t,n,a){this.persistence=t,this.auth=n,this.userKey=a;const{config:r,name:s}=this.auth;this.fullUserKey=s_(this.userKey,r.apiKey,s),this.fullPersistenceKey=s_("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await j_(this.auth,{idToken:t}).catch(()=>{});return n?Dl._fromGetAccountInfoResponse(this.auth,n,t):null}return Dl._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,a="authUser"){if(!n.length)return new wv(Ec(C3),t,a);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=r[0]||Ec(C3);const o=s_(a,t.config.apiKey,t.name);let l=null;for(const f of n)try{const d=await f._get(o);if(d){let A;if(typeof d=="string"){const m=await j_(t,{idToken:d}).catch(()=>{});if(!m)break;A=await Dl._fromGetAccountInfoResponse(t,m,d)}else A=Dl._fromJSON(t,d);f!==s&&(l=A),s=f;break}}catch{}const c=r.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new wv(s,t,a):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==s)try{await f._remove(o)}catch{}})),new wv(s,t,a))}}function S3(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if($6(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(M6(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(G6(t))return"Blackberry";if(z6(t))return"Webos";if(O6(t))return"Safari";if((t.includes("chrome/")||H6(t))&&!t.includes("edge/"))return"Chrome";if(Q6(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=e.match(n);if(a?.length===2)return a[1]}return"Other"}function M6(e=Ko()){return/firefox\//i.test(e)}function O6(e=Ko()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function H6(e=Ko()){return/crios\//i.test(e)}function $6(e=Ko()){return/iemobile/i.test(e)}function Q6(e=Ko()){return/android/i.test(e)}function G6(e=Ko()){return/blackberry/i.test(e)}function z6(e=Ko()){return/webos/i.test(e)}function jB(e=Ko()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _le(e=Ko()){var t;return jB(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function wle(){return Poe()&&document.documentMode===10}function W6(e=Ko()){return jB(e)||Q6(e)||z6(e)||G6(e)||/windows phone/i.test(e)||$6(e)}function K6(e,t=[]){let n;switch(e){case"Browser":n=S3(Ko());break;case"Worker":n=`${S3(Ko())}-${e}`;break;default:n=e}const a=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Af}/${a}`}class ble{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const a=s=>new Promise((o,l)=>{try{const c=t(s);o(c)}catch(c){l(c)}});a.onAbort=n,this.queue.push(a);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const a of this.queue)await a(t),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function xle(e,t={}){return hh(e,"GET","/v2/passwordPolicy",WB(e,t))}const Cle=6;class Sle{constructor(t){var n,a,r,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Cle,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,a,r,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(t,n){const a=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=t.length>=a),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let r=0;r<t.length;r++)a=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,n,a,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}class Ele{constructor(t,n,a,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E3(this),this.idTokenSubscription=new E3(this),this.beforeStateQueue=new ble(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Ec(n)),this._initializationPromise=this.queue(async()=>{var a,r,s;if(!this._deleted&&(this.persistenceManager=await wv.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await j_(this,{idToken:t}),a=await Dl._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(nl(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let r=a,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r?._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===l)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return jn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await q_(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=ole()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(nl(this.app))return Promise.reject(iA(this));const n=t?Wu(t):null;return n&&jn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&jn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return nl(this.app)?Promise.reject(iA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return nl(this.app)?Promise.reject(iA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ec(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await xle(this),n=new Sle(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new mh("auth","Firebase",t())}onAuthStateChanged(t,n,a){return this.registerStateListener(this.authStateSubscription,t,n,a)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,a){return this.registerStateListener(this.idTokenSubscription,t,n,a)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await yle(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const a=await this.getOrInitRedirectPersistenceManager(n);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Ec(t)||this._popupRedirectResolver;jn(n,this,"argument-error"),this.redirectPersistenceManager=await wv.create(this,[Ec(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,a,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(jn(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=t.addObserver(n,a,r);return()=>{o=!0,c()}}else{const c=t.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return jn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=K6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(n["X-Firebase-Client"]=a);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var t;if(nl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&ale(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Sw(e){return Wu(e)}class E3{constructor(t){this.auth=t,this.observer=null,this.addObserver=Hoe(n=>this.observer=n)}get next(){return jn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let qB={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kle(e){qB=e}function Ble(e){return qB.loadJS(e)}function Tle(){return qB.gapiScript}function Ile(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function j6(e,t){const n=E6(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(zv(s,t??{}))return r;Mc(r,"already-initialized")}return n.initialize({options:t})}function Fle(e,t){const n=t?.persistence||[],a=(Array.isArray(n)?n:[n]).map(Ec);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(a,t?.popupRedirectResolver)}function Ple(e,t,n){const a=Sw(e);jn(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const r=!1,s=q6(t),{host:o,port:l}=Dle(t),c=l===null?"":`:${l}`,f={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!a._canInitEmulator){jn(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),jn(zv(f,a.config.emulator)&&zv(d,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=f,a.emulatorConfig=d,a.settings.appVerificationDisabledForTesting=!0,xw(o)?(Eoe(`${s}//${o}${c}`),Toe("Auth",!0)):Ule()}function q6(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Dle(e){const t=q6(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(a);if(r){const s=r[1];return{host:s,port:k3(a.substr(s.length+1))}}else{const[s,o]=a.split(":");return{host:s,port:k3(o)}}}function k3(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Ule(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}class Y6{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Sc("not implemented")}_getIdTokenResponse(t){return Sc("not implemented")}_linkToIdToken(t,n){return Sc("not implemented")}_getReauthenticationResolver(t){return Sc("not implemented")}}async function bv(e,t){return cle(e,"POST","/v1/accounts:signInWithIdp",WB(e,t))}const Rle="http://localhost";class gA extends Y6{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new gA(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Mc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:r}=n,s=QB(n,["providerId","signInMethod"]);if(!a||!r)return null;const o=new gA(a,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return bv(t,n)}_linkToIdToken(t,n){const a=this.buildRequest();return a.idToken=n,bv(t,a)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,bv(t,n)}buildRequest(){const t={requestUri:Rle,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=vh(n)}return t}}class X6{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Ig extends X6{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Sd extends Ig{constructor(){super("facebook.com")}static credential(t){return gA._fromParams({providerId:Sd.PROVIDER_ID,signInMethod:Sd.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Sd.credentialFromTaggedObject(t)}static credentialFromError(t){return Sd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Sd.credential(t.oauthAccessToken)}catch{return null}}}Sd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sd.PROVIDER_ID="facebook.com";class Eu extends Ig{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return gA._fromParams({providerId:Eu.PROVIDER_ID,signInMethod:Eu.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Eu.credentialFromTaggedObject(t)}static credentialFromError(t){return Eu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:a}=t;if(!n&&!a)return null;try{return Eu.credential(n,a)}catch{return null}}}Eu.GOOGLE_SIGN_IN_METHOD="google.com";Eu.PROVIDER_ID="google.com";class Ed extends Ig{constructor(){super("github.com")}static credential(t){return gA._fromParams({providerId:Ed.PROVIDER_ID,signInMethod:Ed.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ed.credentialFromTaggedObject(t)}static credentialFromError(t){return Ed.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ed.credential(t.oauthAccessToken)}catch{return null}}}Ed.GITHUB_SIGN_IN_METHOD="github.com";Ed.PROVIDER_ID="github.com";class kd extends Ig{constructor(){super("twitter.com")}static credential(t,n){return gA._fromParams({providerId:kd.PROVIDER_ID,signInMethod:kd.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return kd.credentialFromTaggedObject(t)}static credentialFromError(t){return kd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=t;if(!n||!a)return null;try{return kd.credential(n,a)}catch{return null}}}kd.TWITTER_SIGN_IN_METHOD="twitter.com";kd.PROVIDER_ID="twitter.com";class Wv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,a,r=!1){const s=await Dl._fromIdTokenResponse(t,a,r),o=B3(a);return new Wv({user:s,providerId:o,_tokenResponse:a,operationType:n})}static async _forOperation(t,n,a){await t._updateTokensIfNecessary(a,!0);const r=B3(a);return new Wv({user:t,providerId:r,_tokenResponse:a,operationType:n})}}function B3(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Y_ extends zu{constructor(t,n,a,r){var s;super(n.code,n.message),this.operationType=a,this.user=r,Object.setPrototypeOf(this,Y_.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,n,a,r){return new Y_(t,n,a,r)}}function J6(e,t,n,a){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Y_._fromErrorAndOperation(e,s,t,a):s})}async function Nle(e,t,n=!1){const a=await H0(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Wv._forOperation(e,"link",a)}async function Vle(e,t,n=!1){const{auth:a}=e;if(nl(a.app))return Promise.reject(iA(a));const r="reauthenticate";try{const s=await H0(e,J6(a,r,t,e),n);jn(s.idToken,a,"internal-error");const o=KB(s.idToken);jn(o,a,"internal-error");const{sub:l}=o;return jn(e.uid===l,a,"user-mismatch"),Wv._forOperation(e,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Mc(a,"user-mismatch"),s}}async function Z6(e,t,n=!1){if(nl(e.app))return Promise.reject(iA(e));const a="signIn",r=await J6(e,a,t),s=await Wv._fromIdTokenResponse(e,a,r);return n||await e._updateCurrentUser(s.user),s}async function Lle(e,t){return Z6(Sw(e),t)}function Mle(e,t){return Wu(e).setPersistence(t)}function eM(e,t,n,a){return Wu(e).onIdTokenChanged(t,n,a)}function Ole(e,t,n){return Wu(e).beforeAuthStateChanged(t,n)}function Hle(e,t,n,a){return Wu(e).onAuthStateChanged(t,n,a)}function $le(e){return Wu(e).signOut()}const X_="__sak";class tM{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(X_,"1"),this.storage.removeItem(X_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qle=1e3,Gle=10;class nM extends tM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W6(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),r=this.localCache[n];a!==r&&t(n,r,a)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const a=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(a);!n&&this.localCache[a]===o||this.notifyListeners(a,o)},s=this.storage.getItem(a);wle()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,Gle):r()}notifyListeners(t,n){this.localCache[t]=n;const a=this.listeners[t];if(a)for(const r of Array.from(a))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:a}),!0)})},Qle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}nM.type="LOCAL";const YB=nM;class aM extends tM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}aM.type="SESSION";const XB=aM;function zle(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ew{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const a=new Ew(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:a,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:r});const l=Array.from(o).map(async f=>f(n.origin,s)),c=await zle(l);n.ports[0].postMessage({status:"done",eventId:a,eventType:r,response:c})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ew.receivers=[];function JB(e="",t=10){let n="";for(let a=0;a<t;a++)n+=Math.floor(Math.random()*10);return e+n}class Wle{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,a=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const f=JB("",20);r.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},a);o={messageChannel:r,onMessage(A){const m=A;if(m.data.eventId===f)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:f,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Du(){return window}function Kle(e){Du().location.href=e}function rM(){return typeof Du().WorkerGlobalScope<"u"&&typeof Du().importScripts=="function"}async function jle(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qle(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Yle(){return rM()?self:null}const sM="firebaseLocalStorageDb",Xle=1,J_="firebaseLocalStorage",oM="fbase_key";class Fg{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kw(e,t){return e.transaction([J_],t?"readwrite":"readonly").objectStore(J_)}function Jle(){const e=indexedDB.deleteDatabase(sM);return new Fg(e).toPromise()}function nE(){const e=indexedDB.open(sM,Xle);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const a=e.result;try{a.createObjectStore(J_,{keyPath:oM})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const a=e.result;a.objectStoreNames.contains(J_)?t(a):(a.close(),await Jle(),t(await nE()))})})}async function T3(e,t,n){const a=kw(e,!0).put({[oM]:t,value:n});return new Fg(a).toPromise()}async function Zle(e,t){const n=kw(e,!1).get(t),a=await new Fg(n).toPromise();return a===void 0?null:a.value}function I3(e,t){const n=kw(e,!0).delete(t);return new Fg(n).toPromise()}const eue=800,tue=3;class iM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nE(),this.db)}async _withRetries(t){let n=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(n++>tue)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ew._getInstance(Yle()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await jle(),!this.activeServiceWorker)return;this.sender=new Wle(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((n=a[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||qle()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await nE();return await T3(t,X_,"1"),await I3(t,X_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>T3(a,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(a=>Zle(a,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>I3(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=kw(r,!1).getAll();return new Fg(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)a.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!a.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const a=this.listeners[t];if(a)for(const r of Array.from(a))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eue)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iM.type="LOCAL";const lM=iM;new Tg(3e4,6e4);function nue(e,t){return t?Ec(t):(jn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class ZB extends Y6{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return bv(t,this._buildIdpRequest())}_linkToIdToken(t,n){return bv(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return bv(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function aue(e){return Z6(e.auth,new ZB(e),e.bypassAuthState)}function rue(e){const{auth:t,user:n}=e;return jn(n,t,"internal-error"),Vle(n,new ZB(e),e.bypassAuthState)}async function sue(e){const{auth:t,user:n}=e;return jn(n,t,"internal-error"),Nle(n,new ZB(e),e.bypassAuthState)}class uM{constructor(t,n,a,r,s=!1){this.auth=t,this.resolver=a,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:a,postBody:r,tenantId:s,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:a,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return aue;case"linkViaPopup":case"linkViaRedirect":return sue;case"reauthViaPopup":case"reauthViaRedirect":return rue;default:Mc(this.auth,"internal-error")}}resolve(t){Oc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Oc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oue=new Tg(2e3,1e4);class rv extends uM{constructor(t,n,a,r,s){super(t,n,r,s),this.provider=a,this.authWindow=null,this.pollId=null,rv.currentPopupAction&&rv.currentPopupAction.cancel(),rv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return jn(t,this.auth,"internal-error"),t}async onExecution(){Oc(this.filter.length===1,"Popup operations only handle one event");const t=JB();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Pu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,a;if(!((a=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,oue.get())};t()}}rv.currentPopupAction=null;const iue="pendingRedirect",o_=new Map;class lue extends uM{constructor(t,n,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let t=o_.get(this.auth._key());if(!t){try{const a=await uue(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(n){t=()=>Promise.reject(n)}o_.set(this.auth._key(),t)}return this.bypassAuthState||o_.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uue(e,t){const n=fue(t),a=due(e);if(!await a._isAvailable())return!1;const r=await a._get(n)==="true";return await a._remove(n),r}function cue(e,t){o_.set(e._key(),t)}function due(e){return Ec(e._redirectPersistence)}function fue(e){return s_(iue,e.config.apiKey,e.name)}async function Aue(e,t,n=!1){if(nl(e.app))return Promise.reject(iA(e));const a=Sw(e),r=nue(a,t),o=await new lue(a,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}const mue=600*1e3;class vue{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(n=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!hue(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var a;if(t.error&&!cM(t)){const r=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";n.onError(Pu(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const a=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=mue&&this.cachedEventUids.clear(),this.cachedEventUids.has(F3(t))}saveEventToCache(t){this.cachedEventUids.add(F3(t)),this.lastProcessedEventTime=Date.now()}}function F3(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function cM({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function hue(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cM(e);default:return!1}}async function pue(e,t={}){return hh(e,"GET","/v1/projects",t)}const gue=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yue=/^https?/;async function _ue(e){if(e.config.emulator)return;const{authorizedDomains:t}=await pue(e);for(const n of t)try{if(wue(n))return}catch{}Mc(e,"unauthorized-domain")}function wue(e){const t=eE(),{protocol:n,hostname:a}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&a===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===a}if(!yue.test(n))return!1;if(gue.test(e))return a===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(a)}const bue=new Tg(3e4,6e4);function P3(){const e=Du().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function xue(e){return new Promise((t,n)=>{var a,r,s;function o(){P3(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{P3(),n(Pu(e,"network-request-failed"))},timeout:bue.get()})}if(!((r=(a=Du().gapi)===null||a===void 0?void 0:a.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=Du().gapi)===null||s===void 0)&&s.load)o();else{const l=Ile("iframefcb");return Du()[l]=()=>{gapi.load?o():n(Pu(e,"network-request-failed"))},Ble(`${Tle()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw i_=null,t})}let i_=null;function Cue(e){return i_=i_||xue(e),i_}const Sue=new Tg(5e3,15e3),Eue="__/auth/iframe",kue="emulator/auth/iframe",Bue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Iue(e){const t=e.config;jn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?zB(t,kue):`https://${e.config.authDomain}/${Eue}`,a={apiKey:t.apiKey,appName:e.name,v:Af},r=Tue.get(e.config.apiHost);r&&(a.eid=r);const s=e._getFrameworks();return s.length&&(a.fw=s.join(",")),`${n}?${vh(a).slice(1)}`}async function Fue(e){const t=await Cue(e),n=Du().gapi;return jn(n,e,"internal-error"),t.open({where:document.body,url:Iue(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bue,dontclear:!0},a=>new Promise(async(r,s)=>{await a.restyle({setHideOnLeave:!1});const o=Pu(e,"network-request-failed"),l=Du().setTimeout(()=>{s(o)},Sue.get());function c(){Du().clearTimeout(l),r(a)}a.ping(c).then(c,()=>{s(o)})}))}const Pue={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Due=500,Uue=600,Rue="_blank",Nue="http://localhost";class D3{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Vue(e,t,n,a=Due,r=Uue){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Pue),{width:a.toString(),height:r.toString(),top:s,left:o}),f=Ko().toLowerCase();n&&(l=H6(f)?Rue:n),M6(f)&&(t=t||Nue,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[p,h])=>`${m}${p}=${h},`,"");if(_le(f)&&l!=="_self")return Lue(t||"",l),new D3(null);const A=window.open(t||"",l,d);jn(A,e,"popup-blocked");try{A.focus()}catch{}return new D3(A)}function Lue(e,t){const n=document.createElement("a");n.href=e,n.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}const Mue="__/auth/handler",Oue="emulator/auth/handler",Hue=encodeURIComponent("fac");async function U3(e,t,n,a,r,s){jn(e.config.authDomain,e,"auth-domain-config-required"),jn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:a,v:Af,eventId:r};if(t instanceof X6){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",jS(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,A]of Object.entries({}))o[d]=A}if(t instanceof Ig){const d=t.getScopes().filter(A=>A!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await e._getAppCheckToken(),f=c?`#${Hue}=${encodeURIComponent(c)}`:"";return`${$ue(e)}?${vh(l).slice(1)}${f}`}function $ue({config:e}){return e.emulator?zB(e,Oue):`https://${e.authDomain}/${Mue}`}const Zx="webStorageSupport";class Que{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XB,this._completeRedirectFn=Aue,this._overrideRedirectResult=cue}async _openPopup(t,n,a,r){var s;Oc((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await U3(t,n,a,eE(),r);return Vue(t,o,JB())}async _openRedirect(t,n,a,r){await this._originValidation(t);const s=await U3(t,n,a,eE(),r);return Kle(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Oc(s,"If manager is not set, promise should be"),s)}const a=this.initAndGetManager(t);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(t){const n=await Fue(t),a=new vue(t);return n.register("authEvent",r=>(jn(r?.authEvent,t,"invalid-auth-event"),{status:a.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=n,a}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Zx,{type:Zx},r=>{var s;const o=(s=r?.[0])===null||s===void 0?void 0:s[Zx];o!==void 0&&n(!!o),Mc(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_ue(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return W6()||O6()||jB()}}const dM=Que;var R3="@firebase/auth",N3="1.10.8";class Gue{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(a=>{t(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){jn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zue(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wue(e){Vu(new ql("auth",(t,{options:n})=>{const a=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=a.options;jn(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const c={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K6(e)},f=new Ele(a,r,s,c);return Fle(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,a)=>{t.getProvider("auth-internal").initialize()})),Vu(new ql("auth-internal",t=>{const n=Sw(t.getProvider("auth").getImmediate());return(a=>new Gue(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pi(R3,N3,zue(e)),Pi(R3,N3,"esm2017")}const Kue=300,jue=_6("authIdTokenMaxAge")||Kue;let V3=null;const que=e=>async t=>{const n=t&&await t.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>jue)return;const r=n?.token;V3!==r&&(V3=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Yue(e=B6()){const t=E6(e,"auth");if(t.isInitialized())return t.getImmediate();const n=j6(e,{popupRedirectResolver:dM,persistence:[lM,YB,XB]}),a=_6("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(a,location.origin);if(location.origin===s.origin){const o=que(s.toString());Ole(n,o,()=>o(n.currentUser)),eM(n,l=>o(l))}}const r=Soe("auth");return r&&Ple(n,`http://${r}`),n}function Xue(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}kle({loadJS(e){return new Promise((t,n)=>{const a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=r=>{const s=Pu("internal-error");s.customData=r,n(s)},a.type="text/javascript",a.charset="UTF-8",Xue().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Wue("Browser");const Jue={apiKey:"AIzaSyB8g1LkpQ-pkRyoMT02e7Y-AkSgBt21tVI",authDomain:"origami-clinic.firebaseapp.com",projectId:"origami-clinic",storageBucket:"origami-clinic.firebasestorage.app",messagingSenderId:"1062163572761",appId:"1:1062163572761:web:c3c03832110d86365b2288",measurementId:"G-HSMXCJSMKS"};console.log("Initializing Firebase for Electron...");let l_,Js,sy,eC=!1;try{l_=k6(Jue),console.log("Firebase app initialized successfully"),Js=Yue(l_),console.log("Firebase auth initialized successfully"),eC=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",console.log("Running in Electron:",eC()),sy=new Eu,sy.setCustomParameters({prompt:"select_account",include_granted_scopes:"true",access_type:"online"}),sy.addScope("email"),sy.addScope("profile"),console.log("Firebase initialized:",{app:!!l_,auth:!!Js,isElectron:eC()}),(async()=>{try{await Mle(Js,YB),console.log("Firebase auth persistence set to LOCAL"),Js.onAuthStateChanged(t=>{console.log("Auth state changed in firebase.js:",!!t)})}catch(t){console.error("Error setting Firebase auth persistence:",t)}})()}catch(e){throw console.error("Failed to initialize Firebase:",e),e}function Zue(){const e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}function ece(e){const{clientId:t,redirectUri:n,scope:a="email profile openid",responseType:r="token id_token",prompt:s="select_account",nonce:o}=e;return`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:t,redirect_uri:n,scope:a,response_type:r,include_granted_scopes:"true",prompt:s,nonce:o}).toString()}`}function tce(){return Js.app.options}function nce(){return"1062163572761-ic92tedsm74d5pqrujo13c84u0u1g6ao.apps.googleusercontent.com"}function ace(){return"https://login.evamed.in/auth-callback.html"}function rce(e){try{const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT format");const n=t[1],a=atob(n.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(a)}catch(t){return console.error("Error decoding JWT:",t),null}}const sce={namespaced:!0,state:{user:null,loading:!1,error:null,isFirstTimeSignIn:!1,redirectInProgress:!1},mutations:{SET_USER(e,t){if(e.user=t,t){const n=t.metadata;e.isFirstTimeSignIn=n.creationTime===n.lastSignInTime}else e.isFirstTimeSignIn=!1},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},SET_REDIRECT_IN_PROGRESS(e,t){e.redirectInProgress=t}},actions:{async signInWithGoogle({commit:e}){try{if(e("SET_LOADING",!0),e("SET_ERROR",null),e("SET_REDIRECT_IN_PROGRESS",!0),console.log("Starting Google sign in with dynamic OAuth URL..."),window.process&&window.process.type==="renderer"){console.log("Running in Electron environment");const{ipcRenderer:n}=window.require("electron");n.removeAllListeners("auth-redirect");const a=Zue(),r={clientId:nce(),redirectUri:ace(),scope:"email profile openid",responseType:"token id_token",prompt:"select_account",nonce:a},s=ece(r);console.log("Firebase config:",tce()),console.log("Using client ID:",r.clientId),console.log("Using redirect URI:",r.redirectUri),console.log("Generated nonce:",a),console.log("Generated OAuth URL:",s);const{shell:o}=window.require("electron");return await o.openExternal(s),console.log("Opened authentication URL in default browser"),console.log("Waiting for OAuth callback via custom protocol..."),new Promise((l,c)=>{const f=setTimeout(()=>{n.removeAllListeners("auth-redirect"),e("SET_REDIRECT_IN_PROGRESS",!1),e("SET_LOADING",!1),c(new Error("Authentication timeout"))},12e4);n.once("auth-redirect",async(d,A)=>{console.log("Received auth redirect in renderer:",A),clearTimeout(f),n.removeAllListeners("auth-redirect");try{const m=new URL(A),p=new URLSearchParams(m.search),h=p.get("access_token"),y=p.get("id_token"),g=p.get("error");if(g)throw new Error(`OAuth error: ${g}`);if(h&&y){const _=rce(y);_&&(console.log("ID Token payload:",_),_.nonce&&_.nonce!==a&&console.warn("Nonce mismatch in ID token"));const b=Eu.credential(y,h),S=await Lle(Js,b);console.log("Authentication successful:",S.user),e("SET_USER",S.user),e("SET_REDIRECT_IN_PROGRESS",!1);const B=S.user.metadata.creationTime===S.user.metadata.lastSignInTime;l(B)}else throw new Error("No valid authentication tokens received")}catch(m){console.error("Error processing auth redirect:",m),e("SET_ERROR","Authentication failed. Please close the app, check your internet connection and retry."),e("SET_REDIRECT_IN_PROGRESS",!1),c(m)}})})}else throw new Error("Browser-based authentication not implemented for web environment")}catch(t){throw console.error("Sign in error:",t),e("SET_REDIRECT_IN_PROGRESS",!1),t.code==="auth/network-request-failed"?e("SET_ERROR","Authentication failed. Please close the app, check your internet connection and retry."):e("SET_ERROR",t.message||"Authentication failed. Please close the app, check your internet connection and retry."),t}finally{e("SET_LOADING",!1)}},async signOut({commit:e}){try{e("SET_LOADING",!0),e("SET_ERROR",null),await $le(Js),e("SET_USER",null),e("SET_REDIRECT_IN_PROGRESS",!1)}catch(t){throw e("SET_ERROR",t.message),t}finally{e("SET_LOADING",!1)}},initAuthState({commit:e}){return new Promise(t=>Hle(Js,a=>{console.log("Auth state changed:",a),e("SET_USER",a),a&&this.state.auth.redirectInProgress&&e("SET_REDIRECT_IN_PROGRESS",!1),t(a)},a=>{console.error("Auth state change error:",a),e("SET_ERROR",a.message),e("SET_REDIRECT_IN_PROGRESS",!1),t(null)}))}},getters:{isAuthenticated:e=>!!e.user,currentUser:e=>e.user,isLoading:e=>e.loading,error:e=>e.error,isFirstTimeSignIn:e=>e.isFirstTimeSignIn,redirectInProgress:e=>e.redirectInProgress}},aE=async()=>{try{return{data:(await it.get("/doctor/")).data.data.doctors,error:null}}catch(e){return console.error("There was an error fetching the doctors:",e?.response||e),{data:[],error:e}}},oce=async e=>{try{return await it.post(`/print/${e.doctorId}`,e),{error:null}}catch(t){return console.error("There was an error creating print config:",t),{error:t}}},ice=async e=>{try{const a=(await it.post("/doctor/",e)).data.data.id;console.log("Doctor created successfully, ID:",a);const r={doctorId:a,doctorName:e.doctorName||"",doctorDegrees:e.doctorDegrees||"",doctorRegistrationNumber:e.doctorRegistrationNumber||"",email:"",clinicAddress:"-",contactNumber:"",useHeader:!0,pageSize:"A4"},s=await oce(r);return s.error?console.warn("Doctor created successfully but print config creation failed:",s.error):console.log("Print configuration created successfully for doctor ID:",a),{error:null}}catch(t){return console.error("There was an error adding the doctor:",t),{error:t}}},lce=async e=>{try{return await it.put(`/doctor/${e.id}`,e),{error:null}}catch(t){return console.error("There was an error editing the doctor:",t),{error:t}}},uce={namespaced:!0,state:()=>({doctors:[],doctorId:1,initialized:!1}),getters:{allDoctors:e=>e.doctors,currentDoctorId:e=>e.doctorId,currentDoctor:e=>e.doctors.find(t=>t.id===e.doctorId),isInitialized:e=>e.initialized,isProcedurePrimary:e=>e.doctors.find(n=>n.id===e.doctorId)?.procedurePrimary||!1,isGSTRegistered:e=>e.doctors.find(n=>n.id===e.doctorId)?.isGST||!1,gstIdentifier:e=>e.doctors.find(n=>n.id===e.doctorId)?.gstIdentifier||"",isPharmacyEnabled:e=>e.doctors.find(n=>n.id===e.doctorId)?.isPharmacy||!1},mutations:{setDoctors(e,t){e.doctors=t},setDoctorId(e,t){e.doctorId=t},setInitialized(e,t){e.initialized=t}},actions:{async fetchDoctors({commit:e}){const t=await aE();return e("setDoctors",t.data),t},async initializeDoctors({dispatch:e,commit:t,state:n}){if(!n.initialized)try{const a=await e("fetchDoctors");if(a.error){console.warn("Failed to fetch doctors due to API error:",a.error),t("setDoctorId",1),t("setInitialized",!0);return}a.data&&a.data.length>0?(console.log(`Found ${a.data.length} doctors, setting first as active`),t("setDoctorId",a.data[0].id)):(console.warn("No doctors found - using fallback ID 1"),t("setDoctorId",1)),t("setInitialized",!0)}catch(a){console.error("Error initializing doctors:",a),t("setDoctorId",1),t("setInitialized",!0)}}}},fM=async()=>{try{return{data:(await it.get("/clinic/")).data.data.clinics,error:null}}catch(e){return console.error("There was an error fetching the doctors:",e?.response||e),{data:[],error:e}}},cce=async e=>{try{return await it.post("/clinic/",e),{error:null}}catch(t){return console.error("There was an error adding the clinic:",t),{error:t}}},dce=async e=>{try{return await it.put(`/clinic/${e.id}`,e),{error:null}}catch(t){return console.error("There was an error editing the doctor:",t),{error:t}}},fce={namespaced:!0,state:()=>({clinics:[],clinicId:1,initialized:!1}),getters:{allClinics:e=>e.clinics,currentClinicId:e=>e.clinicId,currentClinic:e=>e.clinics.find(t=>t.id===e.clinicId),isInitialized:e=>e.initialized},mutations:{setClinics(e,t){e.clinics=t},setClinicId(e,t){e.clinicId=t},setInitialized(e,t){e.initialized=t}},actions:{async fetchClinics({commit:e}){const t=await fM();return e("setClinics",t.data),t},async initializeClinics({dispatch:e,commit:t,state:n}){if(!n.initialized)try{const a=await e("fetchClinics");if(a.error){console.warn("Failed to fetch clinics due to API error:",a.error),t("setClinicId",1),t("setInitialized",!0);return}a.data&&a.data.length>0?(console.log(`Found ${a.data.length} clinics, setting first as active`),t("setClinicId",a.data[0].id)):(console.warn("No clinics found - using fallback ID 1"),t("setClinicId",1)),t("setInitialized",!0)}catch(a){console.error("Error initializing clinics:",a),t("setClinicId",1),t("setInitialized",!0)}}}},Ace=async(e=null,t=null,n=null)=>{try{if(!n)throw new Error("pharmacyId is required");const a={pharmacyId:n};return e&&(a.date=e),t&&(a.status=t),{data:(await it.get("/pharmacy/bills",{params:a})).data.data.bills||[],error:null}}catch(a){return console.error("Error fetching pharmacy bills:",a),{data:[],error:a}}},AM=async e=>{try{return{data:(await it.get(`/pharmacy/bills/${e}`)).data.data.bill||null,error:null}}catch(t){return console.error("Error fetching pharmacy bill:",t),{data:null,error:t}}},mM=async(e,t,n=null)=>{try{if(!t)throw new Error("pharmacyId is required");const a={consultationId:e,pharmacyId:t};return n&&(a.billDate=n),{data:(await it.post("/pharmacy/bills",a)).data.data.bill||null,error:null}}catch(a){return console.error("Error creating draft bill:",a),{data:null,error:a}}},mce=async(e,t,n=0)=>{try{const a={items:t,additionalDiscountAmount:n},r=await it.put(`/pharmacy/bills/${e}`,a);if(r.data.success)return{data:{success:!0},error:null};throw new Error(r.data.error||"Failed to update draft bill")}catch(a){return console.error("Error updating draft bill:",a),{data:null,error:a}}},vce=async(e,t=null)=>{try{const n={};return t&&(n.finalizedBy=t),{data:(await it.post(`/pharmacy/bills/${e}/finalize`,n)).data.data.bill||null,error:null}}catch(n){return console.error("Error finalizing bill:",n),{data:null,error:n}}},hce=async e=>{try{return{data:(await it.post(`/pharmacy/bills/${e}/cancel`)).data.data.bill||null,error:null}}catch(t){return console.error("Error cancelling bill:",t),{data:null,error:t}}},Bw=async e=>{try{if(!e)throw new Error("pharmacyId is required");return{data:(await it.get("/pharmacy/inventory",{params:{pharmacyId:e}})).data.data.inventory||[],error:null}}catch(t){return console.error("Error fetching pharmacy inventory:",t),{data:[],error:t}}},pce=async(e,t)=>{try{if(!t)throw new Error("pharmacyId is required");return{data:(await it.get(`/pharmacy/batches/available/${e}`,{params:{pharmacyId:t}})).data.data.batches||[],error:null}}catch(n){return console.error("Error getting available batches:",n),{data:[],error:n}}},vM=async e=>{try{if(!e.pharmacyId)throw new Error("pharmacyId is required in batchData");return{data:(await it.post("/pharmacy/batches",e)).data.data.batch||null,error:null}}catch(t){return console.error("Error creating batch:",t),{data:null,error:t}}},gce=async(e,t)=>{try{return{data:(await it.put(`/pharmacy/batches/${e}`,t)).data.data.batch||null,error:null}}catch(n){return console.error("Error updating batch:",n),{data:null,error:n}}},eT=async()=>{try{return{data:(await it.get("/pharmacy/configs")).data.data.pharmacies||[],error:null}}catch(e){return console.error("Error fetching pharmacies:",e),{data:[],error:e}}},yce=async e=>{try{return{data:(await it.post("/pharmacy/configs",e)).data.data.pharmacy||null,error:null}}catch(t){return console.error("Error creating pharmacy:",t),{data:null,error:t}}},_ce=async(e,t)=>{try{return{data:(await it.put(`/pharmacy/configs/${e}`,t)).data.data.pharmacy||null,error:null}}catch(n){return console.error("Error updating pharmacy:",n),{data:null,error:n}}},hM=async(e=null)=>{try{const t=e?{pharmacyId:e}:{};return{data:(await it.get("/pharmacy/config",{params:t})).data.data.config||null,error:null}}catch(t){return console.error("Error fetching pharmacy config:",t),{data:null,error:t}}},wce=async e=>{try{if(!e)throw new Error("pharmacyId is required");const n=(await it.get("/pharmacy/bill-series",{params:{pharmacyId:e}})).data.data.series;if(!n||!n.identifier)return{data:null,error:null};const a=n.identifier,r=a.substring(0,3),s=a.substring(3),o=parseInt(s,10),l=isNaN(o)?1:o+1;return{data:{identifier:a,prefix:r,suffix:"",seed:l},error:null}}catch(t){return console.error("Error fetching pharmacy bill series:",t),{data:null,error:t}}},bce=async(e,t,n,a=null)=>{try{if(!e)throw new Error("pharmacyId is required");let r=a;if(r==null&&(n&&typeof n=="string"&&(r=parseInt(n.replace(/\D/g,""),10)),isNaN(r)))throw new Error("seed is required");let s=(t||"").toUpperCase().trim();if(s.length<3)throw new Error("prefix must be at least 3 characters");s=s.substring(0,3);const l=Math.max(0,Math.floor(r)-1).toString().padStart(6,"0"),c=s+l;return{data:(await it.post("/pharmacy/bill-series",{pharmacyId:e,identifier:c})).data.data.series||null,error:null}}catch(r){return console.error("Error creating pharmacy bill series:",r),{data:null,error:r}}},xce=bce,Cce=async(e,t={})=>{try{if(!e)throw new Error("pharmacyId is required");const n={pharmacyId:e,...t};return{data:(await it.get("/pharmacy/purchase-invoices",{params:n})).data.data||[],error:null}}catch(n){return console.error("Error fetching purchase invoices:",n),{data:[],error:n}}},Sce=async e=>{try{if(!e.pharmacyId)throw new Error("pharmacyId is required in invoiceData");return{data:(await it.post("/pharmacy/purchase-invoices",e)).data.data.invoice||null,error:null}}catch(t){return console.error("Error creating purchase invoice:",t),{data:null,error:t}}},Ece=async e=>{try{if(!e)throw new Error("billId is required");return{success:!0,data:(await it.get(`/pharmacy/bills/${e}/payments`)).data.data.payments||[],error:null}}catch(t){return console.error("Error fetching pharmacy payments:",t),{success:!1,data:[],error:t}}},kce=async(e,t)=>{try{if(!e)throw new Error("billId is required");if(!t||!t.amount||!t.mode||!t.paymentDate)throw new Error("Payment data must include amount, mode, and paymentDate");return{success:!0,data:(await it.post(`/pharmacy/bills/${e}/payments`,t)).data.data||null,error:null}}catch(n){return console.error("Error creating pharmacy payment:",n),{success:!1,data:null,error:n}}},Bce=async(e,t)=>{try{if(!e)throw new Error("billId is required");if(!t)throw new Error("paymentId is required");const n=await it.delete(`/pharmacy/bills/${e}/payments/${t}`);return{success:!0,error:null}}catch(n){return console.error("Error deleting pharmacy payment:",n),{success:!1,error:n}}},Tce=async(e,t)=>{try{if(!e)throw new Error("billId is required");if(!t||!Array.isArray(t)||t.length===0)throw new Error("returnItems array is required and must not be empty");return{data:(await it.post(`/pharmacy/bills/${e}/return`,{items:t})).data.data||null,error:null}}catch(n){return console.error("Error processing return:",n),{data:null,error:n}}},Ice=async(e,t=null)=>{try{if(!e||e.trim().length===0)return{data:[],error:null};const n={};return t&&(n.pharmacyId=t),{data:(await it.get(`/pharmacy/medicines/search/${encodeURIComponent(e.trim())}`,{params:n})).data.data.medicines||[],error:null}}catch(n){return console.error("Error searching pharmacy medicines:",n),{data:[],error:n}}},Fce=async e=>{try{if(!e)throw new Error("batchId is required");return{data:(await it.get(`/pharmacy/batches/${e}/usage-check`)).data.data||{isUsed:!1},error:null}}catch(t){return console.error("Error checking batch usage:",t),{data:{isUsed:!1},error:t}}},Pce=async e=>{try{if(!e)throw new Error("batchId is required");return{data:(await it.delete(`/pharmacy/batches/${e}`)).data.data||null,error:null}}catch(t){return console.error("Error deleting batch:",t),{data:null,error:t}}},Pg=async e=>{try{if(!e)throw new Error("invoiceId is required");return{data:(await it.get(`/pharmacy/purchase-invoices/${e}`)).data.data||null,error:null}}catch(t){return console.error("Error fetching purchase invoice:",t),{data:null,error:t}}},Dce=async(e,t)=>{try{if(!e)throw new Error("invoiceId is required");return{data:(await it.put(`/pharmacy/purchase-invoices/${e}`,t)).data.data.invoice||null,error:null}}catch(n){return console.error("Error updating purchase invoice:",n),{data:null,error:n}}},Uce=async(e,t)=>{try{if(!e)throw new Error("invoiceId is required");if(!t)throw new Error("batchId is required");return await it.delete(`/pharmacy/purchase-invoices/${e}/batches/${t}`),{error:null}}catch(n){return console.error("Error deleting batch from invoice:",n),{error:n}}},Rce=async e=>{try{if(!e)throw new Error("pharmacyId is required");return{data:((await it.get("/pharmacy/purchase-invoices",{params:{pharmacyId:e}})).data.data||[]).map(a=>{const r=a.pharmacyPurchaseInvoiceIdentifier||a.identifier||"N/A",s=a.pharmacyPurchaseInvoiceDate?new Date(a.pharmacyPurchaseInvoiceDate*1e3).toLocaleDateString():"N/A",o=a.supplier?.supplierName||a.supplier?.name||"Unknown";return{id:a.id,identifier:r,date:s,supplierName:o,displayText:`${r} (${s}) - ${o}`}}),error:null}}catch(t){return console.error("Error fetching purchase invoices for dropdown:",t),{data:[],error:t}}},pM=async()=>{try{return{data:(await it.get("/pharmacy/suppliers")).data.data||[],error:null}}catch(e){return console.error("Error fetching pharmacy suppliers:",e),{data:[],error:e}}},Nce=async e=>{try{return{data:(await it.post("/pharmacy/suppliers",e)).data.data.supplier||null,error:null}}catch(t){return console.error("Error creating supplier:",t),{data:null,error:t}}},Vce=async(e,t)=>{try{if(!e)throw new Error("supplierId is required");return{data:(await it.put(`/pharmacy/suppliers/${e}`,t)).data.data.supplier||null,error:null}}catch(n){return console.error("Error updating supplier:",n),{data:null,error:n}}},Lce=async e=>{try{if(!e)throw new Error("medicineId is required");return{data:(await it.put(`/medicine/${e}`,{isPharmacy:!0})).data.data.medicine||null,error:null}}catch(t){return console.error("Error marking medicine as pharmacy:",t),{data:null,error:t}}},Mce=async e=>{try{if(!e)throw new Error("medicineId is required");return{data:(await it.put(`/medicine/${e}`,{isPharmacy:!1})).data.data.medicine||null,error:null}}catch(t){return console.error("Error unmarking medicine as pharmacy:",t),{data:null,error:t}}},Oce=async(e,t,n=null,a=null)=>{try{if(!e)throw new Error("batchId is required");if(t==null)throw new Error("adjustmentQuantity is required");const r={medicineBatchId:e,adjustment:t,note:n||"Stock adjustment",...a&&{transactionType:a}};return{data:(await it.post("/pharmacy/inventory/adjust",r)).data.data||null,error:null}}catch(r){return console.error("Error adjusting stock:",r),{data:null,error:r}}},Hce={namespaced:!0,state:()=>({pharmacies:[],pharmacyId:1,initialized:!1}),getters:{allPharmacies:e=>e.pharmacies,currentPharmacyId:e=>e.pharmacyId,currentPharmacy:e=>e.pharmacies.find(t=>t.id===e.pharmacyId),isInitialized:e=>e.initialized,currentPharmacyName:e=>e.pharmacies.find(n=>n.id===e.pharmacyId)?.pharmacyName||"Pharmacy"},mutations:{setPharmacies(e,t){e.pharmacies=t},setPharmacyId(e,t){e.pharmacyId=t,localStorage.setItem("selectedPharmacyId",t.toString())},setInitialized(e,t){e.initialized=t}},actions:{async fetchPharmacies({commit:e}){const t=await eT();return!t.error&&t.data&&e("setPharmacies",t.data),t},async initializePharmacies({dispatch:e,commit:t,state:n}){if(!n.initialized)try{const a=localStorage.getItem("selectedPharmacyId"),r=a?parseInt(a):null,s=await e("fetchPharmacies");if(s.error){console.warn("Failed to fetch pharmacies due to API error:",s.error),t("setPharmacyId",r||1),t("setInitialized",!0);return}s.data&&s.data.length>0?(console.log(`Found ${s.data.length} pharmacies`),r&&s.data.find(o=>o.id===r)?(console.log(`Using saved pharmacy ID: ${r}`),t("setPharmacyId",r)):(console.log(`Setting first pharmacy as active: ${s.data[0].id}`),t("setPharmacyId",s.data[0].id))):(console.warn("No pharmacies found - using fallback ID 1"),t("setPharmacyId",r||1)),t("setInitialized",!0)}catch(a){console.error("Error initializing pharmacies:",a);const r=localStorage.getItem("selectedPharmacyId");t("setPharmacyId",r?parseInt(r):1),t("setInitialized",!0)}}}},$ce={extensionContent:null},Qce={SET_EXTENSION_CONTENT(e,t){e.extensionContent=t},CLEAR_EXTENSION_CONTENT(e){e.extensionContent=null}},Gce={setExtensionContent({commit:e},t){e("SET_EXTENSION_CONTENT",t)},clearExtensionContent({commit:e}){e("CLEAR_EXTENSION_CONTENT")}},zce={extensionContent:e=>e.extensionContent},Wce={namespaced:!0,state:$ce,mutations:Qce,actions:Gce,getters:zce},Kce={show:!1,message:"",color:"info",timeout:4e3},jce={SHOW_SNACKBAR(e,{message:t,color:n="info",timeout:a=4e3}){e.show=!0,e.message=t,e.color=n,e.timeout=a},HIDE_SNACKBAR(e){e.show=!1,e.message=""},SET_SNACKBAR_VISIBILITY(e,t){e.show=t}},qce={showSnackbar({commit:e},t){e("SHOW_SNACKBAR",t)},hideSnackbar({commit:e}){e("HIDE_SNACKBAR")},setSnackbarVisibility({commit:e},t){e("SET_SNACKBAR_VISIBILITY",t)},showSuccess({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"success"})},showError({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"error"})},showWarning({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"warning"})},showInfo({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"info"})}},Yce={snackbar:e=>e,isSnackbarVisible:e=>e.show,snackbarMessage:e=>e.message,snackbarColor:e=>e.color},Xce={namespaced:!0,state:Kce,mutations:jce,actions:qce,getters:Yce},Jce="modulepreload",Zce=function(e,t){return new URL(e,t).href},L3={},ns=function(t,n,a){let r=Promise.resolve();if(n&&n.length>0){let f=function(d){return Promise.all(d.map(A=>Promise.resolve(A).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");r=f(n.map(d=>{if(d=Zce(d,a),d in L3)return;L3[d]=!0;const A=d.endsWith(".css"),m=A?'[rel="stylesheet"]':"";if(a)for(let h=o.length-1;h>=0;h--){const y=o[h];if(y.href===d&&(!A||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${m}`))return;const p=document.createElement("link");if(p.rel=A?"stylesheet":Jce,A||(p.as="script"),p.crossOrigin="",p.href=d,c&&p.setAttribute("nonce",c),document.head.appendChild(p),A)return new Promise((h,y)=>{p.addEventListener("load",h),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},ede={namespaced:!0,state:{filters:{diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},searchResults:[],isLoading:!1,hasSearched:!1,lastSearchTime:null,totalResults:0,searchError:null,currentPage:1,resultsPerPage:20},getters:{hasActiveFilters:e=>!!(e.filters.diagnosis||e.filters.medicine||e.filters.dateFrom||e.filters.dateTo||e.filters.patientName?.trim()||e.filters.gender||e.filters.ageGreaterThan||e.filters.ageLessThan),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];a.diagnosis&&typeof a.diagnosis=="string"&&a.diagnosis.trim()&&r.push(`Diagnosis: ${a.diagnosis}`),a.medicine&&typeof a.medicine=="string"&&a.medicine.trim()&&r.push(`Medicine: ${a.medicine}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`),a.patientName?.trim()&&r.push(`Patient: ${a.patientName.trim()}`),a.gender?.trim()&&r.push(`Gender: ${a.gender.trim()}`),(a.ageGreaterThan||a.ageLessThan)&&(a.ageGreaterThan&&a.ageLessThan?r.push(`Age: ${a.ageGreaterThan}-${a.ageLessThan} years`):a.ageGreaterThan?r.push(`Age: Over ${a.ageGreaterThan} years`):a.ageLessThan&&r.push(`Age: Under ${a.ageLessThan} years`));const s=n.doctorModule?.doctorId,l=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return l&&r.push(`Doctor: ${l}`),r.join("  ")}},mutations:{SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,total:n}){e.searchResults=t||[],e.totalResults=n||0,e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null},RESET_FILTERS(e){e.filters={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""}},CLEAR_ALL(e){e.filters={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.isLoading=!1}},actions:{async performSearch({commit:e,state:t,rootState:n}){const{fetchResearchData:a}=await ns(async()=>{const{fetchResearchData:r}=await import("./researchUtils-Czuk-80u.js");return{fetchResearchData:r}},[],import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};console.log(" Performing research search with filters (including current doctor):",s);const o=await a(s);if(o.error)throw new Error(`Search failed: ${o.error.message||"Unknown error"}`);const l=Array.isArray(o.data)?o.data:[];return e("SET_SEARCH_RESULTS",{results:l,total:l.length}),console.log(" Research search completed:",l.length,"results"),{data:l,error:null,success:!0}}catch(r){return console.error(" Research search failed:",r),e("SET_ERROR",r.message||"Failed to search research data"),{data:[],error:r,success:!1}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){e("CLEAR_SEARCH")},clearFilters({commit:e}){e("RESET_FILTERS")},clearAll({commit:e}){e("CLEAR_ALL")}}},tde={namespaced:!0,state:{filters:{procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},searchResults:[],isLoading:!1,hasSearched:!1,lastSearchTime:null,totalResults:0,searchError:null,currentPage:1,resultsPerPage:20},getters:{hasActiveFilters:e=>!!(e.filters.procedureName?.trim()||e.filters.dateFrom||e.filters.dateTo||e.filters.gender||e.filters.ageGreaterThan||e.filters.ageLessThan),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];a.procedureName?.trim()&&r.push(`Procedure: ${a.procedureName.trim()}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`),a.gender?.trim()&&r.push(`Gender: ${a.gender.trim()}`),(a.ageGreaterThan||a.ageLessThan)&&(a.ageGreaterThan&&a.ageLessThan?r.push(`Age: ${a.ageGreaterThan}-${a.ageLessThan} years`):a.ageGreaterThan?r.push(`Age: Over ${a.ageGreaterThan} years`):a.ageLessThan&&r.push(`Age: Under ${a.ageLessThan} years`));const s=n.doctorModule?.doctorId,l=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return l&&r.push(`Doctor: ${l}`),r.join("  ")}},mutations:{SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,total:n}){e.searchResults=t||[],e.totalResults=n||0,e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null},RESET_FILTERS(e){e.filters={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""}},CLEAR_ALL(e){e.filters={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.isLoading=!1}},actions:{async performSearch({commit:e,state:t,rootState:n}){const{searchProcedureResearch:a}=await ns(async()=>{const{searchProcedureResearch:r}=await Promise.resolve().then(()=>hhe);return{searchProcedureResearch:r}},void 0,import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};console.log(" Performing procedure research search with filters:",s);const o=await a(s);if(o.error)throw new Error(`Search failed: ${o.error.message||"Unknown error"}`);const l=Array.isArray(o.data)?o.data:[];return e("SET_SEARCH_RESULTS",{results:l,total:l.length}),console.log(" Procedure research search completed:",l.length,"results"),{data:l,error:null,success:!0}}catch(r){return console.error(" Procedure research search failed:",r),e("SET_ERROR",r.message||"Failed to search procedure research data"),{data:[],error:r,success:!1}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){e("CLEAR_SEARCH")},clearFilters({commit:e}){e("RESET_FILTERS")},clearAll({commit:e}){e("CLEAR_ALL")}}},nde={filters:{reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""},searchResults:[],rawResults:{appointments:[],consultations:[],treatmentPlans:[]},isLoading:!1,hasSearched:!1,searchError:null,partialErrors:[],lastSearchTime:null,totalResults:0},ade={hasActiveFilters:e=>!!(e.filters.reminderType&&e.filters.reminderType!==""||e.filters.reminderStatus&&e.filters.reminderStatus!==""||e.filters.patientName?.trim()||e.filters.dateFrom||e.filters.dateTo),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0,hasPartialErrors:e.partialErrors.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];if(a.reminderType&&a.reminderType!==""){const c={appointment:"Appointments",consultation:"Consultations",procedures:"Treatment Plans"};r.push(`Type: ${c[a.reminderType]||a.reminderType}`)}if(a.reminderStatus&&a.reminderStatus!==""){const c={pending:"Pending",completed:"Completed"};r.push(`Status: ${c[a.reminderStatus]||a.reminderStatus}`)}a.patientName?.trim()&&r.push(`Patient: ${a.patientName.trim()}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`);const s=n.doctorModule?.doctorId,l=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return l&&r.push(`Doctor: ${l}`),r.join("  ")},uniquePatientsCount:e=>e.searchResults.length?new Set(e.searchResults.map(n=>n.patientId)).size:0,pendingRemindersCount:e=>e.searchResults.filter(t=>t.status==="pending").length,completedRemindersCount:e=>e.searchResults.filter(t=>t.status==="completed").length,appointmentReminders:e=>e.searchResults.filter(t=>t.type==="appointment"),consultationReminders:e=>e.searchResults.filter(t=>t.type==="consultation"),treatmentPlanReminders:e=>e.searchResults.filter(t=>t.type==="procedures")},rde={SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,rawResults:n,total:a,partialErrors:r}){e.searchResults=t||[],e.rawResults=n||{appointments:[],consultations:[],treatmentPlans:[]},e.totalResults=a||0,e.partialErrors=r||[],e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.rawResults={appointments:[],consultations:[],treatmentPlans:[]},e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.partialErrors=[]},RESET_FILTERS(e){e.filters={reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""}},CLEAR_ALL(e){e.filters={reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""},e.searchResults=[],e.rawResults={appointments:[],consultations:[],treatmentPlans:[]},e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.partialErrors=[],e.isLoading=!1},UPDATE_REMINDER_STATUS(e,{id:t,isReminded:n}){const a=e.searchResults.find(r=>r.id===t);a&&(a.status=n?"completed":"pending",a.details.isReminded=n)}},sde={async performSearch({commit:e,state:t,rootState:n}){const{fetchAllReminders:a}=await ns(async()=>{const{fetchAllReminders:r}=await import("./reminderUtils-CpqzJ52l.js");return{fetchAllReminders:r}},[],import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};t.filters.reminderStatus==="pending"?s.reminded=!1:t.filters.reminderStatus==="completed"&&(s.reminded=!0),console.log(" Performing reminder search with filters (including current doctor):",s);const o=await a(s);if(o.error&&o.data.length===0)throw new Error(o.error);const l=o.data||[];return e("SET_SEARCH_RESULTS",{results:l,rawResults:o.rawResults||{},total:l.length,partialErrors:o.partialErrors||[]}),console.log(" Reminder search completed:",l.length,"results"),o.partialErrors?.length>0&&console.warn(" Search completed with partial errors:",o.partialErrors),{data:l,error:null,success:!0,partialErrors:o.partialErrors}}catch(r){return console.error(" Reminder search failed:",r),e("SET_ERROR",r.message||"Failed to search reminders"),{data:[],error:r,success:!1,partialErrors:[]}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),console.log(" Reminder filters updated:",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){return e("CLEAR_SEARCH"),console.log(" Reminder search results cleared"),{success:!0}},resetFilters({commit:e}){return e("RESET_FILTERS"),console.log(" Reminder filters reset"),{success:!0}},clearAll({commit:e}){return e("CLEAR_ALL"),console.log(" All reminder filters and results cleared"),{success:!0}},async markAsReminded({commit:e,rootState:t},{reminder:n,isReminded:a}){try{const{updateReminderStatus:r}=await ns(async()=>{const{updateReminderStatus:d}=await import("./reminderUtils-CpqzJ52l.js");return{updateReminderStatus:d}},[],import.meta.url),s=n.details.reminderType,o=n.originalId,l=n.details,c=t.clinicModule?.clinicId;c&&!l.clinicId&&!l.clinic_id&&(l.clinic_id=c),console.log(` Marking ${s} reminder as ${a?"reminded":"not reminded"}:`,o),console.log(" Original data:",l);const f=await r(s,o,a,l);if(f.success)return e("UPDATE_REMINDER_STATUS",{id:n.id,isReminded:a}),console.log(" Reminder status updated successfully"),{success:!0,error:null};throw new Error(f.error||"Failed to update reminder status")}catch(r){return console.error(" Failed to update reminder status:",r),{success:!1,error:r.message||"Failed to update reminder status"}}}},ode={namespaced:!0,state:nde,getters:ade,mutations:rde,actions:sde},ide=async(e,t=null,n=null)=>{try{const a={clinic_id:e};t&&(a.type=t);const r=n?{signal:n,params:a}:{params:a};return{data:(await it.get("/resource/entities",r)).data.data.entities,error:null}}catch(a){return a.name==="AbortError"?{data:[],error:null}:(console.error("Error fetching resource entities:",a),{data:[],error:a})}},lde=async e=>{try{return{data:(await it.post("/resource/entities",e)).data.data.entity,error:null}}catch(t){return console.error("Error creating resource entity:",t),{data:null,error:t}}},ude=async(e,t)=>{try{return{data:(await it.put(`/resource/entities/${e}`,t)).data.data.entity,error:null}}catch(n){return console.error("Error updating resource entity:",n),{data:null,error:n}}},cde=async e=>{try{return{data:(await it.delete(`/resource/entities/${e}`)).data.data,error:null}}catch(t){return console.error("Error deleting resource entity:",t),{data:null,error:t}}},dde=async(e,t=null)=>{try{const n=t?{signal:t,params:e}:{params:e};return{data:(await it.get("/resource/bookings",n)).data.data.bookings,error:null}}catch(n){return n.name==="AbortError"?{data:[],error:null}:(console.error("Error fetching resource bookings:",n),{data:[],error:n})}},fde=async e=>{try{const t=await it.post("/resource/bookings",e);return{data:t.data.data.booking,error:null,hasConflicts:t.data.data.hasConflicts}}catch(t){return console.error("Error creating resource booking:",t),{data:null,error:t,hasConflicts:!1}}},Ade=async(e,t)=>{try{const n=await it.put(`/resource/bookings/${e}`,t);return{data:n.data.data.booking,error:null,hasConflicts:n.data.data.hasConflicts}}catch(n){return console.error("Error updating resource booking:",n),{data:null,error:n,hasConflicts:!1}}},mde=async e=>{try{return{data:(await it.delete(`/resource/bookings/${e}`)).data.data,error:null}}catch(t){return console.error("Error deleting resource booking:",t),{data:null,error:t}}},vde=async(e,t,n,a=null,r=null)=>{try{const s={entity_id:e,start_date_time:t,end_date_time:n};a&&(s.exclude_id=a);const o=r?{signal:r,params:s}:{params:s};return{data:(await it.get("/resource/bookings/conflicts",o)).data.data,error:null}}catch(s){return s.name==="AbortError"?{data:{conflicts:[],hasConflicts:!1},error:null}:(console.error("Error checking booking conflicts:",s),{data:{conflicts:[],hasConflicts:!1},error:s})}},hde=()=>{try{const e=localStorage.getItem("resourceBookingState");if(e){const t=JSON.parse(e);return{selectedDate:t.selectedDate||null,selectedEntity:t.selectedEntity||null,entitySearchQuery:t.entitySearchQuery||""}}}catch(e){console.error("Error loading persisted resource booking state:",e)}return{selectedDate:null,selectedEntity:null,entitySearchQuery:""}},tC=hde(),pde={namespaced:!0,state:{entities:[],bookings:[],selectedDate:tC.selectedDate,selectedEntity:tC.selectedEntity,entitySearchQuery:tC.entitySearchQuery,isLoading:!1,isRefreshing:!1,error:null},getters:{filteredEntities:e=>{if(!e.entitySearchQuery||e.entitySearchQuery.trim()==="")return[...e.entities].sort((n,a)=>n.name.localeCompare(a.name));const t=e.entitySearchQuery.toLowerCase().trim();return e.entities.filter(n=>n.name.toLowerCase().includes(t)).sort((n,a)=>n.name.localeCompare(a.name))},bookingsByDate:e=>e.selectedDate?e.bookings.filter(t=>!0):[],bookingsByEntity:(e,t)=>{const n=t.bookingsByDate,a={};return n.forEach(r=>{const s=r.entityId||r.entity?.id;a[s]||(a[s]=[]),a[s].push(r)}),a},conflicts:e=>{const t=[],n=e.bookings;for(let a=0;a<n.length;a++)for(let r=a+1;r<n.length;r++){const s=n[a],o=n[r];if(s.entityId===o.entityId||s.entity?.id===o.entity?.id){const l=s.startDateTime,c=s.endDateTime,f=o.startDateTime,d=o.endDateTime;l<d&&c>f&&t.push({booking1:s,booking2:o})}}return t}},mutations:{setEntities(e,t){e.entities=t},addEntity(e,t){e.entities.push(t)},updateEntity(e,t){const n=e.entities.findIndex(a=>a.id===t.id);n!==-1&&(e.entities[n]=t)},removeEntity(e,t){e.entities=e.entities.filter(n=>n.id!==t)},setBookings(e,t){e.bookings=t},addBooking(e,t){e.bookings.push(t)},updateBooking(e,t){const n=e.bookings.findIndex(a=>a.id===t.id);n!==-1&&(e.bookings[n]=t)},removeBooking(e,t){e.bookings=e.bookings.filter(n=>n.id!==t)},setSelectedDate(e,t){e.selectedDate=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.selectedDate=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting selectedDate:",n)}},setSelectedEntity(e,t){e.selectedEntity=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.selectedEntity=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting selectedEntity:",n)}},setEntitySearchQuery(e,t){e.entitySearchQuery=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.entitySearchQuery=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting entitySearchQuery:",n)}},setLoading(e,t){e.isLoading=t},setRefreshing(e,t){e.isRefreshing=t},setError(e,t){e.error=t},clearOldBookings(e){e.bookings=[]}},actions:{async fetchEntities({commit:e,rootState:t},{type:n=null,signal:a=null}={}){try{e("setLoading",!0),e("setError",null);const r=t.clinicId||t.clinicModule?.clinicId||1,s=await ide(r,n,a);if(s.error)throw s.error;return e("setEntities",s.data||[]),{data:s.data,error:null}}catch(r){return e("setError",r),{data:[],error:r}}finally{e("setLoading",!1)}},async createEntity({commit:e,dispatch:t},n){try{e("setError",null);const a=await lde(n);if(a.error)throw a.error;return e("addEntity",a.data),await t("fetchEntities"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async updateEntity({commit:e,dispatch:t},{id:n,entityData:a}){try{e("setError",null);const r=await ude(n,a);if(r.error)throw r.error;return e("updateEntity",r.data),await t("fetchEntities"),{data:r.data,error:null}}catch(r){return e("setError",r),{data:null,error:r}}},async deleteEntity({commit:e,dispatch:t},n){try{e("setError",null);const a=await cde(n);if(a.error)throw a.error;return e("removeEntity",n),await t("fetchEntities"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async fetchBookings({commit:e,rootState:t,state:n},{date:a=null,entityId:r=null,signal:s=null}={}){try{e("setLoading",!0),e("setError",null);const o=t.clinicId||t.clinicModule?.clinicId||1,l=a||n.selectedDate;if(!l)return e("setBookings",[]),{data:[],error:null};const c={clinic_id:o,date:l};r&&(c.entity_id=r);const f=await dde(c,s);if(f.error)throw f.error;return e("setBookings",f.data||[]),{data:f.data,error:null}}catch(o){return o.name!=="AbortError"&&e("setError",o),{data:[],error:o}}finally{e("setLoading",!1)}},async createBooking({commit:e,dispatch:t},n){try{e("setError",null);const a=await fde(n);if(a.error)throw a.error;return e("addBooking",a.data),await t("fetchBookings"),{data:a.data,error:null,hasConflicts:a.hasConflicts}}catch(a){return e("setError",a),{data:null,error:a,hasConflicts:!1}}},async updateBooking({commit:e,dispatch:t},{id:n,bookingData:a}){try{e("setError",null);const r=await Ade(n,a);if(r.error)throw r.error;return e("updateBooking",r.data),await t("fetchBookings"),{data:r.data,error:null,hasConflicts:r.hasConflicts}}catch(r){return e("setError",r),{data:null,error:r,hasConflicts:!1}}},async deleteBooking({commit:e,dispatch:t},n){try{e("setError",null);const a=await mde(n);if(a.error)throw a.error;return e("removeBooking",n),await t("fetchBookings"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async refreshBookings({commit:e,dispatch:t,state:n}){try{return e("setRefreshing",!0),e("setError",null),await Promise.all([t("fetchEntities"),t("fetchBookings",{date:n.selectedDate})]),{error:null}}catch(a){return e("setError",a),{error:a}}finally{e("setRefreshing",!1)}},async checkConflicts({commit:e},{entityId:t,startDateTime:n,endDateTime:a,excludeId:r=null,signal:s=null}){try{const o=await vde(t,n,a,r,s);if(o.error)throw o.error;return{data:o.data,error:null}}catch(o){return o.name!=="AbortError"&&e("setError",o),{data:{conflicts:[],hasConflicts:!1},error:o}}}}},gde=()=>localStorage.getItem("selectedTranslationLanguage")||"none",yde=()=>{const e=localStorage.getItem("selectedHeaderSize");return e?parseInt(e,10):130},Ii=Uae({state:{doctorId:1,clinicId:1,appInitialized:!1,appInitializing:!0,selectedTranslationLanguage:gde(),selectedHeaderSize:yde()},getters:{isAppInitialized:e=>e.appInitialized,isAppInitializing:e=>e.appInitializing,getCurrentDoctorId:e=>e.doctorId,getCurrentClinicId:e=>e.clinicId,getSelectedTranslationLanguage:e=>e.selectedTranslationLanguage,getSelectedHeaderSize:e=>e.selectedHeaderSize},mutations:{setDoctorId(e,t){e.doctorId=t},setClinicId(e,t){e.clinicId=t},setAppInitialized(e,t){e.appInitialized=t},setAppInitializing(e,t){e.appInitializing=t},setSelectedTranslationLanguage(e,t){e.selectedTranslationLanguage=t,t&&t!=="none"?localStorage.setItem("selectedTranslationLanguage",t):localStorage.removeItem("selectedTranslationLanguage")},setSelectedHeaderSize(e,t){const n=Math.max(50,Math.min(200,parseInt(t,10)||130));e.selectedHeaderSize=n,localStorage.setItem("selectedHeaderSize",n.toString())}},actions:{updateDoctorId({commit:e},t){e("setDoctorId",t)},updateClinicId({commit:e},t){e("setClinicId",t)},updateSelectedTranslationLanguage({commit:e},t){e("setSelectedTranslationLanguage",t)},updateSelectedHeaderSize({commit:e},t){e("setSelectedHeaderSize",t)}},modules:{auth:sce,doctorModule:uce,clinicModule:fce,pharmacyModule:Hce,appBar:Wce,snackbar:Xce,researchModule:ede,procedureResearchModule:tde,reminderModule:ode,resourceBookingModule:pde}});let rE=null;const it=Rr.create({baseURL:"",headers:{"Content-Type":"application/json"},timeout:3e5,withCredentials:!1}),Tw=e=>{console.log("[api/client] Base URL updated to:",e),rE=e,it.defaults.baseURL=e},gM=async()=>{console.log("[api/client] Initializing API client..."),console.log("[api/client] Environment:",Oa()?"Electron":"Web"),console.log("[api/client] Current URL:",window.location.href);try{const e=RB();Tw(e),console.log("[api/client] API client initialized with base URL:",e)}catch(e){throw console.error("[api/client] Failed to initialize API client:",e.message),e}},_de=e=>{const t=xo("localhost");return e.replace(t.api.https,t.api.http)},M3=e=>!e||!Oa()?!1:e.includes("localhost")||e.includes("127.0.0.1")||e.includes("192.168.");it.interceptors.request.use(async e=>{if(Oa())try{const t=Js.currentUser;if(t){const n=await t.getIdToken();e.headers.Authorization=`Bearer ${n}`}}catch(t){console.warn("Failed to get Firebase auth token:",t)}return e},e=>Promise.reject(e));it.interceptors.response.use(e=>{if(e.data){const{success:t,message:n}=e.data,a=e.config.headers["X-Skip-Messages"]==="true";if(t&&n&&e.config.method!=="get"&&!a&&Ii.dispatch("snackbar/showSuccess",n),!t&&(n||e.data.error)&&!a){const r=e.data.error||n;Ii.dispatch("snackbar/showError",r)}}return e},async e=>{if(e.config&&!e.config.__isRetry&&Oa()){const a=e.config.baseURL||rE,r=!e.response,s=e.code==="CERT_AUTHORITY_INVALID"||e.code==="CERT_COMMON_NAME_INVALID"||e.code==="CERT_UNTRUSTED"||e.code==="ERR_CERT_AUTHORITY_INVALID"||e.code==="ERR_CERT_COMMON_NAME_INVALID"||e.code==="ERR_INSECURE_RESPONSE"||e.message?.includes("certificate")||e.message?.includes("SSL")||e.message?.includes("HTTPS")||e.message?.includes("self signed")||e.message?.includes("CERT_")||e.message?.includes("ERR_"),o=e.code==="ECONNREFUSED"||e.code==="ECONNRESET"||e.code==="ENOTFOUND"||e.code==="ETIMEDOUT";if(M3(a)&&a.startsWith("https://")&&(r||s||o||e.response?.status>=400)){console.log(" HTTPS failed for localhost (Electron mode), trying HTTP fallback..."),console.log("Error details:",{code:e.code,message:e.message,isNetworkError:r,isCertError:s,isConnectionError:o,originalUrl:a});try{const c=_de(a);console.log(`Attempting HTTP fallback: ${c}`),Tw(c),e.config.__isRetry=!0,e.config.baseURL=c;const f=await it.request(e.config);return console.log(" HTTP fallback successful"),f}catch(c){console.error(" HTTP fallback also failed:",c)}}}let t="An error occurred";return e.response?(console.error("Response error:",e.response.data),e.response.data?.error?t=e.response.data.error:e.response.data?.message?t=e.response.data.message:e.response.status===401?t="Authentication required":e.response.status===403?t="Access forbidden":e.response.status===404?t="Resource not found":e.response.status>=500&&(t="Server error occurred")):e.request?(console.error("Request error:",e.request),Oa()&&M3(rE)?t="Cannot connect to local server - please ensure the server is running":t="Network error - please check your connection"):(console.error("Error:",e.message),t=e.message||"Request failed"),e.config?.headers?.["X-Skip-Messages"]==="true"||Ii.dispatch("snackbar/showError",t),Promise.reject(e)});const yM=e=>({...e,headers:{...e.headers,"X-Skip-Messages":"true"}}),_M=Object.freeze(Object.defineProperty({__proto__:null,createSilentRequest:yM,default:it,initializeAPIClient:gM,updateBaseURL:Tw},Symbol.toStringTag,{value:"Module"})),es=R(localStorage.getItem("sessionToken")||null),Xd=R(JSON.parse(localStorage.getItem("permissions")||"[]")),Jd=R(localStorage.getItem("isAdmin")==="true"),Zd=R(localStorage.getItem("userName")||null),ef=R(localStorage.getItem("userId")?parseInt(localStorage.getItem("userId")):null),tf=R(JSON.parse(localStorage.getItem("features")||"[]")),wde=ee(()=>!!es.value),xv=R(!1),Z_=R(null);Ge([es,Xd,Jd,Zd,ef,tf],()=>{if(es.value){localStorage.setItem("sessionToken",es.value),localStorage.setItem("permissions",JSON.stringify(Xd.value)),localStorage.setItem("isAdmin",Jd.value.toString()),localStorage.setItem("userName",Zd.value||"");const e=ef.value;localStorage.setItem("userId",e!=null?String(e):""),localStorage.setItem("features",JSON.stringify(tf.value))}else localStorage.removeItem("sessionToken"),localStorage.removeItem("permissions"),localStorage.removeItem("isAdmin"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("features")},{deep:!0});let nC=!1,sE=[];const aC=(e,t=null)=>{sE.forEach(n=>{e?n.reject(e):n.resolve(t)}),sE=[]};function wM(e=it){e.interceptors.request.use(t=>{const n=t.url?.includes("/web/auth/login")||t.url?.includes("/web/auth/refresh");return es.value&&!n&&(t.headers["x-session-token"]=es.value),t},t=>Promise.reject(t)),e.interceptors.response.use(t=>t,async t=>{const n=t.config;if(t.response?.status===419)return console.warn("[useWebSession] Session invalidated - permissions may have been updated"),kc(),window.location.reload(),Promise.reject(t);if(t.response?.status===401&&es.value){if(n.url?.includes("/web/auth/"))return console.log("[useWebSession] 401 on auth endpoint, clearing session"),kc(),Promise.reject(t);if(nC)return new Promise((a,r)=>{sE.push({resolve:a,reject:r})}).then(a=>(n.headers["x-session-token"]=a,it(n))).catch(a=>Promise.reject(a));nC=!0;try{return console.log("[useWebSession] Session expired (401), attempting automatic refresh..."),await bM()&&es.value?(console.log("[useWebSession] Session refreshed successfully, retrying original request"),n.headers["x-session-token"]=es.value,aC(null,es.value),it(n)):(console.warn("[useWebSession] Session refresh failed, clearing session"),kc(),aC(t,null),Promise.reject(t))}catch(a){return console.error("[useWebSession] Session refresh error:",a),kc(),aC(a,null),Promise.reject(a)}finally{nC=!1}}return Promise.reject(t)})}async function bde(e,t=null){xv.value=!0,Z_.value=null;try{const n=await it.post("/web/auth/login",{passcode:e,userId:t});if(n.data.success){es.value=n.data.sessionToken,Xd.value=n.data.permissions||[],Jd.value=n.data.isAdmin||!1,Zd.value=n.data.userName||null;const a=n.data.userId;return ef.value=a!=null?typeof a=="number"?a:parseInt(a,10):null,tf.value=n.data.features||[],{success:!0,isAdmin:n.data.isAdmin,userName:n.data.userName}}else throw new Error(n.data.error||"Login failed")}catch(n){throw Z_.value=n.response?.data?.error||n.message||"Login failed",n}finally{xv.value=!1}}async function xde(){try{es.value&&await it.post("/web/auth/logout",{},{headers:{"x-session-token":es.value}})}catch(e){console.error("Logout error:",e)}finally{kc()}}async function Cde(){if(!es.value)return{valid:!1};xv.value=!0;try{const e=it.defaults.baseURL;if(!e)return console.error("[useWebSession] API client base URL not set! Cannot verify session."),xv.value=!1,{valid:!1,error:"API client not initialized"};console.log("[useWebSession] Verifying session with base URL:",e),console.log("[useWebSession] Full URL will be:",`${e}/web/auth/verify`),console.log("[useWebSession] Session token exists:",!!es.value);const t=await it.get("/web/auth/verify");if(t.data.valid){Xd.value=t.data.permissions||[],Jd.value=t.data.isAdmin||!1,Zd.value=t.data.userName||null;const n=t.data.userId;return ef.value=n!=null?typeof n=="number"?n:parseInt(n,10):null,tf.value=t.data.features||[],{valid:!0,...t.data}}else return kc(),{valid:!1}}catch(e){return console.error("[useWebSession] Session verification failed:",e),(e.code==="ERR_NETWORK"||e.message?.includes("CORS")||e.message?.includes("Network Error")||!e.response)&&(console.error("[useWebSession] CORS or network error detected. Base URL:",it.defaults.baseURL),console.error("[useWebSession] This usually means the endpoint URL is incorrect or the server is not configured for CORS.")),e.response?.status===401&&kc(),{valid:!1,error:e.message}}finally{xv.value=!1}}async function bM(){if(!es.value)return console.warn("[useWebSession] Cannot refresh session - no session token"),!1;try{console.log("[useWebSession] Refreshing session...");const e=await it.post("/web/auth/refresh",{},{headers:{"x-session-token":es.value}});if(e.data.success){if(e.data.sessionToken&&(es.value=e.data.sessionToken,console.log("[useWebSession] Session token updated after refresh")),e.data.permissions&&(Xd.value=e.data.permissions),e.data.isAdmin!==void 0&&(Jd.value=e.data.isAdmin),e.data.userName&&(Zd.value=e.data.userName),e.data.userId!==void 0){const t=e.data.userId;ef.value=t!=null?typeof t=="number"?t:parseInt(t,10):null}return e.data.features&&(tf.value=e.data.features),console.log("[useWebSession] Session refreshed successfully"),!0}return!1}catch(e){return console.error("[useWebSession] Session refresh error:",e),e.response?.status===401&&(console.warn("[useWebSession] Refresh endpoint returned 401 - session truly expired"),kc()),!1}}function kc(){es.value=null,Xd.value=[],Jd.value=!1,Zd.value=null,ef.value=null,tf.value=[],Z_.value=null}function Sde(e){es.value=e.sessionToken,Xd.value=e.permissions||[],Jd.value=e.isAdmin||!1,Zd.value=e.userName||null;const t=e.userId;ef.value=t!=null?typeof t=="number"?t:parseInt(t,10):null,tf.value=e.features||[]}function KA(){return{sessionToken:ee(()=>es.value),permissions:ee(()=>Xd.value),isAdmin:ee(()=>Jd.value),userName:ee(()=>Zd.value),userId:ee(()=>ef.value),features:ee(()=>tf.value),isAuthenticated:wde,sessionLoading:ee(()=>xv.value),sessionError:ee(()=>Z_.value),login:bde,logout:xde,verifySession:Cde,refreshSession:bM,clearSession:kc,setSession:Sde,setupSessionInterceptors:wM}}const Ede="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17.5%2013C15%2013%2013%2015%2013%2017.5C13%2020%2015%2022%2017.5%2022C20%2022%2022%2020%2022%2017.5C22%2015%2020%2013%2017.5%2013M10%2014C5.58%2014%202%2015.79%202%2018V20H11.5A6.5%206.5%200%200%201%2011%2017.5A6.5%206.5%200%200%201%2011.95%2014.14C11.32%2014.06%2010.68%2014%2010%2014M17.5%2014.5C19.16%2014.5%2020.5%2015.84%2020.5%2017.5C20.5%2018.06%2020.35%2018.58%2020.08%2019L16%2014.92C16.42%2014.65%2016.94%2014.5%2017.5%2014.5M14.92%2016L19%2020.08C18.58%2020.35%2018.06%2020.5%2017.5%2020.5C15.84%2020.5%2014.5%2019.16%2014.5%2017.5C14.5%2016.94%2014.65%2016.42%2014.92%2016Z'%20/%3e%3c/svg%3e",kde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21.1,12.5L22.5,13.91L15.97,20.5L12.5,17L13.9,15.59L15.97,17.67L21.1,12.5M10,17L13,20H3V18C3,15.79%206.58,14%2011,14L12.89,14.11L10,17M11,4A4,4%200%200,1%2015,8A4,4%200%200,1%2011,12A4,4%200%200,1%207,8A4,4%200%200,1%2011,4Z'%20/%3e%3c/svg%3e",Bde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10.63,14.1C12.23,10.58%2016.38,9.03%2019.9,10.63C23.42,12.23%2024.97,16.38%2023.37,19.9C22.24,22.4%2019.75,24%2017,24C14.3,24%2011.83,22.44%2010.67,20H1V18C1.06,16.86%201.84,15.93%203.34,15.18C4.84,14.43%206.72,14.04%209,14C9.57,14%2010.11,14.05%2010.63,14.1V14.1M9,4C10.12,4.03%2011.06,4.42%2011.81,5.17C12.56,5.92%2012.93,6.86%2012.93,8C12.93,9.14%2012.56,10.08%2011.81,10.83C11.06,11.58%2010.12,11.95%209,11.95C7.88,11.95%206.94,11.58%206.19,10.83C5.44,10.08%205.07,9.14%205.07,8C5.07,6.86%205.44,5.92%206.19,5.17C6.94,4.42%207.88,4.03%209,4M17,22A5,5%200%200,0%2022,17A5,5%200%200,0%2017,12A5,5%200%200,0%2012,17A5,5%200%200,0%2017,22M16,14H17.5V16.82L19.94,18.23L19.19,19.53L16,17.69V14Z'%20/%3e%3c/svg%3e",Tde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17%2012C16.87%2012%2016.76%2012.09%2016.74%2012.21L16.55%2013.53C16.25%2013.66%2015.96%2013.82%2015.7%2014L14.46%2013.5C14.35%2013.5%2014.22%2013.5%2014.15%2013.63L13.15%2015.36C13.09%2015.47%2013.11%2015.6%2013.21%2015.68L14.27%2016.5C14.25%2016.67%2014.24%2016.83%2014.24%2017C14.24%2017.17%2014.25%2017.33%2014.27%2017.5L13.21%2018.32C13.12%2018.4%2013.09%2018.53%2013.15%2018.64L14.15%2020.37C14.21%2020.5%2014.34%2020.5%2014.46%2020.5L15.7%2020C15.96%2020.18%2016.24%2020.35%2016.55%2020.47L16.74%2021.79C16.76%2021.91%2016.86%2022%2017%2022H19C19.11%2022%2019.22%2021.91%2019.24%2021.79L19.43%2020.47C19.73%2020.34%2020%2020.18%2020.27%2020L21.5%2020.5C21.63%2020.5%2021.76%2020.5%2021.83%2020.37L22.83%2018.64C22.89%2018.53%2022.86%2018.4%2022.77%2018.32L21.7%2017.5C21.72%2017.33%2021.74%2017.17%2021.74%2017C21.74%2016.83%2021.73%2016.67%2021.7%2016.5L22.76%2015.68C22.85%2015.6%2022.88%2015.47%2022.82%2015.36L21.82%2013.63C21.76%2013.5%2021.63%2013.5%2021.5%2013.5L20.27%2014C20%2013.82%2019.73%2013.65%2019.42%2013.53L19.23%2012.21C19.22%2012.09%2019.11%2012%2019%2012H17M10%2014C5.58%2014%202%2015.79%202%2018V20H11.68A7%207%200%200%201%2011%2017A7%207%200%200%201%2011.64%2014.09C11.11%2014.03%2010.56%2014%2010%2014M18%2015.5C18.83%2015.5%2019.5%2016.17%2019.5%2017C19.5%2017.83%2018.83%2018.5%2018%2018.5C17.16%2018.5%2016.5%2017.83%2016.5%2017C16.5%2016.17%2017.17%2015.5%2018%2015.5Z'%20/%3e%3c/svg%3e",Ide="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16%2017V19H2V17S2%2013%209%2013%2016%2017%2016%2017M12.5%207.5A3.5%203.5%200%201%200%209%2011A3.5%203.5%200%200%200%2012.5%207.5M15.94%2013A5.32%205.32%200%200%201%2018%2017V19H22V17S22%2013.37%2015.94%2013M15%204A3.39%203.39%200%200%200%2013.07%204.59A5%205%200%200%201%2013.07%2010.41A3.39%203.39%200%200%200%2015%2011A3.5%203.5%200%200%200%2015%204Z'%20/%3e%3c/svg%3e",Fde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,4A4,4%200%200,1%2016,8A4,4%200%200,1%2012,12A4,4%200%200,1%208,8A4,4%200%200,1%2012,4M12,14C16.42,14%2020,15.79%2020,18V20H4V18C4,15.79%207.58,14%2012,14Z'%20/%3e%3c/svg%3e",Pde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M23%207V13H21V7M21%2015H23V17H21M12%202A2%202%200%200%200%2010%204A2%202%200%200%200%2010%204.29C7.12%205.14%205%207.82%205%2011V17L3%2019V20H21V19L19%2017V11C19%207.82%2016.88%205.14%2014%204.29A2%202%200%200%200%2014%204A2%202%200%200%200%2012%202M10%2021A2%202%200%200%200%2012%2023A2%202%200%200%200%2014%2021Z'%20/%3e%3c/svg%3e",Dde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.75%2021.16L15%2018.16L16.16%2017L17.75%2018.59L21.34%2015L22.5%2016.41L17.75%2021.16M3%2020V19L5%2017V11C5%207.9%207.03%205.18%2010%204.29V4C10%202.9%2010.9%202%2012%202C13.11%202%2014%202.9%2014%204V4.29C16.97%205.18%2019%207.9%2019%2011V12.08L18%2012C14.69%2012%2012%2014.69%2012%2018C12%2018.7%2012.12%2019.37%2012.34%2020H3M12%2023C10.9%2023%2010%2022.11%2010%2021H12.8C13.04%2021.41%2013.33%2021.79%2013.65%2022.13C13.29%2022.66%2012.69%2023%2012%2023Z'%20/%3e%3c/svg%3e",Ude="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%202L14%206.5V17.5L19%2013V2M6.5%205C4.55%205%202.45%205.4%201%206.5V21.16C1%2021.41%201.25%2021.66%201.5%2021.66C1.6%2021.66%201.65%2021.59%201.75%2021.59C3.1%2020.94%205.05%2020.5%206.5%2020.5C8.45%2020.5%2010.55%2020.9%2012%2022C13.35%2021.15%2015.8%2020.5%2017.5%2020.5C19.15%2020.5%2020.85%2020.81%2022.25%2021.56C22.35%2021.61%2022.4%2021.59%2022.5%2021.59C22.75%2021.59%2023%2021.34%2023%2021.09V6.5C22.4%206.05%2021.75%205.75%2021%205.5V19C19.9%2018.65%2018.7%2018.5%2017.5%2018.5C15.8%2018.5%2013.35%2019.15%2012%2020V6.5C10.55%205.4%208.45%205%206.5%205Z'%20/%3e%3c/svg%3e",Rde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M7,2H17A2,2%200%200,1%2019,4V20A2,2%200%200,1%2017,22H7A2,2%200%200,1%205,20V4A2,2%200%200,1%207,2M7,4V8H17V4H7M7,10V12H9V10H7M11,10V12H13V10H11M15,10V12H17V10H15M7,14V16H9V14H7M11,14V16H13V14H11M15,14V16H17V14H15M7,18V20H9V18H7M11,18V20H13V18H11M15,18V20H17V18H15Z'%20/%3e%3c/svg%3e",Nde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,19H7V5H17M17,1H7C5.89,1%205,1.89%205,3V21A2,2%200%200,0%207,23H17A2,2%200%200,0%2019,21V3C19,1.89%2018.1,1%2017,1Z'%20/%3e%3c/svg%3e",Vde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z'%20/%3e%3c/svg%3e",Lde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M22,12A10,10%200%200,1%2012,22A10,10%200%200,1%202,12A10,10%200%200,1%2012,2A10,10%200%200,1%2022,12M15.4,16.6L10.8,12L15.4,7.4L14,6L8,12L14,18L15.4,16.6Z'%20/%3e%3c/svg%3e",Mde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M22,12A10,10%200%200,1%2012,22A10,10%200%200,1%202,12A10,10%200%200,1%2012,2A10,10%200%200,1%2022,12M10,18L16,12L10,6L8.6,7.4L13.2,12L8.6,16.6L10,18Z'%20/%3e%3c/svg%3e",Ode="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M5,13.46H7.17L10.5,7.08L11.44,14.05L13.93,10.86L16.53,13.46H19V15H15.89L14.07,13.21L10.38,17.92L9.62,12.15L8.11,15H5V13.46Z'%20/%3e%3c/svg%3e",Hde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,9H7V7H17M17,13H7V11H17M14,17H7V15H14M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3Z'%20/%3e%3c/svg%3e",$de="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%206.91L17.09%204L12%209.09L6.91%204L4%206.91L9.09%2012L4%2017.09L6.91%2020L12%2014.91L17.09%2020L20%2017.09L14.91%2012L20%206.91Z'%20/%3e%3c/svg%3e",Qde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'%20/%3e%3c/svg%3e",Gde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M13%2019C13%2019.34%2013.04%2019.67%2013.09%2020H6.5C5%2020%203.69%2019.5%202.61%2018.43C1.54%2017.38%201%2016.09%201%2014.58C1%2013.28%201.39%2012.12%202.17%2011.1S4%209.43%205.25%209.15C5.67%207.62%206.5%206.38%207.75%205.43S10.42%204%2012%204C13.95%204%2015.6%204.68%2016.96%206.04C18.32%207.4%2019%209.05%2019%2011C20.15%2011.13%2021.1%2011.63%2021.86%2012.5C22.37%2013.07%2022.7%2013.71%2022.86%2014.42C21.82%2013.54%2020.5%2013%2019%2013C15.69%2013%2013%2015.69%2013%2019M20%2016H18V20H16L19%2023L22%2020H20V16Z'%20/%3e%3c/svg%3e",zde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,21H8V7H19M19,5H8A2,2%200%200,0%206,7V21A2,2%200%200,0%208,23H19A2,2%200%200,0%2021,21V7A2,2%200%200,0%2019,5M16,1H4A2,2%200%200,0%202,3V17H4V3H16V1Z'%20/%3e%3c/svg%3e",Wde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2%200%200,0%208,21H16A2,2%200%200,0%2018,19V7H6V19Z'%20/%3e%3c/svg%3e",Kde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2zm0%204l-8%205-8-5V6l8%205%208-5v2z'%20fill='currentColor'/%3e%3c/svg%3e",jde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%2013C19.34%2013%2019.67%2013.04%2020%2013.09V8L14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.3%2021.12%2013%2020.1%2013%2019C13%2015.69%2015.69%2013%2019%2013M13%203.5L18.5%209H13V3.5M23.5%2020L21%2023L18.5%2020H20V16H22V20H23.5M19.5%2018H18V22H16V18H14.5L17%2015L19.5%2018Z'%20/%3e%3c/svg%3e",qde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,8H10V6H14V8M20,4V20C20,21.11%2019.11,22%2018,22H6C4.89,22%204,21.11%204,20V4A2,2%200%200,1%206,2H18C19.11,2%2020,2.9%2020,4M18,13H6V20H18V13M18,4H6V11H18V4M14,15H10V17H14V15Z'%20/%3e%3c/svg%3e",Yde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M8,12H16V14H8V12M10,20H6V4H13V9H18V12.1L20,10.1V8L14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H10V20M8,18H12.1L13,17.1V16H8V18M20.2,13C20.3,13%2020.5,13.1%2020.6,13.2L21.9,14.5C22.1,14.7%2022.1,15.1%2021.9,15.3L20.9,16.3L18.8,14.2L19.8,13.2C19.9,13.1%2020,13%2020.2,13M20.2,16.9L14.1,23H12V20.9L18.1,14.8L20.2,16.9Z'%20/%3e%3c/svg%3e",Xde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.28%2021.09%2013%2020.05%2013%2019C13%2018.67%2013.03%2018.33%2013.08%2018H6V16H13.81C14.27%2015.2%2014.91%2014.5%2015.68%2014H6V12H18V13.08C18.33%2013.03%2018.67%2013%2019%2013S19.67%2013.03%2020%2013.08V8L14%202M13%209V3.5L18.5%209H13M18%2015V18H15V20H18V23H20V20H23V18H20V15H18Z'%20/%3e%3c/svg%3e",Jde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H18A2,2%200%200,0%2020,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z'%20/%3e%3c/svg%3e",Zde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6.1,10L4,18V8H21A2,2%200%200,0%2019,6H12L10,4H4A2,2%200%200,0%202,6V18A2,2%200%200,0%204,20H19C19.9,20%2020.7,19.4%2020.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z'%20/%3e%3c/svg%3e",efe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z'%20/%3e%3c/svg%3e",tfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z'%20/%3e%3c/svg%3e",nfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z'%20/%3e%3c/svg%3e",afe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5%206C3.9%206%203%206.9%203%208S3.9%2010%205%2010%207%209.11%207%208%206.11%206%205%206M12%204C10.9%204%2010%204.89%2010%206S10.9%208%2012%208%2014%207.11%2014%206%2013.11%204%2012%204M19%202C17.9%202%2017%202.9%2017%204S17.9%206%2019%206%2021%205.11%2021%204%2020.11%202%2019%202M3.5%2011C2.67%2011%202%2011.67%202%2012.5V17H3V22H7V17H8V12.5C8%2011.67%207.33%2011%206.5%2011H3.5M10.5%209C9.67%209%209%209.67%209%2010.5V15H10V20H14V15H15V10.5C15%209.67%2014.33%209%2013.5%209H10.5M17.5%207C16.67%207%2016%207.67%2016%208.5V13H17V18H21V13H22V8.5C22%207.67%2021.33%207%2020.5%207H17.5Z'%20/%3e%3c/svg%3e",rfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21,17H7V3H21M21,1H7A2,2%200%200,0%205,3V17A2,2%200%200,0%207,19H21A2,2%200%200,0%2023,17V3A2,2%200%200,0%2021,1M3,5H1V21A2,2%200%200,0%203,23H19V21H3M15.96,10.29L13.21,13.83L11.25,11.47L8.5,15H19.5L15.96,10.29Z'%20/%3e%3c/svg%3e",sfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,6H20V16H4M20,18A2,2%200%200,0%2022,16V6C22,4.89%2021.1,4%2020,4H4C2.89,4%202,4.89%202,6V16A2,2%200%200,0%204,18H0V20H24V18H20Z'%20/%3e%3c/svg%3e",ofe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%203H5C3.9%203%203%203.9%203%205V19C3%2020.1%203.9%2021%205%2021H19C20.1%2021%2021%2020.1%2021%2019V5C21%203.9%2020.1%203%2019%203M7%207H9V9H7V7M7%2011H9V13H7V11M7%2015H9V17H7V15M17%2017H11V15H17V17M17%2013H11V11H17V13M17%209H11V7H17V9Z'%20/%3e%3c/svg%3e",ife="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17%207L15.59%208.41L18.17%2011H8V13H18.17L15.59%2015.58L17%2017L22%2012M4%205H12V3H4C2.9%203%202%203.9%202%205V19C2%2020.1%202.9%2021%204%2021H12V19H4V5Z'%20/%3e%3c/svg%3e",lfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M5,8V10H13V8H5Z'%20/%3e%3c/svg%3e",ufe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M8,5V8H5V10H8V13H10V10H13V8H10V5H8Z'%20/%3e%3c/svg%3e",cfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9.5,3A6.5,6.5%200%200,1%2016,9.5C16,11.11%2015.41,12.59%2014.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41%2011.11,16%209.5,16A6.5,6.5%200%200,1%203,9.5A6.5,6.5%200%200,1%209.5,3M9.5,5C7,5%205,7%205,9.5C5,12%207,14%209.5,14C12,14%2014,12%2014,9.5C14,7%2012,5%209.5,5Z'%20/%3e%3c/svg%3e",dfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z'%20/%3e%3c/svg%3e",ffe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,11C19,12.19%2018.66,13.3%2018.1,14.28L16.87,13.05C17.14,12.43%2017.3,11.74%2017.3,11H19M15,11.16L9,5.18V5A3,3%200%200,1%2012,2A3,3%200%200,1%2015,5V11L15,11.16M4.27,3L21,19.73L19.73,21L15.54,16.81C14.77,17.27%2013.91,17.58%2013,17.72V21H11V17.72C7.72,17.23%205,14.41%205,11H6.7C6.7,14%209.24,16.1%2012,16.1C12.81,16.1%2013.6,15.91%2014.31,15.58L12.65,13.92L12,14A3,3%200%200,1%209,11V10.28L3,4.27L4.27,3Z'%20/%3e%3c/svg%3e",Afe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,2A3,3%200%200,1%2015,5V11A3,3%200%200,1%2012,14A3,3%200%200,1%209,11V5A3,3%200%200,1%2012,2M19,11C19,14.53%2016.39,17.44%2013,17.93V21H11V17.93C7.61,17.44%205,14.53%205,11H7A5,5%200%200,0%2012,16A5,5%200%200,0%2017,11H19Z'%20/%3e%3c/svg%3e",mfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M11.15,15.18L9.73,13.77L11.15,12.35L12.56,13.77L13.97,12.35L12.56,10.94L13.97,9.53L15.39,10.94L16.8,9.53L13.97,6.7L6.9,13.77L9.73,16.6L11.15,15.18M3.08,19L6.2,15.89L4.08,13.77L13.97,3.87L16.1,6L17.5,4.58L16.1,3.16L17.5,1.75L21.75,6L20.34,7.4L18.92,6L17.5,7.4L19.63,9.53L9.73,19.42L7.61,17.3L3.08,21.84V19Z'%20/%3e%3c/svg%3e",vfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20.71,7.04C21.1,6.65%2021.1,6%2020.71,5.63L18.37,3.29C18,2.9%2017.35,2.9%2016.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z'%20/%3e%3c/svg%3e",hfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z'%20/%3e%3c/svg%3e",pfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,4V10L4,14H6V10H8L13.41,15.41L9.83,19L11.24,20.41L14.83,16.83L18.41,20.41L19.82,19L16.24,15.41L19.82,11.83L18.41,10.41L14.83,14L10.83,10H11A3,3%200%200,0%2014,7A3,3%200%200,0%2011,4H4M6,6H11A1,1%200%200,1%2012,7A1,1%200%200,1%2011,8H6V6Z'%20/%3e%3c/svg%3e",gfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M18,3H6V7H18M19,12A1,1%200%200,1%2018,11A1,1%200%200,1%2019,10A1,1%200%200,1%2020,11A1,1%200%200,1%2019,12M16,19H8V14H16M19,8H5A3,3%200%200,0%202,11V17H6V21H18V17H22V11A3,3%200%200,0%2019,8Z'%20/%3e%3c/svg%3e",yfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.65,6.35C16.2,4.9%2014.21,4%2012,4A8,8%200%200,0%204,12A8,8%200%200,0%2012,20C15.73,20%2018.84,17.45%2019.73,14H17.65C16.83,16.33%2014.61,18%2012,18A6,6%200%200,1%206,12A6,6%200%200,1%2012,6C13.66,6%2015.14,6.69%2016.22,7.78L13,11H20V4L17.65,6.35Z'%20/%3e%3c/svg%3e",_fe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,1H20A1,1%200%200,1%2021,2V6A1,1%200%200,1%2020,7H4A1,1%200%200,1%203,6V2A1,1%200%200,1%204,1M4,9H20A1,1%200%200,1%2021,10V14A1,1%200%200,1%2020,15H4A1,1%200%200,1%203,14V10A1,1%200%200,1%204,9M4,17H20A1,1%200%200,1%2021,18V22A1,1%200%200,1%2020,23H4A1,1%200%200,1%203,22V18A1,1%200%200,1%204,17M9,5H10V3H9V5M9,13H10V11H9V13M9,21H10V19H9V21M5,3V5H7V3H5M5,11V13H7V11H5M5,19V21H7V19H5Z'%20/%3e%3c/svg%3e",wfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M18,16.08C17.24,16.08%2016.56,16.38%2016.04,16.85L8.91,12.7C8.96,12.47%209,12.24%209,12C9,11.76%208.96,11.53%208.91,11.3L15.96,7.19C16.5,7.69%2017.21,8%2018,8A3,3%200%200,0%2021,5A3,3%200%200,0%2018,2A3,3%200%200,0%2015,5C15,5.24%2015.04,5.47%2015.09,5.7L8.04,9.81C7.5,9.31%206.79,9%206,9A3,3%200%200,0%203,12A3,3%200%200,0%206,15C6.79,15%207.5,14.69%208.04,14.19L15.16,18.34C15.11,18.55%2015.08,18.77%2015.08,19C15.08,20.61%2016.39,21.91%2018,21.91C19.61,21.91%2020.92,20.61%2020.92,19A2.92,2.92%200%200,0%2018,16.08Z'%20/%3e%3c/svg%3e",bfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z'%20/%3e%3c/svg%3e",xfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,10.5V7A1,1%200%200,0%2016,6H4A1,1%200%200,0%203,7V17A1,1%200%200,0%204,18H16A1,1%200%200,0%2017,17V13.5L21,17.5V6.5L17,10.5M14,13H11V16H9V13H6V11H9V8H11V11H14V13Z'%20/%3e%3c/svg%3e",Cfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6,19A5,5%200%200,1%201,14A5,5%200%200,1%206,9C7,6.65%209.3,5%2012,5C15.43,5%2018.24,7.66%2018.5,11.03L19,11A4,4%200%200,1%2023,15A4,4%200%200,1%2019,19H6M19,13H17V12A5,5%200%200,0%2012,7C9.5,7%207.45,8.82%207.06,11.19C6.73,11.07%206.37,11%206,11A3,3%200%200,0%203,14A3,3%200%200,0%206,17H19A2,2%200%200,0%2021,15A2,2%200%200,0%2019,13Z'%20/%3e%3c/svg%3e",Sfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16.36,14C16.44,13.34%2016.5,12.68%2016.5,12C16.5,11.32%2016.44,10.66%2016.36,10H19.74C19.9,10.64%2020,11.31%2020,12C20,12.69%2019.9,13.36%2019.74,14M14.59,19.56C15.19,18.45%2015.65,17.25%2015.97,16H18.92C17.96,17.65%2016.43,18.93%2014.59,19.56M14.34,14H9.66C9.56,13.34%209.5,12.68%209.5,12C9.5,11.32%209.56,10.65%209.66,10H14.34C14.43,10.65%2014.5,11.32%2014.5,12C14.5,12.68%2014.43,13.34%2014.34,14M12,19.96C11.17,18.76%2010.5,17.43%2010.09,16H13.91C13.5,17.43%2012.83,18.76%2012,19.96M8,8H5.08C6.03,6.34%207.57,5.06%209.4,4.44C8.8,5.55%208.35,6.75%208,8M5.08,16H8C8.35,17.25%208.8,18.45%209.4,19.56C7.57,18.93%206.03,17.65%205.08,16M4.26,14C4.1,13.36%204,12.69%204,12C4,11.31%204.1,10.64%204.26,10H7.64C7.56,10.66%207.5,11.32%207.5,12C7.5,12.68%207.56,13.34%207.64,14M12,4.03C12.83,5.23%2013.5,6.57%2013.91,8H10.09C10.5,6.57%2011.17,5.23%2012,4.03M18.92,8H15.97C15.65,6.75%2015.19,5.55%2014.59,4.44C16.43,5.07%2017.96,6.34%2018.92,8M12,2C6.47,2%202,6.5%202,12A10,10%200%200,0%2012,22A10,10%200%200,0%2022,12A10,10%200%200,0%2012,2Z'%20/%3e%3c/svg%3e",Efe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12.04%202C6.58%202%202.13%206.45%202.13%2011.91C2.13%2013.66%202.59%2015.36%203.45%2016.86L2.05%2022L7.3%2020.62C8.75%2021.41%2010.38%2021.83%2012.04%2021.83C17.5%2021.83%2021.95%2017.38%2021.95%2011.92C21.95%209.27%2020.92%206.78%2019.05%204.91C17.18%203.03%2014.69%202%2012.04%202M12.05%203.67C14.25%203.67%2016.31%204.53%2017.87%206.09C19.42%207.65%2020.28%209.72%2020.28%2011.92C20.28%2016.46%2016.58%2020.15%2012.04%2020.15C10.56%2020.15%209.11%2019.76%207.85%2019L7.55%2018.83L4.43%2019.65L5.26%2016.61L5.06%2016.29C4.24%2015%203.8%2013.47%203.8%2011.91C3.81%207.37%207.5%203.67%2012.05%203.67M8.53%207.33C8.37%207.33%208.1%207.39%207.87%207.64C7.65%207.89%207%208.5%207%209.71C7%2010.93%207.89%2012.1%208%2012.27C8.14%2012.44%209.76%2014.94%2012.25%2016C12.84%2016.27%2013.3%2016.42%2013.66%2016.53C14.25%2016.72%2014.79%2016.69%2015.22%2016.63C15.7%2016.56%2016.68%2016.03%2016.89%2015.45C17.1%2014.87%2017.1%2014.38%2017.04%2014.27C16.97%2014.17%2016.81%2014.11%2016.56%2014C16.31%2013.86%2015.09%2013.26%2014.87%2013.18C14.64%2013.1%2014.5%2013.06%2014.31%2013.3C14.15%2013.55%2013.67%2014.11%2013.53%2014.27C13.38%2014.44%2013.24%2014.46%2013%2014.34C12.74%2014.21%2011.94%2013.95%2011%2013.11C10.26%2012.45%209.77%2011.64%209.62%2011.39C9.5%2011.15%209.61%2011%209.73%2010.89C9.84%2010.78%2010%2010.6%2010.1%2010.45C10.23%2010.31%2010.27%2010.2%2010.35%2010.04C10.43%209.87%2010.39%209.73%2010.33%209.61C10.27%209.5%209.77%208.26%209.56%207.77C9.36%207.29%209.16%207.35%209%207.34C8.86%207.34%208.7%207.33%208.53%207.33Z'%20/%3e%3c/svg%3e",kfe="6.0.8",xM={version:kfe},Bfe=""+new URL("images/nav_drawer_banner-B2zCGthx.png",import.meta.url).href,oE=""+new URL("images/logo-Du9HqkeA.png",import.meta.url).href,Go=R(localStorage.getItem("desktopSessionToken")||null),Yl=R(JSON.parse(localStorage.getItem("desktopPermissions")||"[]")),Xl=R(localStorage.getItem("desktopIsAdmin")==="true"),yA=R(localStorage.getItem("desktopUserName")||null),_A=R(localStorage.getItem("desktopUserId")?parseInt(localStorage.getItem("desktopUserId")):null),wA=R(JSON.parse(localStorage.getItem("desktopFeatures")||"[]")),bA=R(localStorage.getItem("googleVerified")==="true"),$0=R(localStorage.getItem("googleUserId")?parseInt(localStorage.getItem("googleUserId")):null),e2=R(localStorage.getItem("googleUserName")||null),Tfe=ee(()=>!!Go.value);ee(()=>bA.value);const Ife=ee(()=>bA.value?Go.value?"complete":"passcode":"google"),xA=R(!1),Kv=R(null);Ge([Go,Yl,Xl,yA,_A,wA,bA,$0,e2],()=>{Go.value?(localStorage.setItem("desktopSessionToken",Go.value),localStorage.setItem("desktopPermissions",JSON.stringify(Yl.value)),localStorage.setItem("desktopIsAdmin",Xl.value.toString()),localStorage.setItem("desktopUserName",yA.value||""),localStorage.setItem("desktopUserId",_A.value?.toString()||""),localStorage.setItem("desktopFeatures",JSON.stringify(wA.value))):(localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures")),bA.value?(localStorage.setItem("googleVerified","true"),localStorage.setItem("googleUserId",$0.value?.toString()||""),localStorage.setItem("googleUserName",e2.value||"")):(localStorage.removeItem("googleVerified"),localStorage.removeItem("googleUserId"),localStorage.removeItem("googleUserName"))},{deep:!0});let O3=!1;function t2(e=it){O3||(O3=!0,e.interceptors.request.use(t=>(Go.value&&(t.headers["x-session-token"]=Go.value),t),t=>Promise.reject(t)),e.interceptors.response.use(t=>t,t=>{if(t.response?.status===419){console.warn("Desktop session invalidated - permissions may have been updated");const n=t.response?.data?.message||"Your permissions have been updated. Please log in again.";alert(n),jv()}return Promise.reject(t)}))}async function Ffe(e){xA.value=!0,Kv.value=null;try{const t=await e.dispatch("auth/signInWithGoogle"),n=e.getters["auth/currentUser"];if(!n||!n.email)throw new Error("Google sign-in succeeded but no email returned");return{success:!0,email:n.email,displayName:n.displayName,isFirstTime:t}}catch(t){throw Kv.value=t.message||"Google sign-in failed",t}finally{xA.value=!1}}async function Pfe(e,t=null){xA.value=!0,Kv.value=null;const n=t||$0.value;try{const a=await it.post("/desktop/auth/login",{passcode:e,userId:n});if(a.data.success)return Go.value=a.data.sessionToken,Yl.value=a.data.permissions||[],Xl.value=a.data.isAdmin||!1,yA.value=a.data.userName||null,_A.value=a.data.userId||null,wA.value=a.data.features||[],{success:!0,isAdmin:a.data.isAdmin,userName:a.data.userName,permissions:a.data.permissions};throw new Error(a.data.error||"Login failed")}catch(a){throw Kv.value=a.response?.data?.error||a.message||"Login failed",a}finally{xA.value=!1}}async function Dfe(){if(!Go.value)return{valid:!1};xA.value=!0;try{const e=await it.get("/desktop/auth/session",{headers:{"x-session-token":Go.value}});return e.data.valid?(Yl.value=e.data.permissions||[],Xl.value=e.data.isAdmin||!1,yA.value=e.data.userName||null,_A.value=e.data.userId||null,wA.value=e.data.features||[],{valid:!0,...e.data}):(jv(),{valid:!1})}catch(e){return e.response?.status===401&&jv(),{valid:!1,error:e.message}}finally{xA.value=!1}}async function Ufe(e,t=!0){try{Go.value&&await it.post("/desktop/auth/logout",{},{headers:{"x-session-token":Go.value}})}catch(n){console.error("Desktop logout error:",n)}finally{if(jv(),tT(),t&&e)try{await e.dispatch("auth/signOut")}catch(n){console.error("Google sign-out error:",n)}}}function jv(){Go.value=null,Yl.value=[],Xl.value=!1,yA.value=null,_A.value=null,wA.value=[],Kv.value=null}function tT(){bA.value=!1,$0.value=null,e2.value=null}function Rfe(){jv(),tT()}function Nfe(e){Go.value=e.sessionToken,Yl.value=e.permissions||[],Xl.value=e.isAdmin||!1,yA.value=e.userName||null,_A.value=e.userId||null,wA.value=e.features||[],e.googleVerified!==void 0&&(bA.value=e.googleVerified)}function H3(e){return Xl.value?!0:Yl.value.includes(e)}function $3(e){return Xl.value?!0:e.some(t=>Yl.value.includes(t))}function Q3(e){return Xl.value?!0:e.every(t=>Yl.value.includes(t))}function G3(e){if(Xl.value)return!0;const t=`${e}.`;return Yl.value.some(n=>!n||typeof n!="string"?!1:n===e?!0:n.startsWith(t))}function ph(){const e=Ln(),t=ee(()=>e?.getters["auth/currentUser"]),n=ee(()=>e?.getters["auth/isLoading"]),a=ee(()=>e?.getters["auth/redirectInProgress"]),r=ee(()=>e?.getters["auth/isAuthenticated"]);return t2(),{sessionToken:ee(()=>Go.value),permissions:ee(()=>Yl.value),isAdmin:ee(()=>Xl.value),userName:ee(()=>yA.value),userId:ee(()=>_A.value),features:ee(()=>wA.value),isAuthenticated:Tfe,googleUser:t,googleLoading:n,googleRedirectInProgress:a,isGoogleSignedIn:r,isGoogleVerified:ee(()=>bA.value),googleVerifiedUserId:ee(()=>$0.value),googleVerifiedUserName:ee(()=>e2.value),authStep:Ife,sessionLoading:ee(()=>xA.value),sessionError:ee(()=>Kv.value),signInWithGoogle:()=>Ffe(e),loginWithPasscode:(s,o)=>Pfe(s,o),verifyDesktopSession:()=>Dfe(),logoutDesktop:(s=!0)=>Ufe(e,s),clearDesktopSession:jv,clearGoogleVerification:tT,resetAllAuthState:Rfe,setDesktopSession:Nfe,hasPermission:s=>ee(()=>H3(s)),hasAnyPermission:s=>ee(()=>$3(s)),hasAllPermissions:s=>ee(()=>Q3(s)),hasFeatureAccess:s=>ee(()=>G3(s)),checkPermission:H3,checkAnyPermission:$3,checkAllPermissions:Q3,checkFeatureAccess:G3,setupDesktopSessionInterceptors:t2,store:e}}function gh(){const e=Oa(),t=e?ph():null,n=e?null:KA(),a=ee(()=>e&&t?t.permissions.value||[]:!e&&n?n.permissions.value||[]:[]),r=ee(()=>e&&t?t.isAdmin.value||!1:!e&&n&&n.isAdmin.value||!1),s=ee(()=>e&&t?t.features.value||[]:!e&&n?n.features.value||[]:[]),o=g=>ee(()=>r.value?!0:a.value.includes(g)),l=g=>ee(()=>r.value||!g||g.length===0?!0:g.some(_=>a.value.includes(_))),c=g=>ee(()=>r.value||!g||g.length===0?!0:g.every(_=>a.value.includes(_))),f=g=>ee(()=>{if(!g)return!1;const _=s.value.find(S=>S&&S.id===g);return _&&_.adminOnly?r.value:r.value?!0:!a.value||!Array.isArray(a.value)?!1:a.value.some(S=>!S||typeof S!="string"?!1:S===g?!0:S.startsWith(`${g}.`))}),d=ee(()=>{if(r.value)return s.value.map(_=>_.id);const g=new Set;return a.value.forEach(_=>{const[b]=_.split(".");g.add(b)}),Array.from(g)});return{permissions:a,isAdmin:r,features:s,accessibleFeatures:d,hasPermission:o,hasAnyPermission:l,hasAllPermissions:c,hasFeatureAccess:f,getFeatureActions:g=>ee(()=>{if(r.value){const _=s.value.find(b=>b.id===g);return _?_.actions.map(b=>b.action):[]}return a.value.filter(_=>_.startsWith(`${g}.`)).map(_=>_.split(".")[1])}),canPerformAction:(g,_)=>ee(()=>r.value?!0:a.value.includes(`${g}.${_}`)),checkPermission:g=>r.value?!0:a.value.includes(g),checkAnyPermission:g=>r.value||!g||g.length===0?!0:g.some(_=>a.value.includes(_)),checkFeatureAccess:g=>{if(!a.value||!Array.isArray(a.value))return!1;const _=s.value.find(S=>S&&S.id===g);return _&&_.adminOnly?r.value:r.value?!0:a.value.some(S=>!S||typeof S!="string"?!1:S===g?!0:S.startsWith(`${g}.`))}}}const en=(e,t)=>{const n=e.__vccOpts||e;for(const[a,r]of t)n[a]=r;return n},Vfe={class:"nav-icon-container"},Lfe=["src"],Mfe={class:"nav-icon-container"},Ofe=["src"],Hfe={class:"nav-footer"},$fe={class:"version-display"},Qfe={__name:"side-nav",props:{collapsed:{type:Boolean,default:!1}},setup(e){const n=MA(e).collapsed,a=xM.version,{isAdmin:r,permissions:s,features:o}=gh(),l=Oa(),c=l?ph():null,f=l?null:KA();Ge([s,r],([h,y])=>{},{immediate:!0,deep:!0}),An(async()=>{if(l&&c&&c.sessionToken.value)try{await c.verifyDesktopSession(),console.log("[SideNav] Desktop session verified, permissions updated")}catch(h){console.error("[SideNav] Failed to verify desktop session:",h)}else if(!l&&f&&f.sessionToken.value)try{await f.verifySession(),console.log("[SideNav] Web session verified, permissions updated")}catch(h){console.error("[SideNav] Failed to verify web session:",h)}});const d=[{type:"divider"},{type:"subheader",title:"Clinic"},{title:"Home",value:1,icon:"custom-home",route:"/home",feature:"home"},{title:"Patients",value:2,icon:"custom-account-multiple",route:"/patients",feature:"patients"},{title:"Tasks",value:6,icon:"custom-list-box",route:"/tasks",feature:"tasks"},{title:"Research",value:5,icon:"custom-book-open-page-variant",route:"/research",feature:"research"},{title:"Reports",value:8,icon:"mdi-chart-line",route:"/reports",feature:"reports"},{type:"divider"},{type:"subheader",title:"Finances"},{title:"Payments",value:7,icon:"mdi-currency-inr",route:"/payments",feature:"billing"},{type:"divider"},{type:"subheader",title:"Pharmacy"},{title:"Queue",value:9,icon:"mdi-pill",route:"/pharmacy/queue",feature:"pharmacy.queue"},{title:"Inventory",value:10,icon:"mdi-package-variant",route:"/pharmacy/inventory",feature:"pharmacy.inventory"},{title:"Purchase",value:12,icon:"mdi-cart",route:"/pharmacy/purchase",feature:"pharmacy.purchase"},{title:"Reports",value:11,icon:"mdi-chart-line",route:"/pharmacy/reports",feature:"pharmacy.reports"},{type:"divider"},{type:"subheader",title:"Setup"},{title:"Admin",value:3,icon:"custom-account-cog",route:"/admin",requiresAdmin:!0},{title:"Data",value:4,icon:"custom-file-arrow-up-down",route:"/data",feature:"data"}],A=ee(()=>{const h=s.value||[],y=r.value,g=o.value||[],_=()=>y?!0:!h||!Array.isArray(h)?!1:h.some(E=>E&&typeof E=="string"&&E.startsWith("admin.")),b=E=>{const x=g.find(D=>D&&D.id===E);return x&&x.adminOnly?y:y?!0:!h||!Array.isArray(h)?!1:h.some(D=>!D||typeof D!="string"?!1:D===E?!0:D.startsWith(`${E}.`))},S=E=>E.type==="divider"||E.type==="subheader"?!1:E.requiresAdmin?E.route==="/admin"?_():y:E.permission?y?!0:h.includes(E.permission):E.feature?b(E.feature):!0,B=[];let F={divider:null,subheader:null,items:[]};for(let E=0;E<d.length;E++){const x=d[E];x.type==="divider"?(F.items.some(S)&&(F.divider&&B.push(F.divider),F.subheader&&B.push(F.subheader),F.items.forEach(D=>{S(D)&&B.push(D)})),F={divider:x,subheader:null,items:[]}):x.type==="subheader"?F.subheader=x:F.items.push(x)}return F.items.some(S)&&(F.divider&&B.push(F.divider),F.subheader&&B.push(F.subheader),F.items.forEach(E=>{S(E)&&B.push(E)})),B}),m=h=>{console.log("Navigation item clicked:",h.title);const y=event.currentTarget;y&&(y.classList.add("nav-ripple"),setTimeout(()=>{y.classList.remove("nav-ripple")},600))},p=h=>{const y=h.replace("custom-","");try{return new URL(Object.assign({"../assets/icons/account-cancel.svg":Ede,"../assets/icons/account-check.svg":kde,"../assets/icons/account-clock.svg":Bde,"../assets/icons/account-cog.svg":Tde,"../assets/icons/account-multiple.svg":Ide,"../assets/icons/account.svg":Fde,"../assets/icons/bell-alert.svg":Pde,"../assets/icons/bell-check.svg":Dde,"../assets/icons/book-open-page-variant.svg":Ude,"../assets/icons/calculator-variant.svg":Rde,"../assets/icons/cellphone.svg":Nde,"../assets/icons/chart-line-variant.svg":Vde,"../assets/icons/chevron-left-circle.svg":Lde,"../assets/icons/chevron-right-circle.svg":Mde,"../assets/icons/clipboard-pulse.svg":Ode,"../assets/icons/clipboard-text-outline.svg":Hde,"../assets/icons/close-thick.svg":$de,"../assets/icons/close.svg":Qde,"../assets/icons/cloud-arrow-down.svg":Gde,"../assets/icons/content-copy.svg":zde,"../assets/icons/delete.svg":Wde,"../assets/icons/email.svg":Kde,"../assets/icons/file-arrow-up-down.svg":jde,"../assets/icons/file-cabinet.svg":qde,"../assets/icons/file-document-edit-outline.svg":Yde,"../assets/icons/file-document-plus.svg":Xde,"../assets/icons/file-upload.svg":Jde,"../assets/icons/folder-open-outline.svg":Zde,"../assets/icons/fullscreen-exit.svg":efe,"../assets/icons/fullscreen.svg":tfe,"../assets/icons/home.svg":nfe,"../assets/icons/human-queue.svg":afe,"../assets/icons/image-multiple-outline.svg":rfe,"../assets/icons/laptop.svg":sfe,"../assets/icons/list-box.svg":ofe,"../assets/icons/logout.svg":ife,"../assets/icons/magnify-minus.svg":lfe,"../assets/icons/magnify-plus.svg":ufe,"../assets/icons/magnify.svg":cfe,"../assets/icons/menu.svg":dfe,"../assets/icons/microphone-off.svg":ffe,"../assets/icons/microphone.svg":Afe,"../assets/icons/needle.svg":mfe,"../assets/icons/pencil.svg":vfe,"../assets/icons/plus.svg":hfe,"../assets/icons/prescription.svg":pfe,"../assets/icons/printer.svg":gfe,"../assets/icons/refresh.svg":yfe,"../assets/icons/server.svg":_fe,"../assets/icons/share-variant.svg":wfe,"../assets/icons/upload.svg":bfe,"../assets/icons/video-plus.svg":xfe,"../assets/icons/weather-cloudy.svg":Cfe,"../assets/icons/web.svg":Sfe,"../assets/icons/whatsapp.svg":Efe})[`../assets/icons/${y}.svg`],import.meta.url).href}catch(g){return console.warn(`Failed to load icon: ${y}.svg`,g),""}};return(h,y)=>{const g=I("v-img"),_=I("v-divider"),b=I("v-list-subheader"),S=I("v-icon"),B=I("v-list-item-title"),F=I("v-list-item"),T=I("v-tooltip"),E=I("v-list"),x=I("v-navigation-drawer");return P(),he(x,{elevation:1,width:150,rail:Oe(n),"rail-width":80,permanent:"",image:Oe(Bfe),app:"",class:"nav-drawer-with-opacity"},Dv({append:u(()=>[v("div",Hfe,[v("div",$fe," v"+K(Oe(a)),1)])]),default:u(()=>[i(E,{density:"compact",nav:"",lines:!1,class:"interactive-nav-list"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(A.value,C=>(P(),Ae(ze,{key:C.value||C.title},[C.type==="divider"?(P(),he(_,{key:0,divider:"",class:"nav-divider"})):ge("",!0),C.type==="subheader"?(P(),he(b,{key:1,class:"nav-subheader"},{default:u(()=>[N(K(C.title),1)]),_:2},1024)):ge("",!0),C.type!=="divider"&&C.type!=="subheader"?(P(),Ae(ze,{key:2},[Oe(n)?(P(),he(T,{key:0,location:"right","open-delay":200},{activator:u(({props:D})=>[i(F,Ie({ref_for:!0},D,{to:C.route,class:"nav-item-interactive",onClick:U=>m(C)}),{prepend:u(()=>[v("div",Vfe,[C.icon.startsWith("custom-")?(P(),he(S,{key:1,size:"large",class:"nav-icon"},{default:u(()=>[v("img",{src:p(C.icon),alt:""},null,8,Lfe)]),_:2},1024)):(P(),he(S,{key:0,size:"large",icon:C.icon,class:"nav-icon"},null,8,["icon"]))])]),default:u(()=>[i(B,{class:"font-weight-bold nav-title"},{default:u(()=>[N(K(C.title),1)]),_:2},1024)]),_:2},1040,["to","onClick"])]),default:u(()=>[v("span",null,K(C.title),1)]),_:2},1024)):(P(),he(F,{key:1,to:C.route,class:"nav-item-interactive",onClick:D=>m(C)},{prepend:u(()=>[v("div",Mfe,[C.icon.startsWith("custom-")?(P(),he(S,{key:1,size:"large",class:"nav-icon"},{default:u(()=>[v("img",{src:p(C.icon),alt:""},null,8,Ofe)]),_:2},1024)):(P(),he(S,{key:0,size:"large",icon:C.icon,class:"nav-icon"},null,8,["icon"]))])]),default:u(()=>[i(B,{class:"font-weight-bold nav-title"},{default:u(()=>[N(K(C.title),1)]),_:2},1024)]),_:2},1032,["to","onClick"]))],64)):ge("",!0)],64))),128))]),_:1})]),_:2},[Oe(n)?{name:"prepend",fn:u(()=>[i(g,{src:Oe(oE),class:"mb-2 mt-4",height:50,contain:""},null,8,["src"])]),key:"1"}:{name:"prepend",fn:u(()=>[i(g,{src:Oe(oE),class:"mb-0 mt-3",height:60,contain:""},null,8,["src"])]),key:"0"}]),1032,["rail","image"])}}},Gfe=en(Qfe,[["__scopeId","data-v-d46dd683"]]),zfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,10.5V7A1,1%200%200,0%2016,6H4A1,1%200%200,0%203,7V17A1,1%200%200,0%204,18H16A1,1%200%200,0%2017,17V13.5L21,17.5V6.5L17,10.5M14,13H11V16H9V13H6V11H9V8H11V11H14V13Z'%20/%3e%3c/svg%3e",Wfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M5,8V10H13V8H5Z'%20/%3e%3c/svg%3e",Kfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M8,5V8H5V10H8V13H10V10H13V8H10V5H8Z'%20/%3e%3c/svg%3e",CM="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z'%20/%3e%3c/svg%3e",SM="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z'%20/%3e%3c/svg%3e",jfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%206.91L17.09%204L12%209.09L6.91%204L4%206.91L9.09%2012L4%2017.09L6.91%2020L12%2014.91L17.09%2020L20%2017.09L14.91%2012L20%206.91Z'%20/%3e%3c/svg%3e",z3="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17%207L15.59%208.41L18.17%2011H8V13H18.17L15.59%2015.58L17%2017L22%2012M4%205H12V3H4C2.9%203%202%203.9%202%205V19C2%2020.1%202.9%2021%204%2021H12V19H4V5Z'%20/%3e%3c/svg%3e";var oy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EM(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rC,W3;function qfe(){if(W3)return rC;W3=1;const e=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);return rC=t=>!e.has(t&&t.code),rC}var Yfe=qfe();const Xfe=EM(Yfe),nT="axios-retry";function kM(e){const t=["ERR_CANCELED","ECONNABORTED"];return e.response||!e.code||t.includes(e.code)?!1:Xfe(e)}const BM=["get","head","options"],Jfe=BM.concat(["put","delete"]);function aT(e){return e.code!=="ECONNABORTED"&&(!e.response||e.response.status===429||e.response.status>=500&&e.response.status<=599)}function Zfe(e){return e.config?.method?aT(e)&&BM.indexOf(e.config.method)!==-1:!1}function TM(e){return e.config?.method?aT(e)&&Jfe.indexOf(e.config.method)!==-1:!1}function IM(e){return kM(e)||TM(e)}function rT(e=void 0){const t=e?.response?.headers["retry-after"];if(!t)return 0;let n=(Number(t)||0)*1e3;return n===0&&(n=(new Date(t).valueOf()||0)-Date.now()),Math.max(0,n)}function eAe(e=0,t=void 0){return Math.max(0,rT(t))}function tAe(e=0,t=void 0,n=100){const a=2**e*n,r=Math.max(a,rT(t)),s=r*.2*Math.random();return r+s}function nAe(e=100){return(t=0,n=void 0)=>{const a=t*e;return Math.max(a,rT(n))}}const aAe={retries:3,retryCondition:IM,retryDelay:eAe,shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function rAe(e,t){return{...aAe,...t,...e[nT]}}function K3(e,t,n=!1){const a=rAe(e,t||{});return a.retryCount=a.retryCount||0,(!a.lastRequestTime||n)&&(a.lastRequestTime=Date.now()),e[nT]=a,a}function sAe(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}async function oAe(e,t){const{retries:n,retryCondition:a}=e,r=(e.retryCount||0)<n&&a(t);if(typeof r=="object")try{return await r!==!1}catch{return!1}return r}async function iAe(e,t,n,a){t.retryCount+=1;const{retryDelay:r,shouldResetTimeout:s,onRetry:o}=t,l=r(t.retryCount,n);if(sAe(e,a),!s&&a.timeout&&t.lastRequestTime){const c=Date.now()-t.lastRequestTime,f=a.timeout-c-l;if(f<=0)return Promise.reject(n);a.timeout=f}return a.transformRequest=[c=>c],await o(t.retryCount,n,a),a.signal?.aborted?Promise.resolve(e(a)):new Promise(c=>{const f=()=>{clearTimeout(d),c(e(a))},d=setTimeout(()=>{c(e(a)),a.signal?.removeEventListener&&a.signal.removeEventListener("abort",f)},l);a.signal?.addEventListener&&a.signal.addEventListener("abort",f,{once:!0})})}async function lAe(e,t){e.retryCount>=e.retries&&await e.onMaxRetryTimesExceeded(t,e.retryCount)}const Hc=(e,t)=>{const n=e.interceptors.request.use(r=>(K3(r,t,!0),r[nT]?.validateResponse&&(r.validateStatus=()=>!1),r)),a=e.interceptors.response.use(null,async r=>{const{config:s}=r;if(!s)return Promise.reject(r);const o=K3(s,t);return r.response&&o.validateResponse?.(r.response)?r.response:await oAe(o,r)?iAe(e,o,r,s):(await lAe(o,r),Promise.reject(r))});return{requestInterceptorId:n,responseInterceptorId:a}};Hc.isNetworkError=kM;Hc.isSafeRequestError=Zfe;Hc.isIdempotentRequestError=TM;Hc.isNetworkOrIdempotentRequestError=IM;Hc.exponentialDelay=tAe;Hc.linearDelay=nAe;Hc.isRetryableError=aT;const FM=Rr.create({timeout:15e3,headers:{"Content-Type":"application/json"}});Hc(FM,{retries:3,retryDelay:e=>{const t=Math.pow(2,e-1)*1e3;return console.log(` Tunnel health check retry ${e}, waiting ${t}ms...`),t},retryCondition:e=>{const t=Hc.isNetworkOrIdempotentRequestError(e)||e.code==="ECONNABORTED"||e.response?.status===404||e.response?.status>=500;return t&&console.log(` Will retry due to: ${e.message||e.response?.status}`),t},onRetry:(e,t,n)=>{console.log(` Tunnel health retry attempt ${e} for ${n.url}`)}});const md=R("checking"),bi=R("checking"),uo=R("checking"),sC=R(!1),bl=R(!1);let Vm=null,Lm=null,Mm=null,Uf=null,Rf=null,fp=null;function PM(){const{showSnackbar:e}=la(),t=async(g=0)=>{if(!Oa())return console.log("[connectionStatus] Web mode: Skipping server health check"),md.value="connected",!0;const _=xo("localhost"),b=[_.health.https,_.health.http];for(const S of b)try{console.log(` Checking server: ${S}`);const B=await fetch(S,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(!B.ok)throw new Error(`HTTP ${B.status}`);const F=await B.json();if(F.success&&F.status==="ok"&&F.database==="connected")return console.log(" Server connected"),md.value="connected",!0}catch(B){if(console.warn(`Server check failed for ${S}:`,B.message),S===b[b.length-1]&&g<3&&B.message.includes("ERR_CONNECTION_REFUSED"))return md.value="checking",await new Promise(F=>setTimeout(F,1e3*Math.pow(2,g))),t(g+1)}return md.value="disconnected",!1},n=async()=>{if(!Oa())return navigator.onLine?(console.log("[connectionStatus] Web mode: Internet status (navigator.onLine):",navigator.onLine),bi.value="connected",!0):(console.log("[connectionStatus] Web mode: Navigator reports offline"),bi.value="disconnected",!1);if(!navigator.onLine)return console.log(" Navigator reports offline"),bi.value="disconnected",!1;try{if((await fetch("https://www.google.com/favicon.ico",{method:"GET",cache:"no-cache",signal:AbortSignal.timeout(3e3)})).ok)return console.log(" Internet connected"),bi.value="connected",!0}catch(g){console.warn(" Internet check failed:",g.message)}return bi.value="disconnected",!1};let a=0;const r=3,s=async()=>{if(!Oa())return console.log("[connectionStatus] Web mode: Skipping remote access health check"),uo.value="connected",!0;if(bl.value)return console.log(" Skipping remote check - reconnecting"),!1;const g=xo("localhost");let _=null,b=!1;try{for(const S of[g.health.https,g.health.http])try{const B=await fetch(S,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)});if(B.ok){const F=await B.json();_=F.ngrok?.tunnelUrl,b=F.ngrok?.isReconnecting||!1;break}}catch{}}catch{}if(!_&&fp&&(_=fp),b)return uo.value="reconnecting",!1;if(!_)return console.log(" No tunnel URL available"),uo.value="disconnected",a=0,!1;try{console.log(" Checking tunnel health:",_);const S=await FM.get(`${_}/health`);if(S.status===200&&S.data?.success)return console.log(" Remote access connected"),fp=_,uo.value="connected",a=0,!0;console.warn(" Tunnel health check returned unexpected response:",S.status,S.data)}catch(S){console.warn(" Tunnel health check failed after retries:",S.message)}return a++,console.log(` Health check failed (${a}/${r} failures)`),a>=r?(uo.value="disconnected",bi.value==="connected"&&!bl.value&&(console.log(` ${r} consecutive failures detected, waiting 5 seconds before auto-reconnect...`),a=0,setTimeout(()=>{!bl.value&&bi.value==="connected"&&(console.log(" Starting auto-reconnect after delay..."),o())},5e3))):console.log(` Possible transient failure (${a}/${r}), will retry on next poll`),!1},o=async()=>{if(!Oa())return console.log("[connectionStatus] Web mode: Skipping auto-reconnect"),!1;if(bl.value)return console.log(" Auto-reconnect already in progress"),!1;if(bi.value!=="connected")return console.log(" No internet - cannot auto-reconnect"),!1;bl.value=!0,uo.value="reconnecting",console.log(" Auto-reconnecting...");try{const g=xo("localhost"),_=g.api?.https||`https://localhost:${g.ports?.https||3443}/api`,b=await fetch(`${_}/ngrok/reconnect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),signal:AbortSignal.timeout(5e4)}),S=await b.json();return b.ok&&S.success?(console.log(" Auto-reconnect successful:",S.data?.ngrokTunnelUrl),fp=S.data?.ngrokTunnelUrl,uo.value="connected",!0):(console.warn(" Auto-reconnect failed:",S.userMessage||S.error),uo.value="disconnected",e({message:S.userMessage||S.error||"Auto-reconnection failed",color:"error",timeout:8e3}),!1)}catch(g){return console.error(" Auto-reconnect error:",g.message),uo.value="disconnected",e({message:"Auto-reconnection failed. Please try manually.",color:"error",timeout:6e3}),!1}finally{bl.value=!1}},l=async()=>{if(!Oa())return console.log("[connectionStatus] Web mode: Skipping manual reconnect"),{success:!1,userMessage:"Reconnection not available in web mode"};if(bl.value)return{success:!1,userMessage:"Reconnection already in progress"};bl.value=!0,uo.value="reconnecting",console.log(" Manual reconnect started");try{const g=xo("localhost"),_=g.api?.https||`https://localhost:${g.ports?.https||3443}/api`,b=await fetch(`${_}/ngrok/reconnect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),signal:AbortSignal.timeout(5e4)}),S=await b.json();return b.ok&&S.success?(console.log(" Manual reconnect successful:",S.data?.ngrokTunnelUrl),fp=S.data?.ngrokTunnelUrl,uo.value="connected",{success:!0,tunnelUrl:S.data?.ngrokTunnelUrl,userMessage:S.message}):(console.warn(" Manual reconnect failed:",S.userMessage||S.error),uo.value="disconnected",{success:!1,error:S.error,userMessage:S.userMessage||"Reconnection failed"})}catch(g){return console.error(" Manual reconnect error:",g.message),uo.value="disconnected",{success:!1,error:g.message,userMessage:"Connection error. Please try again."}}finally{bl.value=!1}},c=()=>{Vm&&clearInterval(Vm),n(),Uf&&window.removeEventListener("online",Uf),Rf&&window.removeEventListener("offline",Rf),Uf=()=>{console.log(" Online event"),n()},Rf=()=>{console.log(" Offline event"),bi.value="disconnected"},window.addEventListener("online",Uf),window.addEventListener("offline",Rf),Vm=setInterval(()=>{navigator.onLine&&bi.value==="disconnected"&&n()},3e4)},f=()=>{Vm&&(clearInterval(Vm),Vm=null),Uf&&(window.removeEventListener("online",Uf),Uf=null),Rf&&(window.removeEventListener("offline",Rf),Rf=null)},d=()=>{if(!Oa()){console.log("[connectionStatus] Web mode: Skipping server monitoring"),md.value="connected";return}Lm&&clearInterval(Lm),t(),Lm=setInterval(()=>{t()},3e4)};return{serverStatus:md,internetStatus:bi,remoteAccessStatus:uo,isChecking:sC,isReconnecting:bl,checkAllConnections:async()=>(sC.value=!0,md.value="checking",bi.value="checking",d(),c(),sC.value=!1,{server:md.value==="connected",internet:bi.value==="connected"}),checkServerConnection:t,checkInternetConnection:n,checkRemoteAccessStatus:s,startInternetMonitoring:c,stopInternetMonitoring:f,startServerMonitoring:d,stopServerMonitoring:()=>{Lm&&(clearInterval(Lm),Lm=null)},startRemoteAccessMonitoring:()=>{if(!Oa()){console.log("[connectionStatus] Web mode: Skipping remote access monitoring"),uo.value="connected";return}Mm&&clearTimeout(Mm),uo.value="checking",s();const g=()=>{const _=bl.value?5e3:15e3;Mm=setTimeout(async()=>{await s(),g()},_)};g()},stopRemoteAccessMonitoring:()=>{Mm&&(clearTimeout(Mm),Mm=null)},attemptAutoReconnect:o,manualReconnect:l,getNetworkDetails:()=>{try{return{platform:window.process?.type==="renderer"?"electron":"browser",navigator_online:navigator.onLine,connection_type:navigator.connection?.effectiveType||"unknown",user_agent:navigator.userAgent}}catch(g){return{error:g.message}}}}}const uAe={class:"d-flex align-center gap-2"},cAe={class:"chip-text"},dAe={class:"chip-text"},fAe={class:"chip-text"},AAe={__name:"SelectorExtension",setup(e){const t=Ln(),n=ee(()=>t.state.doctorModule.doctors),a=ee(()=>t.state.clinicModule.clinics),r=ee(()=>t.state.pharmacyModule.pharmacies),s=R(null),o=R(null),l=R(null),c=async()=>{await t.dispatch("doctorModule/fetchDoctors"),s.value=n.value.find(h=>h.id===t.state.doctorModule.doctorId)||null},f=async()=>{await t.dispatch("clinicModule/fetchClinics"),o.value=a.value.find(h=>h.id===t.state.clinicModule.clinicId)||null},d=async()=>{await t.dispatch("pharmacyModule/fetchPharmacies"),l.value=r.value.find(h=>h.id===t.state.pharmacyModule.pharmacyId)||null};tu(async()=>{t.state.pharmacyModule.initialized||await t.dispatch("pharmacyModule/initializePharmacies"),await c(),await f(),await d()}),An(()=>{window.addEventListener("doctor-list-updated",c),window.addEventListener("clinic-list-updated",f),window.addEventListener("pharmacy-list-updated",d)}),Ri(()=>{window.removeEventListener("doctor-list-updated",c),window.removeEventListener("clinic-list-updated",f),window.removeEventListener("pharmacy-list-updated",d)});const A=h=>{s.value=h,t.commit("doctorModule/setDoctorId",h.id),console.log("Selected doctor:",h.doctorName),window.dispatchEvent(new CustomEvent("doctor-selection-changed",{detail:{doctorId:h.id,doctorName:h.doctorName}}))},m=h=>{o.value=h,t.commit("clinicModule/setClinicId",h.id),console.log("Selected clinic:",h.clinicName),window.dispatchEvent(new CustomEvent("clinic-selection-changed",{detail:{clinicId:h.id,clinicName:h.clinicName}}))},p=h=>{l.value=h,t.commit("pharmacyModule/setPharmacyId",h.id),console.log("Selected pharmacy:",h.pharmacyName),window.dispatchEvent(new CustomEvent("pharmacy-selection-changed",{detail:{pharmacyId:h.id,pharmacyName:h.pharmacyName}}))};return Ge(()=>t.state.doctorModule.doctorId,h=>{s.value=n.value.find(y=>y.id===h)||null}),Ge(()=>t.state.clinicModule.clinicId,h=>{o.value=a.value.find(y=>y.id===h)||null}),Ge(()=>t.state.pharmacyModule.pharmacyId,h=>{l.value=r.value.find(y=>y.id===h)||null}),Ge(n,h=>{h&&h.length>0&&(s.value=h.find(y=>y.id===t.state.doctorModule.doctorId)||null)},{deep:!0}),Ge(a,h=>{h&&h.length>0&&(o.value=h.find(y=>y.id===t.state.clinicModule.clinicId)||null)},{deep:!0}),Ge(r,h=>{h&&h.length>0&&(l.value=h.find(y=>y.id===t.state.pharmacyModule.pharmacyId)||null)},{deep:!0}),(h,y)=>{const g=I("v-icon"),_=I("v-chip"),b=I("v-list-item-title"),S=I("v-list-item-subtitle"),B=I("v-list-item"),F=I("v-list"),T=I("v-menu");return P(),Ae("div",uAe,[i(T,{"offset-y":""},{activator:u(({props:E})=>[i(_,Ie(E,{variant:"outlined",size:"small",class:"selector-chip doctor-chip","prepend-icon":"mdi-stethoscope",color:s.value?"primary":"surface"}),{append:u(()=>[i(g,{size:"small"},{default:u(()=>[...y[0]||(y[0]=[N("mdi-chevron-down",-1)])]),_:1})]),default:u(()=>[v("span",cAe,K(s.value?s.value.doctorName:"Select Doctor"),1)]),_:1},16,["color"])]),default:u(()=>[i(F,{density:"compact","max-width":"300"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(n.value,E=>(P(),he(B,{key:E.id,onClick:x=>A(E),class:lt({"bg-primary":s.value&&E.id===s.value.id})},{prepend:u(()=>[i(g,{size:"small"},{default:u(()=>[...y[1]||(y[1]=[N("mdi-stethoscope",-1)])]),_:1})]),default:u(()=>[i(b,null,{default:u(()=>[N(K(E.doctorName),1)]),_:2},1024),i(S,null,{default:u(()=>[N(K(E.doctorSpecialization),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1}),i(T,{"offset-y":""},{activator:u(({props:E})=>[i(_,Ie(E,{variant:"outlined",size:"small",class:"selector-chip clinic-chip","prepend-icon":"mdi-hospital-marker",color:o.value?"primary":"surface"}),{append:u(()=>[i(g,{size:"small"},{default:u(()=>[...y[2]||(y[2]=[N("mdi-chevron-down",-1)])]),_:1})]),default:u(()=>[v("span",dAe,K(o.value?o.value.clinicName:"Select Clinic"),1)]),_:1},16,["color"])]),default:u(()=>[i(F,{density:"compact","max-width":"300"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(a.value,E=>(P(),he(B,{key:E.id,onClick:x=>m(E),class:lt({"bg-primary":o.value&&E.id===o.value.id})},{prepend:u(()=>[i(g,{size:"small"},{default:u(()=>[...y[3]||(y[3]=[N("mdi-hospital-marker",-1)])]),_:1})]),default:u(()=>[i(b,null,{default:u(()=>[N(K(E.clinicName),1)]),_:2},1024),i(S,null,{default:u(()=>[N(K(E.clinicAddress),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1}),i(T,{"offset-y":""},{activator:u(({props:E})=>[i(_,Ie(E,{variant:"outlined",size:"small",class:"selector-chip pharmacy-chip","prepend-icon":"mdi-pill",color:l.value?"primary":"surface"}),{append:u(()=>[i(g,{size:"small"},{default:u(()=>[...y[4]||(y[4]=[N("mdi-chevron-down",-1)])]),_:1})]),default:u(()=>[v("span",fAe,K(l.value?l.value.pharmacyName:"Select Pharmacy"),1)]),_:1},16,["color"])]),default:u(()=>[i(F,{density:"compact","max-width":"300"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(r.value,E=>(P(),he(B,{key:E.id,onClick:x=>p(E),class:lt({"bg-primary":l.value&&E.id===l.value.id})},{prepend:u(()=>[i(g,{size:"small"},{default:u(()=>[...y[5]||(y[5]=[N("mdi-pill",-1)])]),_:1})]),default:u(()=>[i(b,null,{default:u(()=>[N(K(E.pharmacyName),1)]),_:2},1024),E.gstNumber?(P(),he(S,{key:0},{default:u(()=>[N(K(E.gstNumber),1)]),_:2},1024)):ge("",!0)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1})])}}},mAe=en(AAe,[["__scopeId","data-v-dc36361c"]]),vAe={class:"d-flex align-center"},hAe={__name:"ConnectionStatusIndicator",setup(e){const{serverStatus:t,internetStatus:n,remoteAccessStatus:a,checkAllConnections:r,stopInternetMonitoring:s,startRemoteAccessMonitoring:o,stopRemoteAccessMonitoring:l,getNetworkDetails:c}=PM(),f=R(null),d=ee(()=>({"status-icon--checking":t.value==="checking","status-icon--connected":t.value==="connected","status-icon--disconnected":t.value==="disconnected"})),A=ee(()=>{switch(t.value){case"checking":return"Checking database connection...";case"connected":return"Database connected ";case"disconnected":return"Database disconnected ";default:return"Database status unknown"}}),m=ee(()=>({"status-icon--checking":n.value==="checking","status-icon--connected":n.value==="connected","status-icon--disconnected":n.value==="disconnected"})),p=ee(()=>{switch(n.value){case"checking":return"Checking internet...";case"connected":return"Internet connected ";case"disconnected":return"No internet ";default:return"Internet status unknown"}}),h=ee(()=>({"status-icon--checking":a.value==="checking","status-icon--connected":a.value==="connected","status-icon--disconnected":a.value==="disconnected","status-icon--reconnecting":a.value==="reconnecting","status-icon--error":a.value==="error"})),y=ee(()=>{switch(a.value){case"checking":return"Checking Remote Access Link status...";case"connected":return"Remote Access Link Operational ";case"disconnected":return"Remote Access Link Unavailable ";case"reconnecting":return"Reconnecting...";case"error":return"Remote Access Link Error - Click Reconnect ";default:return"Remote Access Link status unknown"}});return An(()=>{f.value=c(),console.log("Network details:",f.value),r(),o()}),ha(()=>{s(),l()}),(g,_)=>{const b=I("v-icon"),S=I("v-tooltip");return P(),Ae("div",vAe,[i(S,{text:A.value,location:"bottom"},{activator:u(({props:B})=>[v("div",Ie({class:"mr-3"},B),[i(b,{size:"20",class:lt(d.value)},{default:u(()=>[..._[0]||(_[0]=[N("mdi-database",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"]),i(S,{text:p.value,location:"bottom"},{activator:u(({props:B})=>[v("div",Ie({class:"mr-3"},B),[i(b,{size:"20",class:lt(m.value)},{default:u(()=>[..._[1]||(_[1]=[N("mdi-wifi",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"]),i(S,{text:y.value,location:"bottom"},{activator:u(({props:B})=>[v("div",fl(Al(B)),[i(b,{size:"20",class:lt(h.value)},{default:u(()=>[..._[2]||(_[2]=[N("mdi-link-variant",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"])])}}},pAe=en(hAe,[["__scopeId","data-v-a12df52e"]]),gAe=async(e,t="both",n=null)=>{try{const a={type:t};n&&(a.doctorId=n);const r=await it.get(`/upload/patient/${e}/images`,{params:a});if(r.data.success)return{success:!0,data:r.data.data,message:r.data.message};throw new Error(r.data.error||"Failed to fetch patient images")}catch(a){return console.error("Patient images fetch error:",a),{success:!1,error:a.response?.data?.error||a.message||"Failed to fetch patient images"}}},yAe=async(e,t=null)=>{try{const n={};t&&(n.doctorId=t);const a=await it.get(`/upload/patient/${e}/all`,{params:n});if(a.data.success)return{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data.error||"Failed to fetch patient uploads")}catch(n){return console.error("Patient uploads fetch error:",n),{success:!1,error:n.response?.data?.error||n.message||"Failed to fetch patient uploads"}}},j3=async(e,t)=>{try{const n=await it.post("/upload/upload-pdf",{pdfBase64:e,filename:t});if(n.data.success)return{success:!0,data:n.data.data,message:n.data.message};throw new Error(n.data.error||"Upload failed")}catch(n){return console.error("PDF upload error:",n),{success:!1,error:n.response?.data?.error||n.message||"Failed to upload PDF"}}},_Ae=async(e,t,n="image/jpeg")=>{try{const a=await it.post("/upload/upload-image",{imageBase64:e,filename:t,contentType:n});if(a.data.success)return{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data.error||"Upload failed")}catch(a){return console.error("Image upload error:",a),{success:!1,error:a.response?.data?.error||a.message||"Failed to upload image"}}},wAe=async()=>{try{const e=await it.get("/print/qr");if(e.data.success)return{success:!0,data:e.data.data,message:e.data.message};throw new Error(e.data.error||"Failed to fetch QR code data")}catch(e){return console.error("QR code data fetch error:",e),{success:!1,error:e.response?.data?.error||e.message||"Failed to fetch QR code data"}}},bAe=async()=>{try{const e=await it.post("/ngrok/regenerate");if(e.data.success)return{success:!0,data:e.data.data,message:e.data.message||"Ngrok tunnel regenerated successfully"};throw new Error(e.data.error||"Failed to regenerate ngrok tunnel")}catch(e){return console.error("Ngrok tunnel regeneration error:",e),{success:!1,error:e.response?.data?.error||e.message||"Failed to regenerate ngrok tunnel"}}},xAe=async e=>{try{const t=await it.delete(`/upload/${e}`);if(t.data.success)return{success:!0,message:t.data.message||"Upload deleted successfully"};throw new Error(t.data.error||"Failed to delete upload")}catch(t){return console.error("Upload delete error:",t),{success:!1,error:t.response?.data?.error||t.message||"Failed to delete upload"}}},CAe=async(e,t)=>{console.log(" [UploadUtils] Starting support logs upload..."),console.log(` [UploadUtils] Filename: ${t}`),console.log(` [UploadUtils] Base64 data length: ${e.length} characters`),console.log(` [UploadUtils] Estimated file size: ${Math.round(e.length*.75/1024)} KB`);try{console.log(" [UploadUtils] Calling API: POST /upload/support-logs-upload");const n=await it.post("/upload/support-logs-upload",{logsBase64:e,filename:t});if(console.log(" [UploadUtils] API response received:",{status:n.status,success:n.data.success,hasFileUrl:!!n.data.data?.file_url}),n.data.success)return console.log(" [UploadUtils] Upload successful!"),console.log(` [UploadUtils] File URL: ${n.data.data.file_url}`),{success:!0,data:n.data.data,message:n.data.message};throw console.error(" [UploadUtils] Upload failed:",n.data.error),new Error(n.data.error||"Upload failed")}catch(n){return console.error(" [UploadUtils] Support logs upload error:",n),console.error(" [UploadUtils] Error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,responseData:n.response?.data}),{success:!1,error:n.response?.data?.error||n.message||"Failed to upload support logs"}}},SAe={key:0,class:"mb-4"},EAe={class:"text-caption text-center mt-2 text-medium-emphasis"},kAe={__name:"support-dialog",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,r=ee({get:()=>n.modelValue,set:b=>a("update:modelValue",b)}),s=R(null),o=R(!1),l=R(""),c=R(""),f=R(!1),d=R(0),A=R(""),m=R(""),p={required:b=>!!b?.trim()||"This field is required",maxLength50:b=>!b||b.length<=50||"Maximum 50 characters allowed",maxLength1000:b=>!b||b.length<=1e3||"Maximum 1000 characters allowed"};Ge(r,b=>{b&&h()});const h=()=>{l.value="",c.value="",d.value=0,A.value="",m.value="",f.value=!1,s.value&&s.value.resetValidation()},y=()=>{f.value||(r.value=!1)},g=async()=>{console.log(" [Support] Submit support request initiated");const{valid:b}=await s.value.validate();if(!b){console.warn(" [Support] Form validation failed");return}console.log(" [Support] Form validated successfully"),console.log(" [Support] Error Title:",l.value),console.log(" [Support] Description length:",c.value.length,"characters"),f.value=!0,m.value="";try{console.log(" [Support] Step 1: Collecting application logs..."),d.value=20,A.value="Collecting application logs...";let S="",B=!1;try{if(window.require){console.log(" [Support] Electron IPC available, invoking get-support-logs...");const{ipcRenderer:T}=window.require("electron"),E=await T.invoke("get-support-logs");console.log(" [Support] IPC response received:",{success:E.success,fileCount:E.fileCount,compressedSize:E.compressedSize,dataLength:E.data?.length||0,error:E.error}),E.success&&E.data?(S=E.data,B=!0,console.log(" [Support] Logs collected successfully"),console.log(` [Support] Files: ${E.fileCount}, Size: ${Math.round(E.compressedSize/1024)} KB`)):console.warn(" [Support] Could not collect logs:",E.error)}else console.warn(" [Support] Electron IPC not available (running in browser?)")}catch(T){console.error(" [Support] Failed to collect logs:",T)}let F="";if(B&&S){console.log(" [Support] Step 2: Uploading support package..."),d.value=50,A.value="Uploading support package...";const E=`evamed-support-logs-${new Date().toISOString().replace(/[:.]/g,"-")}.zip`;console.log(` [Support] Filename: ${E}`),console.log(` [Support] Base64 data length: ${S.length} characters`);const x=await CAe(S,E);console.log(" [Support] Upload response:",{success:x.success,fileUrl:x.data?.file_url,error:x.error}),x.success?(F=x.data.file_url,console.log(" [Support] Logs uploaded successfully:",F)):console.warn(" [Support] Failed to upload logs:",x.error)}else console.log(" [Support] Skipping upload (no logs available)");console.log(" [Support] Step 3: Opening email client..."),d.value=80,A.value="Opening email client...",await _(F),console.log(" [Support] Step 4: Support request completed successfully"),d.value=100,A.value="Email client opened successfully!",setTimeout(()=>{console.log(" [Support] Closing dialog"),y()},1e3)}catch(S){console.error(" [Support] Support submission error:",S),console.error(" [Support] Error stack:",S.stack),m.value=S.message||"Failed to submit support request. Please try again."}finally{f.value=!1}},_=async b=>{console.log(" [Support] Building email content...");const S=xM.version,B=new Date().toISOString(),F=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=`[EVAMED Support] ${l.value.trim()} - ${F}`;console.log(" [Support] Email subject:",T);let E=`Support Request from EVAMED Desktop Application

Error Title: ${l.value.trim()}

Description:
${c.value.trim()}

---`;b?(console.log(" [Support] Including support package URL in email"),E+=`
Support Package: ${b}
(Log files attached - available for 24 hours)
`):(console.log(" [Support] No support package URL available"),E+=`
Note: Log files could not be attached automatically.
`),E+=`
App Version: ${S}
Timestamp: ${B}

---
This support request was generated automatically by the EVAMED Desktop Application.`;const x=`mailto:support@evamed.in?subject=${encodeURIComponent(T)}&body=${encodeURIComponent(E)}`;console.log(" [Support] Mailto URL length:",x.length,"characters");try{if(window.require){console.log(" [Support] Using Electron IPC to open email client...");const{ipcRenderer:C}=window.require("electron"),D=await C.invoke("open-external",x);D.success?console.log(" [Support] Successfully opened email client via IPC"):(console.error(" [Support] Failed to open email client via IPC:",D.error),console.log(" [Support] Falling back to window.open..."),window.open(x,"_blank","noopener,noreferrer"))}else console.log(" [Support] Using window.open (no Electron IPC)..."),window.open(x,"_blank","noopener,noreferrer")}catch(C){console.error(" [Support] Failed to use Electron IPC:",C),console.log(" [Support] Falling back to window.open..."),window.open(x,"_blank","noopener,noreferrer")}};return(b,S)=>{const B=I("v-icon"),F=I("v-card-title"),T=I("v-col"),E=I("v-btn"),x=I("v-row"),C=I("v-card"),D=I("v-text-field"),U=I("v-textarea"),L=I("v-alert"),H=I("v-progress-linear"),oe=I("v-expand-transition"),de=I("v-form"),te=I("v-card-text"),q=I("v-divider"),ce=I("v-spacer"),le=I("v-card-actions"),Z=I("v-dialog");return P(),he(Z,{modelValue:r.value,"onUpdate:modelValue":S[4]||(S[4]=ne=>r.value=ne),"max-width":"600",persistent:""},{default:u(()=>[i(C,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[i(C,{rounded:"0",class:"pa-3",color:"surfaceContainerHigh"},{default:u(()=>[i(x,{"no-gutters":"",align:"center"},{default:u(()=>[i(T,{cols:"10"},{default:u(()=>[i(F,{class:"pa-0 d-flex align-center"},{default:u(()=>[i(B,{class:"mr-2",color:"primary"},{default:u(()=>[...S[5]||(S[5]=[N("mdi-headset",-1)])]),_:1}),S[6]||(S[6]=N(" Contact Support ",-1))]),_:1})]),_:1}),i(T,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[i(E,{icon:"",size:"small",onClick:y,disabled:f.value,variant:"text"},{default:u(()=>[i(B,null,{default:u(()=>[...S[7]||(S[7]=[N("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),i(te,{class:"pa-4"},{default:u(()=>[i(de,{ref_key:"formRef",ref:s,modelValue:o.value,"onUpdate:modelValue":S[3]||(S[3]=ne=>o.value=ne),onSubmit:gn(g,["prevent"])},{default:u(()=>[i(D,{modelValue:l.value,"onUpdate:modelValue":S[0]||(S[0]=ne=>l.value=ne),label:"Error Title",placeholder:"Brief description of the issue",variant:"outlined",density:"comfortable",rules:[p.required,p.maxLength50],disabled:f.value,counter:"50",maxlength:"50",class:"mb-3"},{"prepend-inner":u(()=>[i(B,{size:"small",color:"error"},{default:u(()=>[...S[8]||(S[8]=[N("mdi-alert-circle-outline",-1)])]),_:1})]),_:1},8,["modelValue","rules","disabled"]),i(U,{modelValue:c.value,"onUpdate:modelValue":S[1]||(S[1]=ne=>c.value=ne),label:"Issue Description",placeholder:"Please describe the issue you are facing in detail. Include any steps to reproduce the problem.",variant:"outlined",density:"comfortable",rules:[p.required,p.maxLength1000],disabled:f.value,counter:"1000",maxlength:"1000",rows:"6","auto-grow":"",class:"mb-3"},{"prepend-inner":u(()=>[i(B,{size:"small",color:"info"},{default:u(()=>[...S[9]||(S[9]=[N("mdi-text-box-outline",-1)])]),_:1})]),_:1},8,["modelValue","rules","disabled"]),i(L,{type:"info",variant:"tonal",density:"compact",class:"mb-4"},{prepend:u(()=>[i(B,{size:"small"},{default:u(()=>[...S[10]||(S[10]=[N("mdi-information-outline",-1)])]),_:1})]),default:u(()=>[S[11]||(S[11]=v("span",{class:"text-caption"}," Application logs will be automatically attached to help our support team diagnose the issue. ",-1))]),_:1}),i(oe,null,{default:u(()=>[f.value?(P(),Ae("div",SAe,[i(H,{"model-value":d.value,color:"primary",height:"6",rounded:""},null,8,["model-value"]),v("p",EAe,K(A.value),1)])):ge("",!0)]),_:1}),m.value?(P(),he(L,{key:0,type:"error",variant:"tonal",density:"compact",class:"mb-4",closable:"","onClick:close":S[2]||(S[2]=ne=>m.value="")},{default:u(()=>[N(K(m.value),1)]),_:1})):ge("",!0)]),_:1},8,["modelValue"])]),_:1}),i(q),i(le,{class:"pa-4"},{default:u(()=>[i(ce),i(E,{variant:"outlined",onClick:y,disabled:f.value,class:"mr-2"},{default:u(()=>[...S[12]||(S[12]=[N(" Cancel ",-1)])]),_:1},8,["disabled"]),i(E,{variant:"elevated",color:"primary",onClick:g,loading:f.value,disabled:!o.value||f.value},{default:u(()=>[i(B,{start:""},{default:u(()=>[...S[13]||(S[13]=[N("mdi-send",-1)])]),_:1}),S[14]||(S[14]=N(" Submit Support Request ",-1))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},BAe=en(kAe,[["__scopeId","data-v-4d5ca3d9"]]),TAe={class:"d-flex align-center user-section"},IAe={class:"mx-3"},FAe={class:"d-flex align-center mx-3"},PAe={key:1,class:"d-flex align-center mx-3"},DAe={key:3,class:"mx-3 window-controls-container d-flex align-center pa-2"},UAe={key:0,src:CM,alt:"Exit Fullscreen"},RAe={key:1,src:SM,alt:"Enter Fullscreen"},NAe={key:0,src:CM,alt:"Exit fullscreen"},VAe={key:1,src:SM,alt:"Enter fullscreen"},LAe={key:0,class:"extension-content"},MAe={class:"d-flex align-center justify-center pa-2"},OAe={__name:"app-bar",setup(e){const t=Ln(),n=ml(),{showSuccess:a,showError:r,showSnackbar:s,showInfo:o}=la(),l=Nm()?KA():null,{remoteAccessStatus:c,isReconnecting:f,manualReconnect:d}=PM(),A=R(null),m=R(!1),p=R(!1),h=R(!1),y=R(!1),g=R(0),_=R(!1),b=R(!1),S=R(!1),B=R(!1),F=ee(()=>f.value?!1:c.value==="disconnected"||c.value==="error"),T=async()=>{if(f.value){console.log(" Manual reconnect blocked - auto-reconnect in progress"),o("Auto-reconnection is already in progress. Please wait...");return}if(b.value){console.log("Reconnect already in progress");return}b.value=!0,console.log(" Manual reconnect initiated from app bar");try{const xe=await d();if(xe.success)a(xe.userMessage||"Link reconnected successfully"),console.log(" Manual reconnect successful:",xe.tunnelUrl);else{const Be=xe.userMessage||xe.error||"Failed to reconnect";s({message:Be,color:"error",timeout:8e3}),console.warn(" Manual reconnect failed:",{error:xe.error,userMessage:xe.userMessage})}}catch(xe){console.error(" Manual reconnect error:",xe),r("Connection error. Please try again.")}finally{b.value=!1}},E=async()=>{if(Nm()&&!B.value)try{B.value=!0,S.value?(await document.exitFullscreen(),a("Exited fullscreen mode")):(await document.documentElement.requestFullscreen({navigationUI:"hide"}),a("Entered fullscreen mode"))}catch(xe){console.error("Web fullscreen toggle failed:",xe),W(xe,"Fullscreen")}finally{B.value=!1}},x=()=>{S.value=!!document.fullscreenElement},C=R(0),D=R(100),U=R(!0),L=R(0),H=R(-1),oe=R(1),de=ee(()=>h.value||C.value>=oe.value),te=ee(()=>h.value||C.value<=H.value),q=R(!1),ce=R(""),le=R("info"),Z=R(4e3),ne=R(""),G=R(navigator.onLine),W=(xe,Be="Unknown")=>{console.error(`App Bar Error (${Be}):`,xe),xe?.code==="NETWORK_ERROR"||xe?.response?.status>=500||!xe?.response?A.value=`${Be} error. Please refresh the page or contact support.`:(q.value=!0,ce.value=`${Be}: ${xe?.message||"Unknown error occurred"}`,le.value="warning")},Q=ee(()=>{try{return t.getters["appBar/extensionContent"]}catch(xe){return W(xe,"Extension content loading"),null}}),O=ee(()=>{if(!Q.value)return null;try{if(typeof Q.value!="object")throw new Error("Invalid extension content format");return Q.value.component?{component:Q.value.component,props:Q.value.props||{}}:(console.warn("Extension content missing component"),null)}catch(xe){return W(xe,"Extension validation"),null}}),ae=async()=>{try{const xe=await ns(()=>import("./app_bar-DVGh_H18.js"),[],import.meta.url);ne.value=xe.default||xe}catch{console.warn("App bar image not found, using fallback"),ne.value=""}},j=()=>{console.log("Video button clicked - navigating to Appointments/Teleconsult");try{const xe=n.currentRoute.value;xe.name==="HomePage"||xe.path==="/"?(n.replace({name:"HomePage",params:{tab:"1"}}),a("Navigated to Teleconsultations")):(n.push({name:"HomePage",params:{tab:"1"}}),a("Navigated to Teleconsultations"))}catch(xe){console.error("Error navigating to video section:",xe),W(xe,"Navigation failed")}},J=()=>{console.log("Testing welcome dialog - navigating to /welcome"),n.push("/welcome")},ie=async()=>{if(m.value){console.warn("Logout already in progress");return}try{m.value=!0,console.log("Starting logout process...");const xe=t.dispatch("auth/signOut"),Be=new Promise((Ye,kt)=>setTimeout(()=>kt(new Error("Logout timeout")),1e4));await Promise.race([xe,Be]),console.log("Logout successful"),a("Logged out successfully"),setTimeout(()=>{n.push("/login")},1e3)}catch(xe){console.error("Logout failed:",xe),W(xe,"Logout failed"),(xe.message==="Logout timeout"||xe?.response?.status>=500)&&(console.warn("Force redirecting due to logout failure"),n.push("/login"))}finally{m.value=!1}},X=async()=>{try{console.log("Web mode logout - clearing session..."),l?await l.logout():(localStorage.removeItem("sessionToken"),localStorage.removeItem("permissions"),localStorage.removeItem("isAdmin"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("features")),console.log("Web mode logout - session cleared, refreshing page"),window.location.reload()}catch(xe){console.error("Web mode logout error:",xe),localStorage.removeItem("sessionToken"),localStorage.removeItem("permissions"),localStorage.removeItem("isAdmin"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("features"),window.location.reload()}},fe=async()=>{if(!y.value)try{if(y.value=!0,q.value=!0,ce.value="Checking for updates...",le.value="info",Z.value=5e3,window.require){const{ipcRenderer:xe}=window.require("electron"),Be=(Nt,At)=>{console.log(" App-bar received update-available event:",At),ce.value=`Update available: v${At.version}`,le.value="info",y.value=!1,xe.removeListener("update-available",Be),xe.removeListener("update-not-available",Ye),xe.removeListener("update-error",kt)},Ye=(Nt,At)=>{console.log(" App-bar received update-not-available event:",At),ce.value="Already up to date",le.value="success",y.value=!1,xe.removeListener("update-available",Be),xe.removeListener("update-not-available",Ye),xe.removeListener("update-error",kt)},kt=(Nt,At)=>{console.log(" App-bar received update-error event:",At),ce.value="Failed to check for updates",le.value="error",y.value=!1,xe.removeListener("update-available",Be),xe.removeListener("update-not-available",Ye),xe.removeListener("update-error",kt)};xe.on("update-available",Be),xe.on("update-not-available",Ye),xe.on("update-error",kt),console.log(" App-bar initiating update check via IPC...");const xt=await xe.invoke("check-for-updates");console.log(" App-bar received IPC result:",xt),setTimeout(()=>{y.value&&(ce.value="Update check timed out",le.value="warning",y.value=!1,xe.removeListener("update-available",Be),xe.removeListener("update-not-available",Ye),xe.removeListener("update-error",kt))},3e4)}else ce.value="Update check not available",le.value="warning",y.value=!1}catch(xe){console.error("Update check failed:",xe),ce.value="Failed to check for updates",le.value="error",y.value=!1}},M=async()=>{if(!h.value)try{if(h.value=!0,window.require){const{ipcRenderer:xe}=window.require("electron"),Be=await xe.invoke("toggle-fullscreen");if(Be.success){U.value=Be.isFullscreen;const Ye=Be.isFullscreen?"Entered fullscreen mode":"Exited fullscreen mode";a(Ye),console.log(`Fullscreen toggled: ${Be.wasFullscreen}  ${Be.isFullscreen}`),Be.isFullscreen||setTimeout(()=>{a("You can now minimize using the window controls")},2e3)}else throw new Error(Be.error||"Failed to toggle fullscreen")}else throw new Error("Electron IPC not available")}catch(xe){console.error("Failed to toggle fullscreen:",xe),W(xe,"Fullscreen toggle failed")}finally{h.value=!1}},z=async()=>{if(!h.value)try{if(h.value=!0,window.require){const{ipcRenderer:xe}=window.require("electron"),Be=await xe.invoke("window-close");if(Be.success)console.log("Window close initiated");else throw new Error(Be.error||"Failed to close window")}else throw new Error("Electron IPC not available")}catch(xe){console.error("Failed to close window:",xe),W(xe,"Close failed")}finally{h.value=!1}},se=async()=>{if(!(h.value||C.value>=oe.value))try{if(h.value=!0,window.require){const{ipcRenderer:xe}=window.require("electron"),Be=await xe.invoke("zoom-in");if(Be.success)C.value=Be.zoomLevel,D.value=Be.zoomFactor,a(`Zoomed in to ${Be.zoomFactor}%`),console.log(`Zoom in successful: ${Be.zoomFactor}%`);else throw new Error(Be.error||"Failed to zoom in")}else throw new Error("Electron IPC not available")}catch(xe){console.error("Failed to zoom in:",xe),W(xe,"Zoom in failed")}finally{h.value=!1}},be=async()=>{if(!(h.value||C.value<=H.value))try{if(h.value=!0,window.require){const{ipcRenderer:xe}=window.require("electron"),Be=await xe.invoke("zoom-out");if(Be.success)C.value=Be.zoomLevel,D.value=Be.zoomFactor,a(`Zoomed out to ${Be.zoomFactor}%`),console.log(`Zoom out successful: ${Be.zoomFactor}%`);else throw new Error(Be.error||"Failed to zoom out")}else throw new Error("Electron IPC not available")}catch(xe){console.error("Failed to zoom out:",xe),W(xe,"Zoom out failed")}finally{h.value=!1}},Fe=async()=>{try{if(window.require){const{ipcRenderer:xe}=window.require("electron"),Be=await xe.invoke("get-zoom-level");Be.success&&(C.value=Be.zoomLevel,D.value=Be.zoomFactor,L.value=Be.zoomLevel,H.value=L.value-1,oe.value=L.value+1,console.log(`Initial zoom state: level ${Be.zoomLevel} (${Be.zoomFactor}%)`),console.log(`Zoom limits: ${H.value} to ${oe.value}`));const Ye=await xe.invoke("get-fullscreen-status");Ye.success&&(U.value=Ye.isFullscreen)}}catch(xe){console.warn("Failed to get initial window state:",xe)}},ye=()=>{G.value=!0,A.value?.includes("network")&&(A.value=null,a("Connection restored"))},Qe=()=>{G.value=!1,q.value=!0,ce.value="You are currently offline. Some features may not work.",le.value="warning",Z.value=0},_e=xe=>{je(xe,"selector"),setTimeout(()=>{Ue.value.has("selector")&&(console.log("Auto-retrying selector component..."),at("selector"))},3e3)},Se=xe=>{je(xe,"extension")},Ee=xe=>{console.warn("Logout icon failed to load:",xe)},Ue=R(new Set),je=(xe,Be)=>{console.error(`Child component error in ${Be}:`,xe),Ue.value.add(Be),Ue.value.size>2?A.value="Multiple component failures detected. Please refresh the page.":W(xe,Be)},at=xe=>{Ue.value.delete(xe),g.value+=1},mt=R(null);return An(async()=>{try{await ae(),await Fe(),window.addEventListener("online",ye),window.addEventListener("offline",Qe),Nm()&&(S.value=!!document.fullscreenElement,document.addEventListener("fullscreenchange",x)),mt.value=t.watch(xe=>xe.errors,xe=>{xe?.appBar&&(W(xe.appBar,"Store error"),t.commit("clearError","appBar"))},{deep:!0}),console.log("App bar initialized successfully")}catch(xe){W(xe,"App bar initialization")}}),ha(()=>{try{window.removeEventListener("online",ye),window.removeEventListener("offline",Qe),Nm()&&document.removeEventListener("fullscreenchange",x),mt.value&&mt.value(),m.value=!1,y.value=!1,q.value=!1,A.value=null,console.log("App bar cleanup completed")}catch(xe){console.error("App bar cleanup error:",xe)}}),Ge(()=>n.currentRoute.value.path,()=>{A.value&&!A.value.includes("contact support")&&(A.value=null)}),(xe,Be)=>{const Ye=I("v-alert"),kt=I("v-spacer"),xt=I("v-btn"),Nt=I("v-icon"),At=I("v-tooltip"),Ot=I("v-progress-circular"),Dt=I("v-chip"),bt=I("v-card"),Ze=I("v-app-bar"),qt=I("v-snackbar");return P(),Ae("div",null,[A.value?(P(),he(Ye,{key:0,type:"error",variant:"tonal",closable:"","onClick:close":Be[0]||(Be[0]=Vt=>A.value=null),class:"ma-2",density:"compact"},{default:u(()=>[N(K(A.value),1)]),_:1})):ge("",!0),i(Ze,{elevation:"1",app:"",extended:!!O.value,density:"compact",class:"professional-app-bar",image:ne.value},{default:u(()=>[i(kt),Sa(i(xt,{variant:"outlined",color:"warning",size:"small",onClick:J,class:"mx-2","prepend-icon":"mdi-test-tube"},{default:u(()=>[...Be[6]||(Be[6]=[N(" Test Welcome ",-1)])]),_:1},512),[[fi,!1]]),v("div",TAe,[i(At,{text:"Start teleconsultation",location:"bottom"},{activator:u(({props:Vt})=>[i(xt,Ie({icon:"",onClick:j},Vt,{class:"video-btn mx-3",variant:"text",size:"small",disabled:p.value,loading:p.value,"aria-label":"Open Appointments and Teleconsult page"}),{default:u(()=>[i(Nt,{size:"24"},{default:u(()=>[v("img",{src:zfe,alt:"Video Consultation",class:"video-icon",onError:Ee},null,32)]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),Ue.value.has("selector")?(P(),Ae("div",PAe,[i(Dt,{variant:"outlined",size:"small",color:"warning",class:"mr-2"},{default:u(()=>[...Be[8]||(Be[8]=[N(" Selection unavailable ",-1)])]),_:1}),i(xt,{size:"x-small",variant:"text",onClick:Be[1]||(Be[1]=Vt=>at("selector")),class:"text-caption"},{default:u(()=>[...Be[9]||(Be[9]=[N(" Retry ",-1)])]),_:1})])):(P(),he(yS,{key:0},{default:u(()=>[v("div",IAe,[(P(),he(mAe,{onError:_e,key:g.value}))])]),fallback:u(()=>[v("div",FAe,[i(Ot,{indeterminate:"",size:"20",width:"2",color:"primary"}),Be[7]||(Be[7]=v("span",{class:"ml-2 text-caption"},"Loading...",-1))])]),_:1})),Oe(Oa)()?(P(),he(bt,{key:2,variant:"outlined",class:"mx-3 status-indicators-container d-flex align-center pa-2",density:"compact",style:{"border-color":"rgba(0, 0, 0, 0.15) !important"}},{default:u(()=>[i(pAe),i(At,{text:b.value?"Reconnecting...":"Reconnect Link",location:"bottom"},{activator:u(({props:Vt})=>[F.value?(P(),he(xt,Ie({key:0},Vt,{size:"x-small",variant:"outlined",color:b.value?"warning":"error",class:"ml-2 reconnect-btn",loading:b.value,disabled:b.value,onClick:T}),{default:u(()=>[i(Nt,{size:"14",class:"mr-1"},{default:u(()=>[...Be[10]||(Be[10]=[N("mdi-refresh",-1)])]),_:1}),N(" "+K(b.value?"":"Reconnect"),1)]),_:1},16,["color","loading","disabled"])):ge("",!0)]),_:1},8,["text"])]),_:1})):ge("",!0),Oe(Oa)()?(P(),Ae("div",DAe,[i(At,{text:"Zoom Out",location:"bottom"},{activator:u(({props:Vt})=>[i(xt,Ie(Vt,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:be,disabled:te.value}),{default:u(()=>[i(Nt,{class:"control-icon"},{default:u(()=>[...Be[11]||(Be[11]=[v("img",{src:Wfe,alt:"Zoom Out"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),i(At,{text:"Zoom In",location:"bottom"},{activator:u(({props:Vt})=>[i(xt,Ie(Vt,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:se,disabled:de.value}),{default:u(()=>[i(Nt,{class:"control-icon"},{default:u(()=>[...Be[12]||(Be[12]=[v("img",{src:Kfe,alt:"Zoom In"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),i(At,{text:U.value?"Exit Fullscreen":"Enter Fullscreen",location:"bottom"},{activator:u(({props:Vt})=>[i(xt,Ie(Vt,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:M,disabled:h.value}),{default:u(()=>[i(Nt,{class:"control-icon"},{default:u(()=>[U.value?(P(),Ae("img",UAe)):(P(),Ae("img",RAe))]),_:1})]),_:1},16,["disabled"])]),_:1},8,["text"]),Be[14]||(Be[14]=v("div",{class:"mx-3"},null,-1)),i(At,{text:"Close",location:"bottom"},{activator:u(({props:Vt})=>[i(xt,Ie(Vt,{icon:"",size:"small",variant:"text",class:"control-btn close-btn",onClick:z,disabled:h.value}),{default:u(()=>[i(Nt,{class:"control-icon close-icon"},{default:u(()=>[...Be[13]||(Be[13]=[v("img",{src:jfe,alt:"Close"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])):ge("",!0),Oe(Nm)()?(P(),he(At,{key:4,text:S.value?"Exit fullscreen (Esc)":"Enter fullscreen",location:"bottom"},{activator:u(({props:Vt})=>[i(xt,Ie(Vt,{icon:"",size:"small",variant:"text",class:"control-btn mx-3 web-fullscreen-btn",disabled:B.value,loading:B.value,onClick:E,"aria-label":"Toggle fullscreen"}),{default:u(()=>[i(Nt,{class:"control-icon"},{default:u(()=>[S.value?(P(),Ae("img",NAe)):(P(),Ae("img",VAe))]),_:1})]),_:1},16,["disabled","loading"])]),_:1},8,["text"])):ge("",!0),i(At,{text:"Contact Support",location:"bottom"},{activator:u(({props:Vt})=>[i(xt,Ie({icon:"",onClick:Be[2]||(Be[2]=zt=>_.value=!0)},Vt,{class:"support-btn mx-3",variant:"text",size:"small","aria-label":"Contact support"}),{default:u(()=>[i(Nt,{size:"20",class:"support-icon"},{default:u(()=>[...Be[15]||(Be[15]=[N("mdi-headset",-1)])]),_:1})]),_:1},16)]),_:1}),Oe(Oa)()?(P(),he(At,{key:5,text:"Check for Updates",location:"bottom"},{activator:u(({props:Vt})=>[i(xt,Ie({icon:"",onClick:fe},Vt,{class:"updates-btn mx-3",variant:"text",size:"small",disabled:y.value,loading:y.value,"aria-label":"Check for application updates"}),{default:u(()=>[i(Nt,{size:"20",class:"updates-icon"},{default:u(()=>[...Be[16]||(Be[16]=[N("mdi-package-variant",-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1})):ge("",!0),Oe(Oa)()?(P(),he(At,{key:6,text:"Logout",location:"bottom"},{activator:u(({props:Vt})=>[i(xt,Ie({icon:"",onClick:ie},Vt,{class:"logout-btn mx-3",variant:"text",size:"small",disabled:m.value,loading:m.value,"aria-label":"Logout from application"}),{default:u(()=>[i(Nt,{size:"20"},{default:u(()=>[v("img",{src:z3,alt:"Logout",class:"logout-icon",onError:Ee},null,32)]),_:1})]),_:1},16,["disabled","loading"])]),_:1})):ge("",!0),Oe(Nm)()?(P(),he(At,{key:7,text:"Logout",location:"bottom"},{activator:u(({props:Vt})=>[i(xt,Ie({icon:"",onClick:X},Vt,{class:"logout-btn mx-3",variant:"text",size:"small","aria-label":"Logout from application"}),{default:u(()=>[i(Nt,{size:"20"},{default:u(()=>[v("img",{src:z3,alt:"Logout",class:"logout-icon",onError:Ee},null,32)]),_:1})]),_:1},16)]),_:1})):ge("",!0)])]),extension:u(()=>[O.value?(P(),Ae("div",LAe,[(P(),he(yS,null,{default:u(()=>[(P(),he(iw(O.value.component),Ie(O.value.props||{},{onError:Se}),null,16))]),fallback:u(()=>[v("div",MAe,[i(Ot,{indeterminate:"",size:"16",width:"2",color:"primary"}),Be[17]||(Be[17]=v("span",{class:"ml-2 text-caption"},"Loading extension...",-1))])]),_:1}))])):ge("",!0)]),_:1},8,["extended","image"]),i(qt,{modelValue:q.value,"onUpdate:modelValue":Be[4]||(Be[4]=Vt=>q.value=Vt),color:le.value,timeout:Z.value,location:"top"},{actions:u(()=>[i(xt,{variant:"text",onClick:Be[3]||(Be[3]=Vt=>q.value=!1)},{default:u(()=>[...Be[18]||(Be[18]=[N(" Close ",-1)])]),_:1})]),default:u(()=>[N(K(ce.value)+" ",1)]),_:1},8,["modelValue","color","timeout"]),i(BAe,{modelValue:_.value,"onUpdate:modelValue":Be[5]||(Be[5]=Vt=>_.value=Vt)},null,8,["modelValue"])])}}},HAe=en(OAe,[["__scopeId","data-v-99bdd078"]]),$Ae={name:"UpdateNotification",data(){return{updateAvailable:!1,downloadInProgress:!1,readyToInstall:!1,showError:!1,showSuccess:!1,errorMessage:"",successMessage:"",updateInfo:null,downloadProgress:0,downloadSpeed:0,downloadTransferred:0,downloadTotal:0,isDownloading:!1,isCheckingUpdate:!1,isDevelopment:!1,autoRestartEnabled:!0,canRetry:!1,retryCount:0,lastUpdateCheck:null,currentVersion:"Loading...",showUpdateStatusDialog:!1}},mounted(){this.setupUpdateListeners(),this.loadCurrentVersion()},beforeUnmount(){this.removeUpdateListeners()},computed:{},methods:{setupUpdateListeners(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");e.on("update-checking",this.onUpdateChecking),e.on("update-available",this.onUpdateAvailable),e.on("update-not-available",this.onUpdateNotAvailable),e.on("download-progress",this.onDownloadProgress),e.on("update-downloaded",this.onUpdateDownloaded),e.on("update-error",this.onUpdateError),e.on("server-ready",this.onServerReady),e.on("download-cancelled",this.onDownloadCancelled)},removeUpdateListeners(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");e.removeListener("update-checking",this.onUpdateChecking),e.removeListener("update-available",this.onUpdateAvailable),e.removeListener("update-not-available",this.onUpdateNotAvailable),e.removeListener("download-progress",this.onDownloadProgress),e.removeListener("update-downloaded",this.onUpdateDownloaded),e.removeListener("update-error",this.onUpdateError),e.removeListener("server-ready",this.onServerReady),e.removeListener("download-cancelled",this.onDownloadCancelled)},onUpdateChecking(){console.log("Checking for updates..."),this.lastUpdateCheck=new Date,this.isCheckingUpdate||(this.isCheckingUpdate=!0)},onUpdateAvailable(e,t){console.log("Update available:",t),this.updateInfo=t,this.updateAvailable=!0,this.isCheckingUpdate=!1},onUpdateNotAvailable(e,t){console.log("No updates available",t),this.isCheckingUpdate=!1,this.showUpdateStatusDialog=!0},onDownloadProgress(e,t){console.log("Download progress:",t),this.downloadProgress=t.percent||0,this.downloadSpeed=t.bytesPerSecond||0,this.downloadTransferred=t.transferred||0,this.downloadTotal=t.total||0,!this.downloadInProgress&&this.isDownloading&&(console.log("Showing download progress dialog"),this.downloadInProgress=!0,this.updateAvailable=!1),this.downloadProgress>0&&this.downloadProgress%25===0&&console.log(`Download ${Math.round(this.downloadProgress)}% complete`)},async onUpdateDownloaded(e,t){console.log("Update downloaded:",t),this.downloadInProgress=!1,this.isDownloading=!1,this.autoRestartEnabled?(this.successMessage=`Update ${t.version} downloaded successfully! Restarting application...`,this.showSuccess=!0,setTimeout(async()=>{console.log("Auto-restarting application to install update..."),await this.installNow()},2e3)):(this.readyToInstall=!0,this.successMessage=`Update ${t.version} downloaded successfully!`,this.showSuccess=!0)},onUpdateError(e,t){console.error("Update error:",t),this.showError=!0,t.errorType==="checksum_mismatch"||t.code==="ERR_CHECKSUM_MISMATCH"?(this.errorMessage=t.message||"Download verification failed. The file may be corrupted. Please try downloading again.",this.canRetry=t.canRetry!==!1,this.retryCount=t.retryCount||0):(this.errorMessage=`Update failed: ${t.message}`,this.canRetry=!1),this.isDownloading=!1,this.isCheckingUpdate=!1,this.downloadInProgress=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0},onServerReady(){console.log("Server is ready")},onDownloadCancelled(){console.log("Download was cancelled by main process"),this.downloadInProgress=!1,this.isDownloading=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0},async loadCurrentVersion(){try{if(!window.require)return;const{ipcRenderer:e}=window.require("electron"),t=await e.invoke("get-app-config");this.currentVersion=t.version||"Unknown"}catch(e){console.error("Failed to load current version:",e),this.currentVersion="Unknown"}},async checkForUpdates(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.isCheckingUpdate=!0,this.lastUpdateCheck=new Date;const t=await e.invoke("check-for-updates");console.log("Update check result:",t),setTimeout(()=>{this.isCheckingUpdate&&(this.isCheckingUpdate=!1,this.updateAvailable)},2e3)}catch(t){console.error("Failed to check for updates:",t),this.showError=!0,this.errorMessage="Failed to check for updates",this.isCheckingUpdate=!1}},async downloadUpdate(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.isDownloading=!0,this.errorMessage="",this.showError=!1,console.log("Starting update download...");const t=await e.invoke("download-update");if(t.success)console.log("Download started successfully");else throw new Error(t.error||"Failed to start download")}catch(t){console.error("Failed to start download:",t),this.showError=!0,this.errorMessage=`Failed to start download: ${t.message}`,this.isDownloading=!1}},dismissUpdate(){this.updateAvailable=!1,this.updateInfo=null},async installNow(){if(!window.require){console.error("Electron IPC not available"),this.showError=!0,this.errorMessage="Cannot restart application - Electron IPC not available";return}const{ipcRenderer:e}=window.require("electron");try{console.log("Requesting application restart and update installation..."),await e.invoke("quit-and-install"),console.warn("Application did not quit as expected")}catch(t){console.error("Failed to install update:",t),this.showError=!0,this.errorMessage=`Failed to install update: ${t.message}`,this.readyToInstall=!0}},installLater(){this.readyToInstall=!1},formatReleaseNotes(e){return e?e.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/- (.*?)(<br>|$)/g," $1$2"):""},formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},formatBytes(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(1))+" "+n[a]},formatTimeRemaining(){if(this.downloadSpeed===0||this.downloadProgress===0||this.downloadProgress===100)return"Calculating...";const t=(this.downloadTotal-this.downloadTransferred)*1e3/(this.downloadSpeed*1e3),n=Math.floor(t/3600),a=Math.floor(t%3600/60),r=Math.floor(t%60);return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},async cancelDownload(){try{if(this.downloadInProgress=!1,this.isDownloading=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0,window.require){const{ipcRenderer:e}=window.require("electron");await e.invoke("cancel-update-download"),console.log("Download cancelled successfully"),this.successMessage="Download cancelled successfully",this.showSuccess=!0}}catch(e){console.error("Failed to cancel download:",e),this.showError=!0,this.errorMessage="Failed to cancel download"}},async retryDownload(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.showError=!1,this.errorMessage="",console.log("Cleaning up corrupted download files...");const t=await e.invoke("cleanup-corrupted-download");t.success?console.log("Download cache cleared successfully"):console.warn("Failed to cleanup download cache:",t.error),await new Promise(n=>setTimeout(n,1e3)),await this.downloadUpdate()}catch(t){console.error("Failed to retry download:",t),this.showError=!0,this.errorMessage="Failed to retry download. Please try again."}},handleUpdateCheckEvent(){console.log("Updates check triggered from external source"),this.checkForUpdates()},formatLastCheckTime(e){if(!e)return"Never";const n=new Date-e,a=Math.floor(n/6e4),r=Math.floor(n/36e5),s=Math.floor(n/864e5);return s>0?`${s} day${s>1?"s":""} ago`:r>0?`${r} hour${r>1?"s":""} ago`:a>0?`${a} minute${a>1?"s":""} ago`:"Just now"}}},QAe={key:0},GAe={class:"mb-3"},zAe={key:0,class:"mb-3"},WAe=["innerHTML"],KAe={key:1,class:"mb-2"},jAe={class:"text--secondary"},qAe={key:2,class:"mb-2"},YAe={class:"text--secondary"},XAe={class:"text-center mb-3"},JAe={class:"mt-3 text-center text--secondary"},ZAe={key:0};function eme(e,t,n,a,r,s){const o=I("v-icon"),l=I("v-card-title"),c=I("v-card-text"),f=I("v-spacer"),d=I("v-btn"),A=I("v-card-actions"),m=I("v-card"),p=I("v-dialog"),h=I("v-progress-circular"),y=I("v-progress-linear"),g=I("v-snackbar");return P(),Ae("div",null,[i(p,{modelValue:r.updateAvailable,"onUpdate:modelValue":t[0]||(t[0]=_=>r.updateAvailable=_),"max-width":"500",persistent:""},{default:u(()=>[i(m,null,{default:u(()=>[i(l,{class:"text-h5 primary white--text"},{default:u(()=>[i(o,{left:"",color:"white"},{default:u(()=>[...t[7]||(t[7]=[N("mdi-download",-1)])]),_:1}),t[8]||(t[8]=N(" Update Available ",-1))]),_:1}),i(c,{class:"pt-4"},{default:u(()=>[r.updateInfo?(P(),Ae("div",QAe,[v("p",GAe,[v("strong",null,"Version "+K(r.updateInfo.version),1),t[9]||(t[9]=N(" is now available! ",-1))]),r.updateInfo.releaseNotes?(P(),Ae("div",zAe,[t[10]||(t[10]=v("h4",{class:"mb-2"},"What's New:",-1)),v("div",{class:"release-notes",innerHTML:s.formatReleaseNotes(r.updateInfo.releaseNotes)},null,8,WAe)])):ge("",!0),r.updateInfo.releaseDate?(P(),Ae("div",KAe,[v("small",jAe," Released: "+K(s.formatDate(r.updateInfo.releaseDate)),1)])):ge("",!0),r.updateInfo.files&&r.updateInfo.files.length>0?(P(),Ae("div",qAe,[v("small",YAe," Size: "+K(s.formatBytes(r.updateInfo.files[0].size||0)),1)])):ge("",!0)])):ge("",!0),t[11]||(t[11]=v("p",{class:"mb-0"}," Would you like to download and install the update now? ",-1))]),_:1}),i(A,null,{default:u(()=>[i(f),i(d,{text:"",onClick:s.dismissUpdate,class:"btn-hover-base"},{default:u(()=>[...t[12]||(t[12]=[N(" Later ",-1)])]),_:1},8,["onClick"]),i(d,{color:"primary",onClick:s.downloadUpdate,loading:r.isDownloading,class:"btn-hover-enhanced"},{default:u(()=>[...t[13]||(t[13]=[N(" Download & Install ",-1)])]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(p,{modelValue:r.downloadInProgress,"onUpdate:modelValue":t[1]||(t[1]=_=>r.downloadInProgress=_),"max-width":"400",persistent:""},{default:u(()=>[i(m,null,{default:u(()=>[i(l,{class:"text-h6"},{default:u(()=>[i(o,{left:""},{default:u(()=>[...t[14]||(t[14]=[N("mdi-download",-1)])]),_:1}),t[15]||(t[15]=N(" Downloading Update ",-1))]),_:1}),i(c,null,{default:u(()=>[v("div",XAe,[i(h,{value:r.downloadProgress,size:"80",width:"8",color:"primary"},{default:u(()=>[N(K(Math.round(r.downloadProgress))+"% ",1)]),_:1},8,["value"])]),i(y,{value:r.downloadProgress,color:"primary",height:"6",rounded:""},null,8,["value"]),v("div",JAe,[v("small",null,[N(K(s.formatBytes(r.downloadTransferred))+" / "+K(s.formatBytes(r.downloadTotal))+" ",1),t[16]||(t[16]=v("br",null,null,-1)),N(" Speed: "+K(s.formatBytes(r.downloadSpeed))+"/s ",1),t[17]||(t[17]=v("br",null,null,-1)),r.downloadSpeed>0?(P(),Ae("span",ZAe," ETA: "+K(s.formatTimeRemaining()),1)):ge("",!0)])])]),_:1}),i(A,null,{default:u(()=>[i(f),i(d,{text:"",onClick:s.cancelDownload,disabled:r.downloadProgress>90},{default:u(()=>[...t[18]||(t[18]=[N(" Cancel ",-1)])]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(p,{modelValue:r.readyToInstall,"onUpdate:modelValue":t[2]||(t[2]=_=>r.readyToInstall=_),"max-width":"400",persistent:""},{default:u(()=>[i(m,null,{default:u(()=>[i(l,{class:"text-h5 success white--text"},{default:u(()=>[i(o,{left:"",color:"white"},{default:u(()=>[...t[19]||(t[19]=[N("mdi-check-circle",-1)])]),_:1}),t[20]||(t[20]=N(" Update Ready ",-1))]),_:1}),i(c,{class:"pt-4"},{default:u(()=>[...t[21]||(t[21]=[v("p",null," The update has been downloaded successfully. The application will restart to apply the update. ",-1),v("p",{class:"mb-0"},[v("strong",null,"Note:"),N(" Any unsaved work will be lost. ")],-1)])]),_:1}),i(A,null,{default:u(()=>[i(f),i(d,{text:"",onClick:s.installLater},{default:u(()=>[...t[22]||(t[22]=[N(" Restart Later ",-1)])]),_:1},8,["onClick"]),i(d,{color:"success",onClick:s.installNow},{default:u(()=>[...t[23]||(t[23]=[N(" Restart Now ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(g,{modelValue:r.showError,"onUpdate:modelValue":t[4]||(t[4]=_=>r.showError=_),color:"error",timeout:"0",top:""},{action:u(({attrs:_})=>[r.canRetry?(P(),he(d,Ie({key:0,text:""},_,{onClick:s.retryDownload}),{default:u(()=>[...t[25]||(t[25]=[N(" Retry ",-1)])]),_:1},16,["onClick"])):ge("",!0),i(d,Ie({text:""},_,{onClick:t[3]||(t[3]=b=>r.showError=!1)}),{default:u(()=>[...t[26]||(t[26]=[N(" Close ",-1)])]),_:1},16)]),default:u(()=>[i(o,{left:""},{default:u(()=>[...t[24]||(t[24]=[N("mdi-alert",-1)])]),_:1}),N(" "+K(r.errorMessage)+" ",1)]),_:1},8,["modelValue"]),i(g,{modelValue:r.showSuccess,"onUpdate:modelValue":t[6]||(t[6]=_=>r.showSuccess=_),color:"success",timeout:"4000",top:""},{action:u(({attrs:_})=>[i(d,Ie({text:""},_,{onClick:t[5]||(t[5]=b=>r.showSuccess=!1)}),{default:u(()=>[...t[28]||(t[28]=[N(" Close ",-1)])]),_:1},16)]),default:u(()=>[i(o,{left:""},{default:u(()=>[...t[27]||(t[27]=[N("mdi-check-circle",-1)])]),_:1}),N(" "+K(r.successMessage)+" ",1)]),_:1},8,["modelValue"])])}const tme=en($Ae,[["render",eme],["__scopeId","data-v-b62dff2a"]]),nme={__name:"App",setup(e){const t=Ln(),n=ml(),{snackbar:a}=la(),r=R(!1),s=Oa(),o=ee(()=>t.getters["auth/isAuthenticated"]),l=R(!!localStorage.getItem("desktopSessionToken")),c=KA(),f=ee(()=>{const h=!!localStorage.getItem("sessionToken"),y=c.isAuthenticated.value;return h&&y}),d=ee(()=>{if(s)return o.value&&l.value;{const h=f.value;return console.log("[App.vue] Web authentication check:",{hasToken:!!localStorage.getItem("sessionToken"),computedAuth:c.isAuthenticated.value,isFullyAuthenticated:h}),h}});s&&window.addEventListener("storage",h=>{h.key==="desktopSessionToken"&&(l.value=!!h.newValue)}),n.afterEach(()=>{s&&(l.value=!!localStorage.getItem("desktopSessionToken"))});const A=ee(()=>{const h=n.currentRoute.value.path,y=["/","/login","/desktop/passcode","/web/login"],g=d.value&&!y.includes(h);return console.log("[App.vue] showNavigation check:",{currentPath:h,isFullyAuthenticated:d.value,isExcluded:y.includes(h),shouldShow:g}),g});window.addEventListener("collapse-side-nav",h=>m(h.detail)),An(async()=>{console.log("App mounted")});const m=h=>{r.value=h},p=h=>{t.dispatch("snackbar/showSnackbar",h)};return(h,y)=>{const g=I("router-view"),_=I("v-btn"),b=I("v-snackbar"),S=I("v-app");return P(),he(S,null,{default:u(()=>[A.value?(P(),he(Gfe,{key:0,collapsed:r.value},null,8,["collapsed"])):ge("",!0),A.value?(P(),he(HAe,{key:1})):ge("",!0),i(g,null,{default:u(({Component:B})=>[(P(),he(bZ,null,[(P(),he(iw(B),{key:h.$route.path}))],1024))]),_:1}),i(tme,{onShowSnackbar:p}),i(b,{modelValue:Oe(a).show,"onUpdate:modelValue":y[1]||(y[1]=B=>Oe(a).show=B),color:Oe(a).color,timeout:Oe(a).timeout,top:"",right:""},{action:u(({attrs:B})=>[i(_,Ie({text:""},B,{onClick:y[0]||(y[0]=F=>Oe(t).dispatch("snackbar/hideSnackbar"))}),{default:u(()=>[...y[2]||(y[2]=[N(" Close ",-1)])]),_:1},16)]),default:u(()=>[N(K(Oe(a).message)+" ",1)]),_:1},8,["modelValue","color","timeout"])]),_:1})}}},Dg="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.65,6.35C16.2,4.9%2014.21,4%2012,4A8,8%200%200,0%204,12A8,8%200%200,0%2012,20C15.73,20%2018.84,17.45%2019.73,14H17.65C16.83,16.33%2014.61,18%2012,18A6,6%200%200,1%206,12A6,6%200%200,1%2012,6C13.66,6%2015.14,6.69%2016.22,7.78L13,11H20V4L17.65,6.35Z'%20/%3e%3c/svg%3e",ame="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5%206C3.9%206%203%206.9%203%208S3.9%2010%205%2010%207%209.11%207%208%206.11%206%205%206M12%204C10.9%204%2010%204.89%2010%206S10.9%208%2012%208%2014%207.11%2014%206%2013.11%204%2012%204M19%202C17.9%202%2017%202.9%2017%204S17.9%206%2019%206%2021%205.11%2021%204%2020.11%202%2019%202M3.5%2011C2.67%2011%202%2011.67%202%2012.5V17H3V22H7V17H8V12.5C8%2011.67%207.33%2011%206.5%2011H3.5M10.5%209C9.67%209%209%209.67%209%2010.5V15H10V20H14V15H15V10.5C15%209.67%2014.33%209%2013.5%209H10.5M17.5%207C16.67%207%2016%207.67%2016%208.5V13H17V18H21V13H22V8.5C22%207.67%2021.33%207%2020.5%207H17.5Z'%20/%3e%3c/svg%3e",rme="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21.1,12.5L22.5,13.91L15.97,20.5L12.5,17L13.9,15.59L15.97,17.67L21.1,12.5M10,17L13,20H3V18C3,15.79%206.58,14%2011,14L12.89,14.11L10,17M11,4A4,4%200%200,1%2015,8A4,4%200%200,1%2011,12A4,4%200%200,1%207,8A4,4%200%200,1%2011,4Z'%20/%3e%3c/svg%3e",sme="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17.5%2013C15%2013%2013%2015%2013%2017.5C13%2020%2015%2022%2017.5%2022C20%2022%2022%2020%2022%2017.5C22%2015%2020%2013%2017.5%2013M10%2014C5.58%2014%202%2015.79%202%2018V20H11.5A6.5%206.5%200%200%201%2011%2017.5A6.5%206.5%200%200%201%2011.95%2014.14C11.32%2014.06%2010.68%2014%2010%2014M17.5%2014.5C19.16%2014.5%2020.5%2015.84%2020.5%2017.5C20.5%2018.06%2020.35%2018.58%2020.08%2019L16%2014.92C16.42%2014.65%2016.94%2014.5%2017.5%2014.5M14.92%2016L19%2020.08C18.58%2020.35%2018.06%2020.5%2017.5%2020.5C15.84%2020.5%2014.5%2019.16%2014.5%2017.5C14.5%2016.94%2014.65%2016.42%2014.92%2016Z'%20/%3e%3c/svg%3e",ome="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10.63,14.1C12.23,10.58%2016.38,9.03%2019.9,10.63C23.42,12.23%2024.97,16.38%2023.37,19.9C22.24,22.4%2019.75,24%2017,24C14.3,24%2011.83,22.44%2010.67,20H1V18C1.06,16.86%201.84,15.93%203.34,15.18C4.84,14.43%206.72,14.04%209,14C9.57,14%2010.11,14.05%2010.63,14.1V14.1M9,4C10.12,4.03%2011.06,4.42%2011.81,5.17C12.56,5.92%2012.93,6.86%2012.93,8C12.93,9.14%2012.56,10.08%2011.81,10.83C11.06,11.58%2010.12,11.95%209,11.95C7.88,11.95%206.94,11.58%206.19,10.83C5.44,10.08%205.07,9.14%205.07,8C5.07,6.86%205.44,5.92%206.19,5.17C6.94,4.42%207.88,4.03%209,4M17,22A5,5%200%200,0%2022,17A5,5%200%200,0%2017,12A5,5%200%200,0%2012,17A5,5%200%200,0%2017,22M16,14H17.5V16.82L19.94,18.23L19.19,19.53L16,17.69V14Z'%20/%3e%3c/svg%3e",oC="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M11.15,15.18L9.73,13.77L11.15,12.35L12.56,13.77L13.97,12.35L12.56,10.94L13.97,9.53L15.39,10.94L16.8,9.53L13.97,6.7L6.9,13.77L9.73,16.6L11.15,15.18M3.08,19L6.2,15.89L4.08,13.77L13.97,3.87L16.1,6L17.5,4.58L16.1,3.16L17.5,1.75L21.75,6L20.34,7.4L18.92,6L17.5,7.4L19.63,9.53L9.73,19.42L7.61,17.3L3.08,21.84V19Z'%20/%3e%3c/svg%3e",Cv="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20.71,7.04C21.1,6.65%2021.1,6%2020.71,5.63L18.37,3.29C18,2.9%2017.35,2.9%2016.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z'%20/%3e%3c/svg%3e",Fc="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2%200%200,0%208,21H16A2,2%200%200,0%2018,19V7H6V19Z'%20/%3e%3c/svg%3e",iC="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M8,12H16V14H8V12M10,20H6V4H13V9H18V12.1L20,10.1V8L14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H10V20M8,18H12.1L13,17.1V16H8V18M20.2,13C20.3,13%2020.5,13.1%2020.6,13.2L21.9,14.5C22.1,14.7%2022.1,15.1%2021.9,15.3L20.9,16.3L18.8,14.2L19.8,13.2C19.9,13.1%2020,13%2020.2,13M20.2,16.9L14.1,23H12V20.9L18.1,14.8L20.2,16.9Z'%20/%3e%3c/svg%3e",su="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'%20/%3e%3c/svg%3e";var Ip={exports:{}};var ime=Ip.exports,q3;function lme(){return q3||(q3=1,(function(e,t){(function(){var n,a="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,d="__lodash_placeholder__",A=1,m=2,p=4,h=1,y=2,g=1,_=2,b=4,S=8,B=16,F=32,T=64,E=128,x=256,C=512,D=30,U="...",L=800,H=16,oe=1,de=2,te=3,q=1/0,ce=9007199254740991,le=17976931348623157e292,Z=NaN,ne=4294967295,G=ne-1,W=ne>>>1,Q=[["ary",E],["bind",g],["bindKey",_],["curry",S],["curryRight",B],["flip",C],["partial",F],["partialRight",T],["rearg",x]],O="[object Arguments]",ae="[object Array]",j="[object AsyncFunction]",J="[object Boolean]",ie="[object Date]",X="[object DOMException]",fe="[object Error]",M="[object Function]",z="[object GeneratorFunction]",se="[object Map]",be="[object Number]",Fe="[object Null]",ye="[object Object]",Qe="[object Promise]",_e="[object Proxy]",Se="[object RegExp]",Ee="[object Set]",Ue="[object String]",je="[object Symbol]",at="[object Undefined]",mt="[object WeakMap]",xe="[object WeakSet]",Be="[object ArrayBuffer]",Ye="[object DataView]",kt="[object Float32Array]",xt="[object Float64Array]",Nt="[object Int8Array]",At="[object Int16Array]",Ot="[object Int32Array]",Dt="[object Uint8Array]",bt="[object Uint8ClampedArray]",Ze="[object Uint16Array]",qt="[object Uint32Array]",Vt=/\b__p \+= '';/g,zt=/\b(__p \+=) '' \+/g,ln=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dn=/&(?:amp|lt|gt|quot|#39);/g,vt=/[&<>"']/g,et=RegExp(Dn.source),Wt=RegExp(vt.source),_n=/<%-([\s\S]+?)%>/g,na=/<%([\s\S]+?)%>/g,rt=/<%=([\s\S]+?)%>/g,Pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ut=/^\w*$/,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xt=/[\\^$.*+?()[\]{}|]/g,bn=RegExp(Xt.source),wn=/^\s+/,Zn=/\s/,ua=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ce=/\{\n\/\* \[wrapped with (.+)\] \*/,He=/,? & /,Re=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Te=/[()=,{}\[\]\/\s]/,Ve=/\\(\\)?/g,$e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,Bt=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,pt=/^0o[0-7]+$/i,tt=/^(?:0|[1-9]\d*)$/,re=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,We=/['\n\r\u2028\u2029\\]/g,nt="\\ud800-\\udfff",Yt="\\u0300-\\u036f",Ct="\\ufe20-\\ufe2f",Xe="\\u20d0-\\u20ff",Et=Yt+Ct+Xe,ca="\\u2700-\\u27bf",Un="a-z\\xdf-\\xf6\\xf8-\\xff",Vr="\\xac\\xb1\\xd7\\xf7",Mn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ma="\\u2000-\\u206f",Qn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fr="A-Z\\xc0-\\xd6\\xd8-\\xde",oo="\\ufe0e\\ufe0f",Qs=Vr+Mn+ma+Qn,Mi="[']",Zu="["+nt+"]",ss="["+Qs+"]",Gr="["+Et+"]",Ir="\\d+",Ps="["+ca+"]",Rt="["+Un+"]",Ar="[^"+nt+Qs+Ir+ca+Un+fr+"]",Rn="\\ud83c[\\udffb-\\udfff]",os="(?:"+Gr+"|"+Rn+")",pa="[^"+nt+"]",ft="(?:\\ud83c[\\udde6-\\uddff]){2}",on="[\\ud800-\\udbff][\\udc00-\\udfff]",Bn="["+fr+"]",Ma="\\u200d",lu="(?:"+Rt+"|"+Ar+")",Hh="(?:"+Bn+"|"+Ar+")",cm="(?:"+Mi+"(?:d|ll|m|re|s|t|ve))?",dm="(?:"+Mi+"(?:D|LL|M|RE|S|T|VE))?",fm=os+"?",pl="["+oo+"]?",Oi="(?:"+Ma+"(?:"+[pa,ft,on].join("|")+")"+pl+fm+")*",Am="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mm="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",gf=pl+fm+Oi,uu="(?:"+[Ps,ft,on].join("|")+")"+gf,$h="(?:"+[pa+Gr+"?",Gr,ft,on,Zu].join("|")+")",Qh=RegExp(Mi,"g"),ec=RegExp(Gr,"g"),Xo=RegExp(Rn+"(?="+Rn+")|"+$h+gf,"g"),Gh=RegExp([Bn+"?"+Rt+"+"+cm+"(?="+[ss,Bn,"$"].join("|")+")",Hh+"+"+dm+"(?="+[ss,Bn+lu,"$"].join("|")+")",Bn+"?"+lu+"+"+cm,Bn+"+"+dm,mm,Am,Ir,uu].join("|"),"g"),zh=RegExp("["+Ma+nt+Et+oo+"]"),td=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vm=-1,Na={};Na[kt]=Na[xt]=Na[Nt]=Na[At]=Na[Ot]=Na[Dt]=Na[bt]=Na[Ze]=Na[qt]=!0,Na[O]=Na[ae]=Na[Be]=Na[J]=Na[Ye]=Na[ie]=Na[fe]=Na[M]=Na[se]=Na[be]=Na[ye]=Na[Se]=Na[Ee]=Na[Ue]=Na[mt]=!1;var Ea={};Ea[O]=Ea[ae]=Ea[Be]=Ea[Ye]=Ea[J]=Ea[ie]=Ea[kt]=Ea[xt]=Ea[Nt]=Ea[At]=Ea[Ot]=Ea[se]=Ea[be]=Ea[ye]=Ea[Se]=Ea[Ee]=Ea[Ue]=Ea[je]=Ea[Dt]=Ea[bt]=Ea[Ze]=Ea[qt]=!0,Ea[fe]=Ea[M]=Ea[mt]=!1;var Ne={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ht={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},un={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ut=parseFloat,hn=parseInt,rn=typeof oy=="object"&&oy&&oy.Object===Object&&oy,qn=typeof self=="object"&&self&&self.Object===Object&&self,sn=rn||qn||Function("return this")(),rr=t&&!t.nodeType&&t,Fn=rr&&!0&&e&&!e.nodeType&&e,nd=Fn&&Fn.exports===rr,ad=nd&&rn.process,is=(function(){try{var ct=Fn&&Fn.require&&Fn.require("util").types;return ct||ad&&ad.binding&&ad.binding("util")}catch{}})(),_r=is&&is.isArrayBuffer,nc=is&&is.isDate,ac=is&&is.isMap,Hi=is&&is.isRegExp,Gs=is&&is.isSet,gs=is&&is.isTypedArray;function aa(ct,Lt,Ft){switch(Ft.length){case 0:return ct.call(Lt);case 1:return ct.call(Lt,Ft[0]);case 2:return ct.call(Lt,Ft[0],Ft[1]);case 3:return ct.call(Lt,Ft[0],Ft[1],Ft[2])}return ct.apply(Lt,Ft)}function cu(ct,Lt,Ft,yn){for(var Xn=-1,$a=ct==null?0:ct.length;++Xn<$a;){var _s=ct[Xn];Lt(yn,_s,Ft(_s),ct)}return yn}function zr(ct,Lt){for(var Ft=-1,yn=ct==null?0:ct.length;++Ft<yn&&Lt(ct[Ft],Ft,ct)!==!1;);return ct}function $i(ct,Lt){for(var Ft=ct==null?0:ct.length;Ft--&&Lt(ct[Ft],Ft,ct)!==!1;);return ct}function zs(ct,Lt){for(var Ft=-1,yn=ct==null?0:ct.length;++Ft<yn;)if(!Lt(ct[Ft],Ft,ct))return!1;return!0}function Fr(ct,Lt){for(var Ft=-1,yn=ct==null?0:ct.length,Xn=0,$a=[];++Ft<yn;){var _s=ct[Ft];Lt(_s,Ft,ct)&&($a[Xn++]=_s)}return $a}function rc(ct,Lt){var Ft=ct==null?0:ct.length;return!!Ft&&pi(ct,Lt,0)>-1}function du(ct,Lt,Ft){for(var yn=-1,Xn=ct==null?0:ct.length;++yn<Xn;)if(Ft(Lt,ct[yn]))return!0;return!1}function ga(ct,Lt){for(var Ft=-1,yn=ct==null?0:ct.length,Xn=Array(yn);++Ft<yn;)Xn[Ft]=Lt(ct[Ft],Ft,ct);return Xn}function Ds(ct,Lt){for(var Ft=-1,yn=Lt.length,Xn=ct.length;++Ft<yn;)ct[Xn+Ft]=Lt[Ft];return ct}function Jo(ct,Lt,Ft,yn){var Xn=-1,$a=ct==null?0:ct.length;for(yn&&$a&&(Ft=ct[++Xn]);++Xn<$a;)Ft=Lt(Ft,ct[Xn],Xn,ct);return Ft}function hm(ct,Lt,Ft,yn){var Xn=ct==null?0:ct.length;for(yn&&Xn&&(Ft=ct[--Xn]);Xn--;)Ft=Lt(Ft,ct[Xn],Xn,ct);return Ft}function Ke(ct,Lt){for(var Ft=-1,yn=ct==null?0:ct.length;++Ft<yn;)if(Lt(ct[Ft],Ft,ct))return!0;return!1}var wa=Le("length");function hi(ct){return ct.split("")}function Zo(ct){return ct.match(Re)||[]}function Wh(ct,Lt,Ft){var yn;return Ft(ct,function(Xn,$a,_s){if(Lt(Xn,$a,_s))return yn=$a,!1}),yn}function yf(ct,Lt,Ft,yn){for(var Xn=ct.length,$a=Ft+(yn?1:-1);yn?$a--:++$a<Xn;)if(Lt(ct[$a],$a,ct))return $a;return-1}function pi(ct,Lt,Ft){return Lt===Lt?hW(ct,Lt,Ft):yf(ct,ve,Ft)}function V(ct,Lt,Ft,yn){for(var Xn=Ft-1,$a=ct.length;++Xn<$a;)if(yn(ct[Xn],Lt))return Xn;return-1}function ve(ct){return ct!==ct}function we(ct,Lt){var Ft=ct==null?0:ct.length;return Ft?Ha(ct,Lt)/Ft:Z}function Le(ct){return function(Lt){return Lt==null?n:Lt[ct]}}function _t(ct){return function(Lt){return ct==null?n:ct[Lt]}}function Pt(ct,Lt,Ft,yn,Xn){return Xn(ct,function($a,_s,lr){Ft=yn?(yn=!1,$a):Lt(Ft,$a,_s,lr)}),Ft}function an(ct,Lt){var Ft=ct.length;for(ct.sort(Lt);Ft--;)ct[Ft]=ct[Ft].value;return ct}function Ha(ct,Lt){for(var Ft,yn=-1,Xn=ct.length;++yn<Xn;){var $a=Lt(ct[yn]);$a!==n&&(Ft=Ft===n?$a:Ft+$a)}return Ft}function Wr(ct,Lt){for(var Ft=-1,yn=Array(ct);++Ft<ct;)yn[Ft]=Lt(Ft);return yn}function ka(ct,Lt){return ga(Lt,function(Ft){return[Ft,ct[Ft]]})}function ys(ct){return ct&&ct.slice(0,pI(ct)+1).replace(wn,"")}function ja(ct){return function(Lt){return ct(Lt)}}function fu(ct,Lt){return ga(Lt,function(Ft){return ct[Ft]})}function Ws(ct,Lt){return ct.has(Lt)}function _f(ct,Lt){for(var Ft=-1,yn=ct.length;++Ft<yn&&pi(Lt,ct[Ft],0)>-1;);return Ft}function pm(ct,Lt){for(var Ft=ct.length;Ft--&&pi(Lt,ct[Ft],0)>-1;);return Ft}function lW(ct,Lt){for(var Ft=ct.length,yn=0;Ft--;)ct[Ft]===Lt&&++yn;return yn}var uW=_t(Ne),cW=_t(me);function dW(ct){return"\\"+un[ct]}function fW(ct,Lt){return ct==null?n:ct[Lt]}function gm(ct){return zh.test(ct)}function AW(ct){return td.test(ct)}function mW(ct){for(var Lt,Ft=[];!(Lt=ct.next()).done;)Ft.push(Lt.value);return Ft}function kb(ct){var Lt=-1,Ft=Array(ct.size);return ct.forEach(function(yn,Xn){Ft[++Lt]=[Xn,yn]}),Ft}function hI(ct,Lt){return function(Ft){return ct(Lt(Ft))}}function rd(ct,Lt){for(var Ft=-1,yn=ct.length,Xn=0,$a=[];++Ft<yn;){var _s=ct[Ft];(_s===Lt||_s===d)&&(ct[Ft]=d,$a[Xn++]=Ft)}return $a}function u1(ct){var Lt=-1,Ft=Array(ct.size);return ct.forEach(function(yn){Ft[++Lt]=yn}),Ft}function vW(ct){var Lt=-1,Ft=Array(ct.size);return ct.forEach(function(yn){Ft[++Lt]=[yn,yn]}),Ft}function hW(ct,Lt,Ft){for(var yn=Ft-1,Xn=ct.length;++yn<Xn;)if(ct[yn]===Lt)return yn;return-1}function pW(ct,Lt,Ft){for(var yn=Ft+1;yn--;)if(ct[yn]===Lt)return yn;return yn}function ym(ct){return gm(ct)?yW(ct):wa(ct)}function gl(ct){return gm(ct)?_W(ct):hi(ct)}function pI(ct){for(var Lt=ct.length;Lt--&&Zn.test(ct.charAt(Lt)););return Lt}var gW=_t(Ht);function yW(ct){for(var Lt=Xo.lastIndex=0;Xo.test(ct);)++Lt;return Lt}function _W(ct){return ct.match(Xo)||[]}function wW(ct){return ct.match(Gh)||[]}var bW=(function ct(Lt){Lt=Lt==null?sn:_m.defaults(sn.Object(),Lt,_m.pick(sn,tc));var Ft=Lt.Array,yn=Lt.Date,Xn=Lt.Error,$a=Lt.Function,_s=Lt.Math,lr=Lt.Object,Bb=Lt.RegExp,xW=Lt.String,Qi=Lt.TypeError,c1=Ft.prototype,CW=$a.prototype,wm=lr.prototype,d1=Lt["__core-js_shared__"],f1=CW.toString,tr=wm.hasOwnProperty,SW=0,gI=(function(){var w=/[^.]+$/.exec(d1&&d1.keys&&d1.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})(),A1=wm.toString,EW=f1.call(lr),kW=sn._,BW=Bb("^"+f1.call(tr).replace(Xt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m1=nd?Lt.Buffer:n,sd=Lt.Symbol,v1=Lt.Uint8Array,yI=m1?m1.allocUnsafe:n,h1=hI(lr.getPrototypeOf,lr),_I=lr.create,wI=wm.propertyIsEnumerable,p1=c1.splice,bI=sd?sd.isConcatSpreadable:n,Kh=sd?sd.iterator:n,wf=sd?sd.toStringTag:n,g1=(function(){try{var w=Ef(lr,"defineProperty");return w({},"",{}),w}catch{}})(),TW=Lt.clearTimeout!==sn.clearTimeout&&Lt.clearTimeout,IW=yn&&yn.now!==sn.Date.now&&yn.now,FW=Lt.setTimeout!==sn.setTimeout&&Lt.setTimeout,y1=_s.ceil,_1=_s.floor,Tb=lr.getOwnPropertySymbols,PW=m1?m1.isBuffer:n,xI=Lt.isFinite,DW=c1.join,UW=hI(lr.keys,lr),ws=_s.max,io=_s.min,RW=yn.now,NW=Lt.parseInt,CI=_s.random,VW=c1.reverse,Ib=Ef(Lt,"DataView"),jh=Ef(Lt,"Map"),Fb=Ef(Lt,"Promise"),bm=Ef(Lt,"Set"),qh=Ef(Lt,"WeakMap"),Yh=Ef(lr,"create"),w1=qh&&new qh,xm={},LW=kf(Ib),MW=kf(jh),OW=kf(Fb),HW=kf(bm),$W=kf(qh),b1=sd?sd.prototype:n,Xh=b1?b1.valueOf:n,SI=b1?b1.toString:n;function De(w){if(Lr(w)&&!ea(w)&&!(w instanceof ya)){if(w instanceof Gi)return w;if(tr.call(w,"__wrapped__"))return EF(w)}return new Gi(w)}var Cm=(function(){function w(){}return function(k){if(!Ur(k))return{};if(_I)return _I(k);w.prototype=k;var Y=new w;return w.prototype=n,Y}})();function x1(){}function Gi(w,k){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!k,this.__index__=0,this.__values__=n}De.templateSettings={escape:_n,evaluate:na,interpolate:rt,variable:"",imports:{_:De}},De.prototype=x1.prototype,De.prototype.constructor=De,Gi.prototype=Cm(x1.prototype),Gi.prototype.constructor=Gi;function ya(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ne,this.__views__=[]}function QW(){var w=new ya(this.__wrapped__);return w.__actions__=ei(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=ei(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=ei(this.__views__),w}function GW(){if(this.__filtered__){var w=new ya(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function zW(){var w=this.__wrapped__.value(),k=this.__dir__,Y=ea(w),pe=k<0,ke=Y?w.length:0,Me=aj(0,ke,this.__views__),Je=Me.start,st=Me.end,ht=st-Je,$t=pe?st:Je-1,Qt=this.__iteratees__,jt=Qt.length,cn=0,xn=io(ht,this.__takeCount__);if(!Y||!pe&&ke==ht&&xn==ht)return qI(w,this.__actions__);var On=[];e:for(;ht--&&cn<xn;){$t+=k;for(var da=-1,Hn=w[$t];++da<jt;){var va=Qt[da],ba=va.iteratee,_i=va.type,Vo=ba(Hn);if(_i==de)Hn=Vo;else if(!Vo){if(_i==oe)continue e;break e}}On[cn++]=Hn}return On}ya.prototype=Cm(x1.prototype),ya.prototype.constructor=ya;function bf(w){var k=-1,Y=w==null?0:w.length;for(this.clear();++k<Y;){var pe=w[k];this.set(pe[0],pe[1])}}function WW(){this.__data__=Yh?Yh(null):{},this.size=0}function KW(w){var k=this.has(w)&&delete this.__data__[w];return this.size-=k?1:0,k}function jW(w){var k=this.__data__;if(Yh){var Y=k[w];return Y===c?n:Y}return tr.call(k,w)?k[w]:n}function qW(w){var k=this.__data__;return Yh?k[w]!==n:tr.call(k,w)}function YW(w,k){var Y=this.__data__;return this.size+=this.has(w)?0:1,Y[w]=Yh&&k===n?c:k,this}bf.prototype.clear=WW,bf.prototype.delete=KW,bf.prototype.get=jW,bf.prototype.has=qW,bf.prototype.set=YW;function sc(w){var k=-1,Y=w==null?0:w.length;for(this.clear();++k<Y;){var pe=w[k];this.set(pe[0],pe[1])}}function XW(){this.__data__=[],this.size=0}function JW(w){var k=this.__data__,Y=C1(k,w);if(Y<0)return!1;var pe=k.length-1;return Y==pe?k.pop():p1.call(k,Y,1),--this.size,!0}function ZW(w){var k=this.__data__,Y=C1(k,w);return Y<0?n:k[Y][1]}function eK(w){return C1(this.__data__,w)>-1}function tK(w,k){var Y=this.__data__,pe=C1(Y,w);return pe<0?(++this.size,Y.push([w,k])):Y[pe][1]=k,this}sc.prototype.clear=XW,sc.prototype.delete=JW,sc.prototype.get=ZW,sc.prototype.has=eK,sc.prototype.set=tK;function oc(w){var k=-1,Y=w==null?0:w.length;for(this.clear();++k<Y;){var pe=w[k];this.set(pe[0],pe[1])}}function nK(){this.size=0,this.__data__={hash:new bf,map:new(jh||sc),string:new bf}}function aK(w){var k=N1(this,w).delete(w);return this.size-=k?1:0,k}function rK(w){return N1(this,w).get(w)}function sK(w){return N1(this,w).has(w)}function oK(w,k){var Y=N1(this,w),pe=Y.size;return Y.set(w,k),this.size+=Y.size==pe?0:1,this}oc.prototype.clear=nK,oc.prototype.delete=aK,oc.prototype.get=rK,oc.prototype.has=sK,oc.prototype.set=oK;function xf(w){var k=-1,Y=w==null?0:w.length;for(this.__data__=new oc;++k<Y;)this.add(w[k])}function iK(w){return this.__data__.set(w,c),this}function lK(w){return this.__data__.has(w)}xf.prototype.add=xf.prototype.push=iK,xf.prototype.has=lK;function yl(w){var k=this.__data__=new sc(w);this.size=k.size}function uK(){this.__data__=new sc,this.size=0}function cK(w){var k=this.__data__,Y=k.delete(w);return this.size=k.size,Y}function dK(w){return this.__data__.get(w)}function fK(w){return this.__data__.has(w)}function AK(w,k){var Y=this.__data__;if(Y instanceof sc){var pe=Y.__data__;if(!jh||pe.length<r-1)return pe.push([w,k]),this.size=++Y.size,this;Y=this.__data__=new oc(pe)}return Y.set(w,k),this.size=Y.size,this}yl.prototype.clear=uK,yl.prototype.delete=cK,yl.prototype.get=dK,yl.prototype.has=fK,yl.prototype.set=AK;function EI(w,k){var Y=ea(w),pe=!Y&&Bf(w),ke=!Y&&!pe&&cd(w),Me=!Y&&!pe&&!ke&&Bm(w),Je=Y||pe||ke||Me,st=Je?Wr(w.length,xW):[],ht=st.length;for(var $t in w)(k||tr.call(w,$t))&&!(Je&&($t=="length"||ke&&($t=="offset"||$t=="parent")||Me&&($t=="buffer"||$t=="byteLength"||$t=="byteOffset")||cc($t,ht)))&&st.push($t);return st}function kI(w){var k=w.length;return k?w[$b(0,k-1)]:n}function mK(w,k){return V1(ei(w),Cf(k,0,w.length))}function vK(w){return V1(ei(w))}function Pb(w,k,Y){(Y!==n&&!_l(w[k],Y)||Y===n&&!(k in w))&&ic(w,k,Y)}function Jh(w,k,Y){var pe=w[k];(!(tr.call(w,k)&&_l(pe,Y))||Y===n&&!(k in w))&&ic(w,k,Y)}function C1(w,k){for(var Y=w.length;Y--;)if(_l(w[Y][0],k))return Y;return-1}function hK(w,k,Y,pe){return od(w,function(ke,Me,Je){k(pe,ke,Y(ke),Je)}),pe}function BI(w,k){return w&&mu(k,Us(k),w)}function pK(w,k){return w&&mu(k,ni(k),w)}function ic(w,k,Y){k=="__proto__"&&g1?g1(w,k,{configurable:!0,enumerable:!0,value:Y,writable:!0}):w[k]=Y}function Db(w,k){for(var Y=-1,pe=k.length,ke=Ft(pe),Me=w==null;++Y<pe;)ke[Y]=Me?n:Ax(w,k[Y]);return ke}function Cf(w,k,Y){return w===w&&(Y!==n&&(w=w<=Y?w:Y),k!==n&&(w=w>=k?w:k)),w}function zi(w,k,Y,pe,ke,Me){var Je,st=k&A,ht=k&m,$t=k&p;if(Y&&(Je=ke?Y(w,pe,ke,Me):Y(w)),Je!==n)return Je;if(!Ur(w))return w;var Qt=ea(w);if(Qt){if(Je=sj(w),!st)return ei(w,Je)}else{var jt=lo(w),cn=jt==M||jt==z;if(cd(w))return JI(w,st);if(jt==ye||jt==O||cn&&!ke){if(Je=ht||cn?{}:pF(w),!st)return ht?jK(w,pK(Je,w)):KK(w,BI(Je,w))}else{if(!Ea[jt])return ke?w:{};Je=oj(w,jt,st)}}Me||(Me=new yl);var xn=Me.get(w);if(xn)return xn;Me.set(w,Je),WF(w)?w.forEach(function(Hn){Je.add(zi(Hn,k,Y,Hn,w,Me))}):GF(w)&&w.forEach(function(Hn,va){Je.set(va,zi(Hn,k,Y,va,w,Me))});var On=$t?ht?Zb:Jb:ht?ni:Us,da=Qt?n:On(w);return zr(da||w,function(Hn,va){da&&(va=Hn,Hn=w[va]),Jh(Je,va,zi(Hn,k,Y,va,w,Me))}),Je}function gK(w){var k=Us(w);return function(Y){return TI(Y,w,k)}}function TI(w,k,Y){var pe=Y.length;if(w==null)return!pe;for(w=lr(w);pe--;){var ke=Y[pe],Me=k[ke],Je=w[ke];if(Je===n&&!(ke in w)||!Me(Je))return!1}return!0}function II(w,k,Y){if(typeof w!="function")throw new Qi(o);return sp(function(){w.apply(n,Y)},k)}function Zh(w,k,Y,pe){var ke=-1,Me=rc,Je=!0,st=w.length,ht=[],$t=k.length;if(!st)return ht;Y&&(k=ga(k,ja(Y))),pe?(Me=du,Je=!1):k.length>=r&&(Me=Ws,Je=!1,k=new xf(k));e:for(;++ke<st;){var Qt=w[ke],jt=Y==null?Qt:Y(Qt);if(Qt=pe||Qt!==0?Qt:0,Je&&jt===jt){for(var cn=$t;cn--;)if(k[cn]===jt)continue e;ht.push(Qt)}else Me(k,jt,pe)||ht.push(Qt)}return ht}var od=aF(Au),FI=aF(Rb,!0);function yK(w,k){var Y=!0;return od(w,function(pe,ke,Me){return Y=!!k(pe,ke,Me),Y}),Y}function S1(w,k,Y){for(var pe=-1,ke=w.length;++pe<ke;){var Me=w[pe],Je=k(Me);if(Je!=null&&(st===n?Je===Je&&!yi(Je):Y(Je,st)))var st=Je,ht=Me}return ht}function _K(w,k,Y,pe){var ke=w.length;for(Y=ia(Y),Y<0&&(Y=-Y>ke?0:ke+Y),pe=pe===n||pe>ke?ke:ia(pe),pe<0&&(pe+=ke),pe=Y>pe?0:jF(pe);Y<pe;)w[Y++]=k;return w}function PI(w,k){var Y=[];return od(w,function(pe,ke,Me){k(pe,ke,Me)&&Y.push(pe)}),Y}function Ks(w,k,Y,pe,ke){var Me=-1,Je=w.length;for(Y||(Y=lj),ke||(ke=[]);++Me<Je;){var st=w[Me];k>0&&Y(st)?k>1?Ks(st,k-1,Y,pe,ke):Ds(ke,st):pe||(ke[ke.length]=st)}return ke}var Ub=rF(),DI=rF(!0);function Au(w,k){return w&&Ub(w,k,Us)}function Rb(w,k){return w&&DI(w,k,Us)}function E1(w,k){return Fr(k,function(Y){return dc(w[Y])})}function Sf(w,k){k=ld(k,w);for(var Y=0,pe=k.length;w!=null&&Y<pe;)w=w[vu(k[Y++])];return Y&&Y==pe?w:n}function UI(w,k,Y){var pe=k(w);return ea(w)?pe:Ds(pe,Y(w))}function Ro(w){return w==null?w===n?at:Fe:wf&&wf in lr(w)?nj(w):vj(w)}function Nb(w,k){return w>k}function wK(w,k){return w!=null&&tr.call(w,k)}function bK(w,k){return w!=null&&k in lr(w)}function xK(w,k,Y){return w>=io(k,Y)&&w<ws(k,Y)}function Vb(w,k,Y){for(var pe=Y?du:rc,ke=w[0].length,Me=w.length,Je=Me,st=Ft(Me),ht=1/0,$t=[];Je--;){var Qt=w[Je];Je&&k&&(Qt=ga(Qt,ja(k))),ht=io(Qt.length,ht),st[Je]=!Y&&(k||ke>=120&&Qt.length>=120)?new xf(Je&&Qt):n}Qt=w[0];var jt=-1,cn=st[0];e:for(;++jt<ke&&$t.length<ht;){var xn=Qt[jt],On=k?k(xn):xn;if(xn=Y||xn!==0?xn:0,!(cn?Ws(cn,On):pe($t,On,Y))){for(Je=Me;--Je;){var da=st[Je];if(!(da?Ws(da,On):pe(w[Je],On,Y)))continue e}cn&&cn.push(On),$t.push(xn)}}return $t}function CK(w,k,Y,pe){return Au(w,function(ke,Me,Je){k(pe,Y(ke),Me,Je)}),pe}function ep(w,k,Y){k=ld(k,w),w=wF(w,k);var pe=w==null?w:w[vu(Ki(k))];return pe==null?n:aa(pe,w,Y)}function RI(w){return Lr(w)&&Ro(w)==O}function SK(w){return Lr(w)&&Ro(w)==Be}function EK(w){return Lr(w)&&Ro(w)==ie}function tp(w,k,Y,pe,ke){return w===k?!0:w==null||k==null||!Lr(w)&&!Lr(k)?w!==w&&k!==k:kK(w,k,Y,pe,tp,ke)}function kK(w,k,Y,pe,ke,Me){var Je=ea(w),st=ea(k),ht=Je?ae:lo(w),$t=st?ae:lo(k);ht=ht==O?ye:ht,$t=$t==O?ye:$t;var Qt=ht==ye,jt=$t==ye,cn=ht==$t;if(cn&&cd(w)){if(!cd(k))return!1;Je=!0,Qt=!1}if(cn&&!Qt)return Me||(Me=new yl),Je||Bm(w)?mF(w,k,Y,pe,ke,Me):ej(w,k,ht,Y,pe,ke,Me);if(!(Y&h)){var xn=Qt&&tr.call(w,"__wrapped__"),On=jt&&tr.call(k,"__wrapped__");if(xn||On){var da=xn?w.value():w,Hn=On?k.value():k;return Me||(Me=new yl),ke(da,Hn,Y,pe,Me)}}return cn?(Me||(Me=new yl),tj(w,k,Y,pe,ke,Me)):!1}function BK(w){return Lr(w)&&lo(w)==se}function Lb(w,k,Y,pe){var ke=Y.length,Me=ke,Je=!pe;if(w==null)return!Me;for(w=lr(w);ke--;){var st=Y[ke];if(Je&&st[2]?st[1]!==w[st[0]]:!(st[0]in w))return!1}for(;++ke<Me;){st=Y[ke];var ht=st[0],$t=w[ht],Qt=st[1];if(Je&&st[2]){if($t===n&&!(ht in w))return!1}else{var jt=new yl;if(pe)var cn=pe($t,Qt,ht,w,k,jt);if(!(cn===n?tp(Qt,$t,h|y,pe,jt):cn))return!1}}return!0}function NI(w){if(!Ur(w)||cj(w))return!1;var k=dc(w)?BW:gt;return k.test(kf(w))}function TK(w){return Lr(w)&&Ro(w)==Se}function IK(w){return Lr(w)&&lo(w)==Ee}function FK(w){return Lr(w)&&Q1(w.length)&&!!Na[Ro(w)]}function VI(w){return typeof w=="function"?w:w==null?ai:typeof w=="object"?ea(w)?OI(w[0],w[1]):MI(w):sP(w)}function Mb(w){if(!rp(w))return UW(w);var k=[];for(var Y in lr(w))tr.call(w,Y)&&Y!="constructor"&&k.push(Y);return k}function PK(w){if(!Ur(w))return mj(w);var k=rp(w),Y=[];for(var pe in w)pe=="constructor"&&(k||!tr.call(w,pe))||Y.push(pe);return Y}function Ob(w,k){return w<k}function LI(w,k){var Y=-1,pe=ti(w)?Ft(w.length):[];return od(w,function(ke,Me,Je){pe[++Y]=k(ke,Me,Je)}),pe}function MI(w){var k=tx(w);return k.length==1&&k[0][2]?yF(k[0][0],k[0][1]):function(Y){return Y===w||Lb(Y,w,k)}}function OI(w,k){return ax(w)&&gF(k)?yF(vu(w),k):function(Y){var pe=Ax(Y,w);return pe===n&&pe===k?mx(Y,w):tp(k,pe,h|y)}}function k1(w,k,Y,pe,ke){w!==k&&Ub(k,function(Me,Je){if(ke||(ke=new yl),Ur(Me))DK(w,k,Je,Y,k1,pe,ke);else{var st=pe?pe(sx(w,Je),Me,Je+"",w,k,ke):n;st===n&&(st=Me),Pb(w,Je,st)}},ni)}function DK(w,k,Y,pe,ke,Me,Je){var st=sx(w,Y),ht=sx(k,Y),$t=Je.get(ht);if($t){Pb(w,Y,$t);return}var Qt=Me?Me(st,ht,Y+"",w,k,Je):n,jt=Qt===n;if(jt){var cn=ea(ht),xn=!cn&&cd(ht),On=!cn&&!xn&&Bm(ht);Qt=ht,cn||xn||On?ea(st)?Qt=st:Kr(st)?Qt=ei(st):xn?(jt=!1,Qt=JI(ht,!0)):On?(jt=!1,Qt=ZI(ht,!0)):Qt=[]:op(ht)||Bf(ht)?(Qt=st,Bf(st)?Qt=qF(st):(!Ur(st)||dc(st))&&(Qt=pF(ht))):jt=!1}jt&&(Je.set(ht,Qt),ke(Qt,ht,pe,Me,Je),Je.delete(ht)),Pb(w,Y,Qt)}function HI(w,k){var Y=w.length;if(Y)return k+=k<0?Y:0,cc(k,Y)?w[k]:n}function $I(w,k,Y){k.length?k=ga(k,function(Me){return ea(Me)?function(Je){return Sf(Je,Me.length===1?Me[0]:Me)}:Me}):k=[ai];var pe=-1;k=ga(k,ja(Nn()));var ke=LI(w,function(Me,Je,st){var ht=ga(k,function($t){return $t(Me)});return{criteria:ht,index:++pe,value:Me}});return an(ke,function(Me,Je){return WK(Me,Je,Y)})}function UK(w,k){return QI(w,k,function(Y,pe){return mx(w,pe)})}function QI(w,k,Y){for(var pe=-1,ke=k.length,Me={};++pe<ke;){var Je=k[pe],st=Sf(w,Je);Y(st,Je)&&np(Me,ld(Je,w),st)}return Me}function RK(w){return function(k){return Sf(k,w)}}function Hb(w,k,Y,pe){var ke=pe?V:pi,Me=-1,Je=k.length,st=w;for(w===k&&(k=ei(k)),Y&&(st=ga(w,ja(Y)));++Me<Je;)for(var ht=0,$t=k[Me],Qt=Y?Y($t):$t;(ht=ke(st,Qt,ht,pe))>-1;)st!==w&&p1.call(st,ht,1),p1.call(w,ht,1);return w}function GI(w,k){for(var Y=w?k.length:0,pe=Y-1;Y--;){var ke=k[Y];if(Y==pe||ke!==Me){var Me=ke;cc(ke)?p1.call(w,ke,1):zb(w,ke)}}return w}function $b(w,k){return w+_1(CI()*(k-w+1))}function NK(w,k,Y,pe){for(var ke=-1,Me=ws(y1((k-w)/(Y||1)),0),Je=Ft(Me);Me--;)Je[pe?Me:++ke]=w,w+=Y;return Je}function Qb(w,k){var Y="";if(!w||k<1||k>ce)return Y;do k%2&&(Y+=w),k=_1(k/2),k&&(w+=w);while(k);return Y}function fa(w,k){return ox(_F(w,k,ai),w+"")}function VK(w){return kI(Tm(w))}function LK(w,k){var Y=Tm(w);return V1(Y,Cf(k,0,Y.length))}function np(w,k,Y,pe){if(!Ur(w))return w;k=ld(k,w);for(var ke=-1,Me=k.length,Je=Me-1,st=w;st!=null&&++ke<Me;){var ht=vu(k[ke]),$t=Y;if(ht==="__proto__"||ht==="constructor"||ht==="prototype")return w;if(ke!=Je){var Qt=st[ht];$t=pe?pe(Qt,ht,st):n,$t===n&&($t=Ur(Qt)?Qt:cc(k[ke+1])?[]:{})}Jh(st,ht,$t),st=st[ht]}return w}var zI=w1?function(w,k){return w1.set(w,k),w}:ai,MK=g1?function(w,k){return g1(w,"toString",{configurable:!0,enumerable:!1,value:hx(k),writable:!0})}:ai;function OK(w){return V1(Tm(w))}function Wi(w,k,Y){var pe=-1,ke=w.length;k<0&&(k=-k>ke?0:ke+k),Y=Y>ke?ke:Y,Y<0&&(Y+=ke),ke=k>Y?0:Y-k>>>0,k>>>=0;for(var Me=Ft(ke);++pe<ke;)Me[pe]=w[pe+k];return Me}function HK(w,k){var Y;return od(w,function(pe,ke,Me){return Y=k(pe,ke,Me),!Y}),!!Y}function B1(w,k,Y){var pe=0,ke=w==null?pe:w.length;if(typeof k=="number"&&k===k&&ke<=W){for(;pe<ke;){var Me=pe+ke>>>1,Je=w[Me];Je!==null&&!yi(Je)&&(Y?Je<=k:Je<k)?pe=Me+1:ke=Me}return ke}return Gb(w,k,ai,Y)}function Gb(w,k,Y,pe){var ke=0,Me=w==null?0:w.length;if(Me===0)return 0;k=Y(k);for(var Je=k!==k,st=k===null,ht=yi(k),$t=k===n;ke<Me;){var Qt=_1((ke+Me)/2),jt=Y(w[Qt]),cn=jt!==n,xn=jt===null,On=jt===jt,da=yi(jt);if(Je)var Hn=pe||On;else $t?Hn=On&&(pe||cn):st?Hn=On&&cn&&(pe||!xn):ht?Hn=On&&cn&&!xn&&(pe||!da):xn||da?Hn=!1:Hn=pe?jt<=k:jt<k;Hn?ke=Qt+1:Me=Qt}return io(Me,G)}function WI(w,k){for(var Y=-1,pe=w.length,ke=0,Me=[];++Y<pe;){var Je=w[Y],st=k?k(Je):Je;if(!Y||!_l(st,ht)){var ht=st;Me[ke++]=Je===0?0:Je}}return Me}function KI(w){return typeof w=="number"?w:yi(w)?Z:+w}function gi(w){if(typeof w=="string")return w;if(ea(w))return ga(w,gi)+"";if(yi(w))return SI?SI.call(w):"";var k=w+"";return k=="0"&&1/w==-q?"-0":k}function id(w,k,Y){var pe=-1,ke=rc,Me=w.length,Je=!0,st=[],ht=st;if(Y)Je=!1,ke=du;else if(Me>=r){var $t=k?null:JK(w);if($t)return u1($t);Je=!1,ke=Ws,ht=new xf}else ht=k?[]:st;e:for(;++pe<Me;){var Qt=w[pe],jt=k?k(Qt):Qt;if(Qt=Y||Qt!==0?Qt:0,Je&&jt===jt){for(var cn=ht.length;cn--;)if(ht[cn]===jt)continue e;k&&ht.push(jt),st.push(Qt)}else ke(ht,jt,Y)||(ht!==st&&ht.push(jt),st.push(Qt))}return st}function zb(w,k){return k=ld(k,w),w=wF(w,k),w==null||delete w[vu(Ki(k))]}function jI(w,k,Y,pe){return np(w,k,Y(Sf(w,k)),pe)}function T1(w,k,Y,pe){for(var ke=w.length,Me=pe?ke:-1;(pe?Me--:++Me<ke)&&k(w[Me],Me,w););return Y?Wi(w,pe?0:Me,pe?Me+1:ke):Wi(w,pe?Me+1:0,pe?ke:Me)}function qI(w,k){var Y=w;return Y instanceof ya&&(Y=Y.value()),Jo(k,function(pe,ke){return ke.func.apply(ke.thisArg,Ds([pe],ke.args))},Y)}function Wb(w,k,Y){var pe=w.length;if(pe<2)return pe?id(w[0]):[];for(var ke=-1,Me=Ft(pe);++ke<pe;)for(var Je=w[ke],st=-1;++st<pe;)st!=ke&&(Me[ke]=Zh(Me[ke]||Je,w[st],k,Y));return id(Ks(Me,1),k,Y)}function YI(w,k,Y){for(var pe=-1,ke=w.length,Me=k.length,Je={};++pe<ke;){var st=pe<Me?k[pe]:n;Y(Je,w[pe],st)}return Je}function Kb(w){return Kr(w)?w:[]}function jb(w){return typeof w=="function"?w:ai}function ld(w,k){return ea(w)?w:ax(w,k)?[w]:SF(qa(w))}var $K=fa;function ud(w,k,Y){var pe=w.length;return Y=Y===n?pe:Y,!k&&Y>=pe?w:Wi(w,k,Y)}var XI=TW||function(w){return sn.clearTimeout(w)};function JI(w,k){if(k)return w.slice();var Y=w.length,pe=yI?yI(Y):new w.constructor(Y);return w.copy(pe),pe}function qb(w){var k=new w.constructor(w.byteLength);return new v1(k).set(new v1(w)),k}function QK(w,k){var Y=k?qb(w.buffer):w.buffer;return new w.constructor(Y,w.byteOffset,w.byteLength)}function GK(w){var k=new w.constructor(w.source,dt.exec(w));return k.lastIndex=w.lastIndex,k}function zK(w){return Xh?lr(Xh.call(w)):{}}function ZI(w,k){var Y=k?qb(w.buffer):w.buffer;return new w.constructor(Y,w.byteOffset,w.length)}function eF(w,k){if(w!==k){var Y=w!==n,pe=w===null,ke=w===w,Me=yi(w),Je=k!==n,st=k===null,ht=k===k,$t=yi(k);if(!st&&!$t&&!Me&&w>k||Me&&Je&&ht&&!st&&!$t||pe&&Je&&ht||!Y&&ht||!ke)return 1;if(!pe&&!Me&&!$t&&w<k||$t&&Y&&ke&&!pe&&!Me||st&&Y&&ke||!Je&&ke||!ht)return-1}return 0}function WK(w,k,Y){for(var pe=-1,ke=w.criteria,Me=k.criteria,Je=ke.length,st=Y.length;++pe<Je;){var ht=eF(ke[pe],Me[pe]);if(ht){if(pe>=st)return ht;var $t=Y[pe];return ht*($t=="desc"?-1:1)}}return w.index-k.index}function tF(w,k,Y,pe){for(var ke=-1,Me=w.length,Je=Y.length,st=-1,ht=k.length,$t=ws(Me-Je,0),Qt=Ft(ht+$t),jt=!pe;++st<ht;)Qt[st]=k[st];for(;++ke<Je;)(jt||ke<Me)&&(Qt[Y[ke]]=w[ke]);for(;$t--;)Qt[st++]=w[ke++];return Qt}function nF(w,k,Y,pe){for(var ke=-1,Me=w.length,Je=-1,st=Y.length,ht=-1,$t=k.length,Qt=ws(Me-st,0),jt=Ft(Qt+$t),cn=!pe;++ke<Qt;)jt[ke]=w[ke];for(var xn=ke;++ht<$t;)jt[xn+ht]=k[ht];for(;++Je<st;)(cn||ke<Me)&&(jt[xn+Y[Je]]=w[ke++]);return jt}function ei(w,k){var Y=-1,pe=w.length;for(k||(k=Ft(pe));++Y<pe;)k[Y]=w[Y];return k}function mu(w,k,Y,pe){var ke=!Y;Y||(Y={});for(var Me=-1,Je=k.length;++Me<Je;){var st=k[Me],ht=pe?pe(Y[st],w[st],st,Y,w):n;ht===n&&(ht=w[st]),ke?ic(Y,st,ht):Jh(Y,st,ht)}return Y}function KK(w,k){return mu(w,nx(w),k)}function jK(w,k){return mu(w,vF(w),k)}function I1(w,k){return function(Y,pe){var ke=ea(Y)?cu:hK,Me=k?k():{};return ke(Y,w,Nn(pe,2),Me)}}function Sm(w){return fa(function(k,Y){var pe=-1,ke=Y.length,Me=ke>1?Y[ke-1]:n,Je=ke>2?Y[2]:n;for(Me=w.length>3&&typeof Me=="function"?(ke--,Me):n,Je&&No(Y[0],Y[1],Je)&&(Me=ke<3?n:Me,ke=1),k=lr(k);++pe<ke;){var st=Y[pe];st&&w(k,st,pe,Me)}return k})}function aF(w,k){return function(Y,pe){if(Y==null)return Y;if(!ti(Y))return w(Y,pe);for(var ke=Y.length,Me=k?ke:-1,Je=lr(Y);(k?Me--:++Me<ke)&&pe(Je[Me],Me,Je)!==!1;);return Y}}function rF(w){return function(k,Y,pe){for(var ke=-1,Me=lr(k),Je=pe(k),st=Je.length;st--;){var ht=Je[w?st:++ke];if(Y(Me[ht],ht,Me)===!1)break}return k}}function qK(w,k,Y){var pe=k&g,ke=ap(w);function Me(){var Je=this&&this!==sn&&this instanceof Me?ke:w;return Je.apply(pe?Y:this,arguments)}return Me}function sF(w){return function(k){k=qa(k);var Y=gm(k)?gl(k):n,pe=Y?Y[0]:k.charAt(0),ke=Y?ud(Y,1).join(""):k.slice(1);return pe[w]()+ke}}function Em(w){return function(k){return Jo(aP(nP(k).replace(Qh,"")),w,"")}}function ap(w){return function(){var k=arguments;switch(k.length){case 0:return new w;case 1:return new w(k[0]);case 2:return new w(k[0],k[1]);case 3:return new w(k[0],k[1],k[2]);case 4:return new w(k[0],k[1],k[2],k[3]);case 5:return new w(k[0],k[1],k[2],k[3],k[4]);case 6:return new w(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new w(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var Y=Cm(w.prototype),pe=w.apply(Y,k);return Ur(pe)?pe:Y}}function YK(w,k,Y){var pe=ap(w);function ke(){for(var Me=arguments.length,Je=Ft(Me),st=Me,ht=km(ke);st--;)Je[st]=arguments[st];var $t=Me<3&&Je[0]!==ht&&Je[Me-1]!==ht?[]:rd(Je,ht);if(Me-=$t.length,Me<Y)return cF(w,k,F1,ke.placeholder,n,Je,$t,n,n,Y-Me);var Qt=this&&this!==sn&&this instanceof ke?pe:w;return aa(Qt,this,Je)}return ke}function oF(w){return function(k,Y,pe){var ke=lr(k);if(!ti(k)){var Me=Nn(Y,3);k=Us(k),Y=function(st){return Me(ke[st],st,ke)}}var Je=w(k,Y,pe);return Je>-1?ke[Me?k[Je]:Je]:n}}function iF(w){return uc(function(k){var Y=k.length,pe=Y,ke=Gi.prototype.thru;for(w&&k.reverse();pe--;){var Me=k[pe];if(typeof Me!="function")throw new Qi(o);if(ke&&!Je&&R1(Me)=="wrapper")var Je=new Gi([],!0)}for(pe=Je?pe:Y;++pe<Y;){Me=k[pe];var st=R1(Me),ht=st=="wrapper"?ex(Me):n;ht&&rx(ht[0])&&ht[1]==(E|S|F|x)&&!ht[4].length&&ht[9]==1?Je=Je[R1(ht[0])].apply(Je,ht[3]):Je=Me.length==1&&rx(Me)?Je[st]():Je.thru(Me)}return function(){var $t=arguments,Qt=$t[0];if(Je&&$t.length==1&&ea(Qt))return Je.plant(Qt).value();for(var jt=0,cn=Y?k[jt].apply(this,$t):Qt;++jt<Y;)cn=k[jt].call(this,cn);return cn}})}function F1(w,k,Y,pe,ke,Me,Je,st,ht,$t){var Qt=k&E,jt=k&g,cn=k&_,xn=k&(S|B),On=k&C,da=cn?n:ap(w);function Hn(){for(var va=arguments.length,ba=Ft(va),_i=va;_i--;)ba[_i]=arguments[_i];if(xn)var Vo=km(Hn),wi=lW(ba,Vo);if(pe&&(ba=tF(ba,pe,ke,xn)),Me&&(ba=nF(ba,Me,Je,xn)),va-=wi,xn&&va<$t){var jr=rd(ba,Vo);return cF(w,k,F1,Hn.placeholder,Y,ba,jr,st,ht,$t-va)}var wl=jt?Y:this,Ac=cn?wl[w]:w;return va=ba.length,st?ba=hj(ba,st):On&&va>1&&ba.reverse(),Qt&&ht<va&&(ba.length=ht),this&&this!==sn&&this instanceof Hn&&(Ac=da||ap(Ac)),Ac.apply(wl,ba)}return Hn}function lF(w,k){return function(Y,pe){return CK(Y,w,k(pe),{})}}function P1(w,k){return function(Y,pe){var ke;if(Y===n&&pe===n)return k;if(Y!==n&&(ke=Y),pe!==n){if(ke===n)return pe;typeof Y=="string"||typeof pe=="string"?(Y=gi(Y),pe=gi(pe)):(Y=KI(Y),pe=KI(pe)),ke=w(Y,pe)}return ke}}function Yb(w){return uc(function(k){return k=ga(k,ja(Nn())),fa(function(Y){var pe=this;return w(k,function(ke){return aa(ke,pe,Y)})})})}function D1(w,k){k=k===n?" ":gi(k);var Y=k.length;if(Y<2)return Y?Qb(k,w):k;var pe=Qb(k,y1(w/ym(k)));return gm(k)?ud(gl(pe),0,w).join(""):pe.slice(0,w)}function XK(w,k,Y,pe){var ke=k&g,Me=ap(w);function Je(){for(var st=-1,ht=arguments.length,$t=-1,Qt=pe.length,jt=Ft(Qt+ht),cn=this&&this!==sn&&this instanceof Je?Me:w;++$t<Qt;)jt[$t]=pe[$t];for(;ht--;)jt[$t++]=arguments[++st];return aa(cn,ke?Y:this,jt)}return Je}function uF(w){return function(k,Y,pe){return pe&&typeof pe!="number"&&No(k,Y,pe)&&(Y=pe=n),k=fc(k),Y===n?(Y=k,k=0):Y=fc(Y),pe=pe===n?k<Y?1:-1:fc(pe),NK(k,Y,pe,w)}}function U1(w){return function(k,Y){return typeof k=="string"&&typeof Y=="string"||(k=ji(k),Y=ji(Y)),w(k,Y)}}function cF(w,k,Y,pe,ke,Me,Je,st,ht,$t){var Qt=k&S,jt=Qt?Je:n,cn=Qt?n:Je,xn=Qt?Me:n,On=Qt?n:Me;k|=Qt?F:T,k&=~(Qt?T:F),k&b||(k&=-4);var da=[w,k,ke,xn,jt,On,cn,st,ht,$t],Hn=Y.apply(n,da);return rx(w)&&bF(Hn,da),Hn.placeholder=pe,xF(Hn,w,k)}function Xb(w){var k=_s[w];return function(Y,pe){if(Y=ji(Y),pe=pe==null?0:io(ia(pe),292),pe&&xI(Y)){var ke=(qa(Y)+"e").split("e"),Me=k(ke[0]+"e"+(+ke[1]+pe));return ke=(qa(Me)+"e").split("e"),+(ke[0]+"e"+(+ke[1]-pe))}return k(Y)}}var JK=bm&&1/u1(new bm([,-0]))[1]==q?function(w){return new bm(w)}:yx;function dF(w){return function(k){var Y=lo(k);return Y==se?kb(k):Y==Ee?vW(k):ka(k,w(k))}}function lc(w,k,Y,pe,ke,Me,Je,st){var ht=k&_;if(!ht&&typeof w!="function")throw new Qi(o);var $t=pe?pe.length:0;if($t||(k&=-97,pe=ke=n),Je=Je===n?Je:ws(ia(Je),0),st=st===n?st:ia(st),$t-=ke?ke.length:0,k&T){var Qt=pe,jt=ke;pe=ke=n}var cn=ht?n:ex(w),xn=[w,k,Y,pe,ke,Qt,jt,Me,Je,st];if(cn&&Aj(xn,cn),w=xn[0],k=xn[1],Y=xn[2],pe=xn[3],ke=xn[4],st=xn[9]=xn[9]===n?ht?0:w.length:ws(xn[9]-$t,0),!st&&k&(S|B)&&(k&=-25),!k||k==g)var On=qK(w,k,Y);else k==S||k==B?On=YK(w,k,st):(k==F||k==(g|F))&&!ke.length?On=XK(w,k,Y,pe):On=F1.apply(n,xn);var da=cn?zI:bF;return xF(da(On,xn),w,k)}function fF(w,k,Y,pe){return w===n||_l(w,wm[Y])&&!tr.call(pe,Y)?k:w}function AF(w,k,Y,pe,ke,Me){return Ur(w)&&Ur(k)&&(Me.set(k,w),k1(w,k,n,AF,Me),Me.delete(k)),w}function ZK(w){return op(w)?n:w}function mF(w,k,Y,pe,ke,Me){var Je=Y&h,st=w.length,ht=k.length;if(st!=ht&&!(Je&&ht>st))return!1;var $t=Me.get(w),Qt=Me.get(k);if($t&&Qt)return $t==k&&Qt==w;var jt=-1,cn=!0,xn=Y&y?new xf:n;for(Me.set(w,k),Me.set(k,w);++jt<st;){var On=w[jt],da=k[jt];if(pe)var Hn=Je?pe(da,On,jt,k,w,Me):pe(On,da,jt,w,k,Me);if(Hn!==n){if(Hn)continue;cn=!1;break}if(xn){if(!Ke(k,function(va,ba){if(!Ws(xn,ba)&&(On===va||ke(On,va,Y,pe,Me)))return xn.push(ba)})){cn=!1;break}}else if(!(On===da||ke(On,da,Y,pe,Me))){cn=!1;break}}return Me.delete(w),Me.delete(k),cn}function ej(w,k,Y,pe,ke,Me,Je){switch(Y){case Ye:if(w.byteLength!=k.byteLength||w.byteOffset!=k.byteOffset)return!1;w=w.buffer,k=k.buffer;case Be:return!(w.byteLength!=k.byteLength||!Me(new v1(w),new v1(k)));case J:case ie:case be:return _l(+w,+k);case fe:return w.name==k.name&&w.message==k.message;case Se:case Ue:return w==k+"";case se:var st=kb;case Ee:var ht=pe&h;if(st||(st=u1),w.size!=k.size&&!ht)return!1;var $t=Je.get(w);if($t)return $t==k;pe|=y,Je.set(w,k);var Qt=mF(st(w),st(k),pe,ke,Me,Je);return Je.delete(w),Qt;case je:if(Xh)return Xh.call(w)==Xh.call(k)}return!1}function tj(w,k,Y,pe,ke,Me){var Je=Y&h,st=Jb(w),ht=st.length,$t=Jb(k),Qt=$t.length;if(ht!=Qt&&!Je)return!1;for(var jt=ht;jt--;){var cn=st[jt];if(!(Je?cn in k:tr.call(k,cn)))return!1}var xn=Me.get(w),On=Me.get(k);if(xn&&On)return xn==k&&On==w;var da=!0;Me.set(w,k),Me.set(k,w);for(var Hn=Je;++jt<ht;){cn=st[jt];var va=w[cn],ba=k[cn];if(pe)var _i=Je?pe(ba,va,cn,k,w,Me):pe(va,ba,cn,w,k,Me);if(!(_i===n?va===ba||ke(va,ba,Y,pe,Me):_i)){da=!1;break}Hn||(Hn=cn=="constructor")}if(da&&!Hn){var Vo=w.constructor,wi=k.constructor;Vo!=wi&&"constructor"in w&&"constructor"in k&&!(typeof Vo=="function"&&Vo instanceof Vo&&typeof wi=="function"&&wi instanceof wi)&&(da=!1)}return Me.delete(w),Me.delete(k),da}function uc(w){return ox(_F(w,n,TF),w+"")}function Jb(w){return UI(w,Us,nx)}function Zb(w){return UI(w,ni,vF)}var ex=w1?function(w){return w1.get(w)}:yx;function R1(w){for(var k=w.name+"",Y=xm[k],pe=tr.call(xm,k)?Y.length:0;pe--;){var ke=Y[pe],Me=ke.func;if(Me==null||Me==w)return ke.name}return k}function km(w){var k=tr.call(De,"placeholder")?De:w;return k.placeholder}function Nn(){var w=De.iteratee||px;return w=w===px?VI:w,arguments.length?w(arguments[0],arguments[1]):w}function N1(w,k){var Y=w.__data__;return uj(k)?Y[typeof k=="string"?"string":"hash"]:Y.map}function tx(w){for(var k=Us(w),Y=k.length;Y--;){var pe=k[Y],ke=w[pe];k[Y]=[pe,ke,gF(ke)]}return k}function Ef(w,k){var Y=fW(w,k);return NI(Y)?Y:n}function nj(w){var k=tr.call(w,wf),Y=w[wf];try{w[wf]=n;var pe=!0}catch{}var ke=A1.call(w);return pe&&(k?w[wf]=Y:delete w[wf]),ke}var nx=Tb?function(w){return w==null?[]:(w=lr(w),Fr(Tb(w),function(k){return wI.call(w,k)}))}:_x,vF=Tb?function(w){for(var k=[];w;)Ds(k,nx(w)),w=h1(w);return k}:_x,lo=Ro;(Ib&&lo(new Ib(new ArrayBuffer(1)))!=Ye||jh&&lo(new jh)!=se||Fb&&lo(Fb.resolve())!=Qe||bm&&lo(new bm)!=Ee||qh&&lo(new qh)!=mt)&&(lo=function(w){var k=Ro(w),Y=k==ye?w.constructor:n,pe=Y?kf(Y):"";if(pe)switch(pe){case LW:return Ye;case MW:return se;case OW:return Qe;case HW:return Ee;case $W:return mt}return k});function aj(w,k,Y){for(var pe=-1,ke=Y.length;++pe<ke;){var Me=Y[pe],Je=Me.size;switch(Me.type){case"drop":w+=Je;break;case"dropRight":k-=Je;break;case"take":k=io(k,w+Je);break;case"takeRight":w=ws(w,k-Je);break}}return{start:w,end:k}}function rj(w){var k=w.match(Ce);return k?k[1].split(He):[]}function hF(w,k,Y){k=ld(k,w);for(var pe=-1,ke=k.length,Me=!1;++pe<ke;){var Je=vu(k[pe]);if(!(Me=w!=null&&Y(w,Je)))break;w=w[Je]}return Me||++pe!=ke?Me:(ke=w==null?0:w.length,!!ke&&Q1(ke)&&cc(Je,ke)&&(ea(w)||Bf(w)))}function sj(w){var k=w.length,Y=new w.constructor(k);return k&&typeof w[0]=="string"&&tr.call(w,"index")&&(Y.index=w.index,Y.input=w.input),Y}function pF(w){return typeof w.constructor=="function"&&!rp(w)?Cm(h1(w)):{}}function oj(w,k,Y){var pe=w.constructor;switch(k){case Be:return qb(w);case J:case ie:return new pe(+w);case Ye:return QK(w,Y);case kt:case xt:case Nt:case At:case Ot:case Dt:case bt:case Ze:case qt:return ZI(w,Y);case se:return new pe;case be:case Ue:return new pe(w);case Se:return GK(w);case Ee:return new pe;case je:return zK(w)}}function ij(w,k){var Y=k.length;if(!Y)return w;var pe=Y-1;return k[pe]=(Y>1?"& ":"")+k[pe],k=k.join(Y>2?", ":" "),w.replace(ua,`{
/* [wrapped with `+k+`] */
`)}function lj(w){return ea(w)||Bf(w)||!!(bI&&w&&w[bI])}function cc(w,k){var Y=typeof w;return k=k??ce,!!k&&(Y=="number"||Y!="symbol"&&tt.test(w))&&w>-1&&w%1==0&&w<k}function No(w,k,Y){if(!Ur(Y))return!1;var pe=typeof k;return(pe=="number"?ti(Y)&&cc(k,Y.length):pe=="string"&&k in Y)?_l(Y[k],w):!1}function ax(w,k){if(ea(w))return!1;var Y=typeof w;return Y=="number"||Y=="symbol"||Y=="boolean"||w==null||yi(w)?!0:ut.test(w)||!Pe.test(w)||k!=null&&w in lr(k)}function uj(w){var k=typeof w;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?w!=="__proto__":w===null}function rx(w){var k=R1(w),Y=De[k];if(typeof Y!="function"||!(k in ya.prototype))return!1;if(w===Y)return!0;var pe=ex(Y);return!!pe&&w===pe[0]}function cj(w){return!!gI&&gI in w}var dj=d1?dc:wx;function rp(w){var k=w&&w.constructor,Y=typeof k=="function"&&k.prototype||wm;return w===Y}function gF(w){return w===w&&!Ur(w)}function yF(w,k){return function(Y){return Y==null?!1:Y[w]===k&&(k!==n||w in lr(Y))}}function fj(w){var k=H1(w,function(pe){return Y.size===f&&Y.clear(),pe}),Y=k.cache;return k}function Aj(w,k){var Y=w[1],pe=k[1],ke=Y|pe,Me=ke<(g|_|E),Je=pe==E&&Y==S||pe==E&&Y==x&&w[7].length<=k[8]||pe==(E|x)&&k[7].length<=k[8]&&Y==S;if(!(Me||Je))return w;pe&g&&(w[2]=k[2],ke|=Y&g?0:b);var st=k[3];if(st){var ht=w[3];w[3]=ht?tF(ht,st,k[4]):st,w[4]=ht?rd(w[3],d):k[4]}return st=k[5],st&&(ht=w[5],w[5]=ht?nF(ht,st,k[6]):st,w[6]=ht?rd(w[5],d):k[6]),st=k[7],st&&(w[7]=st),pe&E&&(w[8]=w[8]==null?k[8]:io(w[8],k[8])),w[9]==null&&(w[9]=k[9]),w[0]=k[0],w[1]=ke,w}function mj(w){var k=[];if(w!=null)for(var Y in lr(w))k.push(Y);return k}function vj(w){return A1.call(w)}function _F(w,k,Y){return k=ws(k===n?w.length-1:k,0),function(){for(var pe=arguments,ke=-1,Me=ws(pe.length-k,0),Je=Ft(Me);++ke<Me;)Je[ke]=pe[k+ke];ke=-1;for(var st=Ft(k+1);++ke<k;)st[ke]=pe[ke];return st[k]=Y(Je),aa(w,this,st)}}function wF(w,k){return k.length<2?w:Sf(w,Wi(k,0,-1))}function hj(w,k){for(var Y=w.length,pe=io(k.length,Y),ke=ei(w);pe--;){var Me=k[pe];w[pe]=cc(Me,Y)?ke[Me]:n}return w}function sx(w,k){if(!(k==="constructor"&&typeof w[k]=="function")&&k!="__proto__")return w[k]}var bF=CF(zI),sp=FW||function(w,k){return sn.setTimeout(w,k)},ox=CF(MK);function xF(w,k,Y){var pe=k+"";return ox(w,ij(pe,pj(rj(pe),Y)))}function CF(w){var k=0,Y=0;return function(){var pe=RW(),ke=H-(pe-Y);if(Y=pe,ke>0){if(++k>=L)return arguments[0]}else k=0;return w.apply(n,arguments)}}function V1(w,k){var Y=-1,pe=w.length,ke=pe-1;for(k=k===n?pe:k;++Y<k;){var Me=$b(Y,ke),Je=w[Me];w[Me]=w[Y],w[Y]=Je}return w.length=k,w}var SF=fj(function(w){var k=[];return w.charCodeAt(0)===46&&k.push(""),w.replace(wt,function(Y,pe,ke,Me){k.push(ke?Me.replace(Ve,"$1"):pe||Y)}),k});function vu(w){if(typeof w=="string"||yi(w))return w;var k=w+"";return k=="0"&&1/w==-q?"-0":k}function kf(w){if(w!=null){try{return f1.call(w)}catch{}try{return w+""}catch{}}return""}function pj(w,k){return zr(Q,function(Y){var pe="_."+Y[0];k&Y[1]&&!rc(w,pe)&&w.push(pe)}),w.sort()}function EF(w){if(w instanceof ya)return w.clone();var k=new Gi(w.__wrapped__,w.__chain__);return k.__actions__=ei(w.__actions__),k.__index__=w.__index__,k.__values__=w.__values__,k}function gj(w,k,Y){(Y?No(w,k,Y):k===n)?k=1:k=ws(ia(k),0);var pe=w==null?0:w.length;if(!pe||k<1)return[];for(var ke=0,Me=0,Je=Ft(y1(pe/k));ke<pe;)Je[Me++]=Wi(w,ke,ke+=k);return Je}function yj(w){for(var k=-1,Y=w==null?0:w.length,pe=0,ke=[];++k<Y;){var Me=w[k];Me&&(ke[pe++]=Me)}return ke}function _j(){var w=arguments.length;if(!w)return[];for(var k=Ft(w-1),Y=arguments[0],pe=w;pe--;)k[pe-1]=arguments[pe];return Ds(ea(Y)?ei(Y):[Y],Ks(k,1))}var wj=fa(function(w,k){return Kr(w)?Zh(w,Ks(k,1,Kr,!0)):[]}),bj=fa(function(w,k){var Y=Ki(k);return Kr(Y)&&(Y=n),Kr(w)?Zh(w,Ks(k,1,Kr,!0),Nn(Y,2)):[]}),xj=fa(function(w,k){var Y=Ki(k);return Kr(Y)&&(Y=n),Kr(w)?Zh(w,Ks(k,1,Kr,!0),n,Y):[]});function Cj(w,k,Y){var pe=w==null?0:w.length;return pe?(k=Y||k===n?1:ia(k),Wi(w,k<0?0:k,pe)):[]}function Sj(w,k,Y){var pe=w==null?0:w.length;return pe?(k=Y||k===n?1:ia(k),k=pe-k,Wi(w,0,k<0?0:k)):[]}function Ej(w,k){return w&&w.length?T1(w,Nn(k,3),!0,!0):[]}function kj(w,k){return w&&w.length?T1(w,Nn(k,3),!0):[]}function Bj(w,k,Y,pe){var ke=w==null?0:w.length;return ke?(Y&&typeof Y!="number"&&No(w,k,Y)&&(Y=0,pe=ke),_K(w,k,Y,pe)):[]}function kF(w,k,Y){var pe=w==null?0:w.length;if(!pe)return-1;var ke=Y==null?0:ia(Y);return ke<0&&(ke=ws(pe+ke,0)),yf(w,Nn(k,3),ke)}function BF(w,k,Y){var pe=w==null?0:w.length;if(!pe)return-1;var ke=pe-1;return Y!==n&&(ke=ia(Y),ke=Y<0?ws(pe+ke,0):io(ke,pe-1)),yf(w,Nn(k,3),ke,!0)}function TF(w){var k=w==null?0:w.length;return k?Ks(w,1):[]}function Tj(w){var k=w==null?0:w.length;return k?Ks(w,q):[]}function Ij(w,k){var Y=w==null?0:w.length;return Y?(k=k===n?1:ia(k),Ks(w,k)):[]}function Fj(w){for(var k=-1,Y=w==null?0:w.length,pe={};++k<Y;){var ke=w[k];pe[ke[0]]=ke[1]}return pe}function IF(w){return w&&w.length?w[0]:n}function Pj(w,k,Y){var pe=w==null?0:w.length;if(!pe)return-1;var ke=Y==null?0:ia(Y);return ke<0&&(ke=ws(pe+ke,0)),pi(w,k,ke)}function Dj(w){var k=w==null?0:w.length;return k?Wi(w,0,-1):[]}var Uj=fa(function(w){var k=ga(w,Kb);return k.length&&k[0]===w[0]?Vb(k):[]}),Rj=fa(function(w){var k=Ki(w),Y=ga(w,Kb);return k===Ki(Y)?k=n:Y.pop(),Y.length&&Y[0]===w[0]?Vb(Y,Nn(k,2)):[]}),Nj=fa(function(w){var k=Ki(w),Y=ga(w,Kb);return k=typeof k=="function"?k:n,k&&Y.pop(),Y.length&&Y[0]===w[0]?Vb(Y,n,k):[]});function Vj(w,k){return w==null?"":DW.call(w,k)}function Ki(w){var k=w==null?0:w.length;return k?w[k-1]:n}function Lj(w,k,Y){var pe=w==null?0:w.length;if(!pe)return-1;var ke=pe;return Y!==n&&(ke=ia(Y),ke=ke<0?ws(pe+ke,0):io(ke,pe-1)),k===k?pW(w,k,ke):yf(w,ve,ke,!0)}function Mj(w,k){return w&&w.length?HI(w,ia(k)):n}var Oj=fa(FF);function FF(w,k){return w&&w.length&&k&&k.length?Hb(w,k):w}function Hj(w,k,Y){return w&&w.length&&k&&k.length?Hb(w,k,Nn(Y,2)):w}function $j(w,k,Y){return w&&w.length&&k&&k.length?Hb(w,k,n,Y):w}var Qj=uc(function(w,k){var Y=w==null?0:w.length,pe=Db(w,k);return GI(w,ga(k,function(ke){return cc(ke,Y)?+ke:ke}).sort(eF)),pe});function Gj(w,k){var Y=[];if(!(w&&w.length))return Y;var pe=-1,ke=[],Me=w.length;for(k=Nn(k,3);++pe<Me;){var Je=w[pe];k(Je,pe,w)&&(Y.push(Je),ke.push(pe))}return GI(w,ke),Y}function ix(w){return w==null?w:VW.call(w)}function zj(w,k,Y){var pe=w==null?0:w.length;return pe?(Y&&typeof Y!="number"&&No(w,k,Y)?(k=0,Y=pe):(k=k==null?0:ia(k),Y=Y===n?pe:ia(Y)),Wi(w,k,Y)):[]}function Wj(w,k){return B1(w,k)}function Kj(w,k,Y){return Gb(w,k,Nn(Y,2))}function jj(w,k){var Y=w==null?0:w.length;if(Y){var pe=B1(w,k);if(pe<Y&&_l(w[pe],k))return pe}return-1}function qj(w,k){return B1(w,k,!0)}function Yj(w,k,Y){return Gb(w,k,Nn(Y,2),!0)}function Xj(w,k){var Y=w==null?0:w.length;if(Y){var pe=B1(w,k,!0)-1;if(_l(w[pe],k))return pe}return-1}function Jj(w){return w&&w.length?WI(w):[]}function Zj(w,k){return w&&w.length?WI(w,Nn(k,2)):[]}function eq(w){var k=w==null?0:w.length;return k?Wi(w,1,k):[]}function tq(w,k,Y){return w&&w.length?(k=Y||k===n?1:ia(k),Wi(w,0,k<0?0:k)):[]}function nq(w,k,Y){var pe=w==null?0:w.length;return pe?(k=Y||k===n?1:ia(k),k=pe-k,Wi(w,k<0?0:k,pe)):[]}function aq(w,k){return w&&w.length?T1(w,Nn(k,3),!1,!0):[]}function rq(w,k){return w&&w.length?T1(w,Nn(k,3)):[]}var sq=fa(function(w){return id(Ks(w,1,Kr,!0))}),oq=fa(function(w){var k=Ki(w);return Kr(k)&&(k=n),id(Ks(w,1,Kr,!0),Nn(k,2))}),iq=fa(function(w){var k=Ki(w);return k=typeof k=="function"?k:n,id(Ks(w,1,Kr,!0),n,k)});function lq(w){return w&&w.length?id(w):[]}function uq(w,k){return w&&w.length?id(w,Nn(k,2)):[]}function cq(w,k){return k=typeof k=="function"?k:n,w&&w.length?id(w,n,k):[]}function lx(w){if(!(w&&w.length))return[];var k=0;return w=Fr(w,function(Y){if(Kr(Y))return k=ws(Y.length,k),!0}),Wr(k,function(Y){return ga(w,Le(Y))})}function PF(w,k){if(!(w&&w.length))return[];var Y=lx(w);return k==null?Y:ga(Y,function(pe){return aa(k,n,pe)})}var dq=fa(function(w,k){return Kr(w)?Zh(w,k):[]}),fq=fa(function(w){return Wb(Fr(w,Kr))}),Aq=fa(function(w){var k=Ki(w);return Kr(k)&&(k=n),Wb(Fr(w,Kr),Nn(k,2))}),mq=fa(function(w){var k=Ki(w);return k=typeof k=="function"?k:n,Wb(Fr(w,Kr),n,k)}),vq=fa(lx);function hq(w,k){return YI(w||[],k||[],Jh)}function pq(w,k){return YI(w||[],k||[],np)}var gq=fa(function(w){var k=w.length,Y=k>1?w[k-1]:n;return Y=typeof Y=="function"?(w.pop(),Y):n,PF(w,Y)});function DF(w){var k=De(w);return k.__chain__=!0,k}function yq(w,k){return k(w),w}function L1(w,k){return k(w)}var _q=uc(function(w){var k=w.length,Y=k?w[0]:0,pe=this.__wrapped__,ke=function(Me){return Db(Me,w)};return k>1||this.__actions__.length||!(pe instanceof ya)||!cc(Y)?this.thru(ke):(pe=pe.slice(Y,+Y+(k?1:0)),pe.__actions__.push({func:L1,args:[ke],thisArg:n}),new Gi(pe,this.__chain__).thru(function(Me){return k&&!Me.length&&Me.push(n),Me}))});function wq(){return DF(this)}function bq(){return new Gi(this.value(),this.__chain__)}function xq(){this.__values__===n&&(this.__values__=KF(this.value()));var w=this.__index__>=this.__values__.length,k=w?n:this.__values__[this.__index__++];return{done:w,value:k}}function Cq(){return this}function Sq(w){for(var k,Y=this;Y instanceof x1;){var pe=EF(Y);pe.__index__=0,pe.__values__=n,k?ke.__wrapped__=pe:k=pe;var ke=pe;Y=Y.__wrapped__}return ke.__wrapped__=w,k}function Eq(){var w=this.__wrapped__;if(w instanceof ya){var k=w;return this.__actions__.length&&(k=new ya(this)),k=k.reverse(),k.__actions__.push({func:L1,args:[ix],thisArg:n}),new Gi(k,this.__chain__)}return this.thru(ix)}function kq(){return qI(this.__wrapped__,this.__actions__)}var Bq=I1(function(w,k,Y){tr.call(w,Y)?++w[Y]:ic(w,Y,1)});function Tq(w,k,Y){var pe=ea(w)?zs:yK;return Y&&No(w,k,Y)&&(k=n),pe(w,Nn(k,3))}function Iq(w,k){var Y=ea(w)?Fr:PI;return Y(w,Nn(k,3))}var Fq=oF(kF),Pq=oF(BF);function Dq(w,k){return Ks(M1(w,k),1)}function Uq(w,k){return Ks(M1(w,k),q)}function Rq(w,k,Y){return Y=Y===n?1:ia(Y),Ks(M1(w,k),Y)}function UF(w,k){var Y=ea(w)?zr:od;return Y(w,Nn(k,3))}function RF(w,k){var Y=ea(w)?$i:FI;return Y(w,Nn(k,3))}var Nq=I1(function(w,k,Y){tr.call(w,Y)?w[Y].push(k):ic(w,Y,[k])});function Vq(w,k,Y,pe){w=ti(w)?w:Tm(w),Y=Y&&!pe?ia(Y):0;var ke=w.length;return Y<0&&(Y=ws(ke+Y,0)),G1(w)?Y<=ke&&w.indexOf(k,Y)>-1:!!ke&&pi(w,k,Y)>-1}var Lq=fa(function(w,k,Y){var pe=-1,ke=typeof k=="function",Me=ti(w)?Ft(w.length):[];return od(w,function(Je){Me[++pe]=ke?aa(k,Je,Y):ep(Je,k,Y)}),Me}),Mq=I1(function(w,k,Y){ic(w,Y,k)});function M1(w,k){var Y=ea(w)?ga:LI;return Y(w,Nn(k,3))}function Oq(w,k,Y,pe){return w==null?[]:(ea(k)||(k=k==null?[]:[k]),Y=pe?n:Y,ea(Y)||(Y=Y==null?[]:[Y]),$I(w,k,Y))}var Hq=I1(function(w,k,Y){w[Y?0:1].push(k)},function(){return[[],[]]});function $q(w,k,Y){var pe=ea(w)?Jo:Pt,ke=arguments.length<3;return pe(w,Nn(k,4),Y,ke,od)}function Qq(w,k,Y){var pe=ea(w)?hm:Pt,ke=arguments.length<3;return pe(w,Nn(k,4),Y,ke,FI)}function Gq(w,k){var Y=ea(w)?Fr:PI;return Y(w,$1(Nn(k,3)))}function zq(w){var k=ea(w)?kI:VK;return k(w)}function Wq(w,k,Y){(Y?No(w,k,Y):k===n)?k=1:k=ia(k);var pe=ea(w)?mK:LK;return pe(w,k)}function Kq(w){var k=ea(w)?vK:OK;return k(w)}function jq(w){if(w==null)return 0;if(ti(w))return G1(w)?ym(w):w.length;var k=lo(w);return k==se||k==Ee?w.size:Mb(w).length}function qq(w,k,Y){var pe=ea(w)?Ke:HK;return Y&&No(w,k,Y)&&(k=n),pe(w,Nn(k,3))}var Yq=fa(function(w,k){if(w==null)return[];var Y=k.length;return Y>1&&No(w,k[0],k[1])?k=[]:Y>2&&No(k[0],k[1],k[2])&&(k=[k[0]]),$I(w,Ks(k,1),[])}),O1=IW||function(){return sn.Date.now()};function Xq(w,k){if(typeof k!="function")throw new Qi(o);return w=ia(w),function(){if(--w<1)return k.apply(this,arguments)}}function NF(w,k,Y){return k=Y?n:k,k=w&&k==null?w.length:k,lc(w,E,n,n,n,n,k)}function VF(w,k){var Y;if(typeof k!="function")throw new Qi(o);return w=ia(w),function(){return--w>0&&(Y=k.apply(this,arguments)),w<=1&&(k=n),Y}}var ux=fa(function(w,k,Y){var pe=g;if(Y.length){var ke=rd(Y,km(ux));pe|=F}return lc(w,pe,k,Y,ke)}),LF=fa(function(w,k,Y){var pe=g|_;if(Y.length){var ke=rd(Y,km(LF));pe|=F}return lc(k,pe,w,Y,ke)});function MF(w,k,Y){k=Y?n:k;var pe=lc(w,S,n,n,n,n,n,k);return pe.placeholder=MF.placeholder,pe}function OF(w,k,Y){k=Y?n:k;var pe=lc(w,B,n,n,n,n,n,k);return pe.placeholder=OF.placeholder,pe}function HF(w,k,Y){var pe,ke,Me,Je,st,ht,$t=0,Qt=!1,jt=!1,cn=!0;if(typeof w!="function")throw new Qi(o);k=ji(k)||0,Ur(Y)&&(Qt=!!Y.leading,jt="maxWait"in Y,Me=jt?ws(ji(Y.maxWait)||0,k):Me,cn="trailing"in Y?!!Y.trailing:cn);function xn(jr){var wl=pe,Ac=ke;return pe=ke=n,$t=jr,Je=w.apply(Ac,wl),Je}function On(jr){return $t=jr,st=sp(va,k),Qt?xn(jr):Je}function da(jr){var wl=jr-ht,Ac=jr-$t,oP=k-wl;return jt?io(oP,Me-Ac):oP}function Hn(jr){var wl=jr-ht,Ac=jr-$t;return ht===n||wl>=k||wl<0||jt&&Ac>=Me}function va(){var jr=O1();if(Hn(jr))return ba(jr);st=sp(va,da(jr))}function ba(jr){return st=n,cn&&pe?xn(jr):(pe=ke=n,Je)}function _i(){st!==n&&XI(st),$t=0,pe=ht=ke=st=n}function Vo(){return st===n?Je:ba(O1())}function wi(){var jr=O1(),wl=Hn(jr);if(pe=arguments,ke=this,ht=jr,wl){if(st===n)return On(ht);if(jt)return XI(st),st=sp(va,k),xn(ht)}return st===n&&(st=sp(va,k)),Je}return wi.cancel=_i,wi.flush=Vo,wi}var Jq=fa(function(w,k){return II(w,1,k)}),Zq=fa(function(w,k,Y){return II(w,ji(k)||0,Y)});function eY(w){return lc(w,C)}function H1(w,k){if(typeof w!="function"||k!=null&&typeof k!="function")throw new Qi(o);var Y=function(){var pe=arguments,ke=k?k.apply(this,pe):pe[0],Me=Y.cache;if(Me.has(ke))return Me.get(ke);var Je=w.apply(this,pe);return Y.cache=Me.set(ke,Je)||Me,Je};return Y.cache=new(H1.Cache||oc),Y}H1.Cache=oc;function $1(w){if(typeof w!="function")throw new Qi(o);return function(){var k=arguments;switch(k.length){case 0:return!w.call(this);case 1:return!w.call(this,k[0]);case 2:return!w.call(this,k[0],k[1]);case 3:return!w.call(this,k[0],k[1],k[2])}return!w.apply(this,k)}}function tY(w){return VF(2,w)}var nY=$K(function(w,k){k=k.length==1&&ea(k[0])?ga(k[0],ja(Nn())):ga(Ks(k,1),ja(Nn()));var Y=k.length;return fa(function(pe){for(var ke=-1,Me=io(pe.length,Y);++ke<Me;)pe[ke]=k[ke].call(this,pe[ke]);return aa(w,this,pe)})}),cx=fa(function(w,k){var Y=rd(k,km(cx));return lc(w,F,n,k,Y)}),$F=fa(function(w,k){var Y=rd(k,km($F));return lc(w,T,n,k,Y)}),aY=uc(function(w,k){return lc(w,x,n,n,n,k)});function rY(w,k){if(typeof w!="function")throw new Qi(o);return k=k===n?k:ia(k),fa(w,k)}function sY(w,k){if(typeof w!="function")throw new Qi(o);return k=k==null?0:ws(ia(k),0),fa(function(Y){var pe=Y[k],ke=ud(Y,0,k);return pe&&Ds(ke,pe),aa(w,this,ke)})}function oY(w,k,Y){var pe=!0,ke=!0;if(typeof w!="function")throw new Qi(o);return Ur(Y)&&(pe="leading"in Y?!!Y.leading:pe,ke="trailing"in Y?!!Y.trailing:ke),HF(w,k,{leading:pe,maxWait:k,trailing:ke})}function iY(w){return NF(w,1)}function lY(w,k){return cx(jb(k),w)}function uY(){if(!arguments.length)return[];var w=arguments[0];return ea(w)?w:[w]}function cY(w){return zi(w,p)}function dY(w,k){return k=typeof k=="function"?k:n,zi(w,p,k)}function fY(w){return zi(w,A|p)}function AY(w,k){return k=typeof k=="function"?k:n,zi(w,A|p,k)}function mY(w,k){return k==null||TI(w,k,Us(k))}function _l(w,k){return w===k||w!==w&&k!==k}var vY=U1(Nb),hY=U1(function(w,k){return w>=k}),Bf=RI((function(){return arguments})())?RI:function(w){return Lr(w)&&tr.call(w,"callee")&&!wI.call(w,"callee")},ea=Ft.isArray,pY=_r?ja(_r):SK;function ti(w){return w!=null&&Q1(w.length)&&!dc(w)}function Kr(w){return Lr(w)&&ti(w)}function gY(w){return w===!0||w===!1||Lr(w)&&Ro(w)==J}var cd=PW||wx,yY=nc?ja(nc):EK;function _Y(w){return Lr(w)&&w.nodeType===1&&!op(w)}function wY(w){if(w==null)return!0;if(ti(w)&&(ea(w)||typeof w=="string"||typeof w.splice=="function"||cd(w)||Bm(w)||Bf(w)))return!w.length;var k=lo(w);if(k==se||k==Ee)return!w.size;if(rp(w))return!Mb(w).length;for(var Y in w)if(tr.call(w,Y))return!1;return!0}function bY(w,k){return tp(w,k)}function xY(w,k,Y){Y=typeof Y=="function"?Y:n;var pe=Y?Y(w,k):n;return pe===n?tp(w,k,n,Y):!!pe}function dx(w){if(!Lr(w))return!1;var k=Ro(w);return k==fe||k==X||typeof w.message=="string"&&typeof w.name=="string"&&!op(w)}function CY(w){return typeof w=="number"&&xI(w)}function dc(w){if(!Ur(w))return!1;var k=Ro(w);return k==M||k==z||k==j||k==_e}function QF(w){return typeof w=="number"&&w==ia(w)}function Q1(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=ce}function Ur(w){var k=typeof w;return w!=null&&(k=="object"||k=="function")}function Lr(w){return w!=null&&typeof w=="object"}var GF=ac?ja(ac):BK;function SY(w,k){return w===k||Lb(w,k,tx(k))}function EY(w,k,Y){return Y=typeof Y=="function"?Y:n,Lb(w,k,tx(k),Y)}function kY(w){return zF(w)&&w!=+w}function BY(w){if(dj(w))throw new Xn(s);return NI(w)}function TY(w){return w===null}function IY(w){return w==null}function zF(w){return typeof w=="number"||Lr(w)&&Ro(w)==be}function op(w){if(!Lr(w)||Ro(w)!=ye)return!1;var k=h1(w);if(k===null)return!0;var Y=tr.call(k,"constructor")&&k.constructor;return typeof Y=="function"&&Y instanceof Y&&f1.call(Y)==EW}var fx=Hi?ja(Hi):TK;function FY(w){return QF(w)&&w>=-ce&&w<=ce}var WF=Gs?ja(Gs):IK;function G1(w){return typeof w=="string"||!ea(w)&&Lr(w)&&Ro(w)==Ue}function yi(w){return typeof w=="symbol"||Lr(w)&&Ro(w)==je}var Bm=gs?ja(gs):FK;function PY(w){return w===n}function DY(w){return Lr(w)&&lo(w)==mt}function UY(w){return Lr(w)&&Ro(w)==xe}var RY=U1(Ob),NY=U1(function(w,k){return w<=k});function KF(w){if(!w)return[];if(ti(w))return G1(w)?gl(w):ei(w);if(Kh&&w[Kh])return mW(w[Kh]());var k=lo(w),Y=k==se?kb:k==Ee?u1:Tm;return Y(w)}function fc(w){if(!w)return w===0?w:0;if(w=ji(w),w===q||w===-q){var k=w<0?-1:1;return k*le}return w===w?w:0}function ia(w){var k=fc(w),Y=k%1;return k===k?Y?k-Y:k:0}function jF(w){return w?Cf(ia(w),0,ne):0}function ji(w){if(typeof w=="number")return w;if(yi(w))return Z;if(Ur(w)){var k=typeof w.valueOf=="function"?w.valueOf():w;w=Ur(k)?k+"":k}if(typeof w!="string")return w===0?w:+w;w=ys(w);var Y=yt.test(w);return Y||pt.test(w)?hn(w.slice(2),Y?2:8):Bt.test(w)?Z:+w}function qF(w){return mu(w,ni(w))}function VY(w){return w?Cf(ia(w),-ce,ce):w===0?w:0}function qa(w){return w==null?"":gi(w)}var LY=Sm(function(w,k){if(rp(k)||ti(k)){mu(k,Us(k),w);return}for(var Y in k)tr.call(k,Y)&&Jh(w,Y,k[Y])}),YF=Sm(function(w,k){mu(k,ni(k),w)}),z1=Sm(function(w,k,Y,pe){mu(k,ni(k),w,pe)}),MY=Sm(function(w,k,Y,pe){mu(k,Us(k),w,pe)}),OY=uc(Db);function HY(w,k){var Y=Cm(w);return k==null?Y:BI(Y,k)}var $Y=fa(function(w,k){w=lr(w);var Y=-1,pe=k.length,ke=pe>2?k[2]:n;for(ke&&No(k[0],k[1],ke)&&(pe=1);++Y<pe;)for(var Me=k[Y],Je=ni(Me),st=-1,ht=Je.length;++st<ht;){var $t=Je[st],Qt=w[$t];(Qt===n||_l(Qt,wm[$t])&&!tr.call(w,$t))&&(w[$t]=Me[$t])}return w}),QY=fa(function(w){return w.push(n,AF),aa(XF,n,w)});function GY(w,k){return Wh(w,Nn(k,3),Au)}function zY(w,k){return Wh(w,Nn(k,3),Rb)}function WY(w,k){return w==null?w:Ub(w,Nn(k,3),ni)}function KY(w,k){return w==null?w:DI(w,Nn(k,3),ni)}function jY(w,k){return w&&Au(w,Nn(k,3))}function qY(w,k){return w&&Rb(w,Nn(k,3))}function YY(w){return w==null?[]:E1(w,Us(w))}function XY(w){return w==null?[]:E1(w,ni(w))}function Ax(w,k,Y){var pe=w==null?n:Sf(w,k);return pe===n?Y:pe}function JY(w,k){return w!=null&&hF(w,k,wK)}function mx(w,k){return w!=null&&hF(w,k,bK)}var ZY=lF(function(w,k,Y){k!=null&&typeof k.toString!="function"&&(k=A1.call(k)),w[k]=Y},hx(ai)),eX=lF(function(w,k,Y){k!=null&&typeof k.toString!="function"&&(k=A1.call(k)),tr.call(w,k)?w[k].push(Y):w[k]=[Y]},Nn),tX=fa(ep);function Us(w){return ti(w)?EI(w):Mb(w)}function ni(w){return ti(w)?EI(w,!0):PK(w)}function nX(w,k){var Y={};return k=Nn(k,3),Au(w,function(pe,ke,Me){ic(Y,k(pe,ke,Me),pe)}),Y}function aX(w,k){var Y={};return k=Nn(k,3),Au(w,function(pe,ke,Me){ic(Y,ke,k(pe,ke,Me))}),Y}var rX=Sm(function(w,k,Y){k1(w,k,Y)}),XF=Sm(function(w,k,Y,pe){k1(w,k,Y,pe)}),sX=uc(function(w,k){var Y={};if(w==null)return Y;var pe=!1;k=ga(k,function(Me){return Me=ld(Me,w),pe||(pe=Me.length>1),Me}),mu(w,Zb(w),Y),pe&&(Y=zi(Y,A|m|p,ZK));for(var ke=k.length;ke--;)zb(Y,k[ke]);return Y});function oX(w,k){return JF(w,$1(Nn(k)))}var iX=uc(function(w,k){return w==null?{}:UK(w,k)});function JF(w,k){if(w==null)return{};var Y=ga(Zb(w),function(pe){return[pe]});return k=Nn(k),QI(w,Y,function(pe,ke){return k(pe,ke[0])})}function lX(w,k,Y){k=ld(k,w);var pe=-1,ke=k.length;for(ke||(ke=1,w=n);++pe<ke;){var Me=w==null?n:w[vu(k[pe])];Me===n&&(pe=ke,Me=Y),w=dc(Me)?Me.call(w):Me}return w}function uX(w,k,Y){return w==null?w:np(w,k,Y)}function cX(w,k,Y,pe){return pe=typeof pe=="function"?pe:n,w==null?w:np(w,k,Y,pe)}var ZF=dF(Us),eP=dF(ni);function dX(w,k,Y){var pe=ea(w),ke=pe||cd(w)||Bm(w);if(k=Nn(k,4),Y==null){var Me=w&&w.constructor;ke?Y=pe?new Me:[]:Ur(w)?Y=dc(Me)?Cm(h1(w)):{}:Y={}}return(ke?zr:Au)(w,function(Je,st,ht){return k(Y,Je,st,ht)}),Y}function fX(w,k){return w==null?!0:zb(w,k)}function AX(w,k,Y){return w==null?w:jI(w,k,jb(Y))}function mX(w,k,Y,pe){return pe=typeof pe=="function"?pe:n,w==null?w:jI(w,k,jb(Y),pe)}function Tm(w){return w==null?[]:fu(w,Us(w))}function vX(w){return w==null?[]:fu(w,ni(w))}function hX(w,k,Y){return Y===n&&(Y=k,k=n),Y!==n&&(Y=ji(Y),Y=Y===Y?Y:0),k!==n&&(k=ji(k),k=k===k?k:0),Cf(ji(w),k,Y)}function pX(w,k,Y){return k=fc(k),Y===n?(Y=k,k=0):Y=fc(Y),w=ji(w),xK(w,k,Y)}function gX(w,k,Y){if(Y&&typeof Y!="boolean"&&No(w,k,Y)&&(k=Y=n),Y===n&&(typeof k=="boolean"?(Y=k,k=n):typeof w=="boolean"&&(Y=w,w=n)),w===n&&k===n?(w=0,k=1):(w=fc(w),k===n?(k=w,w=0):k=fc(k)),w>k){var pe=w;w=k,k=pe}if(Y||w%1||k%1){var ke=CI();return io(w+ke*(k-w+Ut("1e-"+((ke+"").length-1))),k)}return $b(w,k)}var yX=Em(function(w,k,Y){return k=k.toLowerCase(),w+(Y?tP(k):k)});function tP(w){return vx(qa(w).toLowerCase())}function nP(w){return w=qa(w),w&&w.replace(re,uW).replace(ec,"")}function _X(w,k,Y){w=qa(w),k=gi(k);var pe=w.length;Y=Y===n?pe:Cf(ia(Y),0,pe);var ke=Y;return Y-=k.length,Y>=0&&w.slice(Y,ke)==k}function wX(w){return w=qa(w),w&&Wt.test(w)?w.replace(vt,cW):w}function bX(w){return w=qa(w),w&&bn.test(w)?w.replace(Xt,"\\$&"):w}var xX=Em(function(w,k,Y){return w+(Y?"-":"")+k.toLowerCase()}),CX=Em(function(w,k,Y){return w+(Y?" ":"")+k.toLowerCase()}),SX=sF("toLowerCase");function EX(w,k,Y){w=qa(w),k=ia(k);var pe=k?ym(w):0;if(!k||pe>=k)return w;var ke=(k-pe)/2;return D1(_1(ke),Y)+w+D1(y1(ke),Y)}function kX(w,k,Y){w=qa(w),k=ia(k);var pe=k?ym(w):0;return k&&pe<k?w+D1(k-pe,Y):w}function BX(w,k,Y){w=qa(w),k=ia(k);var pe=k?ym(w):0;return k&&pe<k?D1(k-pe,Y)+w:w}function TX(w,k,Y){return Y||k==null?k=0:k&&(k=+k),NW(qa(w).replace(wn,""),k||0)}function IX(w,k,Y){return(Y?No(w,k,Y):k===n)?k=1:k=ia(k),Qb(qa(w),k)}function FX(){var w=arguments,k=qa(w[0]);return w.length<3?k:k.replace(w[1],w[2])}var PX=Em(function(w,k,Y){return w+(Y?"_":"")+k.toLowerCase()});function DX(w,k,Y){return Y&&typeof Y!="number"&&No(w,k,Y)&&(k=Y=n),Y=Y===n?ne:Y>>>0,Y?(w=qa(w),w&&(typeof k=="string"||k!=null&&!fx(k))&&(k=gi(k),!k&&gm(w))?ud(gl(w),0,Y):w.split(k,Y)):[]}var UX=Em(function(w,k,Y){return w+(Y?" ":"")+vx(k)});function RX(w,k,Y){return w=qa(w),Y=Y==null?0:Cf(ia(Y),0,w.length),k=gi(k),w.slice(Y,Y+k.length)==k}function NX(w,k,Y){var pe=De.templateSettings;Y&&No(w,k,Y)&&(k=n),w=qa(w),k=z1({},k,pe,fF);var ke=z1({},k.imports,pe.imports,fF),Me=Us(ke),Je=fu(ke,Me),st,ht,$t=0,Qt=k.interpolate||ue,jt="__p += '",cn=Bb((k.escape||ue).source+"|"+Qt.source+"|"+(Qt===rt?$e:ue).source+"|"+(k.evaluate||ue).source+"|$","g"),xn="//# sourceURL="+(tr.call(k,"sourceURL")?(k.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++vm+"]")+`
`;w.replace(cn,function(Hn,va,ba,_i,Vo,wi){return ba||(ba=_i),jt+=w.slice($t,wi).replace(We,dW),va&&(st=!0,jt+=`' +
__e(`+va+`) +
'`),Vo&&(ht=!0,jt+=`';
`+Vo+`;
__p += '`),ba&&(jt+=`' +
((__t = (`+ba+`)) == null ? '' : __t) +
'`),$t=wi+Hn.length,Hn}),jt+=`';
`;var On=tr.call(k,"variable")&&k.variable;if(!On)jt=`with (obj) {
`+jt+`
}
`;else if(Te.test(On))throw new Xn(l);jt=(ht?jt.replace(Vt,""):jt).replace(zt,"$1").replace(ln,"$1;"),jt="function("+(On||"obj")+`) {
`+(On?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(st?", __e = _.escape":"")+(ht?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+jt+`return __p
}`;var da=rP(function(){return $a(Me,xn+"return "+jt).apply(n,Je)});if(da.source=jt,dx(da))throw da;return da}function VX(w){return qa(w).toLowerCase()}function LX(w){return qa(w).toUpperCase()}function MX(w,k,Y){if(w=qa(w),w&&(Y||k===n))return ys(w);if(!w||!(k=gi(k)))return w;var pe=gl(w),ke=gl(k),Me=_f(pe,ke),Je=pm(pe,ke)+1;return ud(pe,Me,Je).join("")}function OX(w,k,Y){if(w=qa(w),w&&(Y||k===n))return w.slice(0,pI(w)+1);if(!w||!(k=gi(k)))return w;var pe=gl(w),ke=pm(pe,gl(k))+1;return ud(pe,0,ke).join("")}function HX(w,k,Y){if(w=qa(w),w&&(Y||k===n))return w.replace(wn,"");if(!w||!(k=gi(k)))return w;var pe=gl(w),ke=_f(pe,gl(k));return ud(pe,ke).join("")}function $X(w,k){var Y=D,pe=U;if(Ur(k)){var ke="separator"in k?k.separator:ke;Y="length"in k?ia(k.length):Y,pe="omission"in k?gi(k.omission):pe}w=qa(w);var Me=w.length;if(gm(w)){var Je=gl(w);Me=Je.length}if(Y>=Me)return w;var st=Y-ym(pe);if(st<1)return pe;var ht=Je?ud(Je,0,st).join(""):w.slice(0,st);if(ke===n)return ht+pe;if(Je&&(st+=ht.length-st),fx(ke)){if(w.slice(st).search(ke)){var $t,Qt=ht;for(ke.global||(ke=Bb(ke.source,qa(dt.exec(ke))+"g")),ke.lastIndex=0;$t=ke.exec(Qt);)var jt=$t.index;ht=ht.slice(0,jt===n?st:jt)}}else if(w.indexOf(gi(ke),st)!=st){var cn=ht.lastIndexOf(ke);cn>-1&&(ht=ht.slice(0,cn))}return ht+pe}function QX(w){return w=qa(w),w&&et.test(w)?w.replace(Dn,gW):w}var GX=Em(function(w,k,Y){return w+(Y?" ":"")+k.toUpperCase()}),vx=sF("toUpperCase");function aP(w,k,Y){return w=qa(w),k=Y?n:k,k===n?AW(w)?wW(w):Zo(w):w.match(k)||[]}var rP=fa(function(w,k){try{return aa(w,n,k)}catch(Y){return dx(Y)?Y:new Xn(Y)}}),zX=uc(function(w,k){return zr(k,function(Y){Y=vu(Y),ic(w,Y,ux(w[Y],w))}),w});function WX(w){var k=w==null?0:w.length,Y=Nn();return w=k?ga(w,function(pe){if(typeof pe[1]!="function")throw new Qi(o);return[Y(pe[0]),pe[1]]}):[],fa(function(pe){for(var ke=-1;++ke<k;){var Me=w[ke];if(aa(Me[0],this,pe))return aa(Me[1],this,pe)}})}function KX(w){return gK(zi(w,A))}function hx(w){return function(){return w}}function jX(w,k){return w==null||w!==w?k:w}var qX=iF(),YX=iF(!0);function ai(w){return w}function px(w){return VI(typeof w=="function"?w:zi(w,A))}function XX(w){return MI(zi(w,A))}function JX(w,k){return OI(w,zi(k,A))}var ZX=fa(function(w,k){return function(Y){return ep(Y,w,k)}}),eJ=fa(function(w,k){return function(Y){return ep(w,Y,k)}});function gx(w,k,Y){var pe=Us(k),ke=E1(k,pe);Y==null&&!(Ur(k)&&(ke.length||!pe.length))&&(Y=k,k=w,w=this,ke=E1(k,Us(k)));var Me=!(Ur(Y)&&"chain"in Y)||!!Y.chain,Je=dc(w);return zr(ke,function(st){var ht=k[st];w[st]=ht,Je&&(w.prototype[st]=function(){var $t=this.__chain__;if(Me||$t){var Qt=w(this.__wrapped__),jt=Qt.__actions__=ei(this.__actions__);return jt.push({func:ht,args:arguments,thisArg:w}),Qt.__chain__=$t,Qt}return ht.apply(w,Ds([this.value()],arguments))})}),w}function tJ(){return sn._===this&&(sn._=kW),this}function yx(){}function nJ(w){return w=ia(w),fa(function(k){return HI(k,w)})}var aJ=Yb(ga),rJ=Yb(zs),sJ=Yb(Ke);function sP(w){return ax(w)?Le(vu(w)):RK(w)}function oJ(w){return function(k){return w==null?n:Sf(w,k)}}var iJ=uF(),lJ=uF(!0);function _x(){return[]}function wx(){return!1}function uJ(){return{}}function cJ(){return""}function dJ(){return!0}function fJ(w,k){if(w=ia(w),w<1||w>ce)return[];var Y=ne,pe=io(w,ne);k=Nn(k),w-=ne;for(var ke=Wr(pe,k);++Y<w;)k(Y);return ke}function AJ(w){return ea(w)?ga(w,vu):yi(w)?[w]:ei(SF(qa(w)))}function mJ(w){var k=++SW;return qa(w)+k}var vJ=P1(function(w,k){return w+k},0),hJ=Xb("ceil"),pJ=P1(function(w,k){return w/k},1),gJ=Xb("floor");function yJ(w){return w&&w.length?S1(w,ai,Nb):n}function _J(w,k){return w&&w.length?S1(w,Nn(k,2),Nb):n}function wJ(w){return we(w,ai)}function bJ(w,k){return we(w,Nn(k,2))}function xJ(w){return w&&w.length?S1(w,ai,Ob):n}function CJ(w,k){return w&&w.length?S1(w,Nn(k,2),Ob):n}var SJ=P1(function(w,k){return w*k},1),EJ=Xb("round"),kJ=P1(function(w,k){return w-k},0);function BJ(w){return w&&w.length?Ha(w,ai):0}function TJ(w,k){return w&&w.length?Ha(w,Nn(k,2)):0}return De.after=Xq,De.ary=NF,De.assign=LY,De.assignIn=YF,De.assignInWith=z1,De.assignWith=MY,De.at=OY,De.before=VF,De.bind=ux,De.bindAll=zX,De.bindKey=LF,De.castArray=uY,De.chain=DF,De.chunk=gj,De.compact=yj,De.concat=_j,De.cond=WX,De.conforms=KX,De.constant=hx,De.countBy=Bq,De.create=HY,De.curry=MF,De.curryRight=OF,De.debounce=HF,De.defaults=$Y,De.defaultsDeep=QY,De.defer=Jq,De.delay=Zq,De.difference=wj,De.differenceBy=bj,De.differenceWith=xj,De.drop=Cj,De.dropRight=Sj,De.dropRightWhile=Ej,De.dropWhile=kj,De.fill=Bj,De.filter=Iq,De.flatMap=Dq,De.flatMapDeep=Uq,De.flatMapDepth=Rq,De.flatten=TF,De.flattenDeep=Tj,De.flattenDepth=Ij,De.flip=eY,De.flow=qX,De.flowRight=YX,De.fromPairs=Fj,De.functions=YY,De.functionsIn=XY,De.groupBy=Nq,De.initial=Dj,De.intersection=Uj,De.intersectionBy=Rj,De.intersectionWith=Nj,De.invert=ZY,De.invertBy=eX,De.invokeMap=Lq,De.iteratee=px,De.keyBy=Mq,De.keys=Us,De.keysIn=ni,De.map=M1,De.mapKeys=nX,De.mapValues=aX,De.matches=XX,De.matchesProperty=JX,De.memoize=H1,De.merge=rX,De.mergeWith=XF,De.method=ZX,De.methodOf=eJ,De.mixin=gx,De.negate=$1,De.nthArg=nJ,De.omit=sX,De.omitBy=oX,De.once=tY,De.orderBy=Oq,De.over=aJ,De.overArgs=nY,De.overEvery=rJ,De.overSome=sJ,De.partial=cx,De.partialRight=$F,De.partition=Hq,De.pick=iX,De.pickBy=JF,De.property=sP,De.propertyOf=oJ,De.pull=Oj,De.pullAll=FF,De.pullAllBy=Hj,De.pullAllWith=$j,De.pullAt=Qj,De.range=iJ,De.rangeRight=lJ,De.rearg=aY,De.reject=Gq,De.remove=Gj,De.rest=rY,De.reverse=ix,De.sampleSize=Wq,De.set=uX,De.setWith=cX,De.shuffle=Kq,De.slice=zj,De.sortBy=Yq,De.sortedUniq=Jj,De.sortedUniqBy=Zj,De.split=DX,De.spread=sY,De.tail=eq,De.take=tq,De.takeRight=nq,De.takeRightWhile=aq,De.takeWhile=rq,De.tap=yq,De.throttle=oY,De.thru=L1,De.toArray=KF,De.toPairs=ZF,De.toPairsIn=eP,De.toPath=AJ,De.toPlainObject=qF,De.transform=dX,De.unary=iY,De.union=sq,De.unionBy=oq,De.unionWith=iq,De.uniq=lq,De.uniqBy=uq,De.uniqWith=cq,De.unset=fX,De.unzip=lx,De.unzipWith=PF,De.update=AX,De.updateWith=mX,De.values=Tm,De.valuesIn=vX,De.without=dq,De.words=aP,De.wrap=lY,De.xor=fq,De.xorBy=Aq,De.xorWith=mq,De.zip=vq,De.zipObject=hq,De.zipObjectDeep=pq,De.zipWith=gq,De.entries=ZF,De.entriesIn=eP,De.extend=YF,De.extendWith=z1,gx(De,De),De.add=vJ,De.attempt=rP,De.camelCase=yX,De.capitalize=tP,De.ceil=hJ,De.clamp=hX,De.clone=cY,De.cloneDeep=fY,De.cloneDeepWith=AY,De.cloneWith=dY,De.conformsTo=mY,De.deburr=nP,De.defaultTo=jX,De.divide=pJ,De.endsWith=_X,De.eq=_l,De.escape=wX,De.escapeRegExp=bX,De.every=Tq,De.find=Fq,De.findIndex=kF,De.findKey=GY,De.findLast=Pq,De.findLastIndex=BF,De.findLastKey=zY,De.floor=gJ,De.forEach=UF,De.forEachRight=RF,De.forIn=WY,De.forInRight=KY,De.forOwn=jY,De.forOwnRight=qY,De.get=Ax,De.gt=vY,De.gte=hY,De.has=JY,De.hasIn=mx,De.head=IF,De.identity=ai,De.includes=Vq,De.indexOf=Pj,De.inRange=pX,De.invoke=tX,De.isArguments=Bf,De.isArray=ea,De.isArrayBuffer=pY,De.isArrayLike=ti,De.isArrayLikeObject=Kr,De.isBoolean=gY,De.isBuffer=cd,De.isDate=yY,De.isElement=_Y,De.isEmpty=wY,De.isEqual=bY,De.isEqualWith=xY,De.isError=dx,De.isFinite=CY,De.isFunction=dc,De.isInteger=QF,De.isLength=Q1,De.isMap=GF,De.isMatch=SY,De.isMatchWith=EY,De.isNaN=kY,De.isNative=BY,De.isNil=IY,De.isNull=TY,De.isNumber=zF,De.isObject=Ur,De.isObjectLike=Lr,De.isPlainObject=op,De.isRegExp=fx,De.isSafeInteger=FY,De.isSet=WF,De.isString=G1,De.isSymbol=yi,De.isTypedArray=Bm,De.isUndefined=PY,De.isWeakMap=DY,De.isWeakSet=UY,De.join=Vj,De.kebabCase=xX,De.last=Ki,De.lastIndexOf=Lj,De.lowerCase=CX,De.lowerFirst=SX,De.lt=RY,De.lte=NY,De.max=yJ,De.maxBy=_J,De.mean=wJ,De.meanBy=bJ,De.min=xJ,De.minBy=CJ,De.stubArray=_x,De.stubFalse=wx,De.stubObject=uJ,De.stubString=cJ,De.stubTrue=dJ,De.multiply=SJ,De.nth=Mj,De.noConflict=tJ,De.noop=yx,De.now=O1,De.pad=EX,De.padEnd=kX,De.padStart=BX,De.parseInt=TX,De.random=gX,De.reduce=$q,De.reduceRight=Qq,De.repeat=IX,De.replace=FX,De.result=lX,De.round=EJ,De.runInContext=ct,De.sample=zq,De.size=jq,De.snakeCase=PX,De.some=qq,De.sortedIndex=Wj,De.sortedIndexBy=Kj,De.sortedIndexOf=jj,De.sortedLastIndex=qj,De.sortedLastIndexBy=Yj,De.sortedLastIndexOf=Xj,De.startCase=UX,De.startsWith=RX,De.subtract=kJ,De.sum=BJ,De.sumBy=TJ,De.template=NX,De.times=fJ,De.toFinite=fc,De.toInteger=ia,De.toLength=jF,De.toLower=VX,De.toNumber=ji,De.toSafeInteger=VY,De.toString=qa,De.toUpper=LX,De.trim=MX,De.trimEnd=OX,De.trimStart=HX,De.truncate=$X,De.unescape=QX,De.uniqueId=mJ,De.upperCase=GX,De.upperFirst=vx,De.each=UF,De.eachRight=RF,De.first=IF,gx(De,(function(){var w={};return Au(De,function(k,Y){tr.call(De.prototype,Y)||(w[Y]=k)}),w})(),{chain:!1}),De.VERSION=a,zr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){De[w].placeholder=De}),zr(["drop","take"],function(w,k){ya.prototype[w]=function(Y){Y=Y===n?1:ws(ia(Y),0);var pe=this.__filtered__&&!k?new ya(this):this.clone();return pe.__filtered__?pe.__takeCount__=io(Y,pe.__takeCount__):pe.__views__.push({size:io(Y,ne),type:w+(pe.__dir__<0?"Right":"")}),pe},ya.prototype[w+"Right"]=function(Y){return this.reverse()[w](Y).reverse()}}),zr(["filter","map","takeWhile"],function(w,k){var Y=k+1,pe=Y==oe||Y==te;ya.prototype[w]=function(ke){var Me=this.clone();return Me.__iteratees__.push({iteratee:Nn(ke,3),type:Y}),Me.__filtered__=Me.__filtered__||pe,Me}}),zr(["head","last"],function(w,k){var Y="take"+(k?"Right":"");ya.prototype[w]=function(){return this[Y](1).value()[0]}}),zr(["initial","tail"],function(w,k){var Y="drop"+(k?"":"Right");ya.prototype[w]=function(){return this.__filtered__?new ya(this):this[Y](1)}}),ya.prototype.compact=function(){return this.filter(ai)},ya.prototype.find=function(w){return this.filter(w).head()},ya.prototype.findLast=function(w){return this.reverse().find(w)},ya.prototype.invokeMap=fa(function(w,k){return typeof w=="function"?new ya(this):this.map(function(Y){return ep(Y,w,k)})}),ya.prototype.reject=function(w){return this.filter($1(Nn(w)))},ya.prototype.slice=function(w,k){w=ia(w);var Y=this;return Y.__filtered__&&(w>0||k<0)?new ya(Y):(w<0?Y=Y.takeRight(-w):w&&(Y=Y.drop(w)),k!==n&&(k=ia(k),Y=k<0?Y.dropRight(-k):Y.take(k-w)),Y)},ya.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},ya.prototype.toArray=function(){return this.take(ne)},Au(ya.prototype,function(w,k){var Y=/^(?:filter|find|map|reject)|While$/.test(k),pe=/^(?:head|last)$/.test(k),ke=De[pe?"take"+(k=="last"?"Right":""):k],Me=pe||/^find/.test(k);ke&&(De.prototype[k]=function(){var Je=this.__wrapped__,st=pe?[1]:arguments,ht=Je instanceof ya,$t=st[0],Qt=ht||ea(Je),jt=function(va){var ba=ke.apply(De,Ds([va],st));return pe&&cn?ba[0]:ba};Qt&&Y&&typeof $t=="function"&&$t.length!=1&&(ht=Qt=!1);var cn=this.__chain__,xn=!!this.__actions__.length,On=Me&&!cn,da=ht&&!xn;if(!Me&&Qt){Je=da?Je:new ya(this);var Hn=w.apply(Je,st);return Hn.__actions__.push({func:L1,args:[jt],thisArg:n}),new Gi(Hn,cn)}return On&&da?w.apply(this,st):(Hn=this.thru(jt),On?pe?Hn.value()[0]:Hn.value():Hn)})}),zr(["pop","push","shift","sort","splice","unshift"],function(w){var k=c1[w],Y=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",pe=/^(?:pop|shift)$/.test(w);De.prototype[w]=function(){var ke=arguments;if(pe&&!this.__chain__){var Me=this.value();return k.apply(ea(Me)?Me:[],ke)}return this[Y](function(Je){return k.apply(ea(Je)?Je:[],ke)})}}),Au(ya.prototype,function(w,k){var Y=De[k];if(Y){var pe=Y.name+"";tr.call(xm,pe)||(xm[pe]=[]),xm[pe].push({name:k,func:Y})}}),xm[F1(n,_).name]=[{name:"wrapper",func:n}],ya.prototype.clone=QW,ya.prototype.reverse=GW,ya.prototype.value=zW,De.prototype.at=_q,De.prototype.chain=wq,De.prototype.commit=bq,De.prototype.next=xq,De.prototype.plant=Sq,De.prototype.reverse=Eq,De.prototype.toJSON=De.prototype.valueOf=De.prototype.value=kq,De.prototype.first=De.prototype.head,Kh&&(De.prototype[Kh]=Cq),De}),_m=bW();Fn?((Fn.exports=_m)._=_m,rr._=_m):sn._=_m}).call(ime)})(Ip,Ip.exports)),Ip.exports}var ume=lme();const Kn=EM(ume),DM=6048e5,cme=864e5,UM=6e4,RM=36e5,Y3=Symbol.for("constructDateFrom");function $c(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Y3 in e?e[Y3](t):e instanceof Date?new e.constructor(t):new Date(t)}function yr(e,t){return $c(t||e,e)}let dme={};function Iw(){return dme}function Q0(e,t){const n=Iw(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=yr(e,t?.in),s=r.getDay(),o=(s<a?7:0)+s-a;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function n2(e,t){return Q0(e,{...t,weekStartsOn:1})}function NM(e,t){const n=yr(e,t?.in),a=n.getFullYear(),r=$c(n,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const s=n2(r),o=$c(n,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const l=n2(o);return n.getTime()>=s.getTime()?a+1:n.getTime()>=l.getTime()?a:a-1}function X3(e){const t=yr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function yh(e,...t){const n=$c.bind(null,t.find(a=>typeof a=="object"));return t.map(n)}function a2(e,t){const n=yr(e,t?.in);return n.setHours(0,0,0,0),n}function fme(e,t,n){const[a,r]=yh(n?.in,e,t),s=a2(a),o=a2(r),l=+s-X3(s),c=+o-X3(o);return Math.round((l-c)/cme)}function Ame(e,t){const n=NM(e,t),a=$c(e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),n2(a)}function n0(e,t){const n=+yr(e)-+yr(t);return n<0?-1:n>0?1:n}function mme(e,t,n){const[a,r]=yh(n?.in,e,t);return+a2(a)==+a2(r)}function vme(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function hme(e){return!(!vme(e)&&typeof e!="number"||isNaN(+yr(e)))}function pme(e,t,n){const[a,r]=yh(n?.in,e,t),s=a.getFullYear()-r.getFullYear(),o=a.getMonth()-r.getMonth();return s*12+o}function gme(e,t,n){const[a,r]=yh(n?.in,e,t);return a.getFullYear()-r.getFullYear()}function yme(e,t){const n=yr(e,t?.in);return n.setHours(23,59,59,999),n}function _me(e,t){const n=yr(e,t?.in),a=n.getMonth();return n.setFullYear(n.getFullYear(),a+1,0),n.setHours(23,59,59,999),n}function wme(e,t){const n=yr(e,t?.in);return+yme(n,t)==+_me(n,t)}function bme(e,t,n){const[a,r,s]=yh(n?.in,e,e,t),o=n0(r,s),l=Math.abs(pme(r,s));if(l<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*l);let c=n0(r,s)===-o;wme(a)&&l===1&&n0(a,s)===1&&(c=!1);const f=o*(l-+c);return f===0?0:f}function VM(e,t,n){const[a,r]=yh(n?.in,e,t),s=n0(a,r),o=Math.abs(gme(a,r));a.setFullYear(1584),r.setFullYear(1584);const l=n0(a,r)===-s,c=s*(o-+l);return c===0?0:c}function xme(e,t){const n=yr(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Cme={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Sme=(e,t,n)=>{let a;const r=Cme[e];return typeof r=="string"?a=r:t===1?a=r.one:a=r.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function lC(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Eme={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kme={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Bme={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tme={date:lC({formats:Eme,defaultWidth:"full"}),time:lC({formats:kme,defaultWidth:"full"}),dateTime:lC({formats:Bme,defaultWidth:"full"})},Ime={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Fme=(e,t,n,a)=>Ime[e];function Ap(e){return(t,n)=>{const a=n?.context?String(n.context):"standalone";let r;if(a==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n?.width?String(n.width):o;r=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n?.width?String(n.width):e.defaultWidth;r=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return r[s]}}const Pme={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Dme={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ume={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Rme={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Nme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Lme=(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Mme={ordinalNumber:Lme,era:Ap({values:Pme,defaultWidth:"wide"}),quarter:Ap({values:Dme,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ap({values:Ume,defaultWidth:"wide"}),day:Ap({values:Rme,defaultWidth:"wide"}),dayPeriod:Ap({values:Nme,defaultWidth:"wide",formattingValues:Vme,defaultFormattingWidth:"wide"})};function mp(e){return(t,n={})=>{const a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;const o=s[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Hme(l,A=>A.test(o)):Ome(l,A=>A.test(o));let f;f=e.valueCallback?e.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const d=t.slice(o.length);return{value:f,rest:d}}}function Ome(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Hme(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function $me(e){return(t,n={})=>{const a=t.match(e.matchPattern);if(!a)return null;const r=a[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(r.length);return{value:o,rest:l}}}const Qme=/^(\d+)(th|st|nd|rd)?/i,Gme=/\d+/i,zme={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Wme={any:[/^b/i,/^(a|c)/i]},Kme={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jme={any:[/1/i,/2/i,/3/i,/4/i]},qme={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Yme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Xme={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Jme={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zme={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eve={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tve={ordinalNumber:$me({matchPattern:Qme,parsePattern:Gme,valueCallback:e=>parseInt(e,10)}),era:mp({matchPatterns:zme,defaultMatchWidth:"wide",parsePatterns:Wme,defaultParseWidth:"any"}),quarter:mp({matchPatterns:Kme,defaultMatchWidth:"wide",parsePatterns:jme,defaultParseWidth:"any",valueCallback:e=>e+1}),month:mp({matchPatterns:qme,defaultMatchWidth:"wide",parsePatterns:Yme,defaultParseWidth:"any"}),day:mp({matchPatterns:Xme,defaultMatchWidth:"wide",parsePatterns:Jme,defaultParseWidth:"any"}),dayPeriod:mp({matchPatterns:Zme,defaultMatchWidth:"any",parsePatterns:eve,defaultParseWidth:"any"})},nve={code:"en-US",formatDistance:Sme,formatLong:Tme,formatRelative:Fme,localize:Mme,match:tve,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ave(e,t){const n=yr(e,t?.in);return fme(n,xme(n))+1}function rve(e,t){const n=yr(e,t?.in),a=+n2(n)-+Ame(n);return Math.round(a/DM)+1}function LM(e,t){const n=yr(e,t?.in),a=n.getFullYear(),r=Iw(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=$c(t?.in||e,0);o.setFullYear(a+1,0,s),o.setHours(0,0,0,0);const l=Q0(o,t),c=$c(t?.in||e,0);c.setFullYear(a,0,s),c.setHours(0,0,0,0);const f=Q0(c,t);return+n>=+l?a+1:+n>=+f?a:a-1}function sve(e,t){const n=Iw(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=LM(e,t),s=$c(t?.in||e,0);return s.setFullYear(r,0,a),s.setHours(0,0,0,0),Q0(s,t)}function ove(e,t){const n=yr(e,t?.in),a=+Q0(n,t)-+sve(n,t);return Math.round(a/DM)+1}function nr(e,t){const n=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return n+a}const vd={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return nr(t==="yy"?a%100:a,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):nr(n+1,2)},d(e,t){return nr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return nr(e.getHours()%12||12,t.length)},H(e,t){return nr(e.getHours(),t.length)},m(e,t){return nr(e.getMinutes(),t.length)},s(e,t){return nr(e.getSeconds(),t.length)},S(e,t){const n=t.length,a=e.getMilliseconds(),r=Math.trunc(a*Math.pow(10,n-3));return nr(r,t.length)}},Om={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},J3={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const a=e.getFullYear(),r=a>0?a:1-a;return n.ordinalNumber(r,{unit:"year"})}return vd.y(e,t)},Y:function(e,t,n,a){const r=LM(e,a),s=r>0?r:1-r;if(t==="YY"){const o=s%100;return nr(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):nr(s,t.length)},R:function(e,t){const n=NM(e);return nr(n,t.length)},u:function(e,t){const n=e.getFullYear();return nr(n,t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return nr(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return nr(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return vd.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return nr(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const r=ove(e,a);return t==="wo"?n.ordinalNumber(r,{unit:"week"}):nr(r,t.length)},I:function(e,t,n){const a=rve(e);return t==="Io"?n.ordinalNumber(a,{unit:"week"}):nr(a,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):vd.d(e,t)},D:function(e,t,n){const a=ave(e);return t==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):nr(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return nr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return nr(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),r=a===0?7:a;switch(t){case"i":return String(r);case"ii":return nr(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let r;switch(a===12?r=Om.noon:a===0?r=Om.midnight:r=a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let r;switch(a>=17?r=Om.evening:a>=12?r=Om.afternoon:a>=4?r=Om.morning:r=Om.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return vd.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):vd.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return t==="Ko"?n.ordinalNumber(a,{unit:"hour"}):nr(a,t.length)},k:function(e,t,n){let a=e.getHours();return a===0&&(a=24),t==="ko"?n.ordinalNumber(a,{unit:"hour"}):nr(a,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):vd.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):vd.s(e,t)},S:function(e,t){return vd.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return eU(a);case"XXXX":case"XX":return Hf(a);case"XXXXX":case"XXX":default:return Hf(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return eU(a);case"xxxx":case"xx":return Hf(a);case"xxxxx":case"xxx":default:return Hf(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Z3(a,":");case"OOOO":default:return"GMT"+Hf(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Z3(a,":");case"zzzz":default:return"GMT"+Hf(a,":")}},t:function(e,t,n){const a=Math.trunc(+e/1e3);return nr(a,t.length)},T:function(e,t,n){return nr(+e,t.length)}};function Z3(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=Math.trunc(a/60),s=a%60;return s===0?n+String(r):n+String(r)+t+nr(s,2)}function eU(e,t){return e%60===0?(e>0?"-":"+")+nr(Math.abs(e)/60,2):Hf(e,t)}function Hf(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=nr(Math.trunc(a/60),2),s=nr(a%60,2);return n+r+t+s}const tU=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},MM=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ive=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],r=n[2];if(!r)return tU(e,t);let s;switch(a){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",tU(a,t)).replace("{{time}}",MM(r,t))},lve={p:MM,P:ive},uve=/^D+$/,cve=/^Y+$/,dve=["D","DD","YY","YYYY"];function fve(e){return uve.test(e)}function Ave(e){return cve.test(e)}function mve(e,t,n){const a=vve(e,t,n);if(console.warn(a),dve.includes(e))throw new RangeError(a)}function vve(e,t,n){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hve=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gve=/^'([^]*?)'?$/,yve=/''/g,_ve=/[a-zA-Z]/;function To(e,t,n){const a=Iw(),r=a.locale??nve,s=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,l=yr(e,n?.in);if(!hme(l))throw new RangeError("Invalid time value");let c=t.match(pve).map(d=>{const A=d[0];if(A==="p"||A==="P"){const m=lve[A];return m(d,r.formatLong)}return d}).join("").match(hve).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const A=d[0];if(A==="'")return{isToken:!1,value:wve(d)};if(J3[A])return{isToken:!0,value:d};if(A.match(_ve))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:d}});r.localize.preprocessor&&(c=r.localize.preprocessor(l,c));const f={firstWeekContainsDate:s,weekStartsOn:o,locale:r};return c.map(d=>{if(!d.isToken)return d.value;const A=d.value;(Ave(A)||fve(A))&&mve(A,t,String(e));const m=J3[A[0]];return m(l,A,r.localize,f)}).join("")}function wve(e){const t=e.match(gve);return t?t[1].replace(yve,"'"):e}function nU(e,t){return yr(e*1e3,t?.in)}function bve(e){return Math.trunc(+yr(e)/1e3)}function xve(e,t){return+yr(e)>+yr(t)}function jA(e,t){const n=()=>$c(t?.in,NaN),r=kve(e);let s;if(r.date){const f=Bve(r.date,2);s=Tve(f.restDateString,f.year)}if(!s||isNaN(+s))return n();const o=+s;let l=0,c;if(r.time&&(l=Ive(r.time),isNaN(l)))return n();if(r.timezone){if(c=Fve(r.timezone),isNaN(c))return n()}else{const f=new Date(o+l),d=yr(0,t?.in);return d.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),d.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),d}return yr(o+l+c,t?.in)}const iy={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Cve=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Sve=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Eve=/^([+-])(\d{2})(?::?(\d{2}))?$/;function kve(e){const t={},n=e.split(iy.dateTimeDelimiter);let a;if(n.length>2)return t;if(/:/.test(n[0])?a=n[0]:(t.date=n[0],a=n[1],iy.timeZoneDelimiter.test(t.date)&&(t.date=e.split(iy.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){const r=iy.timezone.exec(a);r?(t.time=a.replace(r[1],""),t.timezone=r[1]):t.time=a}return t}function Bve(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};const r=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:s===null?r:s*100,restDateString:e.slice((a[1]||a[2]).length)}}function Tve(e,t){if(t===null)return new Date(NaN);const n=e.match(Cve);if(!n)return new Date(NaN);const a=!!n[4],r=vp(n[1]),s=vp(n[2])-1,o=vp(n[3]),l=vp(n[4]),c=vp(n[5])-1;if(a)return Nve(t,l,c)?Pve(t,l,c):new Date(NaN);{const f=new Date(0);return!Uve(t,s,o)||!Rve(t,r)?new Date(NaN):(f.setUTCFullYear(t,s,Math.max(r,o)),f)}}function vp(e){return e?parseInt(e):1}function Ive(e){const t=e.match(Sve);if(!t)return NaN;const n=uC(t[1]),a=uC(t[2]),r=uC(t[3]);return Vve(n,a,r)?n*RM+a*UM+r*1e3:NaN}function uC(e){return e&&parseFloat(e.replace(",","."))||0}function Fve(e){if(e==="Z")return 0;const t=e.match(Eve);if(!t)return 0;const n=t[1]==="+"?-1:1,a=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return Lve(a,r)?n*(a*RM+r*UM):NaN}function Pve(e,t,n){const a=new Date(0);a.setUTCFullYear(e,0,4);const r=a.getUTCDay()||7,s=(t-1)*7+n+1-r;return a.setUTCDate(a.getUTCDate()+s),a}const Dve=[31,null,31,30,31,30,31,31,30,31,30,31];function OM(e){return e%400===0||e%4===0&&e%100!==0}function Uve(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Dve[t]||(OM(e)?29:28))}function Rve(e,t){return t>=1&&t<=(OM(e)?366:365)}function Nve(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function Vve(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function Lve(e,t){return t>=0&&t<=59}function HM(e,t,n){const a=yr(e,n?.in);return a.setHours(t),a}function Mve(e,t,n){const a=yr(e,n?.in);return a.setMilliseconds(t),a}function $M(e,t,n){const a=yr(e,n?.in);return a.setMinutes(t),a}function Ove(e,t,n){const a=yr(e,n?.in);return a.setSeconds(t),a}const sT=async(e,t,n=null)=>{try{const a=n||To(new Date,"yyyy-MM-dd");return{data:{consultation_id:(await it.post("/consultation/",{patient_id:e,doctor_id:t,consultation_date:a})).data?.data?.consultation_id||null},error:null}}catch(a){return console.error("There was an error adding the consultation:",a),{data:null,error:a}}},aU=async e=>{try{const t=await it.get(`/consultation/${e}`),n=Kn.cloneDeep(t.data.data.consultation),a=await GM(n.id);return n.medicines=a.data,{data:n,error:null}}catch(t){return console.error("Error updating consultation:",t),{data:[],error:t}}},QM=async e=>{try{return await it.put(`/consultation/${e.id}`,e),{error:null}}catch(t){return console.error("Error updating consultation:",t),{error:t}}};let ly={value:[]};const GM=async e=>{try{return{data:(await it.get(`/consultation/consultation_medicines/${e}`)).data.data.medicines,error:null}}catch(t){return console.error("Error fetching medicines:",t),{data:[],error:t}}},u_=async(e,t=null)=>{try{if(!e)throw new Error("patient_id is required");let n="";t?n=`?doctor_id=${t}`:console.warn(" fetchConsultations called without doctor_id - this will return ALL consultations for patient"),console.log(" Fetching consultations from:",`/consultation/consultations/${e}${n}`);const a=await it.get(`/consultation/consultations/${e}${n}`);ly=Kn.cloneDeep(a.data.data.consultations),console.log(" Raw consultations from API:",ly.length,"items");for(const r of ly){const s=await GM(r.id);r.medicines=s.data}return{data:ly,error:null}}catch(n){return console.error("Error fetching consultations from API:",n),{data:[],error:n}}},Hve=async e=>{try{console.log(`[Summary] Triggering summary generation for patient: ${e}`);const t=await it(yM({method:"post",url:`/consultation/generate-summary/${e}`}));return console.log(`[Summary] Summary generation queued successfully for patient: ${e}`),t}catch(t){return console.error(`[Summary] Failed to trigger summary generation for patient ${e}:`,t),{success:!1,error:t}}},zM=async e=>{try{return{data:(await it.post("/patient/create",e)).data.data.newPatient,error:null}}catch(t){return console.error("There was an error adding the patient:",t),{data:null,error:t}}},$ve=async e=>{try{return console.log(`DEBUG bulkCreatePatients - Sending ${e.length} patients to API`),e.forEach((n,a)=>{console.log(`DEBUG bulkCreatePatients PATIENT ${a} - Gender: ${JSON.stringify(n.gender)}, Type: ${typeof n.gender}`),a<3&&console.log(`DEBUG bulkCreatePatients PATIENT ${a} - Full data:`,JSON.stringify(n,null,2))}),{data:(await it.post("/patient/bulk-create",{patients:e})).data.data,error:null}}catch(t){return console.error("There was an error in bulk patient creation:",t),{data:null,error:t}}},oT=async e=>{try{return{data:(await it.get(`/patient/${e}`)).data.data.patient,error:null}}catch(t){return console.error("Error fetching patient details from API:",t),{data:null,error:t}}},Qve=async(e,t,n)=>{try{return{data:(await it.get("/patient/patients",{params:{name:e,phone:t,date:n}})).data.data.patients,error:null}}catch(a){return console.error("Error fetching patients from API:",a),{data:[],error:a}}},Gve=async e=>{try{return await it.put(`/patient/${e.id}`,e),{error:null}}catch(t){return{error:t}}},iT=async e=>{try{return{data:(await it.get(`/patient/search/${e}`)).data.data.patients,error:null}}catch(t){return console.error("Error fetching patient details from API:",t),{data:[],error:t}}},cC=e=>{if(!e)return"";try{const[t,n]=e.split(":");if(!t||!n)return e;let a=new Date;return a=HM(a,parseInt(t)),a=$M(a,parseInt(n)),a=Ove(a,0),a=Mve(a,0),To(a,"hh:mm a")}catch(t){return console.error("Error formatting time:",e,t),e}},lT=e=>{if(!e)return null;try{const t=typeof e=="string"?jA(e):new Date(e);return VM(new Date,t)}catch(t){return console.error("Error calculating age:",e,t),null}},Ug=e=>{if(e==null)return null;try{let t;if(typeof e=="number"?t=new Date(e*1e3):typeof e=="string"?t=jA(e):t=new Date(e),isNaN(t.getTime()))return null;const a=bme(new Date,t);if(a<0)return null;const r=Math.floor(a/12),s=a%12;return{years:r,months:s}}catch(t){return console.error("Error calculating age with months:",e,t),null}},qv=e=>{if(e==null)return"";if(typeof e=="number")return`${e} yrs`;if(typeof e=="object"&&e!==null&&typeof e.years=="number"){const{years:t,months:n}=e;return n!=null&&n>0?`${t} yrs ${n} mo`:`${t} yrs`}return""};function WM(e){const t=new Date;t.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),mme(n,t)||xve(n,t)}const mr=e=>{if(!e)return"";try{let t;if(typeof e=="string"){const n=e.replace(" ","T")+"Z";t=jA(n)}else t=new Date(e);return To(t,"MMMM d")}catch(t){return console.error("Error formatting date:",e,t),""}};To(new Date,"MMMM d");const Tn=()=>{const e=new Date,t=5.5*60*60*1e3,n=new Date(e.getTime()+t),a=n.getUTCFullYear(),r=String(n.getUTCMonth()+1).padStart(2,"0"),s=String(n.getUTCDate()).padStart(2,"0");return`${a}-${r}-${s}`},Ul=e=>{if(!e)return"";try{const t=typeof e=="string"?jA(e):new Date(e);return To(t,"MMM d, yyyy")}catch(t){return console.error("Error formatting date for chip:",e,t),e}},Bd=e=>{if(!e)return null;try{const t=jA(e);return bve(t)}catch(t){return console.error("Error converting date to timestamp:",e,t),null}},zve=e=>{if(!e||e<946684800)return"";try{const t=new Date(e*1e3);return To(t,"yyyy-MM-dd")}catch(t){return console.error("Error converting timestamp to date:",e,t),""}},Cr=[e=>e?!0:"this information is required"],_h=[e=>{if(!e)return"this information is required";const t=e.toString().replace(/\s+/g,"");return/^\d+$/.test(t)?t.length!==10?"Contact number must be exactly 10 digits.":/^0+$/.test(t)||/^(.)\1{9}$/.test(t)?"Please enter a valid phone number.":!0:"Contact number must contain only digits."}],KM=[e=>e?!0:"this information is required"],uT=[e=>{if(!e)return"this information is required.";const t=parseInt(e,10);return isNaN(t)||t<0||t>120?"Age must be a valid number between 0 and 120.":!0}],cT=[e=>{if(!e)return"this information is required.";const t=new Date(e);return WM(t)?"Birth date cannot be today or in the future.":!0}],dT=[e=>e?!0:"this information is required."],iE=[e=>{if(!e)return"this information is required.";const t=new Date(e);return WM(t)?!0:"Appointment date cannot be in the past."}],Rg=[e=>!e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"Please enter a valid email address"],Wve=[e=>{if(!e)return"this information is required";const t=e.toString().replace(/\s+/g,"");return/^\d+$/.test(t)?t.length!==6?"Pincode must be exactly 6 digits.":!0:"Pincode must contain only digits."}],jM=""+new URL("images/add_patient-CvgE6aXm.png",import.meta.url).href,Kve={class:"w-100",style:{"white-space":"normal",overflow:"visible","text-overflow":"unset"}},jve={class:"text-subtitle-2 mb-1",style:{"white-space":"normal","line-height":"1.3",overflow:"visible","text-overflow":"unset"}},qve={class:"text-caption",style:{opacity:"0.7"}},Yve={class:"d-flex justify-center"},Xve={class:"d-flex age-dob-container",style:{gap:"8px"}},Jve={class:"d-flex justify-center"},Zve={__name:"add-appointment",props:{doctorId:{type:[String,Number],required:!0},clinicId:{type:[String,Number],required:!0},selectedDate:{type:String,default:()=>Tn()}},emits:["close","appointment-created","error"],setup(e,{emit:t}){const n=e,a=Ln(),r=t;let s=null,o=null;const l=R(!1),c=R([]),f=R(""),d=R([]),A=R(!1),m=R(!1),p=R("dob"),h=R(""),y=R({name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""}),g=R(!1),_=Tn(),b=fe=>{if(!fe)return;let M="";if(fe instanceof Date){const z=fe.getFullYear(),se=String(fe.getMonth()+1).padStart(2,"0"),be=String(fe.getDate()).padStart(2,"0");M=`${z}-${se}-${be}`}else typeof fe=="string"&&(M=fe.split("T")[0]||fe);M&&(y.value.birthDate=M,W(M)),g.value=!1},S=()=>{y.value.birthDate="",h.value=""},B=R(n.selectedDate),F=R(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"})),T=R("walkin"),E=R(n.selectedDate),x=R(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"})),C=R("walkin"),D=ee(()=>n.doctorId),U=ee(()=>n.clinicId),L=ee(()=>a.getters["doctorModule/isProcedurePrimary"]),H=()=>L.value?"procedure":"consultation",oe=R(H()),de=R(H()),te=fe=>fe?`${fe.name||""} (${fe.contactNumber||fe.contact_number||""})`:"",q=(fe,M=0,z=!1)=>{if(M===0)return"First time patient";if(z&&M>1)return fe?`Has appointment today  Last visit: ${Ul(fe)}`:"Has appointment today";if(z&&M===1)return"First visit today";if(fe){const se=Tn(),be=fe;if(be<se)return`Last visit: ${Ul(be)}`;if(be>se)return`Next visit: ${Ul(be)}`}return"No previous visits"},ce=fe=>{if(!fe)return"";const M=fe.birthDate?Ug(fe.birthDate):fe.age!=null&&fe.age!==""?fe.age:null;return qv(M)},le=ee(()=>!f.value||f.value.length<1?"Start typing to search for patients":A.value?`No patients found matching "${f.value}"`:""),Z=R(!1),ne=R(!1),G=fe=>{const M=fe.target.value.replace(/[^0-9]/g,"").slice(0,10);y.value.contact_number=M},W=fe=>{if(p.value==="dob")if(fe){h.value=fe;const M=lT(fe);M!==null&&(y.value.age=M.toString())}else h.value=""};Ge(p,fe=>{fe==="age"?(y.value.birthDate&&(h.value=y.value.birthDate),y.value.birthDate=""):h.value&&(y.value.birthDate=h.value)});const Q=async fe=>{if(!fe||fe.length<1){c.value=[],A.value=!1;return}o&&o.abort(),o=new AbortController,l.value=!0,A.value=!1;try{const M=await iT(fe,{signal:o.signal});o.signal.aborted||(c.value=M.data,(!c.value||c.value.length===0)&&(A.value=!0))}catch(M){M.name!=="AbortError"&&(console.error("Error fetching patients:",M),A.value=!0)}finally{o?.signal.aborted||(l.value=!1)}};Ge(f,fe=>{s&&clearTimeout(s),A.value=!1,s=setTimeout(()=>{Q(fe)},300)}),Ge(L,(fe,M)=>{if(fe===M)return;const z=fe?"procedure":"consultation",se=M?"procedure":"consultation";oe.value===se&&(oe.value=z),de.value===se&&(de.value=z)},{immediate:!1});const O=()=>{m.value=!m.value,m.value&&(p.value="dob",h.value="",y.value={name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""})},ae=async()=>{const fe={...y.value};if(p.value==="dob"&&fe.birthDate){const se=Bd(fe.birthDate);se!==null?fe.birthDate=se.toString():fe.birthDate=""}else delete fe.birthDate;const M=await zM(fe),z=M.data.id;M.error?console.error("There was an error adding the patient:",M.error):J(z,D.value,U.value)},j=async(fe,M,z)=>{const se={patientId:fe,clinicId:z,doctorId:M,appointmentDate:B.value,appointmentTime:F.value,status:"waiting",category:T.value,type:oe.value};try{await it.post("/appointment/",se),L.value||await ie(fe,D.value,B.value),r("appointment-created",{success:!0,message:"Appointment created successfully"}),X()}catch(be){console.error("There was an error creating new appointment:",be),be.response?.status===409?r("error",{title:"Appointment Already Exists",message:"An appointment for this patient with the same doctor, clinic, and date already exists. Please choose a different date.",type:"warning"}):be.response?.status===404?r("error",{title:"Patient Not Found",message:"The selected patient could not be found. Please try searching again.",type:"error"}):be.response?.status===400?r("error",{title:"Invalid Data",message:be.response.data?.error||"Please check your appointment details and try again.",type:"error"}):r("error",{title:"Error Creating Appointment",message:"An unexpected error occurred while creating the appointment. Please try again.",type:"error"})}},J=async(fe,M,z)=>{const se={patientId:fe,clinicId:z,doctorId:M,appointmentDate:E.value,appointmentTime:x.value,status:"waiting",category:C.value,type:de.value};try{await it.post("/appointment/",se),L.value||await ie(fe,D.value,E.value),r("appointment-created",{success:!0,message:"Patient and appointment created successfully"}),X()}catch(be){console.error("There was an error creating new appointment:",be),be.response?.status===409?r("error",{title:"Appointment Already Exists",message:"An appointment for this patient with the same doctor, clinic, and date already exists. Please choose a different date.",type:"warning"}):be.response?.status===404?r("error",{title:"Patient Not Found",message:"The selected patient could not be found. Please try searching again.",type:"error"}):be.response?.status===400?r("error",{title:"Invalid Data",message:be.response.data?.error||"Please check your appointment details and try again.",type:"error"}):r("error",{title:"Error Creating Appointment",message:"An unexpected error occurred while creating the appointment. Please try again.",type:"error"})}},ie=async(fe,M,z=null)=>{await sT(fe,M,z)},X=()=>{r("close")};return ha(()=>{s&&(clearTimeout(s),s=null),o&&(o.abort(),o=null)}),(fe,M)=>{const z=I("v-card-title"),se=I("v-col"),be=I("v-icon"),Fe=I("v-btn"),ye=I("v-row"),Qe=I("v-card"),_e=I("v-list-item"),Se=I("v-divider"),Ee=I("v-card-subtitle"),Ue=I("v-list"),je=I("v-autocomplete"),at=I("v-card-text"),mt=I("v-text-field"),xe=I("v-select"),Be=I("v-form"),Ye=I("v-btn-toggle"),kt=I("v-date-picker"),xt=I("v-menu"),Nt=I("v-empty-state");return P(),he(Qe,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[i(ye,{"no-gutters":""},{default:u(()=>[i(se,{cols:"12"},{default:u(()=>[i(Qe,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(ye,{"no-gutters":""},{default:u(()=>[i(se,{cols:"11"},{default:u(()=>[i(z,{class:"pa-0 pl-2"},{default:u(()=>[...M[27]||(M[27]=[N("Add patient to queue",-1)])]),_:1})]),_:1}),i(se,{cols:"1"},{default:u(()=>[i(Fe,{icon:"",size:"x-small",onClick:X,tabindex:"-1"},{default:u(()=>[i(be,null,{default:u(()=>[...M[28]||(M[28]=[v("img",{src:su,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(ye,{"no-gutters":""},{default:u(()=>[i(se,{cols:"12"},{default:u(()=>[i(Qe,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[i(je,{ref:"searchRef",density:"compact",placeholder:"Search by name or phone",style:{width:"90%","max-width":"700px"},theme:"light",variant:"solo",rounded:"l",items:c.value,search:f.value,"onUpdate:search":M[2]||(M[2]=At=>f.value=At),loading:l.value,"item-title":te,"item-value":"id","return-object":"",modelValue:d.value,"onUpdate:modelValue":M[3]||(M[3]=At=>d.value=At),chips:"",clearable:"","prepend-inner-icon":"mdi-magnify","no-data-text":le.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1}},{item:u(({props:At,item:Ot,index:Dt})=>[i(Ue,{density:"compact",class:"pa-0 py-1"},{default:u(()=>[i(_e,Ie(At,{class:"py-0 my-0",style:{"min-height":"60px"}}),{default:u(()=>[v("div",Kve,[v("div",jve," ID: "+K(Ot.raw.id)+"  "+K(Ot.raw.gender)+K(ce(Ot.raw)?`, ${ce(Ot.raw)}`:"")+"  Added On: "+K(Oe(Ul)(Ot.raw.createdAt))+K(Ot.raw.importID?`  Import ID:
                      ${Ot.raw.importID}`:""),1),v("div",qve,K(q(Ot.raw.lastAppointmentDate,Ot.raw.totalAppointments,Ot.raw.hasAppointmentToday)),1)])]),_:2},1040),Dt===c.value.length-1?(P(),Ae(ze,{key:0},[i(Se),i(Qe,{flat:"",class:"pt-1"},{default:u(()=>[i(Ee,null,{default:u(()=>[...M[29]||(M[29]=[N("Patient not in list ?",-1)])]),_:1}),i(Fe,{class:"ml-3",variant:"outlined",onClick:M[0]||(M[0]=bt=>{fe.$refs.searchRef.blur(),O()})},{default:u(()=>[...M[30]||(M[30]=[N("Add New",-1)])]),_:1})]),_:1})],64)):ge("",!0)]),_:2},1024)]),"no-data":u(()=>[i(Ue,{density:"compact"},{default:u(()=>[i(_e,null,{default:u(()=>[i(Ee,null,{default:u(()=>[N(K(le.value),1)]),_:1})]),_:1}),A.value&&f.value&&f.value.length>=1?(P(),Ae(ze,{key:0},[i(Se),i(Qe,{flat:"",class:"pt-1"},{default:u(()=>[i(Ee,null,{default:u(()=>[...M[31]||(M[31]=[N("Patient not in list ?",-1)])]),_:1}),i(Fe,{class:"ml-3",variant:"outlined",onClick:M[1]||(M[1]=At=>{fe.$refs.searchRef.blur(),O()})},{default:u(()=>[...M[32]||(M[32]=[N("Add New",-1)])]),_:1})]),_:1})],64)):ge("",!0)]),_:1})]),append:u(()=>[i(Fe,{variant:"elevated",icon:m.value?"mdi-close":"mdi-plus",onClick:O,rounded:"xl"},null,8,["icon"])]),_:1},8,["items","search","loading","modelValue","no-data-text"])]),_:1})]),_:1})]),_:1}),i(ye,{"no-gutters":""},{default:u(()=>[i(se,{cols:"12",class:"scroll-element"},{default:u(()=>[i(Qe,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[d.value&&d.value.id?(P(),Ae(ze,{key:0},[i(Qe,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[i(at,{class:"ma-0 pa-0 pl-4 mb-1"},{default:u(()=>[i(ye,{"no-gutters":""},{default:u(()=>[i(se,{cols:"6"},{default:u(()=>[N(K(`Name: ${d.value.name}`),1)]),_:1}),i(se,{cols:"6"},{default:u(()=>[N(K(`Gender: ${d.value.gender}`),1)]),_:1})]),_:1}),i(ye,{"no-gutters":""},{default:u(()=>[i(se,{cols:"6"},{default:u(()=>[N(K(`Contact: ${d.value.contactNumber}`),1)]),_:1}),i(se,{cols:"6"},{default:u(()=>[N(K(ce(d.value)?`Age: ${ce(d.value)}`:""),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(Qe,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[i(Be,{modelValue:Z.value,"onUpdate:modelValue":M[10]||(M[10]=At=>Z.value=At),"validate-on":"input"},{default:u(()=>[i(ye,{"no-gutters":""},{default:u(()=>[i(se,{cols:"12"},{default:u(()=>[i(mt,{label:"Appointment Date *",modelValue:B.value,"onUpdate:modelValue":M[4]||(M[4]=At=>B.value=At),type:"date",density:"compact",rules:Oe(iE),class:"date-input",onClick:M[5]||(M[5]=At=>At.target.showPicker&&At.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),i(se,{cols:"12"},{default:u(()=>[i(mt,{label:"Appointment Time",modelValue:F.value,"onUpdate:modelValue":M[6]||(M[6]=At=>F.value=At),type:"time",density:"compact"},null,8,["modelValue"])]),_:1}),i(se,{cols:"12"},{default:u(()=>[i(xe,{modelValue:oe.value,"onUpdate:modelValue":M[7]||(M[7]=At=>oe.value=At),items:["consultation","followup","procedure"],label:"Appointment Type"},null,8,["modelValue"])]),_:1}),i(se,{cols:"12"},{default:u(()=>[i(xe,{modelValue:T.value,"onUpdate:modelValue":M[8]||(M[8]=At=>T.value=At),items:["walkin","scheduled"],label:"Appointment Category"},null,8,["modelValue"])]),_:1}),i(se,{cols:"12"},{default:u(()=>[i(Se,{class:"mb-2"}),v("div",Yve,[i(Fe,{variant:"outlined",onClick:M[9]||(M[9]=At=>j(d.value.id,D.value,U.value)),disabled:!Z.value},{default:u(()=>[...M[33]||(M[33]=[N("Add to Queue",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):m.value?(P(),he(Qe,{key:1,flat:"",class:"text-left",variant:"text"},{default:u(()=>[i(Be,{modelValue:ne.value,"onUpdate:modelValue":M[26]||(M[26]=At=>ne.value=At),"validate-on":"input"},{default:u(()=>[i(ye,{"no-gutters":"",class:"mt-0 mb-4"},{default:u(()=>[i(se,{cols:"6",class:"pr-2"},{default:u(()=>[i(mt,{label:"Name *",modelValue:y.value.name,"onUpdate:modelValue":M[11]||(M[11]=At=>y.value.name=At),clearable:"",rules:Oe(Cr),density:"compact","hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),i(se,{cols:"6",class:"pl-2"},{default:u(()=>[i(mt,{label:"Phone Number *",modelValue:y.value.contact_number,"onUpdate:modelValue":M[12]||(M[12]=At=>y.value.contact_number=At),type:"tel",rules:Oe(_h),clearable:"",density:"compact",maxlength:"10",onInput:G,"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),i(ye,{"no-gutters":"",class:"my-4"},{default:u(()=>[i(se,{cols:"6",class:"pr-2"},{default:u(()=>[v("div",Xve,[i(Ye,{modelValue:p.value,"onUpdate:modelValue":M[13]||(M[13]=At=>p.value=At),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[i(Fe,{value:"dob",size:"small"},{default:u(()=>[...M[34]||(M[34]=[N("DOB",-1)])]),_:1}),i(Fe,{value:"age",size:"small"},{default:u(()=>[...M[35]||(M[35]=[N("Age",-1)])]),_:1})]),_:1},8,["modelValue"]),p.value==="age"?(P(),he(mt,{key:0,label:"Age (yrs) *",modelValue:y.value.age,"onUpdate:modelValue":M[14]||(M[14]=At=>y.value.age=At),clearable:"",density:"compact",rules:Oe(uT),disabled:!!y.value.birthDate||!!h.value,class:"flex-grow-1","hide-details":"auto"},null,8,["modelValue","rules","disabled"])):(P(),he(xt,{key:1,modelValue:g.value,"onUpdate:modelValue":M[18]||(M[18]=At=>g.value=At),"close-on-content-click":!1,transition:"scale-transition","offset-y":"",class:"flex-grow-1"},{activator:u(({props:At})=>[i(mt,Ie(At,{label:"Date of Birth *",modelValue:y.value.birthDate,"onUpdate:modelValue":M[15]||(M[15]=Ot=>y.value.birthDate=Ot),readonly:"",clearable:"",density:"compact",rules:Oe(cT),class:"flex-grow-1 date-input dob-input","hide-details":"auto","onClick:clear":S,onKeydown:[M[16]||(M[16]=Yd(Ot=>g.value=!0,["enter"])),M[17]||(M[17]=Yd(gn(Ot=>g.value=!0,["prevent"]),["space"]))]}),{"append-inner":u(()=>[i(be,{class:"text-medium-emphasis"},{default:u(()=>[...M[36]||(M[36]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","rules"])]),default:u(()=>[i(kt,{"model-value":y.value.birthDate||Oe(_),"onUpdate:modelValue":b,color:"primary",locale:"en-IN",max:Oe(Tn)(),"view-mode":"year"},null,8,["model-value","max"])]),_:1},8,["modelValue"]))])]),_:1}),i(se,{cols:"6",class:"pl-2"},{default:u(()=>[i(xe,{modelValue:y.value.gender,"onUpdate:modelValue":M[19]||(M[19]=At=>y.value.gender=At),items:["Male","Female"],label:"Gender *",clearable:"",density:"compact",rules:Oe(dT),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),i(ye,{"no-gutters":"",class:"my-4"},{default:u(()=>[i(se,{cols:"12"},{default:u(()=>[i(mt,{label:"Email (optional)",modelValue:y.value.email,"onUpdate:modelValue":M[20]||(M[20]=At=>y.value.email=At),type:"email",clearable:"",density:"compact",rules:Oe(Rg),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),i(ye,{"no-gutters":"",class:"my-4"},{default:u(()=>[i(se,{cols:"6",class:"pr-2"},{default:u(()=>[i(mt,{label:"Appointment Date *",modelValue:E.value,"onUpdate:modelValue":M[21]||(M[21]=At=>E.value=At),type:"date",density:"compact",rules:Oe(iE),class:"date-input",onClick:M[22]||(M[22]=At=>At.target.showPicker&&At.target.showPicker()),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),i(se,{cols:"6",class:"pl-2"},{default:u(()=>[i(mt,{label:"Appointment Time",modelValue:x.value,"onUpdate:modelValue":M[23]||(M[23]=At=>x.value=At),type:"time",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),i(ye,{"no-gutters":"",class:"my-4"},{default:u(()=>[i(se,{cols:"6",class:"pr-2"},{default:u(()=>[i(xe,{modelValue:de.value,"onUpdate:modelValue":M[24]||(M[24]=At=>de.value=At),items:["consultation","followup","procedure"],label:"Appointment Type",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),i(se,{cols:"6",class:"pl-2"},{default:u(()=>[i(xe,{modelValue:C.value,"onUpdate:modelValue":M[25]||(M[25]=At=>C.value=At),items:["walkin","scheduled"],label:"Appointment Category",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),i(ye,{"no-gutters":""},{default:u(()=>[i(se,{cols:"12"},{default:u(()=>[i(Se,{class:"mb-2"}),v("div",Jve,[i(Fe,{variant:"outlined",disabled:!ne.value,onClick:ae},{default:u(()=>[...M[37]||(M[37]=[N("Create and Add to Queue ",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(P(),he(Nt,{key:2,image:Oe(jM)},{title:u(()=>[...M[38]||(M[38]=[v("div",{class:"text-subtitle-2 mt-8"}," Search for old patients or add a new patient above ",-1)])]),text:u(()=>[...M[39]||(M[39]=[v("div",{class:"text-caption"},null,-1)])]),_:1},8,["image"]))]),_:1})]),_:1})]),_:1})]),_:1})}}},rU=en(Zve,[["__scopeId","data-v-9b0b7826"]]),ehe=async(e,t,n=null)=>{try{console.log("fetchAppointments called with params:",{doctor_id:e,clinic_id:t,date:n});const a={doctor_id:e,clinic_id:t};return n?(a.date=n,console.log("Adding date to params:",n)):console.log("No date provided, will use server default (today)"),console.log("Final API params:",a),{data:(await it.get("/appointment/",{params:a})).data.data.appointments,error:null}}catch(a){return console.error("There was an error fetching the patients:",a?.response||a),{data:[],error:a}}},the=async(e="",t="")=>{try{const n={};e&&e.trim()!==""&&(n.doctor=e.trim()),t&&t.trim()!==""&&(n.fromdate=t.trim());const a=await it.get("/appointment/completed",{params:n});return{data:a.data.data.appointments||[],total:a.data.data.total||0,filters:a.data.data.filters||{},error:null}}catch(n){return console.error("There was an error fetching completed appointments:",n?.response||n),{data:[],total:0,filters:{},error:n}}},qM=async e=>{try{return await it.put(`/appointment/${e.id}`,e),{error:null}}catch(t){return console.error("Error updating consultation:",t),{error:t}}},nhe=async e=>{try{return await it.delete(`/appointment/${e}`),{error:null}}catch(t){return console.error("Error deleting appointment:",t),{error:t}}},ahe={class:"d-flex justify-center"},sU={__name:"edit-appointment",props:{appointment:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const r=R((d=>{console.log("Edit appointment - original appointment:",d);const A={...d};if(A.appointmentDate){console.log("Original appointmentDate:",A.appointmentDate);let m=A.appointmentDate;if(m.includes("T")?m=m.split("T")[0]:m.length>10&&(m=m.split(" ")[0]),/^\d{4}-\d{2}-\d{2}$/.test(m))A.appointmentDate=m;else try{const h=new Date(m);if(!isNaN(h.getTime())){const y=h.getFullYear(),g=String(h.getMonth()+1).padStart(2,"0"),_=String(h.getDate()).padStart(2,"0");A.appointmentDate=`${y}-${g}-${_}`}}catch(h){console.error("Error parsing appointment date:",m,h)}console.log("Formatted appointmentDate:",A.appointmentDate)}return A.category||(A.category="scheduled"),A.status||(A.status="waiting"),A})(e.appointment)),s=t,o=R(!1),l=()=>{s("close")},c=async()=>{await f(r.value),console.log("close modal",r.value),s("close")},f=async d=>{(await qM(d)).error?console.error("Error updating consultation:"):console.log("Appointment updated successfully")};return(d,A)=>{const m=I("v-card-title"),p=I("v-col"),h=I("v-icon"),y=I("v-btn"),g=I("v-row"),_=I("v-card"),b=I("v-text-field"),S=I("v-select"),B=I("v-divider"),F=I("v-form");return P(),he(_,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[i(g,{"no-gutters":""},{default:u(()=>[i(p,{cols:"12"},{default:u(()=>[i(_,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(g,{"no-gutters":""},{default:u(()=>[i(p,{cols:"11"},{default:u(()=>[i(m,{class:"pa-0 pl-2"},{default:u(()=>[...A[7]||(A[7]=[N("Edit appointment details",-1)])]),_:1})]),_:1}),i(p,{cols:"1"},{default:u(()=>[i(y,{icon:"",size:"x-small",onClick:l},{default:u(()=>[i(h,null,{default:u(()=>[...A[8]||(A[8]=[v("img",{src:su,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(g,{"no-gutters":""},{default:u(()=>[i(p,{cols:"12"},{default:u(()=>[i(_,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(F,{modelValue:o.value,"onUpdate:modelValue":A[6]||(A[6]=T=>o.value=T),"validate-on":"blur"},{default:u(()=>[i(g,{"no-gutters":""},{default:u(()=>[i(p,{cols:"12"},{default:u(()=>[i(b,{label:"Appointment Date *",modelValue:r.value.appointmentDate,"onUpdate:modelValue":A[0]||(A[0]=T=>r.value.appointmentDate=T),type:"date",rules:Oe(iE)},null,8,["modelValue","rules"])]),_:1}),i(p,{cols:"12"},{default:u(()=>[i(b,{label:"Appointment Time",modelValue:r.value.appointmentTime,"onUpdate:modelValue":A[1]||(A[1]=T=>r.value.appointmentTime=T),type:"time"},null,8,["modelValue"])]),_:1}),i(p,{cols:"12"},{default:u(()=>[i(S,{modelValue:r.value.type,"onUpdate:modelValue":A[2]||(A[2]=T=>r.value.type=T),items:["consultation","followup","procedure"],label:"Appointment Type"},null,8,["modelValue"])]),_:1}),i(p,{cols:"12"},{default:u(()=>[i(S,{modelValue:r.value.category,"onUpdate:modelValue":A[3]||(A[3]=T=>r.value.category=T),items:["walkin","scheduled"],label:"Appointment Category"},null,8,["modelValue"])]),_:1}),i(p,{cols:"12"},{default:u(()=>[i(S,{modelValue:r.value.status,"onUpdate:modelValue":A[4]||(A[4]=T=>r.value.status=T),items:[{title:"waiting",value:"waiting"},{title:"confirmed",value:"confirmed"},{title:"completed",value:"completed"},{title:"cancelled",value:"cancelled"}],label:"Appointment Status","item-title":"title","item-value":"value"},null,8,["modelValue"])]),_:1}),i(p,{cols:"12"},{default:u(()=>[i(B,{class:"mb-2"}),v("div",ahe,[i(y,{variant:"outlined",onClick:A[5]||(A[5]=T=>c()),disabled:!o.value},{default:u(()=>[...A[9]||(A[9]=[N("Update Appointment",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},rhe=async e=>{try{return!e||e.trim().length===0?{data:{services:[]},error:null}:{data:(await it.get(`/services/search_services/${encodeURIComponent(e)}`)).data.data,error:null}}catch(t){return console.error("Error searching services:",t),{data:null,error:t}}},she=async()=>{try{return{data:(await it.get("/services/all")).data.data,error:null}}catch(e){return console.error("Error fetching all services:",e),{data:null,error:e}}},ohe=async e=>{try{if(!e)throw new Error("Doctor ID is required");return{data:(await it.get(`/paymentreceipt/next-identifier/${e}`)).data.data,error:null}}catch(t){return console.error("Error getting next receipt identifier:",t),t.response?.status===400&&t.response?.data?.error?.includes("No receipt series found")?{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}:{data:null,error:t}}},YM=async e=>{try{if(!e.doctorId)throw new Error("Doctor ID is required");if(!e.appointmentId&&!e.billId)throw new Error("Either Appointment ID or Bill ID is required");if(!e.billId&&(!e.services||!Array.isArray(e.services)||e.services.length===0))throw new Error("At least one service is required when Bill ID is not provided");return{data:(await it.post("/paymentreceipt/with-services",e)).data.data,error:null}}catch(t){if(console.error("Error creating receipt with services:",t),t.response?.status===500){const n=t.response?.data?.error||t.message||"";if(n.includes("No receipt series found")||n.includes("receipt series")||t.response?.data&&JSON.stringify(t.response.data).includes("receipt series"))return{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}}return t.response?.status===400&&t.response?.data?.error?.includes("No receipt series found")?{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}:{data:null,error:t}}},XM=async e=>{try{if(!e)throw new Error("Receipt ID is required");return{data:(await it.get(`/paymentreceipt/${e}/with-services`)).data.data,error:null}}catch(t){return console.error("Error getting receipt with services:",t),{data:null,error:t}}},ihe=async(e,t)=>{try{if(!e)throw new Error("Receipt ID is required");if(!t.services||!Array.isArray(t.services)||t.services.length===0)throw new Error("At least one service is required");return{data:(await it.put(`/paymentreceipt/${e}/with-services`,t)).data.data,error:null}}catch(n){return console.error("Error updating receipt with services:",n),{data:null,error:n}}},lhe=async(e,t)=>{try{if(!e)throw new Error("Receipt ID is required");console.log(`Updating payment receipt ${e} with data:`,t);const n=await it.put(`/paymentreceipt/${e}`,t);return console.log("Payment receipt updated successfully via basic endpoint"),{data:n.data.data,error:null}}catch(n){return console.error("Error updating payment receipt:",n),n.response&&console.error("API Error Response:",n.response.status,n.response.data),{data:null,error:n}}},uhe={class:"service-name-truncate"},che={class:"text-caption"},dhe={class:"ml-3"},fhe={key:0,class:"ml-3"},Ahe={__name:"search-service",props:{modelValue:{type:String,default:""},showGstInResults:{type:Boolean,default:!0}},emits:["update:modelValue","serviceSelected"],setup(e,{emit:t}){const n=e,a=t,r=R(!1),s=R([]),o=R([]),l=R(!1),c=R(""),f=R(""),d=R(!1);let A=null;const m=b=>{c.value=b,l.value&&o.value.length>0?y(b):l.value||p()},p=async()=>{l.value?(!c.value||c.value.length===0)&&(s.value=o.value,d.value=!1):await h()};Ge(f,b=>{typeof b=="string"?(a("update:modelValue",b),a("serviceSelected",{serviceDescription:b,isUserTyped:!0,isFromHistory:!1})):b&&typeof b=="object"?(a("update:modelValue",b.serviceDescription),a("serviceSelected",b)):b||(a("update:modelValue",""),a("serviceSelected",null))}),Ge(c,b=>{if(A&&clearTimeout(A),d.value=!1,l.value&&o.value.length>0){if(!b||b.length<1){s.value=o.value,r.value=!1;return}y(b);return}if(!b||b.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{g(b)},300)}),Ge(()=>n.modelValue,b=>{b!==f.value&&(f.value=b)},{immediate:!0});const h=async()=>{if(!l.value){r.value=!0,d.value=!1;try{const b=await she();if(b.error){console.error("Error fetching all services:",b.error),d.value=!0;return}o.value=(b.data.services||[]).filter(S=>S.serviceDescription&&S.serviceDescription.trim().length>0),l.value=!0,s.value=o.value,c.value&&c.value.length>0&&y(c.value)}catch(b){console.error("Error fetching all services:",b),d.value=!0}finally{r.value=!1}}},y=b=>{if(!b||b.trim().length===0){s.value=o.value,d.value=!1;return}const S=b.toLowerCase().trim(),B=o.value.filter(F=>(F.serviceDescription||"").toLowerCase().includes(S));s.value=B,d.value=B.length===0},g=async b=>{if(!(!b||b.length<1)){r.value=!0,d.value=!1;try{const S=await rhe(b);if(S.error){console.error("Error fetching services:",S.error),d.value=!0;return}s.value=S.data.services.filter(B=>B.serviceDescription&&B.serviceDescription.trim().length>0),(!s.value||s.value.length===0)&&(d.value=!0)}catch(S){console.error("Error fetching services:",S),d.value=!0}finally{r.value=!1}}},_=ee(()=>r.value?l.value?"Filtering services...":"Loading services...":d.value?"No matching services found. You can create a new service by typing the description.":!c.value||c.value.length<1?l.value&&o.value.length>0?`Showing all ${o.value.length} services. Type to filter...`:"Click to view all services or type to search...":"");return(b,S)=>{const B=I("v-list-item"),F=I("v-card-subtitle"),T=I("v-card"),E=I("v-combobox");return P(),he(E,{modelValue:f.value,"onUpdate:modelValue":S[0]||(S[0]=x=>f.value=x),items:s.value,search:c.value,"onUpdate:search":m,"onClick:clear":p,onFocus:p,onClick:p,"item-title":"serviceDescription","item-value":"serviceDescription",placeholder:"Type service description...",variant:"underlined",loading:r.value,"no-data-text":_.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"service-combobox"},{item:u(({props:x,item:C,index:D})=>[(P(),he(B,Ie({...x,title:void 0,value:C.raw.id||`service-${D}`},{key:C.raw.id||`service-temp-${D}`,density:"compact"}),{title:u(()=>[v("span",uhe,K(C.raw.serviceDescription),1)]),subtitle:u(()=>[v("div",che,[v("span",null,"Base Cost: "+K(C.raw.baseCost),1),e.showGstInResults?(P(),Ae(ze,{key:0},[v("span",dhe,"GST: "+K(C.raw.gstPercent||0)+"%",1),C.raw.hsnSacCode?(P(),Ae("span",fhe,"HSN/SAC: "+K(C.raw.hsnSacCode),1)):ge("",!0)],64)):ge("",!0)])]),_:2},1040))]),"no-data":u(()=>[i(T,{flat:"",class:"pa-4 text-center"},{default:u(()=>[i(F,null,{default:u(()=>[N(K(_.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},Fw=en(Ahe,[["__scopeId","data-v-6104d2dc"]]),wh=async e=>{try{return console.log("Creating payment with data:",e),{success:!0,data:(await it.post("/payment",e)).data.data,message:"Payment created successfully"}}catch(t){return console.error("Error creating payment:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to create payment",status:t.response?.status||500}}}},Ng=async e=>{try{console.log("Fetching payments for receipt ID:",e);const t=await it.get(`/payment?paymentReceiptId=${e}`);return console.log("Raw API response:",t.data),{success:!0,data:t.data.data.payments,message:"Payments fetched successfully"}}catch(t){return console.error("Error fetching payments by receipt:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to fetch payments",status:t.response?.status||500}}}},fT=async e=>{try{return console.log("Deleting payment with ID:",e),{success:!0,data:(await it.delete(`/payment/${e}`)).data.data,message:"Payment deleted successfully"}}catch(t){return console.error("Error deleting payment:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to delete payment",status:t.response?.status||500}}}},JM=async(e="",t=null,n=null)=>{try{console.log("Fetching payment receipts with filters:",{paymentReceiptDate:e,doctorId:t,treatmentPlanId:n});const a=new URLSearchParams;e&&a.append("paymentReceiptDate",e),t&&a.append("doctor_id",t.toString()),n&&a.append("treatmentPlanId",n.toString());const r=a.toString()?`/paymentreceipt?${a.toString()}`:"/paymentreceipt";return{success:!0,data:(await it.get(r)).data.data,message:"Payment receipts fetched successfully"}}catch(a){return console.error("Error fetching payment receipts:",a),{success:!1,error:{message:a.response?.data?.error||a.message||"Failed to fetch payment receipts",status:a.response?.status||500}}}},ZM=async(e,t,n,a=null)=>{try{const r=e.state.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching payment receipts for date range:",{startDate:t,endDate:n,doctorId:r,treatmentPlanId:a}),await eO(t,n,r,a)}catch(r){return console.error("Error fetching payment receipts for date range:",r),{success:!1,error:{message:r.message||"Failed to fetch payment receipts for date range",status:500}}}},eO=async(e,t,n=null,a=null)=>{try{console.log("Fetching payment receipts for date range with filters:",{startDate:e,endDate:t,doctorId:n,treatmentPlanId:a});const r=new URLSearchParams;e&&r.append("startDate",e),t&&r.append("endDate",t),n&&r.append("doctor_id",n.toString()),a&&r.append("treatmentPlanId",a.toString());const s=`/paymentreceipt?${r.toString()}`;return{success:!0,data:(await it.get(s)).data.data,message:"Payment receipts fetched successfully for date range"}}catch(r){return console.error("Error fetching payment receipts for date range:",r),{success:!1,error:{message:r.response?.data?.error||r.message||"Failed to fetch payment receipts for date range",status:r.response?.status||500}}}},Pw=async(e,t="",n=null)=>{try{const a=e.state.doctorModule?.doctorId;if(!a)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching payment receipts for current doctor:",a,"treatmentPlanId:",n),await JM(t,a,n)}catch(a){return console.error("Error fetching payment receipts for current doctor:",a),{success:!1,error:{message:a.message||"Failed to fetch payment receipts for current doctor",status:500}}}},bh=["Cash","Card","UPI","Bank Transfer","Cheque","Online","Other"],hr=e=>!e&&e!==0?"0":`${Number(e).toLocaleString("en-IN")}`,mhe=Object.freeze(Object.defineProperty({__proto__:null,PAYMENT_MODES:bh,createPayment:wh,deletePayment:fT,fetchAllPaymentReceipts:JM,fetchAllPaymentReceiptsForDateRange:eO,fetchPaymentReceiptsForCurrentDoctor:Pw,fetchPaymentReceiptsForDateRange:ZM,formatPaymentAmount:hr,getPaymentsByReceipt:Ng},Symbol.toStringTag,{value:"Module"})),lE=async(e,t,n,a="",r="",s="",o=0)=>{try{return{data:(await it.post("/treatmentplan/",{patient_id:e,doctor_id:t,treatmentplan_name:n,start_date:a,end_date:r,notes:s,amount_paid:o})).data.data,error:null}}catch(l){return console.error("There was an error creating the treatment plan:",l),{data:null,error:l}}},AT=async(e,t)=>{try{if(!e)throw new Error("patient_id is required");if(!t)throw new Error("doctor_id is required");console.log(" Making API call to:",`/treatmentplan/patient/${e}/doctor/${t}`);const n=await it.get(`/treatmentplan/patient/${e}/doctor/${t}`);return console.log(" API Response status:",n.status),console.log(" API Response treatment plans count:",n.data?.data?.length||0),{data:Kn.cloneDeep(n.data.data),error:null}}catch(n){if(console.error(" Error fetching treatment plans:",n),console.error(" Error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,data:n.response?.data,url:n.config?.url,sqlError:n.response?.data?.error,sqlMessage:n.response?.data?.message}),n.response?.status===500){const a=n.response?.data?.message||n.response?.data?.error||n.message;if(a.includes("treatmentplan")&&(a.includes("table")||a.includes("relation")||a.includes("does not exist")))return console.error(" Database table 'treatmentplan' might not exist or have incorrect schema"),{data:[],error:{...n,message:"Treatment plans table not found or has incorrect schema. Please check database setup.",type:"DATABASE_TABLE_ERROR"}}}return{data:[],error:n}}},CA=async e=>{try{const t=await it.get(`/treatmentplan/${e}`);return{data:Kn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error fetching treatment plan details:",t),{data:null,error:t}}},tO=async e=>{try{return await it.delete(`/treatmentplan/${e}`),{error:null}}catch(t){return console.error("Error deleting treatment plan:",t),{error:{message:t.response?.data?.error||t.message||"Failed to delete treatment plan",status:t.response?.status,originalError:t}}}},nO=async(e="",t)=>{try{if(!t)throw new Error("Doctor ID is required");const n=new URLSearchParams;e&&n.append("search",e),n.append("doctor_id",t);const a=`/procedure/?${n.toString()}`,r=await it.get(a);return{data:Kn.cloneDeep(r.data.data),error:null}}catch(n){return console.error("Error fetching procedures:",n),{data:[],error:n}}},mT=async(e,t=0,n="",a=!0,r="",s="",o)=>{try{if(!o)throw new Error("Doctor ID is required");const l=new URLSearchParams;return l.append("doctor_id",o),{data:(await it.post(`/procedure/?${l.toString()}`,{procedure_name:e,cost:t,description:n,isLocal:a,procedureId:r,identifier:s})).data.data,error:null}}catch(l){return console.error("There was an error creating the procedure:",l),{data:null,error:l}}},aO=async(e,t,n)=>{try{if(!n)throw new Error("Doctor ID is required");const a=new URLSearchParams;a.append("doctor_id",n);const r=await it.put(`/procedure/${e}?${a.toString()}`,t);return{data:Kn.cloneDeep(r.data.data),error:null}}catch(a){return console.error("Error updating procedure:",a),{data:null,error:a}}},Fp=async(e,t,n=0,a="",r="",s="")=>{try{return{data:(await it.post(`/treatmentplan/${e}/procedure`,{procedure_id:t,cost_estimate:n,notes:a,location:r,option:s})).data.data,error:null}}catch(o){return console.error("There was an error creating the treatment plan-procedure mapping:",o),{data:null,error:o}}},uE=async(e,t,n)=>{try{return{data:(await it.put(`/treatmentplan/${e}/procedure-treatment/${t}`,n)).data.data,error:null}}catch(a){return console.error("There was an error updating the treatment plan-procedure mapping:",a),{data:null,error:a}}},rO=async(e,t)=>{try{return await it.delete(`/treatmentplan/${e}/procedure-treatment/${t}`),{error:null}}catch(n){return console.error("There was an error deleting the treatment plan-procedure mapping:",n),{error:n}}},vhe=async e=>{try{if(!e.doctor_id)throw new Error("doctor_id is required");const t=new URLSearchParams;e.procedureName?.trim()&&t.append("procedure_name",e.procedureName.trim()),e.dateFrom&&t.append("date_from",e.dateFrom),e.dateTo&&t.append("date_to",e.dateTo),e.gender?.trim()&&t.append("gender",e.gender.trim()),e.ageGreaterThan&&t.append("age_greater_than",e.ageGreaterThan),e.ageLessThan&&t.append("age_less_than",e.ageLessThan),t.append("doctor_id",e.doctor_id);const n=t.toString(),a=`/procedure/research${n?`?${n}`:""}`;console.log(" Making procedure research API call to:",a);const r=await it.get(a);return console.log(" API Response status:",r.status),console.log(" API Response procedure research results count:",r.data?.data?.length||0),{data:Kn.cloneDeep(r.data.data),error:null}}catch(t){if(console.error(" Error searching procedure research data:",t),console.error(" Error details:",{message:t.message,status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,url:t.config?.url,sqlError:t.response?.data?.error,sqlMessage:t.response?.data?.message}),t.response?.status===500){const n=t.response?.data?.message||t.response?.data?.error||t.message;if(n.includes("procedure")&&(n.includes("table")||n.includes("relation")||n.includes("does not exist")))return console.error(" Database table for procedure research might not exist or have incorrect schema"),{data:[],error:{...t,message:"Procedure research tables not found or have incorrect schema. Please check database setup.",type:"DATABASE_TABLE_ERROR"}}}return{data:[],error:t}}},Vg=async(e,t)=>{try{const n=await AT(e,t);if(n.error)return n;const a=n.data.filter(r=>r.status!=="Cancelled"&&!r.isTemplate);return console.log(" Filtered treatment plans for receipt linking:",{total:n.data.length,filtered:a.length,excluded:n.data.length-a.length}),{data:a,error:null}}catch(n){return console.error(" Error fetching treatment plans for receipt:",n),{data:[],error:n}}},sO=async(e,t,n)=>{try{if(!n)throw new Error("Doctor ID is required");const a=new URLSearchParams;a.append("doctor_id",n);const r=await it.put(`/procedure/${e}?${a.toString()}`,{description:t});return{data:Kn.cloneDeep(r.data.data),error:null}}catch(a){return console.error("Error updating procedure description:",a),{data:null,error:a}}},oO=async(e="",t)=>{try{if(!t)throw new Error("Doctor ID is required");const n=new URLSearchParams;n.append("doctor_id",t);const a=e&&e.trim()?e.trim():"all",r=`/treatmentplan/template/search/${encodeURIComponent(a)}?${n.toString()}`,s=await it.get(r);return{data:Kn.cloneDeep(s.data.data.templates||[]),error:null}}catch(n){return console.error("Error searching treatment plan templates:",n),{data:[],error:n}}},iO=async e=>{try{const t=await it.post("/treatmentplan/template",e);return{data:Kn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error creating treatment plan template:",t),{data:null,error:t}}},lO=async(e,t)=>{try{const n=await it.put(`/treatmentplan/template/${e}`,t);return{data:Kn.cloneDeep(n.data.data),error:null}}catch(n){return console.error("Error updating treatment plan template:",n),{data:null,error:n}}},uO=async e=>{try{const t=await it.get(`/treatmentplan/template/${e}`);return{data:Kn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error fetching treatment plan template:",t),{data:null,error:t}}},cO=async e=>{try{if(!e)throw new Error("Doctor ID is required");const t=new URLSearchParams;t.append("doctor_id",e);const n=`/treatmentplan/template/search/all?${t.toString()}`,a=await it.get(n);return{data:Kn.cloneDeep(a.data.data||[]),error:null}}catch(t){return console.error("Error fetching all treatment plan templates:",t),{data:[],error:t}}},hhe=Object.freeze(Object.defineProperty({__proto__:null,createProcedure:mT,createProcedureTreatment:Fp,createTreatmentPlan:lE,createTreatmentPlanTemplate:iO,deleteProcedureTreatment:rO,deleteTreatmentPlan:tO,fetchProcedureDetails:CA,fetchProcedures:nO,fetchTreatmentPlans:AT,fetchTreatmentPlansForReceipt:Vg,getAllTreatmentPlanTemplates:cO,getTreatmentPlanTemplate:uO,searchProcedureResearch:vhe,searchTreatmentPlanTemplates:oO,updateProcedure:aO,updateProcedureDescription:sO,updateProcedureTreatment:uE,updateTreatmentPlanTemplate:lO},Symbol.toStringTag,{value:"Module"}));function vT(e,t){const n=f=>{const d=parseFloat(f.baseCost)||0,A=parseInt(f.quantity)||1,m=parseFloat(f.discountAmount)||0;return Math.max(0,d-m)*A},a=ee(()=>e.value.map(f=>({...f,total:n(f)}))),r=ee(()=>e.value.reduce((f,d)=>{const A=parseFloat(d.baseCost)||0,m=parseInt(d.quantity)||1;return f+A*m},0)),s=ee(()=>e.value.reduce((f,d)=>{const A=parseFloat(d.discountAmount)||0,m=parseInt(d.quantity)||1;return f+A*m},0)),o=ee(()=>{const f=s.value,d=parseFloat(t.value)||0;return f+d}),l=ee(()=>{const f=r.value,d=o.value;return Math.max(0,f-d)}),c=ee(()=>e.value.some(f=>f.serviceDescription&&f.serviceDescription.trim().length>0&&parseFloat(f.baseCost)>0));return{servicesWithTotals:a,subtotal:r,totalLineDiscount:s,totalAllDiscounts:o,finalGrandTotal:l,hasValidService:c,calculateServiceTotal:n}}const phe={class:"pa-1"},ghe={class:"text-body-1 font-weight-medium"},yhe={class:"text-body-2 text-medium-emphasis"},_he={class:"pa-1"},whe={class:"text-body-1 font-weight-medium"},bhe={class:"text-body-2 text-medium-emphasis"},xhe={class:"pa-1"},Che={class:"text-body-2 text-medium-emphasis"},She={class:"d-flex flex-column py-1"},Ehe={class:"text-body-2 font-weight-medium"},khe={class:"text-caption text-medium-emphasis"},Bhe={key:0},The={class:"text-caption"},Ihe={key:0,class:"ml-2"},Fhe={class:"font-weight-bold"},Phe={key:0,class:"text-body-2 mb-1"},Dhe={class:"text-body-2 mb-1"},Uhe={class:"text-body-2 mb-1"},Rhe={key:0,class:"text-body-2 mb-1"},Nhe={class:"text-subtitle-1 font-weight-bold"},Vhe={__name:"payment-receipt-create",props:{appointment:{type:Object,required:!0}},emits:["close","receiptCreated","view-receipt"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=Ln(),l=ee(()=>o.state.doctorModule.doctorId),c=ee(()=>o.getters["doctorModule/currentDoctor"]),f=ee(()=>c.value?.doctorName||"Unknown Doctor"),d=ee(()=>c.value?.isGST||!1),A=R({patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",receiptDate:Tn(),appointmentId:n.appointment?.id||null,doctorId:l.value,additionalDiscount:0}),m=R([{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}]),p=R(!1),h=R(null),y=R([]),g=R(!1);ee(()=>h.value?y.value.find(ie=>ie.id===h.value):null);const _=R(!1),b=vT(m,ee(()=>A.value.additionalDiscount)),{servicesWithTotals:S,subtotal:B,totalLineDiscount:F,finalGrandTotal:T,hasValidService:E}=b;R(null);const x=bh,C=R([{amount:null,mode:"Cash",paymentDate:Tn(),datePickerMenu:!1}]),D=[ie=>!!ie||"Amount is required",ie=>ie>0||"Amount must be greater than 0",ie=>Number.isInteger(Number(ie))||"Amount must be a whole number"],U=[ie=>!!ie||"Payment mode is required"],L=[ie=>!!ie||"Payment date is required"],H=()=>{m.value.push({serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1})},oe=ie=>{m.value.length>1?m.value.splice(ie,1):m.value[0]={serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}},de=(ie,X)=>{m.value[ie]&&(m.value[ie].serviceDescription=X)},te=(ie,X)=>{console.log("Service selected:",X),X&&typeof X=="object"&&!X.isUserTyped?m.value[ie]={...m.value[ie],serviceDescription:X.serviceDescription,baseCost:X.baseCost||0,isFromHistory:!1}:X===null&&(m.value[ie]={...m.value[ie],serviceDescription:"",baseCost:0,isFromHistory:!1})},q=async()=>{if(!A.value.patientId||!A.value.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}g.value=!0;try{console.log("Loading treatment plans for patient:",A.value.patientId,"doctor:",A.value.doctorId);const ie=await Vg(A.value.patientId,A.value.doctorId);if(ie.error)throw new Error(ie.error.message||"Failed to load treatment plans");y.value=ie.data||[],console.log("Loaded treatment plans:",y.value.length)}catch(ie){console.error("Error loading treatment plans:",ie),s("Failed to load treatment plans: "+(ie.message||"Unknown error")),y.value=[]}finally{g.value=!1}},ce=ee(()=>C.value.reduce((ie,X)=>ie+(parseFloat(X.amount)||0),0));ee(()=>T.value-ce.value);const le=ie=>{if(!ie)return"";try{return new Date(ie).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return ie}},Z=ee(()=>{const ie=E.value,X=A.value.doctorId&&A.value.appointmentId;return console.log("Validation check:",{hasValidService:ie,hasValidAppointment:X,services:m.value,receiptData:A.value}),ie&&X}),ne=()=>{C.value.push({amount:null,mode:"Cash",paymentDate:Tn(),datePickerMenu:!1})},G=ie=>{C.value.length>1?C.value.splice(ie,1):C.value[0]={amount:null,mode:"Cash",paymentDate:Tn(),datePickerMenu:!1}},W=ie=>{if(!ie)return null;try{if(typeof ie=="string")return ie.includes("T")?ie.split("T")[0]:ie;if(ie instanceof Date){const X=ie.getFullYear(),fe=String(ie.getMonth()+1).padStart(2,"0"),M=String(ie.getDate()).padStart(2,"0");return`${X}-${fe}-${M}`}return null}catch(X){return console.error("Error parsing payment date:",X),null}},Q=(ie,X)=>{if(ie)if(ie instanceof Date){const fe=ie.getFullYear(),M=String(ie.getMonth()+1).padStart(2,"0"),z=String(ie.getDate()).padStart(2,"0");X.paymentDate=`${fe}-${M}-${z}`}else typeof ie=="string"&&(X.paymentDate=ie);else X.paymentDate="";X.datePickerMenu=!1},O=()=>{},ae=async()=>{if(!Z.value){s("Please add at least one valid service with description and cost");return}_.value=!0;try{const{data:ie,error:X}=await ohe(A.value.doctorId);if(X){if(X.needsSeries){s("No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.");return}throw new Error(X.message||"Failed to get next receipt identifier")}console.log("Next receipt identifier:",ie);const fe=m.value.filter(be=>be.serviceDescription&&be.serviceDescription.trim().length>0).map(be=>({serviceDescription:be.serviceDescription.trim(),baseCost:parseFloat(be.baseCost)||0,gstPercent:0,quantity:parseInt(be.quantity)||1,discountAmount:parseFloat(be.discountAmount)||0})),M={doctorId:A.value.doctorId,appointmentId:A.value.appointmentId,paymentReceiptDate:A.value.receiptDate,additionalDiscount:parseFloat(A.value.additionalDiscount)||0,isThreeC:!0,treatmentPlanId:p.value?h.value:null,services:fe};console.log("Creating receipt with payload:",M);const z=await YM(M);if(z.error){s(z.error.message||"Failed to create receipt");return}console.log("Receipt created successfully:",z.data),r(`Receipt ${z.data.identifier} created successfully!`),C.value.some(be=>be.amount&&parseFloat(be.amount)>0&&be.mode&&be.paymentDate)&&await j(z.data.id),a("receiptCreated",z.data),a("view-receipt",z.data.id)}catch(ie){console.error("Error generating receipt:",ie),s("Failed to generate receipt. Please try again.")}finally{_.value=!1}},j=async ie=>{if(!ie||C.value.length===0){console.log("No payment entries to create or no receipt ID");return}console.log("Creating payment entries for receipt:",ie);try{const X=C.value.filter(fe=>fe.amount&&parseFloat(fe.amount)>0&&fe.mode&&fe.paymentDate);console.log("Valid payments to create:",X);for(const fe of X){const M={amount:Number(fe.amount),mode:fe.mode,paymentDate:fe.paymentDate,paymentReceiptId:ie,appointmentId:A.value.appointmentId};console.log("Creating payment with payload:",M);const z=await wh(M);z.success?console.log("Payment created successfully:",z.data):(console.error("Error creating payment entry:",z.error),s(`Failed to create payment: ${z.error?.message||"Unknown error"}`))}C.value=[{amount:null,mode:"Cash",paymentDate:Tn()}],console.log("Payment entries cleared")}catch(X){console.error("Error creating payment entries:",X)}},J=()=>{_.value=!1,m.value=[{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}],A.value={patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",receiptDate:Tn(),appointmentId:n.appointment?.id||null,doctorId:l.value,additionalDiscount:0},C.value=[{amount:null,mode:"Cash",paymentDate:Tn(),datePickerMenu:!1}],a("close")};return Ge(p,ie=>{ie&&y.value.length===0?q():ie||(h.value=null)}),(ie,X)=>{const fe=I("v-icon"),M=I("v-btn"),z=I("v-card-title"),se=I("v-col"),be=I("v-row"),Fe=I("v-label"),ye=I("v-card-text"),Qe=I("v-card"),_e=I("v-switch"),Se=I("v-list-item"),Ee=I("v-select"),Ue=I("v-text-field"),je=I("v-table"),at=I("v-divider"),mt=I("v-date-picker"),xe=I("v-menu"),Be=I("v-container");return P(),he(Qe,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[i(be,{"no-gutters":""},{default:u(()=>[i(se,{cols:"12"},{default:u(()=>[i(z,{class:"d-flex align-center justify-space-between"},{default:u(()=>[X[4]||(X[4]=v("span",null,"Payment Receipt - Generate Receipt",-1)),i(M,{onClick:J,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(fe,{size:"18"},{default:u(()=>[...X[3]||(X[3]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),X[23]||(X[23]=N()),i(be,{"no-gutters":""},{default:u(()=>[i(se,{cols:"12",class:"scroll-element"},{default:u(()=>[i(Be,{fluid:"",class:"pa-3"},{default:u(()=>[i(Qe,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[i(ye,{class:"pb-1 pt-2"},{default:u(()=>[i(be,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(se,{cols:"4"},{default:u(()=>[v("div",phe,[i(Fe,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...X[5]||(X[5]=[N("Patient Information",-1)])]),_:1}),v("div",ghe,K(A.value.patientName),1),v("div",yhe,"ID: "+K(A.value.patientId),1)])]),_:1}),i(se,{cols:"4"},{default:u(()=>[v("div",_he,[i(Fe,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...X[6]||(X[6]=[N("Appointment Details",-1)])]),_:1}),v("div",whe,"Dr. "+K(f.value),1),v("div",bhe,"Date: "+K(le(A.value.appointmentDate)),1)])]),_:1}),i(se,{cols:"4"},{default:u(()=>[v("div",xhe,[i(Fe,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...X[7]||(X[7]=[N("Receipt Information",-1)])]),_:1}),X[8]||(X[8]=v("div",{class:"text-body-1 font-weight-medium"},"New Receipt",-1)),v("div",Che,"Date: "+K(le(A.value.receiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),i(Qe,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(ye,{class:"pb-2"},{default:u(()=>[i(be,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[i(se,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...X[9]||(X[9]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),i(se,{cols:"3",class:"d-flex align-center"},{default:u(()=>[i(_e,{modelValue:p.value,"onUpdate:modelValue":X[0]||(X[0]=Ye=>p.value=Ye),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),p.value?(P(),he(se,{key:0,cols:"7"},{default:u(()=>[i(Ee,{modelValue:h.value,"onUpdate:modelValue":X[1]||(X[1]=Ye=>h.value=Ye),items:y.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:g.value,disabled:g.value,clearable:"","hide-details":""},{selection:u(({item:Ye})=>[v("div",She,[v("div",Ehe,K(Ye.raw.treatmentPlanName),1),v("div",khe,[N(" Status: "+K(Ye.raw.status)+"  Created: "+K(le(Ye.raw.createdAt))+" ",1),Ye.raw.notes?(P(),Ae("span",Bhe,"  "+K(Ye.raw.notes.substring(0,30))+"...",1)):ge("",!0)])])]),item:u(({props:Ye,item:kt})=>[i(Se,fl(Al(Ye)),{title:u(()=>[N(K(kt.raw.treatmentPlanName),1)]),subtitle:u(()=>[v("div",The,[N(" Status: "+K(kt.raw.status)+"  Created: "+K(le(kt.raw.createdAt))+" ",1),kt.raw.notes?(P(),Ae("span",Ihe," "+K(kt.raw.notes.substring(0,50))+"...",1)):ge("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1}),i(Qe,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(ye,{class:"pb-2"},{default:u(()=>[X[16]||(X[16]=v("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),i(je,{density:"compact",class:"mb-3"},{default:u(()=>[X[11]||(X[11]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"300px"}},"Description"),v("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),v("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),v("th",{class:"text-left",style:{width:"100px"}},"Quantity"),v("th",{class:"text-left",style:{width:"120px"}},"Total ()"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(Oe(S),(Ye,kt)=>(P(),Ae("tr",{key:kt},[v("td",null,K(kt+1),1),v("td",null,[i(Fw,{"model-value":Ye.serviceDescription,"onUpdate:modelValue":xt=>de(kt,xt),onServiceSelected:xt=>te(kt,xt),"doctor-id":l.value,"show-gst-in-results":d.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id","show-gst-in-results"])]),v("td",null,[i(Ue,{modelValue:m.value[kt].baseCost,"onUpdate:modelValue":xt=>m.value[kt].baseCost=xt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(Ue,{modelValue:m.value[kt].discountAmount,"onUpdate:modelValue":xt=>m.value[kt].discountAmount=xt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(Ue,{modelValue:m.value[kt].quantity,"onUpdate:modelValue":xt=>m.value[kt].quantity=xt,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[v("span",Fhe,""+K(Ye.total||0),1)]),v("td",null,[i(M,{icon:"",size:"small",color:"error",variant:"text",onClick:xt=>oe(kt)},{default:u(()=>[i(fe,null,{default:u(()=>[...X[10]||(X[10]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),i(be,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(se,{cols:"auto"},{default:u(()=>[i(M,{variant:"outlined",color:"primary",onClick:H,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...X[12]||(X[12]=[N(" Add Service ",-1)])]),_:1})]),_:1}),i(se),i(se,{cols:"3"},{default:u(()=>[i(Ue,{label:"Additional Discount",modelValue:A.value.additionalDiscount,"onUpdate:modelValue":X[2]||(X[2]=Ye=>A.value.additionalDiscount=Ye),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),i(at,{class:"mb-3"}),i(be,{"no-gutters":""},{default:u(()=>[i(se,{cols:"8",class:"text-right"},{default:u(()=>[X[13]||(X[13]=v("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),X[14]||(X[14]=v("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),A.value.additionalDiscount>0?(P(),Ae("div",Phe,"Additional Discount:")):ge("",!0),X[15]||(X[15]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),i(se,{cols:"4",class:"text-right"},{default:u(()=>[v("div",Dhe,K(Oe(hr)(Oe(B))),1),v("div",Uhe,"-"+K(Oe(hr)(Oe(F))),1),A.value.additionalDiscount>0?(P(),Ae("div",Rhe,"-"+K(Oe(hr)(A.value.additionalDiscount)),1)):ge("",!0),v("div",Nhe,K(Oe(hr)(Oe(T))),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(Qe,{flat:"",class:"mb-3 card-enhanced",color:"surfaceContainerHigh"},{default:u(()=>[i(ye,{class:"pb-2"},{default:u(()=>[X[21]||(X[21]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),i(je,{density:"compact",class:"mb-3"},{default:u(()=>[X[19]||(X[19]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(C.value,(Ye,kt)=>(P(),Ae("tr",{key:kt},[v("td",null,K(kt+1),1),v("td",null,[i(Ue,{modelValue:Ye.amount,"onUpdate:modelValue":xt=>Ye.amount=xt,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:D,onInput:O},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(Ee,{modelValue:Ye.mode,"onUpdate:modelValue":xt=>Ye.mode=xt,items:Oe(x),density:"compact",variant:"underlined","hide-details":"",rules:U},null,8,["modelValue","onUpdate:modelValue","items"])]),v("td",null,[i(xe,{modelValue:Ye.datePickerMenu,"onUpdate:modelValue":xt=>Ye.datePickerMenu=xt,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:xt})=>[i(Ue,Ie({modelValue:Ye.paymentDate,"onUpdate:modelValue":Nt=>Ye.paymentDate=Nt,density:"compact",variant:"underlined","hide-details":"",rules:L,readonly:""},{ref_for:!0},xt),{"append-inner":u(()=>[i(fe,{class:"text-medium-emphasis"},{default:u(()=>[...X[17]||(X[17]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[i(mt,{"model-value":W(Ye.paymentDate),"onUpdate:modelValue":xt=>Q(xt,Ye),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(M,{icon:"",size:"small",color:"error",variant:"text",onClick:xt=>G(kt)},{default:u(()=>[i(fe,null,{default:u(()=>[...X[18]||(X[18]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),i(be,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(se,{cols:"auto"},{default:u(()=>[i(M,{variant:"outlined",color:"secondary",onClick:ne,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...X[20]||(X[20]=[N(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(Qe,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[i(ye,{class:"d-flex justify-center pb-2"},{default:u(()=>[i(M,{color:"primary",onClick:ae,loading:_.value,disabled:!Z.value,"prepend-icon":"mdi-receipt",class:"btn-hover-base"},{default:u(()=>[...X[22]||(X[22]=[N(" Generate Receipt ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}},Lhe=en(Vhe,[["__scopeId","data-v-f7bf3b00"]]);function Mhe(e){const t=R([]),n=R(!1),a=R([]),r=R(!1),s=(A=1e4)=>new Promise((m,p)=>setTimeout(()=>p(new Error("API_TIMEOUT")),A)),o=async()=>{if(!e.value){console.log("No receipt ID available for loading payments"),t.value=[];return}if(n.value){console.log("Already loading payments, skipping duplicate call");return}n.value=!0,console.log("Loading payments for receipt ID:",e.value);try{const A=await Promise.race([Ng(e.value),s(1e4)]);console.log("Full API response:",A),A.success?(t.value=Array.isArray(A.data)?A.data:[],console.log(" Payments loaded successfully:",t.value.length)):(console.error(" API Error loading payments:",A.error),t.value=[])}catch(A){A.message==="API_TIMEOUT"?console.error(" Payment loading timed out"):console.error(" Exception loading receipt payments:",A),t.value=[]}finally{n.value=!1}},l=async A=>{if(!e.value)throw new Error("No receipt ID available for payment creation");r.value=!0;try{const m={...A,amount:Number(A.amount),paymentReceiptId:e.value};console.log("Creating payment with payload:",m);const p=await Promise.race([wh(m),s(15e3)]);if(!p.success)throw new Error(p.error?.message||"Failed to create payment");return console.log("Payment created successfully:",p.data),await o(),p}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment creation timed out. Please try again."):m}finally{r.value=!1}},c=async A=>{if(A){if(a.value.includes(A)){console.log("Payment already being deleted:",A);return}a.value.push(A);try{const m=await Promise.race([fT(A),s(1e4)]);if(!m.success)throw new Error(m.error?.message||"Failed to delete payment");return console.log("Payment deleted successfully:",A),await o(),m}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment deletion timed out. Please try again."):m}finally{a.value=a.value.filter(m=>m!==A)}}},f=ee(()=>Array.isArray(t.value)?t.value.reduce((A,m)=>A+(parseFloat(m.amount)||0),0):0);let d=null;return Ge(e,async(A,m)=>{if(console.log("Receipt ID watcher triggered:",{newReceiptId:A||"null",oldReceiptId:m||"null",lastReceiptId:d||"null"}),A===d){console.log("Receipt ID unchanged, skipping reload");return}d=A,A?(console.log("Receipt ID changed, loading payments for:",A),await o()):(console.log("No receipt ID, clearing payments"),t.value=[])},{immediate:!0}),{receiptPayments:t,isLoadingPayments:n,deletingPayments:a,isSubmittingPayment:r,totalPaymentsMade:f,loadReceiptPayments:o,createNewPayment:l,deletePayment:c,formatPaymentAmount:hr}}const Ohe={class:"text-center"},Hhe={class:"text-center"},$he={class:"text-body-2 text-medium-emphasis mb-4"},Qhe={class:"pa-1"},Ghe={class:"text-body-1 font-weight-medium"},zhe={class:"text-body-2 text-medium-emphasis"},Whe={class:"pa-1"},Khe={class:"text-body-1 font-weight-medium"},jhe={class:"text-body-2 text-medium-emphasis"},qhe={class:"pa-1"},Yhe={class:"text-body-1 font-weight-medium"},Xhe={class:"text-body-2 text-medium-emphasis"},Jhe={class:"text-caption text-medium-emphasis mt-1"},Zhe={class:"d-flex flex-column py-1"},epe={class:"text-body-2 font-weight-medium"},tpe={class:"text-caption text-medium-emphasis"},npe={key:0},ape={class:"text-caption"},rpe={key:0,class:"ml-2"},spe={key:2,class:"text-body-2 text-medium-emphasis"},ope={key:0,class:"text-body-2 font-weight-medium"},ipe={key:0,class:"text-body-2 font-weight-medium"},lpe={key:0,class:"text-body-2 font-weight-medium"},upe={key:0,class:"text-body-2 font-weight-medium"},cpe={class:"font-weight-bold"},dpe={key:0,class:"text-body-2 mb-1"},fpe={class:"text-body-2 mb-1"},Ape={class:"text-body-2 mb-1"},mpe={key:0,class:"text-body-2 mb-1"},vpe={class:"text-subtitle-1 font-weight-bold"},hpe={class:"text-h6"},ppe={class:"text-h6 text-success"},gpe={key:0,class:"text-center pa-4"},ype={class:"font-weight-bold"},_pe={__name:"payment-receipt-edit",props:{receiptId:{type:[String,Number],required:!0}},emits:["close","receipt-updated"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=Ln(),l=ee(()=>o.state.doctorModule.doctorId),c=ee(()=>o.getters["doctorModule/currentDoctor"]),f=ee(()=>c.value?.doctorName||"Unknown Doctor"),d=ee(()=>c.value?.isGST||!1),A=R(!1),m=R(!1),p=R(null),h=R(null),y=R([]),g=R(!1),_=R(null),b=R([]),S=R(!1),B=R(null);ee(()=>_.value?b.value.find(Ee=>Ee.id===_.value):null);const F=vT(y,ee(()=>h.value?.additionalDiscount||0)),{servicesWithTotals:T,subtotal:E,totalLineDiscount:x,finalGrandTotal:C,hasValidService:D}=F,U=R(null),L=Mhe(U),{receiptPayments:H,isLoadingPayments:oe,deletingPayments:de,totalPaymentsMade:te,loadReceiptPayments:q,deletePayment:ce}=L;R([]),R([]);const le=bh,Z=R([]),ne=[Ee=>!!Ee||"Amount is required",Ee=>Ee>0||"Amount must be greater than 0",Ee=>Number.isInteger(Number(Ee))||"Amount must be a whole number"],G=[Ee=>!!Ee||"Payment mode is required"],W=[Ee=>!!Ee||"Payment date is required"],Q=()=>{y.value.push({serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1})},O=Ee=>{y.value.length>1?y.value.splice(Ee,1):y.value[0]={serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1}},ae=(Ee,Ue)=>{y.value[Ee]&&(y.value[Ee].serviceDescription=Ue)},j=(Ee,Ue)=>{console.log("Service selected:",Ue),Ue&&typeof Ue=="object"&&!Ue.isUserTyped?y.value[Ee]={...y.value[Ee],serviceDescription:Ue.serviceDescription,baseCost:Ue.baseCost||0,isFromHistory:!1,isPrepopulated:y.value[Ee].isPrepopulated===!0}:Ue===null&&(y.value[Ee]={...y.value[Ee],serviceDescription:"",baseCost:0,isFromHistory:!1,isPrepopulated:y.value[Ee].isPrepopulated===!0})},J=async()=>{if(!h.value?.patientId||!h.value?.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}S.value=!0;try{console.log("Loading treatment plans for patient:",h.value.patientId,"doctor:",h.value.doctorId);const Ee=await Vg(h.value.patientId,h.value.doctorId);if(Ee.error)throw new Error(Ee.error.message||"Failed to load treatment plans");b.value=Ee.data||[],console.log("Loaded treatment plans:",b.value.length)}catch(Ee){console.error("Error loading treatment plans:",Ee),s("Failed to load treatment plans: "+(Ee.message||"Unknown error")),b.value=[]}finally{S.value=!1}},ie=ee(()=>Array.isArray(Z.value)?Z.value.reduce((Ee,Ue)=>Ee+(parseFloat(Ue.amount)||0),0):0),X=ee(()=>{const Ee=te.value,Ue=ie.value;return Math.max(0,C.value-Ee-Ue)}),fe=ee(()=>{const Ee=D.value,Ue=h.value?.patientName;return Ee&&Ue});ee(()=>Z.value.length>0&&Z.value.every(Ee=>Ee.amount&&parseFloat(Ee.amount)>0&&Ee.mode&&Ee.paymentDate));const M=()=>{Z.value.push({amount:null,mode:"Cash",paymentDate:new Date().toISOString().split("T")[0],datePickerMenu:!1})},z=Ee=>{Z.value.splice(Ee,1)},se=Ee=>{if(!Ee)return null;try{if(typeof Ee=="string")return Ee.includes("T")?Ee.split("T")[0]:Ee;if(Ee instanceof Date){const Ue=Ee.getFullYear(),je=String(Ee.getMonth()+1).padStart(2,"0"),at=String(Ee.getDate()).padStart(2,"0");return`${Ue}-${je}-${at}`}return null}catch(Ue){return console.error("Error parsing payment date:",Ue),null}},be=(Ee,Ue)=>{if(Ee)if(Ee instanceof Date){const je=Ee.getFullYear(),at=String(Ee.getMonth()+1).padStart(2,"0"),mt=String(Ee.getDate()).padStart(2,"0");Ue.paymentDate=`${je}-${at}-${mt}`}else typeof Ee=="string"&&(Ue.paymentDate=Ee);else Ue.paymentDate="";Ue.datePickerMenu=!1},Fe=async()=>{if(!n.receiptId){p.value="No receipt ID provided";return}A.value=!0,p.value=null;try{console.log("Loading receipt data for editing, ID:",n.receiptId);const Ee=await XM(n.receiptId);if(Ee.error)throw new Error(Ee.error.message||"Failed to load receipt");const Ue=Ee.data;if(h.value={identifier:Ue.identifier,patientName:Ue.patientName,patientId:Ue.patientId,appointmentDate:Ue.appointmentDate,paymentReceiptDate:Ue.paymentReceiptDate||Ue.receiptDate,appointmentId:Ue.appointmentId,doctorId:Ue.doctorId,additionalDiscount:Ue.additionalDiscount||0},Ue.services&&Ue.services.length>0?y.value=Ue.services.map(je=>({serviceDescription:je.serviceDescription,baseCost:je.baseCost,discountAmount:je.discountAmount,quantity:je.quantity,isFromHistory:!1,isPrepopulated:!0})):y.value=[{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1}],console.log("Receipt data loaded for editing:",h.value),console.log("Services loaded:",y.value),Ue.treatmentPlanId){g.value=!0,_.value=Ue.treatmentPlanId,await J();try{const je=await CA(Ue.treatmentPlanId);B.value=je}catch(je){console.error("Error loading original treatment plan data:",je)}}await q()}catch(Ee){console.error("Error loading receipt data:",Ee),p.value=Ee.message||"Failed to load receipt data",s(p.value)}finally{A.value=!1}},ye=async()=>{if(!fe.value){s("Please add at least one valid service with description and cost");return}m.value=!0;try{const Ee=y.value.filter(at=>at.serviceDescription&&at.serviceDescription.trim().length>0).map(at=>({serviceDescription:at.serviceDescription,baseCost:parseFloat(at.baseCost)||0,gstPercent:0,discountAmount:parseFloat(at.discountAmount)||0,quantity:parseInt(at.quantity)||1})),Ue={patientName:h.value.patientName,paymentReceiptDate:h.value.paymentReceiptDate,appointmentDate:h.value.appointmentDate,additionalDiscount:parseFloat(h.value.additionalDiscount)||0,treatmentPlanId:g.value?_.value:null,services:Ee};console.log("Updating receipt with payload:",Ue);const je=await ihe(n.receiptId,Ue);if(je.error)throw new Error(je.error.message||"Failed to update receipt");console.log("Receipt updated successfully:",je.data),await Qe(),r(`Receipt ${je.data.identifier} updated successfully!`),a("receipt-updated",je.data)}catch(Ee){console.error("Error updating receipt:",Ee),s("Failed to update receipt. Please try again.")}finally{m.value=!1}},Qe=async()=>{if(Z.value.length===0){console.log("No new payment entries to create");return}console.log("Creating new payment entries:",Z.value);try{const Ee=Z.value.filter(Ue=>Ue.amount&&parseFloat(Ue.amount)>0&&Ue.mode&&Ue.paymentDate);console.log("Valid payments to create:",Ee);for(const Ue of Ee){const je={amount:parseFloat(Ue.amount),mode:Ue.mode,paymentDate:Ue.paymentDate,paymentReceiptId:n.receiptId};console.log("Creating payment with payload:",je);const at=await wh(je);at.success?console.log("Payment created successfully:",at.data):(console.error("Error creating payment entry:",at.error),s(`Failed to create payment: ${at.error?.message||"Unknown error"}`))}Z.value=[],console.log("New payment entries cleared"),await q()}catch(Ee){console.error("Error creating payment entries:",Ee),s("Failed to create some payments. Please try again.")}},_e=Ee=>{if(!Ee)return"";try{return new Date(Ee).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return Ee}},Se=()=>{a("close")};return Ge(()=>n.receiptId,Ee=>{U.value=Ee},{immediate:!0}),Ge(g,Ee=>{Ee&&b.value.length===0?J():Ee||(_.value=null)}),An(()=>{Fe()}),(Ee,Ue)=>{const je=I("v-icon"),at=I("v-btn"),mt=I("v-card-title"),xe=I("v-col"),Be=I("v-row"),Ye=I("v-progress-circular"),kt=I("v-label"),xt=I("v-card-text"),Nt=I("v-card"),At=I("v-switch"),Ot=I("v-chip"),Dt=I("v-list-item"),bt=I("v-select"),Ze=I("v-text-field"),qt=I("v-table"),Vt=I("v-divider"),zt=I("v-date-picker"),ln=I("v-menu"),Dn=I("v-container");return P(),he(Nt,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[i(Be,{"no-gutters":""},{default:u(()=>[i(xe,{cols:"12"},{default:u(()=>[i(mt,{class:"d-flex align-center justify-space-between"},{default:u(()=>[Ue[4]||(Ue[4]=v("span",null,"Edit Payment Receipt",-1)),i(at,{onClick:Se,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(je,{size:"18"},{default:u(()=>[...Ue[3]||(Ue[3]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(Be,{"no-gutters":""},{default:u(()=>[i(xe,{cols:"12",class:"scroll-element"},{default:u(()=>[A.value?(P(),he(Be,{key:0,"no-gutters":""},{default:u(()=>[i(xe,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",Ohe,[i(Ye,{indeterminate:"",color:"primary",size:"64"}),Ue[5]||(Ue[5]=v("div",{class:"mt-4 text-subtitle-1"},"Loading receipt...",-1))])]),_:1})]),_:1})):p.value?(P(),he(Be,{key:1,"no-gutters":""},{default:u(()=>[i(xe,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",Hhe,[i(je,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Ue[6]||(Ue[6]=[N("mdi-alert-circle",-1)])]),_:1}),Ue[8]||(Ue[8]=v("div",{class:"text-h6 mb-2"},"Failed to Load Receipt",-1)),v("div",$he,K(p.value),1),i(at,{color:"primary",onClick:Fe,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Ue[7]||(Ue[7]=[N(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):h.value?(P(),he(Dn,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[i(Nt,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[i(xt,{class:"pb-1 pt-2"},{default:u(()=>[i(Be,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(xe,{cols:"4"},{default:u(()=>[v("div",Qhe,[i(kt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ue[9]||(Ue[9]=[N("Patient Information",-1)])]),_:1}),v("div",Ghe,K(h.value.patientName||"Unknown Patient"),1),v("div",zhe,"ID: "+K(h.value.patientId||"N/A"),1)])]),_:1}),i(xe,{cols:"4"},{default:u(()=>[v("div",Whe,[i(kt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ue[10]||(Ue[10]=[N("Appointment Details",-1)])]),_:1}),v("div",Khe,"Dr. "+K(f.value),1),v("div",jhe,"Date: "+K(_e(h.value.appointmentDate)),1)])]),_:1}),i(xe,{cols:"4"},{default:u(()=>[v("div",qhe,[i(kt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ue[11]||(Ue[11]=[N("Receipt Information",-1)])]),_:1}),v("div",Yhe,K(h.value.identifier),1),v("div",Xhe,"Date: "+K(_e(h.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),i(Nt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(xt,{class:"pb-2"},{default:u(()=>[i(Be,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[i(xe,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...Ue[12]||(Ue[12]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),i(xe,{cols:"3",class:"d-flex align-center"},{default:u(()=>[i(At,{modelValue:g.value,"onUpdate:modelValue":Ue[0]||(Ue[0]=vt=>g.value=vt),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),i(xe,{cols:"7"},{default:u(()=>[!g.value&&B.value?(P(),Ae(ze,{key:0},[i(Ot,{color:"secondary",variant:"outlined","prepend-icon":"mdi-link-variant",class:"mr-2"},{default:u(()=>[N(K(B.value.treatmentPlanName),1)]),_:1}),v("div",Jhe," Status: "+K(B.value.status)+"  Created: "+K(_e(B.value.createdAt)),1)],64)):g.value?(P(),he(bt,{key:1,modelValue:_.value,"onUpdate:modelValue":Ue[1]||(Ue[1]=vt=>_.value=vt),items:b.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:S.value,disabled:S.value,clearable:"","hide-details":""},{selection:u(({item:vt})=>[v("div",Zhe,[v("div",epe,K(vt.raw.treatmentPlanName),1),v("div",tpe,[N(" Status: "+K(vt.raw.status)+"  Created: "+K(_e(vt.raw.createdAt))+" ",1),vt.raw.notes?(P(),Ae("span",npe,"  "+K(vt.raw.notes.substring(0,30))+"...",1)):ge("",!0)])])]),item:u(({props:vt,item:et})=>[i(Dt,fl(Al(vt)),{title:u(()=>[N(K(et.raw.treatmentPlanName),1)]),subtitle:u(()=>[v("div",ape,[N(" Status: "+K(et.raw.status)+"  Created: "+K(_e(et.raw.createdAt))+" ",1),et.raw.notes?(P(),Ae("span",rpe," "+K(et.raw.notes.substring(0,50))+"...",1)):ge("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])):(P(),Ae("div",spe," No treatment plan linked "))]),_:1})]),_:1})]),_:1})]),_:1}),i(Nt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(xt,{class:"pb-2"},{default:u(()=>[Ue[19]||(Ue[19]=v("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),i(qt,{density:"compact",class:"mb-3"},{default:u(()=>[Ue[14]||(Ue[14]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"300px"}},"Description"),v("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),v("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),v("th",{class:"text-left",style:{width:"100px"}},"Quantity"),v("th",{class:"text-left",style:{width:"120px"}},"Total ()"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(Oe(T),(vt,et)=>(P(),Ae("tr",{key:et,class:lt(vt.isPrepopulated?"prepopulated-service":"")},[v("td",null,K(et+1),1),v("td",null,[vt.isPrepopulated?(P(),Ae("span",ope,K(vt.serviceDescription),1)):(P(),he(Fw,{key:1,"model-value":vt.serviceDescription,"onUpdate:modelValue":Wt=>ae(et,Wt),onServiceSelected:Wt=>j(et,Wt),"doctor-id":l.value,"show-gst-in-results":d.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id","show-gst-in-results"]))]),v("td",null,[vt.isPrepopulated?(P(),Ae("span",ipe,""+K(vt.baseCost?.toLocaleString()||0),1)):(P(),he(Ze,{key:1,modelValue:y.value[et].baseCost,"onUpdate:modelValue":Wt=>y.value[et].baseCost=Wt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[vt.isPrepopulated?(P(),Ae("span",lpe,""+K(vt.discountAmount?.toLocaleString()||0),1)):(P(),he(Ze,{key:1,modelValue:y.value[et].discountAmount,"onUpdate:modelValue":Wt=>y.value[et].discountAmount=Wt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[vt.isPrepopulated?(P(),Ae("span",upe,K(vt.quantity||1),1)):(P(),he(Ze,{key:1,modelValue:y.value[et].quantity,"onUpdate:modelValue":Wt=>y.value[et].quantity=Wt,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[v("span",cpe,""+K(vt.total||0),1)]),v("td",null,[i(at,{icon:"",size:"small",color:"error",variant:"text",onClick:Wt=>O(et),title:vt.isPrepopulated?"Delete existing service":"Delete new service"},{default:u(()=>[i(je,null,{default:u(()=>[...Ue[13]||(Ue[13]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","title"])])],2))),128))])]),_:1}),i(Be,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(xe,{cols:"auto"},{default:u(()=>[i(at,{variant:"outlined",color:"primary",onClick:Q,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ue[15]||(Ue[15]=[N(" Add Service ",-1)])]),_:1})]),_:1}),i(xe),i(xe,{cols:"3"},{default:u(()=>[i(Ze,{label:"Additional Discount",modelValue:h.value.additionalDiscount,"onUpdate:modelValue":Ue[2]||(Ue[2]=vt=>h.value.additionalDiscount=vt),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),i(Vt,{class:"mb-3"}),i(Be,{"no-gutters":""},{default:u(()=>[i(xe,{cols:"8",class:"text-right"},{default:u(()=>[Ue[16]||(Ue[16]=v("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),Ue[17]||(Ue[17]=v("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),h.value.additionalDiscount>0?(P(),Ae("div",dpe,"Additional Discount:")):ge("",!0),Ue[18]||(Ue[18]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),i(xe,{cols:"4",class:"text-right"},{default:u(()=>[v("div",fpe,K(Oe(hr)(Oe(E))),1),v("div",Ape,"-"+K(Oe(hr)(Oe(x))),1),h.value.additionalDiscount>0?(P(),Ae("div",mpe,"-"+K(Oe(hr)(h.value.additionalDiscount)),1)):ge("",!0),v("div",vpe,K(Oe(hr)(Oe(C))),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(Nt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(xt,{class:"pb-2"},{default:u(()=>[Ue[30]||(Ue[30]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),i(Be,{"no-gutters":"",class:"mb-3"},{default:u(()=>[i(xe,{cols:"4"},{default:u(()=>[Ue[20]||(Ue[20]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",hpe,K(Oe(hr)(Oe(C))),1)]),_:1}),i(xe,{cols:"4"},{default:u(()=>[Ue[21]||(Ue[21]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",ppe,K(Oe(hr)(Oe(te)+ie.value)),1)]),_:1}),i(xe,{cols:"4"},{default:u(()=>[Ue[22]||(Ue[22]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),v("div",{class:lt(["text-h6",X.value>0?"text-error":"text-success"])},K(Oe(hr)(X.value)),3)]),_:1})]),_:1}),Oe(oe)?(P(),Ae("div",gpe,[i(Ye,{indeterminate:"",size:"32",color:"primary"}),Ue[23]||(Ue[23]=v("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(P(),Ae(ze,{key:1},[i(Vt,{class:"mb-3"}),Ue[29]||(Ue[29]=v("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),i(qt,{density:"compact",class:"mb-3"},{default:u(()=>[Ue[27]||(Ue[27]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(Oe(H),(vt,et)=>(P(),Ae("tr",{key:`existing-${vt.id}`},[v("td",null,K(et+1),1),v("td",ype,""+K(vt.amount.toLocaleString()),1),v("td",null,K(vt.mode),1),v("td",null,K(_e(vt.paymentDate)),1),v("td",null,[i(at,{icon:"",size:"small",color:"error",variant:"text",onClick:Wt=>Oe(ce)(vt.id),loading:Oe(de).includes(vt.id)},{default:u(()=>[i(je,null,{default:u(()=>[...Ue[24]||(Ue[24]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(P(!0),Ae(ze,null,Jt(Z.value,(vt,et)=>(P(),Ae("tr",{key:`new-${et}`},[v("td",null,K(Oe(H).length+et+1),1),v("td",null,[i(Ze,{modelValue:vt.amount,"onUpdate:modelValue":Wt=>vt.amount=Wt,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:ne},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(bt,{modelValue:vt.mode,"onUpdate:modelValue":Wt=>vt.mode=Wt,items:Oe(le),density:"compact",variant:"underlined","hide-details":"",rules:G},null,8,["modelValue","onUpdate:modelValue","items"])]),v("td",null,[i(ln,{modelValue:vt.datePickerMenu,"onUpdate:modelValue":Wt=>vt.datePickerMenu=Wt,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:Wt})=>[i(Ze,Ie({modelValue:vt.paymentDate,"onUpdate:modelValue":_n=>vt.paymentDate=_n,density:"compact",variant:"underlined","hide-details":"",rules:W,readonly:""},{ref_for:!0},Wt),{"append-inner":u(()=>[i(je,{class:"text-medium-emphasis"},{default:u(()=>[...Ue[25]||(Ue[25]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[i(zt,{"model-value":se(vt.paymentDate),"onUpdate:modelValue":Wt=>be(Wt,vt),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(at,{icon:"",size:"small",color:"error",variant:"text",onClick:Wt=>z(et)},{default:u(()=>[i(je,null,{default:u(()=>[...Ue[26]||(Ue[26]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),i(Be,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(xe,{cols:"auto"},{default:u(()=>[i(at,{variant:"outlined",color:"secondary",onClick:M,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ue[28]||(Ue[28]=[N(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))]),_:1})]),_:1}),i(Nt,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[i(xt,{class:"d-flex justify-center pb-2"},{default:u(()=>[i(at,{color:"primary",onClick:ye,loading:m.value,disabled:!fe.value,"prepend-icon":"mdi-content-save",class:"btn-hover-base"},{default:u(()=>[...Ue[31]||(Ue[31]=[N(" Update Receipt ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})}}},dO=en(_pe,[["__scopeId","data-v-d184b19b"]]),G0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12.04%202C6.58%202%202.13%206.45%202.13%2011.91C2.13%2013.66%202.59%2015.36%203.45%2016.86L2.05%2022L7.3%2020.62C8.75%2021.41%2010.38%2021.83%2012.04%2021.83C17.5%2021.83%2021.95%2017.38%2021.95%2011.92C21.95%209.27%2020.92%206.78%2019.05%204.91C17.18%203.03%2014.69%202%2012.04%202M12.05%203.67C14.25%203.67%2016.31%204.53%2017.87%206.09C19.42%207.65%2020.28%209.72%2020.28%2011.92C20.28%2016.46%2016.58%2020.15%2012.04%2020.15C10.56%2020.15%209.11%2019.76%207.85%2019L7.55%2018.83L4.43%2019.65L5.26%2016.61L5.06%2016.29C4.24%2015%203.8%2013.47%203.8%2011.91C3.81%207.37%207.5%203.67%2012.05%203.67M8.53%207.33C8.37%207.33%208.1%207.39%207.87%207.64C7.65%207.89%207%208.5%207%209.71C7%2010.93%207.89%2012.1%208%2012.27C8.14%2012.44%209.76%2014.94%2012.25%2016C12.84%2016.27%2013.3%2016.42%2013.66%2016.53C14.25%2016.72%2014.79%2016.69%2015.22%2016.63C15.7%2016.56%2016.68%2016.03%2016.89%2015.45C17.1%2014.87%2017.1%2014.38%2017.04%2014.27C16.97%2014.17%2016.81%2014.11%2016.56%2014C16.31%2013.86%2015.09%2013.26%2014.87%2013.18C14.64%2013.1%2014.5%2013.06%2014.31%2013.3C14.15%2013.55%2013.67%2014.11%2013.53%2014.27C13.38%2014.44%2013.24%2014.46%2013%2014.34C12.74%2014.21%2011.94%2013.95%2011%2013.11C10.26%2012.45%209.77%2011.64%209.62%2011.39C9.5%2011.15%209.61%2011%209.73%2010.89C9.84%2010.78%2010%2010.6%2010.1%2010.45C10.23%2010.31%2010.27%2010.2%2010.35%2010.04C10.43%209.87%2010.39%209.73%2010.33%209.61C10.27%209.5%209.77%208.26%209.56%207.77C9.36%207.29%209.16%207.35%209%207.34C8.86%207.34%208.7%207.33%208.53%207.33Z'%20/%3e%3c/svg%3e",wpe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2zm0%204l-8%205-8-5V6l8%205%208-5v2z'%20fill='currentColor'/%3e%3c/svg%3e";var cE=function(e,t){return cE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])},cE(e,t)};function ou(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");cE(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var dE=function(){return dE=Object.assign||function(t){for(var n,a=1,r=arguments.length;a<r;a++){n=arguments[a];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},dE.apply(this,arguments)};function Mo(e,t,n,a){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{f(a.next(d))}catch(A){o(A)}}function c(d){try{f(a.throw(d))}catch(A){o(A)}}function f(d){d.done?s(d.value):r(d.value).then(l,c)}f((a=a.apply(e,[])).next())})}function fo(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,r,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(d){return c([f,d])}}function c(f){if(a)throw new TypeError("Generator is already executing.");for(;n;)try{if(a=1,r&&(s=f[0]&2?r.return:f[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,f[1])).done)return s;switch(r=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,r=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(d){f=[6,d],r=0}finally{a=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function uy(e,t,n){if(arguments.length===2)for(var a=0,r=t.length,s;a<r;a++)(s||!(a in t))&&(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||t)}var Qc=(function(){function e(t,n,a,r){this.left=t,this.top=n,this.width=a,this.height=r}return e.prototype.add=function(t,n,a,r){return new e(this.left+t,this.top+n,this.width+a,this.height+r)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var a=Array.from(n).find(function(r){return r.width!==0});return a?new e(a.left+t.windowBounds.left,a.top+t.windowBounds.top,a.width,a.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e})(),Dw=function(e,t){return Qc.fromClientRect(e,t.getBoundingClientRect())},bpe=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var a=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),r=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new Qc(0,0,a,r)},Uw=function(e){for(var t=[],n=0,a=e.length;n<a;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<a){var s=e.charCodeAt(n++);(s&64512)===56320?t.push(((r&1023)<<10)+(s&1023)+65536):(t.push(r),n--)}else t.push(r)}return t},Xr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var a=[],r=-1,s="";++r<n;){var o=e[r];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(r+1===n||a.length>16384)&&(s+=String.fromCharCode.apply(String,a),a.length=0)}return s},oU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xpe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cy=0;cy<oU.length;cy++)xpe[oU.charCodeAt(cy)]=cy;var iU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var dy=0;dy<iU.length;dy++)Pp[iU.charCodeAt(dy)]=dy;var Cpe=function(e){var t=e.length*.75,n=e.length,a,r=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var f=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(f)?f:new Uint8Array(f);for(a=0;a<n;a+=4)s=Pp[e.charCodeAt(a)],o=Pp[e.charCodeAt(a+1)],l=Pp[e.charCodeAt(a+2)],c=Pp[e.charCodeAt(a+3)],d[r++]=s<<2|o>>4,d[r++]=(o&15)<<4|l>>2,d[r++]=(l&3)<<6|c&63;return f},Spe=function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n.push(e[a+1]<<8|e[a]);return n},Epe=function(e){for(var t=e.length,n=[],a=0;a<t;a+=4)n.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return n},lA=5,hT=11,dC=2,kpe=hT-lA,fO=65536>>lA,Bpe=1<<lA,fC=Bpe-1,Tpe=1024>>lA,Ipe=fO+Tpe,Fpe=Ipe,Ppe=32,Dpe=Fpe+Ppe,Upe=65536>>hT,Rpe=1<<kpe,Npe=Rpe-1,lU=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Vpe=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Lpe=function(e,t){var n=Cpe(e),a=Array.isArray(n)?Epe(n):new Uint32Array(n),r=Array.isArray(n)?Spe(n):new Uint16Array(n),s=24,o=lU(r,s/2,a[4]/2),l=a[5]===2?lU(r,(s+a[4])/2):Vpe(a,Math.ceil((s+a[4])/4));return new Mpe(a[0],a[1],a[2],a[3],o,l)},Mpe=(function(){function e(t,n,a,r,s,o){this.initialValue=t,this.errorValue=n,this.highStart=a,this.highValueIndex=r,this.index=s,this.data=o}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>lA],n=(n<<dC)+(t&fC),this.data[n];if(t<=65535)return n=this.index[fO+(t-55296>>lA)],n=(n<<dC)+(t&fC),this.data[n];if(t<this.highStart)return n=Dpe-Upe+(t>>hT),n=this.index[n],n+=t>>lA&Npe,n=this.index[n],n=(n<<dC)+(t&fC),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),uU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ope=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var fy=0;fy<uU.length;fy++)Ope[uU.charCodeAt(fy)]=fy;var Hpe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",cU=50,$pe=1,AO=2,mO=3,Qpe=4,Gpe=5,dU=7,vO=8,fU=9,Fd=10,fE=11,AU=12,AE=13,zpe=14,Dp=15,mE=16,Ay=17,hp=18,Wpe=19,mU=20,vE=21,pp=22,AC=23,Hm=24,xi=25,Up=26,Rp=27,$m=28,Kpe=29,Qf=30,jpe=31,my=32,vy=33,hE=34,pE=35,gE=36,z0=37,yE=38,c_=39,d_=40,mC=41,hO=42,qpe=43,Ype=[9001,65288],pO="!",_a="",hy="",_E=Lpe(Hpe),pc=[Qf,gE],wE=[$pe,AO,mO,Gpe],gO=[Fd,vO],vU=[Rp,Up],Xpe=wE.concat(gO),hU=[yE,c_,d_,hE,pE],Jpe=[Dp,AE],Zpe=function(e,t){t===void 0&&(t="strict");var n=[],a=[],r=[];return e.forEach(function(s,o){var l=_E.get(s);if(l>cU?(r.push(!0),l-=cU):r.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return a.push(o),n.push(mE);if(l===Qpe||l===fE){if(o===0)return a.push(o),n.push(Qf);var c=n[o-1];return Xpe.indexOf(c)===-1?(a.push(a[o-1]),n.push(c)):(a.push(o),n.push(Qf))}if(a.push(o),l===jpe)return n.push(t==="strict"?vE:z0);if(l===hO||l===Kpe)return n.push(Qf);if(l===qpe)return s>=131072&&s<=196605||s>=196608&&s<=262141?n.push(z0):n.push(Qf);n.push(l)}),[a,n,r]},vC=function(e,t,n,a){var r=a[n];if(Array.isArray(e)?e.indexOf(r)!==-1:e===r)for(var s=n;s<=a.length;){s++;var o=a[s];if(o===t)return!0;if(o!==Fd)break}if(r===Fd)for(var s=n;s>0;){s--;var l=a[s];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=n;c<=a.length;){c++;var o=a[c];if(o===t)return!0;if(o!==Fd)break}if(l!==Fd)break}return!1},pU=function(e,t){for(var n=e;n>=0;){var a=t[n];if(a===Fd)n--;else return a}return 0},e0e=function(e,t,n,a,r){if(n[a]===0)return _a;var s=a-1;if(Array.isArray(r)&&r[s]===!0)return _a;var o=s-1,l=s+1,c=t[s],f=o>=0?t[o]:0,d=t[l];if(c===AO&&d===mO)return _a;if(wE.indexOf(c)!==-1)return pO;if(wE.indexOf(d)!==-1||gO.indexOf(d)!==-1)return _a;if(pU(s,t)===vO)return hy;if(_E.get(e[s])===fE||(c===my||c===vy)&&_E.get(e[l])===fE||c===dU||d===dU||c===fU||[Fd,AE,Dp].indexOf(c)===-1&&d===fU||[Ay,hp,Wpe,Hm,$m].indexOf(d)!==-1||pU(s,t)===pp||vC(AC,pp,s,t)||vC([Ay,hp],vE,s,t)||vC(AU,AU,s,t))return _a;if(c===Fd)return hy;if(c===AC||d===AC)return _a;if(d===mE||c===mE)return hy;if([AE,Dp,vE].indexOf(d)!==-1||c===zpe||f===gE&&Jpe.indexOf(c)!==-1||c===$m&&d===gE||d===mU||pc.indexOf(d)!==-1&&c===xi||pc.indexOf(c)!==-1&&d===xi||c===Rp&&[z0,my,vy].indexOf(d)!==-1||[z0,my,vy].indexOf(c)!==-1&&d===Up||pc.indexOf(c)!==-1&&vU.indexOf(d)!==-1||vU.indexOf(c)!==-1&&pc.indexOf(d)!==-1||[Rp,Up].indexOf(c)!==-1&&(d===xi||[pp,Dp].indexOf(d)!==-1&&t[l+1]===xi)||[pp,Dp].indexOf(c)!==-1&&d===xi||c===xi&&[xi,$m,Hm].indexOf(d)!==-1)return _a;if([xi,$m,Hm,Ay,hp].indexOf(d)!==-1)for(var A=s;A>=0;){var m=t[A];if(m===xi)return _a;if([$m,Hm].indexOf(m)!==-1)A--;else break}if([Rp,Up].indexOf(d)!==-1)for(var A=[Ay,hp].indexOf(c)!==-1?o:s;A>=0;){var m=t[A];if(m===xi)return _a;if([$m,Hm].indexOf(m)!==-1)A--;else break}if(yE===c&&[yE,c_,hE,pE].indexOf(d)!==-1||[c_,hE].indexOf(c)!==-1&&[c_,d_].indexOf(d)!==-1||[d_,pE].indexOf(c)!==-1&&d===d_||hU.indexOf(c)!==-1&&[mU,Up].indexOf(d)!==-1||hU.indexOf(d)!==-1&&c===Rp||pc.indexOf(c)!==-1&&pc.indexOf(d)!==-1||c===Hm&&pc.indexOf(d)!==-1||pc.concat(xi).indexOf(c)!==-1&&d===pp&&Ype.indexOf(e[l])===-1||pc.concat(xi).indexOf(d)!==-1&&c===hp)return _a;if(c===mC&&d===mC){for(var p=n[s],h=1;p>0&&(p--,t[p]===mC);)h++;if(h%2!==0)return _a}return c===my&&d===vy?_a:hy},t0e=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Zpe(e,t.lineBreak),a=n[0],r=n[1],s=n[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(r=r.map(function(l){return[xi,Qf,hO].indexOf(l)!==-1?z0:l}));var o=t.wordBreak==="keep-all"?s.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[a,r,o]},n0e=(function(){function e(t,n,a,r){this.codePoints=t,this.required=n===pO,this.start=a,this.end=r}return e.prototype.slice=function(){return Xr.apply(void 0,this.codePoints.slice(this.start,this.end))},e})(),a0e=function(e,t){var n=Uw(e),a=t0e(n,t),r=a[0],s=a[1],o=a[2],l=n.length,c=0,f=0;return{next:function(){if(f>=l)return{done:!0,value:null};for(var d=_a;f<l&&(d=e0e(n,s,r,++f,o))===_a;);if(d!==_a||f===l){var A=new n0e(n,d,c,f);return c=f,{value:A,done:!1}}return{done:!0,value:null}}}},r0e=1,s0e=2,Lg=4,gU=8,r2=10,yU=47,a0=92,o0e=9,i0e=32,py=34,gp=61,l0e=35,u0e=36,c0e=37,gy=39,yy=40,yp=41,d0e=95,si=45,f0e=33,A0e=60,m0e=62,v0e=64,h0e=91,p0e=93,g0e=61,y0e=123,_y=63,_0e=125,_U=124,w0e=126,b0e=128,wU=65533,hC=42,Yf=43,x0e=44,C0e=58,S0e=59,W0=46,E0e=0,k0e=8,B0e=11,T0e=14,I0e=31,F0e=127,gu=-1,yO=48,_O=97,wO=101,P0e=102,D0e=117,U0e=122,bO=65,xO=69,CO=70,R0e=85,N0e=90,mo=function(e){return e>=yO&&e<=57},V0e=function(e){return e>=55296&&e<=57343},Qm=function(e){return mo(e)||e>=bO&&e<=CO||e>=_O&&e<=P0e},L0e=function(e){return e>=_O&&e<=U0e},M0e=function(e){return e>=bO&&e<=N0e},O0e=function(e){return L0e(e)||M0e(e)},H0e=function(e){return e>=b0e},wy=function(e){return e===r2||e===o0e||e===i0e},s2=function(e){return O0e(e)||H0e(e)||e===d0e},bU=function(e){return s2(e)||mo(e)||e===si},$0e=function(e){return e>=E0e&&e<=k0e||e===B0e||e>=T0e&&e<=I0e||e===F0e},xd=function(e,t){return e!==a0?!1:t!==r2},by=function(e,t,n){return e===si?s2(t)||xd(t,n):s2(e)?!0:!!(e===a0&&xd(e,t))},pC=function(e,t,n){return e===Yf||e===si?mo(t)?!0:t===W0&&mo(n):mo(e===W0?t:e)},Q0e=function(e){var t=0,n=1;(e[t]===Yf||e[t]===si)&&(e[t]===si&&(n=-1),t++);for(var a=[];mo(e[t]);)a.push(e[t++]);var r=a.length?parseInt(Xr.apply(void 0,a),10):0;e[t]===W0&&t++;for(var s=[];mo(e[t]);)s.push(e[t++]);var o=s.length,l=o?parseInt(Xr.apply(void 0,s),10):0;(e[t]===xO||e[t]===wO)&&t++;var c=1;(e[t]===Yf||e[t]===si)&&(e[t]===si&&(c=-1),t++);for(var f=[];mo(e[t]);)f.push(e[t++]);var d=f.length?parseInt(Xr.apply(void 0,f),10):0;return n*(r+l*Math.pow(10,-o))*Math.pow(10,c*d)},G0e={type:2},z0e={type:3},W0e={type:4},K0e={type:13},j0e={type:8},q0e={type:21},Y0e={type:9},X0e={type:10},J0e={type:11},Z0e={type:12},ege={type:14},xy={type:23},tge={type:1},nge={type:25},age={type:24},rge={type:26},sge={type:27},oge={type:28},ige={type:29},lge={type:31},bE={type:32},SO=(function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(Uw(t))},e.prototype.read=function(){for(var t=[],n=this.consumeToken();n!==bE;)t.push(n),n=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case py:return this.consumeStringToken(py);case l0e:var n=this.peekCodePoint(0),a=this.peekCodePoint(1),r=this.peekCodePoint(2);if(bU(n)||xd(a,r)){var s=by(n,a,r)?s0e:r0e,o=this.consumeName();return{type:5,value:o,flags:s}}break;case u0e:if(this.peekCodePoint(0)===gp)return this.consumeCodePoint(),K0e;break;case gy:return this.consumeStringToken(gy);case yy:return G0e;case yp:return z0e;case hC:if(this.peekCodePoint(0)===gp)return this.consumeCodePoint(),ege;break;case Yf:if(pC(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case x0e:return W0e;case si:var l=t,c=this.peekCodePoint(0),f=this.peekCodePoint(1);if(pC(l,c,f))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(by(l,c,f))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===si&&f===m0e)return this.consumeCodePoint(),this.consumeCodePoint(),age;break;case W0:if(pC(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case yU:if(this.peekCodePoint(0)===hC)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===hC&&(d=this.consumeCodePoint(),d===yU))return this.consumeToken();if(d===gu)return this.consumeToken()}break;case C0e:return rge;case S0e:return sge;case A0e:if(this.peekCodePoint(0)===f0e&&this.peekCodePoint(1)===si&&this.peekCodePoint(2)===si)return this.consumeCodePoint(),this.consumeCodePoint(),nge;break;case v0e:var A=this.peekCodePoint(0),m=this.peekCodePoint(1),p=this.peekCodePoint(2);if(by(A,m,p)){var o=this.consumeName();return{type:7,value:o}}break;case h0e:return oge;case a0:if(xd(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case p0e:return ige;case g0e:if(this.peekCodePoint(0)===gp)return this.consumeCodePoint(),j0e;break;case y0e:return J0e;case _0e:return Z0e;case D0e:case R0e:var h=this.peekCodePoint(0),y=this.peekCodePoint(1);return h===Yf&&(Qm(y)||y===_y)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case _U:if(this.peekCodePoint(0)===gp)return this.consumeCodePoint(),Y0e;if(this.peekCodePoint(0)===_U)return this.consumeCodePoint(),q0e;break;case w0e:if(this.peekCodePoint(0)===gp)return this.consumeCodePoint(),X0e;break;case gu:return bE}return wy(t)?(this.consumeWhiteSpace(),lge):mo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):s2(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Xr(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],n=this.consumeCodePoint();Qm(n)&&t.length<6;)t.push(n),n=this.consumeCodePoint();for(var a=!1;n===_y&&t.length<6;)t.push(n),n=this.consumeCodePoint(),a=!0;if(a){var r=parseInt(Xr.apply(void 0,t.map(function(c){return c===_y?yO:c})),16),s=parseInt(Xr.apply(void 0,t.map(function(c){return c===_y?CO:c})),16);return{type:30,start:r,end:s}}var o=parseInt(Xr.apply(void 0,t),16);if(this.peekCodePoint(0)===si&&Qm(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var l=[];Qm(n)&&l.length<6;)l.push(n),n=this.consumeCodePoint();var s=parseInt(Xr.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===yy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===yy?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===gu)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===gy||n===py){var a=this.consumeStringToken(this.consumeCodePoint());return a.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===gu||this.peekCodePoint(0)===yp)?(this.consumeCodePoint(),{type:22,value:a.value}):(this.consumeBadUrlRemnants(),xy)}for(;;){var r=this.consumeCodePoint();if(r===gu||r===yp)return{type:22,value:Xr.apply(void 0,t)};if(wy(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===gu||this.peekCodePoint(0)===yp?(this.consumeCodePoint(),{type:22,value:Xr.apply(void 0,t)}):(this.consumeBadUrlRemnants(),xy);if(r===py||r===gy||r===yy||$0e(r))return this.consumeBadUrlRemnants(),xy;if(r===a0)if(xd(r,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),xy;else t.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;wy(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===yp||t===gu)return;xd(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var n=5e4,a="";t>0;){var r=Math.min(n,t);a+=Xr.apply(void 0,this._value.splice(0,r)),t-=r}return this._value.shift(),a},e.prototype.consumeStringToken=function(t){var n="",a=0;do{var r=this._value[a];if(r===gu||r===void 0||r===t)return n+=this.consumeStringSlice(a),{type:0,value:n};if(r===r2)return this._value.splice(0,a),tge;if(r===a0){var s=this._value[a+1];s!==gu&&s!==void 0&&(s===r2?(n+=this.consumeStringSlice(a),a=-1,this._value.shift()):xd(r,s)&&(n+=this.consumeStringSlice(a),n+=Xr(this.consumeEscapedCodePoint()),a=-1))}a++}while(!0)},e.prototype.consumeNumber=function(){var t=[],n=Lg,a=this.peekCodePoint(0);for((a===Yf||a===si)&&t.push(this.consumeCodePoint());mo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(a===W0&&mo(r))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=gU;mo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((a===xO||a===wO)&&((r===Yf||r===si)&&mo(s)||mo(r)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=gU;mo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Q0e(t),n]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),n=t[0],a=t[1],r=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(by(r,s,o)){var l=this.consumeName();return{type:15,number:n,flags:a,unit:l}}return r===c0e?(this.consumeCodePoint(),{type:16,number:n,flags:a}):{type:17,number:n,flags:a}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Qm(t)){for(var n=Xr(t);Qm(this.peekCodePoint(0))&&n.length<6;)n+=Xr(this.consumeCodePoint());wy(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(n,16);return a===0||V0e(a)||a>1114111?wU:a}return t===gu?wU:t},e.prototype.consumeName=function(){for(var t="";;){var n=this.consumeCodePoint();if(bU(n))t+=Xr(n);else if(xd(n,this.peekCodePoint(0)))t+=Xr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),t}},e})(),EO=(function(){function e(t){this._tokens=t}return e.create=function(t){var n=new SO;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var n=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var n=this.consumeComponentValue();if(n.type===32)return t;t.push(n),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var n={type:t,values:[]},a=this.consumeToken();;){if(a.type===32||cge(a,t))return n;this.reconsumeToken(a),n.values.push(this.consumeComponentValue()),a=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var n={name:t.value,values:[],type:18};;){var a=this.consumeToken();if(a.type===32||a.type===3)return n;this.reconsumeToken(a),n.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?bE:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e})(),Mg=function(e){return e.type===15},xh=function(e){return e.type===17},sr=function(e){return e.type===20},uge=function(e){return e.type===0},xE=function(e,t){return sr(e)&&e.value===t},kO=function(e){return e.type!==31},Yv=function(e){return e.type!==31&&e.type!==4},Ku=function(e){var t=[],n=[];return e.forEach(function(a){if(a.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(n),n=[];return}a.type!==31&&n.push(a)}),n.length&&t.push(n),t},cge=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},nf=function(e){return e.type===17||e.type===15},fs=function(e){return e.type===16||nf(e)},BO=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},to={type:17,number:0,flags:Lg},pT={type:16,number:50,flags:Lg},Pd={type:16,number:100,flags:Lg},Np=function(e,t,n){var a=e[0],r=e[1];return[pr(a,t),pr(typeof r<"u"?r:a,n)]},pr=function(e,t){if(e.type===16)return e.number/100*t;if(Mg(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},TO="deg",IO="grad",FO="rad",PO="turn",Rw={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case TO:return Math.PI*t.number/180;case IO:return Math.PI/200*t.number;case FO:return t.number;case PO:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},DO=function(e){return e.type===15&&(e.unit===TO||e.unit===IO||e.unit===FO||e.unit===PO)},UO=function(e){var t=e.filter(sr).map(function(n){return n.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[to,to];case"to top":case"bottom":return rl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[to,Pd];case"to right":case"left":return rl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Pd,Pd];case"to bottom":case"top":return rl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Pd,to];case"to left":case"right":return rl(270)}return 0},rl=function(e){return Math.PI*e/180},Od={name:"color",parse:function(e,t){if(t.type===18){var n=dge[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(t.type===5){if(t.value.length===3){var a=t.value.substring(0,1),r=t.value.substring(1,2),s=t.value.substring(2,3);return Dd(parseInt(a+a,16),parseInt(r+r,16),parseInt(s+s,16),1)}if(t.value.length===4){var a=t.value.substring(0,1),r=t.value.substring(1,2),s=t.value.substring(2,3),o=t.value.substring(3,4);return Dd(parseInt(a+a,16),parseInt(r+r,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(t.value.length===6){var a=t.value.substring(0,2),r=t.value.substring(2,4),s=t.value.substring(4,6);return Dd(parseInt(a,16),parseInt(r,16),parseInt(s,16),1)}if(t.value.length===8){var a=t.value.substring(0,2),r=t.value.substring(2,4),s=t.value.substring(4,6),o=t.value.substring(6,8);return Dd(parseInt(a,16),parseInt(r,16),parseInt(s,16),parseInt(o,16)/255)}}if(t.type===20){var l=Pc[t.value.toUpperCase()];if(typeof l<"u")return l}return Pc.TRANSPARENT}},Hd=function(e){return(255&e)===0},Rs=function(e){var t=255&e,n=255&e>>8,a=255&e>>16,r=255&e>>24;return t<255?"rgba("+r+","+a+","+n+","+t/255+")":"rgb("+r+","+a+","+n+")"},Dd=function(e,t,n,a){return(e<<24|t<<16|n<<8|Math.round(a*255)<<0)>>>0},xU=function(e,t){if(e.type===17)return e.number;if(e.type===16){var n=t===3?1:255;return t===3?e.number/100*n:Math.round(e.number/100*n)}return 0},CU=function(e,t){var n=t.filter(Yv);if(n.length===3){var a=n.map(xU),r=a[0],s=a[1],o=a[2];return Dd(r,s,o,1)}if(n.length===4){var l=n.map(xU),r=l[0],s=l[1],o=l[2],c=l[3];return Dd(r,s,o,c)}return 0};function gC(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<1/2?t:n<2/3?(t-e)*6*(2/3-n)+e:e}var SU=function(e,t){var n=t.filter(Yv),a=n[0],r=n[1],s=n[2],o=n[3],l=(a.type===17?rl(a.number):Rw.parse(e,a))/(Math.PI*2),c=fs(r)?r.number/100:0,f=fs(s)?s.number/100:0,d=typeof o<"u"&&fs(o)?pr(o,1):1;if(c===0)return Dd(f*255,f*255,f*255,1);var A=f<=.5?f*(c+1):f+c-f*c,m=f*2-A,p=gC(m,A,l+1/3),h=gC(m,A,l),y=gC(m,A,l-1/3);return Dd(p*255,h*255,y*255,d)},dge={hsl:SU,hsla:SU,rgb:CU,rgba:CU},r0=function(e,t){return Od.parse(e,EO.create(t).parseComponentValue())},Pc={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},fge={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(sr(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Age={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Nw=function(e,t){var n=Od.parse(e,t[0]),a=t[1];return a&&fs(a)?{color:n,stop:a}:{color:n,stop:null}},EU=function(e,t){var n=e[0],a=e[e.length-1];n.stop===null&&(n.stop=to),a.stop===null&&(a.stop=Pd);for(var r=[],s=0,o=0;o<e.length;o++){var l=e[o].stop;if(l!==null){var c=pr(l,t);c>s?r.push(c):r.push(s),s=c}else r.push(null)}for(var f=null,o=0;o<r.length;o++){var d=r[o];if(d===null)f===null&&(f=o);else if(f!==null){for(var A=o-f,m=r[f-1],p=(d-m)/(A+1),h=1;h<=A;h++)r[f+h-1]=p*h;f=null}}return e.map(function(y,g){var _=y.color;return{color:_,stop:Math.max(Math.min(1,r[g]/t),0)}})},mge=function(e,t,n){var a=t/2,r=n/2,s=pr(e[0],t)-a,o=r-pr(e[1],n);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},vge=function(e,t,n){var a=typeof e=="number"?e:mge(e,t,n),r=Math.abs(t*Math.sin(a))+Math.abs(n*Math.cos(a)),s=t/2,o=n/2,l=r/2,c=Math.sin(a-Math.PI/2)*l,f=Math.cos(a-Math.PI/2)*l;return[r,s-f,s+f,o-c,o+c]},Sl=function(e,t){return Math.sqrt(e*e+t*t)},kU=function(e,t,n,a,r){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(o,l){var c=l[0],f=l[1],d=Sl(n-c,a-f);return(r?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},hge=function(e,t,n,a,r){var s=0,o=0;switch(e.size){case 0:e.shape===0?s=o=Math.min(Math.abs(t),Math.abs(t-a),Math.abs(n),Math.abs(n-r)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-a)),o=Math.min(Math.abs(n),Math.abs(n-r)));break;case 2:if(e.shape===0)s=o=Math.min(Sl(t,n),Sl(t,n-r),Sl(t-a,n),Sl(t-a,n-r));else if(e.shape===1){var l=Math.min(Math.abs(n),Math.abs(n-r))/Math.min(Math.abs(t),Math.abs(t-a)),c=kU(a,r,t,n,!0),f=c[0],d=c[1];s=Sl(f-t,(d-n)/l),o=l*s}break;case 1:e.shape===0?s=o=Math.max(Math.abs(t),Math.abs(t-a),Math.abs(n),Math.abs(n-r)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-a)),o=Math.max(Math.abs(n),Math.abs(n-r)));break;case 3:if(e.shape===0)s=o=Math.max(Sl(t,n),Sl(t,n-r),Sl(t-a,n),Sl(t-a,n-r));else if(e.shape===1){var l=Math.max(Math.abs(n),Math.abs(n-r))/Math.max(Math.abs(t),Math.abs(t-a)),A=kU(a,r,t,n,!1),f=A[0],d=A[1];s=Sl(f-t,(d-n)/l),o=l*s}break}return Array.isArray(e.size)&&(s=pr(e.size[0],a),o=e.size.length===2?pr(e.size[1],r):s),[s,o]},pge=function(e,t){var n=rl(180),a=[];return Ku(t).forEach(function(r,s){if(s===0){var o=r[0];if(o.type===20&&o.value==="to"){n=UO(r);return}else if(DO(o)){n=Rw.parse(e,o);return}}var l=Nw(e,r);a.push(l)}),{angle:n,stops:a,type:1}},Cy=function(e,t){var n=rl(180),a=[];return Ku(t).forEach(function(r,s){if(s===0){var o=r[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){n=UO(r);return}else if(DO(o)){n=(Rw.parse(e,o)+rl(270))%rl(360);return}}var l=Nw(e,r);a.push(l)}),{angle:n,stops:a,type:1}},gge=function(e,t){var n=rl(180),a=[],r=1,s=0,o=3,l=[];return Ku(t).forEach(function(c,f){var d=c[0];if(f===0){if(sr(d)&&d.value==="linear"){r=1;return}else if(sr(d)&&d.value==="radial"){r=2;return}}if(d.type===18){if(d.name==="from"){var A=Od.parse(e,d.values[0]);a.push({stop:to,color:A})}else if(d.name==="to"){var A=Od.parse(e,d.values[0]);a.push({stop:Pd,color:A})}else if(d.name==="color-stop"){var m=d.values.filter(Yv);if(m.length===2){var A=Od.parse(e,m[1]),p=m[0];xh(p)&&a.push({stop:{type:16,number:p.number*100,flags:p.flags},color:A})}}}}),r===1?{angle:(n+rl(180))%rl(360),stops:a,type:r}:{size:o,shape:s,stops:a,position:l,type:r}},RO="closest-side",NO="farthest-side",VO="closest-corner",LO="farthest-corner",MO="circle",OO="ellipse",HO="cover",$O="contain",yge=function(e,t){var n=0,a=3,r=[],s=[];return Ku(t).forEach(function(o,l){var c=!0;if(l===0){var f=!1;c=o.reduce(function(A,m){if(f)if(sr(m))switch(m.value){case"center":return s.push(pT),A;case"top":case"left":return s.push(to),A;case"right":case"bottom":return s.push(Pd),A}else(fs(m)||nf(m))&&s.push(m);else if(sr(m))switch(m.value){case MO:return n=0,!1;case OO:return n=1,!1;case"at":return f=!0,!1;case RO:return a=0,!1;case HO:case NO:return a=1,!1;case $O:case VO:return a=2,!1;case LO:return a=3,!1}else if(nf(m)||fs(m))return Array.isArray(a)||(a=[]),a.push(m),!1;return A},c)}if(c){var d=Nw(e,o);r.push(d)}}),{size:a,shape:n,stops:r,position:s,type:2}},Sy=function(e,t){var n=0,a=3,r=[],s=[];return Ku(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,A){if(sr(A))switch(A.value){case"center":return s.push(pT),!1;case"top":case"left":return s.push(to),!1;case"right":case"bottom":return s.push(Pd),!1}else if(fs(A)||nf(A))return s.push(A),!1;return d},c):l===1&&(c=o.reduce(function(d,A){if(sr(A))switch(A.value){case MO:return n=0,!1;case OO:return n=1,!1;case $O:case RO:return a=0,!1;case NO:return a=1,!1;case VO:return a=2,!1;case HO:case LO:return a=3,!1}else if(nf(A)||fs(A))return Array.isArray(a)||(a=[]),a.push(A),!1;return d},c)),c){var f=Nw(e,o);r.push(f)}}),{size:a,shape:n,stops:r,position:s,type:2}},_ge=function(e){return e.type===1},wge=function(e){return e.type===2},gT={name:"image",parse:function(e,t){if(t.type===22){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(t.type===18){var a=QO[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return a(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function bge(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!QO[e.name])}var QO={"linear-gradient":pge,"-moz-linear-gradient":Cy,"-ms-linear-gradient":Cy,"-o-linear-gradient":Cy,"-webkit-linear-gradient":Cy,"radial-gradient":yge,"-moz-radial-gradient":Sy,"-ms-radial-gradient":Sy,"-o-radial-gradient":Sy,"-webkit-radial-gradient":Sy,"-webkit-gradient":gge},xge={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t.filter(function(a){return Yv(a)&&bge(a)}).map(function(a){return gT.parse(e,a)})}},Cge={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(sr(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Sge={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Ku(t).map(function(n){return n.filter(fs)}).map(BO)}},Ege={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Ku(t).map(function(n){return n.filter(sr).map(function(a){return a.value}).join(" ")}).map(kge)}},kge=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Sv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Sv||(Sv={}));var Bge={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Ku(t).map(function(n){return n.filter(Tge)})}},Tge=function(e){return sr(e)||fs(e)},Vw=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Ige=Vw("top"),Fge=Vw("right"),Pge=Vw("bottom"),Dge=Vw("left"),Lw=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,n){return BO(n.filter(fs))}}},Uge=Lw("top-left"),Rge=Lw("top-right"),Nge=Lw("bottom-right"),Vge=Lw("bottom-left"),Mw=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Lge=Mw("top"),Mge=Mw("right"),Oge=Mw("bottom"),Hge=Mw("left"),Ow=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,n){return Mg(n)?n.number:0}}},$ge=Ow("top"),Qge=Ow("right"),Gge=Ow("bottom"),zge=Ow("left"),Wge={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Kge={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},jge={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(sr).reduce(function(n,a){return n|qge(a.value)},0)}},qge=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Yge={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Xge={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},o2;(function(e){e.NORMAL="normal",e.STRICT="strict"})(o2||(o2={}));var Jge={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return o2.STRICT;case"normal":default:return o2.NORMAL}}},Zge={name:"line-height",initialValue:"normal",prefix:!1,type:4},BU=function(e,t){return sr(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:fs(e)?pr(e,t):t},e1e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:gT.parse(e,t)}},t1e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},CE={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Hw=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},n1e=Hw("top"),a1e=Hw("right"),r1e=Hw("bottom"),s1e=Hw("left"),o1e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(sr).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},i1e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},$w=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},l1e=$w("top"),u1e=$w("right"),c1e=$w("bottom"),d1e=$w("left"),f1e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},A1e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},m1e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&xE(t[0],"none")?[]:Ku(t).map(function(n){for(var a={color:Pc.TRANSPARENT,offsetX:to,offsetY:to,blur:to},r=0,s=0;s<n.length;s++){var o=n[s];nf(o)?(r===0?a.offsetX=o:r===1?a.offsetY=o:a.blur=o,r++):a.color=Od.parse(e,o)}return a})}},v1e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},h1e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var n=y1e[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},p1e=function(e){var t=e.filter(function(n){return n.type===17}).map(function(n){return n.number});return t.length===6?t:null},g1e=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),n=t[0],a=t[1];t[2],t[3];var r=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[n,a,r,s,o,l]:null},y1e={matrix:p1e,matrix3d:g1e},TU={type:16,number:50,flags:Lg},_1e=[TU,TU],w1e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(fs);return n.length!==2?_1e:[n[0],n[1]]}},b1e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},s0;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(s0||(s0={}));var x1e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return s0.BREAK_ALL;case"keep-all":return s0.KEEP_ALL;case"normal":default:return s0.NORMAL}}},C1e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(xh(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},GO={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},S1e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return xh(t)?t.number:1}},E1e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},k1e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(sr).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},B1e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],a=[];return t.forEach(function(r){switch(r.type){case 20:case 0:n.push(r.value);break;case 17:n.push(r.number.toString());break;case 4:a.push(n.join(" ")),n.length=0;break}}),n.length&&a.push(n.join(" ")),a.map(function(r){return r.indexOf(" ")===-1?r:"'"+r+"'"})}},T1e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},I1e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(xh(t))return t.number;if(sr(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},F1e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(sr).map(function(n){return n.value})}},P1e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ss=function(e,t){return(e&t)!==0},D1e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t}},U1e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;for(var a=[],r=t.filter(kO),s=0;s<r.length;s++){var o=r[s],l=r[s+1];if(o.type===20){var c=l&&xh(l)?l.number:1;a.push({counter:o.value,increment:c})}}return a}},R1e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var n=[],a=t.filter(kO),r=0;r<a.length;r++){var s=a[r],o=a[r+1];if(sr(s)&&s.value!=="none"){var l=o&&xh(o)?o.number:0;n.push({counter:s.value,reset:l})}}return n}},N1e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Mg).map(function(n){return GO.parse(e,n)})}},V1e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;var a=[],r=t.filter(uge);if(r.length%2!==0)return null;for(var s=0;s<r.length;s+=2){var o=r[s].value,l=r[s+1].value;a.push({open:o,close:l})}return a}},IU=function(e,t,n){if(!e)return"";var a=e[Math.min(t,e.length-1)];return a?n?a.open:a.close:""},L1e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&xE(t[0],"none")?[]:Ku(t).map(function(n){for(var a={color:255,offsetX:to,offsetY:to,blur:to,spread:to,inset:!1},r=0,s=0;s<n.length;s++){var o=n[s];xE(o,"inset")?a.inset=!0:nf(o)?(r===0?a.offsetX=o:r===1?a.offsetY=o:r===2?a.blur=o:a.spread=o,r++):a.color=Od.parse(e,o)}return a})}},M1e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],a=[];return t.filter(sr).forEach(function(r){switch(r.value){case"stroke":a.push(1);break;case"fill":a.push(0);break;case"markers":a.push(2);break}}),n.forEach(function(r){a.indexOf(r)===-1&&a.push(r)}),a}},O1e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},H1e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Mg(t)?t.number:0}},$1e=(function(){function e(t,n){var a,r;this.animationDuration=pn(t,N1e,n.animationDuration),this.backgroundClip=pn(t,fge,n.backgroundClip),this.backgroundColor=pn(t,Age,n.backgroundColor),this.backgroundImage=pn(t,xge,n.backgroundImage),this.backgroundOrigin=pn(t,Cge,n.backgroundOrigin),this.backgroundPosition=pn(t,Sge,n.backgroundPosition),this.backgroundRepeat=pn(t,Ege,n.backgroundRepeat),this.backgroundSize=pn(t,Bge,n.backgroundSize),this.borderTopColor=pn(t,Ige,n.borderTopColor),this.borderRightColor=pn(t,Fge,n.borderRightColor),this.borderBottomColor=pn(t,Pge,n.borderBottomColor),this.borderLeftColor=pn(t,Dge,n.borderLeftColor),this.borderTopLeftRadius=pn(t,Uge,n.borderTopLeftRadius),this.borderTopRightRadius=pn(t,Rge,n.borderTopRightRadius),this.borderBottomRightRadius=pn(t,Nge,n.borderBottomRightRadius),this.borderBottomLeftRadius=pn(t,Vge,n.borderBottomLeftRadius),this.borderTopStyle=pn(t,Lge,n.borderTopStyle),this.borderRightStyle=pn(t,Mge,n.borderRightStyle),this.borderBottomStyle=pn(t,Oge,n.borderBottomStyle),this.borderLeftStyle=pn(t,Hge,n.borderLeftStyle),this.borderTopWidth=pn(t,$ge,n.borderTopWidth),this.borderRightWidth=pn(t,Qge,n.borderRightWidth),this.borderBottomWidth=pn(t,Gge,n.borderBottomWidth),this.borderLeftWidth=pn(t,zge,n.borderLeftWidth),this.boxShadow=pn(t,L1e,n.boxShadow),this.color=pn(t,Wge,n.color),this.direction=pn(t,Kge,n.direction),this.display=pn(t,jge,n.display),this.float=pn(t,Yge,n.cssFloat),this.fontFamily=pn(t,B1e,n.fontFamily),this.fontSize=pn(t,T1e,n.fontSize),this.fontStyle=pn(t,P1e,n.fontStyle),this.fontVariant=pn(t,F1e,n.fontVariant),this.fontWeight=pn(t,I1e,n.fontWeight),this.letterSpacing=pn(t,Xge,n.letterSpacing),this.lineBreak=pn(t,Jge,n.lineBreak),this.lineHeight=pn(t,Zge,n.lineHeight),this.listStyleImage=pn(t,e1e,n.listStyleImage),this.listStylePosition=pn(t,t1e,n.listStylePosition),this.listStyleType=pn(t,CE,n.listStyleType),this.marginTop=pn(t,n1e,n.marginTop),this.marginRight=pn(t,a1e,n.marginRight),this.marginBottom=pn(t,r1e,n.marginBottom),this.marginLeft=pn(t,s1e,n.marginLeft),this.opacity=pn(t,S1e,n.opacity);var s=pn(t,o1e,n.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=pn(t,i1e,n.overflowWrap),this.paddingTop=pn(t,l1e,n.paddingTop),this.paddingRight=pn(t,u1e,n.paddingRight),this.paddingBottom=pn(t,c1e,n.paddingBottom),this.paddingLeft=pn(t,d1e,n.paddingLeft),this.paintOrder=pn(t,M1e,n.paintOrder),this.position=pn(t,A1e,n.position),this.textAlign=pn(t,f1e,n.textAlign),this.textDecorationColor=pn(t,E1e,(a=n.textDecorationColor)!==null&&a!==void 0?a:n.color),this.textDecorationLine=pn(t,k1e,(r=n.textDecorationLine)!==null&&r!==void 0?r:n.textDecoration),this.textShadow=pn(t,m1e,n.textShadow),this.textTransform=pn(t,v1e,n.textTransform),this.transform=pn(t,h1e,n.transform),this.transformOrigin=pn(t,w1e,n.transformOrigin),this.visibility=pn(t,b1e,n.visibility),this.webkitTextStrokeColor=pn(t,O1e,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=pn(t,H1e,n.webkitTextStrokeWidth),this.wordBreak=pn(t,x1e,n.wordBreak),this.zIndex=pn(t,C1e,n.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Hd(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Ss(this.display,4)||Ss(this.display,33554432)||Ss(this.display,268435456)||Ss(this.display,536870912)||Ss(this.display,67108864)||Ss(this.display,134217728)},e})(),Q1e=(function(){function e(t,n){this.content=pn(t,D1e,n.content),this.quotes=pn(t,V1e,n.quotes)}return e})(),FU=(function(){function e(t,n){this.counterIncrement=pn(t,U1e,n.counterIncrement),this.counterReset=pn(t,R1e,n.counterReset)}return e})(),pn=function(e,t,n){var a=new SO,r=n!==null&&typeof n<"u"?n.toString():t.initialValue;a.write(r);var s=new EO(a.read());switch(t.type){case 2:var o=s.parseComponentValue();return t.parse(e,sr(o)?o.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return Rw.parse(e,s.parseComponentValue());case"color":return Od.parse(e,s.parseComponentValue());case"image":return gT.parse(e,s.parseComponentValue());case"length":var l=s.parseComponentValue();return nf(l)?l:to;case"length-percentage":var c=s.parseComponentValue();return fs(c)?c:to;case"time":return GO.parse(e,s.parseComponentValue())}break}},G1e="data-html2canvas-debug",z1e=function(e){var t=e.getAttribute(G1e);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},SE=function(e,t){var n=z1e(e);return n===1||t===n},ju=(function(){function e(t,n){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,SE(n,3))debugger;this.styles=new $1e(t,window.getComputedStyle(n,null)),BE(n)&&(this.styles.animationDuration.some(function(a){return a>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Dw(this.context,n),SE(n,4)&&(this.flags|=16)}return e})(),W1e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",PU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ey=0;Ey<PU.length;Ey++)Vp[PU.charCodeAt(Ey)]=Ey;var K1e=function(e){var t=e.length*.75,n=e.length,a,r=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var f=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(f)?f:new Uint8Array(f);for(a=0;a<n;a+=4)s=Vp[e.charCodeAt(a)],o=Vp[e.charCodeAt(a+1)],l=Vp[e.charCodeAt(a+2)],c=Vp[e.charCodeAt(a+3)],d[r++]=s<<2|o>>4,d[r++]=(o&15)<<4|l>>2,d[r++]=(l&3)<<6|c&63;return f},j1e=function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n.push(e[a+1]<<8|e[a]);return n},q1e=function(e){for(var t=e.length,n=[],a=0;a<t;a+=4)n.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return n},uA=5,yT=11,yC=2,Y1e=yT-uA,zO=65536>>uA,X1e=1<<uA,_C=X1e-1,J1e=1024>>uA,Z1e=zO+J1e,eye=Z1e,tye=32,nye=eye+tye,aye=65536>>yT,rye=1<<Y1e,sye=rye-1,DU=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},oye=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},iye=function(e,t){var n=K1e(e),a=Array.isArray(n)?q1e(n):new Uint32Array(n),r=Array.isArray(n)?j1e(n):new Uint16Array(n),s=24,o=DU(r,s/2,a[4]/2),l=a[5]===2?DU(r,(s+a[4])/2):oye(a,Math.ceil((s+a[4])/4));return new lye(a[0],a[1],a[2],a[3],o,l)},lye=(function(){function e(t,n,a,r,s,o){this.initialValue=t,this.errorValue=n,this.highStart=a,this.highValueIndex=r,this.index=s,this.data=o}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>uA],n=(n<<yC)+(t&_C),this.data[n];if(t<=65535)return n=this.index[zO+(t-55296>>uA)],n=(n<<yC)+(t&_C),this.data[n];if(t<this.highStart)return n=nye-aye+(t>>yT),n=this.index[n],n+=t>>uA&sye,n=this.index[n],n=(n<<yC)+(t&_C),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),UU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ky=0;ky<UU.length;ky++)uye[UU.charCodeAt(ky)]=ky;var cye=1,wC=2,bC=3,RU=4,NU=5,dye=7,VU=8,xC=9,CC=10,LU=11,MU=12,OU=13,HU=14,SC=15,fye=function(e){for(var t=[],n=0,a=e.length;n<a;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<a){var s=e.charCodeAt(n++);(s&64512)===56320?t.push(((r&1023)<<10)+(s&1023)+65536):(t.push(r),n--)}else t.push(r)}return t},Aye=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var a=[],r=-1,s="";++r<n;){var o=e[r];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(r+1===n||a.length>16384)&&(s+=String.fromCharCode.apply(String,a),a.length=0)}return s},mye=iye(W1e),Zi="",EC="",vye=function(e){return mye.get(e)},hye=function(e,t,n){var a=n-2,r=t[a],s=t[n-1],o=t[n];if(s===wC&&o===bC)return Zi;if(s===wC||s===bC||s===RU||o===wC||o===bC||o===RU)return EC;if(s===VU&&[VU,xC,LU,MU].indexOf(o)!==-1||(s===LU||s===xC)&&(o===xC||o===CC)||(s===MU||s===CC)&&o===CC||o===OU||o===NU||o===dye||s===cye)return Zi;if(s===OU&&o===HU){for(;r===NU;)r=t[--a];if(r===HU)return Zi}if(s===SC&&o===SC){for(var l=0;r===SC;)l++,r=t[--a];if(l%2===0)return Zi}return EC},pye=function(e){var t=fye(e),n=t.length,a=0,r=0,s=t.map(vye);return{next:function(){if(a>=n)return{done:!0,value:null};for(var o=Zi;a<n&&(o=hye(t,s,++a))===Zi;);if(o!==Zi||a===n){var l=Aye.apply(null,t.slice(r,a));return r=a,{value:l,done:!1}}return{done:!0,value:null}}}},gye=function(e){for(var t=pye(e),n=[],a;!(a=t.next()).done;)a.value&&n.push(a.value.slice());return n},yye=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var a=e.createElement("boundtest");a.style.height=t+"px",a.style.display="block",e.body.appendChild(a),n.selectNode(a);var r=n.getBoundingClientRect(),s=Math.round(r.height);if(e.body.removeChild(a),s===t)return!0}}return!1},_ye=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var a=t.firstChild,r=Uw(a.data).map(function(c){return Xr(c)}),s=0,o={},l=r.every(function(c,f){n.setStart(a,s),n.setEnd(a,s+c.length);var d=n.getBoundingClientRect();s+=c.length;var A=d.x>o.x||d.y>o.y;return o=d,f===0?!0:A});return e.body.removeChild(t),l},wye=function(){return typeof new Image().crossOrigin<"u"},bye=function(){return typeof new XMLHttpRequest().responseType=="string"},xye=function(e){var t=new Image,n=e.createElement("canvas"),a=n.getContext("2d");if(!a)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(t,0,0),n.toDataURL()}catch{return!1}return!0},$U=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},Cye=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var a=t.getContext("2d");if(!a)return Promise.reject(!1);a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,n,n);var r=new Image,s=t.toDataURL();r.src=s;var o=EE(n,n,0,0,r);return a.fillStyle="red",a.fillRect(0,0,n,n),QU(o).then(function(l){a.drawImage(l,0,0);var c=a.getImageData(0,0,n,n).data;a.fillStyle="red",a.fillRect(0,0,n,n);var f=e.createElement("div");return f.style.backgroundImage="url("+s+")",f.style.height=n+"px",$U(c)?QU(EE(n,n,0,0,f)):Promise.reject(!1)}).then(function(l){return a.drawImage(l,0,0),$U(a.getImageData(0,0,n,n).data)}).catch(function(){return!1})},EE=function(e,t,n,a,r){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",a.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(r),o},QU=function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){return t(a)},a.onerror=n,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},qs={get SUPPORT_RANGE_BOUNDS(){var e=yye(document);return Object.defineProperty(qs,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=qs.SUPPORT_RANGE_BOUNDS&&_ye(document);return Object.defineProperty(qs,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=xye(document);return Object.defineProperty(qs,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?Cye(document):Promise.resolve(!1);return Object.defineProperty(qs,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=wye();return Object.defineProperty(qs,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=bye();return Object.defineProperty(qs,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(qs,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(qs,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},o0=(function(){function e(t,n){this.text=t,this.bounds=n}return e})(),Sye=function(e,t,n,a){var r=Bye(t,n),s=[],o=0;return r.forEach(function(l){if(n.textDecorationLine.length||l.trim().length>0)if(qs.SUPPORT_RANGE_BOUNDS){var c=GU(a,o,l.length).getClientRects();if(c.length>1){var f=_T(l),d=0;f.forEach(function(m){s.push(new o0(m,Qc.fromDOMRectList(e,GU(a,d+o,m.length).getClientRects()))),d+=m.length})}else s.push(new o0(l,Qc.fromDOMRectList(e,c)))}else{var A=a.splitText(l.length);s.push(new o0(l,Eye(e,a))),a=A}else qs.SUPPORT_RANGE_BOUNDS||(a=a.splitText(l.length));o+=l.length}),s},Eye=function(e,t){var n=t.ownerDocument;if(n){var a=n.createElement("html2canvaswrapper");a.appendChild(t.cloneNode(!0));var r=t.parentNode;if(r){r.replaceChild(a,t);var s=Dw(e,a);return a.firstChild&&r.replaceChild(a.firstChild,a),s}}return Qc.EMPTY},GU=function(e,t,n){var a=e.ownerDocument;if(!a)throw new Error("Node has no owner document");var r=a.createRange();return r.setStart(e,t),r.setEnd(e,t+n),r},_T=function(e){if(qs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(n){return n.segment})}return gye(e)},kye=function(e,t){if(qs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(a){return a.segment})}return Iye(e,t)},Bye=function(e,t){return t.letterSpacing!==0?_T(e):kye(e,t)},Tye=[32,160,4961,65792,65793,4153,4241],Iye=function(e,t){for(var n=a0e(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),a=[],r,s=function(){if(r.value){var o=r.value.slice(),l=Uw(o),c="";l.forEach(function(f){Tye.indexOf(f)===-1?c+=Xr(f):(c.length&&a.push(c),a.push(Xr(f)),c="")}),c.length&&a.push(c)}};!(r=n.next()).done;)s();return a},Fye=(function(){function e(t,n,a){this.text=Pye(n.data,a.textTransform),this.textBounds=Sye(t,this.text,a,n)}return e})(),Pye=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Dye,Uye);case 2:return e.toUpperCase();default:return e}},Dye=/(^|\s|:|-|\(|\))([a-z])/g,Uye=function(e,t,n){return e.length>0?t+n.toUpperCase():e},WO=(function(e){ou(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.src=a.currentSrc||a.src,r.intrinsicWidth=a.naturalWidth,r.intrinsicHeight=a.naturalHeight,r.context.cache.addImage(r.src),r}return t})(ju),KO=(function(e){ou(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.canvas=a,r.intrinsicWidth=a.width,r.intrinsicHeight=a.height,r}return t})(ju),jO=(function(e){ou(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=new XMLSerializer,o=Dw(n,a);return a.setAttribute("width",o.width+"px"),a.setAttribute("height",o.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(a)),r.intrinsicWidth=a.width.baseVal.value,r.intrinsicHeight=a.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t})(ju),qO=(function(e){ou(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.value=a.value,r}return t})(ju),kE=(function(e){ou(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.start=a.start,r.reversed=typeof a.reversed=="boolean"&&a.reversed===!0,r}return t})(ju),Rye=[{type:15,flags:0,unit:"px",number:3}],Nye=[{type:16,flags:0,number:50}],Vye=function(e){return e.width>e.height?new Qc(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Qc(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Lye=function(e){var t=e.type===Mye?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},i2="checkbox",l2="radio",Mye="password",zU=707406591,wT=(function(e){ou(t,e);function t(n,a){var r=e.call(this,n,a)||this;switch(r.type=a.type.toLowerCase(),r.checked=a.checked,r.value=Lye(a),(r.type===i2||r.type===l2)&&(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=Vye(r.bounds)),r.type){case i2:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Rye;break;case l2:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Nye;break}return r}return t})(ju),YO=(function(e){ou(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=a.options[a.selectedIndex||0];return r.value=s&&s.text||"",r}return t})(ju),XO=(function(e){ou(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.value=a.value,r}return t})(ju),JO=(function(e){ou(t,e);function t(n,a){var r=e.call(this,n,a)||this;r.src=a.src,r.width=parseInt(a.width,10)||0,r.height=parseInt(a.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.documentElement){r.tree=eH(n,a.contentWindow.document.documentElement);var s=a.contentWindow.document.documentElement?r0(n,getComputedStyle(a.contentWindow.document.documentElement).backgroundColor):Pc.TRANSPARENT,o=a.contentWindow.document.body?r0(n,getComputedStyle(a.contentWindow.document.body).backgroundColor):Pc.TRANSPARENT;r.backgroundColor=Hd(s)?Hd(o)?r.styles.backgroundColor:o:s}}catch{}return r}return t})(ju),Oye=["OL","UL","MENU"],f_=function(e,t,n,a){for(var r=t.firstChild,s=void 0;r;r=s)if(s=r.nextSibling,tH(r)&&r.data.trim().length>0)n.textNodes.push(new Fye(e,r,n.styles));else if(sv(r))if(sH(r)&&r.assignedNodes)r.assignedNodes().forEach(function(l){return f_(e,l,n,a)});else{var o=ZO(e,r);o.styles.isVisible()&&(Hye(r,o,a)?o.flags|=4:$ye(o.styles)&&(o.flags|=2),Oye.indexOf(r.tagName)!==-1&&(o.flags|=8),n.elements.push(o),r.slot,r.shadowRoot?f_(e,r.shadowRoot,o,a):!u2(r)&&!nH(r)&&!c2(r)&&f_(e,r,o,a))}},ZO=function(e,t){return TE(t)?new WO(e,t):aH(t)?new KO(e,t):nH(t)?new jO(e,t):Qye(t)?new qO(e,t):Gye(t)?new kE(e,t):zye(t)?new wT(e,t):c2(t)?new YO(e,t):u2(t)?new XO(e,t):rH(t)?new JO(e,t):new ju(e,t)},eH=function(e,t){var n=ZO(e,t);return n.flags|=4,f_(e,t,n,n),n},Hye=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||bT(e)&&n.styles.isTransparent()},$ye=function(e){return e.isPositioned()||e.isFloating()},tH=function(e){return e.nodeType===Node.TEXT_NODE},sv=function(e){return e.nodeType===Node.ELEMENT_NODE},BE=function(e){return sv(e)&&typeof e.style<"u"&&!A_(e)},A_=function(e){return typeof e.className=="object"},Qye=function(e){return e.tagName==="LI"},Gye=function(e){return e.tagName==="OL"},zye=function(e){return e.tagName==="INPUT"},Wye=function(e){return e.tagName==="HTML"},nH=function(e){return e.tagName==="svg"},bT=function(e){return e.tagName==="BODY"},aH=function(e){return e.tagName==="CANVAS"},WU=function(e){return e.tagName==="VIDEO"},TE=function(e){return e.tagName==="IMG"},rH=function(e){return e.tagName==="IFRAME"},KU=function(e){return e.tagName==="STYLE"},Kye=function(e){return e.tagName==="SCRIPT"},u2=function(e){return e.tagName==="TEXTAREA"},c2=function(e){return e.tagName==="SELECT"},sH=function(e){return e.tagName==="SLOT"},jU=function(e){return e.tagName.indexOf("-")>0},jye=(function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var n=this.counters[t];return n&&n.length?n[n.length-1]:1},e.prototype.getCounterValues=function(t){var n=this.counters[t];return n||[]},e.prototype.pop=function(t){var n=this;t.forEach(function(a){return n.counters[a].pop()})},e.prototype.parse=function(t){var n=this,a=t.counterIncrement,r=t.counterReset,s=!0;a!==null&&a.forEach(function(l){var c=n.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&r.forEach(function(l){var c=n.counters[l.counter];o.push(l.counter),c||(c=n.counters[l.counter]=[]),c.push(l.reset)}),o},e})(),qU={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},YU={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},qye={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Yye={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Gm=function(e,t,n,a,r,s){return e<t||e>n?K0(e,r,s.length>0):a.integers.reduce(function(o,l,c){for(;e>=l;)e-=l,o+=a.values[c];return o},"")+s},oH=function(e,t,n,a){var r="";do n||e--,r=a(e)+r,e/=t;while(e*t>=t);return r},qr=function(e,t,n,a,r){var s=n-t+1;return(e<0?"-":"")+(oH(Math.abs(e),s,a,function(o){return Xr(Math.floor(o%s)+t)})+r)},Nf=function(e,t,n){n===void 0&&(n=". ");var a=t.length;return oH(Math.abs(e),a,!1,function(r){return t[Math.floor(r%a)]})+n},ev=1,gd=2,yd=4,Lp=8,gc=function(e,t,n,a,r,s){if(e<-9999||e>9999)return K0(e,4,r.length>0);var o=Math.abs(e),l=r;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var f=o%10;f===0&&Ss(s,ev)&&l!==""?l=t[f]+l:f>1||f===1&&c===0||f===1&&c===1&&Ss(s,gd)||f===1&&c===1&&Ss(s,yd)&&e>100||f===1&&c>1&&Ss(s,Lp)?l=t[f]+(c>0?n[c-1]:"")+l:f===1&&c>0&&(l=n[c-1]+l),o=Math.floor(o/10)}return(e<0?a:"")+l},XU="",JU="",ZU="",kC="",K0=function(e,t,n){var a=n?". ":"",r=n?"":"",s=n?", ":"",o=n?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=qr(e,48,57,!0,a);return l.length<4?"0"+l:l;case 4:return Nf(e,"",r);case 6:return Gm(e,1,3999,qU,3,a).toLowerCase();case 7:return Gm(e,1,3999,qU,3,a);case 8:return qr(e,945,969,!1,a);case 9:return qr(e,97,122,!1,a);case 10:return qr(e,65,90,!1,a);case 11:return qr(e,1632,1641,!0,a);case 12:case 49:return Gm(e,1,9999,YU,3,a);case 35:return Gm(e,1,9999,YU,3,a).toLowerCase();case 13:return qr(e,2534,2543,!0,a);case 14:case 30:return qr(e,6112,6121,!0,a);case 15:return Nf(e,"",r);case 16:return Nf(e,"",r);case 17:case 48:return gc(e,"",XU,"",r,gd|yd|Lp);case 47:return gc(e,"",JU,"",r,ev|gd|yd|Lp);case 42:return gc(e,"",XU,"",r,gd|yd|Lp);case 41:return gc(e,"",JU,"",r,ev|gd|yd|Lp);case 26:return gc(e,"","",ZU,r,0);case 25:return gc(e,"","",ZU,r,ev|gd|yd);case 31:return gc(e,"","",kC,s,ev|gd|yd);case 33:return gc(e,"","",kC,s,0);case 32:return gc(e,"","",kC,s,ev|gd|yd);case 18:return qr(e,2406,2415,!0,a);case 20:return Gm(e,1,19999,Yye,3,a);case 21:return qr(e,2790,2799,!0,a);case 22:return qr(e,2662,2671,!0,a);case 22:return Gm(e,1,10999,qye,3,a);case 23:return Nf(e,"");case 24:return Nf(e,"");case 27:return qr(e,3302,3311,!0,a);case 28:return Nf(e,"",r);case 29:return Nf(e,"",r);case 34:return qr(e,3792,3801,!0,a);case 37:return qr(e,6160,6169,!0,a);case 38:return qr(e,4160,4169,!0,a);case 39:return qr(e,2918,2927,!0,a);case 40:return qr(e,1776,1785,!0,a);case 43:return qr(e,3046,3055,!0,a);case 44:return qr(e,3174,3183,!0,a);case 45:return qr(e,3664,3673,!0,a);case 46:return qr(e,3872,3881,!0,a);case 3:default:return qr(e,48,57,!0,a)}},iH="data-html2canvas-ignore",eR=(function(){function e(t,n,a){if(this.context=t,this.options=a,this.scrolledElements=[],this.referenceElement=n,this.counters=new jye,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,n){var a=this,r=Xye(t,n);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=r.contentWindow,c=l.document,f=e_e(r).then(function(){return Mo(a,void 0,void 0,function(){var d,A;return fo(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(r_e),l&&(l.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==n.top||l.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-n.left,l.scrollY-n.top,0,0))),d=this.options.onclone,A=this.clonedReferenceElement,typeof A>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Zye(c)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,A)}).then(function(){return r})]:[2,r]}})})});return c.open(),c.write(n_e(document.doctype)+"<html></html>"),a_e(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),f},e.prototype.createElementClone=function(t){if(SE(t,2))debugger;if(aH(t))return this.createCanvasClone(t);if(WU(t))return this.createVideoClone(t);if(KU(t))return this.createStyleClone(t);var n=t.cloneNode(!1);return TE(n)&&(TE(t)&&t.currentSrc&&t.currentSrc!==t.src&&(n.src=t.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),jU(n)?this.createCustomElementClone(n):n},e.prototype.createCustomElementClone=function(t){var n=document.createElement("html2canvascustomelement");return BC(t.style,n),n},e.prototype.createStyleClone=function(t){try{var n=t.sheet;if(n&&n.cssRules){var a=[].slice.call(n.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),r=t.cloneNode(!1);return r.textContent=a,r}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var n;if(this.options.inlineImages&&t.ownerDocument){var a=t.ownerDocument.createElement("img");try{return a.src=t.toDataURL(),a}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var r=t.cloneNode(!1);try{r.width=t.width,r.height=t.height;var s=t.getContext("2d"),o=r.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var l=(n=t.getContext("webgl2"))!==null&&n!==void 0?n:t.getContext("webgl");if(l){var c=l.getContextAttributes();c?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return r}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return r},e.prototype.createVideoClone=function(t){var n=t.ownerDocument.createElement("canvas");n.width=t.offsetWidth,n.height=t.offsetHeight;var a=n.getContext("2d");try{return a&&(a.drawImage(t,0,0,n.width,n.height),this.options.allowTaint||a.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var r=t.ownerDocument.createElement("canvas");return r.width=t.offsetWidth,r.height=t.offsetHeight,r},e.prototype.appendChildNode=function(t,n,a){(!sv(n)||!Kye(n)&&!n.hasAttribute(iH)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!sv(n)||!KU(n))&&t.appendChild(this.cloneNode(n,a))},e.prototype.cloneChildNodes=function(t,n,a){for(var r=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(sv(s)&&sH(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return r.appendChildNode(n,l,a)})}else this.appendChildNode(n,s,a)},e.prototype.cloneNode=function(t,n){if(tH(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var a=t.ownerDocument.defaultView;if(a&&sv(t)&&(BE(t)||A_(t))){var r=this.createElementClone(t);r.style.transitionProperty="none";var s=a.getComputedStyle(t),o=a.getComputedStyle(t,":before"),l=a.getComputedStyle(t,":after");this.referenceElement===t&&BE(r)&&(this.clonedReferenceElement=r),bT(r)&&i_e(r);var c=this.counters.parse(new FU(this.context,s)),f=this.resolvePseudoContent(t,r,o,i0.BEFORE);jU(t)&&(n=!0),WU(t)||this.cloneChildNodes(t,r,n),f&&r.insertBefore(f,r.firstChild);var d=this.resolvePseudoContent(t,r,l,i0.AFTER);return d&&r.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||A_(t))&&!rH(t)||n)&&BC(s,r),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([r,t.scrollLeft,t.scrollTop]),(u2(t)||c2(t))&&(u2(r)||c2(r))&&(r.value=t.value),r}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,n,a,r){var s=this;if(a){var o=a.content,l=n.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||a.display==="none")){this.counters.parse(new FU(this.context,a));var c=new Q1e(this.context,a),f=l.createElement("html2canvaspseudoelement");BC(a,f),c.content.forEach(function(A){if(A.type===0)f.appendChild(l.createTextNode(A.value));else if(A.type===22){var m=l.createElement("img");m.src=A.value,m.style.opacity="1",f.appendChild(m)}else if(A.type===18){if(A.name==="attr"){var p=A.values.filter(sr);p.length&&f.appendChild(l.createTextNode(t.getAttribute(p[0].value)||""))}else if(A.name==="counter"){var h=A.values.filter(Yv),y=h[0],g=h[1];if(y&&sr(y)){var _=s.counters.getCounterValue(y.value),b=g&&sr(g)?CE.parse(s.context,g.value):3;f.appendChild(l.createTextNode(K0(_,b,!1)))}}else if(A.name==="counters"){var S=A.values.filter(Yv),y=S[0],B=S[1],g=S[2];if(y&&sr(y)){var F=s.counters.getCounterValues(y.value),T=g&&sr(g)?CE.parse(s.context,g.value):3,E=B&&B.type===0?B.value:"",x=F.map(function(U){return K0(U,T,!1)}).join(E);f.appendChild(l.createTextNode(x))}}}else if(A.type===20)switch(A.value){case"open-quote":f.appendChild(l.createTextNode(IU(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":f.appendChild(l.createTextNode(IU(c.quotes,--s.quoteDepth,!1)));break;default:f.appendChild(l.createTextNode(A.value))}}),f.className=IE+" "+FE;var d=r===i0.BEFORE?" "+IE:" "+FE;return A_(n)?n.className.baseValue+=d:n.className+=d,f}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e})(),i0;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(i0||(i0={}));var Xye=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(iH,"true"),e.body.appendChild(n),n},Jye=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},Zye=function(e){return Promise.all([].slice.call(e.images,0).map(Jye))},e_e=function(e){return new Promise(function(t,n){var a=e.contentWindow;if(!a)return n("No window assigned for iframe");var r=a.document;a.onload=e.onload=function(){a.onload=e.onload=null;var s=setInterval(function(){r.body.childNodes.length>0&&r.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},t_e=["all","d","content"],BC=function(e,t){for(var n=e.length-1;n>=0;n--){var a=e.item(n);t_e.indexOf(a)===-1&&t.style.setProperty(a,e.getPropertyValue(a))}return t},n_e=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},a_e=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},r_e=function(e){var t=e[0],n=e[1],a=e[2];t.scrollLeft=n,t.scrollTop=a},s_e=":before",o_e=":after",IE="___html2canvas___pseudoelement_before",FE="___html2canvas___pseudoelement_after",tR=`{
    content: "" !important;
    display: none !important;
}`,i_e=function(e){l_e(e,"."+IE+s_e+tR+`
         .`+FE+o_e+tR)},l_e=function(e,t){var n=e.ownerDocument;if(n){var a=n.createElement("style");a.textContent=t,e.appendChild(a)}},lH=(function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e})(),u_e=(function(){function e(t,n){this.context=t,this._options=n,this._cache={}}return e.prototype.addImage=function(t){var n=Promise.resolve();return this.has(t)||(IC(t)||A_e(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),n},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Mo(this,void 0,void 0,function(){var n,a,r,s,o=this;return fo(this,function(l){switch(l.label){case 0:return n=lH.isSameOrigin(t),a=!TC(t)&&this._options.useCORS===!0&&qs.SUPPORT_CORS_IMAGES&&!n,r=!TC(t)&&!n&&!IC(t)&&typeof this._options.proxy=="string"&&qs.SUPPORT_CORS_XHR&&!a,!n&&this._options.allowTaint===!1&&!TC(t)&&!IC(t)&&!r&&!a?[2]:(s=t,r?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,f){var d=new Image;d.onload=function(){return c(d)},d.onerror=f,(m_e(s)||a)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return f("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var n=this,a=this._options.proxy;if(!a)throw new Error("No proxy defined");var r=t.substring(0,256);return new Promise(function(s,o){var l=qs.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var A=new FileReader;A.addEventListener("load",function(){return s(A.result)},!1),A.addEventListener("error",function(m){return o(m)},!1),A.readAsDataURL(c.response)}else o("Failed to proxy resource "+r+" with status code "+c.status)},c.onerror=o;var f=a.indexOf("?")>-1?"&":"?";if(c.open("GET",""+a+f+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),n._options.imageTimeout){var d=n._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+r)}}c.send()})},e})(),c_e=/^data:image\/svg\+xml/i,d_e=/^data:image\/.*;base64,/i,f_e=/^data:image\/.*/i,A_e=function(e){return qs.SUPPORT_SVG_DRAWING||!v_e(e)},TC=function(e){return f_e.test(e)},m_e=function(e){return d_e.test(e)},IC=function(e){return e.substr(0,4)==="blob"},v_e=function(e){return e.substr(-3).toLowerCase()==="svg"||c_e.test(e)},mn=(function(){function e(t,n){this.type=0,this.x=t,this.y=n}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e})(),zm=function(e,t,n){return new mn(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},By=(function(){function e(t,n,a,r){this.type=1,this.start=t,this.startControl=n,this.endControl=a,this.end=r}return e.prototype.subdivide=function(t,n){var a=zm(this.start,this.startControl,t),r=zm(this.startControl,this.endControl,t),s=zm(this.endControl,this.end,t),o=zm(a,r,t),l=zm(r,s,t),c=zm(o,l,t);return n?new e(this.start,a,o,c):new e(c,l,s,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e})(),tl=function(e){return e.type===1},h_e=(function(){function e(t){var n=t.styles,a=t.bounds,r=Np(n.borderTopLeftRadius,a.width,a.height),s=r[0],o=r[1],l=Np(n.borderTopRightRadius,a.width,a.height),c=l[0],f=l[1],d=Np(n.borderBottomRightRadius,a.width,a.height),A=d[0],m=d[1],p=Np(n.borderBottomLeftRadius,a.width,a.height),h=p[0],y=p[1],g=[];g.push((s+c)/a.width),g.push((h+A)/a.width),g.push((o+y)/a.height),g.push((f+m)/a.height);var _=Math.max.apply(Math,g);_>1&&(s/=_,o/=_,c/=_,f/=_,A/=_,m/=_,h/=_,y/=_);var b=a.width-c,S=a.height-m,B=a.width-A,F=a.height-y,T=n.borderTopWidth,E=n.borderRightWidth,x=n.borderBottomWidth,C=n.borderLeftWidth,D=pr(n.paddingTop,t.bounds.width),U=pr(n.paddingRight,t.bounds.width),L=pr(n.paddingBottom,t.bounds.width),H=pr(n.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?Pr(a.left+C/3,a.top+T/3,s-C/3,o-T/3,Ya.TOP_LEFT):new mn(a.left+C/3,a.top+T/3),this.topRightBorderDoubleOuterBox=s>0||o>0?Pr(a.left+b,a.top+T/3,c-E/3,f-T/3,Ya.TOP_RIGHT):new mn(a.left+a.width-E/3,a.top+T/3),this.bottomRightBorderDoubleOuterBox=A>0||m>0?Pr(a.left+B,a.top+S,A-E/3,m-x/3,Ya.BOTTOM_RIGHT):new mn(a.left+a.width-E/3,a.top+a.height-x/3),this.bottomLeftBorderDoubleOuterBox=h>0||y>0?Pr(a.left+C/3,a.top+F,h-C/3,y-x/3,Ya.BOTTOM_LEFT):new mn(a.left+C/3,a.top+a.height-x/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?Pr(a.left+C*2/3,a.top+T*2/3,s-C*2/3,o-T*2/3,Ya.TOP_LEFT):new mn(a.left+C*2/3,a.top+T*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?Pr(a.left+b,a.top+T*2/3,c-E*2/3,f-T*2/3,Ya.TOP_RIGHT):new mn(a.left+a.width-E*2/3,a.top+T*2/3),this.bottomRightBorderDoubleInnerBox=A>0||m>0?Pr(a.left+B,a.top+S,A-E*2/3,m-x*2/3,Ya.BOTTOM_RIGHT):new mn(a.left+a.width-E*2/3,a.top+a.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=h>0||y>0?Pr(a.left+C*2/3,a.top+F,h-C*2/3,y-x*2/3,Ya.BOTTOM_LEFT):new mn(a.left+C*2/3,a.top+a.height-x*2/3),this.topLeftBorderStroke=s>0||o>0?Pr(a.left+C/2,a.top+T/2,s-C/2,o-T/2,Ya.TOP_LEFT):new mn(a.left+C/2,a.top+T/2),this.topRightBorderStroke=s>0||o>0?Pr(a.left+b,a.top+T/2,c-E/2,f-T/2,Ya.TOP_RIGHT):new mn(a.left+a.width-E/2,a.top+T/2),this.bottomRightBorderStroke=A>0||m>0?Pr(a.left+B,a.top+S,A-E/2,m-x/2,Ya.BOTTOM_RIGHT):new mn(a.left+a.width-E/2,a.top+a.height-x/2),this.bottomLeftBorderStroke=h>0||y>0?Pr(a.left+C/2,a.top+F,h-C/2,y-x/2,Ya.BOTTOM_LEFT):new mn(a.left+C/2,a.top+a.height-x/2),this.topLeftBorderBox=s>0||o>0?Pr(a.left,a.top,s,o,Ya.TOP_LEFT):new mn(a.left,a.top),this.topRightBorderBox=c>0||f>0?Pr(a.left+b,a.top,c,f,Ya.TOP_RIGHT):new mn(a.left+a.width,a.top),this.bottomRightBorderBox=A>0||m>0?Pr(a.left+B,a.top+S,A,m,Ya.BOTTOM_RIGHT):new mn(a.left+a.width,a.top+a.height),this.bottomLeftBorderBox=h>0||y>0?Pr(a.left,a.top+F,h,y,Ya.BOTTOM_LEFT):new mn(a.left,a.top+a.height),this.topLeftPaddingBox=s>0||o>0?Pr(a.left+C,a.top+T,Math.max(0,s-C),Math.max(0,o-T),Ya.TOP_LEFT):new mn(a.left+C,a.top+T),this.topRightPaddingBox=c>0||f>0?Pr(a.left+Math.min(b,a.width-E),a.top+T,b>a.width+E?0:Math.max(0,c-E),Math.max(0,f-T),Ya.TOP_RIGHT):new mn(a.left+a.width-E,a.top+T),this.bottomRightPaddingBox=A>0||m>0?Pr(a.left+Math.min(B,a.width-C),a.top+Math.min(S,a.height-x),Math.max(0,A-E),Math.max(0,m-x),Ya.BOTTOM_RIGHT):new mn(a.left+a.width-E,a.top+a.height-x),this.bottomLeftPaddingBox=h>0||y>0?Pr(a.left+C,a.top+Math.min(F,a.height-x),Math.max(0,h-C),Math.max(0,y-x),Ya.BOTTOM_LEFT):new mn(a.left+C,a.top+a.height-x),this.topLeftContentBox=s>0||o>0?Pr(a.left+C+H,a.top+T+D,Math.max(0,s-(C+H)),Math.max(0,o-(T+D)),Ya.TOP_LEFT):new mn(a.left+C+H,a.top+T+D),this.topRightContentBox=c>0||f>0?Pr(a.left+Math.min(b,a.width+C+H),a.top+T+D,b>a.width+C+H?0:c-C+H,f-(T+D),Ya.TOP_RIGHT):new mn(a.left+a.width-(E+U),a.top+T+D),this.bottomRightContentBox=A>0||m>0?Pr(a.left+Math.min(B,a.width-(C+H)),a.top+Math.min(S,a.height+T+D),Math.max(0,A-(E+U)),m-(x+L),Ya.BOTTOM_RIGHT):new mn(a.left+a.width-(E+U),a.top+a.height-(x+L)),this.bottomLeftContentBox=h>0||y>0?Pr(a.left+C+H,a.top+F,Math.max(0,h-(C+H)),y-(x+L),Ya.BOTTOM_LEFT):new mn(a.left+C+H,a.top+a.height-(x+L))}return e})(),Ya;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ya||(Ya={}));var Pr=function(e,t,n,a,r){var s=4*((Math.sqrt(2)-1)/3),o=n*s,l=a*s,c=e+n,f=t+a;switch(r){case Ya.TOP_LEFT:return new By(new mn(e,f),new mn(e,f-l),new mn(c-o,t),new mn(c,t));case Ya.TOP_RIGHT:return new By(new mn(e,t),new mn(e+o,t),new mn(c,f-l),new mn(c,f));case Ya.BOTTOM_RIGHT:return new By(new mn(c,t),new mn(c,t+l),new mn(e+o,f),new mn(e,f));case Ya.BOTTOM_LEFT:default:return new By(new mn(c,f),new mn(c-o,f),new mn(e,t+l),new mn(e,t))}},d2=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},p_e=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},f2=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},g_e=(function(){function e(t,n,a){this.offsetX=t,this.offsetY=n,this.matrix=a,this.type=0,this.target=6}return e})(),Ty=(function(){function e(t,n){this.path=t,this.target=n,this.type=1}return e})(),y_e=(function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e})(),__e=function(e){return e.type===0},uH=function(e){return e.type===1},w_e=function(e){return e.type===2},nR=function(e,t){return e.length===t.length?e.some(function(n,a){return n===t[a]}):!1},b_e=function(e,t,n,a,r){return e.map(function(s,o){switch(o){case 0:return s.add(t,n);case 1:return s.add(t+a,n);case 2:return s.add(t+a,n+r);case 3:return s.add(t,n+r)}return s})},cH=(function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e})(),dH=(function(){function e(t,n){if(this.container=t,this.parent=n,this.effects=[],this.curves=new h_e(this.container),this.container.styles.opacity<1&&this.effects.push(new y_e(this.container.styles.opacity)),this.container.styles.transform!==null){var a=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new g_e(a,r,s))}if(this.container.styles.overflowX!==0){var o=d2(this.curves),l=f2(this.curves);nR(o,l)?this.effects.push(new Ty(o,6)):(this.effects.push(new Ty(o,2)),this.effects.push(new Ty(l,4)))}}return e.prototype.getEffects=function(t){for(var n=[2,3].indexOf(this.container.styles.position)===-1,a=this.parent,r=this.effects.slice(0);a;){var s=a.effects.filter(function(c){return!uH(c)});if(n||a.container.styles.position!==0||!a.parent){if(r.unshift.apply(r,s),n=[2,3].indexOf(a.container.styles.position)===-1,a.container.styles.overflowX!==0){var o=d2(a.curves),l=f2(a.curves);nR(o,l)||r.unshift(new Ty(l,6))}}else r.unshift.apply(r,s);a=a.parent}return r.filter(function(c){return Ss(c.target,t)})},e})(),PE=function(e,t,n,a){e.container.elements.forEach(function(r){var s=Ss(r.flags,4),o=Ss(r.flags,2),l=new dH(r,e);Ss(r.styles.display,2048)&&a.push(l);var c=Ss(r.flags,8)?[]:a;if(s||o){var f=s||r.styles.isPositioned()?n:t,d=new cH(l);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var A=r.styles.zIndex.order;if(A<0){var m=0;f.negativeZIndex.some(function(h,y){return A>h.element.container.styles.zIndex.order?(m=y,!1):m>0}),f.negativeZIndex.splice(m,0,d)}else if(A>0){var p=0;f.positiveZIndex.some(function(h,y){return A>=h.element.container.styles.zIndex.order?(p=y+1,!1):p>0}),f.positiveZIndex.splice(p,0,d)}else f.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else r.styles.isFloating()?f.nonPositionedFloats.push(d):f.nonPositionedInlineLevel.push(d);PE(l,d,s?d:n,c)}else r.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),PE(l,t,n,c);Ss(r.flags,8)&&fH(r,c)})},fH=function(e,t){for(var n=e instanceof kE?e.start:1,a=e instanceof kE?e.reversed:!1,r=0;r<t.length;r++){var s=t[r];s.container instanceof qO&&typeof s.container.value=="number"&&s.container.value!==0&&(n=s.container.value),s.listValue=K0(n,s.container.styles.listStyleType,!0),n+=a?-1:1}},x_e=function(e){var t=new dH(e,null),n=new cH(t),a=[];return PE(t,n,n,a),fH(t.container,a),n},aR=function(e,t){switch(t){case 0:return sl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return sl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return sl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return sl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},C_e=function(e,t){switch(t){case 0:return sl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return sl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return sl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return sl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},S_e=function(e,t){switch(t){case 0:return sl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return sl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return sl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return sl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},E_e=function(e,t){switch(t){case 0:return Iy(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Iy(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Iy(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return Iy(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Iy=function(e,t){var n=[];return tl(e)?n.push(e.subdivide(.5,!1)):n.push(e),tl(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},sl=function(e,t,n,a){var r=[];return tl(e)?r.push(e.subdivide(.5,!1)):r.push(e),tl(n)?r.push(n.subdivide(.5,!0)):r.push(n),tl(a)?r.push(a.subdivide(.5,!0).reverse()):r.push(a),tl(t)?r.push(t.subdivide(.5,!1).reverse()):r.push(t),r},AH=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},A2=function(e){var t=e.styles,n=e.bounds,a=pr(t.paddingLeft,n.width),r=pr(t.paddingRight,n.width),s=pr(t.paddingTop,n.width),o=pr(t.paddingBottom,n.width);return n.add(a+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+a+r),-(t.borderTopWidth+t.borderBottomWidth+s+o))},k_e=function(e,t){return e===0?t.bounds:e===2?A2(t):AH(t)},B_e=function(e,t){return e===0?t.bounds:e===2?A2(t):AH(t)},FC=function(e,t,n){var a=k_e(tv(e.styles.backgroundOrigin,t),e),r=B_e(tv(e.styles.backgroundClip,t),e),s=T_e(tv(e.styles.backgroundSize,t),n,a),o=s[0],l=s[1],c=Np(tv(e.styles.backgroundPosition,t),a.width-o,a.height-l),f=I_e(tv(e.styles.backgroundRepeat,t),c,s,a,r),d=Math.round(a.left+c[0]),A=Math.round(a.top+c[1]);return[f,d,A,o,l]},Wm=function(e){return sr(e)&&e.value===Sv.AUTO},Fy=function(e){return typeof e=="number"},T_e=function(e,t,n){var a=t[0],r=t[1],s=t[2],o=e[0],l=e[1];if(!o)return[0,0];if(fs(o)&&l&&fs(l))return[pr(o,n.width),pr(l,n.height)];var c=Fy(s);if(sr(o)&&(o.value===Sv.CONTAIN||o.value===Sv.COVER)){if(Fy(s)){var f=n.width/n.height;return f<s!=(o.value===Sv.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var d=Fy(a),A=Fy(r),m=d||A;if(Wm(o)&&(!l||Wm(l))){if(d&&A)return[a,r];if(!c&&!m)return[n.width,n.height];if(m&&c){var p=d?a:r*s,h=A?r:a/s;return[p,h]}var y=d?a:n.width,g=A?r:n.height;return[y,g]}if(c){var _=0,b=0;return fs(o)?_=pr(o,n.width):fs(l)&&(b=pr(l,n.height)),Wm(o)?_=b*s:(!l||Wm(l))&&(b=_/s),[_,b]}var S=null,B=null;if(fs(o)?S=pr(o,n.width):l&&fs(l)&&(B=pr(l,n.height)),S!==null&&(!l||Wm(l))&&(B=d&&A?S/a*r:n.height),B!==null&&Wm(o)&&(S=d&&A?B/r*a:n.width),S!==null&&B!==null)return[S,B];throw new Error("Unable to calculate background-size for element")},tv=function(e,t){var n=e[t];return typeof n>"u"?e[0]:n},I_e=function(e,t,n,a,r){var s=t[0],o=t[1],l=n[0],c=n[1];switch(e){case 2:return[new mn(Math.round(a.left),Math.round(a.top+o)),new mn(Math.round(a.left+a.width),Math.round(a.top+o)),new mn(Math.round(a.left+a.width),Math.round(c+a.top+o)),new mn(Math.round(a.left),Math.round(c+a.top+o))];case 3:return[new mn(Math.round(a.left+s),Math.round(a.top)),new mn(Math.round(a.left+s+l),Math.round(a.top)),new mn(Math.round(a.left+s+l),Math.round(a.height+a.top)),new mn(Math.round(a.left+s),Math.round(a.height+a.top))];case 1:return[new mn(Math.round(a.left+s),Math.round(a.top+o)),new mn(Math.round(a.left+s+l),Math.round(a.top+o)),new mn(Math.round(a.left+s+l),Math.round(a.top+o+c)),new mn(Math.round(a.left+s),Math.round(a.top+o+c))];default:return[new mn(Math.round(r.left),Math.round(r.top)),new mn(Math.round(r.left+r.width),Math.round(r.top)),new mn(Math.round(r.left+r.width),Math.round(r.height+r.top)),new mn(Math.round(r.left),Math.round(r.height+r.top))]}},F_e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",rR="Hidden Text",P_e=(function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,n){var a=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=n,a.style.margin="0",a.style.padding="0",a.style.whiteSpace="nowrap",o.appendChild(a),r.src=F_e,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=n,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(rR)),a.appendChild(s),a.appendChild(r);var l=r.offsetTop-s.offsetTop+2;a.removeChild(s),a.appendChild(this._document.createTextNode(rR)),a.style.lineHeight="normal",r.style.verticalAlign="super";var c=r.offsetTop-a.offsetTop+2;return o.removeChild(a),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,n){var a=t+" "+n;return typeof this._data[a]>"u"&&(this._data[a]=this.parseMetrics(t,n)),this._data[a]},e})(),mH=(function(){function e(t,n){this.context=t,this.options=n}return e})(),D_e=1e4,U_e=(function(e){ou(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r._activeEffects=[],r.canvas=a.canvas?a.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),a.canvas||(r.canvas.width=Math.floor(a.width*a.scale),r.canvas.height=Math.floor(a.height*a.scale),r.canvas.style.width=a.width+"px",r.canvas.style.height=a.height+"px"),r.fontMetrics=new P_e(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-a.x,-a.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+a.width+"x"+a.height+") with scale "+a.scale),r}return t.prototype.applyEffects=function(n){for(var a=this;this._activeEffects.length;)this.popEffect();n.forEach(function(r){return a.applyEffect(r)})},t.prototype.applyEffect=function(n){this.ctx.save(),w_e(n)&&(this.ctx.globalAlpha=n.opacity),__e(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),uH(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(n){return Mo(this,void 0,void 0,function(){var a;return fo(this,function(r){switch(r.label){case 0:return a=n.element.container.styles,a.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(n){return Mo(this,void 0,void 0,function(){return fo(this,function(a){switch(a.label){case 0:if(Ss(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return a.sent(),[4,this.renderNodeContent(n)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(n,a,r){var s=this;if(a===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+r);else{var o=_T(n.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,n.bounds.top+r),l+s.ctx.measureText(c).width},n.bounds.left)}},t.prototype.createFontStyle=function(n){var a=n.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),r=M_e(n.fontFamily).join(", "),s=Mg(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,a,n.fontWeight,s,r].join(" "),r,s]},t.prototype.renderTextNode=function(n,a){return Mo(this,void 0,void 0,function(){var r,s,o,l,c,f,d,A,m=this;return fo(this,function(p){return r=this.createFontStyle(a),s=r[0],o=r[1],l=r[2],this.ctx.font=s,this.ctx.direction=a.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),f=c.baseline,d=c.middle,A=a.paintOrder,n.textBounds.forEach(function(h){A.forEach(function(y){switch(y){case 0:m.ctx.fillStyle=Rs(a.color),m.renderTextWithLetterSpacing(h,a.letterSpacing,f);var g=a.textShadow;g.length&&h.text.trim().length&&(g.slice(0).reverse().forEach(function(_){m.ctx.shadowColor=Rs(_.color),m.ctx.shadowOffsetX=_.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=_.offsetY.number*m.options.scale,m.ctx.shadowBlur=_.blur.number,m.renderTextWithLetterSpacing(h,a.letterSpacing,f)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),a.textDecorationLine.length&&(m.ctx.fillStyle=Rs(a.textDecorationColor||a.color),a.textDecorationLine.forEach(function(_){switch(_){case 1:m.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top+f),h.bounds.width,1);break;case 2:m.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top),h.bounds.width,1);break;case 3:m.ctx.fillRect(h.bounds.left,Math.ceil(h.bounds.top+d),h.bounds.width,1);break}}));break;case 1:a.webkitTextStrokeWidth&&h.text.trim().length&&(m.ctx.strokeStyle=Rs(a.webkitTextStrokeColor),m.ctx.lineWidth=a.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(h.text,h.bounds.left,h.bounds.top+f)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(n,a,r){if(r&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var s=A2(n),o=f2(a);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(r,0,0,n.intrinsicWidth,n.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(n){return Mo(this,void 0,void 0,function(){var a,r,s,o,l,c,b,b,f,d,A,m,B,p,h,F,y,g,_,b,S,B,F;return fo(this,function(T){switch(T.label){case 0:this.applyEffects(n.getEffects(4)),a=n.container,r=n.curves,s=a.styles,o=0,l=a.textNodes,T.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:T.sent(),T.label=3;case 3:return o++,[3,1];case 4:if(!(a instanceof WO))return[3,8];T.label=5;case 5:return T.trys.push([5,7,,8]),[4,this.context.cache.match(a.src)];case 6:return b=T.sent(),this.renderReplacedElement(a,r,b),[3,8];case 7:return T.sent(),this.context.logger.error("Error loading image "+a.src),[3,8];case 8:if(a instanceof KO&&this.renderReplacedElement(a,r,a.canvas),!(a instanceof jO))return[3,12];T.label=9;case 9:return T.trys.push([9,11,,12]),[4,this.context.cache.match(a.svg)];case 10:return b=T.sent(),this.renderReplacedElement(a,r,b),[3,12];case 11:return T.sent(),this.context.logger.error("Error loading svg "+a.svg.substring(0,255)),[3,12];case 12:return a instanceof JO&&a.tree?(f=new t(this.context,{scale:this.options.scale,backgroundColor:a.backgroundColor,x:0,y:0,width:a.width,height:a.height}),[4,f.render(a.tree)]):[3,14];case 13:d=T.sent(),a.width&&a.height&&this.ctx.drawImage(d,0,0,a.width,a.height,a.bounds.left,a.bounds.top,a.bounds.width,a.bounds.height),T.label=14;case 14:if(a instanceof wT&&(A=Math.min(a.bounds.width,a.bounds.height),a.type===i2?a.checked&&(this.ctx.save(),this.path([new mn(a.bounds.left+A*.39363,a.bounds.top+A*.79),new mn(a.bounds.left+A*.16,a.bounds.top+A*.5549),new mn(a.bounds.left+A*.27347,a.bounds.top+A*.44071),new mn(a.bounds.left+A*.39694,a.bounds.top+A*.5649),new mn(a.bounds.left+A*.72983,a.bounds.top+A*.23),new mn(a.bounds.left+A*.84,a.bounds.top+A*.34085),new mn(a.bounds.left+A*.39363,a.bounds.top+A*.79)]),this.ctx.fillStyle=Rs(zU),this.ctx.fill(),this.ctx.restore()):a.type===l2&&a.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.bounds.left+A/2,a.bounds.top+A/2,A/4,0,Math.PI*2,!0),this.ctx.fillStyle=Rs(zU),this.ctx.fill(),this.ctx.restore())),R_e(a)&&a.value.length){switch(m=this.createFontStyle(s),B=m[0],p=m[1],h=this.fontMetrics.getMetrics(B,p).baseline,this.ctx.font=B,this.ctx.fillStyle=Rs(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=V_e(a.styles.textAlign),F=A2(a),y=0,a.styles.textAlign){case 1:y+=F.width/2;break;case 2:y+=F.width;break}g=F.add(y,0,0,-F.height/2+1),this.ctx.save(),this.path([new mn(F.left,F.top),new mn(F.left+F.width,F.top),new mn(F.left+F.width,F.top+F.height),new mn(F.left,F.top+F.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new o0(a.value,g),s.letterSpacing,h),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ss(a.styles.display,2048))return[3,20];if(a.styles.listStyleImage===null)return[3,19];if(_=a.styles.listStyleImage,_.type!==0)return[3,18];b=void 0,S=_.url,T.label=15;case 15:return T.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return b=T.sent(),this.ctx.drawImage(b,a.bounds.left-(b.width+10),a.bounds.top),[3,18];case 17:return T.sent(),this.context.logger.error("Error loading list-style-image "+S),[3,18];case 18:return[3,20];case 19:n.listValue&&a.styles.listStyleType!==-1&&(B=this.createFontStyle(s)[0],this.ctx.font=B,this.ctx.fillStyle=Rs(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",F=new Qc(a.bounds.left,a.bounds.top+pr(a.styles.paddingTop,a.bounds.width),a.bounds.width,BU(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new o0(n.listValue,F),s.letterSpacing,BU(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),T.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(n){return Mo(this,void 0,void 0,function(){var a,r,_,s,o,_,l,c,_,f,d,_,A,m,_,p,h,_,y,g,_;return fo(this,function(b){switch(b.label){case 0:if(Ss(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:b.sent(),a=0,r=n.negativeZIndex,b.label=2;case 2:return a<r.length?(_=r[a],[4,this.renderStack(_)]):[3,5];case 3:b.sent(),b.label=4;case 4:return a++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:b.sent(),s=0,o=n.nonInlineLevel,b.label=7;case 7:return s<o.length?(_=o[s],[4,this.renderNode(_)]):[3,10];case 8:b.sent(),b.label=9;case 9:return s++,[3,7];case 10:l=0,c=n.nonPositionedFloats,b.label=11;case 11:return l<c.length?(_=c[l],[4,this.renderStack(_)]):[3,14];case 12:b.sent(),b.label=13;case 13:return l++,[3,11];case 14:f=0,d=n.nonPositionedInlineLevel,b.label=15;case 15:return f<d.length?(_=d[f],[4,this.renderStack(_)]):[3,18];case 16:b.sent(),b.label=17;case 17:return f++,[3,15];case 18:A=0,m=n.inlineLevel,b.label=19;case 19:return A<m.length?(_=m[A],[4,this.renderNode(_)]):[3,22];case 20:b.sent(),b.label=21;case 21:return A++,[3,19];case 22:p=0,h=n.zeroOrAutoZIndexOrTransformedOrOpacity,b.label=23;case 23:return p<h.length?(_=h[p],[4,this.renderStack(_)]):[3,26];case 24:b.sent(),b.label=25;case 25:return p++,[3,23];case 26:y=0,g=n.positiveZIndex,b.label=27;case 27:return y<g.length?(_=g[y],[4,this.renderStack(_)]):[3,30];case 28:b.sent(),b.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},t.prototype.formatPath=function(n){var a=this;n.forEach(function(r,s){var o=tl(r)?r.start:r;s===0?a.ctx.moveTo(o.x,o.y):a.ctx.lineTo(o.x,o.y),tl(r)&&a.ctx.bezierCurveTo(r.startControl.x,r.startControl.y,r.endControl.x,r.endControl.y,r.end.x,r.end.y)})},t.prototype.renderRepeat=function(n,a,r,s){this.path(n),this.ctx.fillStyle=a,this.ctx.translate(r,s),this.ctx.fill(),this.ctx.translate(-r,-s)},t.prototype.resizeImage=function(n,a,r){var s;if(n.width===a&&n.height===r)return n;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,a),l.height=Math.max(1,r);var c=l.getContext("2d");return c.drawImage(n,0,0,n.width,n.height,0,0,a,r),l},t.prototype.renderBackgroundImage=function(n){return Mo(this,void 0,void 0,function(){var a,r,s,o,l,c;return fo(this,function(f){switch(f.label){case 0:a=n.styles.backgroundImage.length-1,r=function(d){var A,m,p,D,te,q,H,oe,x,h,D,te,q,H,oe,y,g,_,b,S,B,F,T,E,x,C,D,U,L,H,oe,de,te,q,ce,le,Z,ne,G,W,Q,O;return fo(this,function(ae){switch(ae.label){case 0:if(d.type!==0)return[3,5];A=void 0,m=d.url,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,s.context.cache.match(m)];case 2:return A=ae.sent(),[3,4];case 3:return ae.sent(),s.context.logger.error("Error loading background-image "+m),[3,4];case 4:return A&&(p=FC(n,a,[A.width,A.height,A.width/A.height]),D=p[0],te=p[1],q=p[2],H=p[3],oe=p[4],x=s.ctx.createPattern(s.resizeImage(A,H,oe),"repeat"),s.renderRepeat(D,x,te,q)),[3,6];case 5:_ge(d)?(h=FC(n,a,[null,null,null]),D=h[0],te=h[1],q=h[2],H=h[3],oe=h[4],y=vge(d.angle,H,oe),g=y[0],_=y[1],b=y[2],S=y[3],B=y[4],F=document.createElement("canvas"),F.width=H,F.height=oe,T=F.getContext("2d"),E=T.createLinearGradient(_,S,b,B),EU(d.stops,g).forEach(function(j){return E.addColorStop(j.stop,Rs(j.color))}),T.fillStyle=E,T.fillRect(0,0,H,oe),H>0&&oe>0&&(x=s.ctx.createPattern(F,"repeat"),s.renderRepeat(D,x,te,q))):wge(d)&&(C=FC(n,a,[null,null,null]),D=C[0],U=C[1],L=C[2],H=C[3],oe=C[4],de=d.position.length===0?[pT]:d.position,te=pr(de[0],H),q=pr(de[de.length-1],oe),ce=hge(d,te,q,H,oe),le=ce[0],Z=ce[1],le>0&&Z>0&&(ne=s.ctx.createRadialGradient(U+te,L+q,0,U+te,L+q,le),EU(d.stops,le*2).forEach(function(j){return ne.addColorStop(j.stop,Rs(j.color))}),s.path(D),s.ctx.fillStyle=ne,le!==Z?(G=n.bounds.left+.5*n.bounds.width,W=n.bounds.top+.5*n.bounds.height,Q=Z/le,O=1/Q,s.ctx.save(),s.ctx.translate(G,W),s.ctx.transform(1,0,0,Q,0,0),s.ctx.translate(-G,-W),s.ctx.fillRect(U,O*(L-W)+W,H,oe*O),s.ctx.restore()):s.ctx.fill())),ae.label=6;case 6:return a--,[2]}})},s=this,o=0,l=n.styles.backgroundImage.slice(0).reverse(),f.label=1;case 1:return o<l.length?(c=l[o],[5,r(c)]):[3,4];case 2:f.sent(),f.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(n,a,r){return Mo(this,void 0,void 0,function(){return fo(this,function(s){return this.path(aR(r,a)),this.ctx.fillStyle=Rs(n),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(n,a,r,s){return Mo(this,void 0,void 0,function(){var o,l;return fo(this,function(c){switch(c.label){case 0:return a<3?[4,this.renderSolidBorder(n,r,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=C_e(s,r),this.path(o),this.ctx.fillStyle=Rs(n),this.ctx.fill(),l=S_e(s,r),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(n){return Mo(this,void 0,void 0,function(){var a,r,s,o,l,c,f,d,A=this;return fo(this,function(m){switch(m.label){case 0:return this.applyEffects(n.getEffects(2)),a=n.container.styles,r=!Hd(a.backgroundColor)||a.backgroundImage.length,s=[{style:a.borderTopStyle,color:a.borderTopColor,width:a.borderTopWidth},{style:a.borderRightStyle,color:a.borderRightColor,width:a.borderRightWidth},{style:a.borderBottomStyle,color:a.borderBottomColor,width:a.borderBottomWidth},{style:a.borderLeftStyle,color:a.borderLeftColor,width:a.borderLeftWidth}],o=N_e(tv(a.backgroundClip,0),n.curves),r||a.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Hd(a.backgroundColor)||(this.ctx.fillStyle=Rs(a.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),a.boxShadow.slice(0).reverse().forEach(function(p){A.ctx.save();var h=d2(n.curves),y=p.inset?0:D_e,g=b_e(h,-y+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(A.path(h),A.ctx.clip(),A.mask(g)):(A.mask(h),A.ctx.clip(),A.path(g)),A.ctx.shadowOffsetX=p.offsetX.number+y,A.ctx.shadowOffsetY=p.offsetY.number,A.ctx.shadowColor=Rs(p.color),A.ctx.shadowBlur=p.blur.number,A.ctx.fillStyle=p.inset?Rs(p.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),m.label=2;case 2:l=0,c=0,f=s,m.label=3;case 3:return c<f.length?(d=f[c],d.style!==0&&!Hd(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,n.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,n.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,n.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,n.curves)];case 10:m.sent(),m.label=11;case 11:l++,m.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(n,a,r,s,o){return Mo(this,void 0,void 0,function(){var l,c,f,d,A,m,p,h,y,g,_,b,S,B,F,T,F,T;return fo(this,function(E){return this.ctx.save(),l=E_e(s,r),c=aR(s,r),o===2&&(this.path(c),this.ctx.clip()),tl(c[0])?(f=c[0].start.x,d=c[0].start.y):(f=c[0].x,d=c[0].y),tl(c[1])?(A=c[1].end.x,m=c[1].end.y):(A=c[1].x,m=c[1].y),r===0||r===2?p=Math.abs(f-A):p=Math.abs(d-m),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),h=a<3?a*3:a*2,y=a<3?a*2:a,o===3&&(h=a,y=a),g=!0,p<=h*2?g=!1:p<=h*2+y?(_=p/(2*h+y),h*=_,y*=_):(b=Math.floor((p+y)/(h+y)),S=(p-b*h)/(b-1),B=(p-(b+1)*h)/b,y=B<=0||Math.abs(y-S)<Math.abs(y-B)?S:B),g&&(o===3?this.ctx.setLineDash([0,h+y]):this.ctx.setLineDash([h,y])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=a):this.ctx.lineWidth=a*2+1.1,this.ctx.strokeStyle=Rs(n),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(tl(c[0])&&(F=c[3],T=c[0],this.ctx.beginPath(),this.formatPath([new mn(F.end.x,F.end.y),new mn(T.start.x,T.start.y)]),this.ctx.stroke()),tl(c[1])&&(F=c[1],T=c[2],this.ctx.beginPath(),this.formatPath([new mn(F.end.x,F.end.y),new mn(T.start.x,T.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(n){return Mo(this,void 0,void 0,function(){var a;return fo(this,function(r){switch(r.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Rs(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),a=x_e(n),[4,this.renderStack(a)];case 1:return r.sent(),this.applyEffects([]),[2,this.canvas]}})})},t})(mH),R_e=function(e){return e instanceof XO||e instanceof YO?!0:e instanceof wT&&e.type!==l2&&e.type!==i2},N_e=function(e,t){switch(e){case 0:return d2(t);case 2:return p_e(t);case 1:default:return f2(t)}},V_e=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},L_e=["-apple-system","system-ui"],M_e=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return L_e.indexOf(t)===-1}):e},O_e=(function(e){ou(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.canvas=a.canvas?a.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=a,r.canvas.width=Math.floor(a.width*a.scale),r.canvas.height=Math.floor(a.height*a.scale),r.canvas.style.width=a.width+"px",r.canvas.style.height=a.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-a.x,-a.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+a.width+"x"+a.height+" at "+a.x+","+a.y+") with scale "+a.scale),r}return t.prototype.render=function(n){return Mo(this,void 0,void 0,function(){var a,r;return fo(this,function(s){switch(s.label){case 0:return a=EE(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,H_e(a)];case 1:return r=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Rs(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(r,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t})(mH),H_e=function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){t(a)},a.onerror=n,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},$_e=(function(){function e(t){var n=t.id,a=t.enabled;this.id=n,this.enabled=a,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,uy([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,uy([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,uy([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,uy([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e})(),Q_e=(function(){function e(t,n){var a;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new $_e({id:this.instanceName,enabled:t.logging}),this.cache=(a=t.cache)!==null&&a!==void 0?a:new u_e(this,t)}return e.instanceCount=1,e})(),G_e=function(e,t){return t===void 0&&(t={}),z_e(e,t)};typeof window<"u"&&lH.setContext(window);var z_e=function(e,t){return Mo(void 0,void 0,void 0,function(){var n,a,r,s,o,l,c,f,d,A,m,p,h,y,g,_,b,S,B,F,E,T,E,x,C,D,U,L,H,oe,de,te,q,ce,le,Z,ne,G,W,Q;return fo(this,function(O){switch(O.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=e.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(a=n.defaultView,!a)throw new Error("Document is not attached to a Window");return r={allowTaint:(x=t.allowTaint)!==null&&x!==void 0?x:!1,imageTimeout:(C=t.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:t.proxy,useCORS:(D=t.useCORS)!==null&&D!==void 0?D:!1},s=dE({logging:(U=t.logging)!==null&&U!==void 0?U:!0,cache:t.cache},r),o={windowWidth:(L=t.windowWidth)!==null&&L!==void 0?L:a.innerWidth,windowHeight:(H=t.windowHeight)!==null&&H!==void 0?H:a.innerHeight,scrollX:(oe=t.scrollX)!==null&&oe!==void 0?oe:a.pageXOffset,scrollY:(de=t.scrollY)!==null&&de!==void 0?de:a.pageYOffset},l=new Qc(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new Q_e(s,l),f=(te=t.foreignObjectRendering)!==null&&te!==void 0?te:!1,d={allowTaint:(q=t.allowTaint)!==null&&q!==void 0?q:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:f,copyStyles:f},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),A=new eR(c,e,d),m=A.clonedReferenceElement,m?[4,A.toIFrame(n,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=O.sent(),h=bT(m)||Wye(m)?bpe(m.ownerDocument):Dw(c,m),y=h.width,g=h.height,_=h.left,b=h.top,S=W_e(c,m,t.backgroundColor),B={canvas:t.canvas,backgroundColor:S,scale:(le=(ce=t.scale)!==null&&ce!==void 0?ce:a.devicePixelRatio)!==null&&le!==void 0?le:1,x:((Z=t.x)!==null&&Z!==void 0?Z:0)+_,y:((ne=t.y)!==null&&ne!==void 0?ne:0)+b,width:(G=t.width)!==null&&G!==void 0?G:Math.ceil(y),height:(W=t.height)!==null&&W!==void 0?W:Math.ceil(g)},f?(c.logger.debug("Document cloned, using foreign object rendering"),E=new O_e(c,B),[4,E.render(m)]):[3,3];case 2:return F=O.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+_+","+b+" with size "+y+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),T=eH(c,m),S===T.styles.backgroundColor&&(T.styles.backgroundColor=Pc.TRANSPARENT),c.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),E=new U_e(c,B),[4,E.render(T)];case 4:F=O.sent(),O.label=5;case 5:return(!((Q=t.removeContainer)!==null&&Q!==void 0)||Q)&&(eR.destroy(p)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,F]}})})},W_e=function(e,t,n){var a=t.ownerDocument,r=a.documentElement?r0(e,getComputedStyle(a.documentElement).backgroundColor):Pc.TRANSPARENT,s=a.body?r0(e,getComputedStyle(a.body).backgroundColor):Pc.TRANSPARENT,o=typeof n=="string"?r0(e,n):n===null?Pc.TRANSPARENT:4294967295;return t===a.documentElement?Hd(r)?Hd(s)?o:s:r:o};class K_e{constructor(){this.languagePatterns={gujarati:/[\u0A80-\u0AFF]/,devanagari:/[\u0900-\u097F]/,kannada:/[\u0C80-\u0CFF]/,malayalam:/[\u0D00-\u0D7F]/,telugu:/[\u0C00-\u0C7F]/,tamil:/[\u0B80-\u0BFF]/,english:/^[A-Za-z0-9\s.,;:!?\-'"()]+$/},this.languageFonts={gujarati:'"Noto Sans Gujarati", "Shruti", "Gujarati Sangam MN", sans-serif',hindi:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',marathi:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',devanagari:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',kannada:'"Noto Sans Kannada", "Tunga", "Kannada Sangam MN", sans-serif',malayalam:'"Noto Sans Malayalam", "Kartika", "Malayalam Sangam MN", sans-serif',telugu:'"Noto Sans Telugu", "Gautami", "Telugu Sangam MN", sans-serif',tamil:'"Noto Sans Tamil", "Latha", "Tamil Sangam MN", sans-serif'}}detectLanguage(t){return!t||typeof t!="string"?null:this.languagePatterns.gujarati.test(t)?"gujarati":this.languagePatterns.kannada.test(t)?"kannada":this.languagePatterns.malayalam.test(t)?"malayalam":this.languagePatterns.telugu.test(t)?"telugu":this.languagePatterns.tamil.test(t)?"tamil":this.languagePatterns.devanagari.test(t)?"hindi":(this.languagePatterns.english.test(t),"english")}getFixedContainerDimensions(t){switch(t?.toLowerCase()){case"letter":case"legal":return{width:580,minHeight:45,fontSize:17};case"a4":default:return{width:520,minHeight:40,fontSize:16}}}getMaxWidthForPageSize(t){switch(t?.toLowerCase()){case"letter":return 530;case"legal":return 530;case"a4":default:return 480}}createHtmlTemplate(t,n,a={},r="A4"){const s=this.getFixedContainerDimensions(r),o=a.fontSize||s.fontSize,l=a.color||"#2d3748",c=this.languageFonts[n]||this.languageFonts.devanagari,f=a.lineHeight||1.4,d=a.textAlign||"left",A=a.padding||3;return`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Gujarati:wght@400;500&family=Noto+Sans+Devanagari:wght@400;500&family=Noto+Sans+Kannada:wght@400;500&family=Noto+Sans+Malayalam:wght@400;500&family=Noto+Sans+Telugu:wght@400;500&family=Noto+Sans+Tamil:wght@400;500&display=swap" rel="stylesheet">
        <style>
          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }
          
          body {
            font-family: ${c};
            font-size: ${o}px;
            color: ${l};
            line-height: ${f};
            text-align: ${d};
            background: white;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
            padding: ${A}px;
            width: ${s.width}px; /* Fixed width for consistency */
            min-height: ${s.minHeight}px; /* Minimum height for consistency */
            /* Remove fixed height and overflow hidden to allow dynamic content */
            display: flex;
            align-items: flex-start; /* Align content to top instead of center */
          }
          
          .text-content {
            word-wrap: break-word;
            overflow-wrap: break-word;
            width: 100%;
            /* Remove text-overflow ellipsis to show all content */
          }
        </style>
      </head>
      <body>
        <div class="text-content">${t.replace(/\n/g,"<br>")}</div>
      </body>
      </html>
    `}async renderTextAsImage(t,n,a={},r="A4"){return new Promise((s,o)=>{try{const l=document.createElement("iframe");l.style.cssText=`
          position: absolute;
          top: -10000px;
          left: -10000px;
          width: 800px;
          height: 600px;
          border: none;
          visibility: hidden;
        `,document.body.appendChild(l);const c=l.contentDocument||l.contentWindow.document,f=this.createHtmlTemplate(t,n,a,r);c.open(),c.write(f),c.close(),this.waitForFontsToLoad(c).then(()=>{try{const d=this.getFixedContainerDimensions(r),A=c.body,m=d.width,h=Math.max(A.offsetHeight,d.minHeight),y=a.scale||2;G_e(c.body,{width:m,height:h,scale:y,useCORS:!0,allowTaint:!1,backgroundColor:"white"}).then(g=>{const _=g.toDataURL("image/png");document.body.removeChild(l),s(_)}).catch(g=>{console.error("Canvas rendering failed:",g),document.body.removeChild(l),s(null)})}catch(d){console.error("Text rendering failed:",d),document.body.removeChild(l),s(null)}})}catch(l){console.error("Error in renderTextAsImage:",l),o(l)}})}waitForFontsToLoad(t){return new Promise(n=>{t.fonts&&t.fonts.ready?t.fonts.ready.then(()=>{setTimeout(n,100)}):setTimeout(n,500)})}async processTextForPdf(t,n={},a="A4",r=!1){if(!t)return{content:{text:"",style:n},success:!0,isRegional:!1};const s=this.detectLanguage(t);if(r||!["gujarati","hindi","marathi","kannada","malayalam","telugu","tamil"].includes(s))return{content:{text:t,style:n},success:!0,isRegional:!1};try{const o=await this.renderTextAsImage(t,s,{fontSize:n.fontSize||8,color:n.color||"#2d3748",lineHeight:n.lineHeight||1.4},a);return o?{content:{image:o,margin:n.margin||[0,0,0,0]},success:!0,isRegional:!0}:{content:{text:t,style:n},success:!1,isRegional:!1,error:"Regional text rendering failed"}}catch(o){return console.error("Regional text processing failed:",o),{content:{text:t,style:n},success:!1,isRegional:!1,error:o.message}}}}const _p=async e=>{try{const n=await(await fetch(e)).blob();return new Promise((a,r)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>a(s.result),s.onerror=o=>r(o)})}catch(t){throw console.error("Error converting URL to base64:",t),t}},Ch=async e=>{try{return{data:(await it.get(`/print/${e}`)).data.data.config,error:null}}catch(t){return t?.response?.status===404?(console.log("No print configurations found for doctor ID:",e,"- this is normal for new users"),{data:null,error:null,isNewUser:!0}):(console.error("Error fetching print details:",t),{data:null,error:t,isNewUser:!1})}},oi=typeof navigator<"u"&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),vH=async(e,t)=>{try{const n=new FormData;return n.append("file",t),{data:(await it.post(`/print/${e}/header-image`,n,{transformRequest:[(r,s)=>(delete s["Content-Type"],r)]})).data.data,error:null}}catch(n){return console.error("Error uploading header image:",n),{data:null,error:n}}},Td=async(e,t=null)=>{if(t){const{createFileURL:r}=await ns(async()=>{const{createFileURL:o}=await Promise.resolve().then(()=>AR);return{createFileURL:o}},void 0,import.meta.url),s=`doctorHeaderImages/${t}`;return await r(s,"/api/print/header-image-file")}const{getCurrentServerURL:n}=await ns(async()=>{const{getCurrentServerURL:r}=await Promise.resolve().then(()=>AR);return{getCurrentServerURL:r}},void 0,import.meta.url);return`${await n()}/api/print/${e}/header-image`},hH=async e=>{try{return{data:(await it.delete(`/print/${e}/header-image`)).data,error:null}}catch(t){return console.error("Error deleting header image:",t),{data:null,error:t}}},j_e=Object.freeze(Object.defineProperty({__proto__:null,deletePrescriptionHeaderImage:hH,fetchPrintConfigs:Ch,getPrescriptionHeaderImageUrl:Td,isMobile:oi,uploadPrescriptionHeaderImage:vH},Symbol.toStringTag,{value:"Module"})),q_e=""+new URL("Figtree-Bold-nnuniQY3.ttf",import.meta.url).href,Y_e=""+new URL("Figtree-Bold-nnuniQY3.ttf",import.meta.url).href,X_e=""+new URL("Figtree-Italic-Be74KLPS.ttf",import.meta.url).href,J_e=""+new URL("Figtree-Italic-Be74KLPS.ttf",import.meta.url).href;let Jr,DE="Roboto";function Km(){return{font:DE,fontSize:10,columnGap:20}}function Z_e(e){const t=new Uint8Array(e);let n="";for(let a=0;a<t.byteLength;a++)n+=String.fromCharCode(t[a]);return btoa(n)}const Vf=async()=>{if(!Jr)try{const[e,t]=await Promise.all([ns(()=>import("./pdfmake-BOePhLBV.js").then(r=>r.p),[],import.meta.url),ns(()=>import("./vfs_fonts-UcpGVzXv.js").then(r=>r.v),[],import.meta.url)]);Jr=e.default||e;const n=t.default||t;n.pdfMake&&n.pdfMake.vfs?Jr.vfs=n.pdfMake.vfs:n.vfs?Jr.vfs=n.vfs:(typeof n=="object"&&n["Roboto-Regular.ttf"],Jr.vfs=n);const a=[["Figtree-Regular.ttf",q_e],["Figtree-Bold.ttf",Y_e],["Figtree-Italic.ttf",X_e],["Figtree-BoldItalic.ttf",J_e]];try{for(const[r,s]of a){const o=await fetch(s);if(!o.ok)throw new Error(`HTTP ${o.status}`);const l=await o.arrayBuffer();Jr.vfs[r]=Z_e(l)}Jr.addFonts({Figtree:{normal:"Figtree-Regular.ttf",bold:"Figtree-Bold.ttf",italics:"Figtree-Italic.ttf",bolditalics:"Figtree-BoldItalic.ttf"}}),DE="Figtree",console.log("PDFMake initialized with Figtree font")}catch(r){console.warn("Figtree font not loaded, using Roboto:",r?.message||r)}DE==="Roboto"&&console.log("PDFMake initialized successfully with VFS fonts")}catch(e){throw console.error("Failed to initialize PDFMake:",e),new Error("PDFMake initialization failed")}};class e2e{constructor(){this.regionalTextRenderer=new K_e,this.styles={clinicHeader:{fontSize:24,color:"#1a472a",alignment:"center",margin:[0,0,0,5]},doctorName:{fontSize:20,color:"#2d5aa0",margin:[0,0,0,3]},doctorCredentials:{fontSize:14,color:"#4a5568",margin:[0,0,0,2]},registrationInfo:{fontSize:12,color:"#718096",margin:[0,0,0,8]},prescriptionHeader:{fontSize:28,color:"#1a202c",alignment:"center",margin:[0,0,0,25]},patientSectionTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},patientLabel:{fontSize:11,color:"#4a5568"},patientValue:{fontSize:12,color:"#1a202c",margin:[0,2,0,0]},patientInlineInfo:{fontSize:11,color:"#4a5568",lineHeight:1.3,margin:[0,0,0,0]},medicalSectionTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},vitalLabel:{fontSize:12,color:"#2b6cb0"},vitalValue:{fontSize:12,color:"#1a202c",margin:[0,1,0,2]},diagnosisText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},clinicalNotesText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},prescriptionTableHeader:{fontSize:11,color:"#2d3748",margin:[8,8,8,8]},medicineNumber:{fontSize:18,color:"#2b6cb0",margin:[5,5,5,5]},cleanMedicineName:{fontSize:12,color:"#1a202c",margin:[0,0,0,4]},saltComposition:{fontSize:11,color:"#1a202c",margin:[0,0,0,4]},cleanMedicineDetails:{fontSize:12,color:"#4a5568",margin:[0,0,0,0]},cleanFieldLabel:{fontSize:12,color:"#2b6cb0",margin:[0,0,0,2]},cleanFieldValue:{fontSize:11,color:"#2d3748",margin:[0,0,0,0]},dosageInstructionsTitle:{fontSize:12,color:"#4a5568",margin:[0,3,0,5]},cleanDosageItem:{fontSize:12,color:"#2d3748",margin:[0,3,0,3],lineHeight:1.3},medicineName:{fontSize:14,color:"#1a202c",margin:[0,2,0,2]},medicineStrength:{fontSize:12,color:"#2b6cb0",margin:[0,1,0,2]},medicineComposition:{fontSize:10,color:"#718096",margin:[0,0,0,5]},dosageInstruction:{fontSize:11,color:"#2d3748",margin:[3,2,3,2],border:[!0,!0,!0,!0],borderColor:["#f1f5f9","#f1f5f9","#f1f5f9","#f1f5f9"],padding:[4,2,4,2]},durationText:{fontSize:9,color:"#c53030",alignment:"center",margin:[3,4,3,4],fillColor:"#fed7d7",border:[!0,!0,!0,!0],borderColor:["#fecaca","#fecaca","#fecaca","#fecaca"],borderWidth:[1,1,1,1]},instructionsText:{fontSize:11,color:"#4a5568",margin:[5,5,5,5]},medicalAdviceTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},adviceText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},followupTitle:{fontSize:12,color:"#4a5568",margin:[0,3,0,3]},followupText:{fontSize:12,color:"#4a5568",margin:[0,2,0,0],bold:!0},translationTitle:{fontSize:12,color:"#4a5568",margin:[15,5,15,3]},translatedText:{fontSize:12,color:"#4a5568",lineHeight:1.3,margin:[15,0,15,8]},medicalFooter:{fontSize:9,color:"#718096",alignment:"center",margin:[0,10,0,0]},disclaimer:{fontSize:9,color:"#6b7280",alignment:"center",lineHeight:1.3,margin:[0,3,0,3]},receiptTitle:{fontSize:20,color:"#2d5aa0",alignment:"center",margin:[0,5,0,10]},sectionHeader:{fontSize:12,color:"#2d5aa0",margin:[0,5,0,5],bold:!0},patientInfo:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},receiptInfo:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},tableHeader:{fontSize:11,color:"#2d3748",bold:!0,margin:[5,5,5,5]},tableCell:{fontSize:10,color:"#1a202c",margin:[5,3,5,3]},summaryLabel:{fontSize:11,color:"#4a5568",margin:[5,2,5,2]},summaryValue:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},summaryLabelBold:{fontSize:12,color:"#2d3748",bold:!0,margin:[5,3,5,3]},summaryValueBold:{fontSize:12,color:"#1a202c",bold:!0,margin:[5,3,5,3]},summaryValuePaid:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},summaryValueDue:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},noDataText:{fontSize:11,color:"#6b7280",alignment:"center",margin:[0,10,0,10]}}}async processRegionalText(t,n={},a="A4",r=!1){return(await this.regionalTextRenderer.processTextForPdf(t,n,a,r)).content}getRegionalImageWidth(t){switch(t?.toLowerCase()){case"letter":case"legal":return 460;case"a4":default:return 450}}async applyLanguageFont(t,n={},a="A4",r=!1){const s=this.regionalTextRenderer.detectLanguage(t);if(["gujarati","hindi","marathi","kannada","malayalam","telugu","tamil"].includes(s)&&!r){const o=this.regionalTextRenderer.getFixedContainerDimensions(a),l=this.getRegionalImageWidth(a);return{image:await this.regionalTextRenderer.renderTextAsImage(t,s,{fontSize:o.fontSize,color:n.color||"#2d3748",fontFamily:s==="gujarati"?"Noto Sans Gujarati":s==="kannada"?"Noto Sans Kannada":s==="malayalam"?"Noto Sans Malayalam":s==="telugu"?"Noto Sans Telugu":s==="tamil"?"Noto Sans Tamil":"Noto Sans Devanagari",padding:5},a),width:l,margin:[0,2,15,2],alignment:n.alignment||"left"}}return{text:t,...n}}async generateConsultationPDF(t,n){Jr||await Vf();let a=null;if(t.printConfigurations?.headerImagePath&&t.printConfigurations?.doctorId)try{const o=await Td(t.printConfigurations.doctorId,t.printConfigurations.headerImagePath);a=await _p(o)}catch(o){console.error("Failed to load header image for PDF:",o)}let r=null;t.printConfigurations?.headerSize!==void 0&&t.printConfigurations?.headerSize!==null?r=Math.round(t.printConfigurations.headerSize*72):t.headerSize!==void 0&&(r=t.headerSize);const s={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,r),defaultStyle:Km(),header:()=>t.printConfigurations?.useHeader?this.createProfessionalMedicalHeader(t.printConfigurations,t.printConfigurations?.pageSize,a,r):null,footer:(o,l)=>t.printConfigurations?.useFooter?this.createMedicalFooter(o,l,t.printConfigurations):null,content:[this.createProfessionalPatientCard(n,t.consultation),...this.hasVitals(t.vitals)?[this.createProfessionalVitalsCard(t.vitals)]:[],await this.createClinicalFindingsSection(t.consultation,t.printConfigurations?.pageSize),await this.createProfessionalPrescriptionSection(t.medicines||[],t.translationLanguage,t.printConfigurations?.pageSize,t.translationFailed),await this.createMedicalAdviceSection(t.consultation,t.translatedPatientNotes,t.printConfigurations?.pageSize,t.translationFailed)],styles:this.styles,pageBreakBefore:function(o,l,c){return o.style==="prescriptionTableHeader"&&o.pageNumbers.length>1?!0:(l&&l.length===0&&c&&c.length<2,!1)},info:{title:"Medical Prescription",author:"Professional Medical System",subject:"Patient Prescription and Medical Advice"},compress:!1};return Jr.createPdf(s)}createProfessionalMedicalHeader(t,n="A4",a=null,r=null){const s=this.getHeaderMargins(n,r),l=this.getPageWidth(n)-(s[0]+s[2]);return a?{table:{headerRows:0,widths:["*"],body:[[{stack:[{image:a,width:l,height:80,alignment:"center",margin:[0,0,0,0]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:[0,0,0,0]}]]},layout:"noBorders",margin:[s[0],s[1],s[2],s[3]]}:{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"40%",stack:[{text:`Dr. ${t.doctorName}`,style:"doctorName"},{text:t.doctorDegrees||"MBBS",style:"doctorCredentials"},{text:`Reg. No: ${t.doctorRegistrationNumber}`,style:"registrationInfo"}]},{width:"60%",stack:[...t.clinicAddress?[{stack:t.clinicAddress.split(/\r?\n|\r/).map(c=>({text:c.trim(),fontSize:10,color:"#4a5568",alignment:"right",margin:[0,1,0,1]})),margin:[0,5,0,2]}]:[],...t.contactNumber?[{text:` ${t.contactNumber}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[],...t.email?[{text:`Email: ${t.email}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[]]}]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:s}]]},layout:"noBorders",margin:[0,0,0,20]}}getPatientAgeDisplayForPdf(t,n=null,a=!1){if(!t||typeof t!="object")return"";if(a&&n!=null&&n!=="")return qv(n);const r=t.birthDate?Ug(t.birthDate):t.age!=null&&t.age!==""?t.age:n!=null&&n!==""?n:null;return qv(r)}createProfessionalPatientCard(t,n){const a=this.getPatientAgeDisplayForPdf(t),r=t.gender||"N/A",s=a?`${a}/${r}`:r,o=[`Patient Name - ${t.name||t.patientName||"N/A"}`,s,`ID - ${t.id||t.patientId||"N/A"}`,`Contact - ${t.contactNumber||t.phoneNumber||"N/A"}`],l=n?.referral;l?.referredBy?.trim()&&o.push(`Referred by - ${l.referredBy.trim()}`);const c=o.join(" | ");return{table:{headerRows:0,widths:["*",100],body:[[{text:c,style:"patientInlineInfo",margin:[6,3,15,3]},{text:(d=>{const A=new Date(d),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][A.getMonth()],h=A.getDate(),y=A.getFullYear().toString().slice(-2);return`${h} ${p}' ${y}`})(n.consultationDate||n.createdAt),style:"patientInlineInfo",alignment:"right",margin:[15,3,12,3]}]]},layout:"noBorders",margin:[0,0,0,3],alignment:"left"}}createProfessionalVitalsCard(t){const n=[];if(t.pulse&&n.push(`Pulse Rate: ${t.pulse}bpm`),t.systolicBP&&t.diastolicBP&&n.push(`Blood Pressure: ${t.systolicBP}/${t.diastolicBP}mmHg`),t.temperature&&n.push(`Temperature: ${t.temperature}C`),t.respiratoryRate&&n.push(`Respiratory Rate: ${t.respiratoryRate}/min`),t.weight&&n.push(`Weight: ${t.weight}kg`),t.height){const a=t.weight&&t.height?(t.weight/(t.height/100*(t.height/100))).toFixed(1):null;n.push(`Height: ${t.height}cm${a?` (BMI: ${a})`:""}`)}return{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"VITAL SIGNS: ",style:"patientSectionTitle"},{text:n.join(", "),style:"vitalValue"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,5],alignment:"left"}}async createClinicalFindingsSection(t,n="A4"){const a=[];if(t.clinicalNotes?.trim()){const r=await this.applyLanguageFont(t.clinicalNotes,{style:"clinicalNotesText",margin:[0,0,0,0]},n,!1);a.push([{text:[{text:"CLINICAL NOTES: ",style:"medicalAdviceTitle"},r.text?r:{text:t.clinicalNotes,style:"clinicalNotesText"}],margin:[6,3,15,1]}])}if(t.diagnosis){const r=await this.applyLanguageFont(t.diagnosis,{style:"diagnosisText",margin:[0,0,0,0]},n,!1);a.push([{text:[{text:"DIAGNOSIS: ",style:"medicalAdviceTitle"},r.text?r:{text:t.diagnosis,style:"diagnosisText"}],margin:[6,0,15,3]}])}return a.length===0?[]:[{table:{headerRows:0,widths:["*"],body:a},layout:{hLineWidth:(r,s)=>r===0||r===s.table.body.length?1:0,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,5],alignment:"left"}]}async createProfessionalPrescriptionSection(t,n="none",a="A4",r=!1){const s=t.filter(l=>l.isSelected!==!1);if(s.length===0)return{text:""};const o=[];for(const l of s){const f=this.createSimpleDosageText(l)||"As directed",d=l.duration||"As directed",A=l.instructions||"";let m=`Schedule: ${f}   Duration: ${d}`;A.trim()&&(m+=`   ${A}`);let p=l.productName||"";if(l.productForm||l.quantityUnits!==null&&l.quantityUnits!==void 0){const y=[];l.productForm&&y.push(l.productForm),l.quantityUnits!==null&&l.quantityUnits!==void 0&&y.push(`Qty:${l.quantityUnits}`),p+=` (${y.join(",")})`}const h=l.saltComposition?` - ${l.saltComposition.toUpperCase()}`:"";if(o.push({text:[{text:p,style:"cleanMedicineName",bold:!0},{text:h,fontSize:10,color:"#1a202c"}],margin:[0,0,0,0]}),o.push({text:m,style:"cleanFieldValue",margin:[0,0,0,n&&n!=="none"?0:4]}),n&&n!=="none")try{const y=[];if(f&&f!=="As directed"&&y.push(f),d&&d!=="As directed"&&y.push(d),A.trim()&&y.push(A),y.length>0){const g=y.map(B=>this.translateMedicineText(B,n)),_=await Promise.all(g);let b="",S=0;if(f&&f!=="As directed"){const B=_[S];B&&B.trim()&&(b+=B),S++}if(d&&d!=="As directed"){const B=_[S];B&&B.trim()&&(b&&(b+="   "),b+=B),S++}if(A.trim()){const B=_[S];B&&B.trim()&&(b&&(b+="   "),b+=B)}if(b&&b.trim()&&!r){const B=await this.applyLanguageFont(b,{style:"translatedText"},a,!1);o.push({...B,margin:[-6,1,0,2]})}}}catch(y){console.error("Error translating medicine text:",y)}}return[{table:{headerRows:0,widths:["*"],body:[[{text:"PRESCRIPTION (Rx)",style:"medicalAdviceTitle",margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,2],alignment:"left"},{table:{headerRows:0,widths:["*"],body:[[{stack:o,margin:[6,3,6,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,5],alignment:"left"}]}createSimpleDosageText(t){return t?.dosage_schedule||"As directed"}async translateMedicineText(t,n){if(!t||!n||n==="none")return"";try{const{translationLanguages:a}=await ns(async()=>{const{translationLanguages:c}=await Promise.resolve().then(()=>UE);return{translationLanguages:c}},void 0,import.meta.url),s=a.find(c=>c.value===n)?.label||n,{translateText:o}=await ns(async()=>{const{translateText:c}=await import("./translationUtils-CLtSEBUw.js");return{translateText:c}},[],import.meta.url);return await o(t,s)||t}catch(a){return console.error("Translation failed for medicine text:",a),t}}async createMedicalAdviceSection(t,n,a="A4",r=!1){const s=[];if(t.investigations?.trim()){const l=await this.applyLanguageFont(t.investigations,{style:"adviceText",margin:[0,0,0,0]},a,!1);s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"INVESTIGATIONS ADVISED: ",style:"medicalAdviceTitle"},l.text?l:{text:t.investigations,style:"adviceText"}],margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"}}],margin:[0,0,0,5],alignment:"left"})}if(t.patientNotes?.trim()){const l=await this.applyLanguageFont(t.patientNotes,{style:"adviceText",margin:[0,0,0,0]},a,!1),f=[{text:[{text:"PATIENT ADVICE: ",style:"medicalAdviceTitle"},l.text?l:{text:t.patientNotes,style:"adviceText"}],margin:[0,0,0,0]}];if(n&&!r){const d=await this.applyLanguageFont(n,{style:"translatedText"},a,!1);f.push({...d,margin:[-6,2,0,0]})}s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{stack:f,margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"}}],margin:[0,0,0,5],alignment:"left"})}const o=t?.referral;if(o?.referredTo?.trim()&&s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"REFERRED TO: ",style:"medicalAdviceTitle"},{text:o.referredTo.trim(),style:"adviceText"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"}}],margin:[0,0,0,5],alignment:"left"}),t.followupDate){const l=c=>{const f=new Date(c),A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][f.getMonth()],m=f.getDate(),p=f.getFullYear().toString().slice(-2);return`${m} ${A}' ${p}`};s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"FOLLOW-UP DATE: ",style:"medicalAdviceTitle"},{text:l(t.followupDate),style:"followupText"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"}}],margin:[0,0,0,8],alignment:"left"})}return s}createMedicalDisclaimer(){return{stack:[{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:" IMPORTANT MEDICAL NOTICE",style:"medicalAdviceTitle",alignment:"center"},{text:[` Take medications exactly as prescribed
`,` Do not stop medication without consulting your doctor
`,` Contact your doctor immediately if you experience any adverse reactions
`,` Keep all medications out of reach of children
`," This prescription is valid for 30 days from date of issue"].join(""),style:"disclaimer",margin:[15,5,15,10]}]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#fed7d7",vLineColor:()=>"#fed7d7",fillColor:()=>"#fffbf5"}}],unbreakable:!0,margin:[0,15,0,0],alignment:"left",pageBreakBefore:function(t,n,a,r){return 842-(r?r.length*30:0)<120&&n.length===0}}}createMedicalFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | This is a computer-generated prescription.`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createReceiptFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | This is a computer-generated receipt.`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createTreatmentPlanFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | Charges are indicative`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createPatientField(t,n){return{columns:[{width:"35%",text:t,style:"patientLabel"},{width:"*",text:n,style:"patientValue"}],margin:[0,0,0,1]}}createVitalField(t,n){return{text:`${t}: ${n}`,style:"vitalValue",margin:[8,3,8,3]}}createCleanDosageSchedule(t){return t?.dosage_schedule?[{text:t.dosage_schedule,style:"cleanDosageItem",alignment:"left",color:"#2d3748"}]:[{text:"Take as directed by your physician",style:"cleanDosageItem",alignment:"center",italics:!0,color:"#4a5568"}]}createDosageSchedule(t){return t?.dosage_schedule?[{text:t.dosage_schedule,style:"dosageInstruction",alignment:"left"}]:[{text:"Take as directed by physician",style:"dosageInstruction"}]}getBPStatus(t,n){return t>140||n>90?" High":t<90||n<60?" Low":" Normal"}async generateTreatmentPlanPDF(t,n){Jr||await Vf();let a=null;if(t.printConfigurations?.headerImagePath&&t.printConfigurations?.doctorId)try{const o=await Td(t.printConfigurations.doctorId,t.printConfigurations.headerImagePath);a=await _p(o)}catch(o){console.error("Failed to load header image for PDF:",o)}let r=null;t.printConfigurations?.headerSize!==void 0&&t.printConfigurations?.headerSize!==null?r=Math.round(t.printConfigurations.headerSize*72):t.headerSize!==void 0&&(r=t.headerSize);const s={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,r),defaultStyle:Km(),header:()=>t.printConfigurations?.useHeader?this.createProfessionalMedicalHeader(t.printConfigurations,t.printConfigurations?.pageSize,a,r):null,footer:(o,l)=>t.printConfigurations?.useFooter?this.createTreatmentPlanFooter(o,l,t.printConfigurations):null,content:[this.createProfessionalPatientCard(n,{createdAt:new Date}),this.createTreatmentPlanDetailsSection(t.treatmentPlan),...this.getCompletedProcedures(t.procedureTreatments).length>0?[this.createProceduresSection("COMPLETED PROCEDURES",this.getCompletedProcedures(t.procedureTreatments))]:[],...this.createPendingProceduresSections(t.procedureTreatments),...t.paymentReceipts&&t.paymentReceipts.length>0?[this.createPaymentDetailsSection(t.paymentReceipts)]:[],...this.hasMultipleOptions(t.procedureTreatments)?[]:[this.createCostSummarySection(t.procedureTreatments,t.paymentReceipts)],this.createPaymentSummarySection(t.procedureTreatments,t.paymentReceipts)],styles:this.styles,pageBreakBefore:function(o,l,c){return l&&l.length===0&&c&&c.length<2,!1},info:{title:"Treatment Plan",author:"Professional Medical System",subject:"Patient Treatment Plan"},compress:!1};return Jr.createPdf(s)}createTreatmentPlanDetailsSection(t){const n=t?.treatmentPlanName;return!n||n.startsWith("New Treatment Plan")?null:{stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"TREATMENT PLAN: ",style:"medicalAdviceTitle"},{text:n,style:"patientValue"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"}}],unbreakable:!0,margin:[0,0,0,8],alignment:"left",pageBreakBefore:function(a,r){return r.length===0}}}getCompletedProcedures(t){return t?t.filter(n=>n.status?.toLowerCase()==="completed"&&n.isSelected!==!1&&n.status?.toLowerCase()!=="cancelled"):[]}getPendingProcedures(t){return t?t.filter(n=>n.status?.toLowerCase()!=="completed"&&n.isSelected!==!1&&n.status?.toLowerCase()!=="cancelled"):[]}hasMultipleOptions(t){if(!t)return!1;const n=t.filter(r=>r.status?.toLowerCase()!=="completed"&&r.isSelected!==!1&&r.status?.toLowerCase()!=="cancelled"),a=new Set;return n.forEach(r=>{const s=(r.option||r.options||"").trim();s&&a.add(s)}),a.size>=2}groupPendingProceduresByOption(t){const n=this.getPendingProcedures(t),a={};return n.forEach(r=>{const o=(r.option||r.options||"").trim()||"no-option";a[o]||(a[o]=[]),a[o].push(r)}),a}calculateGroupTotal(t){return t.reduce((n,a)=>{const r=a.costEstimate||a.procedureCost||0;return n+r},0)}createPendingProceduresSections(t){const n=this.getPendingProcedures(t);if(n.length===0)return[];if(this.hasMultipleOptions(t)){const a=this.groupPendingProceduresByOption(t),r=[];return a["no-option"]&&r.push(this.createProceduresSection("PENDING PROCEDURES",a["no-option"])),Object.keys(a).filter(o=>o!=="no-option").sort((o,l)=>o.localeCompare(l)).forEach(o=>{const l=a[o],c=this.calculateGroupTotal(l);r.push(this.createProceduresWithTotalSection(`OPTION ${o.toUpperCase()}`,l,c))}),r}else return[this.createProceduresSection("PENDING PROCEDURES",n)]}createProceduresWithTotalSection(t,n,a){if(!n||n.length===0)return null;const r={table:{headerRows:1,widths:["70%","30%"],body:[[{text:"PROCEDURE",style:"prescriptionTableHeader"},{text:"COST",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,2,0,8]};return n.forEach(s=>{const o=s.procedure?.procedure_name||s.procedureName||"Unknown Procedure",l=s.location&&s.location.trim()?`${o} (${s.location.trim()})`:o,c=s.procedure?.description||s.description||"",f=s.procedureCost||0,d=s.costEstimate||s.procedureCost||0,A=f-d;let m=`${d.toLocaleString()}`;A>0&&(m+=` (${A.toLocaleString()} discount)`),r.table.body.push([{stack:[{text:l,style:"cleanMedicineName"},...c?[{text:c,style:"cleanMedicineDetails"}]:[]]},{text:m,style:"cleanFieldValue",alignment:"center"}])}),r.table.body.push([{text:`${t} Total:`,style:"cleanMedicineName",bold:!0,alignment:"right"},{text:`${a.toLocaleString()}`,style:"cleanMedicineName",bold:!0,alignment:"center"}]),[{table:{headerRows:0,widths:["*"],body:[[{text:t,style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},r]}createProceduresSection(t,n){if(!n||n.length===0)return null;const a={table:{headerRows:1,widths:["70%","30%"],body:[[{text:"PROCEDURE",style:"prescriptionTableHeader"},{text:"COST",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,2,0,8]};return n.forEach(r=>{const s=r.procedure?.procedure_name||r.procedureName||"Unknown Procedure",o=r.location&&r.location.trim()?`${s} (${r.location.trim()})`:s,l=r.procedure?.description||r.description||"",c=r.procedureCost||0,f=r.costEstimate||r.procedureCost||0,d=c-f;let A=`${f.toLocaleString()}`;d>0&&(A+=` (${d.toLocaleString()} discount)`),a.table.body.push([{stack:[{text:o,style:"cleanMedicineName"},...l?[{text:l,style:"cleanMedicineDetails"}]:[]]},{text:A,style:"cleanFieldValue",alignment:"center"}])}),[{table:{headerRows:0,widths:["*"],body:[[{text:t,style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},a]}createPaymentDetailsSection(t){if(!t||t.length===0)return null;const n={table:{headerRows:1,widths:["40%","35%","25%"],body:[[{text:"RECEIPT ID",style:"prescriptionTableHeader"},{text:"DATE",style:"prescriptionTableHeader",alignment:"center"},{text:"PAID",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,2,0,8]};return t.forEach(a=>{n.table.body.push([{text:a.identifier||"N/A",style:"cleanFieldValue"},{text:mr(a.paymentReceiptDate),style:"cleanFieldValue",alignment:"center"},{text:`${(a.totalPaid||0).toLocaleString()}`,style:"cleanFieldValue",alignment:"center"}])}),[{table:{headerRows:0,widths:["*"],body:[[{text:"PAYMENT INFORMATION",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},n]}createCostSummarySection(t,n){const a=t?.filter(d=>d.isSelected!==!1&&d.status?.toLowerCase()!=="cancelled")||[],r=a.reduce((d,A)=>d+(A.procedureCost||0),0),s=a.reduce((d,A)=>d+(A.costEstimate||A.procedureCost||0),0),o=r-s;let l=`${s.toLocaleString()}`;o>0&&(l+=` (${o.toLocaleString()} total discount)`);const f={table:{headerRows:0,widths:["60%","40%"],body:[["Total Cost:",l]].map(([d,A])=>[{text:d,fontSize:12,color:"#000000",bold:!0,margin:[5,2,5,2]},{text:A,style:"cleanFieldValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:(d,A)=>d===0||d===A.table.body.length?1:0,vLineWidth:(d,A)=>d===0||d===A.table.widths.length?1:0,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,2,0,8]};return[{table:{headerRows:0,widths:["*"],body:[[{text:"COST SUMMARY",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},f]}createPaymentSummarySection(t,n){const a=t?.filter(f=>f.isSelected!==!1&&f.status?.toLowerCase()==="completed"&&f.status?.toLowerCase()!=="cancelled")||[],r=n?.reduce((f,d)=>f+(d.totalPaid||0),0)||0,s=a.reduce((f,d)=>{const A=d.costEstimate||d.cost_estimate,m=d.procedureCost||0;return f+(A!==void 0?A:m)},0),o=Math.max(0,s-r),l=[["Amount Due:",`${s.toLocaleString()}`],["Amount Paid:",`${r.toLocaleString()}`],["Amount Pending:",`${o.toLocaleString()}`]],c={table:{headerRows:0,widths:["60%","40%"],body:l.map(([f,d])=>[{text:f,fontSize:12,color:"#000000",bold:!0,margin:[5,2,5,2]},{text:d,style:"cleanFieldValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:(f,d)=>f===0||f===d.table.body.length?1:0,vLineWidth:(f,d)=>f===0||f===d.table.widths.length?1:0,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,2,0,8]};return[{table:{headerRows:0,widths:["*"],body:[[{text:"PAYMENT SUMMARY",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},c]}getLanguageDisplayName(t){return{hi:"Hindi",bn:"Bengali",te:"Telugu",mr:"Marathi",ta:"Tamil",gu:"Gujarati",ur:"Urdu",ml:"Malayalam",kn:"Kannada",or:"Odia",pa:"Punjabi",as:"Assamese",hindi:"Hindi",marathi:"Marathi",gujarati:"Gujarati",kannada:"Kannada",malayalam:"Malayalam",telugu:"Telugu",tamil:"Tamil"}[t]||(t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"Translation")}getPageSize(t){switch(t?.toLowerCase()){case"letter":return"LETTER";case"legal":return"LEGAL";case"a4":default:return"A4"}}getPageMargins(t,n=null){const a=n??130;switch(t?.toLowerCase()){case"letter":return[45,a,45,45];case"legal":return[35,a,35,55];case"a4":default:return[40,a,40,40]}}getHeaderMargins(t,n=null){const a=this.getPageMargins(t,n);return[a[0],20,a[2],15]}getPageWidth(t){switch(t?.toLowerCase()){case"letter":return 612;case"legal":return 612;case"a4":default:return 595}}hasVitals(t){return t?!!(t.pulse||t.systolicBP||t.diastolicBP||t.respiratoryRate||t.temperature||t.weight||t.height):!1}async generateBillPDF(t,n){Jr||await Vf();const a=t.headerSize!==void 0?t.headerSize:null,r={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,a),defaultStyle:Km(),header:()=>this.createProfessionalBillHeader(t.printConfigurations,t.printConfigurations?.pageSize,t.doctor,a),footer:(s,o)=>this.createBillFooter(s,o,t.printConfigurations),content:[this.createBillTitle(),this.createBillPatientInfo(n,t.consultation,t.printConfigurations,t.doctor),this.createBillServicesTable(t.consultation),...t.consultation.associatedReceipt?[this.createAssociatedReceiptSection(t.consultation.associatedReceipt,t.consultation.payments)]:[]],styles:this.styles,pageBreakBefore:function(s,o,l){return!!(s.table&&s.table.body&&s.table.body.length>15)},info:{title:"Tax Invoice cum Bill of Supply",author:"Professional Medical System",subject:"Patient Bill and Tax Invoice"},compress:!1};return Jr.createPdf(r)}async generatePharmacyBillPDF(t,n){Jr||await Vf();const a=t.pharmacyBill,r=t.pharmacyConfigurations||{},s={pageSize:"A4",pageOrientation:"landscape",pageMargins:[40,60,40,40],defaultStyle:Km(),header:()=>r.useHeader?this.createPharmacyBillHeader(r):null,footer:()=>null,content:[this.createPharmacyBillTitle(n,a,r),this.createPharmacyBillItemsTable(a),this.createPharmacyBillBottomSection(a)],styles:this.styles,pageBreakBefore:function(o,l,c){return!!(o.table&&o.table.body&&o.table.body.length>15)},info:{title:"Pharmacy Bill",author:"Professional Medical System",subject:"Pharmacy Bill"},compress:!1};return Jr.createPdf(s)}async generateMedicalFitnessCertificatePDF(t,n,a){Jr||await Vf();const r=a?.pageSize||"A4";let s=null;if(a?.headerImagePath&&a?.doctorId)try{const _=await Td(a.doctorId,a.headerImagePath);s=await _p(_)}catch(_){console.error("Failed to load header image for PDF:",_)}let o=null;a?.headerSize!==void 0&&a?.headerSize!==null&&(o=Math.round(a.headerSize*72));const l=_=>{if(!_)return"";try{const b=new Date(_+"T12:00:00"),S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B=b.getDate(),F=S[b.getMonth()],T=b.getFullYear();return`${B} ${F} ${T}`}catch{return _}},c=t.patientName||n.name||"N/A",f=this.getPatientAgeDisplayForPdf(n,t.patientAge,!0),d=t.purpose||"",A=t.validityPeriod||"",m=t.additionalNotes||"";l(t.certificateDate);const p=f?`, aged ${f}, `:" ";let h=`This is to certify that ${c}${p}is medically fit for ${d}. This certificate is valid for ${A}.`;m&&(h+=` ${m}`);const y={consultationDate:t.certificateDate,createdAt:t.certificateDate},g={pageSize:this.getPageSize(r),pageMargins:this.getPageMargins(r,o),defaultStyle:Km(),header:()=>a?.useHeader?this.createProfessionalMedicalHeader(a,r,s,o):null,footer:(_,b)=>a?.useFooter?this.createMedicalFooter(_,b,a):null,content:[this.createProfessionalPatientCard(n,y),{text:"MEDICAL FITNESS CERTIFICATE",style:"prescriptionHeader",margin:[0,20,0,20]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:h,style:"adviceText",margin:[0,0,0,20]}],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,0,0,30]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:200,y2:0,lineWidth:1,lineColor:"#1a202c"}],margin:[0,0,0,5]},{text:t.doctorName||a?.doctorName||"Dr. [Doctor Name]",fontSize:12,color:"#1a202c",margin:[0,0,0,3]},{text:l(t.certificateDate),fontSize:10,color:"#4a5568",margin:[0,0,0,3]},...a?.doctorRegistrationNumber?[{text:`Reg. No: ${a.doctorRegistrationNumber}`,fontSize:10,color:"#4a5568",margin:[0,0,0,0]}]:[]],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,30,0,0]}],styles:this.styles,pageBreakBefore:function(_,b,S){return!1},info:{title:"Medical Fitness Certificate",author:"Professional Medical System",subject:"Medical Fitness Certificate"},compress:!1};return Jr.createPdf(g)}async generateLeaveOfAbsencePDF(t,n,a){Jr||await Vf();const r=a?.pageSize||"A4";let s=null;if(a?.headerImagePath&&a?.doctorId)try{const S=await Td(a.doctorId,a.headerImagePath);s=await _p(S)}catch(S){console.error("Failed to load header image for PDF:",S)}let o=null;a?.headerSize!==void 0&&a?.headerSize!==null&&(o=Math.round(a.headerSize*72));const l=S=>{if(!S)return"";try{const B=new Date(S+"T12:00:00"),F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],T=B.getDate(),E=F[B.getMonth()],x=B.getFullYear();return`${T} ${E} ${x}`}catch{return S}},c=t.patientName||n.name||"N/A",f=this.getPatientAgeDisplayForPdf(n,t.patientAge,!0),d=t.activity||"",A=t.reason||"",m=l(t.tillDate),p=t.additionalNotes||"",h=l(t.certificateDate),y=f?`, aged ${f}, `:" ";let g=`This is to certify that ${c}${y}should be granted leave of absence from ${d}`;m&&(g+=` till ${m}`),g+=` for the reason ${A}.`,p&&(g+=` ${p}`);const _={consultationDate:t.certificateDate,createdAt:t.certificateDate},b={pageSize:this.getPageSize(r),pageMargins:this.getPageMargins(r,o),defaultStyle:Km(),header:()=>a?.useHeader?this.createProfessionalMedicalHeader(a,r,s,o):null,footer:(S,B)=>a?.useFooter?this.createMedicalFooter(S,B,a):null,content:[this.createProfessionalPatientCard(n,_),{text:"LEAVE OF ABSENCE CERTIFICATE",style:"prescriptionHeader",margin:[0,20,0,20]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:g,style:"adviceText",margin:[0,0,0,20]}],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,0,0,30]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:200,y2:0,lineWidth:1,lineColor:"#1a202c"}],margin:[0,0,0,5]},{text:t.doctorName||a?.doctorName||"Dr. [Doctor Name]",fontSize:12,color:"#1a202c",margin:[0,0,0,3]},{text:h,fontSize:10,color:"#4a5568",margin:[0,0,0,3]},...a?.doctorRegistrationNumber?[{text:`Reg. No: ${a.doctorRegistrationNumber}`,fontSize:10,color:"#4a5568",margin:[0,0,0,0]}]:[]],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,30,0,0]}],styles:this.styles,pageBreakBefore:function(S,B,F){return!1},info:{title:"Leave of Absence Certificate",author:"Professional Medical System",subject:"Leave of Absence Certificate"},compress:!1};return Jr.createPdf(b)}async generateReceiptPDF(t,n){await Vf(),console.log("Generating receipt PDF with data:",t);const a=t.consultation,r=t.printConfigurations||{},s=r.pageSize||"A4";let o=null;if(r?.headerImagePath&&r?.doctorId)try{const f=await Td(r.doctorId,r.headerImagePath);o=await _p(f)}catch(f){console.error("Failed to load header image for PDF:",f)}let l=null;r?.headerSize!==void 0&&r?.headerSize!==null?l=Math.round(r.headerSize*72):t?.headerSize!==void 0&&(l=t.headerSize);const c={pageSize:this.getPageSize(s),pageMargins:this.getPageMargins(s,l),header:()=>r?.useHeader?this.createProfessionalMedicalHeader(r,s,o,l):null,footer:(f,d)=>r?.useFooter?this.createReceiptFooter(f,d,r):null,content:[this.createReceiptTitle(),this.createReceiptPatientInfo(n,a,t),this.createReceiptServicesTable(a),...this.createReceiptPaymentSection(a)],styles:this.styles,info:{title:"Payment Receipt",author:"Professional Medical System",subject:"Patient Payment Receipt"}};return Jr.createPdf(c)}createReceiptTitle(){return{text:"PAYMENT RECEIPT",style:"receiptTitle",alignment:"center",margin:[0,0,0,15]}}createReceiptPatientInfo(t,n,a={}){return{table:{headerRows:0,widths:["33%","33%","34%"],body:[[{stack:[{text:"Patient Information",style:"sectionHeader",margin:[0,0,0,3]},{text:n.patientName||t.name||t.patientName||"Unknown Patient",style:"patientInfo"},{text:`ID: ${n.patientId||t.patientId||"N/A"}`,style:"patientInfo"}],margin:[6,3,6,3]},{stack:[{text:"Appointment Details",style:"sectionHeader",margin:[0,0,0,3]},{text:`Dr. ${n.doctorName||a?.doctor?.doctorName||"Unknown Doctor"}`,style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.appointmentDate)}`,style:"patientInfo"}],margin:[6,3,6,3]},{stack:[{text:"Receipt Information",style:"sectionHeader",margin:[0,0,0,3]},{text:n.receiptNumber||n.identifier||"N/A",style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.receiptDate||n.paymentReceiptDate)}`,style:"patientInfo"}],margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,10]}}createReceiptServicesTable(t){const n=t.services||[];if(n.length===0)return{text:"No services recorded",style:"noDataText",margin:[0,10]};const a=n.some(l=>parseFloat(l.discountAmount)>0);let r,s;a?(r=[{text:"Description",style:"tableHeader"},{text:"Base Cost per unit",style:"tableHeader",alignment:"right"},{text:"Discount per unit",style:"tableHeader",alignment:"right"},{text:"Quantity",style:"tableHeader",alignment:"center"},{text:"Total",style:"tableHeader",alignment:"right"}],s=["35%","20%","20%","10%","15%"]):(r=[{text:"Description",style:"tableHeader"},{text:"Base Cost per unit",style:"tableHeader",alignment:"right"},{text:"Quantity",style:"tableHeader",alignment:"center"},{text:"Total",style:"tableHeader",alignment:"right"}],s=["45%","25%","15%","15%"]);const o=[r];return n.forEach(l=>{const c=parseFloat(l.baseCost)||0,f=parseFloat(l.discountAmount)||0,d=parseInt(l.quantity)||1,A=(c-f)*d;let m;a?m=[{text:l.serviceDescription||"Service",style:"tableCell"},{text:this.formatAmount(c),style:"tableCell",alignment:"right"},{text:this.formatAmount(f),style:"tableCell",alignment:"right"},{text:d.toString(),style:"tableCell",alignment:"center"},{text:this.formatAmount(A),style:"tableCell",alignment:"right"}]:m=[{text:l.serviceDescription||"Service",style:"tableCell"},{text:this.formatAmount(c),style:"tableCell",alignment:"right"},{text:d.toString(),style:"tableCell",alignment:"center"},{text:this.formatAmount(A),style:"tableCell",alignment:"right"}],o.push(m)}),[{table:{headerRows:0,widths:["*"],body:[[{text:"Item Details",style:"sectionHeader",margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,2]},{table:{headerRows:1,widths:s,body:o},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9",fillColor:function(l){return l===0?"#f8f9fa":null}},margin:[0,0,0,5]},this.createReceiptSummary(t,a)]}createReceiptSummary(t,n){const a=t.subtotal||0,r=t.totalLineDiscount||0,s=parseFloat(t.additionalDiscount)||0,o=t.grandTotal||0,l=[];return l.push(["Subtotal:",this.formatAmount(a)]),n&&r>0&&l.push(["Line Discounts:",`-${this.formatAmount(r)}`]),s>0&&l.push(["Additional Discount:",`-${this.formatAmount(s)}`]),l.push(["Grand Total:",this.formatAmount(o)]),{table:{headerRows:0,widths:["70%","30%"],body:l.map(([c,f])=>[{text:c,style:c==="Grand Total:"?"summaryLabelBold":"summaryLabel",alignment:"right",margin:[5,2,5,2]},{text:f,style:c==="Grand Total:"?"summaryValueBold":"summaryValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,2,0,10]}}createReceiptPaymentSection(t){const n=t.grandTotal||0,a=t.totalPaid||0,r=t.balanceDue||0,s=t.payments||[],o=[];if(o.push({table:{headerRows:0,widths:["*"],body:[[{text:"Payment Information",style:"sectionHeader",margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,2]}),o.push({table:{headerRows:0,widths:["33%","33%","34%"],body:[[{stack:[{text:"Total Amount",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(n),style:"summaryValueBold"}],margin:[6,8,6,8]},{stack:[{text:"Paid Amount",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(a),style:"summaryValuePaid"}],margin:[6,8,6,8]},{stack:[{text:"Balance Due",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(r),style:r>0?"summaryValueDue":"summaryValuePaid"}],margin:[6,8,6,8]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,10]}),s&&s.length>0){o.push({text:"Payment History",style:"summaryLabel",margin:[6,5,6,5]});const l=[[{text:"Date",style:"tableHeader"},{text:"Mode",style:"tableHeader"},{text:"Amount",style:"tableHeader",alignment:"right"}]];s.forEach(c=>{l.push([{text:this.formatReceiptDate(c.paymentDate),style:"tableCell"},{text:c.mode||"Cash",style:"tableCell"},{text:this.formatAmount(c.amount),style:"tableCell",alignment:"right"}])}),o.push({table:{headerRows:1,widths:["40%","30%","30%"],body:l},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9",fillColor:function(c){return c===0?"#f8f9fa":null}},margin:[0,0,0,10]})}else o.push({stack:[{text:"Payment History",style:"summaryLabel",margin:[6,5,6,2]},{text:"No payments recorded",style:"noDataText",margin:[0,5,0,5]}]});return o}formatAmount(t){if(t==null)return"0.00";const n=parseFloat(t)||0;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}formatReceiptDate(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return t}}formatDateTime(t){if(!t)return"N/A";try{return new Date(t*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}}createBillTitle(){return{text:"Tax Invoice cum Bill of Supply",style:"receiptTitle",alignment:"center",margin:[0,10,0,15]}}createProfessionalBillHeader(t,n="A4",a=null,r=null){const s=this.getHeaderMargins(n,r);return{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"40%",stack:[{text:`Dr. ${t.doctorName}`,style:"doctorName"},{text:t.doctorDegrees||"MBBS",style:"doctorCredentials"},{text:`Reg. No: ${t.doctorRegistrationNumber}`,style:"registrationInfo"}]},{width:"60%",stack:[...t.clinicAddress?[{stack:t.clinicAddress.split(/\r?\n|\r/).map(o=>({text:o.trim(),fontSize:10,color:"#4a5568",alignment:"right",margin:[0,1,0,1]})),margin:[0,5,0,2]}]:[],...t.contactNumber?[{text:` ${t.contactNumber}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[],...t.email?[{text:`Email: ${t.email}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[]]}]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:s}]]},layout:"noBorders",margin:[0,0,0,20]}}createBillPatientInfo(t,n,a,r=null){const s=this.getPatientAgeDisplayForPdf(t,n.patientAge),o=s?`Patient ID: ${t.patientId||"N/A"} | Age: ${s}`:`Patient ID: ${t.patientId||"N/A"}`;return{table:{headerRows:0,widths:["50%","50%"],body:[[{stack:[{text:"BILL TO:",style:"sectionHeader",alignment:"left"},{text:t.patientName||t.name||"Unknown Patient",style:"patientInfo"},{text:o,style:"patientInfo"}],margin:[12,8,12,8]},{stack:[{text:`Invoice No: ${n.billNumber}`,style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo"},{text:`Appointment Date: ${this.formatReceiptDate(n.appointmentDate)}`,style:"patientInfo"},...r?.isGST&&r?.gstIdentifier?[{text:`GST No: ${r.gstIdentifier}`,style:"patientInfo",bold:!0}]:[]],margin:[12,8,12,8],alignment:"left"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,15]}}createBillServicesTable(t){const n=t.services||[];if(n.length===0)return{text:"No services found",style:"noDataText"};const a=n.some(c=>parseFloat(c.discountAmount)>0);let r,s;a?(r=[{text:"Sr.",style:"tableHeader",fontSize:9},{text:"Description",style:"tableHeader",fontSize:9},{text:"HSN/SAC Code",style:"tableHeader",fontSize:9},{text:"Base Cost per unit (incl. GST)",style:"tableHeader",fontSize:9},{text:"Discount per unit",style:"tableHeader",fontSize:9},{text:"GST%",style:"tableHeader",fontSize:9},{text:"Taxable Value",style:"tableHeader",fontSize:9},{text:"GST Amount",style:"tableHeader",fontSize:9},{text:"Quantity",style:"tableHeader",fontSize:9},{text:"Total",style:"tableHeader",fontSize:9}],s=["4%","16%","9%","11%","10%","7%","11%","10%","8%","14%"]):(r=[{text:"Sr.",style:"tableHeader",fontSize:9},{text:"Description",style:"tableHeader",fontSize:9},{text:"HSN/SAC Code",style:"tableHeader",fontSize:9},{text:"Base Cost per unit (incl. GST)",style:"tableHeader",fontSize:9},{text:"GST%",style:"tableHeader",fontSize:9},{text:"Taxable Value",style:"tableHeader",fontSize:9},{text:"GST Amount",style:"tableHeader",fontSize:9},{text:"Quantity",style:"tableHeader",fontSize:9},{text:"Total",style:"tableHeader",fontSize:9}],s=["4%","19%","11%","13%","8%","12%","12%","9%","12%"]);const o=[r];n.forEach((c,f)=>{let d;a?d=[{text:(f+1).toString(),style:"tableCell"},{text:c.serviceDescription||"N/A",style:"tableCell"},{text:c.hsnSacCode||"N/A",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.baseCost),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.discountAmount),style:"tableCell",alignment:"right"},{text:`${c.gstPercent||0}%`,style:"tableCell",alignment:"center"},{text:this.formatAmount(c.gstExclusiveAmount||0),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.gstAmount),style:"tableCell",alignment:"right"},{text:c.quantity?.toString()||"1",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.totalWithGst),style:"tableCell",alignment:"right",bold:!0}]:d=[{text:(f+1).toString(),style:"tableCell"},{text:c.serviceDescription||"N/A",style:"tableCell"},{text:c.hsnSacCode||"N/A",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.baseCost),style:"tableCell",alignment:"right"},{text:`${c.gstPercent||0}%`,style:"tableCell",alignment:"center"},{text:this.formatAmount(c.gstExclusiveAmount||0),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.gstAmount),style:"tableCell",alignment:"right"},{text:c.quantity?.toString()||"1",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.totalWithGst),style:"tableCell",alignment:"right",bold:!0}],o.push(d)});const l=[];return a&&l.push([{text:"Base Cost Total (incl. GST):",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.baseSubtotal),style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"Line Item Discounts:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:`-${this.formatAmount(t.totalLineDiscount)}`,style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"Subtotal after Discounts (incl. GST):",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.baseSubtotal-t.totalLineDiscount),style:"summaryValue",fontSize:9,alignment:"right"}]),l.push([{text:"Taxable Value Total:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.totalTaxableValue||0),style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"GST Amount:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.totalGSTAmount),style:"summaryValue",fontSize:9,alignment:"right"}]),t.additionalDiscount>0&&l.push([{text:"Additional Discount:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:`-${this.formatAmount(t.additionalDiscount)}`,style:"summaryValue",fontSize:9,alignment:"right"}]),l.push([{text:"Grand Total (incl. GST):",style:"summaryLabelBold",fontSize:10,alignment:"right"},{text:this.formatAmount(t.grandTotal),style:"summaryValueBold",fontSize:10,alignment:"right"}]),[{table:{headerRows:1,widths:s,body:o},layout:{hLineWidth:(c,f)=>c===0||c===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#f1f5f9",fillColor:c=>c===0?"#f8fafc":null},margin:[0,0,0,10]},{table:{headerRows:0,widths:["70%","30%"],body:l},layout:{hLineWidth:(c,f)=>c===f.table.body.length-1?2:0,vLineWidth:()=>0,hLineColor:()=>"#2b6cb0",fillColor:(c,f)=>c===f.table.body.length-1?"#f1f5f9":null},margin:[0,5,0,15]}]}createAssociatedReceiptSection(t,n=[]){const a=[{text:"ASSOCIATED PAYMENT RECEIPT",style:"sectionHeader",margin:[0,15,0,10]}];if(t){if(a.push({table:{headerRows:0,widths:["50%","50%"],body:[[{stack:[{text:"Receipt Information:",style:"summaryLabel"},{text:`Receipt No: ${t.identifier}`,style:"receiptInfo"},{text:`Receipt Date: ${this.formatReceiptDate(t.paymentReceiptDate)}`,style:"receiptInfo"}],margin:[8,8,8,8]},{stack:[{text:"Payment Summary:",style:"summaryLabel"},{text:`Total Paid: ${this.formatAmount(n.reduce((r,s)=>r+(parseFloat(s.amount)||0),0))}`,style:"summaryValuePaid"},{text:`Balance Due: ${this.formatAmount(Math.max(0,t.balanceDue||0))}`,style:t.balanceDue>0?"summaryValueDue":"summaryValuePaid"}],margin:[8,8,8,8]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,10]}),n&&n.length>0){const r=[[{text:"Date",style:"tableHeader"},{text:"Method",style:"tableHeader"},{text:"Amount",style:"tableHeader"}]];n.forEach(s=>{r.push([{text:s.paymentDate||this.formatReceiptDate(s.paymentDate)||"N/A",style:"tableCell"},{text:s.paymentMethod||s.mode||"N/A",style:"tableCell"},{text:this.formatAmount(s.amount),style:"tableCell",alignment:"right"}])}),a.push({table:{headerRows:1,widths:["35%","30%","35%"],body:r},layout:{hLineWidth:s=>s===0||s===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#f1f5f9",fillColor:s=>s===0?"#f8fafc":null},margin:[0,0,0,10]})}}else a.push({text:"No associated payment receipt found",style:"noDataText"});return a}createPharmacyBillTitle(t,n,a){const r=n.patientId||t.patientId||"N/A",s=n.patientName||t.name||t.patientName||"Unknown Patient";return{columns:[{width:"40%",text:"Tax Invoice cum Bill of Supply",style:"receiptTitle",fontSize:16,alignment:"left"},{width:"60%",table:{headerRows:0,widths:["50%","50%"],body:[[{text:`Patient: ${s} (ID${r})`,style:"patientInfo",fontSize:9,margin:[0,0,0,0]},{text:`Doctor: ${n.doctorName||"Unknown"}`,style:"patientInfo",fontSize:9,alignment:"right",margin:[0,0,0,0]}],[{text:`Invoice No.: ${n.identifier||"N/A"}`,style:"patientInfo",fontSize:9,margin:[0,1,0,0]},{text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo",fontSize:9,alignment:"right",margin:[0,1,0,0]}]]},layout:"noBorders",alignment:"right"}],margin:[0,3,0,3]}}createPharmacyBillHeader(t){const n=t.header||"";return{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"*",stack:n?n.split(/\r?\n|\r/).map(a=>a.trim()).filter(a=>a).map((a,r,s)=>({text:a,fontSize:r===0?14:12,color:r===0?"#1a202c":"#4a5568",alignment:"left",margin:[0,r===0?3:1,0,r===s.length-1?0:.5]})):[{text:"",fontSize:10}]},{width:"auto",stack:t.gstNumber?[{text:`GSTIN: ${t.gstNumber}`,fontSize:10,color:"#4a5568",alignment:"right",margin:[0,3,0,0]}]:[]}],margin:[0,0,0,0]},{canvas:[{type:"line",x1:0,y1:4,x2:762,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:762,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,3,0,0],alignment:"center"}],margin:[40,10,40,8]}]]},layout:"noBorders",margin:[0,0,0,3]}}createPharmacyBillPatientInfo(t,n,a){const r=n.patientId||t.patientId||"N/A",s=n.patientName||t.name||t.patientName||"Unknown Patient";return{table:{headerRows:0,widths:["35%","30%","35%"],body:[[{stack:[{text:`Patient: ${s} (ID${r})`,style:"patientInfo"},...n.patientPhone?[{text:`Phone: ${n.patientPhone}`,style:"patientInfo",margin:[0,2,0,0]}]:[]],margin:[6,2,6,2]},{stack:[{text:`Doctor: ${n.doctorName||"Unknown"}`,style:"patientInfo"}],margin:[6,2,6,2]},{columns:[{width:"auto",text:`Invoice No.: ${n.identifier||"N/A"}`,style:"patientInfo"},{width:"*",text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo",alignment:"right"}],margin:[6,2,6,2]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#f1f5f9",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,8]}}createPharmacyBillItemsTable(t){const n=t.items||[];if(n.length===0)return{text:"No items found",style:"noDataText",margin:[0,10]};const a=[{text:"Item",style:"tableHeader",fontSize:9},{text:"HSN",style:"tableHeader",alignment:"center",fontSize:9},{text:"Batch",style:"tableHeader",fontSize:9},{text:"Expiry",style:"tableHeader",fontSize:9},{text:"MRP/Unit",style:"tableHeader",alignment:"right",fontSize:8},{text:"Discount",style:"tableHeader",alignment:"right",fontSize:9},{text:"Taxable/Unit",style:"tableHeader",alignment:"right",fontSize:8},{text:"GST",style:"tableHeader",alignment:"right",fontSize:9},{text:"Final/Unit",style:"tableHeader",alignment:"right",fontSize:9},{text:"Qty",style:"tableHeader",alignment:"right",fontSize:9},{text:"Total",style:"tableHeader",alignment:"right",fontSize:9}],r=["24%","7%","8%","8%","8%","9%","9%","5%","9%","5%","8%"],s=[a];return n.forEach((o,l)=>{const c=o.taxableValuePerUnit!==void 0?o.taxableValuePerUnit:this.calculatePharmacyTaxableValuePerUnit(o),f=o.finalValuePerUnit!==void 0?o.finalValuePerUnit:this.calculatePharmacyFinalValuePerUnit(o),d=o.itemTotal!==void 0?o.itemTotal:this.calculatePharmacyItemTotal(o);let A="N/A",m=!1;if(o.expiryDate){const b=typeof o.expiryDate=="number"?new Date(o.expiryDate*1e3):new Date(o.expiryDate);if(!isNaN(b.getTime())){A=this.formatReceiptDate(o.expiryDate);const S=new Date;S.setHours(0,0,0,0),b.setHours(0,0,0,0),m=b<S}}const h=[{text:o.medicineName||"N/A",fontSize:9,bold:!0}];o.marketer&&h.push({text:"  ",fontSize:9,bold:!0},{text:o.marketer,fontSize:9});const y=o.batchNumber||"N/A",g=o.mrp&&o.unitsPerPack&&o.unitsPerPack>0?o.mrp/o.unitsPerPack:0,_=[{text:h,style:"tableCell",fontSize:9},{text:o.hsnCode||"N/A",style:"tableCell",fontSize:9,alignment:"center"},{text:y,style:"tableCell",fontSize:9},{text:A,style:"tableCell",fontSize:9,color:m?"#c53030":"#1a202c"},{text:this.formatAmount(g),style:"tableCell",fontSize:9,alignment:"right"},{text:`${o.discountPercentage||0}%`,style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(c),style:"tableCell",fontSize:9,alignment:"right"},{text:`${o.gstPercentage||0}%`,style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(f),style:"tableCell",fontSize:9,alignment:"right"},{text:(o.quantityUnits||0).toString(),style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(d),style:"tableCell",fontSize:9,alignment:"right",bold:!0}];s.push(_)}),{table:{headerRows:1,widths:r,body:s},layout:{hLineWidth:(o,l)=>o===0||o===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#f1f5f9"},margin:[0,0,0,3]}}calculatePharmacyTaxableValuePerUnit(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=parseFloat(t.mrp)||0,a=parseFloat(t.unitsPerPack)||1,r=parseFloat(t.gstPercentage)||0,s=parseFloat(t.discountPercentage)||0,o=n/a,l=1+r/100,c=o/l,f=1-s/100;return c*f}calculatePharmacyFinalValuePerUnit(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=this.calculatePharmacyTaxableValuePerUnit(t),r=1+(parseFloat(t.gstPercentage)||0)/100;return n*r}calculatePharmacyItemTotal(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=this.calculatePharmacyFinalValuePerUnit(t),a=parseFloat(t.quantityUnits)||0;return n*a}createPharmacyBillAmountSummary(t){const n=[],s=(f,d,A=!1)=>{n.push({columns:[{width:95,text:f,fontSize:9,bold:A,alignment:"left"},{width:"*",text:d,fontSize:9,bold:A,alignment:"right",margin:[8,0,0,0]}],margin:[0,.5,0,.5]})};s("MRP",this.formatAmount(t.totalMrp||0));const o=t.totalDiscount||0;o>0&&s("Line item discount",`-${this.formatAmount(o)}`);const l=t.additionalDiscountAmount||0;l>0&&s("Additional discount",`-${this.formatAmount(l)}`),s("Net Amount",this.formatAmount(t.netAmount||0));const c=t.roundOff||0;return s("Round off",`${c>0?"+":""}${this.formatAmount(c)}`),s("Final Amount",this.formatAmount(t.finalAmount||0),!0),{stack:[{text:"Amount summary",style:"sectionHeader",margin:[0,0,0,5]},...n],margin:[0,0,0,8]}}createPharmacyBillGstDetails(t){const n=[],s=(o,l,c=!1)=>{n.push({columns:[{width:95,text:o,fontSize:9,bold:c,alignment:"left"},{width:"*",text:l,fontSize:9,bold:c,alignment:"right",margin:[8,0,0,0]}],margin:[0,.5,0,.5]})};return s("CGST",this.formatAmount(t.totalCgst||0)),s("SGST",this.formatAmount(t.totalSgst||0)),s("Total GST",this.formatAmount(t.totalGst||0),!0),{stack:[{text:"GST details",style:"sectionHeader",margin:[0,0,0,5]},...n],margin:[0,0,0,8]}}createPharmacyBillBottomSection(t){const n=this.createPharmacyBillAmountSummary(t),a=this.createPharmacyBillGstDetails(t),r={stack:[{text:"",fontSize:10},{text:"Sign",style:"sectionHeader",alignment:"center",margin:[0,0,0,0]}],margin:[10,0,10,0]},s=[];return t.payments&&t.payments.length>0?(s.push({text:"Payment Information",style:"sectionHeader",margin:[0,0,0,5]}),t.payments.forEach(o=>{const l=this.formatAmount(o.amount),c=o.mode||"Cash";s.push({text:`${l} - ${c}`,fontSize:9,margin:[0,2,0,2]})})):(s.push({text:"Payment Information",style:"sectionHeader",margin:[0,0,0,5]}),s.push({text:"No payments recorded",fontSize:9,color:"#718096",margin:[0,2,0,2]})),{columns:[{width:"25%",stack:[n],margin:[0,5,10,0]},{width:"25%",stack:[a],margin:[10,5,10,0]},{width:"25%",stack:[r],margin:[10,5,10,0]},{width:"25%",stack:s,margin:[10,5,0,0]}],margin:[0,10,0,0]}}createPharmacyBillFooter(t,n,a){return{margin:[40,5,40,15],table:{widths:["*"],body:[[{stack:[{text:"This is a computer generated bill",style:"disclaimer"}],border:[!1,!0,!1,!1],borderColor:["","#f1f5f9","",""]}]]},layout:"noBorders"}}createBillFooter(t,n,a){return{margin:[40,10,40,20],table:{widths:["*"],body:[[{stack:[{text:"Tax Invoice cum Bill of Supply - Computer Generated",style:"disclaimer"},{text:"This is a system generated bill and does not require physical signature.",style:"disclaimer"},...a?.clinicName?[{text:`${a.clinicName} - Professional Medical Services`,style:"medicalFooter"}]:[],{text:`Page ${t} of ${n}`,style:"medicalFooter"}],border:[!1,!0,!1,!1],borderColor:["","#f1f5f9","",""]}]]},layout:"noBorders"}}}const Lf=new e2e,Qw=["Dermatology","Cardiology","Dentistry","Endocrinology","Neurology","Pediatrics","Orthopedics","Psychiatry","Ophthalmology","Gynecology"],xT=["Tablet","Capsule","Chewable Tablet","Effervescent Tablet","Sublingual Tablet","Gelatin coated Tablet","Soft Gelatin Capsule","Soft Gelatine Capsule","Capsule ER","Capsule XR","Eye Capsule","Vaginal Capsule","Capsule Combipack","TabCap","RotaCap","Instacap","TransCap","AliCap","RediCap","RespiCap","NexCap","OxyCap","Vegicap","Captab","Caplet","Pellet","Softule","Opticops","Diskette","Grain","Powder","Powder for Injection","Powder for Oral Suspension","Powder for Inhalation","Powder for Infusion","Powder for Oral Solution","Dusting Powder","Dry Syrup","Dry Suspension","Syrup","Solution","Suspension","Lotion","Liquid","Oral Solution","Oral Suspension","Solution for Injection","Solution for Infusion","Solution for Inhalation","Suspension for Injection","Nasal Solution","Ophthalmic Solution","Ophthalmic Suspension","Redimix Suspension","Rediuse Suspension","Oral Liquid","Oral Emulsion","Emulsion","Ophthalmic Emulsion","Elixir","Tonic","Linctus","Mouth Wash","Mouthwash","Expectorant","Cream","Ointment","Gel","Eye Gel","Eye Ointment","Ophthalmic Gel","Oral Gel","Dental Gel","Vaginal Gel","Rectal Gel","Rectal Ointment","Rectal Cream","Vaginal Cream","Eye Cream","Paste","Oral Paste","Gum Paint","Mouth Paint","Paint","Toothpaste","Serum","Oil","Moisturiser","Shampoo","Conditioner","Face Wash","Soap","Scrub","Cleanser","Liniment","Foam","Drop","Eye Drop","Ear Drop","Oral Drop","Nasal Drop","Eye/Ear Drop","Spray","Nasal Spray","Mouth Spray","Vaginal Spray","Intranasal Spray","Inhaler","Respule","Autohaler","Multihaler","Transihaler","Transpule","Oxipule","Nebuliser","Aerosol","Injection","Infusion","Prefilled Syringe","Water for Injection","Solvent for Injection","Ampule","Ampoule","Vial","Patch","Transdermal Patch","Vaginal Suppository","Suppository","Pessary","Enema","Lozenge","Pastille","Chewing Gum","Gummy","Gum","Bio-Adhesive","Disintegrating Strip","Strip","Film","Gargle","Oral Jelly","Jelly","Nail Lacquer","Intrauterine system","Wipe","Kit","Combo Pack","Tablet Combikit","Sachet","Bottle","Pen","Disposable Pen","Pre-filled Pen","Cartridge","Tube","Jar","Pouch","Bar","Box","Toothbrush","Vaccine","Granule","Particle","Husk","Various","Unit"],Gw=["Strip","Bottle","Box","Sachet","Tube","Vial","Ampoule","Ampule","Cartridge","Pouch","Jar","Kit","Combo Pack","Unit","Bag","Can","Dose","Pack"],pH=[{label:"No Translation",value:"none"},{label:"Gujarati",value:"gujarati"},{label:"Marathi",value:"marathi"},{label:"Hindi",value:"hindi"},{label:"Kannada",value:"kannada"},{label:"Malayalam",value:"malayalam"},{label:"Telugu",value:"telugu"},{label:"Tamil",value:"tamil"}],gH=[{name:"Practo",value:"practo"},{name:"Eka.Care",value:"ekacare"},{name:"Healthplix",value:"healthplix"},{name:"Evamed Custom Template",value:"evamed-custom"},{name:"TatvaCare",value:"tatvacare"}],yH=[{name:"Patient Records",value:"patients",disabled:!1}],CT=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],UE=Object.freeze(Object.defineProperty({__proto__:null,dataImportTypes:yH,doctorSpecialization:Qw,emrSystems:gH,indianStates:CT,packTypeOptions:Gw,productPhysicalForm:xT,translationLanguages:pH},Symbol.toStringTag,{value:"Module"})),t2e={class:"d-flex align-center"},n2e={key:0,class:"d-flex justify-center align-center pdf-loading"},a2e={key:1,class:"pdf-viewer"},r2e={key:0,class:"d-flex flex-column align-center justify-center pdf-mobile-fallback"},s2e={class:"d-flex flex-wrap justify-center gap-3 mt-4"},o2e=["src"],i2e={key:2,class:"d-flex justify-center align-center pdf-error"},l2e={__name:"pdf-share-component",props:{contentType:{type:String,required:!0,validator:e=>["consultation","treatment-plan","receipt","bill","pharmacy-bill","certificate","leave-of-absence"].includes(e)},data:{type:Object,required:!0},patient:{type:Object,required:!0}},emits:["pdfGenerated"],setup(e,{emit:t}){const n=e,a=t,r=Ln(),s=ee(()=>r.getters["doctorModule/currentDoctor"]),{showWarning:o,showError:l}=la(),c=ee({get:()=>r.state.selectedTranslationLanguage,set:G=>r.dispatch("updateSelectedTranslationLanguage",G)}),f=ee(()=>{const G=n.data?.printConfigurations?.headerSize;return G!=null?Math.round(G*72):130}),d=R(!1),A=R(!1),m=R(null),p=R(null),h=R(null),y=R(!1),g=R(!1),_=R(!1);let b=null;const S={consultation:{title:"Prescription PDF",filenamePrefix:"prescription"},"treatment-plan":{title:"Treatment Plan PDF",filenamePrefix:"treatment-plan"},receipt:{title:"Payment Receipt PDF",filenamePrefix:"receipt"},bill:{title:"Tax Invoice cum Bill of Supply PDF",filenamePrefix:"bill"},"pharmacy-bill":{title:"Pharmacy Bill PDF",filenamePrefix:"pharmacy-bill"},certificate:{title:"Medical Fitness Certificate PDF",filenamePrefix:"certificate"},"leave-of-absence":{title:"Leave of Absence PDF",filenamePrefix:"leave-of-absence"}},B=ee(()=>S[n.contentType]);ee(()=>B.value.title);const F=ee(()=>{const G=n.patient.name||n.patient.patientName||"patient",W=new Date().toISOString().split("T")[0];return`${B.value.filenamePrefix}-${G}-${W}.pdf`}),T=R(""),E=R(!1),x=ee(()=>{const G=n.data.printConfigurations,W={...n.data,translatedPatientNotes:T.value,translationLanguage:c.value,translationFailed:c.value&&c.value!=="none"&&n.data.consultation?.patientNotes?.trim()&&!T.value};if(n.contentType!=="pharmacy-bill"&&n.contentType!=="certificate"&&n.contentType!=="leave-of-absence"&&(W.headerSize=f.value),(n.contentType==="certificate"||n.contentType==="leave-of-absence")&&(W.printConfigurations=G||{}),G&&G.doctorName)return W;const Q=s.value,O={doctorName:Q?.doctorName||"Doctor",doctorDegrees:Q?.doctorDegrees||"MBBS",doctorRegistrationNumber:Q?.doctorRegistrationNumber||"REG001",email:Q?.email||"",clinicAddress:Q?.clinicAddress||`Medical Center
Healthcare District`,contactNumber:Q?.contactNumber||"+1-234-567-8900",useHeader:!0,pageSize:"A4",doctorId:Q?.id||1};return{...W,printConfigurations:O}}),C=G=>{if(!G||typeof G!="string")return G;const W=G.trim();return/^https?:\/\//i.test(W)?W:`https://${W}`},D=async()=>{if(n.contentType!=="consultation"||!n.data.consultation?.patientNotes?.trim()||!c.value||c.value==="none"){T.value="";return}try{E.value=!0;const{translationLanguages:G}=await ns(async()=>{const{translationLanguages:j}=await Promise.resolve().then(()=>UE);return{translationLanguages:j}},void 0,import.meta.url),Q=G.find(j=>j.value===c.value)?.label||c.value,{translateText:O}=await ns(async()=>{const{translateText:j}=await import("./translationUtils-CLtSEBUw.js");return{translateText:j}},[],import.meta.url),ae=await O(n.data.consultation.patientNotes,Q);if(!ae||ae.trim()===""||ae===n.data.consultation.patientNotes){o(`Translation to ${Q} temporarily unavailable - showing original text`),T.value="";return}T.value=ae}catch(G){console.error("Error translating patient notes:",G);const{translationLanguages:W}=await ns(async()=>{const{translationLanguages:ae}=await Promise.resolve().then(()=>UE);return{translationLanguages:ae}},void 0,import.meta.url),O=W.find(ae=>ae.value===c.value)?.label||c.value;o(`Translation to ${O} temporarily unavailable - showing original text`),T.value=""}finally{E.value=!1}};Ge(()=>[n.data,n.patient],async()=>{_.value||(n.contentType==="consultation"&&c.value&&c.value!=="none"&&n.data.consultation?.patientNotes?.trim()?await D():T.value="",await new Promise(G=>setTimeout(G,100)),L())});const U=async(G,W)=>{b&&(clearTimeout(b),b=null),b=setTimeout(async()=>{G!==W&&n.data&&n.patient&&!_.value&&(n.contentType==="consultation"&&G&&G!=="none"&&n.data.consultation?.patientNotes?.trim()?await D():T.value="",await new Promise(Q=>setTimeout(Q,100)),L()),b=null},400)};Ge(c,(G,W)=>{U(G,W)}),An(async()=>{n.contentType==="consultation"&&c.value&&c.value!=="none"&&n.data.consultation?.patientNotes?.trim()&&await D(),await new Promise(G=>setTimeout(G,200)),L()});const L=async()=>{if(_.value){console.log("PDF generation already in progress, skipping...");return}try{_.value=!0,console.log(`Generating ${n.contentType} PDF with Professional PDFMake...`),console.log("Data:",x.value),console.log("Patient:",n.patient),d.value=!0,p.value=null,A.value=!1,m.value=null;let G;if(n.contentType==="consultation"?G=await Lf.generateConsultationPDF(x.value,n.patient):n.contentType==="treatment-plan"?G=await Lf.generateTreatmentPlanPDF(x.value,n.patient):n.contentType==="receipt"?G=await Lf.generateReceiptPDF(x.value,n.patient):n.contentType==="bill"?G=await Lf.generateBillPDF(x.value,n.patient):n.contentType==="pharmacy-bill"?G=await Lf.generatePharmacyBillPDF(x.value,n.patient):(n.contentType==="certificate"||n.contentType==="leave-of-absence")&&((x.value.documentData?.documentType||(n.contentType==="leave-of-absence"?"leave-of-absence":"medical-fitness-certificate"))==="leave-of-absence"?G=await Lf.generateLeaveOfAbsencePDF(x.value.documentData,n.patient,x.value.printConfigurations):G=await Lf.generateMedicalFitnessCertificatePDF(x.value.documentData,n.patient,x.value.printConfigurations)),!G)throw new Error(`PDF generation not supported for content type: ${n.contentType}`);G.getBlob(W=>{d.value=!1,_.value=!1,A.value=!0,h.value=W;const Q=URL.createObjectURL(W);m.value=Q,a("pdfGenerated",W),console.log("Professional PDF generation with PDFMake completed successfully")})}catch(G){console.error("Error generating Professional PDF with PDFMake:",G),p.value="Failed to generate PDF. Please try again.",d.value=!1,_.value=!1}},H=async()=>{m.value&&(URL.revokeObjectURL(m.value),m.value=null),h.value=null,await L()},oe=async()=>{if(!h.value){console.error("No PDF to share");return}try{y.value=!0;const G=await ce(h.value),W=await j3(G,F.value);if(W.success){const Q=W.data.file_url;await de(Q),alert("Please check the browser window to complete sharing PDF via WhatsApp.")}else throw new Error(`Failed to upload PDF: ${W.error}`)}catch(G){console.error("Error sharing PDF:",G),alert(`Failed to share PDF: ${G.message}`)}finally{y.value=!1}},de=async G=>{const W=s.value?.doctorName||"Your Doctor",Q=n.patient.name||n.patient.patientName||"Patient",O=n.patient.contactNumber||n.patient.phoneNumber;let ae;if(n.contentType==="consultation"){const J=mr(x.value.consultation.consultationDate),ie=x.value.consultation.followupDate?mr(x.value.consultation.followupDate):"Not scheduled";ae=`Hi ${Q},

Your prescription from Dr.${W} for consultation on ${J} is ready.

 **View your prescription:** ${G}
 (Please download document within 24 hours)

 Please follow the dosage instructions carefully and complete the full course of medication. 
 Please schedule your follow-up appointment for: ${ie}.

 For any questions, please contact your doctor.`,x.value.doctor?.doctorReviewLink&&(ae+=`

 Kindly leave your feedback for Dr.${W}: ${C(x.value.doctor.doctorReviewLink)}`),ae+=`

Best regards,
Dr.${W}`}else if(n.contentType==="treatment-plan"){const J=x.value.treatmentPlan.treatmentPlanName||"Treatment Plan",ie=mr(Tn());ae=`Hello ${Q},

Your treatment plan from Dr. ${W} is ready.

 **Treatment Plan:** ${J}
 **Date:** ${ie}

 **View your treatment plan:** ${G}
 (Please download document within 24 hours)

 Please follow the treatment schedule and contact us for any questions.

Best regards,
Dr. ${W}`}else if(n.contentType==="receipt"){const J=x.value.consultation.receiptNumber||"Receipt",ie=mr(x.value.consultation.receiptDate||Tn());ae=`Hello ${Q},

Your payment receipt from Dr. ${W} is ready.

 **Receipt Number:** ${J}
 **Receipt Date:** ${ie}

 **View your receipt:** ${G}
 (Please download document within 24 hours)

 Thank you for your payment. Please keep this receipt for your records.

Best regards,
Dr. ${W}`}else if(n.contentType==="bill"){const J=x.value.consultation.billNumber||"Bill",ie=mr(x.value.consultation.billDate||Tn()),X=x.value.consultation.grandTotal||0;ae=`Hello ${Q},

Your tax invoice cum bill of supply from Dr. ${W} is ready.

 **Bill Number:** ${J}
 **Bill Date:** ${ie}
 **Total Amount:** ${X.toFixed(2)}

 **View your bill:** ${G}
 (Please download document within 24 hours)

Best regards,
Dr. ${W}`}else if(n.contentType==="certificate"){const J=x.value.documentData||{},ie=J.documentType||"medical-fitness-certificate",X=J.certificateDate?mr(J.certificateDate):mr(Tn());if(ie==="leave-of-absence"){const fe=J.activity||"",M=J.reason||"",z=J.tillDate?mr(J.tillDate):"";ae=`Hello ${Q},

Your leave of absence certificate from Dr. ${W} is ready.

 **Certificate Type:** Leave of Absence Certificate
 **Document Date:** ${X}
${fe?` **From:** ${fe}`:""}
${M?` **Reason:** ${M}`:""}
${z?` **Valid Till:** ${z}`:""}

 **View your certificate:** ${G}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${W}`}else{const fe=J.purpose||"medical fitness",M=J.validityPeriod||"";ae=`Hello ${Q},

Your medical fitness certificate from Dr. ${W} is ready.

 **Certificate Type:** Medical Fitness Certificate
 **Certificate Date:** ${X}
${` **Purpose:** ${fe}`}
${M?` **Validity:** ${M}`:""}

 **View your certificate:** ${G}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${W}`}}else if(n.contentType==="leave-of-absence"){const J=x.value.documentData||{},ie=J.certificateDate?mr(J.certificateDate):mr(Tn()),X=J.activity||"",fe=J.reason||"",M=J.tillDate?mr(J.tillDate):"";ae=`Hello ${Q},

Your leave of absence certificate from Dr. ${W} is ready.

 **Certificate Type:** Leave of Absence Certificate
 **Document Date:** ${ie}
${X?` **From:** ${X}`:""}
${fe?` **Reason:** ${fe}`:""}
${M?` **Valid Till:** ${M}`:""}

 **View your certificate:** ${G}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${W}`}else if(n.contentType==="pharmacy-bill"){const J=x.value.pharmacyBill?.identifier||"Bill",ie=mr(x.value.pharmacyBill?.billDate||Tn()),X=x.value.pharmacyBill?.finalAmount||0;ae=`Hello ${Q},

Your pharmacy bill from Dr. ${W} is ready.

 **Bill Number:** ${J}
 **Bill Date:** ${ie}
 **Total Amount:** ${X.toFixed(2)}

 **View your bill:** ${G}
 (Please download document within 24 hours)

 Thank you for your purchase.

Best regards,
Dr. ${W}`}ae||(ae=`Hello ${Q},

Your document from Dr. ${W} is ready.

 **View your document:** ${G}
 (Please download document within 24 hours)

Best regards,
Dr. ${W}`);const j=`https://api.whatsapp.com/send?phone=${O}&text=${encodeURIComponent(ae)}`;try{const{ipcRenderer:J}=window.require("electron"),ie=await J.invoke("open-external",j);ie.success?console.log("Successfully opened WhatsApp with system default browser"):(console.error("Failed to open WhatsApp:",ie.error),window.open(j,"_blank","noopener,noreferrer"))}catch(J){console.error("Failed to use Electron IPC:",J),window.open(j,"_blank","noopener,noreferrer")}},te=async()=>{if(!h.value){console.error("No PDF to share");return}try{g.value=!0;const G=await ce(h.value),W=await j3(G,F.value);if(W.success){const Q=W.data.file_url;await q(Q),alert("Please check your email client to complete sharing PDF via email.")}else throw new Error(`Failed to upload PDF: ${W.error}`)}catch(G){console.error("Error sharing PDF via email:",G),alert(`Failed to share PDF via email: ${G.message}`)}finally{g.value=!1}},q=async G=>{const W=s.value?.doctorName||"Your Doctor",Q=n.patient.name||n.patient.patientName||"Patient",O=n.patient.email||n.patient.emailAddress;let ae,j;if(n.contentType==="consultation"){const ie=mr(x.value.consultation.consultationDate),X=x.value.consultation.followupDate?mr(x.value.consultation.followupDate):"Not scheduled";ae=`Prescription - Consultation ${ie} - Dr. ${W}`,j=`Dear ${Q},

Your prescription from Dr. ${W} for the consultation on ${ie} is ready for review.

You can access your prescription document by clicking the link below:

${G}

Please note: This document will be available for download for 24 hours.

Important Instructions:
- Please follow the dosage instructions carefully
- Complete the full course of medication as prescribed
- Schedule your follow-up appointment for: ${X}

If you have any questions or concerns, please contact our clinic directly.`,x.value.doctor?.doctorReviewLink&&(j+=`

We value your feedback. Please share your experience: ${C(x.value.doctor.doctorReviewLink)}`),j+=`

Best regards,
Dr. ${W}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="treatment-plan"){const ie=x.value.treatmentPlan.treatmentPlanName||"Treatment Plan",X=mr(Tn());ae=`Treatment Plan - ${ie} - Dr. ${W}`,j=`Dear ${Q},

Your treatment plan from Dr. ${W} has been prepared.

Treatment Plan Details:
- Plan Name: ${ie}
- Date Created: ${X}

You can access your treatment plan document by clicking the link below:

${G}

Please note: This document will be available for download for 24 hours.

Please follow the treatment schedule as outlined in the document. If you have any questions or concerns, please contact our clinic directly.

Best regards,
Dr. ${W}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="receipt"){const ie=x.value.consultation.receiptNumber||"Receipt",X=mr(x.value.consultation.receiptDate||Tn());ae=`Payment Receipt - ${ie} - Dr. ${W}`,j=`Dear ${Q},

Your payment receipt from Dr. ${W} is ready.

Receipt Details:
- Receipt Number: ${ie}
- Receipt Date: ${X}

You can access your receipt document by clicking the link below:

${G}

Please note: This document will be available for download for 24 hours.

Thank you for your payment. Please keep this receipt for your records.

Best regards,
Dr. ${W}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="bill"){const ie=x.value.consultation.billNumber||"Bill",X=mr(x.value.consultation.billDate||Tn()),fe=x.value.consultation.grandTotal||0;ae=`Tax Invoice - ${ie} - Dr. ${W}`,j=`Dear ${Q},

Your tax invoice cum bill of supply from Dr. ${W} is ready.

Invoice Details:
- Bill Number: ${ie}
- Bill Date: ${X}
- Total Amount: ${fe.toFixed(2)}

You can access your invoice document by clicking the link below:

${G}

Please note: This document will be available for download for 24 hours.

Best regards,
Dr. ${W}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="pharmacy-bill"){const ie=x.value.pharmacyBill?.identifier||"Bill",X=mr(x.value.pharmacyBill?.billDate||Tn()),fe=x.value.pharmacyBill?.finalAmount||0;ae=`Pharmacy Bill - ${ie} - Dr. ${W}`,j=`Dear ${Q},

Your pharmacy bill from Dr. ${W} is ready.

Bill Details:
- Bill Number: ${ie}
- Bill Date: ${X}
- Total Amount: ${fe.toFixed(2)}

You can access your pharmacy bill document by clicking the link below:

${G}

Please note: This document will be available for download for 24 hours.

Thank you for your purchase.

Best regards,
Dr. ${W}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="certificate"){const ie=x.value.documentData||{},X=ie.certificateDate?mr(ie.certificateDate):mr(Tn()),fe=ie.purpose||"medical fitness",M=ie.validityPeriod||"";ae=`Medical Fitness Certificate - Dr. ${W}`,j=`Dear ${Q},

Your medical fitness certificate from Dr. ${W} is ready.

Certificate Details:
- Certificate Type: Medical Fitness Certificate
- Certificate Date: ${X}
${`- Purpose: ${fe}`}
${M?`- Validity: ${M}`:""}

You can access your certificate document by clicking the link below:

${G}

Please note: This document will be available for download for 24 hours.

Please keep this certificate for your records.

Best regards,
Dr. ${W}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="leave-of-absence"){const ie=x.value.documentData||{},X=ie.certificateDate?mr(ie.certificateDate):mr(Tn()),fe=ie.activity||"",M=ie.reason||"",z=ie.tillDate?mr(ie.tillDate):"";ae=`Leave of Absence Certificate - Dr. ${W}`,j=`Dear ${Q},

Your leave of absence certificate from Dr. ${W} is ready.

Certificate Details:
- Certificate Type: Leave of Absence Certificate
- Document Date: ${X}
${fe?`- From: ${fe}`:""}
${M?`- Reason: ${M}`:""}
${z?`- Valid Till: ${z}`:""}

You can access your certificate document by clicking the link below:

${G}

Please note: This document will be available for download for 24 hours.

Please keep this certificate for your records.

Best regards,
Dr. ${W}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}(!ae||!j)&&(ae=`Document from Dr. ${W}`,j=`Dear ${Q},

Your document from Dr. ${W} is ready.

You can access your document by clicking the link below:

${G}

Please note: This document will be available for download for 24 hours.

Best regards,
Dr. ${W}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`);let J="mailto:";O&&(J+=encodeURIComponent(O)),J+=`?subject=${encodeURIComponent(ae)}&body=${encodeURIComponent(j)}`;try{const{ipcRenderer:ie}=window.require("electron"),X=await ie.invoke("open-external",J);X.success?console.log("Successfully opened email client with system default email application"):(console.error("Failed to open email client:",X.error),window.open(J,"_blank","noopener,noreferrer"))}catch(ie){console.error("Failed to use Electron IPC:",ie),window.open(J,"_blank","noopener,noreferrer")}},ce=G=>new Promise((W,Q)=>{const O=new FileReader;O.readAsDataURL(G),O.onload=()=>{const ae=O.result.split(",")[1];W(ae)},O.onerror=ae=>Q(ae)}),le=()=>{console.log("PDF loaded in iframe")},Z=()=>{if(m.value)try{const G=window.open(m.value,"_blank","noopener,noreferrer");if(!G||G.closed){const W=document.createElement("a");W.href=m.value,W.target="_blank",W.rel="noopener noreferrer",document.body.appendChild(W),W.click(),document.body.removeChild(W)}}catch(G){console.error("Failed to open PDF:",G),ne()}},ne=()=>{if(!(!m.value||!h.value))try{const G=document.createElement("a");G.href=m.value,G.download=F.value,G.style.display="none",document.body.appendChild(G),G.click(),document.body.removeChild(G)}catch(G){console.error("Failed to download PDF:",G),l("Could not download PDF. Try Open PDF instead.")}};return Ri(()=>{b&&(clearTimeout(b),b=null),m.value&&URL.revokeObjectURL(m.value)}),(G,W)=>{const Q=I("v-select"),O=I("v-icon"),ae=I("v-btn"),j=I("v-tooltip"),J=I("v-col"),ie=I("v-row"),X=I("v-card"),fe=I("v-progress-circular"),M=I("v-alert-title"),z=I("v-alert");return P(),Ae(ze,null,[i(ie,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[i(J,{cols:"12"},{default:u(()=>[i(X,{rounded:"0",class:"pa-0",color:"surfaceContainerHigh"},{default:u(()=>[i(ie,{"no-gutters":"",align:"center",class:"px-2 py-1"},{default:u(()=>[i(J,{cols:"12",class:"d-flex align-center justify-end"},{default:u(()=>[v("div",t2e,[e.contentType==="consultation"?(P(),he(Q,{key:0,modelValue:c.value,"onUpdate:modelValue":W[0]||(W[0]=se=>c.value=se),items:Oe(pH),"item-title":"label","item-value":"value",label:"Translation Language",density:"compact",variant:"underlined",clearable:"",style:{"max-width":"200px"},class:"text-caption compact-select mr-2","hide-details":"",disabled:d.value},null,8,["modelValue","items","disabled"])):ge("",!0),i(j,{text:"WhatsApp PDF"},{activator:u(({props:se})=>[i(ae,Ie({rounded:"x-small",size:"small",onClick:oe,class:"mr-1 btn-hover-base",disabled:!A.value,loading:y.value},se),{default:u(()=>[i(O,{size:"large"},{default:u(()=>[...W[1]||(W[1]=[v("img",{src:G0,alt:"Share PDF",class:"whatsapp-icon"},null,-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),i(j,{text:"Email PDF"},{activator:u(({props:se})=>[i(ae,Ie({rounded:"x-small",size:"small",onClick:te,class:"mr-1 btn-hover-base",disabled:!A.value,loading:g.value},se),{default:u(()=>[i(O,{size:"large"},{default:u(()=>[...W[2]||(W[2]=[v("img",{src:wpe,alt:"Email PDF",class:"email-icon"},null,-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),i(ae,{rounded:"x-small",size:"small",variant:"outlined",onClick:H,class:"btn-hover-base"},{default:u(()=>[i(O,{size:"large"},{default:u(()=>[...W[3]||(W[3]=[v("img",{src:Dg,alt:"Refresh"},null,-1)])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(ie,{"no-gutters":"",class:"pdf-row"},{default:u(()=>[i(J,{cols:"12",class:"pdf-container"},{default:u(()=>[d.value?(P(),Ae("div",n2e,[i(fe,{indeterminate:"",color:"primary",size:"64"}),W[4]||(W[4]=v("span",{class:"ml-4"},"Generating PDF...",-1))])):m.value?(P(),Ae("div",a2e,[Oe(oi)?(P(),Ae("div",r2e,[i(O,{size:"80",color:"primary"},{default:u(()=>[...W[5]||(W[5]=[N("mdi-file-pdf-box",-1)])]),_:1}),W[10]||(W[10]=v("h3",{class:"mt-4"},"PDF ready",-1)),W[11]||(W[11]=v("p",{class:"text-caption text-grey mt-2"},"Tap a button to view or save",-1)),v("div",s2e,[i(ae,{color:"primary",variant:"elevated",size:"large",onClick:Z,class:"px-6"},{default:u(()=>[i(O,{left:""},{default:u(()=>[...W[6]||(W[6]=[N("mdi-open-in-new",-1)])]),_:1}),W[7]||(W[7]=N(" Open PDF ",-1))]),_:1}),i(ae,{color:"secondary",variant:"outlined",size:"large",onClick:ne,class:"px-6"},{default:u(()=>[i(O,{left:""},{default:u(()=>[...W[8]||(W[8]=[N("mdi-download",-1)])]),_:1}),W[9]||(W[9]=N(" Download PDF ",-1))]),_:1})])])):(P(),Ae("iframe",{key:1,src:m.value,width:"100%",height:"100%",style:{border:"none","border-radius":"8px"},onLoad:le},null,40,o2e))])):p.value?(P(),Ae("div",i2e,[i(z,{type:"error",variant:"tonal"},{append:u(()=>[i(ae,{onClick:H,variant:"text"},{default:u(()=>[...W[13]||(W[13]=[N("Retry",-1)])]),_:1})]),default:u(()=>[i(M,null,{default:u(()=>[...W[12]||(W[12]=[N("Error generating PDF",-1)])]),_:1}),N(" "+K(p.value)+" ",1)]),_:1})])):ge("",!0)]),_:1})]),_:1})],64)}}},Sh=en(l2e,[["__scopeId","data-v-2772a3c7"]]),u2e={class:"text-center"},c2e={class:"text-center"},d2e={class:"text-body-2 text-medium-emphasis mb-4"},f2e={class:"pa-1"},A2e={class:"text-body-1 font-weight-medium"},m2e={class:"text-body-2 text-medium-emphasis"},v2e={class:"pa-1"},h2e={class:"text-body-1 font-weight-medium"},p2e={class:"text-body-2 text-medium-emphasis"},g2e={class:"pa-1"},y2e={class:"text-body-1 font-weight-medium"},_2e={class:"text-body-2 text-medium-emphasis"},w2e={key:0,class:"d-flex align-center"},b2e={key:1,class:"text-body-2 text-error"},x2e={key:2,class:"d-flex flex-column"},C2e={class:"text-body-2 font-weight-medium"},S2e={class:"text-caption text-medium-emphasis"},E2e={key:0},k2e={key:1},B2e={key:0,class:"text-caption text-medium-emphasis mt-1"},T2e={key:0},I2e={class:"text-left"},F2e={class:"text-left"},P2e={class:"text-left"},D2e={class:"text-left"},U2e={class:"text-left"},R2e={key:0,class:"text-body-2 mb-1"},N2e={class:"text-body-2 mb-1"},V2e={class:"text-body-2 mb-1"},L2e={key:0,class:"text-body-2 mb-1"},M2e={class:"text-subtitle-1 font-weight-bold"},O2e={class:"text-h6"},H2e={class:"text-h6 text-success"},$2e={key:0,class:"text-center pa-4"},Q2e={class:"text-left"},G2e={class:"text-left"},z2e={class:"text-right"},W2e={class:"text-right"},K2e={class:"text-center pa-4"},j2e={__name:"payment-receipt-view",props:{receiptId:{type:[String,Number],required:!0}},emits:["close","edit-receipt"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=Ln(),l=ee(()=>o.getters["doctorModule/currentDoctor"]),c=ee(()=>l.value?.doctorName||"Unknown Doctor"),f=R(!1),d=R(!1),A=R(null),m=R(null),p=R([]),h=R("view"),y=R({}),g=R(null),_=R(null),b=R(!1),S=R(null),B=ee(()=>m.value?.services||[]),F=vT(B,ee(()=>m.value?.additionalDiscount||0)),{subtotal:T,totalLineDiscount:E,finalGrandTotal:x,calculateServiceTotal:C}=F,D=ee(()=>Array.isArray(p.value)?p.value.reduce((G,W)=>G+(parseFloat(W.amount)||0),0):0),U=ee(()=>Math.max(0,x.value-D.value)),L=ee(()=>m.value?{patientName:m.value.patientName||"Unknown Patient",patientId:m.value.patientId||"N/A",patientContactNumber:m.value.patientContactNumber,doctorName:c.value,receiptNumber:m.value.identifier,receiptDate:m.value.paymentReceiptDate,appointmentDate:m.value.appointmentDate,services:m.value.services||[],subtotal:T.value,totalLineDiscount:E.value,additionalDiscount:parseFloat(m.value.additionalDiscount)||0,grandTotal:x.value,totalPaid:D.value,balanceDue:U.value,payments:p.value||[]}:null),H=async()=>{if(!n.receiptId){A.value="No receipt ID provided";return}f.value=!0,A.value=null;try{console.log("Loading receipt data for ID:",n.receiptId);const G=await XM(n.receiptId);if(G.error)throw new Error(G.error.message||"Failed to load receipt");m.value=G.data,console.log("Receipt data loaded:",m.value),G.data.treatmentPlanId&&(g.value=G.data.treatmentPlanId,await oe()),await de(),await te()}catch(G){console.error("Error loading receipt data:",G),A.value=G.message||"Failed to load receipt data",s(A.value)}finally{f.value=!1}},oe=async()=>{if(!g.value){_.value=null;return}b.value=!0,S.value=null;try{console.log("Loading treatment plan data for ID:",g.value);const G=await CA(g.value);if(G.error)throw new Error(G.error.message||"Failed to load treatment plan");_.value=G.data,console.log("Treatment plan data loaded:",_.value)}catch(G){console.error("Error loading treatment plan data:",G),S.value=G.message||"Failed to load treatment plan"}finally{b.value=!1}},de=async()=>{if(!n.receiptId){p.value=[];return}d.value=!0;try{console.log("Loading payments for receipt ID:",n.receiptId);const G=await Ng(n.receiptId);G.success&&Array.isArray(G.data)?(p.value=G.data,console.log("Payments loaded:",p.value)):(console.warn("No payments found or invalid response:",G),p.value=[])}catch(G){console.error("Error loading receipt payments:",G),p.value=[]}finally{d.value=!1}},te=async()=>{try{const G=o.state.doctorModule.doctorId;if(!G){console.warn("No doctor ID available for print configurations");return}const W=await Ch(G);y.value=W.data||{},console.log("Print configurations fetched:",y.value)}catch(G){console.error("Error fetching print configs:",G),s("Failed to load print configurations")}},q=G=>{if(!G)return"";try{return new Date(G).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return G}},ce=G=>{if(!G)return"";try{return new Date(G*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return G}},le=()=>{console.log("Edit receipt:",n.receiptId),a("edit-receipt",n.receiptId)},Z=G=>{console.log("Receipt PDF generated successfully:",G),r("Receipt PDF generated successfully")},ne=()=>{a("close")};return An(()=>{H()}),(G,W)=>{const Q=I("v-icon"),O=I("v-btn"),ae=I("v-card-title"),j=I("v-col"),J=I("v-row"),ie=I("v-tab"),X=I("v-tabs"),fe=I("v-progress-circular"),M=I("v-label"),z=I("v-card-text"),se=I("v-card"),be=I("v-table"),Fe=I("v-divider"),ye=I("v-container"),Qe=I("v-tabs-window-item"),_e=I("v-tabs-window");return P(),he(se,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[i(J,{"no-gutters":""},{default:u(()=>[i(j,{cols:"12"},{default:u(()=>[i(ae,{class:"d-flex align-center justify-space-between"},{default:u(()=>[W[3]||(W[3]=v("span",null,"Payment Receipt",-1)),i(O,{onClick:ne,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(Q,{size:"18"},{default:u(()=>[...W[2]||(W[2]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(J,{"no-gutters":""},{default:u(()=>[i(j,{cols:"12"},{default:u(()=>[i(X,{modelValue:h.value,"onUpdate:modelValue":W[0]||(W[0]=Se=>h.value=Se),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[i(ie,{value:"view"},{default:u(()=>[i(Q,{start:""},{default:u(()=>[...W[4]||(W[4]=[N("mdi-eye",-1)])]),_:1}),W[5]||(W[5]=N(" View Receipt ",-1))]),_:1}),i(ie,{value:"share"},{default:u(()=>[i(Q,{start:""},{default:u(()=>[...W[6]||(W[6]=[N("mdi-share-variant",-1)])]),_:1}),W[7]||(W[7]=N(" Share Receipt ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(J,{"no-gutters":""},{default:u(()=>[i(j,{cols:"12",class:"scroll-element"},{default:u(()=>[i(_e,{modelValue:h.value,"onUpdate:modelValue":W[1]||(W[1]=Se=>h.value=Se)},{default:u(()=>[i(Qe,{value:"view"},{default:u(()=>[f.value?(P(),he(J,{key:0,"no-gutters":""},{default:u(()=>[i(j,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",u2e,[i(fe,{indeterminate:"",color:"primary",size:"64"}),W[8]||(W[8]=v("div",{class:"mt-4 text-subtitle-1"},"Loading receipt...",-1))])]),_:1})]),_:1})):A.value?(P(),he(J,{key:1,"no-gutters":""},{default:u(()=>[i(j,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",c2e,[i(Q,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...W[9]||(W[9]=[N("mdi-alert-circle",-1)])]),_:1}),W[11]||(W[11]=v("div",{class:"text-h6 mb-2"},"Failed to Load Receipt",-1)),v("div",d2e,K(A.value),1),i(O,{color:"primary",onClick:H,"prepend-icon":"mdi-refresh"},{default:u(()=>[...W[10]||(W[10]=[N(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):m.value?(P(),he(ye,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[i(se,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[i(z,{class:"pb-1 pt-2"},{default:u(()=>[i(J,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(j,{cols:"4"},{default:u(()=>[v("div",f2e,[i(M,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...W[12]||(W[12]=[N("Patient Information",-1)])]),_:1}),v("div",A2e,K(m.value.patientName||"Unknown Patient"),1),v("div",m2e,"ID: "+K(m.value.patientId||"N/A"),1)])]),_:1}),i(j,{cols:"4"},{default:u(()=>[v("div",v2e,[i(M,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...W[13]||(W[13]=[N("Appointment Details",-1)])]),_:1}),v("div",h2e,"Dr. "+K(c.value),1),v("div",p2e,"Date: "+K(q(m.value.appointmentDate)),1)])]),_:1}),i(j,{cols:"4"},{default:u(()=>[v("div",g2e,[i(M,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...W[14]||(W[14]=[N("Receipt Information",-1)])]),_:1}),v("div",y2e,K(m.value.identifier),1),v("div",_2e,"Date: "+K(q(m.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),g.value?(P(),he(se,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(z,{class:"pb-2"},{default:u(()=>[i(J,{"no-gutters":"",align:"center",class:"mb-2"},{default:u(()=>[i(j,{cols:"3",class:"d-flex align-center"},{default:u(()=>[...W[15]||(W[15]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),i(j,{cols:"9"},{default:u(()=>[b.value?(P(),Ae("div",w2e,[i(fe,{indeterminate:"",size:"16",color:"primary",class:"mr-2"}),W[16]||(W[16]=v("span",{class:"text-body-2"},"Loading treatment plan...",-1))])):S.value?(P(),Ae("div",b2e,[i(Q,{size:"16",class:"mr-1"},{default:u(()=>[...W[17]||(W[17]=[N("mdi-alert-circle",-1)])]),_:1}),N(" "+K(S.value),1)])):_.value?(P(),Ae("div",x2e,[v("div",C2e,K(_.value.treatmentPlanName),1),v("div",S2e,[N(" Status: "+K(_.value.status)+" ",1),_.value.startDate?(P(),Ae("span",E2e,"  Start: "+K(q(_.value.startDate)),1)):ge("",!0),_.value.endDate?(P(),Ae("span",k2e,"  End: "+K(q(_.value.endDate)),1)):ge("",!0)]),_.value.notes?(P(),Ae("div",B2e,[W[18]||(W[18]=v("strong",null,"Notes:",-1)),N(" "+K(_.value.notes.substring(0,80)),1),_.value.notes.length>80?(P(),Ae("span",T2e,"...")):ge("",!0)])):ge("",!0)])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0),i(se,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(z,{class:"pb-2"},{default:u(()=>[W[23]||(W[23]=v("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),i(be,{density:"compact",class:"mb-3"},{default:u(()=>[W[19]||(W[19]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"300px"}},"Description"),v("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),v("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),v("th",{class:"text-left",style:{width:"100px"}},"Quantity"),v("th",{class:"text-left",style:{width:"120px"}},"Total ()")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(m.value.services,(Se,Ee)=>(P(),Ae("tr",{key:Ee},[v("td",null,K(Ee+1),1),v("td",I2e,K(Se.serviceDescription),1),v("td",F2e,K(Oe(hr)(Se.baseCost)),1),v("td",P2e,K(Oe(hr)(Se.discountAmount)),1),v("td",D2e,K(Se.quantity),1),v("td",U2e,K(Oe(hr)(Oe(C)(Se))),1)]))),128))])]),_:1}),i(Fe,{class:"mb-3"}),i(J,{"no-gutters":""},{default:u(()=>[i(j,{cols:"8",class:"text-right"},{default:u(()=>[W[20]||(W[20]=v("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),W[21]||(W[21]=v("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),m.value.additionalDiscount>0?(P(),Ae("div",R2e,"Additional Discount:")):ge("",!0),W[22]||(W[22]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),i(j,{cols:"4",class:"text-right"},{default:u(()=>[v("div",N2e,K(Oe(hr)(Oe(T))),1),v("div",V2e,"-"+K(Oe(hr)(Oe(E))),1),m.value.additionalDiscount>0?(P(),Ae("div",L2e,"-"+K(Oe(hr)(m.value.additionalDiscount)),1)):ge("",!0),v("div",M2e,K(Oe(hr)(Oe(x))),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(se,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(z,{class:"pb-2"},{default:u(()=>[W[32]||(W[32]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),i(J,{"no-gutters":"",class:"mb-3"},{default:u(()=>[i(j,{cols:"4"},{default:u(()=>[W[24]||(W[24]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",O2e,K(Oe(hr)(Oe(x))),1)]),_:1}),i(j,{cols:"4"},{default:u(()=>[W[25]||(W[25]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",H2e,K(Oe(hr)(D.value)),1)]),_:1}),i(j,{cols:"4"},{default:u(()=>[W[26]||(W[26]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),v("div",{class:lt(["text-h6",U.value>0?"text-error":"text-success"])},K(Oe(hr)(U.value)),3)]),_:1})]),_:1}),d.value?(P(),Ae("div",$2e,[i(fe,{indeterminate:"",size:"32",color:"primary"}),W[27]||(W[27]=v("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):p.value&&p.value.length>0?(P(),Ae(ze,{key:1},[i(Fe,{class:"mb-3"}),W[29]||(W[29]=v("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),i(be,{density:"compact"},{default:u(()=>[W[28]||(W[28]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Date"),v("th",{class:"text-left"},"Mode"),v("th",{class:"text-right"},"Amount"),v("th",{class:"text-right"},"Created")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(p.value,Se=>(P(),Ae("tr",{key:Se.id},[v("td",Q2e,K(q(Se.paymentDate)),1),v("td",G2e,K(Se.mode),1),v("td",z2e,K(Oe(hr)(Se.amount)),1),v("td",W2e,K(ce(Se.createdAt)),1)]))),128))])]),_:1})],64)):(P(),Ae(ze,{key:2},[i(Fe,{class:"mb-3"}),v("div",K2e,[i(Q,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...W[30]||(W[30]=[N("mdi-currency-inr",-1)])]),_:1}),W[31]||(W[31]=v("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))]),_:1})]),_:1}),i(se,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[i(z,{class:"d-flex justify-center gap-3 pb-2"},{default:u(()=>[i(O,{color:"secondary",variant:"outlined",onClick:le,"prepend-icon":"mdi-pencil",class:"btn-hover-base"},{default:u(()=>[...W[33]||(W[33]=[N(" Edit Receipt ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1}),i(Qe,{value:"share",class:"h-100"},{default:u(()=>[i(J,{"no-gutters":"",class:"h-100"},{default:u(()=>[i(j,{cols:"12"},{default:u(()=>[i(Sh,{"content-type":"receipt",data:{consultation:L.value,printConfigurations:y.value,doctor:l.value},patient:{name:m.value?.patientName,patientName:m.value?.patientName,patientId:m.value?.patientId,contactNumber:m.value?.patientContactNumber},onPdfGenerated:Z},null,8,["data","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},_H=en(j2e,[["__scopeId","data-v-2cbfd0d5"]]),wH=async e=>{try{if(!e)throw new Error("Doctor ID is required");return{data:(await it.get(`/billreceipt/next-identifier/${e}`)).data.data,error:null}}catch(t){return console.error("Error getting next bill identifier:",t),t.response?.status===400&&t.response?.data?.error?.includes("No bill series found")?{data:null,error:{message:"No bill series found. Please create a bill series first in Admin Settings.",needsSeries:!0}}:{data:null,error:t}}},bH=async e=>{try{if(!e.doctorId||!e.appointmentId||!e.services)throw new Error("Doctor ID, Appointment ID, and services are required");if(!Array.isArray(e.services)||e.services.length===0)throw new Error("At least one service is required");return{data:(await it.post("/billreceipt/with-services",e)).data.data,error:null}}catch(t){return console.error("Error creating bill with services:",t),{data:null,error:t}}},ST=async e=>{try{if(!e)throw new Error("Bill ID is required");return{data:(await it.get(`/billreceipt/${e}/with-services`)).data.data,error:null}}catch(t){return console.error("Error getting bill with services:",t),{data:null,error:t}}},xH=async(e,t)=>{try{if(!e)throw new Error("Bill ID is required");if(!t.services||!Array.isArray(t.services)||t.services.length===0)throw new Error("At least one service is required");return{data:(await it.put(`/billreceipt/${e}/with-services`,t)).data.data,error:null}}catch(n){return console.error("Error updating bill with services:",n),{data:null,error:n}}},RE=async(e,t,n,a=null)=>{try{const r=e.state.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching bills for date range:",{startDate:t,endDate:n,doctorId:r,treatmentPlanId:a}),await CH(t,n,r,a)}catch(r){return console.error("Error fetching bills for date range:",r),{success:!1,error:{message:r.message||"Failed to fetch bills for date range",status:500}}}},CH=async(e,t,n=null,a=null)=>{try{console.log("Fetching bills for date range with filters:",{startDate:e,endDate:t,doctorId:n,treatmentPlanId:a});const r=new URLSearchParams;e&&r.append("startDate",e),t&&r.append("endDate",t),n&&r.append("doctor_id",n.toString()),a&&r.append("treatmentPlanId",a.toString());const s=`/billreceipt/date-range?${r.toString()}`;return{success:!0,data:(await it.get(s)).data.data,message:"Bills fetched successfully for date range"}}catch(r){return console.error("Error fetching bills for date range:",r),{success:!1,error:{message:r.response?.data?.error||r.message||"Failed to fetch bills for date range",status:r.response?.status||500}}}},ET=async e=>{try{if(!e)throw new Error("Bill ID is required");return console.log("Fetching payment receipts for bill ID:",e),{success:!0,data:(await it.get("/paymentreceipt",{params:{bill_id:e}})).data.data||[],message:"Payment receipts fetched successfully"}}catch(t){return console.error("Error fetching payment receipts for bill:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to fetch payment receipts",status:t.response?.status||500}}}},ra=e=>!e&&e!==0?"0":`${Number(e).toLocaleString("en-IN")}`,q2e=Object.freeze(Object.defineProperty({__proto__:null,createBillWithServices:bH,fetchAllBillsForDateRange:CH,fetchBillsForDateRange:RE,formatBillAmount:ra,getBillWithServices:ST,getNextBillIdentifier:wH,getReceiptsByBill:ET,updateBillWithServices:xH},Symbol.toStringTag,{value:"Module"}));function kT(e,t){const n=y=>{const g=parseFloat(y.baseCost)||0,_=parseInt(y.quantity)||1,b=parseFloat(y.gstPercent)||0,S=parseFloat(y.discountAmount)||0,B=g*_,F=S*_,T=Math.max(0,B-F),E=b>0?Math.round(T*b/(100+b)):0,x=T-E,C=T;return{baseAmount:B,gstAmount:E,gstExclusiveAmount:x,subtotalWithGST:C,discountAmount:F,total:C}},a=ee(()=>e.value.map(y=>({...y,...n(y)}))),r=ee(()=>e.value.reduce((y,g)=>{const _=parseFloat(g.baseCost)||0,b=parseInt(g.quantity)||1;return y+_*b},0)),s=ee(()=>e.value.reduce((y,g)=>{const _=parseFloat(g.baseCost)||0,b=parseInt(g.quantity)||1,S=parseFloat(g.gstPercent)||0,B=parseFloat(g.discountAmount)||0,F=_*b,T=B*b,E=Math.max(0,F-T),x=S>0?Math.round(E*S/(100+S)):0;return y+x},0)),o=ee(()=>e.value.reduce((y,g)=>{const _=n(g).total;return y+_},0)),l=ee(()=>e.value.reduce((y,g)=>{const _=parseFloat(g.discountAmount)||0,b=parseInt(g.quantity)||1;return y+_*b},0)),c=ee(()=>e.value.reduce((y,g)=>{const _=n(g);return y+(_.gstExclusiveAmount||0)},0)),f=ee(()=>{const y=l.value,g=parseFloat(t.value)||0;return y+g}),d=ee(()=>{const y=o.value,g=parseFloat(t.value)||0;return Math.max(0,y-g)}),A=ee(()=>e.value.some(y=>y.serviceDescription&&y.serviceDescription.trim().length>0&&parseFloat(y.baseCost)>0)),m=ee(()=>{const y={};return e.value.forEach(g=>{const _=parseFloat(g.gstPercent)||0;if(_>0){y[_]||(y[_]={rate:_,baseAmount:0,gstAmount:0});const b=parseFloat(g.baseCost)||0,S=parseInt(g.quantity)||1,B=parseFloat(g.discountAmount)||0,F=b*S,T=B*S,E=Math.max(0,F-T),x=Math.round(E*_/(100+_)),C=E-x;y[_].baseAmount+=C,y[_].gstAmount+=x}}),Object.values(y)}),p=y=>n(y),h=ee(()=>r.value===0?0:s.value/r.value*100);return{servicesWithTotals:a,baseSubtotal:r,totalGSTAmount:s,subtotalWithGST:o,totalLineDiscount:l,totalTaxableValue:c,totalAllDiscounts:f,finalGrandTotal:d,gstBreakdown:m,effectiveTaxRate:h,hasValidService:A,calculateServiceTotal:n,getServiceGSTDetails:p}}const Y2e={class:"pa-1"},X2e={class:"text-body-1 font-weight-medium"},J2e={class:"text-body-2 text-medium-emphasis"},Z2e={class:"pa-1"},ewe={class:"text-body-1 font-weight-medium"},twe={class:"text-body-2 text-medium-emphasis"},nwe={class:"pa-1"},awe={class:"text-body-2 text-medium-emphasis"},rwe={class:"d-flex flex-column py-1"},swe={class:"text-body-2 font-weight-medium"},owe={class:"text-caption text-medium-emphasis"},iwe={key:0},lwe={class:"text-caption"},uwe={key:0,class:"ml-2"},cwe={key:0,class:"text-left",style:{width:"100px"}},dwe={key:0},fwe={class:"text-body-2 font-weight-medium"},Awe={class:"text-body-2 font-weight-medium"},mwe={class:"text-body-2 font-weight-medium"},vwe={key:0,class:"text-body-2 mb-1"},hwe={key:1,class:"text-body-2 mb-1"},pwe={key:2,class:"text-body-2 mb-1"},gwe={key:3,class:"text-body-2 mb-1"},ywe={key:0,class:"text-body-2 mb-1"},_we={key:1,class:"text-body-2 mb-1"},wwe={key:2,class:"text-body-2 mb-1"},bwe={class:"text-body-2 mb-1"},xwe={class:"text-body-2 mb-1"},Cwe={key:3,class:"text-body-2 mb-1"},Swe={class:"text-subtitle-1 font-weight-bold"},Ewe={class:"text-body-2 mb-1"},kwe={class:"text-body-2 mb-1"},Bwe={__name:"bill-receipt-create",props:{appointment:{type:Object,required:!0}},emits:["close","billCreated","view-bill"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=Ln(),l=ee(()=>o.state.doctorModule.doctorId),c=ee(()=>o.getters["doctorModule/currentDoctor"]),f=ee(()=>c.value?.doctorName||"Unknown Doctor"),d=ee(()=>c.value?.isGST||!1),A=R({patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",billDate:Tn(),appointmentId:n.appointment?.id||null,doctorId:l.value,additionalDiscount:0}),m=R([{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1}]),p=R(!1),h=R(null),y=R([]),g=R(!1);ee(()=>h.value?y.value.find(z=>z.id===h.value):null);const _=R(!1),b=bh,S=R([{amount:null,mode:"Cash",paymentDate:Tn(),datePickerMenu:!1}]);R(!1);const B=kT(m,ee(()=>A.value.additionalDiscount)),{servicesWithTotals:F,baseSubtotal:T,totalGSTAmount:E,subtotalWithGST:x,totalLineDiscount:C,totalTaxableValue:D,totalAllDiscounts:U,finalGrandTotal:L,hasValidService:H,gstBreakdown:oe,calculateServiceTotal:de}=B,te=ee(()=>m.value.some(z=>(parseFloat(z.discountAmount)||0)>0)),q=()=>{m.value.push({serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1})},ce=z=>{m.value.length>1?m.value.splice(z,1):s("At least one service is required")},le=(z,se)=>{m.value[z]&&(m.value[z].serviceDescription=se)},Z=(z,se)=>{console.log("Service selected:",se),se&&typeof se=="object"&&!se.isUserTyped?(m.value[z]={...m.value[z],serviceDescription:se.serviceDescription,hsnSacCode:se.hsnSacCode||"",baseCost:se.baseCost||0,gstPercent:se.gstPercent||se.gstRate||0,isFromHistory:!1},console.log("Updated service with baseCost:",m.value[z].baseCost,"and GST%:",m.value[z].gstPercent,"and HSN/SAC:",m.value[z].hsnSacCode)):se===null&&(m.value[z]={...m.value[z],serviceDescription:"",hsnSacCode:"",baseCost:0,gstPercent:0,isFromHistory:!1})},ne=ee(()=>{const z=H.value,se=A.value.doctorId&&A.value.appointmentId;return console.log("Bill validation check:",{hasValidService:z,hasValidAppointment:se,billData:A.value}),z&&se}),G=async()=>{if(!A.value.patientId||!A.value.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}g.value=!0;try{console.log("Loading treatment plans for patient:",A.value.patientId,"doctor:",A.value.doctorId);const z=await Vg(A.value.patientId,A.value.doctorId);if(z.error)throw new Error(z.error.message||"Failed to load treatment plans");y.value=z.data||[],console.log("Loaded treatment plans:",y.value.length)}catch(z){console.error("Error loading treatment plans:",z),s("Failed to load treatment plans: "+(z.message||"Unknown error")),y.value=[]}finally{g.value=!1}},W=ee(()=>S.value.reduce((z,se)=>z+(parseFloat(se.amount)||0),0)),Q=ee(()=>L.value-W.value),O=z=>{if(!z)return"";try{return new Date(z).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return z}},ae=()=>{S.value.push({amount:null,mode:"Cash",paymentDate:Tn(),datePickerMenu:!1})},j=z=>{S.value.length>1?S.value.splice(z,1):S.value[0]={amount:null,mode:"Cash",paymentDate:Tn(),datePickerMenu:!1}},J=z=>{if(!z)return null;try{if(typeof z=="string")return z.includes("T")?z.split("T")[0]:z;if(z instanceof Date){const se=z.getFullYear(),be=String(z.getMonth()+1).padStart(2,"0"),Fe=String(z.getDate()).padStart(2,"0");return`${se}-${be}-${Fe}`}return null}catch(se){return console.error("Error parsing payment date:",se),null}},ie=(z,se)=>{if(z)if(z instanceof Date){const be=z.getFullYear(),Fe=String(z.getMonth()+1).padStart(2,"0"),ye=String(z.getDate()).padStart(2,"0");se.paymentDate=`${be}-${Fe}-${ye}`}else typeof z=="string"&&(se.paymentDate=z);else se.paymentDate="";se.datePickerMenu=!1},X=async()=>{if(!ne.value){s("Please fill in all required fields and add at least one valid service");return}_.value=!0;try{const{data:z,error:se}=await wH(A.value.doctorId);if(se){if(se.needsSeries){s("No bill series found. Please create a bill series first in Admin Settings  GST Bill Series Configuration.");return}throw new Error(se.message||"Failed to get next bill identifier")}console.log("Next bill identifier:",z);const be={doctorId:A.value.doctorId,appointmentId:A.value.appointmentId,billDate:A.value.billDate,additionalDiscount:A.value.additionalDiscount||0,treatmentPlanId:p.value?h.value:null,services:m.value.map(_e=>({serviceDescription:_e.serviceDescription,hsnSacCode:_e.hsnSacCode||"",baseCost:_e.baseCost,gstPercent:_e.gstPercent||0,quantity:_e.quantity||1,discountAmount:_e.discountAmount||0}))};console.log("Creating bill with data:",be);const{data:Fe,error:ye}=await bH(be);if(ye)throw new Error(ye.message||"Failed to create bill");console.log("Bill created successfully:",Fe),S.value.some(_e=>_e.amount&&parseFloat(_e.amount)>0&&_e.mode&&_e.paymentDate)&&await fe(Fe.id),r("Bill created successfully!"),a("billCreated",Fe),a("view-bill",Fe.id)}catch(z){console.error("Error generating bill:",z),s("Failed to generate bill. Please try again.")}finally{_.value=!1}},fe=async z=>{try{console.log("Creating payment receipt for bill:",z);const se={doctorId:A.value.doctorId,appointmentId:A.value.appointmentId,billId:z,paymentReceiptDate:Tn(),additionalDiscount:0,isThreeC:!0,treatmentPlanId:p.value?h.value:null};console.log("Creating payment receipt with payload:",se);const be=await YM(se);if(be.error){console.error("Error creating payment receipt:",be.error),s("Bill created but failed to create payment receipt: "+be.error.message);return}const Fe=be.data.id;console.log("Payment receipt created:",Fe);const ye=S.value.filter(Qe=>Qe.amount&&parseFloat(Qe.amount)>0&&Qe.mode&&Qe.paymentDate);console.log("Creating payments:",ye);for(const Qe of ye){const _e={amount:Number(Qe.amount),mode:Qe.mode,paymentDate:Qe.paymentDate,paymentReceiptId:Fe,appointmentId:A.value.appointmentId};console.log("Creating payment with payload:",_e);const Se=await wh(_e);Se.success?console.log("Payment created successfully:",Se.data):(console.error("Error creating payment:",Se.error),s(`Failed to create payment: ${Se.error?.message||"Unknown error"}`))}S.value=[{amount:null,mode:"Cash",paymentDate:Tn()}],r("Payment receipt and payments created successfully!")}catch(se){console.error("Error creating payment receipt and payments:",se),s("Bill created but failed to create payments: "+(se.message||"Unknown error"))}},M=()=>{_.value=!1,m.value=[{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1}],A.value={patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",billDate:Tn(),appointmentId:n.appointment?.id||null,doctorId:l.value,additionalDiscount:0},S.value=[{amount:null,mode:"Cash",paymentDate:Tn(),datePickerMenu:!1}],p.value=!1,h.value=null,y.value=[],g.value=!1,a("close")};return Ge(p,z=>{z&&y.value.length===0?G():z||(h.value=null)}),(z,se)=>{const be=I("v-icon"),Fe=I("v-btn"),ye=I("v-card-title"),Qe=I("v-col"),_e=I("v-row"),Se=I("v-label"),Ee=I("v-card-text"),Ue=I("v-card"),je=I("v-switch"),at=I("v-list-item"),mt=I("v-select"),xe=I("v-text-field"),Be=I("v-table"),Ye=I("v-divider"),kt=I("v-date-picker"),xt=I("v-menu"),Nt=I("v-container");return P(),he(Ue,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[i(_e,{"no-gutters":""},{default:u(()=>[i(Qe,{cols:"12"},{default:u(()=>[i(ye,{class:"d-flex align-center justify-space-between"},{default:u(()=>[se[4]||(se[4]=v("span",null,"Tax Invoice cum Bill of Supply - Generate",-1)),i(Fe,{onClick:M,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(be,{size:"18"},{default:u(()=>[...se[3]||(se[3]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(_e,{"no-gutters":""},{default:u(()=>[i(Qe,{cols:"12",class:"scroll-element"},{default:u(()=>[i(Nt,{fluid:"",class:"pa-3"},{default:u(()=>[i(Ue,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[i(Ee,{class:"pb-1 pt-2"},{default:u(()=>[i(_e,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(Qe,{cols:"4"},{default:u(()=>[v("div",Y2e,[i(Se,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...se[5]||(se[5]=[N("Patient Information",-1)])]),_:1}),v("div",X2e,K(A.value.patientName),1),v("div",J2e,"ID: "+K(A.value.patientId),1)])]),_:1}),i(Qe,{cols:"4"},{default:u(()=>[v("div",Z2e,[i(Se,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...se[6]||(se[6]=[N("Appointment Details",-1)])]),_:1}),v("div",ewe,"Dr. "+K(f.value),1),v("div",twe,"Date: "+K(O(A.value.appointmentDate)),1)])]),_:1}),i(Qe,{cols:"4"},{default:u(()=>[v("div",nwe,[i(Se,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...se[7]||(se[7]=[N("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),se[8]||(se[8]=v("div",{class:"text-body-1 font-weight-medium"},"New Bill",-1)),v("div",awe,"Date: "+K(O(A.value.billDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),i(Ue,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(Ee,{class:"pb-2"},{default:u(()=>[i(_e,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[i(Qe,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...se[9]||(se[9]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),i(Qe,{cols:"3",class:"d-flex align-center"},{default:u(()=>[i(je,{modelValue:p.value,"onUpdate:modelValue":se[0]||(se[0]=At=>p.value=At),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),p.value?(P(),he(Qe,{key:0,cols:"7"},{default:u(()=>[i(mt,{modelValue:h.value,"onUpdate:modelValue":se[1]||(se[1]=At=>h.value=At),items:y.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:g.value,disabled:g.value,clearable:"","hide-details":""},{selection:u(({item:At})=>[v("div",rwe,[v("div",swe,K(At.raw.treatmentPlanName),1),v("div",owe,[N(" Status: "+K(At.raw.status)+"  Created: "+K(O(At.raw.createdAt))+" ",1),At.raw.notes?(P(),Ae("span",iwe,"  "+K(At.raw.notes.substring(0,30))+"...",1)):ge("",!0)])])]),item:u(({props:At,item:Ot})=>[i(at,fl(Al(At)),{title:u(()=>[N(K(Ot.raw.treatmentPlanName),1)]),subtitle:u(()=>[v("div",lwe,[N(" Status: "+K(Ot.raw.status)+"  Created: "+K(O(Ot.raw.createdAt))+" ",1),Ot.raw.notes?(P(),Ae("span",uwe," "+K(Ot.raw.notes.substring(0,50))+"...",1)):ge("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1}),i(Ue,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(Ee,{class:"pb-2"},{default:u(()=>[se[25]||(se[25]=v("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),i(Be,{density:"compact",class:"mb-3"},{default:u(()=>[v("thead",null,[v("tr",null,[se[10]||(se[10]=v("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),se[11]||(se[11]=v("th",{class:"text-left",style:{width:"200px"}},"Description",-1)),d.value?(P(),Ae("th",cwe,"HSN/SAC Code")):ge("",!0),se[12]||(se[12]=v("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit (incl. GST)",-1)),se[13]||(se[13]=v("th",{class:"text-left",style:{width:"110px"}},"Discount per unit",-1)),se[14]||(se[14]=v("th",{class:"text-left",style:{width:"100px"}},"GST %",-1)),se[15]||(se[15]=v("th",{class:"text-left",style:{width:"120px"}},"Taxable Value",-1)),se[16]||(se[16]=v("th",{class:"text-left",style:{width:"100px"}},"GST Amount",-1)),se[17]||(se[17]=v("th",{class:"text-left",style:{width:"70px"}},"Quantity",-1)),se[18]||(se[18]=v("th",{class:"text-left",style:{width:"120px"}},"Total",-1)),se[19]||(se[19]=v("th",{class:"text-left",style:{width:"80px"}},"Actions",-1))])]),v("tbody",null,[(P(!0),Ae(ze,null,Jt(Oe(F),(At,Ot)=>(P(),Ae("tr",{key:Ot},[v("td",null,K(Ot+1),1),v("td",null,[i(Fw,{"model-value":At.serviceDescription,"onUpdate:modelValue":Dt=>le(Ot,Dt),onServiceSelected:Dt=>Z(Ot,Dt),"doctor-id":l.value,"show-gst-in-results":d.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id","show-gst-in-results"])]),d.value?(P(),Ae("td",dwe,[i(xe,{modelValue:m.value[Ot].hsnSacCode,"onUpdate:modelValue":Dt=>m.value[Ot].hsnSacCode=Dt,density:"compact",variant:"underlined","hide-details":"",placeholder:"HSN/SAC"},null,8,["modelValue","onUpdate:modelValue"])])):ge("",!0),v("td",null,[i(xe,{modelValue:m.value[Ot].baseCost,"onUpdate:modelValue":Dt=>m.value[Ot].baseCost=Dt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(xe,{modelValue:m.value[Ot].discountAmount,"onUpdate:modelValue":Dt=>m.value[Ot].discountAmount=Dt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(xe,{modelValue:m.value[Ot].gstPercent,"onUpdate:modelValue":Dt=>m.value[Ot].gstPercent=Dt,modelModifiers:{number:!0},type:"number",suffix:"%",density:"compact",variant:"underlined","hide-details":"",min:"0",max:"100",step:"0.1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[v("div",fwe,K(Oe(ra)(Oe(de)(m.value[Ot]).gstExclusiveAmount||0)),1)]),v("td",null,[v("div",Awe,K(Oe(ra)(Oe(de)(m.value[Ot]).gstAmount||0)),1)]),v("td",null,[i(xe,{modelValue:m.value[Ot].quantity,"onUpdate:modelValue":Dt=>m.value[Ot].quantity=Dt,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[v("div",mwe,K(Oe(ra)(Oe(de)(m.value[Ot]).total||0)),1)]),v("td",null,[i(Fe,{icon:"",size:"small",color:"error",variant:"text",onClick:Dt=>ce(Ot)},{default:u(()=>[i(be,null,{default:u(()=>[...se[20]||(se[20]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),i(_e,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(Qe,{cols:"auto"},{default:u(()=>[i(Fe,{variant:"outlined",color:"primary",onClick:q,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...se[21]||(se[21]=[N(" Add Service ",-1)])]),_:1})]),_:1}),i(Qe),i(Qe,{cols:"3"},{default:u(()=>[i(xe,{label:"Additional Discount",modelValue:A.value.additionalDiscount,"onUpdate:modelValue":se[2]||(se[2]=At=>A.value.additionalDiscount=At),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),i(Ye,{class:"mb-3"}),i(_e,{"no-gutters":""},{default:u(()=>[i(Qe,{cols:"8",class:"text-right"},{default:u(()=>[te.value?(P(),Ae("div",vwe,"Base Cost Total (incl. GST):")):ge("",!0),te.value?(P(),Ae("div",hwe,"Line Item Discounts:")):ge("",!0),te.value?(P(),Ae("div",pwe,"Subtotal after Discounts (incl. GST):")):ge("",!0),se[22]||(se[22]=v("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),se[23]||(se[23]=v("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),A.value.additionalDiscount>0?(P(),Ae("div",gwe,"Additional Discount:")):ge("",!0),se[24]||(se[24]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),i(Qe,{cols:"4",class:"text-right"},{default:u(()=>[te.value?(P(),Ae("div",ywe,K(Oe(ra)(Oe(T))),1)):ge("",!0),te.value?(P(),Ae("div",_we,"-"+K(Oe(ra)(Oe(C))),1)):ge("",!0),te.value?(P(),Ae("div",wwe,K(Oe(ra)(Oe(T)-Oe(C))),1)):ge("",!0),v("div",bwe,K(Oe(ra)(Oe(D))),1),v("div",xwe,K(Oe(ra)(Oe(E))),1),A.value.additionalDiscount>0?(P(),Ae("div",Cwe,"-"+K(Oe(ra)(A.value.additionalDiscount)),1)):ge("",!0),v("div",Swe,K(Oe(ra)(Oe(L))),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(Ue,{flat:"",class:"mb-3 card-enhanced",color:"surfaceContainerHigh"},{default:u(()=>[i(Ee,{class:"pb-2"},{default:u(()=>[se[30]||(se[30]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),i(Be,{density:"compact",class:"mb-3"},{default:u(()=>[se[28]||(se[28]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),v("th",{class:"text-left",style:{width:"120px"}},"Payment Mode"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(S.value,(At,Ot)=>(P(),Ae("tr",{key:Ot},[v("td",null,K(Ot+1),1),v("td",null,[i(xe,{modelValue:At.amount,"onUpdate:modelValue":Dt=>At.amount=Dt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(mt,{modelValue:At.mode,"onUpdate:modelValue":Dt=>At.mode=Dt,items:Oe(b),density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),v("td",null,[i(xt,{modelValue:At.datePickerMenu,"onUpdate:modelValue":Dt=>At.datePickerMenu=Dt,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:Dt})=>[i(xe,Ie({modelValue:At.paymentDate,"onUpdate:modelValue":bt=>At.paymentDate=bt,density:"compact",variant:"underlined","hide-details":"",readonly:""},{ref_for:!0},Dt),{"append-inner":u(()=>[i(be,{class:"text-medium-emphasis"},{default:u(()=>[...se[26]||(se[26]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[i(kt,{"model-value":J(At.paymentDate),"onUpdate:modelValue":Dt=>ie(Dt,At),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(Fe,{icon:"",size:"small",color:"error",variant:"text",onClick:Dt=>j(Ot)},{default:u(()=>[i(be,null,{default:u(()=>[...se[27]||(se[27]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),i(_e,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(Qe,{cols:"auto"},{default:u(()=>[i(Fe,{variant:"outlined",color:"secondary",onClick:ae,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...se[29]||(se[29]=[N(" Add Payment ",-1)])]),_:1})]),_:1}),i(Qe),i(Qe,{cols:"4",class:"text-right"},{default:u(()=>[v("div",Ewe,"Bill Total: "+K(Oe(ra)(Oe(L))),1),v("div",kwe,"Total Payments: "+K(Oe(ra)(W.value)),1),v("div",{class:lt(["text-subtitle-1 font-weight-bold",Q.value>=0?"text-success":"text-error"])}," Balance: "+K(Oe(ra)(Q.value)),3)]),_:1})]),_:1})]),_:1})]),_:1}),i(Ue,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[i(Ee,{class:"d-flex justify-center pb-2"},{default:u(()=>[i(Fe,{color:"primary",onClick:X,disabled:!ne.value||_.value,loading:_.value,"prepend-icon":"mdi-receipt",class:"btn-hover-base"},{default:u(()=>[...se[31]||(se[31]=[N(" Generate Bill ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},Twe=en(Bwe,[["__scopeId","data-v-ceeb7a6b"]]),Iwe={class:"text-center"},Fwe={class:"text-center"},Pwe={class:"text-body-2 text-medium-emphasis mb-4"},Dwe={class:"pa-1"},Uwe={class:"text-body-1 font-weight-medium"},Rwe={class:"text-body-2 text-medium-emphasis"},Nwe={class:"pa-1"},Vwe={class:"text-body-1 font-weight-medium"},Lwe={class:"text-body-2 text-medium-emphasis"},Mwe={class:"pa-1"},Owe={class:"text-body-1 font-weight-medium"},Hwe={class:"text-body-2 text-medium-emphasis"},$we={key:0,class:"text-body-2 text-medium-emphasis"},Qwe={key:0,class:"d-flex align-center"},Gwe={key:1,class:"text-body-2 text-error"},zwe={key:2,class:"d-flex flex-column"},Wwe={class:"text-body-2 font-weight-medium"},Kwe={class:"text-caption text-medium-emphasis"},jwe={key:0},qwe={key:1},Ywe={key:0,class:"text-caption text-medium-emphasis mt-1"},Xwe={key:0},Jwe={key:0,class:"text-left"},Zwe={key:1,class:"text-right"},ebe={class:"text-left"},tbe={class:"text-left"},nbe={key:0,class:"text-left"},abe={class:"text-right"},rbe={key:1,class:"text-right"},sbe={class:"text-center"},obe={class:"text-right"},ibe={class:"text-right"},lbe={class:"text-center"},ube={class:"text-right"},cbe={key:0,class:"text-body-2 mb-1"},dbe={key:1,class:"text-body-2 mb-1"},fbe={key:2,class:"text-body-2 mb-1"},Abe={key:3,class:"text-body-2 mb-1"},mbe={key:0,class:"text-body-2 mb-1"},vbe={key:1,class:"text-body-2 mb-1"},hbe={key:2,class:"text-body-2 mb-1"},pbe={class:"text-body-2 mb-1"},gbe={class:"text-body-2 mb-1"},ybe={key:3,class:"text-body-2 mb-1"},_be={class:"text-subtitle-1 font-weight-bold"},wbe={key:0,class:"text-center pa-4"},bbe={key:1,class:"text-center pa-4"},xbe={class:"text-body-2 text-error"},Cbe={class:"text-body-1 font-weight-medium"},Sbe={class:"text-caption text-medium-emphasis"},Ebe={class:"text-h6"},kbe={class:"text-h6 text-success"},Bbe={key:0,class:"text-center pa-4"},Tbe={class:"text-left"},Ibe={class:"text-left"},Fbe={class:"text-right"},Pbe={class:"text-center pa-4"},Dbe={key:3,class:"text-center pa-4"},Ube={__name:"bill-receipt-view",props:{billId:{type:[String,Number],required:!0}},emits:["close","edit-bill"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=Ln(),l=ee(()=>o.getters["doctorModule/currentDoctor"]),c=ee(()=>l.value?.doctorName||"Unknown Doctor"),f=ee(()=>l.value?.isGST||!1),d=R(!1),A=R(!1),m=R(!1),p=R(null),h=R(null),y=R(null),g=R(null),_=R([]),b=R("view"),S=R({}),B=R(null),F=R(null),T=R(!1),E=R(null),x=ee(()=>{if(!y.value?.services)return null;const ie=R(y.value.services||[]),X=R(y.value.additionalDiscount||0);return kT(ie,X)}),C=ee(()=>x.value?.baseSubtotal.value||0),D=ee(()=>x.value?.totalGSTAmount.value||0),U=ee(()=>x.value?.subtotalWithGST.value||0),L=ee(()=>x.value?.totalLineDiscount.value||0),H=ee(()=>x.value?.totalTaxableValue.value||0),oe=ee(()=>x.value?.finalGrandTotal.value||0),de=ie=>x.value?x.value.calculateServiceTotal(ie):{total:0,gstAmount:0},te=ee(()=>Array.isArray(_.value)?_.value.reduce((ie,X)=>ie+(parseFloat(X.amount)||0),0):0),q=ee(()=>Math.max(0,oe.value-te.value)),ce=ee(()=>y.value?.services?y.value.services.some(ie=>(parseFloat(ie.discountAmount)||0)>0):!1),le=ee(()=>y.value?{patientName:y.value.patientName||"Unknown Patient",patientId:y.value.patientId||"N/A",patientAge:y.value.patientAge||y.value.age||"N/A",patientGender:y.value.patientGender||y.value.gender||"N/A",patientContactNumber:y.value.patientContactNumber,doctorName:c.value,billNumber:y.value.identifier,billDate:y.value.billDate,appointmentDate:y.value.appointmentDate,services:(y.value.services||[]).map(ie=>{const X=de(ie);return{...ie,gstAmount:X.gstAmount,gstExclusiveAmount:X.gstExclusiveAmount,totalWithGst:X.total}}),baseSubtotal:C.value,totalGSTAmount:D.value,subtotalWithGST:U.value,totalLineDiscount:L.value,totalTaxableValue:H.value,additionalDiscount:parseFloat(y.value.additionalDiscount)||0,grandTotal:oe.value,associatedReceipt:g.value?{...g.value,balanceDue:q.value}:null,totalPaid:te.value,balanceDue:q.value,payments:(_.value||[]).map(ie=>({...ie,paymentDate:ie.paymentDate?O(ie.paymentDate):"N/A",paymentMethod:ie.mode||"N/A",amount:ie.amount||0}))}:null),Z=async()=>{if(!n.billId){p.value="No bill ID provided";return}d.value=!0,p.value=null;try{console.log("Loading bill data for ID:",n.billId);const ie=await ST(n.billId);if(ie.error)throw new Error(ie.error.message||"Failed to load bill");if(y.value=ie.data,console.log("Bill data loaded:",y.value),y.value&&(!y.value.patientAge||!y.value.patientGender))try{const X=y.value.patientId;if(X&&o.getters["patientModule/getPatientById"]){const fe=o.getters["patientModule/getPatientById"](X);fe&&(y.value.patientAge=y.value.patientAge||fe.age,y.value.patientGender=y.value.patientGender||fe.gender)}}catch(X){console.warn("Could not fetch additional patient details:",X)}ie.data.treatmentPlanId&&(B.value=ie.data.treatmentPlanId,await ne()),await G(),await Q()}catch(ie){console.error("Error loading bill data:",ie),p.value=ie.message||"Failed to load bill data",s(p.value)}finally{d.value=!1}},ne=async()=>{if(!B.value){F.value=null;return}T.value=!0,E.value=null;try{console.log("Loading treatment plan data for ID:",B.value);const ie=await CA(B.value);if(ie.error)throw new Error(ie.error.message||"Failed to load treatment plan");F.value=ie.data,console.log("Treatment plan data loaded:",F.value)}catch(ie){console.error("Error loading treatment plan data:",ie),E.value=ie.message||"Failed to load treatment plan"}finally{T.value=!1}},G=async()=>{if(!n.billId){g.value=null;return}A.value=!0,h.value=null;try{console.log("Loading associated payment receipt for bill ID:",n.billId);const ie=await ET(n.billId);ie.success&&Array.isArray(ie.data)&&ie.data.length>0?(g.value=ie.data[0],console.log("Associated payment receipt loaded:",g.value),await W()):(console.warn("No associated payment receipt found for bill:",n.billId),g.value=null)}catch(ie){console.error("Error loading associated payment receipt:",ie),h.value=ie.message||"Failed to load payment information"}finally{A.value=!1}},W=async()=>{if(!g.value?.id){_.value=[];return}m.value=!0;try{console.log("Loading payments for receipt ID:",g.value.id);const ie=await Ng(g.value.id);ie.success&&Array.isArray(ie.data)?(_.value=ie.data,console.log("Payments loaded:",_.value)):(console.warn("No payments found or invalid response:",ie),_.value=[])}catch(ie){console.error("Error loading receipt payments:",ie),_.value=[]}finally{m.value=!1}},Q=async()=>{try{const ie=o.state.doctorModule.doctorId;if(!ie){console.warn("No doctor ID available for print configurations");return}const X=await Ch(ie);S.value=X.data||{},console.log("Print configurations fetched:",S.value)}catch(ie){console.error("Error fetching print configs:",ie),s("Failed to load print configurations")}},O=ie=>{if(!ie)return"";try{return new Date(ie).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return ie}},ae=()=>{a("edit-bill",n.billId)},j=ie=>{console.log("Bill PDF generated successfully:",ie),r("Bill PDF generated successfully")},J=()=>{a("close")};return An(()=>{Z()}),(ie,X)=>{const fe=I("v-icon"),M=I("v-btn"),z=I("v-card-title"),se=I("v-col"),be=I("v-row"),Fe=I("v-tab"),ye=I("v-tabs"),Qe=I("v-progress-circular"),_e=I("v-label"),Se=I("v-card-text"),Ee=I("v-card"),Ue=I("v-table"),je=I("v-divider"),at=I("v-container"),mt=I("v-tabs-window-item"),xe=I("v-tabs-window");return P(),he(Ee,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[i(be,{"no-gutters":""},{default:u(()=>[i(se,{cols:"12"},{default:u(()=>[i(z,{class:"d-flex align-center justify-space-between"},{default:u(()=>[X[3]||(X[3]=v("span",null,"Tax Invoice cum Bill of Supply - View",-1)),i(M,{onClick:J,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(fe,{size:"18"},{default:u(()=>[...X[2]||(X[2]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(be,{"no-gutters":""},{default:u(()=>[i(se,{cols:"12"},{default:u(()=>[i(ye,{modelValue:b.value,"onUpdate:modelValue":X[0]||(X[0]=Be=>b.value=Be),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[i(Fe,{value:"view"},{default:u(()=>[i(fe,{start:""},{default:u(()=>[...X[4]||(X[4]=[N("mdi-eye",-1)])]),_:1}),X[5]||(X[5]=N(" View Bill ",-1))]),_:1}),i(Fe,{value:"share"},{default:u(()=>[i(fe,{start:""},{default:u(()=>[...X[6]||(X[6]=[N("mdi-share-variant",-1)])]),_:1}),X[7]||(X[7]=N(" Share Bill ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(be,{"no-gutters":""},{default:u(()=>[i(se,{cols:"12",class:"scroll-element"},{default:u(()=>[i(xe,{modelValue:b.value,"onUpdate:modelValue":X[1]||(X[1]=Be=>b.value=Be)},{default:u(()=>[i(mt,{value:"view"},{default:u(()=>[d.value?(P(),he(be,{key:0,"no-gutters":""},{default:u(()=>[i(se,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",Iwe,[i(Qe,{indeterminate:"",color:"primary",size:"64"}),X[8]||(X[8]=v("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):p.value?(P(),he(be,{key:1,"no-gutters":""},{default:u(()=>[i(se,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",Fwe,[i(fe,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...X[9]||(X[9]=[N("mdi-alert-circle",-1)])]),_:1}),X[11]||(X[11]=v("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),v("div",Pwe,K(p.value),1),i(M,{color:"primary",onClick:Z,"prepend-icon":"mdi-refresh"},{default:u(()=>[...X[10]||(X[10]=[N(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):y.value?(P(),he(at,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[i(Ee,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[i(Se,{class:"pb-1 pt-2"},{default:u(()=>[i(be,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(se,{cols:"4"},{default:u(()=>[v("div",Dwe,[i(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...X[12]||(X[12]=[N("Patient Information",-1)])]),_:1}),v("div",Uwe,K(y.value.patientName||"Unknown Patient"),1),v("div",Rwe,"ID: "+K(y.value.patientId||"N/A"),1)])]),_:1}),i(se,{cols:"4"},{default:u(()=>[v("div",Nwe,[i(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...X[13]||(X[13]=[N("Appointment Details",-1)])]),_:1}),v("div",Vwe,"Dr. "+K(c.value),1),v("div",Lwe,"Date: "+K(O(y.value.appointmentDate)),1)])]),_:1}),i(se,{cols:"4"},{default:u(()=>[v("div",Mwe,[i(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...X[14]||(X[14]=[N("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),v("div",Owe,K(y.value.identifier),1),v("div",Hwe,"Date: "+K(O(y.value.billDate)),1),l.value?.isGST&&l.value?.gstIdentifier?(P(),Ae("div",$we,"GST: "+K(l.value.gstIdentifier),1)):ge("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),B.value?(P(),he(Ee,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(Se,{class:"pb-2"},{default:u(()=>[i(be,{"no-gutters":"",align:"center",class:"mb-2"},{default:u(()=>[i(se,{cols:"3",class:"d-flex align-center"},{default:u(()=>[...X[15]||(X[15]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),i(se,{cols:"9"},{default:u(()=>[T.value?(P(),Ae("div",Qwe,[i(Qe,{indeterminate:"",size:"16",color:"primary",class:"mr-2"}),X[16]||(X[16]=v("span",{class:"text-body-2"},"Loading treatment plan...",-1))])):E.value?(P(),Ae("div",Gwe,[i(fe,{size:"16",class:"mr-1"},{default:u(()=>[...X[17]||(X[17]=[N("mdi-alert-circle",-1)])]),_:1}),N(" "+K(E.value),1)])):F.value?(P(),Ae("div",zwe,[v("div",Wwe,K(F.value.treatmentPlanName),1),v("div",Kwe,[N(" Status: "+K(F.value.status)+" ",1),F.value.startDate?(P(),Ae("span",jwe,"  Start: "+K(O(F.value.startDate)),1)):ge("",!0),F.value.endDate?(P(),Ae("span",qwe,"  End: "+K(O(F.value.endDate)),1)):ge("",!0)]),F.value.notes?(P(),Ae("div",Ywe,[X[18]||(X[18]=v("strong",null,"Notes:",-1)),N(" "+K(F.value.notes.substring(0,80)),1),F.value.notes.length>80?(P(),Ae("span",Xwe,"...")):ge("",!0)])):ge("",!0)])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0),i(Ee,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(Se,{class:"pb-2"},{default:u(()=>[X[30]||(X[30]=v("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),i(Ue,{density:"compact",class:"mb-3"},{default:u(()=>[v("thead",null,[v("tr",null,[X[19]||(X[19]=v("th",{class:"text-left"},"Sr. No",-1)),X[20]||(X[20]=v("th",{class:"text-left"},"Description",-1)),f.value?(P(),Ae("th",Jwe,"HSN/SAC Code")):ge("",!0),X[21]||(X[21]=v("th",{class:"text-right"},"Base Cost per unit (incl. GST)",-1)),ce.value?(P(),Ae("th",Zwe,"Discount per unit")):ge("",!0),X[22]||(X[22]=v("th",{class:"text-center"},"GST %",-1)),X[23]||(X[23]=v("th",{class:"text-right"},"Taxable Value",-1)),X[24]||(X[24]=v("th",{class:"text-right"},"GST Amt",-1)),X[25]||(X[25]=v("th",{class:"text-center"},"Qty",-1)),X[26]||(X[26]=v("th",{class:"text-right"},"Total",-1))])]),v("tbody",null,[(P(!0),Ae(ze,null,Jt(y.value.services,(Be,Ye)=>(P(),Ae("tr",{key:Ye},[v("td",ebe,K(Ye+1),1),v("td",tbe,K(Be.serviceDescription),1),f.value?(P(),Ae("td",nbe,K(Be.hsnSacCode||"N/A"),1)):ge("",!0),v("td",abe,K(Oe(ra)(Be.baseCost)),1),ce.value?(P(),Ae("td",rbe,K(Oe(ra)(Be.discountAmount)),1)):ge("",!0),v("td",sbe,K(Be.gstPercent)+"%",1),v("td",obe,K(Oe(ra)(de(Be).gstExclusiveAmount)),1),v("td",ibe,K(Oe(ra)(de(Be).gstAmount)),1),v("td",lbe,K(Be.quantity),1),v("td",ube,K(Oe(ra)(de(Be).total)),1)]))),128))])]),_:1}),i(je,{class:"mb-3"}),i(be,{"no-gutters":""},{default:u(()=>[i(se,{cols:"8",class:"text-right"},{default:u(()=>[ce.value?(P(),Ae("div",cbe,"Base Cost Total (incl. GST):")):ge("",!0),ce.value?(P(),Ae("div",dbe,"Line Item Discounts:")):ge("",!0),ce.value?(P(),Ae("div",fbe,"Subtotal after Discounts (incl. GST):")):ge("",!0),X[27]||(X[27]=v("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),X[28]||(X[28]=v("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),y.value.additionalDiscount>0?(P(),Ae("div",Abe,"Additional Discount:")):ge("",!0),X[29]||(X[29]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),i(se,{cols:"4",class:"text-right"},{default:u(()=>[ce.value?(P(),Ae("div",mbe,K(Oe(ra)(C.value)),1)):ge("",!0),ce.value?(P(),Ae("div",vbe,"-"+K(Oe(ra)(L.value)),1)):ge("",!0),ce.value?(P(),Ae("div",hbe,K(Oe(ra)(C.value-L.value)),1)):ge("",!0),v("div",pbe,K(Oe(ra)(H.value)),1),v("div",gbe,K(Oe(ra)(D.value)),1),y.value.additionalDiscount>0?(P(),Ae("div",ybe,"-"+K(Oe(ra)(y.value.additionalDiscount)),1)):ge("",!0),v("div",_be,K(Oe(ra)(oe.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(Ee,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(Se,{class:"pb-2"},{default:u(()=>[X[43]||(X[43]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),A.value?(P(),Ae("div",wbe,[i(Qe,{indeterminate:"",size:"32",color:"primary"}),X[31]||(X[31]=v("div",{class:"text-body-2 mt-2"},"Loading payment information...",-1))])):h.value?(P(),Ae("div",bbe,[i(fe,{size:"48",color:"error",class:"mb-2"},{default:u(()=>[...X[32]||(X[32]=[N("mdi-alert-circle",-1)])]),_:1}),v("div",xbe,K(h.value),1)])):g.value?(P(),Ae(ze,{key:2},[i(be,{"no-gutters":"",class:"mb-3"},{default:u(()=>[i(se,{cols:"4"},{default:u(()=>[X[33]||(X[33]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Payment Receipt",-1)),v("div",Cbe,K(g.value.identifier),1),v("div",Sbe,K(O(g.value.paymentReceiptDate)),1)]),_:1}),i(se,{cols:"4"},{default:u(()=>[X[34]||(X[34]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",Ebe,K(Oe(ra)(oe.value)),1)]),_:1}),i(se,{cols:"4"},{default:u(()=>[X[35]||(X[35]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",kbe,K(Oe(ra)(te.value)),1)]),_:1})]),_:1}),m.value?(P(),Ae("div",Bbe,[i(Qe,{indeterminate:"",size:"32",color:"primary"}),X[36]||(X[36]=v("div",{class:"text-body-2 mt-2"},"Loading payment history...",-1))])):_.value&&_.value.length>0?(P(),Ae(ze,{key:1},[i(je,{class:"mb-3"}),X[38]||(X[38]=v("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),i(Ue,{density:"compact"},{default:u(()=>[X[37]||(X[37]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Date"),v("th",{class:"text-left"},"Method"),v("th",{class:"text-right"},"Amount")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(_.value,Be=>(P(),Ae("tr",{key:Be.id},[v("td",Tbe,K(O(Be.paymentDate)),1),v("td",Ibe,K(Be.mode||"N/A"),1),v("td",Fbe,K(Oe(ra)(Be.amount)),1)]))),128))])]),_:1})],64)):(P(),Ae(ze,{key:2},[i(je,{class:"mb-3"}),v("div",Pbe,[i(fe,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...X[39]||(X[39]=[N("mdi-currency-inr",-1)])]),_:1}),X[40]||(X[40]=v("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))],64)):(P(),Ae("div",Dbe,[i(fe,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...X[41]||(X[41]=[N("mdi-receipt",-1)])]),_:1}),X[42]||(X[42]=v("div",{class:"text-body-2 text-medium-emphasis"},"No associated payment receipt found",-1))]))]),_:1})]),_:1}),i(Ee,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[i(Se,{class:"d-flex justify-center gap-3 pb-2"},{default:u(()=>[i(M,{color:"secondary",variant:"outlined",onClick:ae,"prepend-icon":"mdi-pencil",class:"btn-hover-base"},{default:u(()=>[...X[44]||(X[44]=[N(" Edit Bill ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1}),i(mt,{value:"share",class:"h-100"},{default:u(()=>[i(be,{"no-gutters":"",class:"h-100"},{default:u(()=>[i(se,{cols:"12"},{default:u(()=>[i(Sh,{"content-type":"bill",data:{consultation:le.value,printConfigurations:S.value,doctor:l.value},patient:{name:y.value?.patientName,patientName:y.value?.patientName,patientId:y.value?.patientId,contactNumber:y.value?.patientContactNumber},onPdfGenerated:j},null,8,["data","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},SH=en(Ube,[["__scopeId","data-v-f81d44f3"]]),Rbe={class:"text-center"},Nbe={class:"text-center"},Vbe={class:"text-body-2 text-medium-emphasis mb-4"},Lbe={class:"pa-1"},Mbe={class:"text-body-1 font-weight-medium"},Obe={class:"text-body-2 text-medium-emphasis"},Hbe={class:"pa-1"},$be={class:"text-body-1 font-weight-medium"},Qbe={class:"text-body-2 text-medium-emphasis"},Gbe={class:"pa-1"},zbe={class:"text-body-1 font-weight-medium"},Wbe={class:"text-body-2 text-medium-emphasis"},Kbe={class:"text-caption text-medium-emphasis mt-1"},jbe={class:"d-flex flex-column py-1"},qbe={class:"text-body-2 font-weight-medium"},Ybe={class:"text-caption text-medium-emphasis"},Xbe={key:0},Jbe={class:"text-caption"},Zbe={key:0,class:"ml-2"},exe={key:2,class:"text-body-2 text-medium-emphasis"},txe={key:0,class:"text-left",style:{width:"100px"}},nxe={key:0,class:"text-body-2 font-weight-medium"},axe={key:0},rxe={key:0,class:"text-body-2 font-weight-medium"},sxe={key:0,class:"text-body-2 font-weight-medium"},oxe={key:0,class:"text-body-2 font-weight-medium"},ixe={key:0,class:"text-body-2 font-weight-medium"},lxe={class:"text-body-2 font-weight-medium"},uxe={class:"text-body-2 font-weight-medium"},cxe={key:0,class:"text-body-2 font-weight-medium"},dxe={class:"text-body-2 font-weight-medium"},fxe={key:0,class:"text-body-2 mb-1"},Axe={key:1,class:"text-body-2 mb-1"},mxe={key:2,class:"text-body-2 mb-1"},vxe={key:3,class:"text-body-2 mb-1"},hxe={key:0,class:"text-body-2 mb-1"},pxe={key:1,class:"text-body-2 mb-1"},gxe={key:2,class:"text-body-2 mb-1"},yxe={class:"text-body-2 mb-1"},_xe={class:"text-body-2 mb-1"},wxe={key:3,class:"text-body-2 mb-1"},bxe={class:"text-subtitle-1 font-weight-bold"},xxe={key:0,class:"text-center pa-4"},Cxe={class:"text-subtitle-2"},Sxe={class:"text-body-2"},Exe={class:"text-h6"},kxe={class:"text-h6 text-success"},Bxe={key:0,class:"text-center pa-4"},Txe={class:"font-weight-bold"},Ixe={__name:"bill-receipt-edit",props:{billId:{type:[String,Number],required:!0}},emits:["close","bill-updated"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=Ln(),l=ee(()=>o.state.doctorModule.doctorId),c=ee(()=>o.getters["doctorModule/currentDoctor"]),f=ee(()=>c.value?.doctorName||"Unknown Doctor"),d=ee(()=>c.value?.isGST||!1),A=R(!1),m=R(!1),p=R(null),h=R(null),y=R([]),g=R(!1),_=R(!1),b=R(null),S=R(null),B=R([]),F=R([]),T=R(!1),E=R(null),x=R([]),C=R(!1),D=R(null);ee(()=>E.value?x.value.find(xe=>xe.id===E.value):null);const U=kT(y,ee(()=>h.value?.additionalDiscount||0)),{servicesWithTotals:L,baseSubtotal:H,totalGSTAmount:oe,subtotalWithGST:de,totalLineDiscount:te,totalTaxableValue:q,finalGrandTotal:ce,hasValidService:le,calculateServiceTotal:Z}=U,ne=ee(()=>y.value.some(xe=>(parseFloat(xe.discountAmount)||0)>0)),G=bh,W=R([]),Q=()=>{y.value.push({serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:!1})},O=xe=>{y.value.length>1?y.value.splice(xe,1):s("At least one service is required")},ae=(xe,Be)=>{y.value[xe]&&(y.value[xe].serviceDescription=Be)},j=(xe,Be)=>{console.log("Service selected:",Be),Be&&typeof Be=="object"&&!Be.isUserTyped?y.value[xe]={...y.value[xe],serviceDescription:Be.serviceDescription,hsnSacCode:Be.hsnSacCode||"",baseCost:Be.baseCost,gstPercent:Be.gstPercent||0,isFromHistory:!0,isPrepopulated:y.value[xe].isPrepopulated===!0}:Be===null&&(y.value[xe]={serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:y.value[xe].isPrepopulated===!0})},J=async()=>{if(!h.value?.patientId||!h.value?.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}C.value=!0;try{console.log("Loading treatment plans for patient:",h.value.patientId,"doctor:",h.value.doctorId);const xe=await Vg(h.value.patientId,h.value.doctorId);if(xe.error)throw new Error(xe.error.message||"Failed to load treatment plans");x.value=xe.data||[],console.log("Loaded treatment plans:",x.value.length)}catch(xe){console.error("Error loading treatment plans:",xe),s("Failed to load treatment plans: "+(xe.message||"Unknown error")),x.value=[]}finally{C.value=!1}},ie=ee(()=>Array.isArray(B.value)?B.value.reduce((xe,Be)=>xe+(parseFloat(Be.amount)||0),0):0),X=ee(()=>Array.isArray(W.value)?W.value.reduce((xe,Be)=>xe+(parseFloat(Be.amount)||0),0):0),fe=ee(()=>{const xe=ie.value,Be=X.value;return Math.max(0,ce.value-xe-Be)}),M=ee(()=>{const xe=le.value,Be=h.value?.patientName;return xe&&Be}),z=()=>{W.value.push({amount:null,mode:"Cash",paymentDate:new Date().toISOString().split("T")[0],datePickerMenu:!1})},se=xe=>{W.value.splice(xe,1)},be=xe=>{if(!xe)return null;try{if(typeof xe=="string")return xe.includes("T")?xe.split("T")[0]:xe;if(xe instanceof Date){const Be=xe.getFullYear(),Ye=String(xe.getMonth()+1).padStart(2,"0"),kt=String(xe.getDate()).padStart(2,"0");return`${Be}-${Ye}-${kt}`}return null}catch(Be){return console.error("Error parsing payment date:",Be),null}},Fe=(xe,Be)=>{if(xe)if(xe instanceof Date){const Ye=xe.getFullYear(),kt=String(xe.getMonth()+1).padStart(2,"0"),xt=String(xe.getDate()).padStart(2,"0");Be.paymentDate=`${Ye}-${kt}-${xt}`}else typeof xe=="string"&&(Be.paymentDate=xe);else Be.paymentDate="";Be.datePickerMenu=!1},ye=async()=>{if(!n.billId){p.value="No bill ID provided";return}A.value=!0,p.value=null;try{console.log("Loading bill data for editing, ID:",n.billId);const xe=await ST(n.billId);if(xe.error)throw new Error(xe.error.message||"Failed to load bill");const Be=xe.data;if(h.value={id:Be.id,identifier:Be.identifier,patientName:Be.patientName,patientId:Be.patientId,appointmentDate:Be.appointmentDate,billDate:Be.billDate,doctorId:Be.doctorId,appointmentId:Be.appointmentId,additionalDiscount:Be.additionalDiscount||0,treatmentPlanId:Be.treatmentPlanId},Be.services&&Be.services.length>0?y.value=Be.services.map(Ye=>({id:Ye.id,serviceDescription:Ye.serviceDescription,hsnSacCode:Ye.hsnSacCode||"",baseCost:Ye.baseCost,gstPercent:Ye.gstPercent||0,quantity:Ye.quantity||1,discountAmount:Ye.discountAmount||0,isFromHistory:!1,isPrepopulated:!0})):y.value=[{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:!1}],console.log("Bill data loaded for editing:",h.value),console.log("Services loaded:",y.value),Be.treatmentPlanId){T.value=!0,E.value=Be.treatmentPlanId,await J();try{const Ye=await CA(Be.treatmentPlanId);D.value=Ye}catch(Ye){console.error("Error loading original treatment plan data:",Ye)}}await Qe()}catch(xe){console.error("Error loading bill data:",xe),p.value=xe.message||"Failed to load bill data",s(p.value)}finally{A.value=!1}},Qe=async()=>{if(!n.billId){S.value=null;return}g.value=!0,b.value=null;try{console.log("Loading associated payment receipt for bill ID:",n.billId);const xe=await ET(n.billId);xe.success&&Array.isArray(xe.data)&&xe.data.length>0?(S.value=xe.data[0],console.log("Associated payment receipt loaded:",S.value),await _e()):(console.warn("No associated payment receipt found for bill:",n.billId),S.value=null)}catch(xe){console.error("Error loading associated payment receipt:",xe),b.value=xe.message||"Failed to load payment information"}finally{g.value=!1}},_e=async()=>{if(!S.value?.id){B.value=[];return}_.value=!0;try{console.log("Loading payments for receipt ID:",S.value.id);const xe=await Ng(S.value.id);xe.success&&Array.isArray(xe.data)?(B.value=xe.data,console.log("Payments loaded:",B.value)):(console.warn("No payments found or invalid response:",xe),B.value=[])}catch(xe){console.error("Error loading receipt payments:",xe),B.value=[]}finally{_.value=!1}},Se=async()=>{if(!M.value){s("Please add at least one valid service with description and cost");return}m.value=!0;try{const xe=y.value.filter(kt=>kt.serviceDescription&&kt.baseCost>0).map(kt=>({id:kt.id,serviceDescription:kt.serviceDescription,hsnSacCode:kt.hsnSacCode||"",baseCost:parseFloat(kt.baseCost)||0,gstPercent:parseFloat(kt.gstPercent)||0,quantity:parseInt(kt.quantity)||1,discountAmount:parseFloat(kt.discountAmount)||0})),Be={patientName:h.value.patientName,patientId:h.value.patientId,appointmentDate:h.value.appointmentDate,billDate:h.value.billDate,doctorId:h.value.doctorId,appointmentId:h.value.appointmentId,additionalDiscount:parseFloat(h.value.additionalDiscount)||0,treatmentPlanId:T.value?E.value:null,services:xe};console.log("Updating bill with payload:",Be);const Ye=await xH(n.billId,Be);if(Ye.error)throw new Error(Ye.error.message||"Failed to update bill");console.log("Bill updated successfully:",Ye.data),await je(),await Ee(),r(`Bill ${Ye.data.identifier} updated successfully!`),a("bill-updated",Ye.data)}catch(xe){console.error("Error updating bill:",xe),s("Failed to update bill. Please try again.")}finally{m.value=!1}},Ee=async()=>{if(W.value.length===0||!S.value){console.log("No new payment entries to create or no associated receipt");return}console.log("Creating new payment entries:",W.value);try{const xe=W.value.filter(Be=>Be.amount&&Be.amount>0&&Be.mode&&Be.paymentDate);console.log("Valid payments to create:",xe);for(const Be of xe){const Ye={amount:parseFloat(Be.amount),mode:Be.mode,paymentDate:Be.paymentDate,paymentReceiptId:S.value.id};console.log("Creating payment with payload:",Ye);const kt=await wh(Ye);kt.success?console.log("Payment created successfully:",kt.data):(console.error("Error creating payment entry:",kt.error),s(`Failed to create payment: ${kt.error?.message||"Unknown error"}`))}await _e(),W.value=[]}catch(xe){console.error("Error creating payment entries:",xe),s("Failed to create some payments: "+(xe.message||"Unknown error"))}},Ue=async xe=>{if(xe){F.value.push(xe);try{console.log("Deleting payment:",xe);const Be=await fT(xe);if(Be.error)throw new Error(Be.error.message||"Failed to delete payment");B.value=B.value.filter(Ye=>Ye.id!==xe),r("Payment deleted successfully")}catch(Be){console.error("Error deleting payment:",Be),s("Failed to delete payment: "+(Be.message||"Unknown error"))}finally{F.value=F.value.filter(Be=>Be!==xe)}}},je=async()=>{if(!S.value?.id){console.log("No associated payment receipt to update");return}try{console.log("Updating payment receipt treatment plan");const xe={treatmentPlanId:T.value?E.value:null};console.log("Updating payment receipt with data:",xe);const Be=await lhe(S.value.id,xe);if(Be.error)throw new Error(Be.error.message||"Failed to update payment receipt treatment plan");console.log("Payment receipt treatment plan updated successfully"),S.value.treatmentPlanId=xe.treatmentPlanId}catch(xe){console.error("Error updating payment receipt treatment plan:",xe),console.warn("Payment receipt treatment plan update failed, but bill was updated successfully")}},at=xe=>{if(!xe)return"";try{return new Date(xe).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return xe}},mt=()=>{a("close")};return Ge(T,xe=>{xe&&x.value.length===0?J():xe||(E.value=null)}),An(()=>{ye()}),(xe,Be)=>{const Ye=I("v-icon"),kt=I("v-btn"),xt=I("v-card-title"),Nt=I("v-col"),At=I("v-row"),Ot=I("v-progress-circular"),Dt=I("v-label"),bt=I("v-card-text"),Ze=I("v-card"),qt=I("v-switch"),Vt=I("v-chip"),zt=I("v-list-item"),ln=I("v-select"),Dn=I("v-text-field"),vt=I("v-table"),et=I("v-divider"),Wt=I("v-alert"),_n=I("v-date-picker"),na=I("v-menu"),rt=I("v-container");return P(),he(Ze,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[i(At,{"no-gutters":""},{default:u(()=>[i(Nt,{cols:"12"},{default:u(()=>[i(xt,{class:"d-flex align-center justify-space-between"},{default:u(()=>[Be[4]||(Be[4]=v("span",null,"Tax Invoice cum Bill of Supply - Edit",-1)),i(kt,{onClick:mt,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(Ye,{size:"18"},{default:u(()=>[...Be[3]||(Be[3]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(At,{"no-gutters":""},{default:u(()=>[i(Nt,{cols:"12",class:"scroll-element"},{default:u(()=>[A.value?(P(),he(At,{key:0,"no-gutters":""},{default:u(()=>[i(Nt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",Rbe,[i(Ot,{indeterminate:"",color:"primary",size:"64"}),Be[5]||(Be[5]=v("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):p.value?(P(),he(At,{key:1,"no-gutters":""},{default:u(()=>[i(Nt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",Nbe,[i(Ye,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Be[6]||(Be[6]=[N("mdi-alert-circle",-1)])]),_:1}),Be[8]||(Be[8]=v("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),v("div",Vbe,K(p.value),1),i(kt,{color:"primary",onClick:ye,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Be[7]||(Be[7]=[N(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):h.value?(P(),he(rt,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[i(Ze,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[i(bt,{class:"pb-1 pt-2"},{default:u(()=>[i(At,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(Nt,{cols:"4"},{default:u(()=>[v("div",Lbe,[i(Dt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Be[9]||(Be[9]=[N("Patient Information",-1)])]),_:1}),v("div",Mbe,K(h.value.patientName||"Unknown Patient"),1),v("div",Obe,"ID: "+K(h.value.patientId||"N/A"),1)])]),_:1}),i(Nt,{cols:"4"},{default:u(()=>[v("div",Hbe,[i(Dt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Be[10]||(Be[10]=[N("Appointment Details",-1)])]),_:1}),v("div",$be,"Dr. "+K(f.value),1),v("div",Qbe,"Date: "+K(at(h.value.appointmentDate)),1)])]),_:1}),i(Nt,{cols:"4"},{default:u(()=>[v("div",Gbe,[i(Dt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Be[11]||(Be[11]=[N("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),v("div",zbe,K(h.value.identifier),1),v("div",Wbe,"Date: "+K(at(h.value.billDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),i(Ze,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(bt,{class:"pb-2"},{default:u(()=>[i(At,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[i(Nt,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...Be[12]||(Be[12]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),i(Nt,{cols:"3",class:"d-flex align-center"},{default:u(()=>[i(qt,{modelValue:T.value,"onUpdate:modelValue":Be[0]||(Be[0]=Pe=>T.value=Pe),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),i(Nt,{cols:"7"},{default:u(()=>[!T.value&&D.value?(P(),Ae(ze,{key:0},[i(Vt,{color:"secondary",variant:"outlined","prepend-icon":"mdi-link-variant",class:"mr-2"},{default:u(()=>[N(K(D.value.treatmentPlanName),1)]),_:1}),v("div",Kbe," Status: "+K(D.value.status)+"  Created: "+K(at(D.value.createdAt)),1)],64)):T.value?(P(),he(ln,{key:1,modelValue:E.value,"onUpdate:modelValue":Be[1]||(Be[1]=Pe=>E.value=Pe),items:x.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:C.value,disabled:C.value,clearable:"","hide-details":""},{selection:u(({item:Pe})=>[v("div",jbe,[v("div",qbe,K(Pe.raw.treatmentPlanName),1),v("div",Ybe,[N(" Status: "+K(Pe.raw.status)+"  Created: "+K(at(Pe.raw.createdAt))+" ",1),Pe.raw.notes?(P(),Ae("span",Xbe,"  "+K(Pe.raw.notes.substring(0,30))+"...",1)):ge("",!0)])])]),item:u(({props:Pe,item:ut})=>[i(zt,fl(Al(Pe)),{title:u(()=>[N(K(ut.raw.treatmentPlanName),1)]),subtitle:u(()=>[v("div",Jbe,[N(" Status: "+K(ut.raw.status)+"  Created: "+K(at(ut.raw.createdAt))+" ",1),ut.raw.notes?(P(),Ae("span",Zbe," "+K(ut.raw.notes.substring(0,50))+"...",1)):ge("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])):(P(),Ae("div",exe," No treatment plan linked "))]),_:1})]),_:1})]),_:1})]),_:1}),i(Ze,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(bt,{class:"pb-2"},{default:u(()=>[Be[28]||(Be[28]=v("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),i(vt,{density:"compact",class:"mb-3"},{default:u(()=>[v("thead",null,[v("tr",null,[Be[13]||(Be[13]=v("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),Be[14]||(Be[14]=v("th",{class:"text-left",style:{width:"200px"}},"Description",-1)),d.value?(P(),Ae("th",txe,"HSN/SAC Code")):ge("",!0),Be[15]||(Be[15]=v("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit (incl. GST)",-1)),Be[16]||(Be[16]=v("th",{class:"text-left",style:{width:"110px"}},"Discount per unit",-1)),Be[17]||(Be[17]=v("th",{class:"text-left",style:{width:"80px"}},"GST %",-1)),Be[18]||(Be[18]=v("th",{class:"text-left",style:{width:"120px"}},"Taxable Value",-1)),Be[19]||(Be[19]=v("th",{class:"text-left",style:{width:"100px"}},"GST Amount",-1)),Be[20]||(Be[20]=v("th",{class:"text-left",style:{width:"90px"}},"Quantity",-1)),Be[21]||(Be[21]=v("th",{class:"text-left",style:{width:"120px"}},"Total",-1)),Be[22]||(Be[22]=v("th",{class:"text-left",style:{width:"80px"}},"Actions",-1))])]),v("tbody",null,[(P(!0),Ae(ze,null,Jt(Oe(L),(Pe,ut)=>(P(),Ae("tr",{key:ut,class:lt(Pe.isPrepopulated?"prepopulated-service":"")},[v("td",null,K(ut+1),1),v("td",null,[Pe.isPrepopulated?(P(),Ae("span",nxe,K(Pe.serviceDescription),1)):(P(),he(Fw,{key:1,"model-value":Pe.serviceDescription,"onUpdate:modelValue":wt=>ae(ut,wt),onServiceSelected:wt=>j(ut,wt),"doctor-id":l.value,"show-gst-in-results":d.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id","show-gst-in-results"]))]),d.value?(P(),Ae("td",axe,[Pe.isPrepopulated?(P(),Ae("span",rxe,K(Pe.hsnSacCode||"N/A"),1)):(P(),he(Dn,{key:1,modelValue:y.value[ut].hsnSacCode,"onUpdate:modelValue":wt=>y.value[ut].hsnSacCode=wt,density:"compact",variant:"underlined","hide-details":"",placeholder:"HSN/SAC"},null,8,["modelValue","onUpdate:modelValue"]))])):ge("",!0),v("td",null,[Pe.isPrepopulated?(P(),Ae("span",sxe,""+K(Pe.baseCost?.toLocaleString()||0),1)):(P(),he(Dn,{key:1,modelValue:y.value[ut].baseCost,"onUpdate:modelValue":wt=>y.value[ut].baseCost=wt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[Pe.isPrepopulated?(P(),Ae("span",oxe,""+K(Pe.discountAmount?.toLocaleString()||0),1)):(P(),he(Dn,{key:1,modelValue:y.value[ut].discountAmount,"onUpdate:modelValue":wt=>y.value[ut].discountAmount=wt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[Pe.isPrepopulated?(P(),Ae("span",ixe,K(Pe.gstPercent||0)+"%",1)):(P(),he(Dn,{key:1,modelValue:y.value[ut].gstPercent,"onUpdate:modelValue":wt=>y.value[ut].gstPercent=wt,modelModifiers:{number:!0},type:"number",suffix:"%",density:"compact",variant:"underlined","hide-details":"",min:"0",max:"100",step:"0.1"},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[v("div",lxe,K(Oe(ra)(Oe(Z)(y.value[ut]).gstExclusiveAmount||0)),1)]),v("td",null,[v("div",uxe,K(Oe(ra)(Oe(Z)(y.value[ut]).gstAmount||0)),1)]),v("td",null,[Pe.isPrepopulated?(P(),Ae("span",cxe,K(Pe.quantity||1),1)):(P(),he(Dn,{key:1,modelValue:y.value[ut].quantity,"onUpdate:modelValue":wt=>y.value[ut].quantity=wt,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[v("div",dxe,K(Oe(ra)(Oe(Z)(y.value[ut]).total||0)),1)]),v("td",null,[i(kt,{icon:"",size:"small",color:"error",variant:"text",onClick:wt=>O(ut),title:Pe.isPrepopulated?"Delete existing service":"Delete new service"},{default:u(()=>[i(Ye,null,{default:u(()=>[...Be[23]||(Be[23]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","title"])])],2))),128))])]),_:1}),i(At,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(Nt,{cols:"auto"},{default:u(()=>[i(kt,{variant:"outlined",color:"primary",onClick:Q,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Be[24]||(Be[24]=[N(" Add Service ",-1)])]),_:1})]),_:1}),i(Nt),i(Nt,{cols:"3"},{default:u(()=>[i(Dn,{label:"Additional Discount",modelValue:h.value.additionalDiscount,"onUpdate:modelValue":Be[2]||(Be[2]=Pe=>h.value.additionalDiscount=Pe),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),i(et,{class:"mb-3"}),i(At,{"no-gutters":""},{default:u(()=>[i(Nt,{cols:"8",class:"text-right"},{default:u(()=>[ne.value?(P(),Ae("div",fxe,"Base Cost Total (incl. GST):")):ge("",!0),ne.value?(P(),Ae("div",Axe,"Line Item Discounts:")):ge("",!0),ne.value?(P(),Ae("div",mxe,"Subtotal after Discounts (incl. GST):")):ge("",!0),Be[25]||(Be[25]=v("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),Be[26]||(Be[26]=v("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),h.value.additionalDiscount>0?(P(),Ae("div",vxe,"Additional Discount:")):ge("",!0),Be[27]||(Be[27]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),i(Nt,{cols:"4",class:"text-right"},{default:u(()=>[ne.value?(P(),Ae("div",hxe,K(Oe(ra)(Oe(H))),1)):ge("",!0),ne.value?(P(),Ae("div",pxe,"-"+K(Oe(ra)(Oe(te))),1)):ge("",!0),ne.value?(P(),Ae("div",gxe,K(Oe(ra)(Oe(H)-Oe(te))),1)):ge("",!0),v("div",yxe,K(Oe(ra)(Oe(q))),1),v("div",_xe,K(Oe(ra)(Oe(oe))),1),h.value.additionalDiscount>0?(P(),Ae("div",wxe,"-"+K(Oe(ra)(h.value.additionalDiscount)),1)):ge("",!0),v("div",bxe,K(Oe(ra)(Oe(ce))),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(Ze,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(bt,{class:"pb-2"},{default:u(()=>[Be[42]||(Be[42]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),g.value?(P(),Ae("div",xxe,[i(Ot,{indeterminate:"",color:"primary",size:"32"}),Be[29]||(Be[29]=v("div",{class:"mt-2 text-body-2"},"Loading payment information...",-1))])):b.value?(P(),he(Wt,{key:1,type:"warning",variant:"tonal",class:"mb-3"},{default:u(()=>[N(K(b.value),1)]),_:1})):S.value?(P(),Ae(ze,{key:2},[i(At,{"no-gutters":"",class:"mb-3"},{default:u(()=>[i(Nt,{cols:"12"},{default:u(()=>[i(Wt,{type:"info",variant:"tonal",density:"compact"},{title:u(()=>[v("span",Cxe,"Payment Receipt: "+K(S.value.identifier),1)]),default:u(()=>[v("div",Sxe,[Be[30]||(Be[30]=v("strong",null,"Date:",-1)),N(" "+K(at(S.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1}),i(At,{"no-gutters":"",class:"mb-3"},{default:u(()=>[i(Nt,{cols:"4"},{default:u(()=>[Be[31]||(Be[31]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",Exe,K(Oe(ra)(Oe(ce))),1)]),_:1}),i(Nt,{cols:"4"},{default:u(()=>[Be[32]||(Be[32]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",kxe,K(Oe(ra)(ie.value+X.value)),1)]),_:1}),i(Nt,{cols:"4"},{default:u(()=>[Be[33]||(Be[33]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),v("div",{class:lt(["text-h6",fe.value>0?"text-error":"text-success"])},K(Oe(ra)(fe.value)),3)]),_:1})]),_:1}),_.value?(P(),Ae("div",Bxe,[i(Ot,{indeterminate:"",size:"32",color:"primary"}),Be[34]||(Be[34]=v("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(P(),Ae(ze,{key:1},[i(et,{class:"mb-3"}),Be[40]||(Be[40]=v("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),i(vt,{density:"compact",class:"mb-3"},{default:u(()=>[Be[38]||(Be[38]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(B.value,(Pe,ut)=>(P(),Ae("tr",{key:`existing-${Pe.id}`},[v("td",null,K(ut+1),1),v("td",Txe,""+K(Pe.amount.toLocaleString()),1),v("td",null,K(Pe.mode),1),v("td",null,K(at(Pe.paymentDate)),1),v("td",null,[i(kt,{icon:"",size:"small",color:"error",variant:"text",onClick:wt=>Ue(Pe.id),loading:F.value.includes(Pe.id)},{default:u(()=>[i(Ye,null,{default:u(()=>[...Be[35]||(Be[35]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(P(!0),Ae(ze,null,Jt(W.value,(Pe,ut)=>(P(),Ae("tr",{key:`new-${ut}`},[v("td",null,K(B.value.length+ut+1),1),v("td",null,[i(Dn,{modelValue:Pe.amount,"onUpdate:modelValue":wt=>Pe.amount=wt,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(ln,{modelValue:Pe.mode,"onUpdate:modelValue":wt=>Pe.mode=wt,items:Oe(G),density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),v("td",null,[i(na,{modelValue:Pe.datePickerMenu,"onUpdate:modelValue":wt=>Pe.datePickerMenu=wt,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:wt})=>[i(Dn,Ie({modelValue:Pe.paymentDate,"onUpdate:modelValue":Xt=>Pe.paymentDate=Xt,density:"compact",variant:"underlined","hide-details":"",readonly:""},{ref_for:!0},wt),{"append-inner":u(()=>[i(Ye,{class:"text-medium-emphasis"},{default:u(()=>[...Be[36]||(Be[36]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[i(_n,{"model-value":be(Pe.paymentDate),"onUpdate:modelValue":wt=>Fe(wt,Pe),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(kt,{icon:"",size:"small",color:"error",variant:"text",onClick:wt=>se(ut)},{default:u(()=>[i(Ye,null,{default:u(()=>[...Be[37]||(Be[37]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),i(At,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(Nt,{cols:"auto"},{default:u(()=>[i(kt,{variant:"outlined",color:"secondary",onClick:z,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Be[39]||(Be[39]=[N(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))],64)):(P(),he(Wt,{key:3,type:"info",variant:"tonal"},{default:u(()=>[...Be[41]||(Be[41]=[N(" No associated payment receipt found. Payments will be managed separately. ",-1)])]),_:1}))]),_:1})]),_:1}),i(Ze,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[i(bt,{class:"d-flex justify-center pb-2"},{default:u(()=>[i(kt,{color:"primary",onClick:Se,loading:m.value,disabled:!M.value,"prepend-icon":"mdi-content-save",class:"btn-hover-base"},{default:u(()=>[...Be[43]||(Be[43]=[N(" Update Bill ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})}}},EH=en(Ixe,[["__scopeId","data-v-cd129ecd"]]),Fxe={key:1,class:"d-flex justify-center align-center pa-8"},Pxe={__name:"patient-document-create",props:{appointment:{type:Object,required:!0},doctorId:{type:Number,required:!0},clinicId:{type:Number,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,{showError:r}=la();Ln();const s=R("write"),o=R("medical-fitness-certificate"),l=R([{title:"Medical Fitness Certificate",value:"medical-fitness-certificate"},{title:"Leave of Absence",value:"leave-of-absence"}]),c=R(!1),f=R(!1),d=R(null),A=R(null),m=D=>{if(D instanceof Date){const U=D.getFullYear(),L=String(D.getMonth()+1).padStart(2,"0"),H=String(D.getDate()).padStart(2,"0");return`${U}-${L}-${H}`}return D},p=()=>Tn(),h=R({documentType:"medical-fitness-certificate",patientName:n.appointment.patient_name||"",patientAge:n.appointment.patient_age||null,certificateDate:p(),purpose:"",validityPeriod:"",activity:"",reason:"",tillDate:"",doctorName:"",clinicName:"",additionalNotes:""}),y=ee(()=>{const D={};return h.value.patientName||(D.patientName="Required"),(h.value.patientAge===null||h.value.patientAge===void 0||h.value.patientAge==="")&&(D.patientAge="Required"),h.value.certificateDate||(D.certificateDate="Required"),o.value==="medical-fitness-certificate"&&(h.value.purpose||(D.purpose="Required"),h.value.validityPeriod||(D.validityPeriod="Required")),o.value==="leave-of-absence"&&(h.value.activity||(D.activity="Required"),h.value.reason||(D.reason="Required"),h.value.tillDate||(D.tillDate="Required")),h.value.doctorName||(D.doctorName="Required"),h.value.clinicName||(D.clinicName="Required"),D}),g=ee({get:()=>h.value.certificateDate?new Date(h.value.certificateDate+"T12:00:00").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",set:()=>{}}),_=ee({get:()=>h.value.tillDate?new Date(h.value.tillDate+"T12:00:00").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",set:()=>{}}),b=ee(()=>o.value==="leave-of-absence"?"Document Date *":"Certificate Date *"),S=ee(()=>({id:n.appointment.patientId,name:h.value.patientName||n.appointment.patient_name||"N/A",age:h.value.patientAge??n.appointment.patient_age??null,birthDate:n.appointment.patient_birth_date||null,gender:n.appointment.patient_gender||"N/A",contactNumber:n.appointment.contactNumber||"N/A"})),B=ee(()=>A.value?{documentData:{...h.value,certificateDate:h.value.certificateDate},printConfigurations:A.value}:null),F=D=>{let U;typeof D=="string"?U=D.includes("T")?D.split("T")[0]:D:D instanceof Date?U=m(D):U=p(),h.value.certificateDate=U,c.value=!1},T=D=>{let U;typeof D=="string"?U=D.includes("T")?D.split("T")[0]:D:D instanceof Date?U=m(D):U="",h.value.tillDate=U,f.value=!1},E=D=>{h.value.documentType=D,D==="medical-fitness-certificate"?(h.value.activity="",h.value.reason="",h.value.tillDate=""):D==="leave-of-absence"&&(h.value.purpose="",h.value.validityPeriod="")},x=async()=>{try{const D=await Ch(n.doctorId);if(D.error){console.error("Error fetching print configs:",D.error),r("Failed to load print configurations");return}if(A.value=D.data||{},A.value.doctorName&&!h.value.doctorName&&(h.value.doctorName=A.value.doctorName),A.value.clinicAddress&&!h.value.clinicName){const U=A.value.clinicAddress.split(`
`)[0]||A.value.clinicAddress;h.value.clinicName=U}}catch(D){console.error("Error fetching print configurations:",D),r("Failed to load print configurations")}},C=()=>{a("close")};return Ge(s,D=>{D==="write"&&d.value&&d.value.validate()}),An(async()=>{await x()}),(D,U)=>{const L=I("v-icon"),H=I("v-btn"),oe=I("v-card-title"),de=I("v-col"),te=I("v-row"),q=I("v-select"),ce=I("v-tab"),le=I("v-tabs"),Z=I("v-text-field"),ne=I("v-date-picker"),G=I("v-menu"),W=I("v-textarea"),Q=I("v-form"),O=I("v-card-text"),ae=I("v-card"),j=I("v-tabs-window-item"),J=I("v-progress-circular"),ie=I("v-tabs-window");return P(),he(ae,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[i(te,{"no-gutters":""},{default:u(()=>[i(de,{cols:"12"},{default:u(()=>[i(oe,{class:"d-flex align-center justify-space-between"},{default:u(()=>[U[19]||(U[19]=v("span",null,"Create Document",-1)),i(H,{onClick:C,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(L,{size:"18"},{default:u(()=>[...U[18]||(U[18]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(te,{"no-gutters":""},{default:u(()=>[i(de,{cols:"12",class:"pa-3"},{default:u(()=>[i(q,{modelValue:o.value,"onUpdate:modelValue":[U[0]||(U[0]=X=>o.value=X),E],items:l.value,label:"Document Type",variant:"outlined",density:"compact",class:"mb-0","hide-details":""},null,8,["modelValue","items"]),i(le,{modelValue:s.value,"onUpdate:modelValue":U[1]||(U[1]=X=>s.value=X),class:"mb-3"},{default:u(()=>[i(ce,{value:"write"},{default:u(()=>[...U[20]||(U[20]=[N("Write",-1)])]),_:1}),i(ce,{value:"share"},{default:u(()=>[...U[21]||(U[21]=[N("Share",-1)])]),_:1})]),_:1},8,["modelValue"]),i(ie,{modelValue:s.value,"onUpdate:modelValue":U[17]||(U[17]=X=>s.value=X)},{default:u(()=>[i(j,{value:"write"},{default:u(()=>[i(ae,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[i(O,null,{default:u(()=>[i(Q,{ref_key:"formRef",ref:d},{default:u(()=>[i(te,null,{default:u(()=>[i(de,{cols:"6"},{default:u(()=>[i(Z,{modelValue:h.value.patientName,"onUpdate:modelValue":U[2]||(U[2]=X=>h.value.patientName=X),label:"Patient Name *",variant:"outlined",density:"compact",rules:[X=>!!X||"Patient name is required"],"error-messages":y.value.patientName},null,8,["modelValue","rules","error-messages"])]),_:1}),i(de,{cols:"6"},{default:u(()=>[i(Z,{modelValue:h.value.patientAge,"onUpdate:modelValue":U[3]||(U[3]=X=>h.value.patientAge=X),modelModifiers:{number:!0},label:"Patient Age *",type:"number",variant:"outlined",density:"compact",rules:[X=>X!=null&&X!==""||"Patient age is required"],"error-messages":y.value.patientAge},null,8,["modelValue","rules","error-messages"])]),_:1}),i(de,{cols:"6"},{default:u(()=>[i(G,{modelValue:c.value,"onUpdate:modelValue":U[6]||(U[6]=X=>c.value=X),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:X})=>[i(Z,Ie({modelValue:g.value,"onUpdate:modelValue":U[4]||(U[4]=fe=>g.value=fe),label:b.value,variant:"outlined",density:"compact",readonly:""},X,{rules:[fe=>!!fe||"Certificate date is required"],"error-messages":y.value.certificateDate}),{"append-inner":u(()=>[i(L,null,{default:u(()=>[...U[22]||(U[22]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","label","rules","error-messages"])]),default:u(()=>[i(ne,{modelValue:h.value.certificateDate,"onUpdate:modelValue":[U[5]||(U[5]=X=>h.value.certificateDate=X),F],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),o.value==="medical-fitness-certificate"?(P(),Ae(ze,{key:0},[i(de,{cols:"6"},{default:u(()=>[i(Z,{modelValue:h.value.purpose,"onUpdate:modelValue":U[7]||(U[7]=X=>h.value.purpose=X),label:"Purpose *",variant:"outlined",density:"compact",placeholder:"e.g., work, travel",rules:[X=>!!X||"Purpose is required"],"error-messages":y.value.purpose},null,8,["modelValue","rules","error-messages"])]),_:1}),i(de,{cols:"6"},{default:u(()=>[i(Z,{modelValue:h.value.validityPeriod,"onUpdate:modelValue":U[8]||(U[8]=X=>h.value.validityPeriod=X),label:"Validity Period *",variant:"outlined",density:"compact",placeholder:"e.g., 30 days",rules:[X=>!!X||"Validity period is required"],"error-messages":y.value.validityPeriod},null,8,["modelValue","rules","error-messages"])]),_:1})],64)):ge("",!0),o.value==="leave-of-absence"?(P(),Ae(ze,{key:1},[i(de,{cols:"6"},{default:u(()=>[i(Z,{modelValue:h.value.activity,"onUpdate:modelValue":U[9]||(U[9]=X=>h.value.activity=X),label:"Activity/Institution *",variant:"outlined",density:"compact",placeholder:"e.g., college, court",rules:[X=>!!X||"Activity is required"],"error-messages":y.value.activity},null,8,["modelValue","rules","error-messages"])]),_:1}),i(de,{cols:"6"},{default:u(()=>[i(Z,{modelValue:h.value.reason,"onUpdate:modelValue":U[10]||(U[10]=X=>h.value.reason=X),label:"Reason *",variant:"outlined",density:"compact",placeholder:"e.g., medical treatment",rules:[X=>!!X||"Reason is required"],"error-messages":y.value.reason},null,8,["modelValue","rules","error-messages"])]),_:1}),i(de,{cols:"6"},{default:u(()=>[i(G,{modelValue:f.value,"onUpdate:modelValue":U[13]||(U[13]=X=>f.value=X),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:X})=>[i(Z,Ie({modelValue:_.value,"onUpdate:modelValue":U[11]||(U[11]=fe=>_.value=fe),label:"Till Date *",variant:"outlined",density:"compact",readonly:""},X,{rules:[fe=>!!fe||"Till date is required"],"error-messages":y.value.tillDate}),{"append-inner":u(()=>[i(L,null,{default:u(()=>[...U[23]||(U[23]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","rules","error-messages"])]),default:u(()=>[i(ne,{modelValue:h.value.tillDate,"onUpdate:modelValue":[U[12]||(U[12]=X=>h.value.tillDate=X),T],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})],64)):ge("",!0),i(de,{cols:"6"},{default:u(()=>[i(Z,{modelValue:h.value.doctorName,"onUpdate:modelValue":U[14]||(U[14]=X=>h.value.doctorName=X),label:"Doctor Name *",variant:"outlined",density:"compact",rules:[X=>!!X||"Doctor name is required"],"error-messages":y.value.doctorName},null,8,["modelValue","rules","error-messages"])]),_:1}),i(de,{cols:"6"},{default:u(()=>[i(Z,{modelValue:h.value.clinicName,"onUpdate:modelValue":U[15]||(U[15]=X=>h.value.clinicName=X),label:"Clinic Name *",variant:"outlined",density:"compact",rules:[X=>!!X||"Clinic name is required"],"error-messages":y.value.clinicName},null,8,["modelValue","rules","error-messages"])]),_:1}),i(de,{cols:"12"},{default:u(()=>[i(W,{modelValue:h.value.additionalNotes,"onUpdate:modelValue":U[16]||(U[16]=X=>h.value.additionalNotes=X),label:"Additional Notes",variant:"outlined",density:"compact",rows:"3",placeholder:"Optional additional information"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),i(j,{value:"share"},{default:u(()=>[A.value?(P(),he(Sh,{key:0,contentType:o.value==="leave-of-absence"?"leave-of-absence":"certificate",data:B.value,patient:S.value},null,8,["contentType","data","patient"])):(P(),Ae("div",Fxe,[i(J,{indeterminate:"",color:"primary"})]))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},Dxe=en(Pxe,[["__scopeId","data-v-8c785f77"]]),PC=""+new URL("images/no_patient_waiting-BEIBlTUs.png",import.meta.url).href,Uxe={__name:"Permission",props:{permission:{type:String,default:null},anyPermission:{type:Array,default:null},allPermissions:{type:Array,default:null},feature:{type:String,default:null},requireAdmin:{type:Boolean,default:!1},tag:{type:String,default:"div"}},setup(e){const t=e,{hasPermission:n,hasAnyPermission:a,hasAllPermissions:r,hasFeatureAccess:s,isAdmin:o,features:l}=gh(),c=ee(()=>{if(t.requireAdmin)return o.value;if(t.feature){const f=s(t.feature);return f?f.value:!1}if(t.permission){if(o.value)return!0;const f=n(t.permission),d=t.permission.split(".");if(d.length>=2){const A=d[0],m=l.value.find(p=>p&&p.id===A);if(m&&m.adminOnly)return!1}return f.value}return t.anyPermission&&Array.isArray(t.anyPermission)&&t.anyPermission.length>0?a(t.anyPermission).value:t.allPermissions&&Array.isArray(t.allPermissions)&&t.allPermissions.length>0?r(t.allPermissions).value:!0});return(f,d)=>c.value?(P(),he(iw(e.tag),fl(Ie({key:0},f.$attrs)),{default:u(()=>[BZ(f.$slots,"default",{},void 0,!0)]),_:3},16)):ge("",!0)}},En=en(Uxe,[["__scopeId","data-v-4340528a"]]),sR={__name:"delete-appointment",props:{deleteSelectedAppointment:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=R(n.deleteSelectedAppointment),s=()=>{a("close")},o=async l=>{const c=await nhe(l.id);c.error?console.error("Error deleting appointment:",c.error):console.log("Appointment deleted successfully"),s()};return(l,c)=>{const f=I("v-card-title"),d=I("v-col"),A=I("v-icon"),m=I("v-btn"),p=I("v-row"),h=I("v-card"),y=I("v-card-text"),g=I("v-divider");return P(),he(h,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(h,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"11"},{default:u(()=>[i(f,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[N("Confirm Appointment Delete",-1)])]),_:1})]),_:1}),i(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[i(A,null,{default:u(()=>[...c[2]||(c[2]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(h,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[N(" Are you sure you want to delete this appointment? ",-1),v("span",{class:"text-red font-weight-bold"}," You will not be able to recover data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),i(g),i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"2"}),i(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(m,{variant:"outlined",onClick:c[0]||(c[0]=_=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[N("Yes, Delete Appointment",-1)])]),_:1})]),_:1}),i(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},Rxe={class:"tab-content"},Nxe={class:"tab-content"},Vxe={class:"tab-content"},Lxe={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},Mxe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},Oxe={class:"d-flex align-center flex-wrap flex-grow-1 min-width-0"},Hxe={class:"text-caption mr-2"},$xe={class:"d-flex align-center flex-wrap status-icons-row"},Qxe={class:"scroll-hover",style:{height:"calc(100vh - 280px)"}},Gxe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},zxe={class:"d-flex align-center flex-wrap flex-grow-1 min-width-0"},Wxe={class:"text-caption mr-2"},Kxe={class:"text-success"},jxe={class:"d-flex align-center flex-wrap status-icons-row"},qxe={class:"scroll-hover",style:{height:"calc(100vh - 280px)"}},Yxe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},Xxe={class:"d-flex align-center flex-wrap flex-grow-1 min-width-0"},Jxe={class:"text-caption mr-2"},Zxe={class:"text-error"},eCe={class:"d-flex align-center flex-wrap status-icons-row"},tCe={__name:"appointment-queue",setup(e,{expose:t}){const n=Ln(),a=ml(),{showSuccess:r,showWarning:s}=la(),o=Vi(),l=vt=>{if(!vt)return"";const et=vt.patient_birth_date?Ug(vt.patient_birth_date):vt.patient_age!=null?vt.patient_age:null;return qv(et)},c=ee(()=>o.md.value?"small":"x-small"),f=R("in-queue"),d=R(!1),A=R([]),m=R(!1),p=R(null),h=R(!1),y=R(null),g=R(!1),_=R(!1),b=R(!1),S=R(null),B=R(!1),F=R(null),T=R(!1),E=R(null),x=R(!1),C=R(null),D=R(!1),U=R(null),L=R(!1),H=R(null),oe=()=>{const vt=new Date,et=new Date(vt.getTime()+330*60*1e3),Wt=et.getUTCFullYear(),_n=String(et.getUTCMonth()+1).padStart(2,"0"),na=String(et.getUTCDate()).padStart(2,"0");return`${Wt}-${_n}-${na}`},de=vt=>{if(vt instanceof Date){const et=vt.getFullYear(),Wt=String(vt.getMonth()+1).padStart(2,"0"),_n=String(vt.getDate()).padStart(2,"0");return`${et}-${Wt}-${_n}`}return vt},te=R(oe()),q=R(""),ce=R(null),le=ee(()=>n.state.doctorModule.doctorId),Z=ee(()=>n.state.clinicModule.clinicId),ne=ee(()=>n.getters["doctorModule/isGSTRegistered"]),G=vt=>{if(!q.value||q.value.trim()==="")return vt;const et=q.value.toLowerCase().trim();return vt.filter(Wt=>Wt.patient_name.toLowerCase().includes(et))},W=ee(()=>{const vt=A.value.filter(et=>et.status==="waiting"||et.status==="confirmed");return G(vt)}),Q=ee(()=>{const vt=A.value.filter(et=>et.status==="completed");return G(vt)}),O=ee(()=>{const vt=A.value.filter(et=>et.status==="cancelled");return G(vt)}),{hasPermission:ae}=gh(),j=vt=>{if(!ae("home.queue.patient").value){s("You do not have permission to view patient details from appointment card");return}a.push({path:`/patients/${vt}`,query:{from:"home"}})},J=vt=>{console.log("Tab changed to:",vt),h.value=!0,setTimeout(()=>{h.value=!1},500),requestAnimationFrame(()=>{h.value=!0,setTimeout(()=>{h.value=!1},300)}),y.value=vt,setTimeout(()=>{y.value=null},600)},ie=vt=>{if(!vt)return"Select Date";const et=oe(),Wt=new Date(Date.now()+330*60*1e3-1440*60*1e3).toISOString().slice(0,10),_n=new Date(Date.now()+330*60*1e3+1440*60*1e3).toISOString().slice(0,10);if(vt===et)return"Today";if(vt===Wt)return"Yesterday";if(vt===_n)return"Tomorrow";const na=new Date(vt+"T12:00:00");return na.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:na.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},X=async vt=>{let et;typeof vt=="string"?et=vt.includes("T")?vt.split("T")[0]:vt:vt instanceof Date?et=de(vt):et=oe(),te.value=et,g.value=!1,await qt(le.value,Z.value,et)},fe=()=>{ce.value&&clearTimeout(ce.value),ce.value=setTimeout(()=>{console.log("Search query:",q.value)},300)};tu(()=>{qt(le.value,Z.value,te.value)});const M=()=>{d.value=!0},z=async()=>{d.value=!1,await qt(le.value,Z.value,te.value)},se=async vt=>{r(vt.message),await qt(le.value,Z.value,te.value)},be=vt=>{vt.type,r(vt.message)},Fe=R(!1),ye=R(null),Qe=vt=>{Fe.value=!0,ye.value=vt,console.log("Selected Appointment for Deletion:",vt)},_e=async()=>{Fe.value=!1,ye.value=null,await qt(le.value,Z.value,te.value)},Se=vt=>{p.value={...vt},m.value=!0},Ee=async()=>{await qt(le.value,Z.value,te.value),m.value=!1},Ue=vt=>{if(!ae("home.queue.bill").value){s("You do not have permission to generate receipts");return}S.value=vt,ne.value?b.value=!0:_.value=!0},je=()=>{_.value=!1,b.value=!1,S.value=null},at=vt=>{console.log("Receipt created successfully:",vt),r(`Receipt ${vt.identifier} created successfully!`)},mt=vt=>{console.log("Bill created successfully:",vt),r(`Bill ${vt.identifier} created successfully!`),b.value=!1,S.value=null,Nt(vt.id)},xe=vt=>{console.log("Edit receipt requested for ID:",vt),_.value=!1,b.value=!1,F.value=vt,B.value=!0},Be=()=>{B.value=!1,F.value=null},Ye=()=>{T.value=!1,E.value=null},kt=vt=>{console.log("View receipt requested for ID:",vt),_.value=!1,b.value=!1,C.value=vt,x.value=!0},xt=()=>{x.value=!1,C.value=null},Nt=vt=>{console.log("View bill requested for ID:",vt),_.value=!1,b.value=!1,U.value=vt,D.value=!0},At=()=>{D.value=!1,U.value=null},Ot=vt=>{console.log("Edit bill requested from view for ID:",vt),D.value=!1,U.value=null,E.value=vt,T.value=!0},Dt=vt=>{console.log("Edit receipt requested from view for ID:",vt),x.value=!1,C.value=null,F.value=vt,B.value=!0},bt=vt=>{console.log("Receipt updated successfully:",vt),r(`Receipt ${vt.identifier} updated successfully!`),Be()},Ze=vt=>{console.log("Bill updated successfully:",vt),r(`Bill ${vt.identifier} updated successfully!`),Ye()},qt=async(vt,et,Wt=null,_n=!1)=>{const na=await ehe(vt,et,Wt);na.error||(A.value=[...na.data],_n&&r("Appointment list refreshed"))},Vt=async vt=>{vt.status=vt.status==="waiting"?"completed":"waiting",await qM(vt)},zt=async()=>{await qt(le.value,Z.value,te.value,!0)},ln=vt=>{if(!ae("home.queue.certificate").value){s("You do not have permission to generate certificates");return}H.value=vt,L.value=!0},Dn=()=>{L.value=!1,H.value=null};return t({refreshAppointments:qt}),(vt,et)=>{const Wt=I("v-icon"),_n=I("v-btn"),na=I("v-date-picker"),rt=I("v-menu"),Pe=I("v-col"),ut=I("v-tooltip"),wt=I("v-row"),Xt=I("v-badge"),bn=I("v-tab"),wn=I("v-tabs"),Zn=I("v-card"),ua=I("v-text-field"),Ce=I("v-progress-circular"),He=I("v-card-title"),Re=I("v-chip"),Te=I("v-card-text"),Ve=I("v-spacer"),$e=I("v-card-actions"),dt=I("v-empty-state"),Bt=I("v-tabs-window-item"),yt=I("v-tabs-window"),gt=I("v-bottom-sheet"),pt=I("v-dialog");return P(),Ae(ze,null,[i(Zn,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[i(Zn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(wt,{"no-gutters":""},{default:u(()=>[i(Pe,{cols:"7",class:"d-flex justify-start"},{default:u(()=>[i(rt,{modelValue:g.value,"onUpdate:modelValue":et[1]||(et[1]=tt=>g.value=tt),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:tt})=>[i(_n,Ie(tt,{variant:"outlined",size:"small",rounded:"x-small",class:"btn-hover-enhanced"}),{default:u(()=>[N(K(ie(te.value))+" ",1),i(Wt,{class:"ml-1"},{default:u(()=>[...et[20]||(et[20]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16)]),default:u(()=>[i(na,{modelValue:te.value,"onUpdate:modelValue":[et[0]||(et[0]=tt=>te.value=tt),X],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),i(Pe,{cols:"5",class:"d-flex justify-end align-center",style:{gap:"2px"}},{default:u(()=>[i(ut,{text:"Add Patient to Appointment Queue"},{activator:u(({props:tt})=>[i(_n,Ie({rounded:"x-small",onClick:M,size:"small",variant:"outlined"},tt,{class:"btn-hover-enhanced"}),{default:u(()=>[...et[21]||(et[21]=[N(" Add Patient ",-1)])]),_:1},16)]),_:1}),i(ut,{text:"Refresh Appointment Queue"},{activator:u(({props:tt})=>[i(_n,Ie({rounded:"x-small",onClick:zt,size:"small"},tt,{class:"btn-hover-enhanced"}),{default:u(()=>[i(Wt,{size:"large"},{default:u(()=>[...et[22]||(et[22]=[v("img",{src:Dg,alt:"Refresh",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1}),i(wt,{"no-gutters":""},{default:u(()=>[i(Pe,{cols:"12"},{default:u(()=>[i(wn,{modelValue:f.value,"onUpdate:modelValue":[et[2]||(et[2]=tt=>f.value=tt),J],"align-tabs":"center",density:"compact",class:"tabs-hover-container"},{default:u(()=>[i(ut,{text:"Patients Waiting & Confirmed"},{activator:u(({props:tt})=>[i(bn,Ie({value:"in-queue"},tt,{class:["tab-hover",{"tab-active":f.value==="in-queue"}]}),{default:u(()=>[v("div",Rxe,[i(Xt,{color:f.value==="in-queue"?"warning":"primary",content:W.value.length,inline:"",class:"tab-badge"},{default:u(()=>[i(Wt,{size:"large",class:"tab-icon"},{default:u(()=>[...et[23]||(et[23]=[v("img",{src:ame,alt:"waiting"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1}),i(ut,{text:"Consultations Completed"},{activator:u(({props:tt})=>[i(bn,Ie({value:"completed"},tt,{class:["tab-hover",{"tab-active":f.value==="completed"}]}),{default:u(()=>[v("div",Nxe,[i(Xt,{color:f.value==="completed"?"success":"primary",content:Q.value.length,inline:"",class:"tab-badge"},{default:u(()=>[i(Wt,{size:"large",class:"tab-icon"},{default:u(()=>[...et[24]||(et[24]=[v("img",{src:rme,alt:"completed"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1}),i(ut,{text:"Cancelled Appointments"},{activator:u(({props:tt})=>[i(bn,Ie({value:"cancelled"},tt,{class:["tab-hover",{"tab-active":f.value==="cancelled"}]}),{default:u(()=>[v("div",Vxe,[i(Xt,{color:f.value==="cancelled"?"error":"primary",content:O.value.length,inline:"",class:"tab-badge"},{default:u(()=>[i(Wt,{size:"large",class:"tab-icon"},{default:u(()=>[...et[25]||(et[25]=[v("img",{src:sme,alt:"cancelled"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(yt,{modelValue:f.value,"onUpdate:modelValue":et[6]||(et[6]=tt=>f.value=tt),class:"flex-grow-1"},{default:u(()=>[i(Bt,{value:"in-queue",class:"h-100"},{default:u(()=>[i(wt,{"no-gutters":"",class:"h-100"},{default:u(()=>[i(Pe,{cols:"12",class:"pa-2"},{default:u(()=>[i(ua,{modelValue:q.value,"onUpdate:modelValue":et[3]||(et[3]=tt=>q.value=tt),placeholder:"Search waiting patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:fe},{"prepend-inner":u(()=>[i(Wt,{size:"small",color:"secondary"},{default:u(()=>[...et[26]||(et[26]=[N("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(Pe,{cols:"12",class:"h-100",style:{height:"calc(100% - 80px)"}},{default:u(()=>[v("div",Lxe,[W.value?W.value.length>0?(P(!0),Ae(ze,{key:1},Jt(W.value.sort((tt,re)=>new Date(tt.appointmentDate+" "+tt.appointmentTime)-new Date(re.appointmentDate+" "+re.appointmentTime)),tt=>(P(),he(Zn,{key:tt.id,style:Mt([{textAlign:"left"},{cursor:"pointer",position:"relative","overflow-x":"hidden"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-waiting",onClick:re=>j(tt.patientId)},{default:u(()=>[i(He,{class:"pb-0 pt-2"},{default:u(()=>[v("div",Mxe,K(tt.patient_name),1)]),_:2},1024),i(Te,{class:"py-1"},{default:u(()=>[i(wt,{"no-gutters":"",align:"center"},{default:u(()=>[i(Pe,{cols:"12",class:"d-flex align-center justify-space-between flex-wrap card-demographics-row"},{default:u(()=>[v("div",Oxe,[v("span",Hxe,[v("span",{class:lt(new Date(tt.appointmentDate+" "+tt.appointmentTime)<new Date?"text-error":"text-primary")},K(Oe(cC)(tt.appointmentTime)),3),N(" "+K(`  ${tt.patient_gender}`)+K(l(tt)?`  ${l(tt)}`:"")+K(tt.contactNumber?`  ${tt.contactNumber}`:"")+K(tt.importID?`  Import ID: ${tt.importID}`:""),1)])]),v("div",$xe,[tt.status==="confirmed"?(P(),he(Wt,{key:0,size:c.value,color:"secondary",class:"mr-1"},{default:u(()=>[...et[27]||(et[27]=[v("img",{src:ome,alt:"Confirmed"},null,-1)])]),_:1},8,["size"])):ge("",!0),i(ut,{text:tt.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:re})=>[i(Wt,Ie({size:c.value,class:"mr-1",color:"secondary"},{ref_for:!0},re),{default:u(()=>[N(K(tt.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040,["size"])]),_:2},1032,["text"]),tt.type==="procedure"?(P(),he(ut,{key:1,text:"Procedure Appointment"},{activator:u(({props:re})=>[i(Wt,Ie({size:c.value,class:"mr-1",color:"secondary"},{ref_for:!0},re),{default:u(()=>[...et[28]||(et[28]=[v("img",{src:oC,alt:"Procedure"},null,-1)])]),_:1},16,["size"])]),_:1})):ge("",!0),tt.has_prior_consultation?(P(),he(ut,{key:2,text:"Past Consultations Available"},{activator:u(({props:re})=>[i(Wt,Ie({size:c.value,class:"mr-1",color:"secondary"},{ref_for:!0},re),{default:u(()=>[...et[29]||(et[29]=[N("mdi-file-eye",-1)])]),_:1},16,["size"])]),_:1})):ge("",!0),tt.type==="followup"?(P(),he(Re,{key:3,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...et[30]||(et[30]=[N(" follow-up ",-1)])]),_:1})):ge("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),i($e,{class:"pa-0 px-4 action-row-highlight flex-wrap"},{default:u(()=>[i(ut,{text:"Edit Appointment"},{activator:u(({props:re})=>[i(_n,Ie({color:"primary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Se(tt),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[31]||(et[31]=[v("img",{src:Cv,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),i(ut,{text:"Delete Appointment"},{activator:u(({props:re})=>[i(_n,Ie({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Qe(tt),["stop"]),class:"btn-hover-base"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[32]||(et[32]=[v("img",{src:Fc},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),i(Ve),i(En,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[i(ut,{text:"Generate Receipt"},{activator:u(({props:re})=>[i(_n,Ie({color:"primary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Ue(tt),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[33]||(et[33]=[N("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),i(En,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[i(ut,{text:"Create Document"},{activator:u(({props:re})=>[i(_n,Ie({color:"primary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>ln(tt),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[34]||(et[34]=[v("img",{src:iC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),i(ut,{text:"Mark Complete"},{activator:u(({props:re})=>[i(_n,Ie({color:"#2e7d32",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Vt(tt),["stop"]),class:"btn-hover-base"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[35]||(et[35]=[N("mdi-check-circle-outline",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):W.value.length===0?(P(),he(Pe,{key:2,class:"text-center"},{default:u(()=>[i(Zn,{flat:"",color:"surfaceContainer"},{default:u(()=>[i(dt,{image:Oe(PC)},{title:u(()=>[...et[36]||(et[36]=[v("div",{class:"text-subtitle-2 mt-8"}," No patients in the wait queue ",-1)])]),text:u(()=>[...et[37]||(et[37]=[v("div",{class:"text-caption"}," appointments will show here once you add them to wait queue ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):ge("",!0):(P(),he(wt,{key:0,"no-gutters":""},{default:u(()=>[i(Pe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[i(Ce,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))])]),_:1})]),_:1})]),_:1}),i(Bt,{value:"completed"},{default:u(()=>[i(wt,{"no-gutters":""},{default:u(()=>[i(Pe,{cols:"12",class:"pa-2"},{default:u(()=>[i(ua,{modelValue:q.value,"onUpdate:modelValue":et[4]||(et[4]=tt=>q.value=tt),placeholder:"Search completed patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:fe},{"prepend-inner":u(()=>[i(Wt,{size:"small",color:"secondary"},{default:u(()=>[...et[38]||(et[38]=[N("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(Pe,{cols:"12"},{default:u(()=>[v("div",Qxe,[Q.value?Q.value.length>0?(P(!0),Ae(ze,{key:1},Jt(Q.value.sort((tt,re)=>new Date(re.appointmentDate+" "+re.appointmentTime)-new Date(tt.appointmentDate+" "+tt.appointmentTime)),tt=>(P(),he(Zn,{key:tt.id,style:Mt([{textAlign:"left"},{cursor:"pointer",position:"relative","overflow-x":"hidden"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-completed",onClick:re=>j(tt.patientId)},{default:u(()=>[i(He,{class:"pb-0 pt-2"},{default:u(()=>[v("div",Gxe,K(tt.patient_name),1)]),_:2},1024),i(Te,{class:"py-1"},{default:u(()=>[i(wt,{"no-gutters":"",align:"center"},{default:u(()=>[i(Pe,{cols:"12",class:"d-flex align-center justify-space-between flex-wrap card-demographics-row"},{default:u(()=>[v("div",zxe,[v("span",Wxe,[v("span",Kxe,K(Oe(cC)(tt.appointmentTime)),1),N(" "+K(`  ${tt.patient_gender}`)+K(l(tt)?`  ${l(tt)}`:"")+K(tt.contactNumber?`  ${tt.contactNumber}`:"")+K(tt.importID?`  Import ID: ${tt.importID}`:""),1)])]),v("div",jxe,[i(Wt,{size:c.value,color:"success",class:"mr-1"},{default:u(()=>[...et[39]||(et[39]=[N(" mdi-check-circle ",-1)])]),_:1},8,["size"]),i(ut,{text:tt.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:re})=>[i(Wt,Ie({size:c.value,class:"mr-1",color:"secondary"},{ref_for:!0},re),{default:u(()=>[N(K(tt.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040,["size"])]),_:2},1032,["text"]),tt.type==="procedure"?(P(),he(ut,{key:0,text:"Procedure Appointment"},{activator:u(({props:re})=>[i(Wt,Ie({size:c.value,class:"mr-1",color:"secondary"},{ref_for:!0},re),{default:u(()=>[...et[40]||(et[40]=[v("img",{src:oC,alt:"Procedure"},null,-1)])]),_:1},16,["size"])]),_:1})):ge("",!0),tt.has_prior_consultation?(P(),he(ut,{key:1,text:"Past Consultations Available"},{activator:u(({props:re})=>[i(Wt,Ie({size:c.value,class:"mr-1",color:"secondary"},{ref_for:!0},re),{default:u(()=>[...et[41]||(et[41]=[N("mdi-file-eye",-1)])]),_:1},16,["size"])]),_:1})):ge("",!0),tt.type==="followup"?(P(),he(Re,{key:2,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...et[42]||(et[42]=[N(" follow-up ",-1)])]),_:1})):ge("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),i($e,{class:"pa-0 px-4 action-row-highlight flex-wrap"},{default:u(()=>[i(ut,{text:"Edit Appointment"},{activator:u(({props:re})=>[i(_n,Ie({color:"primary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Se(tt),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[43]||(et[43]=[v("img",{src:Cv,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),i(ut,{text:"Delete Appointment"},{activator:u(({props:re})=>[i(_n,Ie({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Qe(tt),["stop"]),class:"btn-hover-base"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[44]||(et[44]=[v("img",{src:Fc},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),i(Ve),i(En,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[i(ut,{text:"Generate Receipt"},{activator:u(({props:re})=>[i(_n,Ie({color:"primary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Ue(tt),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[45]||(et[45]=[N("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),i(En,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[i(ut,{text:"Create Document"},{activator:u(({props:re})=>[i(_n,Ie({color:"primary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>ln(tt),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[46]||(et[46]=[v("img",{src:iC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),i(ut,{text:"Unmark Complete"},{activator:u(({props:re})=>[i(_n,Ie({color:"#f57c00",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Vt(tt),["stop"]),class:"btn-hover-base"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[47]||(et[47]=[N("mdi-undo",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):ge("",!0):(P(),he(wt,{key:0,"no-gutters":""},{default:u(()=>[i(Pe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[i(Ce,{indeterminate:"",color:"primary"})]),_:1})]),_:1})),Q.value.length===0?(P(),he(Pe,{key:2,class:"text-center"},{default:u(()=>[i(Zn,{flat:"",color:"surfaceContainer"},{default:u(()=>[i(dt,{image:Oe(PC)},{title:u(()=>[...et[48]||(et[48]=[v("div",{class:"text-subtitle-2 mt-8"}," No patients in the completed list ",-1)])]),text:u(()=>[...et[49]||(et[49]=[v("div",{class:"text-caption"}," appointments will show here once you completed them ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):ge("",!0)])]),_:1})]),_:1})]),_:1}),i(Bt,{value:"cancelled"},{default:u(()=>[i(wt,{"no-gutters":""},{default:u(()=>[i(Pe,{cols:"12",class:"pa-2"},{default:u(()=>[i(ua,{modelValue:q.value,"onUpdate:modelValue":et[5]||(et[5]=tt=>q.value=tt),placeholder:"Search cancelled patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:fe},{"prepend-inner":u(()=>[i(Wt,{size:"small",color:"secondary"},{default:u(()=>[...et[50]||(et[50]=[N("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(Pe,{cols:"12"},{default:u(()=>[v("div",qxe,[O.value?O.value.length>0?(P(!0),Ae(ze,{key:1},Jt(O.value.sort((tt,re)=>new Date(re.appointmentDate+" "+re.appointmentTime)-new Date(tt.appointmentDate+" "+tt.appointmentTime)),tt=>(P(),he(Zn,{key:tt.id,style:Mt([{textAlign:"left"},{cursor:"pointer",position:"relative","overflow-x":"hidden"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-cancelled",onClick:re=>j(tt.patientId)},{default:u(()=>[i(He,{class:"pb-0 pt-2"},{default:u(()=>[v("div",Yxe,K(tt.patient_name),1)]),_:2},1024),i(Te,{class:"py-1"},{default:u(()=>[i(wt,{"no-gutters":"",align:"center"},{default:u(()=>[i(Pe,{cols:"12",class:"d-flex align-center justify-space-between flex-wrap card-demographics-row"},{default:u(()=>[v("div",Xxe,[v("span",Jxe,[v("span",Zxe,K(Oe(cC)(tt.appointmentTime)),1),N(" "+K(`  ${tt.patient_gender}`)+K(l(tt)?`  ${l(tt)}`:"")+K(tt.contactNumber?`  ${tt.contactNumber}`:"")+K(tt.importID?`  Import ID: ${tt.importID}`:""),1)])]),v("div",eCe,[i(Wt,{size:c.value,color:"error",class:"mr-1"},{default:u(()=>[...et[51]||(et[51]=[N(" mdi-cancel ",-1)])]),_:1},8,["size"]),i(ut,{text:tt.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:re})=>[i(Wt,Ie({size:c.value,class:"mr-1",color:"secondary"},{ref_for:!0},re),{default:u(()=>[N(K(tt.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040,["size"])]),_:2},1032,["text"]),tt.type==="procedure"?(P(),he(ut,{key:0,text:"Procedure Appointment"},{activator:u(({props:re})=>[i(Wt,Ie({size:c.value,class:"mr-1",color:"secondary"},{ref_for:!0},re),{default:u(()=>[...et[52]||(et[52]=[v("img",{src:oC,alt:"Procedure"},null,-1)])]),_:1},16,["size"])]),_:1})):ge("",!0),tt.has_prior_consultation?(P(),he(ut,{key:1,text:"Past Consultations Available"},{activator:u(({props:re})=>[i(Wt,Ie({size:c.value,class:"mr-1",color:"secondary"},{ref_for:!0},re),{default:u(()=>[...et[53]||(et[53]=[N("mdi-file-eye",-1)])]),_:1},16,["size"])]),_:1})):ge("",!0),tt.type==="followup"?(P(),he(Re,{key:2,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...et[54]||(et[54]=[N(" follow-up ",-1)])]),_:1})):ge("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),i($e,{class:"pa-0 px-4 action-row-highlight flex-wrap"},{default:u(()=>[i(ut,{text:"Edit Appointment"},{activator:u(({props:re})=>[i(_n,Ie({color:"primary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Se(tt),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[55]||(et[55]=[v("img",{src:Cv,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),i(ut,{text:"Delete Appointment"},{activator:u(({props:re})=>[i(_n,Ie({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Qe(tt),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[56]||(et[56]=[v("img",{src:Fc},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),i(Ve),i(En,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[i(ut,{text:"Generate Receipt"},{activator:u(({props:re})=>[i(_n,Ie({color:"primary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Ue(tt),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[57]||(et[57]=[N("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),i(En,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[i(ut,{text:"Create Document"},{activator:u(({props:re})=>[i(_n,Ie({color:"primary",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>ln(tt),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[58]||(et[58]=[v("img",{src:iC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),i(ut,{text:"Reschedule"},{activator:u(({props:re})=>[i(_n,Ie({color:"#f57c00",variant:"plain",size:"default"},{ref_for:!0},re,{onClick:gn(ue=>Se(tt),["stop"]),class:"btn-hover-base"}),{default:u(()=>[i(Wt,{size:"default"},{default:u(()=>[...et[59]||(et[59]=[N("mdi-calendar-edit",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):ge("",!0):(P(),he(wt,{key:0,"no-gutters":""},{default:u(()=>[i(Pe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[i(Ce,{indeterminate:"",color:"primary"})]),_:1})]),_:1})),O.value.length===0?(P(),he(Pe,{key:2,class:"text-center"},{default:u(()=>[i(Zn,{flat:"",color:"surfaceContainer"},{default:u(()=>[i(dt,{image:Oe(PC)},{title:u(()=>[...et[60]||(et[60]=[v("div",{class:"text-subtitle-2 mt-8"}," No cancelled appointments ",-1)])]),text:u(()=>[...et[61]||(et[61]=[v("div",{class:"text-caption"}," cancelled appointments will show here ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):ge("",!0)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),Oe(oi)?(P(),he(gt,{key:0,modelValue:d.value,"onUpdate:modelValue":et[7]||(et[7]=tt=>d.value=tt),class:"elevation-24","max-width":"100%"},{default:u(()=>[i(rU,{onClose:z,onAppointmentCreated:se,onError:be,doctorId:le.value,clinicId:Z.value,selectedDate:te.value},null,8,["doctorId","clinicId","selectedDate"])]),_:1},8,["modelValue"])):ge("",!0),Oe(oi)?ge("",!0):(P(),he(pt,{key:1,modelValue:d.value,"onUpdate:modelValue":et[8]||(et[8]=tt=>d.value=tt),persistent:"","max-width":"1000px"},{default:u(()=>[i(rU,{onClose:z,onAppointmentCreated:se,onError:be,doctorId:le.value,clinicId:Z.value,selectedDate:te.value},null,8,["doctorId","clinicId","selectedDate"])]),_:1},8,["modelValue"])),Oe(oi)?(P(),he(gt,{key:2,modelValue:m.value,"onUpdate:modelValue":et[9]||(et[9]=tt=>m.value=tt),class:"elevation-24","max-width":"100%"},{default:u(()=>[i(sU,{onClose:Ee,appointment:p.value},null,8,["appointment"])]),_:1},8,["modelValue"])):ge("",!0),Oe(oi)?ge("",!0):(P(),he(pt,{key:3,modelValue:m.value,"onUpdate:modelValue":et[10]||(et[10]=tt=>m.value=tt),persistent:"","max-width":"30%"},{default:u(()=>[i(sU,{onClose:Ee,appointment:p.value},null,8,["appointment"])]),_:1},8,["modelValue"])),Oe(oi)?(P(),he(gt,{key:4,modelValue:Fe.value,"onUpdate:modelValue":et[11]||(et[11]=tt=>Fe.value=tt),class:"elevation-24","max-width":"100%"},{default:u(()=>[i(sR,{onClose:_e,deleteSelectedAppointment:ye.value},null,8,["deleteSelectedAppointment"])]),_:1},8,["modelValue"])):ge("",!0),Oe(oi)?ge("",!0):(P(),he(pt,{key:5,modelValue:Fe.value,"onUpdate:modelValue":et[12]||(et[12]=tt=>Fe.value=tt),persistent:"","max-width":"30%"},{default:u(()=>[i(sR,{onClose:_e,deleteSelectedAppointment:ye.value},null,8,["deleteSelectedAppointment"])]),_:1},8,["modelValue"])),i(pt,{modelValue:_.value,"onUpdate:modelValue":et[13]||(et[13]=tt=>_.value=tt),persistent:"","max-width":"70%"},{default:u(()=>[S.value?(P(),he(Lhe,{key:0,appointment:S.value,onClose:je,onReceiptCreated:at,onEditReceipt:xe,onViewReceipt:kt},null,8,["appointment"])):ge("",!0)]),_:1},8,["modelValue"]),et[62]||(et[62]=N()),i(pt,{modelValue:b.value,"onUpdate:modelValue":et[14]||(et[14]=tt=>b.value=tt),persistent:"","max-width":"80%"},{default:u(()=>[S.value?(P(),he(Twe,{key:0,appointment:S.value,onClose:je,onBillCreated:mt,onEditReceipt:xe,onViewBill:Nt},null,8,["appointment"])):ge("",!0)]),_:1},8,["modelValue"]),i(pt,{modelValue:B.value,"onUpdate:modelValue":et[15]||(et[15]=tt=>B.value=tt),persistent:"","max-width":"70%"},{default:u(()=>[B.value&&F.value?(P(),he(dO,{key:0,receiptId:F.value,onClose:Be,onReceiptUpdated:bt},null,8,["receiptId"])):ge("",!0)]),_:1},8,["modelValue"]),i(pt,{modelValue:T.value,"onUpdate:modelValue":et[16]||(et[16]=tt=>T.value=tt),persistent:"","max-width":"85%"},{default:u(()=>[T.value&&E.value?(P(),he(EH,{key:0,billId:E.value,onClose:Ye,onBillUpdated:Ze},null,8,["billId"])):ge("",!0)]),_:1},8,["modelValue"]),i(pt,{modelValue:x.value,"onUpdate:modelValue":et[17]||(et[17]=tt=>x.value=tt),persistent:"","max-width":"70%"},{default:u(()=>[x.value&&C.value?(P(),he(_H,{key:0,receiptId:C.value,onClose:xt,onEditReceipt:Dt},null,8,["receiptId"])):ge("",!0)]),_:1},8,["modelValue"]),i(pt,{modelValue:D.value,"onUpdate:modelValue":et[18]||(et[18]=tt=>D.value=tt),persistent:"","max-width":"80%"},{default:u(()=>[D.value&&U.value?(P(),he(SH,{key:0,billId:U.value,onClose:At,onEditBill:Ot},null,8,["billId"])):ge("",!0)]),_:1},8,["modelValue"]),i(pt,{modelValue:L.value,"onUpdate:modelValue":et[19]||(et[19]=tt=>L.value=tt),persistent:"","max-width":"80%"},{default:u(()=>[H.value?(P(),he(Dxe,{key:0,appointment:H.value,doctorId:le.value,clinicId:Z.value,onClose:Dn},null,8,["appointment","doctorId","clinicId"])):ge("",!0)]),_:1},8,["modelValue"])],64)}}},kH=en(tCe,[["__scopeId","data-v-b77d91dd"]]),nCe=""+new URL("images/default-BWombGQT.jpg",import.meta.url).href,Xv=[{src:nCe,alt:"evamed logo",url:"https://www.youtube.com/@evamed-emr"}],aCe=async(e=null)=>{try{console.log("=== MAKING API CALL TO FETCH CAROUSEL ITEMS ===");let t=e;if(!t){const l=Ii.state.doctorModule?.doctors||[],c=Ii.state.doctorModule?.doctorId,f=l.find(d=>d.id===c);f&&f.doctorSpecialization&&(t=f.doctorSpecialization)}console.log("API call with specialization:",t);const n=new URLSearchParams;n.append("active_only","true"),t&&n.append("specialization",t);const a=`https://api.origamimed.com/advertisements/?${n.toString()}`;console.log("Fetching carousel items from:",a);const r={"Content-Type":"application/json"},s=Js.currentUser;if(s){const l=await s.getIdToken();r.Authorization=`Bearer ${l}`}const o=await fetch(a,{method:"GET",headers:r,signal:AbortSignal.timeout(1e4)});if(console.log("API Response Status:",o.status),o.ok){const l=await o.json();if(console.log("API Response Data:",l),l.success&&l.data&&l.data.advertisements){const c=l.data.advertisements.map(f=>({src:f.image_url,alt:f.title||"Advertisement",url:f.link_url,title:f.title,description:f.description,id:f.id}));return console.log("Returning",c.length,"carousel items from API"),BH(c),c}else console.warn("API response success but no advertisements found:",l)}else console.error("API request failed with status:",o.status);return console.log("Falling back to default carousel items"),Xv.map(l=>({...l,isDefault:!0}))}catch(t){return console.error("Error fetching carousel items:",t),Xv.map(n=>({...n,isDefault:!0}))}},BH=e=>{try{if(!e||e.length===0)return;const t={items:e,timestamp:Date.now(),specialization:rCe()};localStorage.setItem("carouselItemsSimple",JSON.stringify(t)),console.log(" Saved",e.length,"items to cache")}catch(t){console.error(" Error saving to cache:",t)}},DC=()=>{try{const e=localStorage.getItem("carouselItemsSimple");if(!e)return console.log(" No cache found"),null;const t=JSON.parse(e);if(t.items&&t.items.length>0){const n=Date.now()-t.timestamp;return console.log(" Found cached items:",t.items.length,"age:",Math.round(n/(60*1e3)),"min"),t.items}return null}catch(e){return console.error(" Error loading from cache:",e),null}},oR=async(e=!1)=>{if(console.log(" getCarouselItemsSimple called, forceRefresh:",e),!e){const t=DC();if(t&&t.length>0)return console.log(" Using cached items"),t}try{console.log(" Fetching from API...");const t=await aCe();if(t&&t.length>0&&!t[0].isDefault)return console.log(" Got real API data:",t.length,"items"),BH(t),t;console.log(" API failed, trying cache fallback");const n=DC();return n&&n.length>0?(console.log(" Using cache as fallback"),n):(console.log(" No cache available, using defaults"),Xv)}catch(t){console.error(" API error:",t);const n=DC();return n&&n.length>0?n:Xv}},rCe=()=>{const e=Ii.state.doctorModule?.doctors||[],t=Ii.state.doctorModule?.doctorId;return e.find(a=>a.id===t)?.doctorSpecialization||null},iR=()=>{try{console.log("=== CACHE DEBUG ===");const e=localStorage.getItem("carouselItems");if(e){const n=JSON.parse(e);console.log(" Old cache found:",n.items?.length||0,"items")}else console.log(" No old cache");const t=localStorage.getItem("carouselItemsSimple");if(t){const n=JSON.parse(t);console.log(" New cache found:",n.items?.length||0,"items"),console.log(" First item:",n.items?.[0])}else console.log(" No new cache");console.log("=== END CACHE DEBUG ===")}catch(e){console.error(" Debug error:",e)}},sCe=e=>typeof e=="object"&&e!==null&&typeof e.src=="string"&&e.src.length>0&&typeof e.alt=="string"&&(e.url===null||typeof e.url=="string"),lR=e=>{console.log("filterValidCarouselItems - input items:",e);const n=e.filter((a,r)=>{const s=sCe(a);return s||console.log(`filterValidCarouselItems - item ${r} failed validation:`,a),s}).map(a=>{const r={...a};return delete r.isDefault,r});return console.log("filterValidCarouselItems - output items:",n),n},oCe=()=>{try{const e=localStorage.getItem("carouselState");if(e){const t=JSON.parse(e),n=Date.now()-3600*1e3;if(t.timestamp>n)return t}}catch(e){console.error("Error loading carousel state:",e)}return null},iCe=(e,t)=>{try{const n={currentSlide:e,viewTime:t,timestamp:Date.now()};localStorage.setItem("carouselState",JSON.stringify(n))}catch(n){console.error("Error saving carousel state:",n)}},lCe={class:"carousel-overlay"},uCe={key:0,class:"cta-container"},cCe={key:1,class:"d-flex align-center justify-center",style:{height:"100%"}},dCe=1e4,uR=2e3,fCe={__name:"home-content",setup(e){const t=Ln(),n=ee(()=>{const F=t.state.doctorModule?.doctors||[],T=t.state.doctorModule?.doctorId;return F.find(E=>E.id===T)||null}),a=ee(()=>n.value?.doctorSpecialization||null),r=R([...Xv]);R(!1);const s=R(0),o=R(0),l=R(null),c=R(!0),f=R(!1),d=R(!1),A=R(!1),m=()=>{iCe(s.value,o.value)},p=()=>{const F=oCe();return F?(f.value=!0,s.value=F.currentSlide||0,o.value=F.viewTime||0,setTimeout(()=>{f.value=!1},100),!0):!1},h=()=>{if(l.value&&(clearInterval(l.value),l.value=null),!d.value){console.log("Component not active, skipping timer start");return}l.value=setInterval(()=>{c.value&&d.value&&(o.value+=uR,o.value>=dCe&&g(),o.value%1e3===0&&m())},uR),console.log("Timer started with ID:",l.value)},y=()=>{l.value&&(clearInterval(l.value),l.value=null)},g=()=>{r.value.length>0&&(s.value=(s.value+1)%r.value.length,o.value=0,m())},_=()=>{f.value||(o.value=0)},b=F=>{if(F)if(window.require)try{const{shell:T}=window.require("electron");T.openExternal(F)}catch(T){console.error("Error opening external URL:",T),window.open(F,"_blank")}else window.open(F,"_blank")},S=async()=>{try{console.log("refreshCarouselItems called - forcing fresh fetch due to doctor change"),iR();const F=await oR(!0);if(console.log("refreshCarouselItems - freshItems:",F),F&&F.length>0){const T=lR(F);console.log("refreshCarouselItems - validItems:",T),T.length>0&&(r.value=T,s.value=0,o.value=0,m())}}catch(F){console.error("Error refreshing carousel items:",F)}},B=()=>{c.value=!document.hidden};return Ge(s,(F,T)=>{!f.value&&T!==F&&(o.value=0),m()}),Ge(r,F=>{F.length>0&&s.value>=F.length&&(s.value=0,o.value=0)},{immediate:!0}),Ge(a,async(F,T)=>{if(console.log("Doctor specialization changed:",{oldSpecialization:T,newSpecialization:F}),A.value){console.log("Already refreshing, skipping...");return}if(T!==void 0&&F!==T&&r.value.length>0){console.log("Refreshing carousel items due to specialization change");try{A.value=!0,await S()}finally{A.value=!1}}},{immediate:!1}),An(async()=>{try{console.log("onMounted - starting carousel setup"),iR();const F=await oR();if(console.log("onMounted - received carousel data:",F),F&&F.length>0){const E=lR(F);console.log("onMounted - validItems:",E),E.length>0&&(r.value=E)}p()||(s.value=0,o.value=0),s.value>=r.value.length&&(s.value=0,o.value=0)}catch(F){console.error("Error loading carousel items:",F),r.value.length===0&&(r.value=[...Xv])}await Cn(),d.value=!0,h(),document.addEventListener("visibilitychange",B)}),Ri(()=>{d.value=!1,y(),m(),document.removeEventListener("visibilitychange",B)}),OA(()=>{d.value=!0}),rw(()=>{d.value=!1,m()}),(F,T)=>{const E=I("v-icon"),x=I("v-btn"),C=I("v-carousel-item"),D=I("v-carousel"),U=I("v-alert"),L=I("v-card");return P(),he(L,{flat:"",color:"surfaceContainer",class:"pa-1",style:{height:"100%"}},{default:u(()=>[r.value.length>0?(P(),he(D,{key:0,modelValue:s.value,"onUpdate:modelValue":[T[0]||(T[0]=H=>s.value=H),_],"show-arrows":"hover",cycle:!1,"hide-delimiters":"",style:{height:"100%"}},{default:u(()=>[(P(!0),Ae(ze,null,Jt(r.value,(H,oe)=>(P(),he(C,{key:oe,src:H.src,alt:H.alt,contain:""},{default:u(()=>[v("div",lCe,[H.url?(P(),Ae("div",uCe,[i(x,{variant:"elevated",color:"primary",size:"large",onClick:de=>b(H.url),class:"btn-hover-enhanced"},{default:u(()=>[T[2]||(T[2]=N(" Know More ",-1)),i(E,{right:"",class:"ml-2"},{default:u(()=>[...T[1]||(T[1]=[N("mdi-open-in-new",-1)])]),_:1})]),_:1},8,["onClick"])])):ge("",!0)])]),_:2},1032,["src","alt"]))),128))]),_:1},8,["modelValue"])):(P(),Ae("div",cCe,[i(U,{type:"info",variant:"tonal"},{default:u(()=>[...T[3]||(T[3]=[N(" No carousel items available ",-1)])]),_:1})]))]),_:1})}}},ACe=en(fCe,[["__scopeId","data-v-03670743"]]),mCe={class:"booking-content"},vCe={key:0,class:"booking-patient-name"},hCe={class:"booking-actions"},pCe={__name:"resource-booking-row",props:{booking:{type:Object,required:!0},startColumn:{type:Number,required:!0},spanColumns:{type:Number,required:!0},hasConflict:{type:Boolean,default:!1}},emits:["click","edit","delete"],setup(e,{emit:t}){const n=e,a=t,r=ee(()=>{const A=n.booking.reason;return{procedure:"Procedure",maintenance:"Maintenance",cleaning:"Cleaning"}[A]||"Procedure"}),s=ee(()=>`reason-${n.booking.reason||"procedure"}`),o=ee(()=>{if(!n.booking.patient?.name)return"";const A=n.booking.patient.name;return A.length>10?A.substring(0,10)+"...":A});ee(()=>{const A=nU(n.booking.startDateTime),m=nU(n.booking.endDateTime),p=To(A,"h:mm a"),h=To(m,"h:mm a");return`${p} - ${h}`});const l=ee(()=>({gridColumnStart:n.startColumn+2,gridColumnEnd:n.startColumn+n.spanColumns+2})),c=()=>{a("click",n.booking)},f=()=>{a("edit",n.booking)},d=()=>{a("delete",n.booking)};return(A,m)=>{const p=I("v-icon"),h=I("v-btn");return P(),Ae("div",{class:lt(["booking-row",{"has-conflict":e.hasConflict}]),style:Mt(l.value),onClick:c},[v("div",mCe,[e.booking.reason==="procedure"&&e.booking.patient?(P(),Ae("div",vCe,K(o.value),1)):(P(),Ae("div",{key:1,class:lt(["booking-reason",s.value])},K(r.value),3)),v("div",hCe,[i(h,{icon:"",size:"x-small",variant:"text",onClick:gn(f,["stop"]),class:"booking-action-btn"},{default:u(()=>[i(p,{size:"small"},{default:u(()=>[...m[0]||(m[0]=[N("mdi-pencil",-1)])]),_:1})]),_:1}),i(h,{icon:"",size:"x-small",variant:"text",onClick:gn(d,["stop"]),class:"booking-action-btn"},{default:u(()=>[i(p,{size:"small"},{default:u(()=>[...m[1]||(m[1]=[N("mdi-delete",-1)])]),_:1})]),_:1})])])],6)}}},gCe=en(pCe,[["__scopeId","data-v-b5fd55e6"]]),yCe={class:"booking-grid-container"},_Ce={class:"grid-header sticky-header"},wCe={key:0,class:"hour-label"},bCe={key:1,class:"quarter-marker"},xCe={class:"entity-header-row sticky-row"},CCe={class:"entity-header-cell sticky-cell"},SCe={class:"entity-content"},ECe={class:"entity-name-row"},kCe={class:"entity-name"},BCe={class:"entity-actions"},TCe={key:1,class:"empty-entity-row"},ICe={__name:"resource-booking-grid",props:{entities:{type:Array,default:()=>[]},bookings:{type:Array,default:()=>[]},conflicts:{type:Array,default:()=>[]}},emits:["booking-click","add-booking","edit-entity","delete-entity","edit-booking","delete-booking"],setup(e,{emit:t}){const n=e,a=t,r=ee(()=>{const g=[];for(let S=8;S<=23;S++){const B=S===23?0:45;for(let F=0;F<=B;F+=15){const T=$M(HM(new Date,S),F),E=F===0?To(T,"h a"):"";g.push({hour:S,minute:F,label:To(T,"h:mm a"),hourLabel:E,timestamp:T.getTime()})}}return g}),s=ee(()=>[...n.entities].sort((g,_)=>g.name.localeCompare(_.name))),o=g=>n.bookings.filter(_=>(_.entityId||_.entity?.id)===g).sort((_,b)=>_.startDateTime-b.startDateTime),l=g=>{const _=g.startDateTime,b=new Date(_*1e3),S=b.getHours(),B=b.getMinutes();if(S<8)return 0;if(S>23||S===23&&B>0)return 59;const F=S-8,T=Math.floor(B/15)+1,E=F*4+T;return Math.max(0,Math.min(59,E))},c=g=>{const _=l(g),b=g.endDateTime,S=new Date(b*1e3),B=S.getHours(),F=S.getMinutes();if(B<8)return 1;if(B>23||B===23&&F>0)return 60-_;const T=B-8,E=Math.floor(F/15)+1,C=T*4+E-_;return Math.max(1,C)},f=g=>n.conflicts.some(_=>_.booking1?.id===g.id||_.booking2?.id===g.id),d=g=>{a("booking-click",g)},A=g=>{a("edit-booking",g)},m=g=>{a("delete-booking",g)},p=g=>{a("add-booking",g)},h=g=>{a("edit-entity",g)},y=g=>{a("delete-entity",g)};return(g,_)=>{const b=I("v-icon"),S=I("v-btn");return P(),Ae("div",yCe,[v("div",_Ce,[_[0]||(_[0]=v("div",{class:"entity-header-cell sticky-cell"},null,-1)),(P(!0),Ae(ze,null,Jt(r.value,(B,F)=>(P(),Ae("div",{key:F,class:lt(["time-header-cell",{"hour-marker":B.minute===0&&B.hour!==23}])},[B.minute===0&&B.hour!==23?(P(),Ae("span",wCe,K(B.hourLabel),1)):ge("",!0),B.minute!==0&&B.minute%15===0?(P(),Ae("div",bCe)):ge("",!0)],2))),128))]),(P(!0),Ae(ze,null,Jt(s.value,B=>(P(),Ae("div",{key:B.id,class:"entity-section"},[v("div",xCe,[v("div",CCe,[v("div",SCe,[v("div",ECe,[v("div",kCe,K(B.name),1),v("div",BCe,[i(S,{icon:"",size:"x-small",variant:"text",onClick:gn(F=>h(B),["stop"]),class:"ml-1"},{default:u(()=>[i(b,{size:"small"},{default:u(()=>[..._[1]||(_[1]=[N("mdi-pencil",-1)])]),_:1})]),_:1},8,["onClick"]),i(S,{icon:"",size:"x-small",variant:"text",onClick:gn(F=>p(B),["stop"]),class:"ml-1",color:"primary"},{default:u(()=>[i(b,{size:"small"},{default:u(()=>[..._[2]||(_[2]=[N("mdi-plus",-1)])]),_:1})]),_:1},8,["onClick"]),i(S,{icon:"",size:"x-small",variant:"text",onClick:gn(F=>y(B),["stop"]),class:"ml-1"},{default:u(()=>[i(b,{size:"small"},{default:u(()=>[..._[3]||(_[3]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])])])]),(P(!0),Ae(ze,null,Jt(r.value,(F,T)=>(P(),Ae("div",{key:T,class:"time-cell"}))),128))]),o(B.id).length>0?(P(!0),Ae(ze,{key:0},Jt(o(B.id),F=>(P(),Ae("div",{key:F.id,class:"booking-row-wrapper"},[_[4]||(_[4]=v("div",{class:"entity-header-cell sticky-cell"},null,-1)),i(gCe,{booking:F,"start-column":l(F),"span-columns":c(F),"has-conflict":f(F),onClick:d,onEdit:A,onDelete:m},null,8,["booking","start-column","span-columns","has-conflict"])]))),128)):(P(),Ae("div",TCe,[..._[5]||(_[5]=[v("div",{class:"entity-header-cell sticky-cell"},null,-1),v("div",{class:"empty-booking-cell"},null,-1)])]))]))),128))])}}},FCe=en(ICe,[["__scopeId","data-v-a822fa5b"]]),PCe={__name:"resource-entity-create",emits:["close","saved"],setup(e,{emit:t}){const n=t,a=Ln(),{showSuccess:r,showError:s}=la(),o=R(!0),l=R(!1),c=R(!1),f=R(null),d=[{label:"Room",value:"room"},{label:"Equipment",value:"equipment"}],A=R({name:"",type:"room"}),m=()=>{o.value=!1,n("close")},p=async()=>{if(!f.value)return;const{valid:h}=await f.value.validate();if(h){c.value=!0;try{const y=a.state.clinicId||a.state.clinicModule?.clinicId||1,g={...A.value,clinicId:y},_=await a.dispatch("resourceBookingModule/createEntity",g);if(_.error)throw _.error;r("Entity created successfully"),n("saved"),m()}catch(y){console.error("Error creating entity:",y),s(y.response?.data?.error||y.message||"Failed to create entity")}finally{c.value=!1}}};return(h,y)=>{const g=I("v-icon"),_=I("v-btn"),b=I("v-card-title"),S=I("v-divider"),B=I("v-text-field"),F=I("v-select"),T=I("v-form"),E=I("v-card-text"),x=I("v-spacer"),C=I("v-card-actions"),D=I("v-card"),U=I("v-dialog");return P(),he(U,{modelValue:o.value,"onUpdate:modelValue":y[3]||(y[3]=L=>o.value=L),persistent:"","max-width":"600px"},{default:u(()=>[i(D,{rounded:"lg"},{default:u(()=>[i(b,{class:"d-flex align-center justify-space-between"},{default:u(()=>[y[5]||(y[5]=v("span",null,"Add Entity",-1)),i(_,{onClick:m,variant:"text",size:"small"},{default:u(()=>[i(g,null,{default:u(()=>[...y[4]||(y[4]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(S),i(E,{class:"py-2"},{default:u(()=>[i(T,{ref_key:"form",ref:f,modelValue:l.value,"onUpdate:modelValue":y[2]||(y[2]=L=>l.value=L)},{default:u(()=>[i(B,{modelValue:A.value.name,"onUpdate:modelValue":y[0]||(y[0]=L=>A.value.name=L),label:"Name *",variant:"outlined",density:"compact",rules:[L=>!!L||"Name is required"],"prepend-inner-icon":"mdi-rename-box",class:"mb-1"},null,8,["modelValue","rules"]),i(F,{modelValue:A.value.type,"onUpdate:modelValue":y[1]||(y[1]=L=>A.value.type=L),items:d,"item-title":"label","item-value":"value",label:"Type *",variant:"outlined",density:"compact",rules:[L=>!!L||"Type is required"],"prepend-inner-icon":"mdi-tag",class:"mb-1"},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),i(S),i(C,{class:"pa-3"},{default:u(()=>[i(x),i(_,{onClick:m},{default:u(()=>[...y[6]||(y[6]=[N("Cancel",-1)])]),_:1}),i(_,{color:"primary",onClick:p,disabled:!l.value||c.value,loading:c.value},{default:u(()=>[...y[7]||(y[7]=[N(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},DCe={__name:"resource-entity-edit",props:{entity:{type:Object,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,r=Ln(),{showSuccess:s,showError:o}=la(),l=R(!0),c=R(!1),f=R(!1),d=R(null),A=[{label:"Room",value:"room"},{label:"Equipment",value:"equipment"}],m=R({name:"",type:"room"});Ge(()=>n.entity,y=>{y&&(m.value={name:y.name||"",type:y.type||"room"})},{immediate:!0});const p=()=>{l.value=!1,a("close")},h=async()=>{if(!d.value)return;const{valid:y}=await d.value.validate();if(y){f.value=!0;try{const g=r.state.clinicId||r.state.clinicModule?.clinicId||1,_={...m.value,clinicId:g},b=await r.dispatch("resourceBookingModule/updateEntity",{id:n.entity.id,entityData:_});if(b.error)throw b.error;s("Entity updated successfully"),a("saved"),p()}catch(g){console.error("Error updating entity:",g),o(g.response?.data?.error||g.message||"Failed to update entity")}finally{f.value=!1}}};return(y,g)=>{const _=I("v-icon"),b=I("v-btn"),S=I("v-card-title"),B=I("v-divider"),F=I("v-text-field"),T=I("v-select"),E=I("v-form"),x=I("v-card-text"),C=I("v-spacer"),D=I("v-card-actions"),U=I("v-card"),L=I("v-dialog");return P(),he(L,{modelValue:l.value,"onUpdate:modelValue":g[3]||(g[3]=H=>l.value=H),persistent:"","max-width":"600px"},{default:u(()=>[i(U,{rounded:"lg"},{default:u(()=>[i(S,{class:"d-flex align-center justify-space-between"},{default:u(()=>[g[5]||(g[5]=v("span",null,"Edit Entity",-1)),i(b,{onClick:p,variant:"text",size:"small"},{default:u(()=>[i(_,null,{default:u(()=>[...g[4]||(g[4]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(B),i(x,{class:"py-2"},{default:u(()=>[i(E,{ref_key:"form",ref:d,modelValue:c.value,"onUpdate:modelValue":g[2]||(g[2]=H=>c.value=H)},{default:u(()=>[i(F,{modelValue:m.value.name,"onUpdate:modelValue":g[0]||(g[0]=H=>m.value.name=H),label:"Name *",variant:"outlined",density:"compact",rules:[H=>!!H||"Name is required"],"prepend-inner-icon":"mdi-rename-box",class:"mb-1"},null,8,["modelValue","rules"]),i(T,{modelValue:m.value.type,"onUpdate:modelValue":g[1]||(g[1]=H=>m.value.type=H),items:A,"item-title":"label","item-value":"value",label:"Type *",variant:"outlined",density:"compact",rules:[H=>!!H||"Type is required"],"prepend-inner-icon":"mdi-tag",class:"mb-1"},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),i(B),i(D,{class:"pa-3"},{default:u(()=>[i(C),i(b,{onClick:p},{default:u(()=>[...g[6]||(g[6]=[N("Cancel",-1)])]),_:1}),i(b,{color:"primary",onClick:h,disabled:!c.value||f.value,loading:f.value},{default:u(()=>[...g[7]||(g[7]=[N(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},UCe={class:"w-100"},RCe={class:"text-subtitle-2 mb-1"},NCe={class:"text-caption",style:{opacity:"0.7"}},VCe={__name:"resource-booking-form",props:{booking:{type:Object,default:null},entities:{type:Array,default:()=>[]},selectedDate:{type:String,default:()=>Tn()},preselectedEntity:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,r=Ln(),{showSuccess:s,showError:o}=la(),l=R(!0),c=R(!1),f=R(!1),d=R(null),A=R(null);let m=null,p=null;const h=R(!1),y=R([]),g=R(""),_=R(null),b=R(!1),S=[{label:"Procedure",value:"procedure"},{label:"Maintenance",value:"maintenance"},{label:"Cleaning",value:"cleaning"}],B=R({entityId:n.preselectedEntity?.id||null,startDate:n.selectedDate,startTime:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"}),endDate:n.selectedDate,endTime:"",reason:"procedure",patientId:null}),F=R(!1),T=R([]),E=ee(()=>!!n.booking),x=ee(()=>{const W=[];for(let Q=7;Q<24;Q++)for(let O=0;O<60;O+=15){const ae=`${Q.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`,j=new Date;j.setHours(Q,O,0,0);const J=j.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});W.push({title:J,value:ae})}return W}),C=W=>{if(!W)return W;const[Q,O]=W.split(":").map(Number),ae=Math.round(O/15)*15,j=Q+Math.floor(ae/60),J=ae%60;return`${j.toString().padStart(2,"0")}:${J.toString().padStart(2,"0")}`},D=()=>{if(B.value.startTime){const W=C(B.value.startTime),[Q,O]=W.split(":").map(Number),ae=O+30,j=Q+Math.floor(ae/60),J=ae%60;B.value.endTime=`${j.toString().padStart(2,"0")}:${J.toString().padStart(2,"0")}`,B.value.startTime!==W&&(B.value.startTime=W)}};Ge(()=>B.value.startTime,()=>{!E.value&&B.value.startTime&&!B.value.endTime&&D()},{immediate:!0}),Ge(()=>n.booking,W=>{if(W){const Q=new Date(W.startDateTime*1e3),O=new Date(W.endDateTime*1e3),ae=`${Q.getHours().toString().padStart(2,"0")}:${Q.getMinutes().toString().padStart(2,"0")}`,j=`${O.getHours().toString().padStart(2,"0")}:${O.getMinutes().toString().padStart(2,"0")}`;B.value={entityId:W.entityId||W.entity?.id,startDate:Q.toISOString().split("T")[0],startTime:C(ae),endDate:O.toISOString().split("T")[0],endTime:C(j),reason:W.reason||"procedure",patientId:W.patientId||null},W.patient&&(_.value=W.patient)}else{const Q=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"});let O=C(Q);const[ae]=O.split(":").map(Number);ae<7&&(O="07:00"),B.value={entityId:n.preselectedEntity?.id||null,startDate:n.selectedDate,startTime:O,endDate:n.selectedDate,endTime:"",reason:"procedure",patientId:null},_.value=null,D()}},{immediate:!0}),Ge(()=>n.preselectedEntity,W=>{!E.value&&W&&!B.value.entityId&&(B.value.entityId=W.id)},{immediate:!0});const U=W=>!W||!B.value.startDate?!0:W<B.value.startDate?"End date must be on or after start date":!0,L=W=>!W||!B.value.startTime?!0:B.value.startDate===B.value.endDate&&W<=B.value.startTime?"End time must be after start time":!0,H=W=>W?`${W.name||""} (${W.contactNumber||W.contact_number||""})`:"",oe=ee(()=>!g.value||g.value.length<1?"Start typing to search for patients":b.value?`No patients found matching "${g.value}"`:""),de=async W=>{if(!W||W.length<1){y.value=[],b.value=!1;return}p&&p.abort(),p=new AbortController,h.value=!0,b.value=!1;try{const Q=await iT(W,{signal:p.signal});p.signal.aborted||(y.value=Q.data,(!y.value||y.value.length===0)&&(b.value=!0))}catch(Q){Q.name!=="AbortError"&&(console.error("Error fetching patients:",Q),b.value=!0)}finally{p?.signal.aborted||(h.value=!1)}};Ge(g,W=>{m&&clearTimeout(m),b.value=!1,m=setTimeout(()=>{de(W)},300)}),Ge(_,W=>{W?B.value.patientId=W.id:B.value.patientId=null});const te=()=>{!E.value&&B.value.startDate&&!B.value.endDate&&(B.value.endDate=B.value.startDate)},q=()=>{!E.value&&B.value.startTime&&B.value.startDate===B.value.endDate&&D()},ce=()=>{B.value.endDate<B.value.startDate&&(B.value.startDate=B.value.endDate)},le=()=>{},Z=async()=>{if(!(!B.value.entityId||!B.value.startDate||!B.value.startTime||!B.value.endDate||!B.value.endTime))try{const W=new Date(`${B.value.startDate}T${B.value.startTime}:00`),Q=new Date(`${B.value.endDate}T${B.value.endTime}:00`),O=Math.floor(W.getTime()/1e3),ae=Math.floor(Q.getTime()/1e3),j=E.value?n.booking.id:null,J=await r.dispatch("resourceBookingModule/checkConflicts",{entityId:B.value.entityId,startDateTime:O.toString(),endDateTime:ae.toString(),excludeId:j,signal:null});J.data&&(F.value=J.data.hasConflicts,T.value=J.data.conflicts||[])}catch(W){console.error("Error checking conflicts:",W)}};Ge([()=>B.value.entityId,()=>B.value.startDate,()=>B.value.startTime,()=>B.value.endDate,()=>B.value.endTime],()=>{c.value&&Z()},{deep:!0});const ne=()=>{l.value=!1,a("close")},G=async()=>{if(!d.value)return;const{valid:W}=await d.value.validate();if(W){f.value=!0;try{const Q=`${B.value.startDate}T${B.value.startTime}:00`,O=`${B.value.endDate}T${B.value.endTime}:00`,ae=new Date(Q),j=new Date(O),J=Math.floor(ae.getTime()/1e3),ie=Math.floor(j.getTime()/1e3);if(isNaN(J)||isNaN(ie)||J<=0||ie<=0)throw new Error("Invalid date or time. Please check your input.");const X={entityId:B.value.entityId,patientId:B.value.patientId||null,reason:B.value.reason,startDateTime:J.toString(),endDateTime:ie.toString()};let fe;if(E.value?fe=await r.dispatch("resourceBookingModule/updateBooking",{id:n.booking.id,bookingData:X}):fe=await r.dispatch("resourceBookingModule/createBooking",X),fe.error)throw fe.error;fe.hasConflicts?s(E.value?"Booking updated (with conflicts)":"Booking created (with conflicts)"):s(E.value?"Booking updated successfully":"Booking created successfully"),a("saved"),ne()}catch(Q){console.error("Error saving booking:",Q),o(Q.response?.data?.error||Q.message||`Failed to ${E.value?"update":"create"} booking`)}finally{f.value=!1}}};return ha(()=>{m&&(clearTimeout(m),m=null),p&&(p.abort(),p=null)}),(W,Q)=>{const O=I("v-icon"),ae=I("v-btn"),j=I("v-card-title"),J=I("v-divider"),ie=I("v-select"),X=I("v-text-field"),fe=I("v-col"),M=I("v-row"),z=I("v-list-item"),se=I("v-autocomplete"),be=I("v-alert"),Fe=I("v-form"),ye=I("v-card-text"),Qe=I("v-spacer"),_e=I("v-card-actions"),Se=I("v-card"),Ee=I("v-dialog");return P(),he(Ee,{modelValue:l.value,"onUpdate:modelValue":Q[11]||(Q[11]=Ue=>l.value=Ue),persistent:"","max-width":"700px"},{default:u(()=>[i(Se,{rounded:"lg"},{default:u(()=>[i(j,{class:"d-flex align-center justify-space-between"},{default:u(()=>[v("span",null,K(E.value?"Edit Booking":"Create Booking"),1),i(ae,{onClick:ne,variant:"text",size:"small"},{default:u(()=>[i(O,null,{default:u(()=>[...Q[12]||(Q[12]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(J),i(ye,{class:"py-2"},{default:u(()=>[i(Fe,{ref_key:"form",ref:d,modelValue:c.value,"onUpdate:modelValue":Q[10]||(Q[10]=Ue=>c.value=Ue)},{default:u(()=>[E.value?ge("",!0):(P(),he(ie,{key:0,modelValue:B.value.entityId,"onUpdate:modelValue":Q[0]||(Q[0]=Ue=>B.value.entityId=Ue),items:e.entities,"item-title":"name","item-value":"id",label:"Entity *",variant:"outlined",density:"compact",rules:[Ue=>!!Ue||"Entity is required"],"prepend-inner-icon":"mdi-office-building",class:"mb-2"},null,8,["modelValue","items","rules"])),i(M,{dense:""},{default:u(()=>[i(fe,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:B.value.startDate,"onUpdate:modelValue":[Q[1]||(Q[1]=Ue=>B.value.startDate=Ue),te],label:"Start Date *",type:"date",variant:"outlined",density:"compact",rules:[Ue=>!!Ue||"Start date is required"],"prepend-inner-icon":"mdi-calendar",class:"date-input",onClick:Q[2]||(Q[2]=Ue=>Ue.target.showPicker&&Ue.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),i(fe,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:B.value.startTime,"onUpdate:modelValue":[Q[3]||(Q[3]=Ue=>B.value.startTime=Ue),q],items:x.value,"item-title":"title","item-value":"value",label:"Start Time *",variant:"outlined",density:"compact",rules:[Ue=>!!Ue||"Start time is required"],"prepend-inner-icon":"mdi-clock-outline"},null,8,["modelValue","items","rules"])]),_:1})]),_:1}),i(M,{dense:""},{default:u(()=>[i(fe,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:B.value.endDate,"onUpdate:modelValue":[Q[4]||(Q[4]=Ue=>B.value.endDate=Ue),ce],label:"End Date *",type:"date",variant:"outlined",density:"compact",rules:[Ue=>!!Ue||"End date is required",U],"prepend-inner-icon":"mdi-calendar",class:"date-input",onClick:Q[5]||(Q[5]=Ue=>Ue.target.showPicker&&Ue.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),i(fe,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:B.value.endTime,"onUpdate:modelValue":[Q[6]||(Q[6]=Ue=>B.value.endTime=Ue),le],items:x.value,"item-title":"title","item-value":"value",label:"End Time *",variant:"outlined",density:"compact",rules:[Ue=>!!Ue||"End time is required",L],"prepend-inner-icon":"mdi-clock-outline"},null,8,["modelValue","items","rules"])]),_:1})]),_:1}),i(ie,{modelValue:B.value.reason,"onUpdate:modelValue":Q[7]||(Q[7]=Ue=>B.value.reason=Ue),items:S,"item-title":"label","item-value":"value",label:"Reason *",variant:"outlined",density:"compact",rules:[Ue=>!!Ue||"Reason is required"],"prepend-inner-icon":"mdi-tag",class:"mb-2"},null,8,["modelValue","rules"]),i(se,{ref_key:"searchRef",ref:A,modelValue:_.value,"onUpdate:modelValue":Q[8]||(Q[8]=Ue=>_.value=Ue),search:g.value,"onUpdate:search":Q[9]||(Q[9]=Ue=>g.value=Ue),items:y.value,loading:h.value,"item-title":H,"item-value":"id","return-object":"",label:"Patient (Optional)",variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-account-search","no-data-text":oe.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1},class:"mb-2"},{item:u(({props:Ue,item:je})=>[i(z,Ie(Ue,{class:"py-2"}),{default:u(()=>[v("div",UCe,[v("div",RCe," ID: "+K(je.raw.id)+"  "+K(je.raw.gender)+", "+K(je.raw.age)+" yrs ",1),v("div",NCe,K(je.raw.contactNumber||je.raw.contact_number||""),1)])]),_:2},1040)]),_:1},8,["modelValue","search","items","loading","no-data-text"]),F.value&&T.value.length>0?(P(),he(be,{key:1,type:"warning",variant:"tonal",density:"compact",class:"mb-2"},{default:u(()=>[N(" This booking conflicts with "+K(T.value.length)+" existing booking(s). Booking will still be created. ",1)]),_:1})):ge("",!0)]),_:1},8,["modelValue"])]),_:1}),i(J),i(_e,{class:"pa-3"},{default:u(()=>[i(Qe),i(ae,{onClick:ne},{default:u(()=>[...Q[13]||(Q[13]=[N("Cancel",-1)])]),_:1}),i(ae,{color:"primary",onClick:G,disabled:!c.value||f.value,loading:f.value},{default:u(()=>[N(K(E.value?"Update":"Create"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},LCe=en(VCe,[["__scopeId","data-v-011b8917"]]),MCe={key:0,class:"d-flex justify-center align-center",style:{height:"100%"}},OCe={__name:"resource-booking",setup(e){const t=Ln(),{showSuccess:n,showError:a}=la(),r=R(!1),s=R(!1),o=R(!1),l=R(!1),c=R(null),f=R(null),d=R(null);let A=null,m=null;const p=ee(()=>t.getters["resourceBookingModule/filteredEntities"]),h=ee(()=>t.getters["resourceBookingModule/bookingsByDate"]),y=ee(()=>t.getters["resourceBookingModule/conflicts"]),g=ee({get:()=>t.state.resourceBookingModule.selectedDate||Tn(),set:Q=>t.commit("resourceBookingModule/setSelectedDate",Q)});ee(()=>t.state.resourceBookingModule.selectedEntity);const _=ee({get:()=>t.state.resourceBookingModule.entitySearchQuery||"",set:Q=>t.commit("resourceBookingModule/setEntitySearchQuery",Q)}),b=ee(()=>t.state.resourceBookingModule.isLoading),S=ee(()=>t.state.resourceBookingModule.isRefreshing),B=ee(()=>p.value),F=Q=>{if(!Q)return"Select Date";const O=Tn(),ae=new Date(Date.now()+330*60*1e3-1440*60*1e3).toISOString().slice(0,10),j=new Date(Date.now()+330*60*1e3+1440*60*1e3).toISOString().slice(0,10);if(Q===O)return"Today";if(Q===ae)return"Yesterday";if(Q===j)return"Tomorrow";const J=new Date(Q+"T12:00:00");return J.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:J.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},T=async Q=>{let O;typeof Q=="string"?O=Q.includes("T")?Q.split("T")[0]:Q:Q instanceof Date?O=To(Q,"yyyy-MM-dd"):O=Tn(),g.value=O,r.value=!1,await G()},E=()=>{A&&clearTimeout(A),A=setTimeout(()=>{},300)},x=()=>{s.value=!0},C=()=>{s.value=!1},D=Q=>{c.value=Q,o.value=!0},U=()=>{o.value=!1,c.value=null},L=async()=>{await ne()},H=Q=>{D(Q)},oe=async Q=>{if(confirm(`Are you sure you want to delete "${Q.name}"? This will also delete all bookings for this entity.`))try{const O=await t.dispatch("resourceBookingModule/deleteEntity",Q.id);if(O.error)throw O.error;n("Entity deleted successfully"),await ne(),await G()}catch(O){a(O.response?.data?.error||O.message||"Failed to delete entity")}},de=(Q=null)=>{d.value=Q,f.value=null,l.value=!0},te=Q=>{f.value=Q,l.value=!0},q=async Q=>{if(confirm("Are you sure you want to delete this booking?"))try{const O=await t.dispatch("resourceBookingModule/deleteBooking",Q.id);if(O.error)throw O.error;n("Booking deleted successfully"),await G()}catch(O){a(O.response?.data?.error||O.message||"Failed to delete booking")}},ce=()=>{l.value=!1,f.value=null,d.value=null},le=async()=>{await G()},Z=async()=>{await t.dispatch("resourceBookingModule/refreshBookings")},ne=async()=>{m&&m.abort(),m=new AbortController,await t.dispatch("resourceBookingModule/fetchEntities",{signal:m.signal})},G=async()=>{m&&m.abort(),g.value||(g.value=Tn()),m=new AbortController;try{const Q=await t.dispatch("resourceBookingModule/fetchBookings",{date:g.value,signal:m.signal});Q.error&&console.error("Error fetching bookings:",Q.error)}catch(Q){console.error("Error in fetchBookings:",Q)}},W=async()=>{try{const Q=t.state.resourceBookingModule.selectedDate;Q?g.value=Q:g.value=Tn(),t.commit("resourceBookingModule/setSelectedDate",g.value),await ne(),g.value&&await G()}catch(Q){console.error("Error initializing resource booking component:",Q),a("Failed to initialize resource bookings. Please refresh the page.")}};return An(async()=>{await W()}),OA(async()=>{(p.value.length===0||!g.value)&&await W()}),ha(()=>{A&&(clearTimeout(A),A=null),m&&(m.abort(),m=null)}),(Q,O)=>{const ae=I("v-icon"),j=I("v-btn"),J=I("v-date-picker"),ie=I("v-menu"),X=I("v-col"),fe=I("v-text-field"),M=I("v-tooltip"),z=I("v-row"),se=I("v-card"),be=I("v-progress-circular"),Fe=I("v-empty-state"),ye=I("v-alert"),Qe=I("v-dialog");return P(),he(se,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[i(se,{rounded:"0",class:"pa-2",color:"surfaceContainerHigh",style:{"min-height":"56px"}},{default:u(()=>[i(z,{"no-gutters":"",align:"center",class:"header-row"},{default:u(()=>[i(X,{cols:"auto",class:"d-flex align-center pr-2"},{default:u(()=>[i(ie,{modelValue:r.value,"onUpdate:modelValue":O[1]||(O[1]=_e=>r.value=_e),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:_e})=>[i(j,Ie(_e,{variant:"outlined",size:"small",rounded:"x-small",class:"btn-hover-enhanced",style:{"min-width":"auto"}}),{default:u(()=>[N(K(F(g.value))+" ",1),i(ae,{size:"small",class:"ml-1"},{default:u(()=>[...O[7]||(O[7]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16)]),default:u(()=>[i(J,{modelValue:g.value,"onUpdate:modelValue":[O[0]||(O[0]=_e=>g.value=_e),T],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),i(X,{class:"d-flex justify-center"},{default:u(()=>[i(fe,{modelValue:_.value,"onUpdate:modelValue":[O[2]||(O[2]=_e=>_.value=_e),E],label:"Filter entities",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-magnify",clearable:"","hide-details":"",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1}),i(X,{cols:"auto",class:"d-flex justify-end align-center gap-1"},{default:u(()=>[i(M,{text:"Add Entity"},{activator:u(({props:_e})=>[i(j,Ie({rounded:"x-small",onClick:x,size:"small",variant:"outlined"},_e,{class:"btn-hover-enhanced",style:{"min-width":"auto"}}),{default:u(()=>[...O[8]||(O[8]=[N(" Add Entity ",-1)])]),_:1},16)]),_:1}),i(M,{text:"Refresh Bookings"},{activator:u(({props:_e})=>[i(j,Ie({rounded:"x-small",onClick:Z,size:"small"},_e,{class:"btn-hover-enhanced",loading:S.value,disabled:S.value,style:{"min-width":"auto"}}),{default:u(()=>[S.value?ge("",!0):(P(),he(ae,{key:0,size:"small"},{default:u(()=>[...O[9]||(O[9]=[v("img",{src:Dg,alt:"Refresh",style:{filter:"invert(1)"}},null,-1)])]),_:1}))]),_:1},16,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),i(se,{flat:"",class:"ma-2",color:"surfaceContainer",style:{height:"calc(100% - 16px)"}},{default:u(()=>[b.value?(P(),Ae("div",MCe,[i(be,{indeterminate:"",color:"primary"})])):B.value.length===0?(P(),he(Fe,{key:1},{title:u(()=>[...O[10]||(O[10]=[v("div",{class:"text-subtitle-2 mt-4"}," No entities available ",-1)])]),text:u(()=>[i(j,{variant:"outlined",onClick:x},{default:u(()=>[...O[11]||(O[11]=[N("Add Entity",-1)])]),_:1})]),_:1})):(P(),Ae(ze,{key:2},[Oe(t).state.resourceBookingModule.error?(P(),he(ye,{key:0,type:"error",variant:"tonal",density:"compact",class:"ma-2",dismissible:"","onClick:close":O[3]||(O[3]=_e=>Oe(t).commit("resourceBookingModule/setError",null))},{default:u(()=>[N(K(Oe(t).state.resourceBookingModule.error?.response?.data?.error||Oe(t).state.resourceBookingModule.error?.message||"An error occurred"),1)]),_:1})):ge("",!0),i(FCe,{entities:B.value,bookings:h.value,conflicts:y.value,onBookingClick:te,onAddBooking:de,onEditEntity:H,onDeleteEntity:oe,onEditBooking:te,onDeleteBooking:q},null,8,["entities","bookings","conflicts"])],64))]),_:1}),i(Qe,{modelValue:s.value,"onUpdate:modelValue":O[4]||(O[4]=_e=>s.value=_e),persistent:"","max-width":"600px"},{default:u(()=>[s.value?(P(),he(PCe,{key:0,onClose:C,onSaved:L})):ge("",!0)]),_:1},8,["modelValue"]),i(Qe,{modelValue:o.value,"onUpdate:modelValue":O[5]||(O[5]=_e=>o.value=_e),persistent:"","max-width":"600px"},{default:u(()=>[o.value&&c.value?(P(),he(DCe,{key:0,entity:c.value,onClose:U,onSaved:L},null,8,["entity"])):ge("",!0)]),_:1},8,["modelValue"]),i(Qe,{modelValue:l.value,"onUpdate:modelValue":O[6]||(O[6]=_e=>l.value=_e),persistent:"","max-width":"700px"},{default:u(()=>[l.value?(P(),he(LCe,{key:0,booking:f.value,entities:p.value,"selected-date":g.value,"preselected-entity":d.value,onClose:ce,onSaved:le},null,8,["booking","entities","selected-date","preselected-entity"])):ge("",!0)]),_:1},8,["modelValue"])]),_:1})}}},HCe=en(OCe,[["__scopeId","data-v-97873da0"]]),$Ce={class:"scrollable-content"},QCe={class:"scrollable-content"},GCe={class:"text-h6 mb-4"},zCe=["aria-label"],WCe={key:0,class:"d-flex align-center justify-center",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.95)","z-index":"9999"}},KCe={__name:"home-page",setup(e){const t=Ln(),n=WA(),a=ml(),r=R(null);let s=null;try{window.require&&(s=window.require("electron").ipcRenderer)}catch(x){console.error("Failed to access ipcRenderer:",x)}const o=R(0),l=R(new Map),c=R({}),f=R(!1),d=R(""),A=R(!1),m=R(""),p=R(null),h=R(new Map),y=R(100),g=R([{title:"Queue"},{title:"Appointments",url:"https://calendar.google.com/",id:"calendar"},{title:"Procedure Bookings",id:"procedure-bookings"}]);g.value.slice(1).forEach(x=>{x.id&&(c.value[x.id]=!1)}),An(async()=>{try{await _(),n.params.tab==="1"?o.value=1:o.value=0}catch(x){console.error("Error during initialization:",x),p.value="Failed to initialize component properly"}if(s)try{s.on("external-site-loading",(x,{siteId:C,isLoading:D})=>{Object.prototype.hasOwnProperty.call(c.value,C)&&(c.value[C]=D)}),s.on("external-site-loaded",(x,{siteId:C})=>{if(Object.prototype.hasOwnProperty.call(c.value,C)){c.value[C]=!1;const D=h.value.get(C);D&&(clearTimeout(D),h.value.delete(C))}}),s.on("external-site-error",(x,{siteId:C,error:D})=>{if(Object.prototype.hasOwnProperty.call(c.value,C)){c.value[C]=!1,A.value=!0,m.value=`Failed to load ${C}: ${D}`;const U=h.value.get(C);U&&(clearTimeout(U),h.value.delete(C))}})}catch(x){console.error("Error setting up IPC listeners:",x),p.value="Failed to initialize external site integration"}try{window.addEventListener("doctor-selection-changed",T),window.addEventListener("clinic-selection-changed",E)}catch(x){console.error("Error setting up event listeners:",x),p.value="Failed to initialize data refresh listeners"}}),Ge(o,async(x,C)=>{try{if(x===1&&await _(),x>=1&&x<g.value.length){const D=g.value[x];D.url&&D.id&&setTimeout(()=>{Cn(()=>{B(D.id,D.url)})},500)}if(C>=1&&C<g.value.length){const D=g.value[C];D.url&&D.id&&F(D.id)}}catch(D){console.error("Error in tab watcher:",D),p.value="Failed to switch tabs properly"}}),Ge(()=>a.currentRoute.value.params.tab,x=>{if(x){let C=0;x==="1"&&(C=1),C!==o.value&&(console.log("Route tab parameter changed, switching to tab:",C),o.value=C)}}),ha(()=>{try{g.value.slice(1).forEach(x=>{if(x.url&&x.id)try{F(x.id)}catch(C){console.error(`Error closing external site ${x.id}:`,C)}}),s&&(s.removeAllListeners("external-site-loading"),s.removeAllListeners("external-site-loaded"),s.removeAllListeners("external-site-error")),window.removeEventListener("doctor-selection-changed",T),window.removeEventListener("clinic-selection-changed",E),h.value.forEach(x=>clearTimeout(x)),h.value.clear(),l.value.clear()}catch(x){console.error("Error during component cleanup:",x)}});const _=async()=>{try{if(s){const x=await s.invoke("get-zoom-level");x.success?y.value=x.zoomFactor||100:console.error("Failed to get zoom level:",x.error)}else console.warn("ipcRenderer not available for zoom check")}catch(x){console.error("Error checking zoom level:",x)}},b=(x,C)=>{C?l.value.set(x,C):l.value.delete(x)},S=x=>l.value.get(x)||null,B=async(x,C)=>{try{if(x==="calendar"&&(await _(),y.value!==100))return;Cn(()=>{const D=S(x);if(!(D instanceof HTMLElement)){console.error(`${x}Container is not a DOM element`),A.value=!0,m.value=`Failed to load ${x}. Please try again.`;return}if(!s){console.error("ipcRenderer is not available");try{window.open(C,"_blank"),f.value=!0,d.value=`${x} opened in external browser`}catch{A.value=!0,m.value=`Failed to open ${x}`}return}if(D){c.value[x]=!0;const U=setTimeout(()=>{c.value[x]=!1,A.value=!0,m.value=`${x} is taking too long to load`},15e3);h.value.set(x,U);const L=D.getBoundingClientRect(),H=12,oe=4;s.send("open-external-site",{siteId:x,url:C,bounds:{x:L.left+oe,y:L.top+oe,width:L.width-oe*2,height:L.height-oe*2}})}else console.error(`${x}Container is not defined`),A.value=!0,m.value=`Failed to initialize ${x} container`})}catch(D){console.error("Error opening external site:",D),c.value[x]=!1,A.value=!0,m.value="Failed to open external application"}},F=x=>{try{Cn(()=>{c.value[x]=!1;const C=h.value.get(x);C&&(clearTimeout(C),h.value.delete(x)),s?s.send("close-external-site",{siteId:x}):console.error("ipcRenderer is not available")})}catch(C){console.error("Error closing external site:",C)}},T=async x=>{try{const{doctorId:C,doctorName:D}=x.detail;if(console.log("Doctor changed:",D),!C){console.warn("No doctorId provided in doctor change event");return}if(!r.value?.refreshAppointments){console.warn("AppointmentQueue component not ready for refresh");return}const U=t.state.clinicModule?.clinicId;if(!U){console.warn("No clinicId available for appointment refresh");return}await r.value.refreshAppointments(C,U)}catch(C){console.error("Error handling doctor change:",C),A.value=!0,m.value="Failed to refresh appointments after doctor change"}},E=async x=>{try{const{clinicId:C,clinicName:D}=x.detail;if(console.log("Clinic changed:",D),!C){console.warn("No clinicId provided in clinic change event");return}if(!r.value?.refreshAppointments){console.warn("AppointmentQueue component not ready for refresh");return}const U=t.state.doctorModule?.doctorId;if(!U){console.warn("No doctorId available for appointment refresh");return}await r.value.refreshAppointments(U,C)}catch(C){console.error("Error handling clinic change:",C),A.value=!0,m.value="Failed to refresh appointments after clinic change"}};return(x,C)=>{const D=I("v-alert"),U=I("v-tab"),L=I("v-tabs"),H=I("v-card"),oe=I("v-col"),de=I("v-row"),te=I("v-snackbar"),q=I("v-window-item"),ce=I("v-icon"),le=I("v-card-title"),Z=I("v-card-text"),ne=I("v-skeleton-loader"),G=I("v-window"),W=I("v-main");return P(),he(W,null,{default:u(()=>[p.value?(P(),he(D,{key:0,type:"error",dismissible:"","onClick:close":C[0]||(C[0]=Q=>p.value=null),class:"ma-3"},{default:u(()=>[N(K(p.value),1)]),_:1})):ge("",!0),i(de,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[i(oe,{cols:"12"},{default:u(()=>[i(H,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[i(L,{modelValue:o.value,"onUpdate:modelValue":C[1]||(C[1]=Q=>o.value=Q),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(g.value,(Q,O)=>(P(),he(U,{key:O,value:O},{default:u(()=>[N(K(Q.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(G,{modelValue:o.value,"onUpdate:modelValue":C[4]||(C[4]=Q=>o.value=Q),touch:!1,class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[i(q,{value:0,style:{height:"100%"}},{default:u(()=>[i(de,{"no-gutters":"","aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[i(oe,{cols:"12",md:"6",lg:"5",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",$Ce,[i(kH,{ref_key:"appointmentQueueRef",ref:r},null,512)])]),_:1}),i(oe,{cols:"12",md:"6",lg:"7",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",QCe,[i(ACe)])]),_:1})]),_:1}),i(te,{modelValue:f.value,"onUpdate:modelValue":C[2]||(C[2]=Q=>f.value=Q),class:"elevation-24",color:"success"},{default:u(()=>[N(K(d.value),1)]),_:1},8,["modelValue"]),i(te,{modelValue:A.value,"onUpdate:modelValue":C[3]||(C[3]=Q=>A.value=Q),class:"elevation-24",color:"failure"},{default:u(()=>[N(K(m.value),1)]),_:1},8,["modelValue"])]),_:1}),(P(!0),Ae(ze,null,Jt(g.value.slice(1),(Q,O)=>(P(),he(q,{key:Q.id,value:O+1,style:{height:"100%"}},{default:u(()=>[i(de,{"no-gutters":"","aria-label":"main-row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[i(oe,{cols:"12",order:"1",class:"stable-height-column"},{default:u(()=>[Q.id==="calendar"&&y.value!==100?(P(),he(H,{key:0,color:"surface",variant:"elevated",class:"pa-6 ma-2 d-flex flex-column align-center justify-center scrollable-content"},{default:u(()=>[i(ce,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...C[5]||(C[5]=[N(" mdi-magnify-close ",-1)])]),_:1}),i(le,{class:"text-h5 text-center mb-2"},{default:u(()=>[...C[6]||(C[6]=[N(" Calendar Unavailable ",-1)])]),_:1}),i(Z,{class:"text-center"},{default:u(()=>[C[7]||(C[7]=v("p",{class:"text-h6 mb-3"},"Calendar requires 100% zoom level to display properly.",-1)),v("p",GCe,[v("strong",null,"Current zoom: "+K(y.value)+"%",1)]),C[8]||(C[8]=v("p",{class:"text-body-1 mb-4"}," The calendar positioning system requires the default zoom level to work correctly. Please use the zoom controls in the top navigation bar to reset to 100%. ",-1))]),_:1})]),_:1})):ge("",!0),Q.id==="procedure-bookings"?(P(),he(HCe,{key:1})):Q.url?(P(),he(H,{key:2,color:"surfaceContainer",flat:"",class:"pa-1 scrollable-content"},{default:u(()=>[v("div",{ref_for:!0,ref:ae=>b(Q.id,ae),style:{width:"100%",height:"100%",position:"relative"},"aria-label":`${Q.title} Container`},[c.value[Q.id]?(P(),Ae("div",WCe,[i(ne,{type:"card",width:"80%",height:"80%",class:"mx-auto"})])):ge("",!0)],8,zCe)]),_:2},1024)):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})}}},jCe=en(KCe,[["__scopeId","data-v-049a7249"]]),qCe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H18A2,2%200%200,0%2020,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z'%20/%3e%3c/svg%3e",YCe={__name:"TabsExtension",props:{items:{type:Array,required:!0},modelValue:{type:Number,default:0},alignTabs:{type:String,default:"start"}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,r=R(n.modelValue);Ge(()=>n.modelValue,o=>{r.value=o});const s=o=>{a("update:modelValue",o)};return(o,l)=>{const c=I("v-tab"),f=I("v-tabs");return P(),he(f,{modelValue:r.value,"onUpdate:modelValue":[l[0]||(l[0]=d=>r.value=d),s],"align-tabs":e.alignTabs||"start",density:"compact"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(e.items,(d,A)=>(P(),he(c,{key:d.title||A,disabled:d.disabled},{default:u(()=>[N(K(d.title),1)]),_:2},1032,["disabled"]))),128))]),_:1},8,["modelValue","align-tabs"])}}},XCe={__name:"BreadcrumbsExtension",props:{items:{type:Array,required:!0}},setup(e){return(t,n)=>{const a=I("v-icon"),r=I("v-breadcrumbs-item"),s=I("v-breadcrumbs");return P(),he(s,null,{default:u(()=>[(P(!0),Ae(ze,null,Jt(e.items,(o,l)=>(P(),he(r,{key:l,to:o.to,disabled:o.disabled},{default:u(()=>[o.icon?(P(),he(a,{key:0,start:o.iconPosition!=="end",end:o.iconPosition==="end",small:"",class:lt(o.iconClass)},{default:u(()=>[N(K(o.icon),1)]),_:2},1032,["start","end","class"])):ge("",!0),N(" "+K(o.text),1)]),_:2},1032,["to","disabled"]))),128))]),_:1})}}};function JCe(){const e=Ln(),t=(r,s=0,o="start",l=null)=>{e.dispatch("appBar/setExtensionContent",{component:b_(YCe),props:{items:r,modelValue:s,alignTabs:o,"onUpdate:modelValue":l||(()=>{})}})},n=r=>{e.dispatch("appBar/setExtensionContent",{component:b_(XCe),props:{items:r}})},a=()=>{e.dispatch("appBar/clearExtensionContent")};return Ri(()=>{a()}),{setTabs:t,setBreadcrumbs:n,clearExtension:a}}const ZCe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},eSe={class:"filter-field mb-3"},tSe={class:"filter-field mb-3"},nSe={class:"filter-field mb-3"},aSe={class:"d-flex justify-center mt-4"},rSe={class:"d-flex align-center"},sSe={class:"d-flex age-dob-container",style:{gap:"8px"}},oSe={__name:"PatientFilter",props:{modelValueName:{type:String,default:""},modelValuePhone:{type:String,default:""},modelValueDate:{type:String,default:""}},emits:["update:modelValueName","update:modelValuePhone","update:modelValueDate","filter-change","clear-filters","patient-created"],setup(e,{expose:t,emit:n}){const a=e,r=n,s=R(a.modelValueName),o=R(a.modelValuePhone),l=R(a.modelValueDate),c=R(""),f=R(""),d=R(""),A=R(!1),m=R(!1),p=R("dob"),h=R(""),y=R(!1),g=Tn(),_=oe=>{if(!oe)return;let de="";if(oe instanceof Date){const te=oe.getFullYear(),q=String(oe.getMonth()+1).padStart(2,"0"),ce=String(oe.getDate()).padStart(2,"0");de=`${te}-${q}-${ce}`}else typeof oe=="string"&&(de=oe.split("T")[0]||oe);de&&(S.value.birthDate=de,T(de)),y.value=!1},b=()=>{S.value.birthDate="",h.value=""},S=R({name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""}),B=()=>{A.value=!0},F=()=>{A.value=!1,p.value="dob",h.value="",S.value={name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""},m.value=!1},T=oe=>{if(p.value==="dob")if(oe){h.value=oe;const de=lT(oe);de!==null&&(S.value.age=de.toString())}else h.value=""};Ge(p,oe=>{oe==="age"?(S.value.birthDate&&(h.value=S.value.birthDate),S.value.birthDate=""):h.value&&(S.value.birthDate=h.value)}),t({openCreatePatientDialog:B});const E=()=>{c.value="",s.value&&s.value.length<2&&(c.value="Name must be at least 2 characters long"),U()},x=()=>{f.value="",o.value&&o.value.replace(/\D/g,"").length>15&&(f.value="Phone number cannot exceed 15 digits"),U()},C=()=>{if(d.value="",l.value){const oe=new Date(l.value);isNaN(oe.getTime())&&(d.value="Please enter a valid date")}U()},D=()=>{s.value="",o.value="",l.value="",c.value="",f.value="",d.value="",r("update:modelValueName",""),r("update:modelValuePhone",""),r("update:modelValueDate",""),r("clear-filters")},U=()=>{r("update:modelValueName",s.value),r("update:modelValuePhone",o.value),r("update:modelValueDate",l.value),r("filter-change",{name:s.value,phone:o.value,date:l.value,hasErrors:!!(c.value||f.value||d.value)})};Ge(()=>a.modelValueName,oe=>{s.value=oe}),Ge(()=>a.modelValuePhone,oe=>{o.value=oe}),Ge(()=>a.modelValueDate,oe=>{l.value=oe}),Ge([s,o,l],()=>{U()});const L=oe=>{const de=oe.target.value.replace(/[^0-9]/g,"").slice(0,10);S.value.contact_number=de},H=async()=>{try{const oe={...S.value};if(p.value==="dob"&&oe.birthDate){const te=Bd(oe.birthDate);te!==null?oe.birthDate=te.toString():oe.birthDate=""}else delete oe.birthDate;const de=await zM(oe);de.error?(r("patient-created",{success:!1,message:"Error creating patient. Please try again.",error:de.error}),console.error("There was an error creating the patient:",de.error)):(F(),r("patient-created",{success:!0,message:"Patient created successfully",patient:de.data}))}catch(oe){console.error("There was an error creating the patient:",oe),r("patient-created",{success:!1,message:"An unexpected error occurred. Please try again.",error:oe})}};return(oe,de)=>{const te=I("v-card-text"),q=I("v-card"),ce=I("v-text-field"),le=I("v-btn"),Z=I("v-icon"),ne=I("v-card-title"),G=I("v-divider"),W=I("v-col"),Q=I("v-btn-toggle"),O=I("v-date-picker"),ae=I("v-menu"),j=I("v-select"),J=I("v-row"),ie=I("v-form"),X=I("v-spacer"),fe=I("v-card-actions"),M=I("v-dialog");return P(),he(q,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[i(q,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(te,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...de[16]||(de[16]=[v("span",{class:"text-body-2 font-weight-medium"},"Filter Patients",-1)])]),_:1})]),_:1}),v("div",ZCe,[v("div",eSe,[i(ce,{modelValue:s.value,"onUpdate:modelValue":de[0]||(de[0]=z=>s.value=z),label:"Patient Name",placeholder:"Enter patient name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":c.value,onInput:E,maxlength:"100"},null,8,["modelValue","error-messages"])]),v("div",tSe,[i(ce,{modelValue:o.value,"onUpdate:modelValue":de[1]||(de[1]=z=>o.value=z),label:"Phone Number",placeholder:"Enter phone number...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":f.value,onInput:x,maxlength:"15"},null,8,["modelValue","error-messages"])]),v("div",nSe,[i(ce,{modelValue:l.value,"onUpdate:modelValue":de[2]||(de[2]=z=>l.value=z),type:"date",label:"Appointment Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input","error-messages":d.value,onInput:C,onClick:de[3]||(de[3]=z=>z.target.showPicker&&z.target.showPicker())},null,8,["modelValue","error-messages"])]),v("div",aSe,[i(le,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:D,class:"filter-button-clear"},{default:u(()=>[...de[17]||(de[17]=[N(" Clear ",-1)])]),_:1})])]),i(M,{modelValue:A.value,"onUpdate:modelValue":de[15]||(de[15]=z=>A.value=z),persistent:"","max-width":"900px"},{default:u(()=>[i(q,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[i(ne,{class:"d-flex justify-space-between align-center pa-3"},{default:u(()=>[v("div",rSe,[i(Z,{class:"mr-2",color:"primary"},{default:u(()=>[...de[18]||(de[18]=[N("mdi-account-plus",-1)])]),_:1}),de[19]||(de[19]=v("span",{class:"text-h6 font-weight-medium"},"Create Patient",-1))]),i(le,{icon:"",size:"x-small",onClick:F,tabindex:"-1"},{default:u(()=>[i(Z,null,{default:u(()=>[...de[20]||(de[20]=[v("img",{src:su,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1}),i(G),i(te,{class:"pa-4"},{default:u(()=>[i(ie,{modelValue:m.value,"onUpdate:modelValue":de[14]||(de[14]=z=>m.value=z),"validate-on":"input"},{default:u(()=>[i(J,{"no-gutters":""},{default:u(()=>[i(W,{cols:"6",class:"pr-2 mb-2"},{default:u(()=>[i(ce,{label:"Name *",modelValue:S.value.name,"onUpdate:modelValue":de[4]||(de[4]=z=>S.value.name=z),clearable:"",rules:Oe(Cr),density:"comfortable",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),i(W,{cols:"6",class:"pl-2 mb-2"},{default:u(()=>[i(ce,{label:"Phone Number *",modelValue:S.value.contact_number,"onUpdate:modelValue":de[5]||(de[5]=z=>S.value.contact_number=z),type:"tel",counter:10,rules:Oe(_h),clearable:"",density:"comfortable",variant:"outlined",maxlength:"10",onInput:L},null,8,["modelValue","rules"])]),_:1}),i(W,{cols:"6",class:"pr-2 mb-2"},{default:u(()=>[v("div",sSe,[i(Q,{modelValue:p.value,"onUpdate:modelValue":de[6]||(de[6]=z=>p.value=z),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[i(le,{value:"dob",size:"small"},{default:u(()=>[...de[21]||(de[21]=[N("DOB",-1)])]),_:1}),i(le,{value:"age",size:"small"},{default:u(()=>[...de[22]||(de[22]=[N("Age",-1)])]),_:1})]),_:1},8,["modelValue"]),p.value==="age"?(P(),he(ce,{key:0,label:"Age (yrs) *",modelValue:S.value.age,"onUpdate:modelValue":de[7]||(de[7]=z=>S.value.age=z),clearable:"",density:"comfortable",variant:"outlined",rules:Oe(uT),disabled:!!S.value.birthDate||!!h.value,class:"flex-grow-1","hide-details":"auto"},null,8,["modelValue","rules","disabled"])):(P(),he(ae,{key:1,modelValue:y.value,"onUpdate:modelValue":de[11]||(de[11]=z=>y.value=z),"close-on-content-click":!1,transition:"scale-transition","offset-y":"",class:"flex-grow-1"},{activator:u(({props:z})=>[i(ce,Ie(z,{label:"Date of Birth *",modelValue:S.value.birthDate,"onUpdate:modelValue":de[8]||(de[8]=se=>S.value.birthDate=se),readonly:"",clearable:"",density:"comfortable",variant:"outlined",rules:Oe(cT),class:"flex-grow-1 date-input dob-input","hide-details":"auto","onClick:clear":b,onKeydown:[de[9]||(de[9]=Yd(se=>y.value=!0,["enter"])),de[10]||(de[10]=Yd(gn(se=>y.value=!0,["prevent"]),["space"]))]}),{"append-inner":u(()=>[i(Z,{class:"text-medium-emphasis"},{default:u(()=>[...de[23]||(de[23]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","rules"])]),default:u(()=>[i(O,{"model-value":S.value.birthDate||Oe(g),"onUpdate:modelValue":_,color:"primary",locale:"en-IN",max:Oe(Tn)(),"view-mode":"year"},null,8,["model-value","max"])]),_:1},8,["modelValue"]))])]),_:1}),i(W,{cols:"6",class:"pl-2 mb-2"},{default:u(()=>[i(j,{modelValue:S.value.gender,"onUpdate:modelValue":de[12]||(de[12]=z=>S.value.gender=z),items:["Male","Female"],label:"Gender *",clearable:"",density:"comfortable",variant:"outlined",rules:Oe(dT)},null,8,["modelValue","rules"])]),_:1}),i(W,{cols:"12",class:"mb-2"},{default:u(()=>[i(ce,{label:"Email (optional)",modelValue:S.value.email,"onUpdate:modelValue":de[13]||(de[13]=z=>S.value.email=z),type:"email",clearable:"",density:"comfortable",variant:"outlined",rules:Oe(Rg)},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(G),i(fe,{class:"pa-3"},{default:u(()=>[i(X),i(le,{variant:"text",onClick:F},{default:u(()=>[...de[24]||(de[24]=[N(" Cancel ",-1)])]),_:1}),i(le,{variant:"outlined",disabled:!m.value,onClick:H,"prepend-icon":"mdi-account-plus",class:"btn-hover-enhanced"},{default:u(()=>[...de[25]||(de[25]=[N(" Create Patient ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},iSe=en(oSe,[["__scopeId","data-v-1f52b390"]]),lSe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},uSe={class:"filter-field mb-3"},cSe={class:"filter-field mb-3"},dSe={class:"d-flex justify-center mt-4 mb-2"},fSe={key:0,class:"d-flex justify-center"},ASe={__name:"TrendsFilter",props:{modelValueDoctor:{type:String,default:null},modelValueFromDate:{type:String,default:""},availableDoctors:{type:Array,default:()=>[]},maxDate:{type:String,default:""},isLoading:{type:Boolean,default:!1}},emits:["update:modelValueDoctor","update:modelValueFromDate","show-trends","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=R(n.modelValueDoctor),s=R(n.modelValueFromDate);Ge(()=>n.modelValueDoctor,c=>{r.value=c}),Ge(()=>n.modelValueFromDate,c=>{s.value=c}),Ge(r,c=>{a("update:modelValueDoctor",c)}),Ge(s,c=>{a("update:modelValueFromDate",c)});const o=()=>{a("show-trends",{doctor:r.value,fromDate:s.value})},l=()=>{r.value=null,s.value="",a("clear-filters")};return(c,f)=>{const d=I("v-card-text"),A=I("v-card"),m=I("v-list-item"),p=I("v-select"),h=I("v-text-field"),y=I("v-btn");return P(),he(A,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[i(A,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(d,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...f[3]||(f[3]=[v("span",{class:"text-body-2 font-weight-medium"},"Trends Analysis",-1)])]),_:1})]),_:1}),v("div",lSe,[v("div",uSe,[i(p,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=g=>r.value=g),items:e.availableDoctors,"item-title":"doctorName","item-value":"doctorName",label:"Doctor (optional)",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input"},{item:u(({props:g,item:_})=>[i(m,Ie(g,{title:_.raw.doctorName}),{subtitle:u(()=>[N(K(_.raw.doctorSpecialization),1)]),_:2},1040,["title"])]),_:1},8,["modelValue","items"])]),v("div",cSe,[i(h,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=g=>s.value=g),type:"date",label:"From Date (optional)",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:e.maxDate,onClick:f[2]||(f[2]=g=>g.target.showPicker&&g.target.showPicker())},null,8,["modelValue","max"])]),v("div",dSe,[i(y,{color:"primary",size:"small","prepend-icon":"mdi-chart-line",onClick:o,loading:e.isLoading,class:"filter-button"},{default:u(()=>[...f[4]||(f[4]=[N(" Show Trends ",-1)])]),_:1},8,["loading"])]),r.value||s.value?(P(),Ae("div",fSe,[i(y,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:l,class:"filter-button-clear"},{default:u(()=>[...f[5]||(f[5]=[N(" Clear ",-1)])]),_:1})])):ge("",!0)])]),_:1})}}},mSe=en(ASe,[["__scopeId","data-v-ce64d1ee"]]),Jv=""+new URL("images/search_here-_oFYQxGX.png",import.meta.url).href,vSe={class:"scrollable-content"},hSe={class:"scrollable-content"},pSe={class:"text-center"},gSe={class:"text-center"},ySe={class:"text-body-2 text-medium-emphasis mb-4"},_Se={class:"text-center"},wSe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},bSe={key:0,class:"text-body-2 text-medium-emphasis ml-2",style:{"font-weight":"500"}},xSe={class:"d-flex align-center flex-wrap"},CSe={key:0,class:"text-body-2 text-medium-emphasis mr-3"},SSe={key:1,class:"text-body-2 text-medium-emphasis mr-3"},ESe={key:2,class:"text-body-2 text-medium-emphasis mr-3"},kSe={key:3,class:"text-body-2 text-medium-emphasis mr-3"},BSe={class:"scrollable-content"},TSe={class:"scrollable-content"},ISe={class:"d-flex align-center"},FSe={key:1},PSe={key:0,class:"d-flex align-center flex-wrap gap-2"},DSe={class:"text-body-2"},USe={class:"font-weight-medium"},RSe={class:"text-body-2"},NSe={class:"font-weight-medium"},VSe={class:"text-body-2"},LSe={class:"font-weight-medium"},MSe={class:"text-body-2"},OSe={class:"font-weight-medium"},HSe={class:"text-center"},$Se={class:"text-center"},QSe={class:"text-center"},GSe={class:"text-body-2 text-medium-emphasis mb-4"},zSe={class:"text-center"},WSe={key:4,class:"trends-scroll-container",style:{"overflow-y":"auto","max-height":"75vh"}},KSe={class:"chart-container"},jSe={class:"text-center"},qSe={class:"font-weight-medium"},YSe={class:"text-center"},XSe={class:"font-weight-medium"},JSe={class:"d-flex justify-center"},ZSe={__name:"patients-landing-page",setup(e){JCe();const{showSnackbar:t,showWarning:n}=la(),a=Ln(),r=R(0),s=WA(),o=ml(),l=R(s.params.id),c=R([]),f=R(""),d=R(""),A=R(""),m=R(null),p=R(!1),h=R(null),y=R(!1),g=R(null),_=ee(()=>Tn()),b=M=>{if(!M)return"";const z=M.birthDate?Ug(M.birthDate):M.age!=null&&M.age!==""?M.age:null;return qv(z)},S=ee(()=>[{title:"Start Date",key:"startDate",sortable:!0,align:"center",width:"35%"},{title:"End Date",key:"endDate",sortable:!0,align:"center",width:"35%"},{title:"Appointments",key:"count",sortable:!0,align:"center",width:"30%"}]),B=ee(()=>{if(!q.value.length)return[];const M={};return q.value.forEach(z=>{const se=new Date(z.appointmentDate),be=se.getFullYear(),Fe=C(se),ye=`${be}-W${Fe.toString().padStart(2,"0")}`;M[ye]||(M[ye]={week:ye,count:0,dates:[],year:be,weekNumber:Fe}),M[ye].count++,M[ye].dates.push(z.appointmentDate)}),Object.values(M).map(z=>{const se=D(z.year,z.weekNumber),be=U(z.year,z.weekNumber);return{...z,startDate:se.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),endDate:be.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),dateRange:`${se.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${be.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}}).sort((z,se)=>z.week.localeCompare(se.week))}),F=ee(()=>q.value.length?new Set(q.value.map(z=>z.patientId)).size:0),T=ee(()=>{if(!B.value.length)return 0;const M=B.value.reduce((z,se)=>z+se.count,0);return Math.round(M/B.value.length)}),E=ee(()=>B.value.length),x=ee(()=>a.getters["doctorModule/allDoctors"]||[]),C=M=>{const z=new Date(M.getFullYear(),0,1),se=z.getDay(),be=(M-z)/(1440*60*1e3)+1;return Math.ceil((be+se-1)/7)},D=(M,z)=>{const be=new Date(M,0,1).getDay(),Fe=(z-1)*7-be+1;return new Date(M,0,1+Fe)},U=(M,z)=>{const se=D(M,z);return new Date(se.getTime()+8640*60*1e3)},L=async()=>{if(!de.value)try{de.value=!0,te.value=null,le.value=!0;const M=await the(ce.value.selectedDoctor?.trim()||"",ce.value.fromDate||"");if(M.error)throw new Error(`Failed to fetch trends data: ${M.error.message||"Unknown error"}`);q.value=Array.isArray(M.data)?M.data:[],t({message:`Loaded ${q.value.length} completed appointments for trends analysis`,color:"success",timeout:3e3})}catch(M){console.error("Error fetching trends data:",M),te.value=M.message||"Failed to load trends data",q.value=[],t({message:te.value,color:"error",timeout:5e3})}finally{de.value=!1}},H=()=>{try{ce.value.selectedDoctor=null,ce.value.fromDate="",te.value=null,le.value=!1,q.value=[],t({message:"Trends configuration cleared successfully",color:"success",timeout:3e3})}catch(M){console.error("Error clearing trends configuration:",M),m.value="Failed to clear trends configuration"}},oe=async()=>{try{a.getters["doctorModule/isInitialized"]||await a.dispatch("doctorModule/initializeDoctors")}catch(M){console.error("Error initializing doctors:",M)}},de=R(!1),te=R(null),q=R([]),ce=R({selectedDoctor:null,fromDate:""}),le=R(!1),Z=R([{title:"List",disabled:!1},{title:"Trends",disabled:!1}]),ne=async()=>{try{if(await o.isReady(),s.path==="/patients")return;await Cn();let M=0;for(;!s.params.id&&M<3;)await Cn(),await new Promise(z=>setTimeout(z,10)),M++;if(!s.params.id){console.warn("Route params not ready after retries, skipping URL param extraction");return}if(l.value=s.params.id,!l.value)throw new Error("No user ID found in URL parameters")}catch(M){console.error("Error extracting URL parameters:",M),m.value="Invalid URL parameters"}},G=ee(()=>{try{return s.path!=="/patients"}catch(M){return console.error("Error checking child route:",M),!1}});ee(()=>s.query.from==="patients-landing-page"),An(async()=>{try{s.path!=="/patients"?await ne():(y.value=!0,W(),oe())}catch(M){console.error("Error on mount:",M),m.value="Failed to initialize"}}),Ge(()=>s.path,async()=>{try{if(await o.isReady(),s.path==="/patients"){y.value=!0,W(),(m.value==="Invalid URL parameters"||m.value==="Navigation error occurred")&&(m.value=null);return}await Cn(),await new Promise(M=>setTimeout(M,50)),s.path!=="/patients"&&await ne()}catch(M){console.error("Error on route change:",M),s.path!=="/patients"&&(m.value="Navigation update failed")}}),Ge(()=>s.path,()=>{try{s.path!=="/patients"||m.value==="Navigation error occurred"&&(m.value=null)}catch(M){console.error("Error in route validation:",M),m.value="Navigation error occurred"}},{immediate:!1}),Ge(r,M=>{try{M===1&&oe()}catch(z){console.error("Error handling tab change:",z)}});const W=async()=>{if(!p.value)try{p.value=!0,h.value=null;const M=await Qve(f.value?.trim()||"",d.value?.trim()||"",A.value||"");if(M.error)throw new Error(`Search failed: ${M.error.message||"Unknown error"}`);c.value=Array.isArray(M.data)?M.data:[],y.value=!0,(f.value||d.value||A.value)&&t({message:`Found ${c.value.length} patient${c.value.length!==1?"s":""}`,color:"success",timeout:3e3})}catch(M){console.error("Error fetching patients:",M),h.value=M.message||"Failed to search patients",c.value=[],y.value=!0,t({message:h.value,color:"error",timeout:5e3})}finally{p.value=!1}},Q=()=>{h.value=null,W()},O=()=>{try{f.value="",d.value="",A.value="",h.value=null,y.value=!0,W(),t({message:"Filters cleared successfully",color:"success",timeout:3e3})}catch(M){console.error("Error clearing filters:",M),m.value="Failed to clear filters"}},ae=M=>{M.hasErrors||(y.value=!0,fe())},j=M=>{M.success?(t({message:M.message||"Patient created successfully",color:"success",timeout:3e3}),W()):t({message:M.message||"Error creating patient",color:"error",timeout:5e3})},J=()=>{g.value&&g.value.openCreatePatientDialog()},ie=M=>{const{hasPermission:z}=gh();if(!z("patients.details").value){n("You do not have permission to view patient details");return}if(!z("patients.details").value){n("You do not have permission to access consultation or procedure");return}try{if(!M)throw new Error("Invalid patient ID");o.push({path:`/patients/${M}`,query:{from:"patients-landing-page"}})}catch(Fe){console.error("Error navigating to patient:",Fe),t({message:"Failed to open patient details",color:"error",timeout:5e3})}};let X;const fe=()=>{clearTimeout(X),X=setTimeout(()=>{W()},500)};return Ge([f,d,A],()=>{y.value=!0,fe()}),(M,z)=>{const se=I("v-alert"),be=I("v-tab"),Fe=I("v-tabs"),ye=I("v-btn"),Qe=I("v-card"),_e=I("v-col"),Se=I("v-row"),Ee=I("v-progress-circular"),Ue=I("v-icon"),je=I("v-card-text"),at=I("v-empty-state"),mt=I("v-card-title"),xe=I("v-tooltip"),Be=I("v-lazy"),Ye=I("v-window-item"),kt=I("v-chip"),xt=I("v-data-table"),Nt=I("v-window"),At=I("router-view"),Ot=I("v-main");return P(),he(Ot,null,{default:u(()=>[m.value?(P(),he(se,{key:0,type:"error",dismissible:"","onClick:close":z[0]||(z[0]=Dt=>m.value=null),class:"ma-3"},{default:u(()=>[N(K(m.value),1)]),_:1})):ge("",!0),G.value?(P(),he(At,{key:2})):(P(),Ae(ze,{key:1},[i(Se,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[i(_e,{cols:"12"},{default:u(()=>[i(Qe,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[i(Fe,{modelValue:r.value,"onUpdate:modelValue":z[1]||(z[1]=Dt=>r.value=Dt),color:"primary","align-tabs":"start",class:"flex-grow-1"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(Z.value,(Dt,bt)=>(P(),he(be,{key:bt,value:bt,disabled:Dt.disabled},{default:u(()=>[N(K(Dt.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"]),i(En,{permission:"patients.create",class:"create-patient-btn"},{default:u(()=>[i(ye,{color:"primary",variant:"flat","prepend-icon":"mdi-account-plus",onClick:J,size:"small"},{default:u(()=>[...z[8]||(z[8]=[N(" Create Patient ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(Nt,{modelValue:r.value,"onUpdate:modelValue":z[7]||(z[7]=Dt=>r.value=Dt),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[i(Ye,{value:0,style:{height:"100%"}},{default:u(()=>[i(Se,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[i(_e,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",vSe,[i(iSe,{ref_key:"patientFilterRef",ref:g,"model-value-name":f.value,"onUpdate:modelValueName":z[2]||(z[2]=Dt=>f.value=Dt),"model-value-phone":d.value,"onUpdate:modelValuePhone":z[3]||(z[3]=Dt=>d.value=Dt),"model-value-date":A.value,"onUpdate:modelValueDate":z[4]||(z[4]=Dt=>A.value=Dt),onFilterChange:ae,onClearFilters:O,onPatientCreated:j},null,8,["model-value-name","model-value-phone","model-value-date"])])]),_:1}),i(_e,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",hSe,[i(Qe,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[p.value?(P(),he(Se,{key:0,"no-gutters":""},{default:u(()=>[i(_e,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",pSe,[i(Ee,{indeterminate:"",color:"primary",size:"64"}),z[9]||(z[9]=v("div",{class:"mt-4 text-subtitle-1"},"Searching patients...",-1))])]),_:1})]),_:1})):h.value?(P(),he(Se,{key:1,"no-gutters":""},{default:u(()=>[i(_e,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",gSe,[i(Ue,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...z[10]||(z[10]=[N("mdi-alert-circle",-1)])]),_:1}),z[12]||(z[12]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",ySe,K(h.value),1),i(ye,{color:"primary",onClick:Q,"prepend-icon":"mdi-refresh"},{default:u(()=>[...z[11]||(z[11]=[N(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):c.value&&c.value.length===0&&y.value?(P(),Ae(ze,{key:2},[i(Qe,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(je,{class:"pt-2 pb-0"},{default:u(()=>[...z[13]||(z[13]=[v("strong",null,"0",-1),N(" results found ",-1)])]),_:1})]),_:1}),i(at,{image:Oe(Jv),class:"d-flex justify-center"},{title:u(()=>[...z[14]||(z[14]=[v("div",{class:"text-subtitle-2 mt-8 text-center"}," No Patients Found ",-1)])]),text:u(()=>[...z[15]||(z[15]=[v("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all patients ",-1)])]),actions:u(()=>[i(ye,{color:"primary",variant:"outlined",onClick:O,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...z[16]||(z[16]=[N(" Clear Filters ",-1)])]),_:1})]),_:1},8,["image"])],64)):y.value?c.value&&c.value.length>0?(P(),Ae(ze,{key:4},[i(Qe,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(je,{class:"pt-2 pb-0"},{default:u(()=>[v("strong",null,K(c.value.length),1),N(" result"+K(c.value.length!==1?"s":"")+" found ",1)]),_:1})]),_:1}),i(Se,{"no-gutters":""},{default:u(()=>[i(_e,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(P(!0),Ae(ze,null,Jt(c.value,Dt=>(P(),he(Be,{key:Dt?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"},"min-height":"70"},{default:u(()=>[i(En,{"any-permission":["patients.details"],feature:"patients",tag:"div"},{default:u(()=>[Dt?(P(),he(Qe,{key:0,style:Mt([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mx-2 patient-card-spacing card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:bt=>ie(Dt.id)},{default:u(()=>[i(Se,{"no-gutters":""},{default:u(()=>[i(_e,{cols:"12"},{default:u(()=>[i(mt,{class:"pb-0 pt-2"},{default:u(()=>[v("span",wSe,K(Dt?.name||"Unknown Patient"),1),Dt?.contactNumber?(P(),Ae("span",bSe," ("+K(Dt.contactNumber)+") ",1)):ge("",!0)]),_:2},1024),i(je,{class:"pb-1"},{default:u(()=>[v("div",xSe,[Dt?.id?(P(),Ae("span",CSe,[z[20]||(z[20]=v("strong",null,"ID:",-1)),N(" "+K(Dt.id),1)])):ge("",!0),Dt?.gender&&Dt.gender!==""?(P(),Ae("span",SSe,[z[21]||(z[21]=v("strong",null,"Gender:",-1)),N(" "+K(Dt.gender),1)])):ge("",!0),Dt?.birthDate||Dt?.age!=null&&Dt?.age!==""?(P(),Ae("span",ESe,[z[22]||(z[22]=v("strong",null,"Age:",-1)),N(" "+K(b(Dt)),1)])):ge("",!0),Dt?.importID?(P(),Ae("span",kSe,[z[23]||(z[23]=v("strong",null,"Import ID:",-1)),N(" "+K(Dt.importID),1)])):ge("",!0),Dt?.isImported===!0||Dt?.isImported===1?(P(),he(xe,{key:4,text:"Imported Patient"},{activator:u(({props:bt})=>[i(Ue,Ie({size:"small",color:"info"},{ref_for:!0},bt,{class:"ml-1"}),{default:u(()=>[...z[24]||(z[24]=[v("img",{src:qCe,alt:"Imported",style:{width:"16px",height:"16px",filter:"invert(0.5)"}},null,-1)])]),_:1},16)]),_:1})):ge("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])):ge("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})],64)):ge("",!0):(P(),he(Se,{key:3,"no-gutters":""},{default:u(()=>[i(_e,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",_Se,[i(Ue,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...z[17]||(z[17]=[N("mdi-account-search",-1)])]),_:1}),z[18]||(z[18]=v("div",{class:"text-h6 mb-2"},"Search for Patients",-1)),z[19]||(z[19]=v("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find patients",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1}),i(Ye,{value:1,style:{height:"100%"}},{default:u(()=>[i(Se,{"aria-label":"trends row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[i(_e,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",BSe,[i(mSe,{"model-value-doctor":ce.value.selectedDoctor,"onUpdate:modelValueDoctor":z[5]||(z[5]=Dt=>ce.value.selectedDoctor=Dt),"model-value-from-date":ce.value.fromDate,"onUpdate:modelValueFromDate":z[6]||(z[6]=Dt=>ce.value.fromDate=Dt),"available-doctors":x.value,"max-date":_.value,"is-loading":de.value,onShowTrends:L,onClearFilters:H},null,8,["model-value-doctor","model-value-from-date","available-doctors","max-date","is-loading"])])]),_:1}),i(_e,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",TSe,[i(Qe,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i(Qe,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(je,{class:"pt-2 pb-2 d-flex align-center justify-space-between flex-wrap"},{default:u(()=>[v("div",ISe,[q.value.length>0?(P(),Ae(ze,{key:0},[v("strong",null,K(q.value.length),1),z[25]||(z[25]=N("appointments analyzed ",-1))],64)):(P(),Ae("strong",FSe,"Trends Analysis"))]),q.value.length>0?(P(),Ae("div",PSe,[v("span",DSe,[z[26]||(z[26]=N("Appointments ",-1)),v("span",USe,K(q.value.length),1)]),z[30]||(z[30]=v("span",{class:"text-body-2"},"",-1)),v("span",RSe,[z[27]||(z[27]=N("Patients ",-1)),v("span",NSe,K(F.value),1)]),z[31]||(z[31]=v("span",{class:"text-body-2"},"",-1)),v("span",VSe,[z[28]||(z[28]=N("Weekly Avg ",-1)),v("span",LSe,K(T.value),1)]),z[32]||(z[32]=v("span",{class:"text-body-2"},"",-1)),v("span",MSe,[z[29]||(z[29]=N("Weeks ",-1)),v("span",OSe,K(E.value),1)])])):ge("",!0)]),_:1})]),_:1}),le.value?de.value?(P(),he(Se,{key:1,"no-gutters":""},{default:u(()=>[i(_e,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",$Se,[i(Ee,{indeterminate:"",color:"primary",size:"64"}),z[37]||(z[37]=v("div",{class:"mt-4 text-subtitle-1"},"Loading trends data...",-1))])]),_:1})]),_:1})):te.value?(P(),he(Se,{key:2,"no-gutters":""},{default:u(()=>[i(_e,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",QSe,[i(Ue,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...z[38]||(z[38]=[N("mdi-alert-circle",-1)])]),_:1}),z[40]||(z[40]=v("div",{class:"text-h6 mb-2"},"Failed to Load Trends",-1)),v("div",GSe,K(te.value),1),i(ye,{color:"primary",onClick:L,"prepend-icon":"mdi-refresh"},{default:u(()=>[...z[39]||(z[39]=[N(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):q.value.length===0&&le.value?(P(),he(Se,{key:3,"no-gutters":""},{default:u(()=>[i(_e,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",zSe,[i(Ue,{size:"64",color:"warning",class:"mb-4"},{default:u(()=>[...z[41]||(z[41]=[N("mdi-chart-line-variant",-1)])]),_:1}),z[43]||(z[43]=v("div",{class:"text-h6 mb-2"},"No Trends Data",-1)),z[44]||(z[44]=v("div",{class:"text-body-2 text-medium-emphasis mb-4"}," No completed appointments found for the selected criteria ",-1)),i(ye,{color:"primary",variant:"outlined",onClick:H,"prepend-icon":"mdi-refresh"},{default:u(()=>[...z[42]||(z[42]=[N(" Clear Configuration ",-1)])]),_:1})])]),_:1})]),_:1})):q.value.length>0?(P(),Ae("div",WSe,[i(je,{class:"pt-3"},{default:u(()=>[v("div",KSe,[i(xt,{headers:S.value,items:B.value,"items-per-page":10,class:"elevation-1 trends-table",density:"comfortable","fixed-header":""},{"item.startDate":u(({item:Dt})=>[v("div",jSe,[v("span",qSe,K(Dt.startDate),1)])]),"item.endDate":u(({item:Dt})=>[v("div",YSe,[v("span",XSe,K(Dt.endDate),1)])]),"item.count":u(({item:Dt})=>[v("div",JSe,[i(kt,{color:"primary",size:"small"},{default:u(()=>[N(K(Dt.count),1)]),_:2},1024)])]),_:2},1032,["headers","items"])])]),_:1})])):ge("",!0):(P(),he(Se,{key:0,"no-gutters":""},{default:u(()=>[i(_e,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",HSe,[i(Ue,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...z[33]||(z[33]=[N("mdi-chart-line-variant",-1)])]),_:1}),z[35]||(z[35]=v("div",{class:"text-h6 mb-2"},"Ready to Analyze Trends",-1)),z[36]||(z[36]=v("div",{class:"text-body-2 text-medium-emphasis mb-4"},' Configure your analysis settings and click "Show Trends" to view appointment trends ',-1)),i(ye,{color:"primary",variant:"outlined",onClick:L,"prepend-icon":"mdi-chart-line"},{default:u(()=>[...z[34]||(z[34]=[N(" Show All Trends ",-1)])]),_:1})])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))]),_:1})}}},eEe=en(ZSe,[["__scopeId","data-v-bb7003ec"]]),tEe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,21H8V7H19M19,5H8A2,2%200%200,0%206,7V21A2,2%200%200,0%208,23H19A2,2%200%200,0%2021,21V7A2,2%200%200,0%2019,5M16,1H4A2,2%200%200,0%202,3V17H4V3H16V1Z'%20/%3e%3c/svg%3e",NE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,9H7V7H17M17,13H7V11H17M14,17H7V15H14M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3Z'%20/%3e%3c/svg%3e",nEe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M5,13.46H7.17L10.5,7.08L11.44,14.05L13.93,10.86L16.53,13.46H19V15H15.89L14.07,13.21L10.38,17.92L9.62,12.15L8.11,15H5V13.46Z'%20/%3e%3c/svg%3e",aEe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z'%20/%3e%3c/svg%3e",TH="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.28%2021.09%2013%2020.05%2013%2019C13%2018.67%2013.03%2018.33%2013.08%2018H6V16H13.81C14.27%2015.2%2014.91%2014.5%2015.68%2014H6V12H18V13.08C18.33%2013.03%2018.67%2013%2019%2013S19.67%2013.03%2020%2013.08V8L14%202M13%209V3.5L18.5%209H13M18%2015V18H15V20H18V23H20V20H23V18H20V15H18Z'%20/%3e%3c/svg%3e",m_="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z'%20/%3e%3c/svg%3e",af="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,6H20V16H4M20,18A2,2%200%200,0%2022,16V6C22,4.89%2021.1,4%2020,4H4C2.89,4%202,4.89%202,6V16A2,2%200%200,0%204,18H0V20H24V18H20Z'%20/%3e%3c/svg%3e",Eh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6,19A5,5%200%200,1%201,14A5,5%200%200,1%206,9C7,6.65%209.3,5%2012,5C15.43,5%2018.24,7.66%2018.5,11.03L19,11A4,4%200%200,1%2023,15A4,4%200%200,1%2019,19H6M19,13H17V12A5,5%200%200,0%2012,7C9.5,7%207.45,8.82%207.06,11.19C6.73,11.07%206.37,11%206,11A3,3%200%200,0%203,14A3,3%200%200,0%206,17H19A2,2%200%200,0%2021,15A2,2%200%200,0%2019,13Z'%20/%3e%3c/svg%3e",rEe=async e=>{try{return{data:(await it.post("/diagnosis/",e)).data.data.new_diagnosis,error:null}}catch(t){return console.error("There was an error creating patients:",t?.response||t),{data:[],error:t}}},sEe=async e=>{try{return await it.put("/diagnosis/",e),{error:null}}catch(t){return console.error("Error updating diagnosis:",t),{error:t}}},oEe=async e=>{try{return{data:(await it.post("/medicine/medicines",e)).data.data.id_mapping,error:null}}catch(t){return console.error("Error adding medicine:",t),{data:[],error:t}}},iEe=async(e,t)=>{try{return{data:(await it.post(`/dosages?doctor_id=${t}`,e)).data.data.id_mapping,error:null}}catch(n){return console.error("Error creating dosage:",n),{data:null,error:n}}},lEe=async(e,t)=>{try{return await it.post(`/consultation/consultation_medicines/${e}`,t),{error:null}}catch(n){return console.error("Error updating consultation:",n),{error:n}}},IH=async e=>{try{return{data:(await it.post("/medicine/",e)).data.data.newMedicine,error:null}}catch(t){return console.error("Error adding medicine:",t),{data:[],error:t}}},VE=async(e,t)=>{try{return await it.post(`/diagnosis/diagnosis_medicines/${e}`,t),{error:null}}catch(n){return console.error("Error adding diagnosis medicine mapping:",n),{error:n}}},uEe=async e=>{try{return{data:(await it.get(`/medicine/diagnosis_medicines/${e.id}`)).data.data.medicines,error:null}}catch(t){return console.error("Error adding diagnosis medicine mapping:",t),{data:[],error:t}}},cEe=async(e,t,n={})=>{try{const a=n.skipMessages?{headers:{"X-Skip-Messages":"true"}}:{};return{data:(await it.get(`/medicine/dosage/${e.id}?doctor_id=${t}`,a)).data.data.dosages,error:null,errorMessage:null}}catch(a){if(console.error("Error fetching dosages:",a),a.response?.status===404){const r=a.response?.data?.error||null;return{data:[],error:null,errorMessage:r}}return{data:[],error:a,errorMessage:null}}},FH=async(e,t=!1,n=null)=>{try{const a={};return t&&(a.include_pharmacy_details=!0,n&&(a.pharmacy_id=n)),{data:(await it.get(`/medicine/search_medicines/${e}`,{params:a})).data.data.medicines,error:null}}catch(a){return console.error("Error fetching medicines:",a),a.response?.status===404?{data:[],error:null}:{data:[],error:a}}},dEe=async(e,t)=>{try{return{data:(await it.put(`/medicine/${e}`,t)).data.data,error:null}}catch(n){return console.error("Error updating medicine:",n),{data:null,error:n}}},fEe={__name:"create-diagnosis-template",props:{medicineList:{type:Array,default:()=>[]},diagnosis:{type:String,default:""},patientNotes:{type:String,default:""},investigations:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=R(n.diagnosis),s=R(n.patientNotes),o=R(n.investigations),l=R(!1),c=R(!1),f=R([]),d=R(""),A=R(null),m=ee(()=>n.medicineList.filter(g=>g.isLocal&&g.productName&&g.id!==void 0&&g.id!==null)),p=()=>{A.value&&A.value.abort(),a("close")},h=(g,_)=>{if(_)f.value.includes(g.id)||f.value.push(g.id),console.log("Medicine selected:",g.productName);else{const b=f.value.indexOf(g.id);b>-1&&f.value.splice(b,1),console.log("Medicine deselected:",g.productName)}d.value=""},y=async()=>{c.value=!0,d.value="",A.value=new AbortController;const g=n.medicineList.filter(b=>f.value.includes(b.id)),_={diagnosisName:r.value,instructions:s.value,investigations:o.value,isBookmark:1,isCreatedByUser:1,isImportedFromServer:0,doctor_id:n.doctorId};console.log("Creating new diagnosis:",_);try{const b=await rEe(_);if(A.value?.signal.aborted)return;if(b.error)d.value="Failed to create diagnosis template. Please try again.",console.error("Error creating diagnosis:",b.error);else{_.id=b.data.id;const S=await VE(_.id,g);if(A.value?.signal.aborted)return;if(S.error){d.value="Diagnosis created but failed to associate medicines. Please try editing the template to add medicines.",console.error("Error creating diagnosis medicines:",S.error);return}console.log("Diagnosis template created successfully"),a("update&close")}}catch(b){A.value?.signal.aborted||(d.value="An unexpected error occurred. Please try again.",console.error("Error creating diagnosis template:",b))}finally{A.value?.signal.aborted||(c.value=!1),A.value=null}};return ha(()=>{A.value&&A.value.abort()}),(g,_)=>{const b=I("v-card-title"),S=I("v-col"),B=I("v-icon"),F=I("v-btn"),T=I("v-row"),E=I("v-card"),x=I("v-text-field"),C=I("v-textarea"),D=I("v-divider"),U=I("v-card-subtitle"),L=I("v-checkbox"),H=I("v-tooltip"),oe=I("v-chip"),de=I("v-card-text"),te=I("v-alert"),q=I("v-form");return P(),he(E,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(T,{"no-gutters":""},{default:u(()=>[i(S,{cols:"12"},{default:u(()=>[i(E,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(T,{"no-gutters":""},{default:u(()=>[i(S,{cols:"11"},{default:u(()=>[i(b,{class:"pa-0 pl-2"},{default:u(()=>[..._[4]||(_[4]=[N("Create Diagnosis Template",-1)])]),_:1})]),_:1}),i(S,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(F,{icon:"",size:"x-small",onClick:p},{default:u(()=>[i(B,null,{default:u(()=>[..._[5]||(_[5]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(T,{"no-gutters":""},{default:u(()=>[i(S,{cols:"12"},{default:u(()=>[i(E,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(q,{modelValue:l.value,"onUpdate:modelValue":_[3]||(_[3]=ce=>l.value=ce),"validate-on":"blur"},{default:u(()=>[i(T,{"no-gutters":""},{default:u(()=>[i(S,{cols:"12"},{default:u(()=>[i(x,{label:"Diagnosis Name *",density:"compact",modelValue:r.value,"onUpdate:modelValue":_[0]||(_[0]=ce=>r.value=ce),rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(S,{cols:"12"},{default:u(()=>[i(C,{label:"Instructions",density:"compact",modelValue:s.value,"onUpdate:modelValue":_[1]||(_[1]=ce=>s.value=ce),rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1}),i(S,{cols:"12"},{default:u(()=>[i(C,{label:"Investigations",density:"compact",modelValue:o.value,"onUpdate:modelValue":_[2]||(_[2]=ce=>o.value=ce),rows:"1","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),i(T,{"no-gutters":""},{default:u(()=>[i(S,{cols:"12"},{default:u(()=>[i(D,{class:"my-3"},{default:u(()=>[..._[6]||(_[6]=[N("Medicines",-1)])]),_:1}),m.value.length>0?(P(),he(E,{key:0,variant:"outlined"},{default:u(()=>[i(U,{class:"pb-2"},{default:u(()=>[..._[7]||(_[7]=[N("Available Medicines (from current consultation):",-1)])]),_:1}),i(de,null,{default:u(()=>[(P(!0),Ae(ze,null,Jt(m.value,ce=>(P(),he(E,{key:`available-${ce.id}`,flat:""},{default:u(()=>[i(T,{"no-gutters":""},{default:u(()=>[i(S,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[i(L,{"model-value":f.value.includes(ce.id),color:"primary",density:"compact","hide-details":"","onUpdate:modelValue":le=>h(ce,le)},null,8,["model-value","onUpdate:modelValue"]),i(oe,{color:"primary","text-color":"black",size:"small",class:"ml-2"},Dv({default:u(()=>[v("strong",null,K(ce.productName),1)]),_:2},[ce.isLocal?{name:"append",fn:u(()=>[i(H,{text:"Saved Medicine"},{activator:u(({props:le})=>[i(B,Ie({size:"small"},{ref_for:!0},le,{class:"ml-1"}),{default:u(()=>[..._[8]||(_[8]=[v("img",{src:af,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"0"}:{name:"append",fn:u(()=>[i(H,{text:"External Medicine"},{activator:u(({props:le})=>[i(B,Ie({size:"small"},{ref_for:!0},le,{class:"ml-1"}),{default:u(()=>[..._[9]||(_[9]=[v("img",{src:Eh,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"1"}]),1024)]),_:2},1024),i(S,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[i(U,null,{default:u(()=>[N(K(ce.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(P(),he(te,{key:1,type:"info",variant:"outlined"},{default:u(()=>[..._[10]||(_[10]=[N(" No medicines available from current consultation to add to template. ",-1)])]),_:1})),d.value?(P(),he(te,{key:2,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[N(K(d.value),1)]),_:1})):ge("",!0)]),_:1})]),_:1}),i(D),i(T,{"no-gutters":""},{default:u(()=>[i(S,{cols:"2"}),i(S,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(F,{variant:"outlined",onClick:y,disabled:!l.value,loading:c.value},{default:u(()=>[..._[11]||(_[11]=[N(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),i(S,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},AEe=en(fEe,[["__scopeId","data-v-92535624"]]),mEe={__name:"edit-diagnosis-template",props:{medicineList:{type:Array,required:!0},selectedDiagnosis:{type:Object,default:null}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=R(null),s=R({}),o=R([]),l=R(!1),c=R(!1),f=R([]),d=R(!1),A=R(""),m=R(null);Ge(()=>n.medicineList,()=>{p()},{deep:!0});const p=()=>{const S=o.value.map(B=>B.id);f.value=n.medicineList.filter(B=>B.isLocal&&B.id!==void 0&&B.id!==null&&!S.includes(B.id)).map(B=>({...B,isSelected:!1,_uniqueKey:`available_${B.id}`}))};An(async()=>{n.selectedDiagnosis?(r.value=n.selectedDiagnosis,await h(n.selectedDiagnosis)):p()});const h=async S=>{if(!S){s.value={},o.value=[],p();return}s.value=Kn.cloneDeep(S),d.value=!0,A.value="";try{const B=await uEe(S);o.value=(B.data||[]).map(F=>({...F,isSelected:!0,_uniqueKey:`template_${F.id}`})),console.log("Template medicines fetched:",o.value),p()}catch(B){console.error("Error fetching template medicines:",B),A.value="Failed to load template medicines. Please try again.",o.value=[],p()}finally{d.value=!1}},y=S=>{console.log("Medicine selection changed:",S.productName,S.isSelected)},g=S=>{console.log("Template medicine selection changed:",S.productName,S.isSelected)},_=async()=>{if(!(!r.value||!c.value)){l.value=!0;try{const S=await sEe(s.value);if(S.error){console.error("Error updating diagnosis:",S.error);return}const B=o.value.filter(E=>E.isSelected),F=f.value.filter(E=>E.isSelected),T=[...B,...F];if(T.length>0){const E=await VE(r.value.id,T);if(E.error){console.error("Error updating diagnosis medicines:",E.error);return}}else{const E=await VE(r.value.id,[]);if(E.error){console.error("Error clearing diagnosis medicines:",E.error);return}}console.log("Template updated successfully"),a("update&close")}catch(S){console.error("Error updating template:",S)}finally{l.value=!1}}},b=()=>{m.value&&m.value.abort(),a("close")};return ha(()=>{m.value&&m.value.abort()}),(S,B)=>{const F=I("v-card-title"),T=I("v-col"),E=I("v-icon"),x=I("v-btn"),C=I("v-row"),D=I("v-card"),U=I("v-text-field"),L=I("v-textarea"),H=I("v-divider"),oe=I("v-card-subtitle"),de=I("v-progress-linear"),te=I("v-card-text"),q=I("v-checkbox"),ce=I("v-tooltip"),le=I("v-chip"),Z=I("v-alert"),ne=I("v-form");return P(),he(D,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(C,{"no-gutters":""},{default:u(()=>[i(T,{cols:"12"},{default:u(()=>[i(D,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(C,{"no-gutters":""},{default:u(()=>[i(T,{cols:"11"},{default:u(()=>[i(F,{class:"pa-0 pl-2"},{default:u(()=>[...B[4]||(B[4]=[N("Edit Diagnosis Template",-1)])]),_:1})]),_:1}),i(T,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(x,{icon:"",size:"x-small",onClick:b},{default:u(()=>[i(E,null,{default:u(()=>[...B[5]||(B[5]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(C,{"no-gutters":""},{default:u(()=>[i(T,{cols:"12"},{default:u(()=>[i(D,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(ne,{modelValue:c.value,"onUpdate:modelValue":B[3]||(B[3]=G=>c.value=G),"validate-on":"blur"},{default:u(()=>[i(C,{"no-gutters":""},{default:u(()=>[r.value?(P(),Ae(ze,{key:0},[i(T,{cols:"12"},{default:u(()=>[i(U,{label:"Diagnosis Name *",density:"compact",modelValue:s.value.diagnosisName,"onUpdate:modelValue":B[0]||(B[0]=G=>s.value.diagnosisName=G),rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(T,{cols:"12"},{default:u(()=>[i(L,{label:"Instructions",density:"compact",rows:"2","auto-grow":"",modelValue:s.value.instructions,"onUpdate:modelValue":B[1]||(B[1]=G=>s.value.instructions=G)},null,8,["modelValue"])]),_:1}),i(T,{cols:"12"},{default:u(()=>[i(L,{label:"Investigations",density:"compact",modelValue:s.value.investigations,"onUpdate:modelValue":B[2]||(B[2]=G=>s.value.investigations=G),rows:"1","auto-grow":""},null,8,["modelValue"])]),_:1}),i(T,{cols:"12"},{default:u(()=>[i(H,{class:"my-3"},{default:u(()=>[...B[6]||(B[6]=[N("Medicines",-1)])]),_:1}),d.value?(P(),he(D,{key:0,variant:"outlined",class:"mb-3"},{default:u(()=>[i(oe,{class:"pb-2"},{default:u(()=>[...B[7]||(B[7]=[N("Loading template medicines...",-1)])]),_:1}),i(te,null,{default:u(()=>[i(de,{indeterminate:""})]),_:1})]),_:1})):o.value.length>0?(P(),he(D,{key:1,variant:"outlined",class:"mb-3"},{default:u(()=>[i(oe,{class:"pb-2"},{default:u(()=>[...B[8]||(B[8]=[N("Current Template Medicines:",-1)])]),_:1}),i(te,null,{default:u(()=>[(P(!0),Ae(ze,null,Jt(o.value,G=>(P(),he(D,{key:G._uniqueKey||`template-${G.id}`,flat:""},{default:u(()=>[i(C,{"no-gutters":""},{default:u(()=>[i(T,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[i(q,{modelValue:G.isSelected,"onUpdate:modelValue":W=>G.isSelected=W,color:"primary",density:"compact","hide-details":"",onChange:W=>g(G)},null,8,["modelValue","onUpdate:modelValue","onChange"]),i(le,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{append:u(()=>[i(ce,{text:"Saved Medicine"},{activator:u(({props:W})=>[i(E,Ie({size:"small"},{ref_for:!0},W,{class:"ml-1"}),{default:u(()=>[...B[9]||(B[9]=[v("img",{src:af,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),default:u(()=>[v("strong",null,K(G.productName),1)]),_:2},1024)]),_:2},1024),i(T,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[i(oe,null,{default:u(()=>[N(K(G.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0),f.value.length>0?(P(),he(D,{key:2,variant:"outlined"},{default:u(()=>[i(oe,{class:"pb-2"},{default:u(()=>[...B[10]||(B[10]=[N("Available Medicines (from current consultation):",-1)])]),_:1}),i(te,null,{default:u(()=>[(P(!0),Ae(ze,null,Jt(f.value,G=>(P(),he(D,{key:G._uniqueKey||`available-${G.id}`,flat:""},{default:u(()=>[i(C,{"no-gutters":""},{default:u(()=>[i(T,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[i(q,{modelValue:G.isSelected,"onUpdate:modelValue":W=>G.isSelected=W,color:"primary",density:"compact","hide-details":"",onChange:W=>y(G)},null,8,["modelValue","onUpdate:modelValue","onChange"]),i(le,{color:"primary","text-color":"black",size:"small",class:"ml-2"},Dv({default:u(()=>[v("strong",null,K(G.productName),1)]),_:2},[G.isLocal?{name:"append",fn:u(()=>[i(ce,{text:"Saved Medicine"},{activator:u(({props:W})=>[i(E,Ie({size:"small"},{ref_for:!0},W,{class:"ml-1"}),{default:u(()=>[...B[11]||(B[11]=[v("img",{src:af,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"0"}:{name:"append",fn:u(()=>[i(ce,{text:"External Medicine"},{activator:u(({props:W})=>[i(E,Ie({size:"small"},{ref_for:!0},W,{class:"ml-1"}),{default:u(()=>[...B[12]||(B[12]=[v("img",{src:Eh,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"1"}]),1024)]),_:2},1024),i(T,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[i(oe,null,{default:u(()=>[N(K(G.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(P(),he(Z,{key:3,type:"info",variant:"outlined"},{default:u(()=>[...B[13]||(B[13]=[N(" No medicines available from current consultation to add to template. ",-1)])]),_:1})),A.value?(P(),he(Z,{key:4,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[N(K(A.value),1)]),_:1})):ge("",!0)]),_:1})],64)):(P(),he(T,{key:1,cols:"12"},{default:u(()=>[i(Z,{type:"info",variant:"outlined"},{default:u(()=>[...B[14]||(B[14]=[N(" No diagnosis template selected for editing. ",-1)])]),_:1})]),_:1}))]),_:1}),i(H),i(C,{"no-gutters":""},{default:u(()=>[i(T,{cols:"2"}),i(T,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(x,{variant:"outlined",onClick:_,disabled:!c.value||!r.value,loading:l.value},{default:u(()=>[...B[15]||(B[15]=[N(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),i(T,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},vEe=en(mEe,[["__scopeId","data-v-217bbc0c"]]),hEe={class:"diagnosis-name-truncate"},pEe={__name:"search-diagnosis",props:{modelValue:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","diagnosisSelected"],setup(e,{emit:t}){const n=e,a=t,r=R(!1),s=R([]),o=R(""),l=R(""),c=R(!1);let f=null;const d=p=>{o.value=p};Ge(l,p=>{typeof p=="string"?(a("update:modelValue",p),a("diagnosisSelected",{diagnosisName:p,isUserTyped:!0,isFromHistory:!1})):p&&typeof p=="object"?(a("update:modelValue",p.diagnosisName),a("diagnosisSelected",p)):p||(a("update:modelValue",""),a("diagnosisSelected",null))}),Ge(o,p=>{if(f&&clearTimeout(f),c.value=!1,!p||p.length<1){r.value=!1,s.value=[];return}f=setTimeout(()=>{A(p)},300)}),Ge(()=>n.modelValue,p=>{p!==l.value&&(l.value=p)},{immediate:!0});const A=async p=>{if(!(!p||p.length<1)){r.value=!0,c.value=!1;try{const h=await it.get(`diagnosis/search_diagnosis/${p}`,{params:{doctor_id:n.doctorId}});s.value=h.data.data.diagnosis,(!s.value||s.value.length===0)&&(c.value=!0)}catch(h){console.error("Error fetching diagnosis:",h),c.value=!0}finally{r.value=!1}}},m=ee(()=>!o.value||o.value.length<1?"Start typing to search consultation history, or type custom diagnosis":r.value?"Searching consultation history and external sources...":c.value?"No matches found in consultation history or external sources. You can still type custom diagnosis.":"");return(p,h)=>{const y=I("v-icon"),g=I("v-tooltip"),_=I("v-list-item"),b=I("v-card-subtitle"),S=I("v-card"),B=I("v-combobox");return P(),he(B,{modelValue:l.value,"onUpdate:modelValue":h[0]||(h[0]=F=>l.value=F),items:s.value,search:o.value,"onUpdate:search":d,"item-title":"diagnosisName","item-value":"diagnosisName",label:"Diagnosis - search history or type directly",placeholder:"Type diagnosis or search consultation history...",variant:"underlined",loading:r.value,"no-data-text":m.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"diagnosis-combobox"},{item:u(({props:F,item:T})=>[i(_,Ie(F,{density:"compact"}),{title:u(()=>[v("span",hEe,K(T.raw.diagnosisName),1)]),append:u(()=>[i(g,{location:"top"},{activator:u(({props:E})=>[i(y,Ie(E,{size:"small"}),{default:u(()=>[T.raw.isFromHistory?(P(),he(y,{key:0,icon:"mdi-history",color:"primary"})):(P(),he(y,{key:1,icon:"mdi-cloud",color:"secondary"}))]),_:2},1040)]),default:u(()=>[v("span",null,K(T.raw.isFromHistory?"From your consultation history":"External suggestion"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[i(S,{flat:"",class:"pa-4 text-center"},{default:u(()=>[i(b,null,{default:u(()=>[N(K(m.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},gEe=en(pEe,[["__scopeId","data-v-18a25720"]]),yEe={class:"investigation-name-truncate"},_Ee={__name:"search-investigation",props:{modelValue:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","investigationSelected"],setup(e,{emit:t}){const n=e,a=t,r=R(!1),s=R([]),o=R(""),l=R(""),c=R(!1);let f=null;const d=p=>{o.value=p};Ge(l,p=>{typeof p=="string"?(a("update:modelValue",p),a("investigationSelected",{investigationName:p,isUserTyped:!0,isFromHistory:!1})):p&&typeof p=="object"?(a("update:modelValue",p.investigationName),a("investigationSelected",p)):p||(a("update:modelValue",""),a("investigationSelected",null))}),Ge(o,p=>{if(f&&clearTimeout(f),c.value=!1,!p||p.length<1){r.value=!1,s.value=[];return}f=setTimeout(()=>{A(p)},300)}),Ge(()=>n.modelValue,p=>{p!==l.value&&(l.value=p)},{immediate:!0});const A=async p=>{if(!(!p||p.length<1)){r.value=!0,c.value=!1;try{const h=await it.get(`consultation/search_investigations/${p}`,{params:{doctor_id:n.doctorId}});s.value=h.data.data.investigations.filter(y=>y.investigationName&&y.investigationName.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(h){console.error("Error fetching investigations:",h),c.value=!0}finally{r.value=!1}}},m=ee(()=>!o.value||o.value.length<1?"Start typing to search consultation history, or type custom investigations":r.value?"Searching consultation history...":c.value?"No matches found in consultation history. You can still type custom investigations.":"");return(p,h)=>{const y=I("v-icon"),g=I("v-tooltip"),_=I("v-list-item"),b=I("v-card-subtitle"),S=I("v-card"),B=I("v-combobox");return P(),he(B,{modelValue:l.value,"onUpdate:modelValue":h[0]||(h[0]=F=>l.value=F),items:s.value,search:o.value,"onUpdate:search":d,"item-title":"investigationName","item-value":"investigationName",label:"Investigations - search history or type directly",placeholder:"Type investigations or search consultation history...",variant:"underlined",loading:r.value,"no-data-text":m.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"investigation-combobox"},{item:u(({props:F,item:T})=>[i(_,Ie(F,{density:"compact"}),{title:u(()=>[v("span",yEe,K(T.raw.investigationName),1)]),append:u(()=>[i(g,{location:"top"},{activator:u(({props:E})=>[i(y,Ie(E,{size:"small"}),{default:u(()=>[T.raw.isFromHistory?(P(),he(y,{key:0,icon:"mdi-history",color:"primary"})):ge("",!0)]),_:2},1040)]),default:u(()=>[v("span",null,K(T.raw.isFromHistory?"From your consultation history":"Custom investigation"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[i(S,{flat:"",class:"pa-4 text-center"},{default:u(()=>[i(b,null,{default:u(()=>[N(K(m.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},wEe=en(_Ee,[["__scopeId","data-v-4f59e225"]]),bEe={class:"patient-advice-multiline"},xEe={__name:"search-patient-advice",props:{doctorId:{type:[String,Number],required:!0}},emits:["patientAdviceSelected"],setup(e,{emit:t}){const n=e,a=t,r=R(!1),s=R([]),o=R(""),l=R(null),c=R(!1);let f=null;const d=y=>{s.value.some(_=>_.patientAdvice===y)||(o.value=y)},A=()=>{(!o.value||o.value.length===0)&&s.value.length===0&&p("")},m=y=>{y&&(a("patientAdviceSelected",y),l.value=null)};Ge(o,y=>{f&&clearTimeout(f),c.value=!1,f=setTimeout(()=>{p(y||"")},300)});const p=async y=>{r.value=!0,c.value=!1;try{const g=y||"",_=await it.get(`consultation/search_patient_advice/${encodeURIComponent(g)}`,{params:{doctor_id:n.doctorId}});s.value=_.data.data.patientAdvices.filter(b=>b.patientAdvice&&b.patientAdvice.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(g){console.error("Error fetching patient advice:",g),c.value=!0}finally{r.value=!1}},h=ee(()=>!o.value||o.value.length<1?r.value?"Loading recent patient advice...":c.value?"No patient advice found in consultation history. Start typing to search.":"Start typing to search consultation history":r.value?"Searching consultation history...":c.value?"No matches found in consultation history.":"");return(y,g)=>{const _=I("v-icon"),b=I("v-tooltip"),S=I("v-list-item"),B=I("v-card-subtitle"),F=I("v-card"),T=I("v-autocomplete");return P(),he(T,{modelValue:l.value,"onUpdate:modelValue":[g[0]||(g[0]=E=>l.value=E),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:A,"item-title":"patientAdvice","item-value":"patientAdvice",label:"Search Patient Advice History",placeholder:"Type to search consultation history...",variant:"outlined",loading:r.value,"no-data-text":h.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact","return-object":"",class:"patient-advice-search"},{item:u(({props:E,item:x})=>[i(S,Ie(E,{density:"compact",class:"patient-advice-list-item"}),{title:u(()=>[v("div",bEe,K(x.raw.patientAdvice),1)]),append:u(()=>[i(b,{location:"top"},{activator:u(({props:C})=>[i(_,Ie(C,{size:"small"}),{default:u(()=>[x.raw.isFromHistory?(P(),he(_,{key:0,icon:"mdi-history",color:"primary"})):ge("",!0)]),_:2},1040)]),default:u(()=>[v("span",null,K(x.raw.isFromHistory?"From your consultation history":"Custom patient advice"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[i(F,{flat:"",class:"pa-4 text-center"},{default:u(()=>[i(B,null,{default:u(()=>[N(K(h.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},CEe=en(xEe,[["__scopeId","data-v-daaff071"]]),SEe={class:"template-name template-name-truncate"},EEe={class:"text-caption template-subtitle-truncate"},kEe={key:0},BEe={__name:"diagnosis-template-autocomplete",props:{doctorId:{type:[String,Number],required:!0}},emits:["template-selected"],setup(e,{emit:t}){const n=e,a=t,r=R(null),s=R([]),o=R(""),l=R(!1),c=R(!1);let f=null;const d=_=>{o.value=_},A=()=>{s.value.length===0&&(!o.value||o.value.length===0)&&p()};Ge(o,_=>{if(f&&clearTimeout(f),!_||_.length===0){p();return}f=setTimeout(()=>{h(_)},300)});const m=_=>{_&&typeof _=="object"&&(console.log("Template selected:",_),a("template-selected",{template:_,autoFillData:{diagnosis:_.diagnosisName,instructions:_.instructions||"",investigations:_.investigations||"",medicines:_.diagnosisMedicines||[]}}),setTimeout(()=>{r.value=null,o.value="",s.value=[]},100))},p=async()=>{l.value=!0;try{const _=await it.get("diagnosis/search_templates/all",{params:{doctor_id:n.doctorId}});s.value=_.data.data.templates||[],c.value=!0}catch(_){console.error("Error fetching all templates:",_),s.value=[],c.value=!0}finally{l.value=!1}},h=async _=>{if(!(!_||_.length===0)){l.value=!0;try{const b=await it.get(`diagnosis/search_templates/${_}`,{params:{doctor_id:n.doctorId}});s.value=b.data.data.templates||[]}catch(b){console.error("Error fetching templates:",b),s.value=[]}finally{l.value=!1}}},y=_=>{const b=[];return _.instructions&&b.push(`Instructions: ${_.instructions.substring(0,30)}...`),_.investigations&&b.push(`Investigations: ${_.investigations.substring(0,20)}...`),_.diagnosisMedicines&&_.diagnosisMedicines.length>0&&b.push(`${_.diagnosisMedicines.length} medicine(s)`),b.join(" | ")||"Template"},g=ee(()=>l.value?!o.value||o.value.length===0?"Loading templates...":"Searching templates...":!o.value||o.value.length===0?c.value&&s.value.length===0?"No saved diagnosis templates found. Create templates during consultations to see them here.":"Click to view your saved diagnosis templates":o.value&&s.value.length===0?`No templates found for "${o.value}". Try a different search term.`:"");return(_,b)=>{const S=I("v-icon"),B=I("v-tooltip"),F=I("v-list-item"),T=I("v-list"),E=I("v-card-subtitle"),x=I("v-card-text"),C=I("v-card"),D=I("v-autocomplete");return P(),he(D,{modelValue:r.value,"onUpdate:modelValue":[b[0]||(b[0]=U=>r.value=U),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:A,"item-title":"diagnosisName","item-value":"diagnosisName",label:"select diagnosis template (optional)",placeholder:"Search saved templates...",variant:"outlined",loading:l.value,"no-data-text":g.value,clearable:"","return-object":"",density:"compact","prepend-inner-icon":"mdi-magnify",class:"template-autocomplete"},{item:u(({props:U,item:L})=>[i(T,{density:"compact",class:"template-search-list"},{default:u(()=>[i(F,Ie(U,{class:"template-search-item"}),{title:u(()=>[v("span",SEe,K(L.raw.diagnosisName),1)]),subtitle:u(()=>[v("span",EEe,K(y(L.raw)),1)]),append:u(()=>[i(B,{location:"top"},{activator:u(({props:H})=>[i(S,Ie(H,{size:"small",color:"primary"}),{default:u(()=>[...b[1]||(b[1]=[N(" mdi-bookmark ",-1)])]),_:1},16)]),default:u(()=>[b[2]||(b[2]=v("span",null,"Saved Template",-1))]),_:1})]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[i(C,{flat:"",class:"pa-4 text-center"},{default:u(()=>[c.value&&s.value.length===0&&!o.value?(P(),Ae("div",kEe,[i(S,{color:"grey-lighten-1",size:"48",class:"mb-2"},{default:u(()=>[...b[3]||(b[3]=[N("mdi-bookmark-outline",-1)])]),_:1}),i(E,{class:"text-wrap mb-2"},{default:u(()=>[...b[4]||(b[4]=[N("No saved diagnosis templates found",-1)])]),_:1}),i(x,{class:"text-caption text-grey"},{default:u(()=>[...b[5]||(b[5]=[N(" Save diagnosis templates during consultations to quickly reuse them here. ",-1)])]),_:1})])):(P(),he(E,{key:1,class:"text-wrap"},{default:u(()=>[N(K(g.value),1)]),_:1}))]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},TEe=en(BEe,[["__scopeId","data-v-fd6a829c"]]),IEe={class:"font-weight-medium medicine-chip-truncate"},FEe={class:"d-flex align-center"},PEe={class:"medicine-name-truncate"},DEe={key:0,class:"ml-2"},UEe={key:1,class:"ml-2"},REe={class:"text-center"},NEe={__name:"search-medicine",props:{showInventoryStatus:{type:Boolean,default:!1}},emits:["searchedMedicines","addMedicine"],setup(e,{emit:t}){const n=Ln(),a=e,r=ee(()=>n.getters["pharmacyModule/currentPharmacyId"]),s=t,o=()=>{s("addMedicine")},l=R(!1),c=R([]),f=R(""),d=R([]),A=R(!1);let m=null;Ge(f,_=>{if(m&&clearTimeout(m),A.value=!1,!_||_.trim().length===0){l.value=!1;return}m=setTimeout(()=>{p(_)},300)}),Ge(d,_=>{_.length>0&&s("searchedMedicines",_)});const p=async _=>{if(!(!_||_.trim().length===0)){l.value=!0,A.value=!1;try{const b=a.showInventoryStatus?r.value:null,S=await FH(_,a.showInventoryStatus,b);S.error?(console.error("Medicine search error:",S.error),A.value=!0):(c.value=S.data,(!c.value||c.value.length===0)&&(A.value=!0))}catch(b){console.error("Medicine search failed:",b),A.value=!0}finally{l.value=!1}}},h=_=>_.isPharmacy?_.inventoryUnits===void 0||_.inventoryUnits===null?"grey":_.inventoryUnits===0?"error":_.lowStock?"warning":"success":"default",y=_=>_.isPharmacy?_.inventoryUnits===void 0||_.inventoryUnits===null?"No Inventory":_.inventoryUnits===0?_.closestExpiry&&new Date(_.closestExpiry)<new Date?"Expired - No stock":"No stock":`${_.inventoryUnits} units`:"",g=ee(()=>!f.value||f.value.trim().length===0?"Start typing to search medicines":l.value?"Searching medicines...":A.value?"No medicines found matching your search. Try different keywords or create new medicine below.":"");return(_,b)=>{const S=I("v-chip"),B=I("v-list-item-subtitle"),F=I("v-icon"),T=I("v-list-item"),E=I("v-divider"),x=I("v-card-subtitle"),C=I("v-btn"),D=I("v-card"),U=I("v-list"),L=I("v-autocomplete");return P(),he(L,{multiple:"",clearable:"","clear-on-select":"","hide-selected":"",chips:"","closable-chips":"",density:"compact",variant:"outlined",label:"search medicine by trade name",items:c.value,search:f.value,"onUpdate:search":b[0]||(b[0]=H=>f.value=H),loading:l.value,"item-title":"productName","item-value":"item","return-object":"",modelValue:d.value,"onUpdate:modelValue":b[1]||(b[1]=H=>d.value=H),rounded:"l","prepend-inner-icon":"mdi-magnify","no-data-text":g.value,placeholder:l.value?"Searching...":"Start typing to search medicines"},{chip:u(({props:H,item:oe})=>[i(S,Ie(H,{size:"small",class:"mr-1"}),{default:u(()=>[v("span",IEe,K(oe.raw.productName),1)]),_:2},1040)]),item:u(({props:H,item:oe,index:de})=>[i(U,{density:"compact",class:"medicine-search-list"},{default:u(()=>[i(T,Ie(H,{class:"medicine-search-item"}),{title:u(()=>[v("div",FEe,[v("span",PEe,K(oe.raw.productName),1),e.showInventoryStatus&&oe.raw.isPharmacy?(P(),he(S,{key:0,color:h(oe.raw),size:"x-small",variant:"flat",class:"ml-2"},{default:u(()=>[N(K(y(oe.raw)),1)]),_:2},1032,["color"])):ge("",!0)])]),append:u(()=>[e.showInventoryStatus&&oe.raw.isPharmacy?(P(),he(F,{key:0,size:"small"},{default:u(()=>[...b[2]||(b[2]=[N(" mdi-store-plus-outline ",-1)])]),_:1})):oe.raw.isLocal?(P(),he(F,{key:1,size:"small"},{default:u(()=>[...b[3]||(b[3]=[v("img",{src:af,alt:"Saved Medicine"},null,-1)])]),_:1})):(P(),he(F,{key:2,size:"small"},{default:u(()=>[...b[4]||(b[4]=[v("img",{src:Eh,alt:"External Medicine"},null,-1)])]),_:1}))]),default:u(()=>[i(B,{class:"medicine-subtitle-truncate"},{default:u(()=>[N(K(oe.raw.marketer)+" ",1),e.showInventoryStatus&&oe.raw.isPharmacy?(P(),Ae(ze,{key:0},[oe.raw.mrp!==null&&oe.raw.mrp!==void 0?(P(),Ae("span",DEe,"  MRP: "+K(Math.round(oe.raw.mrp)),1)):ge("",!0),oe.raw.discountPercentage!==null&&oe.raw.discountPercentage!==void 0?(P(),Ae("span",UEe,"  Discount: "+K(oe.raw.discountPercentage)+"% ",1)):ge("",!0)],64)):ge("",!0)]),_:2},1024)]),_:2},1040),de===c.value.length-1?(P(),Ae(ze,{key:0},[i(E),i(D,{flat:"",class:"pt-1"},{default:u(()=>[i(x,null,{default:u(()=>[...b[5]||(b[5]=[N("Medicine not in list?",-1)])]),_:1}),i(C,{class:"ml-3",variant:"outlined",onClick:o},{default:u(()=>[i(F,{class:"mr-2"},{default:u(()=>[...b[6]||(b[6]=[N("mdi-plus",-1)])]),_:1}),b[7]||(b[7]=N(" Create Medicine ",-1))]),_:1})]),_:1})],64)):ge("",!0)]),_:2},1024)]),"no-data":u(()=>[f.value&&f.value.trim().length>0?(P(),he(D,{key:0,flat:"",class:"pa-4"},{default:u(()=>[v("div",REe,[i(x,{class:"mb-2"},{default:u(()=>[N(K(g.value),1)]),_:1}),i(C,{variant:"outlined",color:"primary",onClick:o},{default:u(()=>[i(F,{class:"mr-2"},{default:u(()=>[...b[8]||(b[8]=[N("mdi-plus",-1)])]),_:1}),b[9]||(b[9]=N(" Create Medicine ",-1))]),_:1})])]),_:1})):(P(),he(D,{key:1,flat:"",class:"pa-4 text-center"},{default:u(()=>[i(x,null,{default:u(()=>[N(K(g.value),1)]),_:1})]),_:1}))]),_:1},8,["items","search","loading","modelValue","no-data-text","placeholder"])}}},PH=en(NEe,[["__scopeId","data-v-246f01d9"]]),VEe={__name:"search-dosage-schedule",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","dosageScheduleSelected"],setup(e,{emit:t}){const n=e,a=t,r=R(!1),s=R([]),o=R(""),l=R(""),c=R(!1);let f=null,d=!0;const A=g=>{o.value=g},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&h("*")},p=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&h("*")};Ge(l,g=>{typeof g=="string"?(a("update:modelValue",g),a("dosageScheduleSelected",{dosage_schedule:g,isUserTyped:!0,isFromHistory:!1})):g&&typeof g=="object"?(a("update:modelValue",g.dosage_schedule),a("dosageScheduleSelected",g)):g||(a("update:modelValue",""),a("dosageScheduleSelected",null))}),Ge(o,g=>{if(f&&clearTimeout(f),c.value=!1,!g||g.length<1){r.value=!1,s.value=[];return}f=setTimeout(()=>{h(g)},300)}),Ge(()=>n.modelValue,g=>{g!==l.value&&(l.value=g)},{immediate:!0}),Ge([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?h(o.value):n.medicineId&&h("*")});const h=async g=>{const _=g==="*"||g==="FOCUS";if(!(!_&&(!g||g.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const S=_?"*":g,B=await it.get(`/medicine/search_dosage_schedules/${encodeURIComponent(S)}`,{params:b});if(!d)return;if(B.data.success&&B.data.data.dosage_schedules){const F=B.data.data.dosage_schedules.filter(T=>T&&T.trim().length>0).map(T=>({dosage_schedule:T,isFromHistory:!0}));s.value=F,F.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage schedules:",b),c.value=!0}finally{d&&(r.value=!1)}}},y=ee(()=>!o.value||o.value.length<1?"Click to see all schedule history, or start typing to search":r.value?"Searching schedule history...":c.value?"No matches found in schedule history. You can still type custom schedule.":"");return ha(()=>{d=!1,f&&(clearTimeout(f),f=null)}),(g,_)=>{const b=I("v-icon"),S=I("v-tooltip"),B=I("v-combobox");return P(),he(B,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=F=>l.value=F),items:s.value,search:o.value,"onUpdate:search":A,onClick:m,onFocus:p,"item-title":"dosage_schedule","item-value":"dosage_schedule",label:"Dosage Schedule",placeholder:"Type or search dosage...",variant:"outlined",loading:r.value,"no-data-text":y.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-schedule-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[i(S,{text:"Dosage Schedule e.g. 1 after breakfast",location:"top"},{activator:u(({props:F})=>[i(b,Ie(F,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[..._[1]||(_[1]=[N(" mdi-clock-outline ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},LEe=en(VEe,[["__scopeId","data-v-b0eb0e04"]]),MEe={__name:"search-dosage-duration",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","durationSelected"],setup(e,{emit:t}){const n=e,a=t,r=R(!1),s=R([]),o=R(""),l=R(""),c=R(!1);let f=null,d=!0;const A=g=>{o.value=g},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&h("*")},p=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&h("*")};Ge(l,g=>{typeof g=="string"?(a("update:modelValue",g),a("durationSelected",{duration:g,isUserTyped:!0,isFromHistory:!1})):g&&typeof g=="object"?(a("update:modelValue",g.duration),a("durationSelected",g)):g||(a("update:modelValue",""),a("durationSelected",null))}),Ge(o,g=>{if(f&&clearTimeout(f),c.value=!1,!g||g.length<1){r.value=!1,s.value=[];return}f=setTimeout(()=>{h(g)},300)}),Ge(()=>n.modelValue,g=>{g!==l.value&&(l.value=g)},{immediate:!0}),Ge([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?h(o.value):n.medicineId&&h("*")});const h=async g=>{const _=g==="*"||g==="FOCUS";if(!(!_&&(!g||g.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const S=_?"*":g,B=await it.get(`/medicine/search_dosage_duration/${encodeURIComponent(S)}`,{params:b});if(!d)return;if(B.data.success&&B.data.data.dosage_durations){const F=B.data.data.dosage_durations.filter(T=>T&&T.trim().length>0).map(T=>({duration:T,isFromHistory:!0}));s.value=F,F.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage durations:",b),c.value=!0}finally{d&&(r.value=!1)}}},y=ee(()=>!o.value||o.value.length<1?"Click to see all duration history, or start typing to search":r.value?"Searching duration history...":c.value?"No matches found in duration history. You can still type custom duration.":"");return ha(()=>{d=!1,f&&(clearTimeout(f),f=null)}),(g,_)=>{const b=I("v-icon"),S=I("v-tooltip"),B=I("v-combobox");return P(),he(B,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=F=>l.value=F),items:s.value,search:o.value,"onUpdate:search":A,onClick:m,onFocus:p,"item-title":"duration","item-value":"duration",label:"Duration",placeholder:"Type or search duration...",variant:"outlined",loading:r.value,"no-data-text":y.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-duration-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[i(S,{text:"Duration e.g. 5 days",location:"top"},{activator:u(({props:F})=>[i(b,Ie(F,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[..._[1]||(_[1]=[N(" mdi-calendar-range ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},OEe=en(MEe,[["__scopeId","data-v-f773064d"]]),HEe={__name:"search-dosage-instructions",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","instructionsSelected"],setup(e,{emit:t}){const n=e,a=t,r=R(!1),s=R([]),o=R(""),l=R(""),c=R(!1);let f=null,d=!0;const A=g=>{o.value=g},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&h("*")},p=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&h("*")};Ge(l,g=>{typeof g=="string"?(a("update:modelValue",g),a("instructionsSelected",{instructions:g,isUserTyped:!0,isFromHistory:!1})):g&&typeof g=="object"?(a("update:modelValue",g.instructions),a("instructionsSelected",g)):g||(a("update:modelValue",""),a("instructionsSelected",null))}),Ge(o,g=>{if(f&&clearTimeout(f),c.value=!1,!g||g.length<1){r.value=!1,s.value=[];return}f=setTimeout(()=>{h(g)},300)}),Ge(()=>n.modelValue,g=>{g!==l.value&&(l.value=g)},{immediate:!0}),Ge([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?h(o.value):n.medicineId&&h("*")});const h=async g=>{const _=g==="*"||g==="FOCUS";if(!(!_&&(!g||g.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const S=_?"*":g,B=await it.get(`/medicine/search_dosage_instructions/${encodeURIComponent(S)}`,{params:b});if(!d)return;if(B.data.success&&B.data.data.dosage_instructions){const F=B.data.data.dosage_instructions.filter(T=>T&&T.trim().length>0).map(T=>({instructions:T,isFromHistory:!0}));s.value=F,F.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage instructions:",b),c.value=!0}finally{d&&(r.value=!1)}}},y=ee(()=>!o.value||o.value.length<1?"Click to see all instruction history, or start typing to search":r.value?"Searching instruction history...":c.value?"No matches found in instruction history. You can still type custom instructions.":"");return ha(()=>{d=!1,f&&(clearTimeout(f),f=null)}),(g,_)=>{const b=I("v-icon"),S=I("v-tooltip"),B=I("v-combobox");return P(),he(B,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=F=>l.value=F),items:s.value,search:o.value,"onUpdate:search":A,onClick:m,onFocus:p,"item-title":"instructions","item-value":"instructions",label:"Instructions",placeholder:"Type or search instructions...",variant:"outlined",loading:r.value,"no-data-text":y.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-instructions-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[i(S,{text:"Instructions e.g. on empty stomach",location:"top"},{activator:u(({props:F})=>[i(b,Ie(F,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[..._[1]||(_[1]=[N(" mdi-information-outline ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},$Ee=en(HEe,[["__scopeId","data-v-73718740"]]),DH={__name:"edit-medicine",props:{medicine:{type:Object,required:!0},mode:{type:String,default:"consultation",validator:e=>["consultation","pharmacy"].includes(e)}},emits:["close","update:medicine"],setup(e,{emit:t}){const n=e,a=t,r=R(xT),s=ee(()=>n.mode==="pharmacy"),o=R({productName:"",marketer:"",saltComposition:"",productForm:"",group:"",hsnCode:"",alertUnits:0}),l=R(!1),c=A=>{A&&(o.value={productName:A.productName||"",marketer:A.marketer||"",saltComposition:A.saltComposition||"",productForm:A.productForm||"",group:A.group||"",hsnCode:A.hsnCode||"",alertUnits:A.alertUnits!==void 0&&A.alertUnits!==null?A.alertUnits:0},console.log("Edit medicine form populated from:",A),console.log("Edit medicine form populated to:",o.value))};Ge(()=>n.medicine,A=>{c(A)},{immediate:!0,deep:!0}),Ge(()=>n.medicine?.id,A=>{A&&n.medicine&&c(n.medicine)},{immediate:!0});const f=()=>{a("close")},d=async()=>{const A={productName:o.value.productName,marketer:o.value.marketer||"",saltComposition:o.value.saltComposition||"",productForm:o.value.productForm,group:o.value.group||""};s.value&&(A.hsnCode=o.value.hsnCode||"",A.alertUnits=o.value.alertUnits||0,A.isPharmacy=!0);const m=await dEe(n.medicine.id,A);if(m.error)console.error("Error updating medicine:",m.error);else{const p=m.data||{...n.medicine,...A};a("update:medicine",p),f()}};return(A,m)=>{const p=I("v-card-title"),h=I("v-col"),y=I("v-icon"),g=I("v-btn"),_=I("v-row"),b=I("v-card"),S=I("v-text-field"),B=I("v-combobox"),F=I("v-divider"),T=I("v-form");return P(),he(b,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(_,{"no-gutters":""},{default:u(()=>[i(h,{cols:"12"},{default:u(()=>[i(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(_,{"no-gutters":""},{default:u(()=>[i(h,{cols:"11"},{default:u(()=>[i(p,{class:"pa-0 pl-2"},{default:u(()=>[...m[8]||(m[8]=[N("Edit Medicine",-1)])]),_:1})]),_:1}),i(h,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(g,{icon:"",size:"x-small",onClick:f},{default:u(()=>[i(y,null,{default:u(()=>[...m[9]||(m[9]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(_,{"no-gutters":""},{default:u(()=>[i(h,{cols:"12"},{default:u(()=>[i(b,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(T,{modelValue:l.value,"onUpdate:modelValue":m[7]||(m[7]=E=>l.value=E),"validate-on":"blur"},{default:u(()=>[i(_,{"no-gutters":""},{default:u(()=>[i(h,{cols:"12"},{default:u(()=>[i(S,{label:"Trade Name *",density:"compact",modelValue:o.value.productName,"onUpdate:modelValue":m[0]||(m[0]=E=>o.value.productName=E),rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(h,{cols:"12"},{default:u(()=>[i(B,{label:"Product Form *",density:"compact",items:r.value,rules:Oe(Cr),modelValue:o.value.productForm,"onUpdate:modelValue":m[1]||(m[1]=E=>o.value.productForm=E),clearable:""},null,8,["items","rules","modelValue"])]),_:1}),i(h,{cols:"12"},{default:u(()=>[i(S,{label:"Company Name",density:"compact",modelValue:o.value.marketer,"onUpdate:modelValue":m[2]||(m[2]=E=>o.value.marketer=E)},null,8,["modelValue"])]),_:1}),i(h,{cols:"12"},{default:u(()=>[i(S,{label:"Salt Composition",density:"compact",modelValue:o.value.saltComposition,"onUpdate:modelValue":m[3]||(m[3]=E=>o.value.saltComposition=E)},null,8,["modelValue"])]),_:1}),i(h,{cols:"12"},{default:u(()=>[i(S,{label:"Group",density:"compact",modelValue:o.value.group,"onUpdate:modelValue":m[4]||(m[4]=E=>o.value.group=E)},null,8,["modelValue"])]),_:1}),s.value?(P(),Ae(ze,{key:0},[i(h,{cols:"12"},{default:u(()=>[i(S,{label:"HSN Code",density:"compact",modelValue:o.value.hsnCode,"onUpdate:modelValue":m[5]||(m[5]=E=>o.value.hsnCode=E),hint:"4-8 digits, alphanumeric","persistent-hint":""},null,8,["modelValue"])]),_:1}),i(h,{cols:"12"},{default:u(()=>[i(S,{label:"Alert Units",density:"compact",type:"number",modelValue:o.value.alertUnits,"onUpdate:modelValue":m[6]||(m[6]=E=>o.value.alertUnits=E),modelModifiers:{number:!0},hint:"Low stock alert threshold","persistent-hint":"",rules:[E=>E>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"])]),_:1})],64)):ge("",!0)]),_:1}),i(F),i(_,{"no-gutters":""},{default:u(()=>[i(h,{cols:"2"}),i(h,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(g,{variant:"outlined",onClick:d,disabled:!l.value},{default:u(()=>[...m[10]||(m[10]=[N("Update",-1)])]),_:1},8,["disabled"])]),_:1}),i(h,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},BT={__name:"create-medicine",props:{mode:{type:String,default:"consultation",validator:e=>["consultation","pharmacy"].includes(e)}},emits:["close","update:medicinelist","medicine-created"],setup(e,{emit:t}){const n=e,a=t,r=R(xT),s=R({productName:"",marketer:"",saltComposition:"",productForm:"",group:"",hsnCode:"",alertUnits:0}),o=ee(()=>n.mode==="pharmacy"),l=R(!1),c=()=>{a("close")},f=async d=>{const A={productName:d.productName,marketer:d.marketer||"",saltComposition:d.saltComposition||"",productForm:d.productForm,group:d.group||""};o.value&&(A.hsnCode=d.hsnCode||"",A.alertUnits=d.alertUnits||0,A.isPharmacy=!0);const m=await IH(A);m.error?console.error("Error creating medicine:",m.error):(a("update:medicinelist",m.data),a("medicine-created",m.data),c())};return(d,A)=>{const m=I("v-card-title"),p=I("v-col"),h=I("v-icon"),y=I("v-btn"),g=I("v-row"),_=I("v-card"),b=I("v-text-field"),S=I("v-combobox"),B=I("v-divider"),F=I("v-form");return P(),he(_,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(g,{"no-gutters":""},{default:u(()=>[i(p,{cols:"12"},{default:u(()=>[i(_,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(g,{"no-gutters":""},{default:u(()=>[i(p,{cols:"11"},{default:u(()=>[i(m,{class:"pa-0 pl-2"},{default:u(()=>[...A[9]||(A[9]=[N("Create New Medicine",-1)])]),_:1})]),_:1}),i(p,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(y,{icon:"",size:"x-small",onClick:c},{default:u(()=>[i(h,null,{default:u(()=>[...A[10]||(A[10]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(g,{"no-gutters":""},{default:u(()=>[i(p,{cols:"12"},{default:u(()=>[i(_,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(F,{modelValue:l.value,"onUpdate:modelValue":A[8]||(A[8]=T=>l.value=T),"validate-on":"blur"},{default:u(()=>[i(g,{"no-gutters":""},{default:u(()=>[i(p,{cols:"12"},{default:u(()=>[i(b,{label:"Trade Name *",density:"compact",modelValue:s.value.productName,"onUpdate:modelValue":A[0]||(A[0]=T=>s.value.productName=T),rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(p,{cols:"12"},{default:u(()=>[i(S,{label:"Product Form *",density:"compact",items:r.value,rules:Oe(Cr),modelValue:s.value.productForm,"onUpdate:modelValue":A[1]||(A[1]=T=>s.value.productForm=T),clearable:""},null,8,["items","rules","modelValue"])]),_:1}),i(p,{cols:"12"},{default:u(()=>[i(b,{label:"Company Name",density:"compact",modelValue:s.value.marketer,"onUpdate:modelValue":A[2]||(A[2]=T=>s.value.marketer=T)},null,8,["modelValue"])]),_:1}),i(p,{cols:"12"},{default:u(()=>[i(b,{label:"Salt Composition",density:"compact",modelValue:s.value.saltComposition,"onUpdate:modelValue":A[3]||(A[3]=T=>s.value.saltComposition=T)},null,8,["modelValue"])]),_:1}),i(p,{cols:"12"},{default:u(()=>[i(b,{label:"Group",density:"compact",modelValue:s.value.group,"onUpdate:modelValue":A[4]||(A[4]=T=>s.value.group=T)},null,8,["modelValue"])]),_:1}),o.value?(P(),Ae(ze,{key:0},[i(p,{cols:"12"},{default:u(()=>[i(b,{label:"HSN Code",density:"compact",modelValue:s.value.hsnCode,"onUpdate:modelValue":A[5]||(A[5]=T=>s.value.hsnCode=T),hint:"4-8 digits, alphanumeric","persistent-hint":""},null,8,["modelValue"])]),_:1}),i(p,{cols:"12"},{default:u(()=>[i(b,{label:"Alert Units",density:"compact",type:"number",modelValue:s.value.alertUnits,"onUpdate:modelValue":A[6]||(A[6]=T=>s.value.alertUnits=T),modelModifiers:{number:!0},hint:"Low stock alert threshold","persistent-hint":"",rules:[T=>T>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"])]),_:1})],64)):ge("",!0)]),_:1}),i(B),i(g,{"no-gutters":""},{default:u(()=>[i(p,{cols:"2"}),i(p,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(y,{variant:"outlined",onClick:A[7]||(A[7]=T=>f(s.value)),disabled:!l.value},{default:u(()=>[...A[11]||(A[11]=[N("Create",-1)])]),_:1},8,["disabled"])]),_:1}),i(p,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},QEe={class:"transcription-container pa-4"},GEe={key:0,class:"text-center"},zEe={key:1,class:"text-center"},WEe={key:2,class:"text-center"},KEe={key:3,class:"transcription-text"},jEe={class:"text-body-1 mb-0 text-white"},qEe={key:4,class:"text-center text-medium-emphasis"},YEe={key:0,class:"d-flex justify-center mb-4"},XEe={__name:"dictation-modal",props:{modelValue:{type:Boolean,default:!1},currentText:{type:String,default:""},label:{type:String,default:"Dictation"}},emits:["update:modelValue","transcriptionComplete","transcriptionUpdate"],setup(e,{emit:t}){const n=e,a=t,r=R(!1),s=R(!1),o=R(!1),l=R(!1),c=R("");window.dictationModalActive=!1;let f=null,d=null,A=null,m=null;Ge(()=>n.modelValue,T=>{r.value=T,window.dictationModalActive=T,T&&(c.value="",setTimeout(()=>{b()},300))}),Ge(r,T=>{a("update:modelValue",T),window.dictationModalActive=T,T||F()});const p=()=>o.value?"Requesting permission...":l.value?"Connecting...":s.value?"Recording...":"Processing...",h=T=>{if(!r.value)return;const E=T.target;E&&(E.isContentEditable||["INPUT","TEXTAREA","SELECT"].includes(E.tagName))||T.repeat||(window.dictationModalActive=!0,T.key==="Enter"?(T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation(),s.value?S():B()):T.key==="Escape"&&(T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation(),s.value&&S()),setTimeout(()=>{window.dictationModalActive=!1},10))};An(()=>{document.addEventListener("keydown",h,{capture:!0})});const y=()=>{if(m&&(clearTimeout(m),m=null),f){if(f.readyState===WebSocket.OPEN)try{f.send(JSON.stringify({action:"close"}))}catch(T){console.warn("Error sending close message to WebSocket:",T)}f.close(),f=null}};Ri(()=>{document.removeEventListener("keydown",h,{capture:!0}),y(),F()});const g=async()=>{try{return"permissions"in navigator?(await navigator.permissions.query({name:"microphone"})).state:"unknown"}catch(T){return console.log("Permissions API not available:",T),"unknown"}},_=async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})).getTracks().forEach(E=>E.stop()),!0}catch(T){throw console.error("Failed to get microphone access:",T),T}},b=async()=>{if(!(s.value||o.value||l.value))try{if(o.value=!0,await g()==="denied"){alert("Microphone access is blocked. Please enable microphone permissions in your browser settings and refresh the page.");return}await _(),A=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:16e3}}),o.value=!1,l.value=!0,c.value="";const E=Ore();f=new WebSocket(E),m=setTimeout(()=>{f.readyState!==WebSocket.OPEN&&(console.error("WebSocket connection timeout"),alert("Connection timeout. Please check your network connection and try again."),F(),B())},1e4),f.onopen=()=>{m&&(clearTimeout(m),m=null),f.send(JSON.stringify({action:"open"})),d=new MediaRecorder(A),d.ondataavailable=x=>{if(x.data.size>0&&f.readyState===WebSocket.OPEN){const C=new FileReader;C.onload=()=>{const D=C.result.split(",")[1];f.send(JSON.stringify({action:"audio_data",data:D}))},C.readAsDataURL(x.data)}},d.start(1e3),l.value=!1,s.value=!0},f.onmessage=x=>{try{const C=JSON.parse(x.data);if(console.log("WebSocket message received:",C),C.status==="transcription")C.type==="interim"?(c.value=C.fullText+(C.text?" "+C.text:""),a("transcriptionUpdate",c.value),console.log("Interim transcription updated:",c.value)):C.type==="final"&&(c.value=C.fullText,a("transcriptionUpdate",c.value),console.log("Final transcription updated:",c.value));else if(C.status==="completed"){console.log("Received transcription:",C.transcription),console.log("Received summary:",C.summary);const D=(C.summary||C.transcription||"").trim();c.value="Processing complete...",setTimeout(()=>{a("transcriptionComplete",D),B()},1e3),f.close()}else C.status==="error"&&(console.error("WebSocket error:",C.message),f.close())}catch{console.log("Received message:",x.data)}},f.onerror=x=>{console.error("WebSocket error:",x),m&&(clearTimeout(m),m=null),l.value=!1,F()},f.onclose=()=>{m&&(clearTimeout(m),m=null),l.value=!1,s.value=!1}}catch(T){console.error("Error starting recording:",T),o.value=!1,l.value=!1,m&&(clearTimeout(m),m=null);let E="Unable to access microphone. ";T.name==="NotAllowedError"?E+="Please allow microphone access in your browser settings and try again.":T.name==="NotFoundError"?E+="No microphone found on this device.":T.name==="NotSupportedError"?E+="Microphone is not supported in this browser.":T.name==="NotReadableError"?E+="Microphone is already in use by another application.":E+="Please check your permissions and try again.",alert(E),B()}},S=()=>{s.value&&(d&&d.state==="recording"&&d.stop(),f&&f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({action:"close"})),s.value=!1)},B=()=>{F(),r.value=!1},F=()=>{m&&(clearTimeout(m),m=null),d&&d.state==="recording"&&d.stop(),A&&(A.getTracks().forEach(T=>T.stop()),A=null),f&&f.readyState===WebSocket.OPEN&&f.close(),f=null,d=null,s.value=!1,o.value=!1,l.value=!1};return(T,E)=>{const x=I("v-icon"),C=I("v-card-title"),D=I("v-col"),U=I("v-btn"),L=I("v-row"),H=I("v-card"),oe=I("v-progress-circular"),de=I("v-sheet"),te=I("v-dialog");return P(),he(te,{modelValue:r.value,"onUpdate:modelValue":E[0]||(E[0]=q=>r.value=q),persistent:"","max-width":"500px"},{default:u(()=>[i(H,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[i(L,{"no-gutters":""},{default:u(()=>[i(D,{cols:"12"},{default:u(()=>[i(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(L,{"no-gutters":""},{default:u(()=>[i(D,{cols:"11"},{default:u(()=>[i(C,{class:"pa-0 pl-2"},{default:u(()=>[i(x,{class:lt([{"recording-pulse":s.value},"mr-2"]),color:s.value?"error":l.value?"warning":"primary"},{default:u(()=>[...E[1]||(E[1]=[N(" mdi-microphone ",-1)])]),_:1},8,["class","color"]),N(" "+K(p()),1)]),_:1})]),_:1}),i(D,{cols:"1"},{default:u(()=>[i(U,{icon:"",size:"x-small",onClick:B},{default:u(()=>[i(x,null,{default:u(()=>[...E[2]||(E[2]=[v("img",{src:su,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(L,{"no-gutters":""},{default:u(()=>[i(D,{cols:"12"},{default:u(()=>[i(H,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[v("div",QEe,[i(de,{class:lt(["transcription-display pa-4",{"transcription-active":s.value}]),rounded:"lg",color:"surface-variant","min-height":"150"},{default:u(()=>[o.value?(P(),Ae("div",GEe,[i(oe,{indeterminate:"",color:"primary",class:"mb-3"}),E[3]||(E[3]=v("p",{class:"text-body-1 text-medium-emphasis"},"Requesting microphone permission...",-1))])):l.value?(P(),Ae("div",zEe,[i(oe,{indeterminate:"",color:"primary",class:"mb-3"}),E[4]||(E[4]=v("p",{class:"text-body-1 text-medium-emphasis"},"Connecting to transcription service...",-1))])):s.value&&!c.value?(P(),Ae("div",WEe,[...E[5]||(E[5]=[v("div",{class:"listening-indicator mb-3"},[v("div",{class:"listening-dots"},[v("span"),v("span"),v("span")])],-1),v("p",{class:"text-body-1 text-white"},"Listening... Start speaking now",-1)])])):c.value?(P(),Ae("div",KEe,[v("p",jEe,K(c.value),1)])):(P(),Ae("div",qEe,[...E[6]||(E[6]=[v("p",{class:"text-body-1"},"Preparing to record...",-1)])]))]),_:1},8,["class"])]),s.value?(P(),Ae("div",YEe,[i(U,{color:"error",variant:"outlined",onClick:S,size:"large",class:"stop-recording-btn"},{default:u(()=>[i(x,null,{default:u(()=>[...E[7]||(E[7]=[N("mdi-stop",-1)])]),_:1}),E[8]||(E[8]=N(" Stop Dictation ",-1))]),_:1})])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},l0=en(XEe,[["__scopeId","data-v-c1bafded"]]),UH=async e=>{try{return{data:(await it.post("/vitals",e)).data.data.vitals,error:null}}catch(t){return console.error("Error creating vitals:",t),{data:null,error:t}}},JEe=async e=>{try{return{data:(await it.get(`/vitals/consultation/${e}`)).data.data.vitals,error:null}}catch(t){return console.error("Error fetching vitals:",t),{data:null,error:t}}},RH=async(e,t=10,n=0)=>{try{return{data:(await it.get(`/vitals/patient/${e}?limit=${t}&offset=${n}`)).data.data.vitals,error:null}}catch(a){return console.error("Error fetching patient vitals history:",a),{data:[],error:a}}},NH=async(e,t)=>{try{return{data:(await it.put(`/vitals/consultation/${e}`,t)).data.data.vitals,error:null}}catch(n){return console.error("Error updating vitals:",n),{data:null,error:n}}},VH=async(e,t,n)=>{try{const a=await UH({consultationId:e,patientId:t,...n});return a.error&&a.error.response?.status===400?await NH(e,n):a}catch(a){return console.error("Error saving vitals:",a),{data:null,error:a}}},Zr=(e,t)=>e==null||e===""?"":`${e} ${t}`,v_=(e,t)=>{if(!t)return{isNormal:null,range:""};const a={pulse:{min:60,max:100,range:"60-100 bpm"},systolicBP:{min:90,max:120,range:"90-120 mmHg"},diastolicBP:{min:60,max:80,range:"60-80 mmHg"},respiratoryRate:{min:12,max:20,range:"12-20 breaths/min"},temperature:{min:36.1,max:37.2,range:"36.1-37.2C"},serumBilirubin:{min:.2,max:1.2,range:"0.2-1.2 mg/dL"},bloodGlucoseFF:{min:70,max:100,range:"70-100 mg/dL"},bloodGlucosePP:{min:0,max:140,range:"<140 mg/dL"},bloodGlucoseRandom:{min:0,max:200,range:"<200 mg/dL"},serumCreatinine:{min:.7,max:1.3,range:"0.7-1.3 mg/dL"}}[e];return a?{isNormal:t>=a.min&&t<=a.max,range:a.range}:{isNormal:null,range:""}},ZEe=Object.freeze(Object.defineProperty({__proto__:null,createVitals:UH,fetchVitalsByConsultation:JEe,fetchVitalsByPatient:RH,formatVitalWithUnit:Zr,isVitalInNormalRange:v_,saveVitals:VH,updateVitals:NH},Symbol.toStringTag,{value:"Module"})),LE="vitalsPreferences",wp={pulse:!0,bloodPressure:!0,temperature:!0,respiratoryRate:!0,height:!1,weight:!0,serumBilirubin:!1,bloodGlucoseFF:!1,bloodGlucosePP:!1,bloodGlucoseRandom:!1,serumCreatinine:!1},TT=e=>{try{if(!e)return console.warn("Doctor ID is required to get vitals preferences"),{...wp};const t=localStorage.getItem(LE);if(!t)return{...wp};const a=JSON.parse(t)[e];return a?{...wp,...a,weight:!0}:{...wp}}catch(t){return console.error("Error getting vitals preferences:",t),{...wp}}},eke=(e,t)=>{try{if(!e)return console.error("Doctor ID is required to save vitals preferences"),!1;if(!t||typeof t!="object")return console.error("Valid preferences object is required"),!1;let n={};const a=localStorage.getItem(LE);a&&(n=JSON.parse(a));const r={...t,weight:!0};return n[e]=r,localStorage.setItem(LE,JSON.stringify(n)),console.log(`Vitals preferences saved for doctor ${e}:`,r),!0}catch(n){return console.error("Error saving vitals preferences:",n),!1}},tke={__name:"add-edit-vitals",props:{consultation:{type:Object,required:!0},patient:{type:Object,required:!0},existingVitals:{type:Object,default:null}},emits:["close","vitals-saved"],setup(e,{emit:t}){const n=e,a=t,r=Ln(),s=R(!1),o=R(!1),l=ee(()=>r.state.doctorModule.doctorId),c=R({}),f=()=>{const te=l.value;te&&(c.value=TT(te),console.log("Loaded vitals preferences:",c.value))},d=R({pulse:null,systolicBP:null,diastolicBP:null,respiratoryRate:null,weight:null,height:null,temperature:null,serumBilirubin:null,bloodGlucoseFF:null,bloodGlucosePP:null,bloodGlucoseRandom:null,serumCreatinine:null}),A=ee(()=>!!n.existingVitals),m=ee(()=>Object.values(d.value).some(te=>te!=null&&te!=="")),p=ee(()=>c.value.pulse===!0),h=ee(()=>c.value.bloodPressure===!0),y=ee(()=>c.value.temperature===!0),g=ee(()=>c.value.respiratoryRate===!0),_=ee(()=>!0),b=ee(()=>c.value.height===!0),S=ee(()=>c.value.serumBilirubin===!0),B=ee(()=>c.value.bloodGlucoseFF===!0),F=ee(()=>c.value.bloodGlucosePP===!0),T=ee(()=>c.value.bloodGlucoseRandom===!0),E=ee(()=>c.value.serumCreatinine===!0),x=ee(()=>S.value||B.value||F.value||T.value||E.value),C=[te=>!te||!isNaN(te)&&te>0||"Must be a positive number"],D=[te=>!te||!isNaN(te)&&te>0&&te<50||"Must be a valid temperature"],U=[te=>!te||!isNaN(te)&&te>=0&&te<=20||"Must be between 0-20 mg/dL"],L=[te=>!te||!isNaN(te)&&te>=30&&te<=600||"Must be between 30-600 mg/dL"],H=[te=>!te||!isNaN(te)&&te>=.1&&te<=10||"Must be between 0.1-10 mg/dL"],oe=()=>{a("close")},de=async()=>{if(m.value){o.value=!0;try{const te={};Object.keys(d.value).forEach(ce=>{const le=d.value[ce];le!=null&&le!==""&&(te[ce]=parseFloat(le))});const q=await VH(n.consultation.id,n.patient.id,te);q.error?console.error("Error saving vitals:",q.error):(a("vitals-saved",q.data),oe())}catch(te){console.error("Error saving vitals:",te)}finally{o.value=!1}}};return An(()=>{f(),n.existingVitals&&Object.keys(d.value).forEach(te=>{n.existingVitals[te]!==null&&n.existingVitals[te]!==void 0&&(d.value[te]=n.existingVitals[te])})}),(te,q)=>{const ce=I("v-card-title"),le=I("v-col"),Z=I("v-icon"),ne=I("v-btn"),G=I("v-row"),W=I("v-card"),Q=I("v-text-field"),O=I("v-subheader"),ae=I("v-divider"),j=I("v-form");return P(),he(W,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(G,{"no-gutters":""},{default:u(()=>[i(le,{cols:"12"},{default:u(()=>[i(W,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(G,{"no-gutters":""},{default:u(()=>[i(le,{cols:"11"},{default:u(()=>[i(ce,{class:"pa-0 pl-2"},{default:u(()=>[N(K(A.value?"Edit Vitals":"Add Vitals"),1)]),_:1})]),_:1}),i(le,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(ne,{icon:"",size:"x-small",onClick:oe},{default:u(()=>[i(Z,null,{default:u(()=>[...q[13]||(q[13]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(G,{"no-gutters":""},{default:u(()=>[i(le,{cols:"12"},{default:u(()=>[i(W,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(j,{modelValue:s.value,"onUpdate:modelValue":q[12]||(q[12]=J=>s.value=J),"validate-on":"blur"},{default:u(()=>[i(G,{"no-gutters":""},{default:u(()=>[p.value?(P(),he(le,{key:0,cols:"6",class:"pr-1"},{default:u(()=>[i(Q,{label:"Pulse (bpm)",density:"compact",type:"number",modelValue:d.value.pulse,"onUpdate:modelValue":q[0]||(q[0]=J=>d.value.pulse=J),rules:C,suffix:"bpm",hint:"Normal range: 60-100 bpm","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):ge("",!0),g.value?(P(),he(le,{key:1,cols:p.value?6:12,class:lt(p.value?"pl-1":"")},{default:u(()=>[i(Q,{label:"Respiratory Rate",density:"compact",type:"number",modelValue:d.value.respiratoryRate,"onUpdate:modelValue":q[1]||(q[1]=J=>d.value.respiratoryRate=J),rules:C,suffix:"breaths/min",hint:"Normal range: 12-20 breaths/min","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ge("",!0)]),_:1}),h.value?(P(),he(G,{key:0,"no-gutters":""},{default:u(()=>[i(le,{cols:"6",class:"pr-1"},{default:u(()=>[i(Q,{label:"Systolic BP",density:"compact",type:"number",modelValue:d.value.systolicBP,"onUpdate:modelValue":q[2]||(q[2]=J=>d.value.systolicBP=J),rules:C,suffix:"mmHg",hint:"Normal: 90-120","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1}),i(le,{cols:"6",class:"pl-1"},{default:u(()=>[i(Q,{label:"Diastolic BP",density:"compact",type:"number",modelValue:d.value.diastolicBP,"onUpdate:modelValue":q[3]||(q[3]=J=>d.value.diastolicBP=J),rules:C,suffix:"mmHg",hint:"Normal: 60-80","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0),i(G,{"no-gutters":""},{default:u(()=>[_.value?(P(),he(le,{key:0,cols:"6",class:"pr-1"},{default:u(()=>[i(Q,{label:"Weight",density:"compact",type:"number",modelValue:d.value.weight,"onUpdate:modelValue":q[4]||(q[4]=J=>d.value.weight=J),rules:C,suffix:"kg",clearable:""},null,8,["modelValue"])]),_:1})):ge("",!0),b.value?(P(),he(le,{key:1,cols:_.value?6:12,class:lt(_.value?"pl-1":"")},{default:u(()=>[i(Q,{label:"Height",density:"compact",type:"number",modelValue:d.value.height,"onUpdate:modelValue":q[5]||(q[5]=J=>d.value.height=J),rules:C,suffix:"cm",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ge("",!0)]),_:1}),y.value?(P(),he(G,{key:1,"no-gutters":""},{default:u(()=>[i(le,{cols:"6",class:"pr-1"},{default:u(()=>[i(Q,{label:"Temperature",density:"compact",type:"number",step:"0.1",modelValue:d.value.temperature,"onUpdate:modelValue":q[6]||(q[6]=J=>d.value.temperature=J),rules:D,suffix:"C",hint:"Normal range: 36.1-37.2C","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0),x.value?(P(),he(G,{key:2,"no-gutters":"",class:"mt-4"},{default:u(()=>[i(le,{cols:"12"},{default:u(()=>[i(O,{class:"text-subtitle-2 font-weight-medium pa-0 mb-2"},{default:u(()=>[...q[14]||(q[14]=[N("Blood Chemistry",-1)])]),_:1})]),_:1})]),_:1})):ge("",!0),S.value||E.value?(P(),he(G,{key:3,"no-gutters":""},{default:u(()=>[S.value?(P(),he(le,{key:0,cols:E.value?6:12,class:lt(E.value?"pr-1":"")},{default:u(()=>[i(Q,{label:"Serum Bilirubin",density:"compact",type:"number",step:"0.1",modelValue:d.value.serumBilirubin,"onUpdate:modelValue":q[7]||(q[7]=J=>d.value.serumBilirubin=J),rules:U,suffix:"mg/dL",hint:"Normal range: 0.2-1.2 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ge("",!0),E.value?(P(),he(le,{key:1,cols:S.value?6:12,class:lt(S.value?"pl-1":"")},{default:u(()=>[i(Q,{label:"Serum Creatinine",density:"compact",type:"number",step:"0.1",modelValue:d.value.serumCreatinine,"onUpdate:modelValue":q[8]||(q[8]=J=>d.value.serumCreatinine=J),rules:H,suffix:"mg/dL",hint:"Normal range: 0.7-1.3 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ge("",!0)]),_:1})):ge("",!0),B.value||F.value||T.value?(P(),he(G,{key:4,"no-gutters":"",class:"mt-2"},{default:u(()=>[B.value?(P(),he(le,{key:0,cols:"4",class:"pr-1"},{default:u(()=>[i(Q,{label:"Blood Glucose (FF)",density:"compact",type:"number",modelValue:d.value.bloodGlucoseFF,"onUpdate:modelValue":q[9]||(q[9]=J=>d.value.bloodGlucoseFF=J),rules:L,suffix:"mg/dL",hint:"Normal: 70-100 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):ge("",!0),F.value?(P(),he(le,{key:1,cols:"4",class:lt([B.value?"px-1":"pr-1",T.value?"":"pl-0"])},{default:u(()=>[i(Q,{label:"Blood Glucose (PP)",density:"compact",type:"number",modelValue:d.value.bloodGlucosePP,"onUpdate:modelValue":q[10]||(q[10]=J=>d.value.bloodGlucosePP=J),rules:L,suffix:"mg/dL",hint:"Normal: <140 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["class"])):ge("",!0),T.value?(P(),he(le,{key:2,cols:"4",class:"pl-1"},{default:u(()=>[i(Q,{label:"Blood Glucose (Random)",density:"compact",type:"number",modelValue:d.value.bloodGlucoseRandom,"onUpdate:modelValue":q[11]||(q[11]=J=>d.value.bloodGlucoseRandom=J),rules:L,suffix:"mg/dL",hint:"Normal: <200 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):ge("",!0)]),_:1})):ge("",!0),i(ae,{class:"mt-3"}),i(G,{"no-gutters":""},{default:u(()=>[i(le,{cols:"2"}),i(le,{cols:"8",class:"mt-3 d-flex justify-center gap-2"},{default:u(()=>[i(ne,{variant:"outlined",onClick:oe},{default:u(()=>[...q[15]||(q[15]=[N("Cancel",-1)])]),_:1}),i(ne,{variant:"elevated",color:"primary",onClick:de,disabled:!m.value,loading:o.value},{default:u(()=>[N(K(A.value?"Update":"Save"),1)]),_:1},8,["disabled","loading"])]),_:1}),i(le,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},nke=en(tke,[["__scopeId","data-v-7bcda799"]]),ake={key:0,class:"d-flex justify-center align-center",style:{height:"200px"}},rke={key:1,class:"text-center pa-4"},ske={class:"text-error"},oke={key:2,class:"text-center pa-4"},ike={key:3},lke={class:"font-weight-medium"},uke={key:1,class:"text-grey"},cke={key:1,class:"text-grey"},dke={key:1,class:"text-grey"},fke={key:1,class:"text-grey"},Ake={key:0,class:"font-weight-medium"},mke={key:1,class:"text-grey"},vke={key:0,class:"font-weight-medium"},hke={key:1,class:"text-grey"},pke={key:1,class:"text-grey"},gke={key:1,class:"text-grey"},yke={key:1,class:"text-grey"},_ke={key:1,class:"text-grey"},wke={key:1,class:"text-grey"},bke={__name:"vitals-trends",props:{patientId:{type:[String,Number],required:!0},patientName:{type:String,default:"Patient"}},emits:["close"],setup(e){const t=e,n=Ln(),a=R([]),r=R(!1),s=R(null),o=ee(()=>n.state.doctorModule.doctorId),l=R({}),c=()=>{const g=o.value;g&&(l.value=TT(g),console.log("Loaded vitals preferences for trends:",l.value))},f=[{title:"Date",key:"date",width:"120px",alwaysShow:!0},{title:"Pulse",key:"pulse",width:"100px",vitalKey:"pulse"},{title:"Blood Pressure",key:"bloodPressure",width:"140px",vitalKey:"bloodPressure"},{title:"Temperature",key:"temperature",width:"120px",vitalKey:"temperature"},{title:"Respiratory Rate",key:"respiratoryRate",width:"140px",vitalKey:"respiratoryRate"},{title:"Weight",key:"weight",width:"100px",alwaysShow:!0},{title:"Height",key:"height",width:"100px",vitalKey:"height"},{title:"Serum Bilirubin",key:"serumBilirubin",width:"140px",vitalKey:"serumBilirubin"},{title:"Blood Glucose FF",key:"bloodGlucoseFF",width:"140px",vitalKey:"bloodGlucoseFF"},{title:"Blood Glucose PP",key:"bloodGlucosePP",width:"140px",vitalKey:"bloodGlucosePP"},{title:"Blood Glucose Random",key:"bloodGlucoseRandom",width:"160px",vitalKey:"bloodGlucoseRandom"},{title:"Serum Creatinine",key:"serumCreatinine",width:"140px",vitalKey:"serumCreatinine"}],d=ee(()=>f.filter(g=>{if(g.alwaysShow)return!0;const _=g.vitalKey;return l.value[_]===!0})),A=ee(()=>a.value.map(g=>({date:g.createdAt,pulse:g.pulse,systolicBP:g.systolicBP,diastolicBP:g.diastolicBP,temperature:g.temperature,respiratoryRate:g.respiratoryRate,weight:g.weight,height:g.height,bloodPressure:g.systolicBP&&g.diastolicBP?`${g.systolicBP}/${g.diastolicBP}`:null,serumBilirubin:g.serumBilirubin,bloodGlucoseFF:g.bloodGlucoseFF,bloodGlucosePP:g.bloodGlucosePP,bloodGlucoseRandom:g.bloodGlucoseRandom,serumCreatinine:g.serumCreatinine}))),m=async()=>{if(!t.patientId){s.value="Patient ID is required";return}r.value=!0,s.value=null;try{const g=await RH(t.patientId,50,0);if(g.error)throw new Error(g.error.message||"Failed to fetch vitals history");a.value=g.data||[]}catch(g){console.error("Error fetching vitals history:",g),s.value=g.message||"Failed to fetch vitals history"}finally{r.value=!1}},p=g=>{if(!g)return"";try{return mr(g)}catch(_){return console.error("Error formatting date:",g,_),g||""}},h=(g,_)=>{const b=v_(g,_);return b.isNormal===null?"grey":b.isNormal?"success":"warning"},y=(g,_)=>{const b=v_("systolicBP",g),S=v_("diastolicBP",_);return b.isNormal===null||S.isNormal===null?"grey":b.isNormal&&S.isNormal?"success":"warning"};return An(()=>{c(),m()}),(g,_)=>{const b=I("v-card-title"),S=I("v-col"),B=I("v-icon"),F=I("v-btn"),T=I("v-row"),E=I("v-card"),x=I("v-progress-circular"),C=I("v-chip"),D=I("v-data-table");return P(),he(E,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[i(T,{"no-gutters":""},{default:u(()=>[i(S,{cols:"12"},{default:u(()=>[i(E,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(T,{"no-gutters":""},{default:u(()=>[i(S,{cols:"11"},{default:u(()=>[i(b,{class:"pa-0 pl-2"},{default:u(()=>[N("Vitals Trends - "+K(e.patientName),1)]),_:1})]),_:1}),i(S,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(F,{icon:"",size:"x-small",onClick:_[0]||(_[0]=U=>g.$emit("close"))},{default:u(()=>[i(B,null,{default:u(()=>[..._[1]||(_[1]=[v("img",{src:su,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(T,{"no-gutters":""},{default:u(()=>[i(S,{cols:"12"},{default:u(()=>[i(E,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[r.value?(P(),Ae("div",ake,[i(x,{indeterminate:"",color:"primary"})])):s.value?(P(),Ae("div",rke,[i(B,{color:"error",size:"48",class:"mb-2"},{default:u(()=>[..._[2]||(_[2]=[N("mdi-alert-circle",-1)])]),_:1}),v("p",ske,K(s.value),1),i(F,{onClick:m,color:"primary",variant:"outlined"},{default:u(()=>[..._[3]||(_[3]=[N(" Try Again ",-1)])]),_:1})])):!a.value||a.value.length===0?(P(),Ae("div",oke,[i(B,{color:"grey",size:"48",class:"mb-2"},{default:u(()=>[..._[4]||(_[4]=[N("mdi-chart-line-variant",-1)])]),_:1}),_[5]||(_[5]=v("p",{class:"text-grey"},"No vitals history found for this patient",-1))])):(P(),Ae("div",ike,[i(D,{headers:d.value,items:A.value,"items-per-page":10,class:"elevation-1",density:"compact"},Dv({"item.date":u(({item:U})=>[v("span",lke,K(p(U.date)),1)]),"item.weight":u(({item:U})=>[U.weight?(P(),Ae("span",Ake,K(Oe(Zr)(U.weight,"kg")),1)):(P(),Ae("span",mke,"-"))]),_:2},[l.value.pulse?{name:"item.pulse",fn:u(({item:U})=>[U.pulse?(P(),he(C,{key:0,color:h("pulse",U.pulse),size:"small",variant:"tonal"},{default:u(()=>[N(K(Oe(Zr)(U.pulse,"bpm")),1)]),_:2},1032,["color"])):(P(),Ae("span",uke,"-"))]),key:"0"}:void 0,l.value.bloodPressure?{name:"item.bloodPressure",fn:u(({item:U})=>[U.systolicBP&&U.diastolicBP?(P(),he(C,{key:0,color:y(U.systolicBP,U.diastolicBP),size:"small",variant:"tonal"},{default:u(()=>[N(K(U.systolicBP)+"/"+K(U.diastolicBP)+" mmHg ",1)]),_:2},1032,["color"])):(P(),Ae("span",cke,"-"))]),key:"1"}:void 0,l.value.temperature?{name:"item.temperature",fn:u(({item:U})=>[U.temperature?(P(),he(C,{key:0,color:h("temperature",U.temperature),size:"small",variant:"tonal"},{default:u(()=>[N(K(Oe(Zr)(U.temperature,"C")),1)]),_:2},1032,["color"])):(P(),Ae("span",dke,"-"))]),key:"2"}:void 0,l.value.respiratoryRate?{name:"item.respiratoryRate",fn:u(({item:U})=>[U.respiratoryRate?(P(),he(C,{key:0,color:h("respiratoryRate",U.respiratoryRate),size:"small",variant:"tonal"},{default:u(()=>[N(K(Oe(Zr)(U.respiratoryRate,"breaths/min")),1)]),_:2},1032,["color"])):(P(),Ae("span",fke,"-"))]),key:"3"}:void 0,l.value.height?{name:"item.height",fn:u(({item:U})=>[U.height?(P(),Ae("span",vke,K(Oe(Zr)(U.height,"cm")),1)):(P(),Ae("span",hke,"-"))]),key:"4"}:void 0,l.value.serumBilirubin?{name:"item.serumBilirubin",fn:u(({item:U})=>[U.serumBilirubin?(P(),he(C,{key:0,color:h("serumBilirubin",U.serumBilirubin),size:"small",variant:"tonal"},{default:u(()=>[N(K(Oe(Zr)(U.serumBilirubin,"mg/dL")),1)]),_:2},1032,["color"])):(P(),Ae("span",pke,"-"))]),key:"5"}:void 0,l.value.bloodGlucoseFF?{name:"item.bloodGlucoseFF",fn:u(({item:U})=>[U.bloodGlucoseFF?(P(),he(C,{key:0,color:h("bloodGlucoseFF",U.bloodGlucoseFF),size:"small",variant:"tonal"},{default:u(()=>[N(K(Oe(Zr)(U.bloodGlucoseFF,"mg/dL")),1)]),_:2},1032,["color"])):(P(),Ae("span",gke,"-"))]),key:"6"}:void 0,l.value.bloodGlucosePP?{name:"item.bloodGlucosePP",fn:u(({item:U})=>[U.bloodGlucosePP?(P(),he(C,{key:0,color:h("bloodGlucosePP",U.bloodGlucosePP),size:"small",variant:"tonal"},{default:u(()=>[N(K(Oe(Zr)(U.bloodGlucosePP,"mg/dL")),1)]),_:2},1032,["color"])):(P(),Ae("span",yke,"-"))]),key:"7"}:void 0,l.value.bloodGlucoseRandom?{name:"item.bloodGlucoseRandom",fn:u(({item:U})=>[U.bloodGlucoseRandom?(P(),he(C,{key:0,color:h("bloodGlucoseRandom",U.bloodGlucoseRandom),size:"small",variant:"tonal"},{default:u(()=>[N(K(Oe(Zr)(U.bloodGlucoseRandom,"mg/dL")),1)]),_:2},1032,["color"])):(P(),Ae("span",_ke,"-"))]),key:"8"}:void 0,l.value.serumCreatinine?{name:"item.serumCreatinine",fn:u(({item:U})=>[U.serumCreatinine?(P(),he(C,{key:0,color:h("serumCreatinine",U.serumCreatinine),size:"small",variant:"tonal"},{default:u(()=>[N(K(Oe(Zr)(U.serumCreatinine,"mg/dL")),1)]),_:2},1032,["color"])):(P(),Ae("span",wke,"-"))]),key:"9"}:void 0]),1032,["headers","items"])]))]),_:1})]),_:1})]),_:1})]),_:1})}}},xke=en(bke,[["__scopeId","data-v-145a88d7"]]),cR="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16%2017V19H2V17S2%2013%209%2013%2016%2017%2016%2017M12.5%207.5A3.5%203.5%200%201%200%209%2011A3.5%203.5%200%200%200%2012.5%207.5M15.94%2013A5.32%205.32%200%200%201%2018%2017V19H22V17S22%2013.37%2015.94%2013M15%204A3.39%203.39%200%200%200%2013.07%204.59A5%205%200%200%201%2013.07%2010.41A3.39%203.39%200%200%200%2015%2011A3.5%203.5%200%200%200%2015%204Z'%20/%3e%3c/svg%3e",Cke={key:1,class:"text-caption text-medium-emphasis ml-4"},Ske={class:"text-body-2"},Eke={key:1,class:"text-caption text-medium-emphasis ml-4"},ME={__name:"referral-card",props:{referral:{type:Object,default:null},disabled:{type:Boolean,default:!1},type:{type:String,default:"both",validator:e=>["both","referredBy","referredTo"].includes(e)},inline:{type:Boolean,default:!1}},emits:["open-dialog"],setup(e){const t=e,n=ee(()=>t.type==="both"||t.type==="referredBy"),a=ee(()=>t.type==="both"||t.type==="referredTo"),r=ee(()=>t.type==="referredBy"?"Referred by":t.type==="referredTo"?"Referred to":"Referral"),s=ee(()=>t.type==="referredBy"?"No referred by recorded yet":t.type==="referredTo"?"No referred to recorded yet":"No referral recorded yet");return(o,l)=>{const c=I("v-card-subtitle"),f=I("v-chip"),d=I("v-col"),A=I("v-icon"),m=I("v-btn"),p=I("v-tooltip"),h=I("v-row"),y=I("v-card");return e.inline?(P(),he(h,{key:1,"no-gutters":"",class:"align-center py-2"},{default:u(()=>[i(d,{cols:"8",class:"d-flex align-center flex-wrap gap-2"},{default:u(()=>[v("span",Ske,[v("strong",null,K(r.value),1)]),e.referral&&(n.value&&e.referral.referredBy||a.value&&e.referral.referredTo)?(P(),Ae(ze,{key:0},[n.value&&e.referral.referredBy?(P(),he(f,{key:0,color:"primary","text-color":"black",size:"small",class:"ml-4"},{default:u(()=>[N(K(e.type==="both"?"Referred by: ":"")+K(e.referral.referredBy),1)]),_:1})):ge("",!0),a.value&&e.referral.referredTo?(P(),he(f,{key:1,color:"primary","text-color":"black",size:"small",class:"ml-4"},{default:u(()=>[N(K(e.type==="both"?"Referred to: ":"")+K(e.referral.referredTo),1)]),_:1})):ge("",!0)],64)):(P(),Ae("span",Eke," - "+K(s.value),1))]),_:1}),i(d,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[i(p,{text:e.referral?"Edit Referral":"Add Referral"},{activator:u(({props:g})=>[i(m,Ie({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},g,{disabled:e.disabled,onClick:l[1]||(l[1]=_=>o.$emit("open-dialog")),tabindex:"-1"}),{default:u(()=>[i(A,{start:""},{default:u(()=>[...l[3]||(l[3]=[v("img",{src:cR,alt:"Referral"},null,-1)])]),_:1}),N(" "+K(e.referral?"Update":"Add"),1)]),_:1},16,["disabled"])]),_:1},8,["text"])]),_:1})]),_:1})):(P(),he(y,{key:0,class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[i(h,{"no-gutters":""},{default:u(()=>[i(d,{cols:"8",class:"d-flex align-center flex-wrap gap-2"},{default:u(()=>[i(c,{class:"pa-0"},{default:u(()=>[v("strong",null,K(r.value),1)]),_:1}),e.referral&&(n.value&&e.referral.referredBy||a.value&&e.referral.referredTo)?(P(),Ae(ze,{key:0},[n.value&&e.referral.referredBy?(P(),he(f,{key:0,color:"primary","text-color":"black",size:"small",class:"ml-4"},{default:u(()=>[N(K(e.type==="both"?"Referred by: ":"")+K(e.referral.referredBy),1)]),_:1})):ge("",!0),a.value&&e.referral.referredTo?(P(),he(f,{key:1,color:"primary","text-color":"black",size:"small",class:"ml-4"},{default:u(()=>[N(K(e.type==="both"?"Referred to: ":"")+K(e.referral.referredTo),1)]),_:1})):ge("",!0)],64)):(P(),Ae("span",Cke," - "+K(s.value),1))]),_:1}),i(d,{cols:"4",class:"d-flex justify-end align-center gap-2"},{default:u(()=>[i(p,{text:e.referral?"Edit Referral":"Add Referral"},{activator:u(({props:g})=>[i(m,Ie({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},g,{disabled:e.disabled,onClick:l[0]||(l[0]=_=>o.$emit("open-dialog")),tabindex:"-1"}),{default:u(()=>[i(A,{start:""},{default:u(()=>[...l[2]||(l[2]=[v("img",{src:cR,alt:"Referral"},null,-1)])]),_:1}),N(" "+K(e.referral?"Update":"Add"),1)]),_:1},16,["disabled"])]),_:1},8,["text"])]),_:1})]),_:1})]),_:1}))}}},LH={__name:"add-edit-referral",props:{entityType:{type:String,required:!0,validator:e=>["consultation","treatmentPlan"].includes(e)},entityId:{type:[String,Number],required:!0},existingReferral:{type:Object,default:null},doctorId:{type:[String,Number],required:!0}},emits:["close","referral-saved"],setup(e,{emit:t}){const n=e,a=t,r=R(!0),s=R(!1),o=R(""),l=R(""),c=R(""),f=R(""),d=R([]),A=R([]),m=R(!1),p=R(!1);let h=null,y=null;const g=ee(()=>(o.value&&(typeof o.value=="string"?o.value:o.value?.name||""))?.trim()||""),_=ee(()=>(l.value&&(typeof l.value=="string"?l.value:l.value?.name||""))?.trim()||""),b=ee(()=>g.value.length>0||_.value.length>0),S=ee(()=>g.value||_.value?"":"At least one of Referred by or Referred to is required"),B=ee(()=>c.value?.trim()?m.value?"Searching...":"No matches. You can still type a new name.":"Start typing to search or type a new name"),F=ee(()=>f.value?.trim()?p.value?"Searching...":"No matches. You can still type a new name.":"Start typing to search or type a new name"),T=async(C,D)=>{if(!C?.trim()){D.value=[];return}try{const L=(await it.get(`referral/search-names/${encodeURIComponent(C)}`,{params:{doctor_id:n.doctorId}})).data?.data?.names||[];D.value=L.map(H=>({name:H}))}catch(U){console.error("Error fetching referral names:",U),D.value=[]}};Ge(c,C=>{if(h&&clearTimeout(h),!C?.trim()){m.value=!1,d.value=[];return}m.value=!0,h=setTimeout(async()=>{await T(C,d),m.value=!1},300)}),Ge(f,C=>{if(y&&clearTimeout(y),!C?.trim()){p.value=!1,A.value=[];return}p.value=!0,y=setTimeout(async()=>{await T(C,A),p.value=!1},300)}),Ge(()=>n.existingReferral,C=>{o.value=C?.referredBy||"",l.value=C?.referredTo||""},{immediate:!0});const E=()=>a("close"),x=async()=>{if(!(!b.value||!n.entityId)){s.value=!0;try{const C={referredBy:g.value,referredTo:_.value};n.entityType==="consultation"?C.consultationId=parseInt(n.entityId):C.treatmentPlanId=parseInt(n.entityId);const U=(await it.post("referral",C,{params:{doctor_id:n.doctorId}})).data?.data;a("referral-saved",{id:U?.id,referredBy:U?.referredBy||g.value,referredTo:U?.referredTo||_.value}),E()}catch(C){console.error("Error saving referral:",C)}finally{s.value=!1}}};return(C,D)=>{const U=I("v-card-title"),L=I("v-col"),H=I("v-icon"),oe=I("v-btn"),de=I("v-row"),te=I("v-card"),q=I("v-combobox"),ce=I("v-alert"),le=I("v-form");return P(),he(te,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(de,{"no-gutters":""},{default:u(()=>[i(L,{cols:"12"},{default:u(()=>[i(te,{rounded:"0",class:"pa-1 pb-4",color:"surfaceContainerHigh"},{default:u(()=>[i(de,{"no-gutters":""},{default:u(()=>[i(L,{cols:"11"},{default:u(()=>[i(U,{class:"pa-0 pl-2"},{default:u(()=>[N(K(e.existingReferral?"Edit Referral":"Add Referral"),1)]),_:1})]),_:1}),i(L,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(oe,{icon:"",size:"x-small",onClick:E},{default:u(()=>[i(H,null,{default:u(()=>[...D[5]||(D[5]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(de,{"no-gutters":""},{default:u(()=>[i(L,{cols:"12"},{default:u(()=>[i(te,{flat:"",class:"ma-2 pt-4 pb-2 overflow-visible",color:"surfaceContainer"},{default:u(()=>[i(le,{modelValue:r.value,"onUpdate:modelValue":D[4]||(D[4]=Z=>r.value=Z),onSubmit:gn(x,["prevent"])},{default:u(()=>[i(de,{"no-gutters":""},{default:u(()=>[i(L,{cols:"12",class:"mb-3"},{default:u(()=>[i(q,{modelValue:o.value,"onUpdate:modelValue":D[0]||(D[0]=Z=>o.value=Z),items:d.value,search:c.value,"onUpdate:search":D[1]||(D[1]=Z=>c.value=Z),"item-title":"name","item-value":"name",label:"Referred by",placeholder:"Search or type name...",variant:"outlined",loading:m.value,"no-data-text":B.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact"},null,8,["modelValue","items","search","loading","no-data-text"])]),_:1}),i(L,{cols:"12",class:"mb-2"},{default:u(()=>[i(q,{modelValue:l.value,"onUpdate:modelValue":D[2]||(D[2]=Z=>l.value=Z),items:A.value,search:f.value,"onUpdate:search":D[3]||(D[3]=Z=>f.value=Z),"item-title":"name","item-value":"name",label:"Referred to",placeholder:"Search or type name...",variant:"outlined",loading:p.value,"no-data-text":F.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact"},null,8,["modelValue","items","search","loading","no-data-text"])]),_:1}),S.value?(P(),he(L,{key:0,cols:"12",class:"mb-2"},{default:u(()=>[i(ce,{type:"warning",density:"compact",variant:"tonal"},{default:u(()=>[N(K(S.value),1)]),_:1})]),_:1})):ge("",!0),i(L,{cols:"12",class:"d-flex justify-end"},{default:u(()=>[i(oe,{variant:"outlined",onClick:E,class:"mr-4"},{default:u(()=>[...D[6]||(D[6]=[N("Cancel",-1)])]),_:1}),i(oe,{color:"primary",type:"submit",loading:s.value,disabled:!b.value},{default:u(()=>[...D[7]||(D[7]=[N(" Save ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},kke="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21,17H7V3H21M21,1H7A2,2%200%200,0%205,3V17A2,2%200%200,0%207,19H21A2,2%200%200,0%2023,17V3A2,2%200%200,0%2021,1M3,5H1V21A2,2%200%200,0%203,23H19V21H3M15.96,10.29L13.21,13.83L11.25,11.47L8.5,15H19.5L15.96,10.29Z'%20/%3e%3c/svg%3e",al={MAX_FILE_SIZE:25*1024*1024,MAX_FILES:15,ACCEPTED_IMAGE_TYPES:["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp"],ACCEPTED_DOCUMENT_TYPES:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/csv"],ACCEPTED_VIDEO_TYPES:["video/mp4","video/avi","video/mov","video/wmv"]},Ev=e=>{if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+n[a]},Bke=e=>al.ACCEPTED_IMAGE_TYPES.includes(e)?"image":al.ACCEPTED_DOCUMENT_TYPES.includes(e)?"document":al.ACCEPTED_VIDEO_TYPES.includes(e)?"video":"other",Tke=e=>{if(e.size>al.MAX_FILE_SIZE)return{success:!1,error:`File "${e.name}" is too large. Maximum size is ${Ev(al.MAX_FILE_SIZE)}. Current size: ${Ev(e.size)}`,type:"file_size"};const t=Bke(e.type);return t==="other"?{success:!1,error:`File "${e.name}" has unsupported file type: ${e.type}. Please use medical image formats (JPEG, PNG, etc.) or documents (PDF, Word, etc.)`,type:"file_type"}:{success:!0,file:e,category:t,size:e.size,formattedSize:Ev(e.size)}},Ike=e=>{const t=Array.from(e||[]);if(t.length>al.MAX_FILES)return{success:!1,error:`Too many files selected. Maximum allowed: ${al.MAX_FILES}. Selected: ${t.length}`,type:"file_count",validFiles:[],errors:[]};const n=[],a=[];let r=0;t.forEach((o,l)=>{const c=Tke(o);c.success?(n.push({file:o,index:l,category:c.category,size:c.size,formattedSize:c.formattedSize}),r+=o.size):a.push({index:l,fileName:o.name,error:c.error,type:c.type})});const s={totalFiles:t.length,validFiles:n.length,invalidFiles:a.length,totalSize:r,formattedTotalSize:Ev(r),categories:{}};return n.forEach(o=>{s.categories[o.category]=(s.categories[o.category]||0)+1}),{success:a.length===0,validFiles:n,errors:a,summary:s,hasWarnings:n.length>0&&a.length>0}},Fke=e=>{const t=[];if(e.success){const{summary:n}=e;t.push({type:"success",title:"Files Ready for Upload",message:`${n.validFiles} file(s) selected (${n.formattedTotalSize})`});const a=Object.keys(n.categories);if(a.length>1){const r=a.map(s=>`${n.categories[s]} ${s}${n.categories[s]>1?"s":""}`).join(", ");t.push({type:"info",title:"File Types",message:r})}}else e.hasWarnings?t.push({type:"warning",title:"Some Files Cannot Be Uploaded",message:`${e.validFiles.length} valid, ${e.errors.length} invalid`}):t.push({type:"error",title:"Upload Not Possible",message:"All selected files have validation errors"});return e.errors.forEach(n=>{t.push({type:"error",title:n.fileName,message:n.error})}),t},Pke=()=>({limits:{maxFiles:al.MAX_FILES,maxFileSize:Ev(al.MAX_FILE_SIZE),maxFileSizeBytes:al.MAX_FILE_SIZE},acceptedTypes:{images:"JPEG, PNG, GIF, BMP, WebP",documents:"PDF, Word documents, Text files",videos:"MP4, AVI, MOV, WMV"},recommendations:["For medical images: Use high-quality JPEG or PNG format","For X-rays and scans: Ensure images are clear and properly oriented","For documents: PDF format is preferred for reports and forms","Compress large files if possible while maintaining medical image quality"],warnings:[`Files larger than ${Ev(al.MAX_FILE_SIZE)} will be rejected`,`Maximum ${al.MAX_FILES} files can be uploaded at once`,"Unsupported file types will be automatically filtered out"]});function Dke(e,t){return t.forEach((function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach((function(a){if(a!=="default"&&!(a in e)){var r=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(e,a,r.get?r:{enumerable:!0,get:function(){return n[a]}})}}))})),Object.freeze(e)}function MH(e,t){return new Promise((function(n,a){let r;return Uke(e).then((function(s){try{return r=s,n(new Blob([t.slice(0,2),r,t.slice(2)],{type:"image/jpeg"}))}catch(o){return a(o)}}),a)}))}const Uke=e=>new Promise(((t,n)=>{const a=new FileReader;a.addEventListener("load",(({target:{result:r}})=>{const s=new DataView(r);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const l=s.getUint16(o);if(l===65498)break;const c=s.getUint16(o+2);if(l===65505&&s.getUint32(o+4)===1165519206){const f=o+10;let d;switch(s.getUint16(f)){case 18761:d=!0;break;case 19789:d=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(f+2,d)!==42)return n("TIFF header contains invalid version");const A=s.getUint32(f+4,d),m=f+A+2+12*s.getUint16(f+A,d);for(let p=f+A+2;p<m;p+=12)if(s.getUint16(p,d)==274){if(s.getUint16(p+2,d)!==3)return n("Orientation data type is invalid");if(s.getUint32(p+4,d)!==1)return n("Orientation data count is invalid");s.setUint16(p+8,1,d);break}return t(r.slice(o,o+2+c))}o+=2+c}return t(new Blob)})),a.readAsArrayBuffer(e)}));var m2={},Rke={get exports(){return m2},set exports(e){m2=e}};(function(e){var t,n,a={};Rke.exports=a,a.parse=function(r,s){for(var o=a.bin.readUshort,l=a.bin.readUint,c=0,f={},d=new Uint8Array(r),A=d.length-4;l(d,A)!=101010256;)A--;c=A,c+=4;var m=o(d,c+=4);o(d,c+=2);var p=l(d,c+=2),h=l(d,c+=4);c+=4,c=h;for(var y=0;y<m;y++){l(d,c),c+=4,c+=4,c+=4,l(d,c+=4),p=l(d,c+=4);var g=l(d,c+=4),_=o(d,c+=4),b=o(d,c+2),S=o(d,c+4);c+=6;var B=l(d,c+=8);c+=4,c+=_+b+S,a._readLocal(d,B,f,p,g,s)}return f},a._readLocal=function(r,s,o,l,c,f){var d=a.bin.readUshort,A=a.bin.readUint;A(r,s),d(r,s+=4),d(r,s+=2);var m=d(r,s+=2);A(r,s+=2),A(r,s+=4),s+=4;var p=d(r,s+=8),h=d(r,s+=2);s+=2;var y=a.bin.readUTF8(r,s,p);if(s+=p,s+=h,f)o[y]={size:c,csize:l};else{var g=new Uint8Array(r.buffer,s);if(m==0)o[y]=new Uint8Array(g.buffer.slice(s,s+l));else{if(m!=8)throw"unknown compression method: "+m;var _=new Uint8Array(c);a.inflateRaw(g,_),o[y]=_}}},a.inflateRaw=function(r,s){return a.F.inflate(r,s)},a.inflate=function(r,s){return r[0],r[1],a.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),s)},a.deflate=function(r,s){s==null&&(s={level:6});var o=0,l=new Uint8Array(50+Math.floor(1.1*r.length));l[o]=120,l[o+1]=156,o+=2,o=a.F.deflateRaw(r,l,o,s.level);var c=a.adler(r,0,r.length);return l[o+0]=c>>>24&255,l[o+1]=c>>>16&255,l[o+2]=c>>>8&255,l[o+3]=c>>>0&255,new Uint8Array(l.buffer,0,o+4)},a.deflateRaw=function(r,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*r.length)),l=a.F.deflateRaw(r,o,l,s.level);return new Uint8Array(o.buffer,0,l)},a.encode=function(r,s){s==null&&(s=!1);var o=0,l=a.bin.writeUint,c=a.bin.writeUshort,f={};for(var d in r){var A=!a._noNeed(d)&&!s,m=r[d],p=a.crc.crc(m,0,m.length);f[d]={cpr:A,usize:m.length,crc:p,file:A?a.deflateRaw(m):m}}for(var d in f)o+=f[d].file.length+30+46+2*a.bin.sizeUTF8(d);o+=22;var h=new Uint8Array(o),y=0,g=[];for(var d in f){var _=f[d];g.push(y),y=a._writeHeader(h,y,d,_,0)}var b=0,S=y;for(var d in f)_=f[d],g.push(y),y=a._writeHeader(h,y,d,_,1,g[b++]);var B=y-S;return l(h,y,101010256),y+=4,c(h,y+=4,b),c(h,y+=2,b),l(h,y+=2,B),l(h,y+=4,S),y+=4,y+=2,h.buffer},a._noNeed=function(r){var s=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},a._writeHeader=function(r,s,o,l,c,f){var d=a.bin.writeUint,A=a.bin.writeUshort,m=l.file;return d(r,s,c==0?67324752:33639248),s+=4,c==1&&(s+=2),A(r,s,20),A(r,s+=2,0),A(r,s+=2,l.cpr?8:0),d(r,s+=2,0),d(r,s+=4,l.crc),d(r,s+=4,m.length),d(r,s+=4,l.usize),A(r,s+=4,a.bin.sizeUTF8(o)),A(r,s+=2,0),s+=2,c==1&&(s+=2,s+=2,d(r,s+=6,f),s+=4),s+=a.bin.writeUTF8(r,s,o),c==0&&(r.set(m,s),s+=m.length),s},a.crc={table:(function(){for(var r=new Uint32Array(256),s=0;s<256;s++){for(var o=s,l=0;l<8;l++)1&o?o=3988292384^o>>>1:o>>>=1;r[s]=o}return r})(),update:function(r,s,o,l){for(var c=0;c<l;c++)r=a.crc.table[255&(r^s[o+c])]^r>>>8;return r},crc:function(r,s,o){return 4294967295^a.crc.update(4294967295,r,s,o)}},a.adler=function(r,s,o){for(var l=1,c=0,f=s,d=s+o;f<d;){for(var A=Math.min(f+5552,d);f<A;)c+=l+=r[f++];l%=65521,c%=65521}return c<<16|l},a.bin={readUshort:function(r,s){return r[s]|r[s+1]<<8},writeUshort:function(r,s,o){r[s]=255&o,r[s+1]=o>>8&255},readUint:function(r,s){return 16777216*r[s+3]+(r[s+2]<<16|r[s+1]<<8|r[s])},writeUint:function(r,s,o){r[s]=255&o,r[s+1]=o>>8&255,r[s+2]=o>>16&255,r[s+3]=o>>24&255},readASCII:function(r,s,o){for(var l="",c=0;c<o;c++)l+=String.fromCharCode(r[s+c]);return l},writeASCII:function(r,s,o){for(var l=0;l<o.length;l++)r[s+l]=o.charCodeAt(l)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,s,o){for(var l,c="",f=0;f<o;f++)c+="%"+a.bin.pad(r[s+f].toString(16));try{l=decodeURIComponent(c)}catch{return a.bin.readASCII(r,s,o)}return l},writeUTF8:function(r,s,o){for(var l=o.length,c=0,f=0;f<l;f++){var d=o.charCodeAt(f);if((4294967168&d)==0)r[s+c]=d,c++;else if((4294965248&d)==0)r[s+c]=192|d>>6,r[s+c+1]=128|d>>0&63,c+=2;else if((4294901760&d)==0)r[s+c]=224|d>>12,r[s+c+1]=128|d>>6&63,r[s+c+2]=128|d>>0&63,c+=3;else{if((4292870144&d)!=0)throw"e";r[s+c]=240|d>>18,r[s+c+1]=128|d>>12&63,r[s+c+2]=128|d>>6&63,r[s+c+3]=128|d>>0&63,c+=4}}return c},sizeUTF8:function(r){for(var s=r.length,o=0,l=0;l<s;l++){var c=r.charCodeAt(l);if((4294967168&c)==0)o++;else if((4294965248&c)==0)o+=2;else if((4294901760&c)==0)o+=3;else{if((4292870144&c)!=0)throw"e";o+=4}}return o}},a.F={},a.F.deflateRaw=function(r,s,o,l){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],f=a.F.U,d=a.F._goodIndex;a.F._hash;var A=a.F._putsE,m=0,p=o<<3,h=0,y=r.length;if(l==0){for(;m<y;)A(s,p,m+(U=Math.min(65535,y-m))==y?1:0),p=a.F._copyExact(r,m,U,s,p+8),m+=U;return p>>>3}var g=f.lits,_=f.strt,b=f.prev,S=0,B=0,F=0,T=0,E=0,x=0;for(y>2&&(_[x=a.F._hash(r,0)]=0),m=0;m<y;m++){if(E=x,m+1<y-2){x=a.F._hash(r,m+1);var C=m+1&32767;b[C]=_[x],_[x]=C}if(h<=m){(S>14e3||B>26697)&&y-m>100&&(h<m&&(g[S]=m-h,S+=2,h=m),p=a.F._writeBlock(m==y-1||h==y?1:0,g,S,T,r,F,m-F,s,p),S=B=T=0,F=m);var D=0;m<y-2&&(D=a.F._bestMatch(r,m,b,E,Math.min(c[2],y-m),c[3]));var U=D>>>16,L=65535&D;if(D!=0){L=65535&D;var H=d(U=D>>>16,f.of0);f.lhst[257+H]++;var oe=d(L,f.df0);f.dhst[oe]++,T+=f.exb[H]+f.dxb[oe],g[S]=U<<23|m-h,g[S+1]=L<<16|H<<8|oe,S+=2,h=m+U}else f.lhst[r[m]]++;B++}}for(F==m&&r.length!=0||(h<m&&(g[S]=m-h,S+=2,h=m),p=a.F._writeBlock(1,g,S,T,r,F,m-F,s,p),S=0,B=0,S=B=T=0,F=m);(7&p)!=0;)p++;return p>>>3},a.F._bestMatch=function(r,s,o,l,c,f){var d=32767&s,A=o[d],m=d-A+32768&32767;if(A==d||l!=a.F._hash(r,s-m))return 0;for(var p=0,h=0,y=Math.min(32767,s);m<=y&&--f!=0&&A!=d;){if(p==0||r[s+p]==r[s+p-m]){var g=a.F._howLong(r,s,m);if(g>p){if(h=m,(p=g)>=c)break;m+2<g&&(g=m+2);for(var _=0,b=0;b<g-2;b++){var S=s-m+b+32768&32767,B=S-o[S]+32768&32767;B>_&&(_=B,A=S)}}}m+=(d=A)-(A=o[d])+32768&32767}return p<<16|h},a.F._howLong=function(r,s,o){if(r[s]!=r[s-o]||r[s+1]!=r[s+1-o]||r[s+2]!=r[s+2-o])return 0;var l=s,c=Math.min(r.length,s+258);for(s+=3;s<c&&r[s]==r[s-o];)s++;return s-l},a.F._hash=function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<4)&65535},a.saved=0,a.F._writeBlock=function(r,s,o,l,c,f,d,A,m){var p,h,y,g,_,b,S,B,F,T=a.F.U,E=a.F._putsF,x=a.F._putsE;T.lhst[256]++,h=(p=a.F.getTrees())[0],y=p[1],g=p[2],_=p[3],b=p[4],S=p[5],B=p[6],F=p[7];var C=32+((m+3&7)==0?0:8-(m+3&7))+(d<<3),D=l+a.F.contSize(T.fltree,T.lhst)+a.F.contSize(T.fdtree,T.dhst),U=l+a.F.contSize(T.ltree,T.lhst)+a.F.contSize(T.dtree,T.dhst);U+=14+3*S+a.F.contSize(T.itree,T.ihst)+(2*T.ihst[16]+3*T.ihst[17]+7*T.ihst[18]);for(var L=0;L<286;L++)T.lhst[L]=0;for(L=0;L<30;L++)T.dhst[L]=0;for(L=0;L<19;L++)T.ihst[L]=0;var H=C<D&&C<U?0:D<U?1:2;if(E(A,m,r),E(A,m+1,H),m+=3,H==0){for(;(7&m)!=0;)m++;m=a.F._copyExact(c,f,d,A,m)}else{var oe,de;if(H==1&&(oe=T.fltree,de=T.fdtree),H==2){a.F.makeCodes(T.ltree,h),a.F.revCodes(T.ltree,h),a.F.makeCodes(T.dtree,y),a.F.revCodes(T.dtree,y),a.F.makeCodes(T.itree,g),a.F.revCodes(T.itree,g),oe=T.ltree,de=T.dtree,x(A,m,_-257),x(A,m+=5,b-1),x(A,m+=5,S-4),m+=4;for(var te=0;te<S;te++)x(A,m+3*te,T.itree[1+(T.ordr[te]<<1)]);m+=3*S,m=a.F._codeTiny(B,T.itree,A,m),m=a.F._codeTiny(F,T.itree,A,m)}for(var q=f,ce=0;ce<o;ce+=2){for(var le=s[ce],Z=le>>>23,ne=q+(8388607&le);q<ne;)m=a.F._writeLit(c[q++],oe,A,m);if(Z!=0){var G=s[ce+1],W=G>>16,Q=G>>8&255,O=255&G;x(A,m=a.F._writeLit(257+Q,oe,A,m),Z-T.of0[Q]),m+=T.exb[Q],E(A,m=a.F._writeLit(O,de,A,m),W-T.df0[O]),m+=T.dxb[O],q+=Z}}m=a.F._writeLit(256,oe,A,m)}return m},a.F._copyExact=function(r,s,o,l,c){var f=c>>>3;return l[f]=o,l[f+1]=o>>>8,l[f+2]=255-l[f],l[f+3]=255-l[f+1],f+=4,l.set(new Uint8Array(r.buffer,s,o),f),c+(o+4<<3)},a.F.getTrees=function(){for(var r=a.F.U,s=a.F._hufTree(r.lhst,r.ltree,15),o=a.F._hufTree(r.dhst,r.dtree,15),l=[],c=a.F._lenCodes(r.ltree,l),f=[],d=a.F._lenCodes(r.dtree,f),A=0;A<l.length;A+=2)r.ihst[l[A]]++;for(A=0;A<f.length;A+=2)r.ihst[f[A]]++;for(var m=a.F._hufTree(r.ihst,r.itree,7),p=19;p>4&&r.itree[1+(r.ordr[p-1]<<1)]==0;)p--;return[s,o,m,c,d,p,l,f]},a.F.getSecond=function(r){for(var s=[],o=0;o<r.length;o+=2)s.push(r[o+1]);return s},a.F.nonZero=function(r){for(var s="",o=0;o<r.length;o+=2)r[o+1]!=0&&(s+=(o>>1)+",");return s},a.F.contSize=function(r,s){for(var o=0,l=0;l<s.length;l++)o+=s[l]*r[1+(l<<1)];return o},a.F._codeTiny=function(r,s,o,l){for(var c=0;c<r.length;c+=2){var f=r[c],d=r[c+1];l=a.F._writeLit(f,s,o,l);var A=f==16?2:f==17?3:7;f>15&&(a.F._putsE(o,l,d,A),l+=A)}return l},a.F._lenCodes=function(r,s){for(var o=r.length;o!=2&&r[o-1]==0;)o-=2;for(var l=0;l<o;l+=2){var c=r[l+1],f=l+3<o?r[l+3]:-1,d=l+5<o?r[l+5]:-1,A=l==0?-1:r[l-1];if(c==0&&f==c&&d==c){for(var m=l+5;m+2<o&&r[m+2]==c;)m+=2;(p=Math.min(m+1-l>>>1,138))<11?s.push(17,p-3):s.push(18,p-11),l+=2*p-2}else if(c==A&&f==c&&d==c){for(m=l+5;m+2<o&&r[m+2]==c;)m+=2;var p=Math.min(m+1-l>>>1,6);s.push(16,p-3),l+=2*p-2}else s.push(c,0)}return o>>>1},a.F._hufTree=function(r,s,o){var l=[],c=r.length,f=s.length,d=0;for(d=0;d<f;d+=2)s[d]=0,s[d+1]=0;for(d=0;d<c;d++)r[d]!=0&&l.push({lit:d,f:r[d]});var A=l.length,m=l.slice(0);if(A==0)return 0;if(A==1){var p=l[0].lit;return m=p==0?1:0,s[1+(p<<1)]=1,s[1+(m<<1)]=1,1}l.sort((function(B,F){return B.f-F.f}));var h=l[0],y=l[1],g=0,_=1,b=2;for(l[0]={lit:-1,f:h.f+y.f,l:h,r:y,d:0};_!=A-1;)h=g!=_&&(b==A||l[g].f<l[b].f)?l[g++]:l[b++],y=g!=_&&(b==A||l[g].f<l[b].f)?l[g++]:l[b++],l[_++]={lit:-1,f:h.f+y.f,l:h,r:y};var S=a.F.setDepth(l[_-1],0);for(S>o&&(a.F.restrictDepth(m,o,S),S=o),d=0;d<A;d++)s[1+(m[d].lit<<1)]=m[d].d;return S},a.F.setDepth=function(r,s){return r.lit!=-1?(r.d=s,s):Math.max(a.F.setDepth(r.l,s+1),a.F.setDepth(r.r,s+1))},a.F.restrictDepth=function(r,s,o){var l=0,c=1<<o-s,f=0;for(r.sort((function(A,m){return m.d==A.d?A.f-m.f:m.d-A.d})),l=0;l<r.length&&r[l].d>s;l++){var d=r[l].d;r[l].d=s,f+=c-(1<<o-d)}for(f>>>=o-s;f>0;)(d=r[l].d)<s?(r[l].d++,f-=1<<s-d-1):l++;for(;l>=0;l--)r[l].d==s&&f<0&&(r[l].d--,f++);f!=0&&console.log("debt left")},a.F._goodIndex=function(r,s){var o=0;return s[16|o]<=r&&(o|=16),s[8|o]<=r&&(o|=8),s[4|o]<=r&&(o|=4),s[2|o]<=r&&(o|=2),s[1|o]<=r&&(o|=1),o},a.F._writeLit=function(r,s,o,l){return a.F._putsF(o,l,s[r<<1]),l+s[1+(r<<1)]},a.F.inflate=function(r,s){var o=Uint8Array;if(r[0]==3&&r[1]==0)return s||new o(0);var l=a.F,c=l._bitsF,f=l._bitsE,d=l._decodeTiny,A=l.makeCodes,m=l.codes2map,p=l._get17,h=l.U,y=s==null;y&&(s=new o(r.length>>>2<<3));for(var g,_,b=0,S=0,B=0,F=0,T=0,E=0,x=0,C=0,D=0;b==0;)if(b=c(r,D,1),S=c(r,D+1,2),D+=3,S!=0){if(y&&(s=a.F._check(s,C+(1<<17))),S==1&&(g=h.flmap,_=h.fdmap,E=511,x=31),S==2){B=f(r,D,5)+257,F=f(r,D+5,5)+1,T=f(r,D+10,4)+4,D+=14;for(var U=0;U<38;U+=2)h.itree[U]=0,h.itree[U+1]=0;var L=1;for(U=0;U<T;U++){var H=f(r,D+3*U,3);h.itree[1+(h.ordr[U]<<1)]=H,H>L&&(L=H)}D+=3*T,A(h.itree,L),m(h.itree,L,h.imap),g=h.lmap,_=h.dmap,D=d(h.imap,(1<<L)-1,B+F,r,D,h.ttree);var oe=l._copyOut(h.ttree,0,B,h.ltree);E=(1<<oe)-1;var de=l._copyOut(h.ttree,B,F,h.dtree);x=(1<<de)-1,A(h.ltree,oe),m(h.ltree,oe,g),A(h.dtree,de),m(h.dtree,de,_)}for(;;){var te=g[p(r,D)&E];D+=15&te;var q=te>>>4;if(!(q>>>8))s[C++]=q;else{if(q==256)break;var ce=C+q-254;if(q>264){var le=h.ldef[q-257];ce=C+(le>>>3)+f(r,D,7&le),D+=7&le}var Z=_[p(r,D)&x];D+=15&Z;var ne=Z>>>4,G=h.ddef[ne],W=(G>>>4)+c(r,D,15&G);for(D+=15&G,y&&(s=a.F._check(s,C+(1<<17)));C<ce;)s[C]=s[C++-W],s[C]=s[C++-W],s[C]=s[C++-W],s[C]=s[C++-W];C=ce}}}else{(7&D)!=0&&(D+=8-(7&D));var Q=4+(D>>>3),O=r[Q-4]|r[Q-3]<<8;y&&(s=a.F._check(s,C+O)),s.set(new o(r.buffer,r.byteOffset+Q,O),C),D=Q+O<<3,C+=O}return s.length==C?s:s.slice(0,C)},a.F._check=function(r,s){var o=r.length;if(s<=o)return r;var l=new Uint8Array(Math.max(o<<1,s));return l.set(r,0),l},a.F._decodeTiny=function(r,s,o,l,c,f){for(var d=a.F._bitsE,A=a.F._get17,m=0;m<o;){var p=r[A(l,c)&s];c+=15&p;var h=p>>>4;if(h<=15)f[m]=h,m++;else{var y=0,g=0;h==16?(g=3+d(l,c,2),c+=2,y=f[m-1]):h==17?(g=3+d(l,c,3),c+=3):h==18&&(g=11+d(l,c,7),c+=7);for(var _=m+g;m<_;)f[m]=y,m++}}return c},a.F._copyOut=function(r,s,o,l){for(var c=0,f=0,d=l.length>>>1;f<o;){var A=r[f+s];l[f<<1]=0,l[1+(f<<1)]=A,A>c&&(c=A),f++}for(;f<d;)l[f<<1]=0,l[1+(f<<1)]=0,f++;return c},a.F.makeCodes=function(r,s){for(var o,l,c,f,d=a.F.U,A=r.length,m=d.bl_count,p=0;p<=s;p++)m[p]=0;for(p=1;p<A;p+=2)m[r[p]]++;var h=d.next_code;for(o=0,m[0]=0,l=1;l<=s;l++)o=o+m[l-1]<<1,h[l]=o;for(c=0;c<A;c+=2)(f=r[c+1])!=0&&(r[c]=h[f],h[f]++)},a.F.codes2map=function(r,s,o){for(var l=r.length,c=a.F.U.rev15,f=0;f<l;f+=2)if(r[f+1]!=0)for(var d=f>>1,A=r[f+1],m=d<<4|A,p=s-A,h=r[f]<<p,y=h+(1<<p);h!=y;)o[c[h]>>>15-s]=m,h++},a.F.revCodes=function(r,s){for(var o=a.F.U.rev15,l=15-s,c=0;c<r.length;c+=2){var f=r[c]<<s-r[c+1];r[c]=o[f]>>>l}},a.F._putsE=function(r,s,o){o<<=7&s;var l=s>>>3;r[l]|=o,r[l+1]|=o>>>8},a.F._putsF=function(r,s,o){o<<=7&s;var l=s>>>3;r[l]|=o,r[l+1]|=o>>>8,r[l+2]|=o>>>16},a.F._bitsE=function(r,s,o){return(r[s>>>3]|r[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},a.F._bitsF=function(r,s,o){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},a.F._get17=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)},a.F._get25=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16|r[3+(s>>>3)]<<24)>>>(7&s)},a.F.U=(t=Uint16Array,n=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var r=a.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,r.rev15[s]=(o>>>16|o<<16)>>>17}function l(c,f,d){for(;f--!=0;)c.push(0,d)}for(s=0;s<32;s++)r.ldef[s]=r.of0[s]<<3|r.exb[s],r.ddef[s]=r.df0[s]<<4|r.dxb[s];l(r.fltree,144,8),l(r.fltree,112,9),l(r.fltree,24,7),l(r.fltree,8,8),a.F.makeCodes(r.fltree,9),a.F.codes2map(r.fltree,9,r.flmap),a.F.revCodes(r.fltree,9),l(r.fdtree,32,5),a.F.makeCodes(r.fdtree,5),a.F.codes2map(r.fdtree,5,r.fdmap),a.F.revCodes(r.fdtree,5),l(r.itree,19,0),l(r.ltree,286,0),l(r.dtree,30,0),l(r.ttree,320,0)})()})();var Nke=Dke({__proto__:null,default:m2},[m2]);const El=(function(){var e={nextZero(d,A){for(;d[A]!=0;)A++;return A},readUshort:(d,A)=>d[A]<<8|d[A+1],writeUshort(d,A,m){d[A]=m>>8&255,d[A+1]=255&m},readUint:(d,A)=>16777216*d[A]+(d[A+1]<<16|d[A+2]<<8|d[A+3]),writeUint(d,A,m){d[A]=m>>24&255,d[A+1]=m>>16&255,d[A+2]=m>>8&255,d[A+3]=255&m},readASCII(d,A,m){let p="";for(let h=0;h<m;h++)p+=String.fromCharCode(d[A+h]);return p},writeASCII(d,A,m){for(let p=0;p<m.length;p++)d[A+p]=m.charCodeAt(p)},readBytes(d,A,m){const p=[];for(let h=0;h<m;h++)p.push(d[A+h]);return p},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,A,m){let p,h="";for(let y=0;y<m;y++)h+=`%${e.pad(d[A+y].toString(16))}`;try{p=decodeURIComponent(h)}catch{return e.readASCII(d,A,m)}return p}};function t(d,A,m,p){const h=A*m,y=s(p),g=Math.ceil(A*y/8),_=new Uint8Array(4*h),b=new Uint32Array(_.buffer),{ctype:S}=p,{depth:B}=p,F=e.readUshort;if(S==6){const le=h<<2;if(B==8)for(var T=0;T<le;T+=4)_[T]=d[T],_[T+1]=d[T+1],_[T+2]=d[T+2],_[T+3]=d[T+3];if(B==16)for(T=0;T<le;T++)_[T]=d[T<<1]}else if(S==2){const le=p.tabs.tRNS;if(le==null){if(B==8)for(T=0;T<h;T++){var E=3*T;b[T]=255<<24|d[E+2]<<16|d[E+1]<<8|d[E]}if(B==16)for(T=0;T<h;T++)E=6*T,b[T]=255<<24|d[E+4]<<16|d[E+2]<<8|d[E]}else{var x=le[0];const Z=le[1],ne=le[2];if(B==8)for(T=0;T<h;T++){var C=T<<2;E=3*T,b[T]=255<<24|d[E+2]<<16|d[E+1]<<8|d[E],d[E]==x&&d[E+1]==Z&&d[E+2]==ne&&(_[C+3]=0)}if(B==16)for(T=0;T<h;T++)C=T<<2,E=6*T,b[T]=255<<24|d[E+4]<<16|d[E+2]<<8|d[E],F(d,E)==x&&F(d,E+2)==Z&&F(d,E+4)==ne&&(_[C+3]=0)}}else if(S==3){const le=p.tabs.PLTE,Z=p.tabs.tRNS,ne=Z?Z.length:0;if(B==1)for(var D=0;D<m;D++){var U=D*g,L=D*A;for(T=0;T<A;T++){C=L+T<<2;var H=3*(oe=d[U+(T>>3)]>>7-((7&T)<<0)&1);_[C]=le[H],_[C+1]=le[H+1],_[C+2]=le[H+2],_[C+3]=oe<ne?Z[oe]:255}}if(B==2)for(D=0;D<m;D++)for(U=D*g,L=D*A,T=0;T<A;T++)C=L+T<<2,H=3*(oe=d[U+(T>>2)]>>6-((3&T)<<1)&3),_[C]=le[H],_[C+1]=le[H+1],_[C+2]=le[H+2],_[C+3]=oe<ne?Z[oe]:255;if(B==4)for(D=0;D<m;D++)for(U=D*g,L=D*A,T=0;T<A;T++)C=L+T<<2,H=3*(oe=d[U+(T>>1)]>>4-((1&T)<<2)&15),_[C]=le[H],_[C+1]=le[H+1],_[C+2]=le[H+2],_[C+3]=oe<ne?Z[oe]:255;if(B==8)for(T=0;T<h;T++){var oe;C=T<<2,H=3*(oe=d[T]),_[C]=le[H],_[C+1]=le[H+1],_[C+2]=le[H+2],_[C+3]=oe<ne?Z[oe]:255}}else if(S==4){if(B==8)for(T=0;T<h;T++){C=T<<2;var de=d[te=T<<1];_[C]=de,_[C+1]=de,_[C+2]=de,_[C+3]=d[te+1]}if(B==16)for(T=0;T<h;T++){var te;C=T<<2,de=d[te=T<<2],_[C]=de,_[C+1]=de,_[C+2]=de,_[C+3]=d[te+2]}}else if(S==0)for(x=p.tabs.tRNS?p.tabs.tRNS:-1,D=0;D<m;D++){const le=D*g,Z=D*A;if(B==1)for(var q=0;q<A;q++){var ce=(de=255*(d[le+(q>>>3)]>>>7-(7&q)&1))==255*x?0:255;b[Z+q]=ce<<24|de<<16|de<<8|de}else if(B==2)for(q=0;q<A;q++)ce=(de=85*(d[le+(q>>>2)]>>>6-((3&q)<<1)&3))==85*x?0:255,b[Z+q]=ce<<24|de<<16|de<<8|de;else if(B==4)for(q=0;q<A;q++)ce=(de=17*(d[le+(q>>>1)]>>>4-((1&q)<<2)&15))==17*x?0:255,b[Z+q]=ce<<24|de<<16|de<<8|de;else if(B==8)for(q=0;q<A;q++)ce=(de=d[le+q])==x?0:255,b[Z+q]=ce<<24|de<<16|de<<8|de;else if(B==16)for(q=0;q<A;q++)de=d[le+(q<<1)],ce=F(d,le+(q<<1))==x?0:255,b[Z+q]=ce<<24|de<<16|de<<8|de}return _}function n(d,A,m,p){const h=s(d),y=Math.ceil(m*h/8),g=new Uint8Array((y+1+d.interlace)*p);return A=d.tabs.CgBI?r(A,g):a(A,g),d.interlace==0?A=o(A,d,0,m,p):d.interlace==1&&(A=(function(b,S){const B=S.width,F=S.height,T=s(S),E=T>>3,x=Math.ceil(B*T/8),C=new Uint8Array(F*x);let D=0;const U=[0,0,4,0,2,0,1],L=[0,4,0,2,0,1,0],H=[8,8,8,4,4,2,2],oe=[8,8,4,4,2,2,1];let de=0;for(;de<7;){const q=H[de],ce=oe[de];let le=0,Z=0,ne=U[de];for(;ne<F;)ne+=q,Z++;let G=L[de];for(;G<B;)G+=ce,le++;const W=Math.ceil(le*T/8);o(b,S,D,le,Z);let Q=0,O=U[de];for(;O<F;){let ae=L[de],j=D+Q*W<<3;for(;ae<B;){var te;if(T==1&&(te=(te=b[j>>3])>>7-(7&j)&1,C[O*x+(ae>>3)]|=te<<7-((7&ae)<<0)),T==2&&(te=(te=b[j>>3])>>6-(7&j)&3,C[O*x+(ae>>2)]|=te<<6-((3&ae)<<1)),T==4&&(te=(te=b[j>>3])>>4-(7&j)&15,C[O*x+(ae>>1)]|=te<<4-((1&ae)<<2)),T>=8){const J=O*x+ae*E;for(let ie=0;ie<E;ie++)C[J+ie]=b[(j>>3)+ie]}j+=T,ae+=ce}Q++,O+=q}le*Z!=0&&(D+=Z*(1+W)),de+=1}return C})(A,d)),A}function a(d,A){return r(new Uint8Array(d.buffer,2,d.length-6),A)}var r=(function(){const d={H:{}};return d.H.N=function(A,m){const p=Uint8Array;let h,y,g=0,_=0,b=0,S=0,B=0,F=0,T=0,E=0,x=0;if(A[0]==3&&A[1]==0)return m||new p(0);const C=d.H,D=C.b,U=C.e,L=C.R,H=C.n,oe=C.A,de=C.Z,te=C.m,q=m==null;for(q&&(m=new p(A.length>>>2<<5));g==0;)if(g=D(A,x,1),_=D(A,x+1,2),x+=3,_!=0){if(q&&(m=d.H.W(m,E+(1<<17))),_==1&&(h=te.J,y=te.h,F=511,T=31),_==2){b=U(A,x,5)+257,S=U(A,x+5,5)+1,B=U(A,x+10,4)+4,x+=14;let le=1;for(var ce=0;ce<38;ce+=2)te.Q[ce]=0,te.Q[ce+1]=0;for(ce=0;ce<B;ce++){const G=U(A,x+3*ce,3);te.Q[1+(te.X[ce]<<1)]=G,G>le&&(le=G)}x+=3*B,H(te.Q,le),oe(te.Q,le,te.u),h=te.w,y=te.d,x=L(te.u,(1<<le)-1,b+S,A,x,te.v);const Z=C.V(te.v,0,b,te.C);F=(1<<Z)-1;const ne=C.V(te.v,b,S,te.D);T=(1<<ne)-1,H(te.C,Z),oe(te.C,Z,h),H(te.D,ne),oe(te.D,ne,y)}for(;;){const le=h[de(A,x)&F];x+=15&le;const Z=le>>>4;if(!(Z>>>8))m[E++]=Z;else{if(Z==256)break;{let ne=E+Z-254;if(Z>264){const ae=te.q[Z-257];ne=E+(ae>>>3)+U(A,x,7&ae),x+=7&ae}const G=y[de(A,x)&T];x+=15&G;const W=G>>>4,Q=te.c[W],O=(Q>>>4)+D(A,x,15&Q);for(x+=15&Q;E<ne;)m[E]=m[E++-O],m[E]=m[E++-O],m[E]=m[E++-O],m[E]=m[E++-O];E=ne}}}}else{(7&x)!=0&&(x+=8-(7&x));const le=4+(x>>>3),Z=A[le-4]|A[le-3]<<8;q&&(m=d.H.W(m,E+Z)),m.set(new p(A.buffer,A.byteOffset+le,Z),E),x=le+Z<<3,E+=Z}return m.length==E?m:m.slice(0,E)},d.H.W=function(A,m){const p=A.length;if(m<=p)return A;const h=new Uint8Array(p<<1);return h.set(A,0),h},d.H.R=function(A,m,p,h,y,g){const _=d.H.e,b=d.H.Z;let S=0;for(;S<p;){const B=A[b(h,y)&m];y+=15&B;const F=B>>>4;if(F<=15)g[S]=F,S++;else{let T=0,E=0;F==16?(E=3+_(h,y,2),y+=2,T=g[S-1]):F==17?(E=3+_(h,y,3),y+=3):F==18&&(E=11+_(h,y,7),y+=7);const x=S+E;for(;S<x;)g[S]=T,S++}}return y},d.H.V=function(A,m,p,h){let y=0,g=0;const _=h.length>>>1;for(;g<p;){const b=A[g+m];h[g<<1]=0,h[1+(g<<1)]=b,b>y&&(y=b),g++}for(;g<_;)h[g<<1]=0,h[1+(g<<1)]=0,g++;return y},d.H.n=function(A,m){const p=d.H.m,h=A.length;let y,g,_,b;const S=p.j;for(var B=0;B<=m;B++)S[B]=0;for(B=1;B<h;B+=2)S[A[B]]++;const F=p.K;for(y=0,S[0]=0,g=1;g<=m;g++)y=y+S[g-1]<<1,F[g]=y;for(_=0;_<h;_+=2)b=A[_+1],b!=0&&(A[_]=F[b],F[b]++)},d.H.A=function(A,m,p){const h=A.length,y=d.H.m.r;for(let g=0;g<h;g+=2)if(A[g+1]!=0){const _=g>>1,b=A[g+1],S=_<<4|b,B=m-b;let F=A[g]<<B;const T=F+(1<<B);for(;F!=T;)p[y[F]>>>15-m]=S,F++}},d.H.l=function(A,m){const p=d.H.m.r,h=15-m;for(let y=0;y<A.length;y+=2){const g=A[y]<<m-A[y+1];A[y]=p[g]>>>h}},d.H.M=function(A,m,p){p<<=7&m;const h=m>>>3;A[h]|=p,A[h+1]|=p>>>8},d.H.I=function(A,m,p){p<<=7&m;const h=m>>>3;A[h]|=p,A[h+1]|=p>>>8,A[h+2]|=p>>>16},d.H.e=function(A,m,p){return(A[m>>>3]|A[1+(m>>>3)]<<8)>>>(7&m)&(1<<p)-1},d.H.b=function(A,m,p){return(A[m>>>3]|A[1+(m>>>3)]<<8|A[2+(m>>>3)]<<16)>>>(7&m)&(1<<p)-1},d.H.Z=function(A,m){return(A[m>>>3]|A[1+(m>>>3)]<<8|A[2+(m>>>3)]<<16)>>>(7&m)},d.H.i=function(A,m){return(A[m>>>3]|A[1+(m>>>3)]<<8|A[2+(m>>>3)]<<16|A[3+(m>>>3)]<<24)>>>(7&m)},d.H.m=(function(){const A=Uint16Array,m=Uint32Array;return{K:new A(16),j:new A(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new A(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new A(512),_:[],h:new A(32),$:[],w:new A(32768),C:[],v:[],d:new A(32768),D:[],u:new A(512),Q:[],r:new A(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new A(65536),g:new A(32768)}})(),(function(){const A=d.H.m;for(var m=0;m<32768;m++){let h=m;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,A.r[m]=(h>>>16|h<<16)>>>17}function p(h,y,g){for(;y--!=0;)h.push(0,g)}for(m=0;m<32;m++)A.q[m]=A.S[m]<<3|A.T[m],A.c[m]=A.p[m]<<4|A.z[m];p(A._,144,8),p(A._,112,9),p(A._,24,7),p(A._,8,8),d.H.n(A._,9),d.H.A(A._,9,A.J),d.H.l(A._,9),p(A.$,32,5),d.H.n(A.$,5),d.H.A(A.$,5,A.h),d.H.l(A.$,5),p(A.Q,19,0),p(A.C,286,0),p(A.D,30,0),p(A.v,320,0)})(),d.H.N})();function s(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function o(d,A,m,p,h){let y=s(A);const g=Math.ceil(p*y/8);let _,b;y=Math.ceil(y/8);let S=d[m],B=0;if(S>1&&(d[m]=[0,0,1][S-2]),S==3)for(B=y;B<g;B++)d[B+1]=d[B+1]+(d[B+1-y]>>>1)&255;for(let F=0;F<h;F++)if(_=m+F*g,b=_+F+1,S=d[b-1],B=0,S==0)for(;B<g;B++)d[_+B]=d[b+B];else if(S==1){for(;B<y;B++)d[_+B]=d[b+B];for(;B<g;B++)d[_+B]=d[b+B]+d[_+B-y]}else if(S==2)for(;B<g;B++)d[_+B]=d[b+B]+d[_+B-g];else if(S==3){for(;B<y;B++)d[_+B]=d[b+B]+(d[_+B-g]>>>1);for(;B<g;B++)d[_+B]=d[b+B]+(d[_+B-g]+d[_+B-y]>>>1)}else{for(;B<y;B++)d[_+B]=d[b+B]+l(0,d[_+B-g],0);for(;B<g;B++)d[_+B]=d[b+B]+l(d[_+B-y],d[_+B-g],d[_+B-y-g])}return d}function l(d,A,m){const p=d+A-m,h=p-d,y=p-A,g=p-m;return h*h<=y*y&&h*h<=g*g?d:y*y<=g*g?A:m}function c(d,A,m){m.width=e.readUint(d,A),A+=4,m.height=e.readUint(d,A),A+=4,m.depth=d[A],A++,m.ctype=d[A],A++,m.compress=d[A],A++,m.filter=d[A],A++,m.interlace=d[A],A++}function f(d,A,m,p,h,y,g,_,b){const S=Math.min(A,h),B=Math.min(m,y);let F=0,T=0;for(let de=0;de<B;de++)for(let te=0;te<S;te++)if(g>=0&&_>=0?(F=de*A+te<<2,T=(_+de)*h+g+te<<2):(F=(-_+de)*A-g+te<<2,T=de*h+te<<2),b==0)p[T]=d[F],p[T+1]=d[F+1],p[T+2]=d[F+2],p[T+3]=d[F+3];else if(b==1){var E=d[F+3]*.00392156862745098,x=d[F]*E,C=d[F+1]*E,D=d[F+2]*E,U=p[T+3]*(1/255),L=p[T]*U,H=p[T+1]*U,oe=p[T+2]*U;const q=1-E,ce=E+U*q,le=ce==0?0:1/ce;p[T+3]=255*ce,p[T+0]=(x+L*q)*le,p[T+1]=(C+H*q)*le,p[T+2]=(D+oe*q)*le}else if(b==2)E=d[F+3],x=d[F],C=d[F+1],D=d[F+2],U=p[T+3],L=p[T],H=p[T+1],oe=p[T+2],E==U&&x==L&&C==H&&D==oe?(p[T]=0,p[T+1]=0,p[T+2]=0,p[T+3]=0):(p[T]=x,p[T+1]=C,p[T+2]=D,p[T+3]=E);else if(b==3){if(E=d[F+3],x=d[F],C=d[F+1],D=d[F+2],U=p[T+3],L=p[T],H=p[T+1],oe=p[T+2],E==U&&x==L&&C==H&&D==oe)continue;if(E<220&&U>20)return!1}return!0}return{decode:function(A){const m=new Uint8Array(A);let p=8;const h=e,y=h.readUshort,g=h.readUint,_={tabs:{},frames:[]},b=new Uint8Array(m.length);let S,B=0,F=0;const T=[137,80,78,71,13,10,26,10];for(var E=0;E<8;E++)if(m[E]!=T[E])throw"The input is not a PNG file!";for(;p<m.length;){const de=h.readUint(m,p);p+=4;const te=h.readASCII(m,p,4);if(p+=4,te=="IHDR")c(m,p,_);else if(te=="iCCP"){for(var x=p;m[x]!=0;)x++;h.readASCII(m,p,x-p),m[x+1];const q=m.slice(x+2,p+de);let ce=null;try{ce=a(q)}catch{ce=r(q)}_.tabs[te]=ce}else if(te=="CgBI")_.tabs[te]=m.slice(p,p+4);else if(te=="IDAT"){for(E=0;E<de;E++)b[B+E]=m[p+E];B+=de}else if(te=="acTL")_.tabs[te]={num_frames:g(m,p),num_plays:g(m,p+4)},S=new Uint8Array(m.length);else if(te=="fcTL"){F!=0&&((oe=_.frames[_.frames.length-1]).data=n(_,S.slice(0,F),oe.rect.width,oe.rect.height),F=0);const q={x:g(m,p+12),y:g(m,p+16),width:g(m,p+4),height:g(m,p+8)};let ce=y(m,p+22);ce=y(m,p+20)/(ce==0?100:ce);const le={rect:q,delay:Math.round(1e3*ce),dispose:m[p+24],blend:m[p+25]};_.frames.push(le)}else if(te=="fdAT"){for(E=0;E<de-4;E++)S[F+E]=m[p+E+4];F+=de-4}else if(te=="pHYs")_.tabs[te]=[h.readUint(m,p),h.readUint(m,p+4),m[p+8]];else if(te=="cHRM")for(_.tabs[te]=[],E=0;E<8;E++)_.tabs[te].push(h.readUint(m,p+4*E));else if(te=="tEXt"||te=="zTXt"){_.tabs[te]==null&&(_.tabs[te]={});var C=h.nextZero(m,p),D=h.readASCII(m,p,C-p),U=p+de-C-1;if(te=="tEXt")H=h.readASCII(m,C+1,U);else{var L=a(m.slice(C+2,C+2+U));H=h.readUTF8(L,0,L.length)}_.tabs[te][D]=H}else if(te=="iTXt"){_.tabs[te]==null&&(_.tabs[te]={}),C=0,x=p,C=h.nextZero(m,x),D=h.readASCII(m,x,C-x);const q=m[x=C+1];var H;m[x+1],x+=2,C=h.nextZero(m,x),h.readASCII(m,x,C-x),x=C+1,C=h.nextZero(m,x),h.readUTF8(m,x,C-x),U=de-((x=C+1)-p),q==0?H=h.readUTF8(m,x,U):(L=a(m.slice(x,x+U)),H=h.readUTF8(L,0,L.length)),_.tabs[te][D]=H}else if(te=="PLTE")_.tabs[te]=h.readBytes(m,p,de);else if(te=="hIST"){const q=_.tabs.PLTE.length/3;for(_.tabs[te]=[],E=0;E<q;E++)_.tabs[te].push(y(m,p+2*E))}else if(te=="tRNS")_.ctype==3?_.tabs[te]=h.readBytes(m,p,de):_.ctype==0?_.tabs[te]=y(m,p):_.ctype==2&&(_.tabs[te]=[y(m,p),y(m,p+2),y(m,p+4)]);else if(te=="gAMA")_.tabs[te]=h.readUint(m,p)/1e5;else if(te=="sRGB")_.tabs[te]=m[p];else if(te=="bKGD")_.ctype==0||_.ctype==4?_.tabs[te]=[y(m,p)]:_.ctype==2||_.ctype==6?_.tabs[te]=[y(m,p),y(m,p+2),y(m,p+4)]:_.ctype==3&&(_.tabs[te]=m[p]);else if(te=="IEND")break;p+=de,h.readUint(m,p),p+=4}var oe;return F!=0&&((oe=_.frames[_.frames.length-1]).data=n(_,S.slice(0,F),oe.rect.width,oe.rect.height)),_.data=n(_,b,_.width,_.height),delete _.compress,delete _.interlace,delete _.filter,_},toRGBA8:function(A){const m=A.width,p=A.height;if(A.tabs.acTL==null)return[t(A.data,m,p,A).buffer];const h=[];A.frames[0].data==null&&(A.frames[0].data=A.data);const y=m*p*4,g=new Uint8Array(y),_=new Uint8Array(y),b=new Uint8Array(y);for(let B=0;B<A.frames.length;B++){const F=A.frames[B],T=F.rect.x,E=F.rect.y,x=F.rect.width,C=F.rect.height,D=t(F.data,x,C,A);if(B!=0)for(var S=0;S<y;S++)b[S]=g[S];if(F.blend==0?f(D,x,C,g,m,p,T,E,0):F.blend==1&&f(D,x,C,g,m,p,T,E,1),h.push(g.buffer.slice(0)),F.dispose!=0){if(F.dispose==1)f(_,x,C,g,m,p,T,E,0);else if(F.dispose==2)for(S=0;S<y;S++)g[S]=b[S]}}return h},_paeth:l,_copyTile:f,_bin:e}})();(function(){const{_copyTile:e}=El,{_bin:t}=El,n=El._paeth;var a={table:(function(){const x=new Uint32Array(256);for(let C=0;C<256;C++){let D=C;for(let U=0;U<8;U++)1&D?D=3988292384^D>>>1:D>>>=1;x[C]=D}return x})(),update(x,C,D,U){for(let L=0;L<U;L++)x=a.table[255&(x^C[D+L])]^x>>>8;return x},crc:(x,C,D)=>4294967295^a.update(4294967295,x,C,D)};function r(x,C,D,U){C[D]+=x[0]*U>>4,C[D+1]+=x[1]*U>>4,C[D+2]+=x[2]*U>>4,C[D+3]+=x[3]*U>>4}function s(x){return Math.max(0,Math.min(255,x))}function o(x,C){const D=x[0]-C[0],U=x[1]-C[1],L=x[2]-C[2],H=x[3]-C[3];return D*D+U*U+L*L+H*H}function l(x,C,D,U,L,H,oe){oe==null&&(oe=1);const de=U.length,te=[];for(var q=0;q<de;q++){const O=U[q];te.push([O>>>0&255,O>>>8&255,O>>>16&255,O>>>24&255])}for(q=0;q<de;q++){let O=4294967295;for(var ce=0,le=0;le<de;le++){var Z=o(te[q],te[le]);le!=q&&Z<O&&(O=Z,ce=le)}}const ne=new Uint32Array(L.buffer),G=new Int16Array(C*D*4),W=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(q=0;q<W.length;q++)W[q]=255*((W[q]+.5)/16-.5);for(let O=0;O<D;O++)for(let ae=0;ae<C;ae++){var Q;q=4*(O*C+ae),oe!=2?Q=[s(x[q]+G[q]),s(x[q+1]+G[q+1]),s(x[q+2]+G[q+2]),s(x[q+3]+G[q+3])]:(Z=W[4*(3&O)+(3&ae)],Q=[s(x[q]+Z),s(x[q+1]+Z),s(x[q+2]+Z),s(x[q+3]+Z)]),ce=0;let j=16777215;for(le=0;le<de;le++){const X=o(Q,te[le]);X<j&&(j=X,ce=le)}const J=te[ce],ie=[Q[0]-J[0],Q[1]-J[1],Q[2]-J[2],Q[3]-J[3]];oe==1&&(ae!=C-1&&r(ie,G,q+4,7),O!=D-1&&(ae!=0&&r(ie,G,q+4*C-4,3),r(ie,G,q+4*C,5),ae!=C-1&&r(ie,G,q+4*C+4,1))),H[q>>2]=ce,ne[q>>2]=U[ce]}}function c(x,C,D,U,L){L==null&&(L={});const{crc:H}=a,oe=t.writeUint,de=t.writeUshort,te=t.writeASCII;let q=8;const ce=x.frames.length>1;let le,Z=!1,ne=33+(ce?20:0);if(L.sRGB!=null&&(ne+=13),L.pHYs!=null&&(ne+=21),L.iCCP!=null&&(le=pako.deflate(L.iCCP),ne+=21+le.length+4),x.ctype==3){for(var G=x.plte.length,W=0;W<G;W++)x.plte[W]>>>24!=255&&(Z=!0);ne+=8+3*G+4+(Z?8+1*G+4:0)}for(var Q=0;Q<x.frames.length;Q++)ce&&(ne+=38),ne+=(J=x.frames[Q]).cimg.length+12,Q!=0&&(ne+=4);ne+=12;const O=new Uint8Array(ne),ae=[137,80,78,71,13,10,26,10];for(W=0;W<8;W++)O[W]=ae[W];if(oe(O,q,13),q+=4,te(O,q,"IHDR"),q+=4,oe(O,q,C),q+=4,oe(O,q,D),q+=4,O[q]=x.depth,q++,O[q]=x.ctype,q++,O[q]=0,q++,O[q]=0,q++,O[q]=0,q++,oe(O,q,H(O,q-17,17)),q+=4,L.sRGB!=null&&(oe(O,q,1),q+=4,te(O,q,"sRGB"),q+=4,O[q]=L.sRGB,q++,oe(O,q,H(O,q-5,5)),q+=4),L.iCCP!=null){const ie=13+le.length;oe(O,q,ie),q+=4,te(O,q,"iCCP"),q+=4,te(O,q,"ICC profile"),q+=11,q+=2,O.set(le,q),q+=le.length,oe(O,q,H(O,q-(ie+4),ie+4)),q+=4}if(L.pHYs!=null&&(oe(O,q,9),q+=4,te(O,q,"pHYs"),q+=4,oe(O,q,L.pHYs[0]),q+=4,oe(O,q,L.pHYs[1]),q+=4,O[q]=L.pHYs[2],q++,oe(O,q,H(O,q-13,13)),q+=4),ce&&(oe(O,q,8),q+=4,te(O,q,"acTL"),q+=4,oe(O,q,x.frames.length),q+=4,oe(O,q,L.loop!=null?L.loop:0),q+=4,oe(O,q,H(O,q-12,12)),q+=4),x.ctype==3){for(oe(O,q,3*(G=x.plte.length)),q+=4,te(O,q,"PLTE"),q+=4,W=0;W<G;W++){const ie=3*W,X=x.plte[W],fe=255&X,M=X>>>8&255,z=X>>>16&255;O[q+ie+0]=fe,O[q+ie+1]=M,O[q+ie+2]=z}if(q+=3*G,oe(O,q,H(O,q-3*G-4,3*G+4)),q+=4,Z){for(oe(O,q,G),q+=4,te(O,q,"tRNS"),q+=4,W=0;W<G;W++)O[q+W]=x.plte[W]>>>24&255;q+=G,oe(O,q,H(O,q-G-4,G+4)),q+=4}}let j=0;for(Q=0;Q<x.frames.length;Q++){var J=x.frames[Q];ce&&(oe(O,q,26),q+=4,te(O,q,"fcTL"),q+=4,oe(O,q,j++),q+=4,oe(O,q,J.rect.width),q+=4,oe(O,q,J.rect.height),q+=4,oe(O,q,J.rect.x),q+=4,oe(O,q,J.rect.y),q+=4,de(O,q,U[Q]),q+=2,de(O,q,1e3),q+=2,O[q]=J.dispose,q++,O[q]=J.blend,q++,oe(O,q,H(O,q-30,30)),q+=4);const ie=J.cimg;oe(O,q,(G=ie.length)+(Q==0?0:4)),q+=4;const X=q;te(O,q,Q==0?"IDAT":"fdAT"),q+=4,Q!=0&&(oe(O,q,j++),q+=4),O.set(ie,q),q+=G,oe(O,q,H(O,X,q-X)),q+=4}return oe(O,q,0),q+=4,te(O,q,"IEND"),q+=4,oe(O,q,H(O,q-4,4)),q+=4,O.buffer}function f(x,C,D){for(let U=0;U<x.frames.length;U++){const L=x.frames[U];L.rect.width;const H=L.rect.height,oe=new Uint8Array(H*L.bpl+H);L.cimg=p(L.img,H,L.bpp,L.bpl,oe,C,D)}}function d(x,C,D,U,L){const H=L[0],oe=L[1],de=L[2],te=L[3],q=L[4],ce=L[5];let le=6,Z=8,ne=255;for(var G=0;G<x.length;G++){const Fe=new Uint8Array(x[G]);for(var W=Fe.length,Q=0;Q<W;Q+=4)ne&=Fe[Q+3]}const O=ne!=255,ae=(function(ye,Qe,_e,Se,Ee,Ue){const je=[];for(var at=0;at<ye.length;at++){const xt=new Uint8Array(ye[at]),Nt=new Uint32Array(xt.buffer);var mt;let At=0,Ot=0,Dt=Qe,bt=_e,Ze=Se?1:0;if(at!=0){const qt=Ue||Se||at==1||je[at-2].dispose!=0?1:2;let Vt=0,zt=1e9;for(let ln=0;ln<qt;ln++){var xe=new Uint8Array(ye[at-1-ln]);const Dn=new Uint32Array(ye[at-1-ln]);let vt=Qe,et=_e,Wt=-1,_n=-1;for(let rt=0;rt<_e;rt++)for(let Pe=0;Pe<Qe;Pe++)Nt[Ye=rt*Qe+Pe]!=Dn[Ye]&&(Pe<vt&&(vt=Pe),Pe>Wt&&(Wt=Pe),rt<et&&(et=rt),rt>_n&&(_n=rt));Wt==-1&&(vt=et=Wt=_n=0),Ee&&((1&vt)==1&&vt--,(1&et)==1&&et--);const na=(Wt-vt+1)*(_n-et+1);na<zt&&(zt=na,Vt=ln,At=vt,Ot=et,Dt=Wt-vt+1,bt=_n-et+1)}xe=new Uint8Array(ye[at-1-Vt]),Vt==1&&(je[at-1].dispose=2),mt=new Uint8Array(Dt*bt*4),e(xe,Qe,_e,mt,Dt,bt,-At,-Ot,0),Ze=e(xt,Qe,_e,mt,Dt,bt,-At,-Ot,3)?1:0,Ze==1?m(xt,Qe,_e,mt,{x:At,y:Ot,width:Dt,height:bt}):e(xt,Qe,_e,mt,Dt,bt,-At,-Ot,0)}else mt=xt.slice(0);je.push({rect:{x:At,y:Ot,width:Dt,height:bt},img:mt,blend:Ze,dispose:0})}if(Se)for(at=0;at<je.length;at++){if((kt=je[at]).blend==1)continue;const xt=kt.rect,Nt=je[at-1].rect,At=Math.min(xt.x,Nt.x),Ot=Math.min(xt.y,Nt.y),Dt={x:At,y:Ot,width:Math.max(xt.x+xt.width,Nt.x+Nt.width)-At,height:Math.max(xt.y+xt.height,Nt.y+Nt.height)-Ot};je[at-1].dispose=1,at-1!=0&&A(ye,Qe,_e,je,at-1,Dt,Ee),A(ye,Qe,_e,je,at,Dt,Ee)}let Be=0;if(ye.length!=1)for(var Ye=0;Ye<je.length;Ye++){var kt;Be+=(kt=je[Ye]).rect.width*kt.rect.height}return je})(x,C,D,H,oe,de),j={},J=[],ie=[];if(U!=0){const Fe=[];for(Q=0;Q<ae.length;Q++)Fe.push(ae[Q].img.buffer);const ye=(function(Ee){let Ue=0;for(var je=0;je<Ee.length;je++)Ue+=Ee[je].byteLength;const at=new Uint8Array(Ue);let mt=0;for(je=0;je<Ee.length;je++){const xe=new Uint8Array(Ee[je]),Be=xe.length;for(let Ye=0;Ye<Be;Ye+=4){let kt=xe[Ye],xt=xe[Ye+1],Nt=xe[Ye+2];const At=xe[Ye+3];At==0&&(kt=xt=Nt=0),at[mt+Ye]=kt,at[mt+Ye+1]=xt,at[mt+Ye+2]=Nt,at[mt+Ye+3]=At}mt+=Be}return at.buffer})(Fe),Qe=y(ye,U);for(Q=0;Q<Qe.plte.length;Q++)J.push(Qe.plte[Q].est.rgba);let _e=0;for(Q=0;Q<ae.length;Q++){const Se=(fe=ae[Q]).img.length;var X=new Uint8Array(Qe.inds.buffer,_e>>2,Se>>2);ie.push(X);const Ee=new Uint8Array(Qe.abuf,_e,Se);ce&&l(fe.img,fe.rect.width,fe.rect.height,J,Ee,X),fe.img.set(Ee),_e+=Se}}else for(G=0;G<ae.length;G++){var fe=ae[G];const Fe=new Uint32Array(fe.img.buffer);var M=fe.rect.width;for(W=Fe.length,X=new Uint8Array(W),ie.push(X),Q=0;Q<W;Q++){const ye=Fe[Q];if(Q!=0&&ye==Fe[Q-1])X[Q]=X[Q-1];else if(Q>M&&ye==Fe[Q-M])X[Q]=X[Q-M];else{let Qe=j[ye];if(Qe==null&&(j[ye]=Qe=J.length,J.push(ye),J.length>=300))break;X[Q]=Qe}}}const z=J.length;for(z<=256&&q==0&&(Z=z<=2?1:z<=4?2:z<=16?4:8,Z=Math.max(Z,te)),G=0;G<ae.length;G++){(fe=ae[G]).rect.x,fe.rect.y,M=fe.rect.width;const Fe=fe.rect.height;let ye=fe.img;new Uint32Array(ye.buffer);let Qe=4*M,_e=4;if(z<=256&&q==0){Qe=Math.ceil(Z*M/8);var se=new Uint8Array(Qe*Fe);const Se=ie[G];for(let Ee=0;Ee<Fe;Ee++){Q=Ee*Qe;const Ue=Ee*M;if(Z==8)for(var be=0;be<M;be++)se[Q+be]=Se[Ue+be];else if(Z==4)for(be=0;be<M;be++)se[Q+(be>>1)]|=Se[Ue+be]<<4-4*(1&be);else if(Z==2)for(be=0;be<M;be++)se[Q+(be>>2)]|=Se[Ue+be]<<6-2*(3&be);else if(Z==1)for(be=0;be<M;be++)se[Q+(be>>3)]|=Se[Ue+be]<<7-1*(7&be)}ye=se,le=3,_e=1}else if(O==0&&ae.length==1){se=new Uint8Array(M*Fe*3);const Se=M*Fe;for(Q=0;Q<Se;Q++){const Ee=3*Q,Ue=4*Q;se[Ee]=ye[Ue],se[Ee+1]=ye[Ue+1],se[Ee+2]=ye[Ue+2]}ye=se,le=2,_e=3,Qe=3*M}fe.img=ye,fe.bpl=Qe,fe.bpp=_e}return{ctype:le,depth:Z,plte:J,frames:ae}}function A(x,C,D,U,L,H,oe){const de=Uint8Array,te=Uint32Array,q=new de(x[L-1]),ce=new te(x[L-1]),le=L+1<x.length?new de(x[L+1]):null,Z=new de(x[L]),ne=new te(Z.buffer);let G=C,W=D,Q=-1,O=-1;for(let j=0;j<H.height;j++)for(let J=0;J<H.width;J++){const ie=H.x+J,X=H.y+j,fe=X*C+ie,M=ne[fe];M==0||U[L-1].dispose==0&&ce[fe]==M&&(le==null||le[4*fe+3]!=0)||(ie<G&&(G=ie),ie>Q&&(Q=ie),X<W&&(W=X),X>O&&(O=X))}Q==-1&&(G=W=Q=O=0),oe&&((1&G)==1&&G--,(1&W)==1&&W--),H={x:G,y:W,width:Q-G+1,height:O-W+1};const ae=U[L];ae.rect=H,ae.blend=1,ae.img=new Uint8Array(H.width*H.height*4),U[L-1].dispose==0?(e(q,C,D,ae.img,H.width,H.height,-H.x,-H.y,0),m(Z,C,D,ae.img,H)):e(Z,C,D,ae.img,H.width,H.height,-H.x,-H.y,0)}function m(x,C,D,U,L){e(x,C,D,U,L.width,L.height,-L.x,-L.y,2)}function p(x,C,D,U,L,H,oe){const de=[];let te,q=[0,1,2,3,4];H!=-1?q=[H]:(C*U>5e5||D==1)&&(q=[0]),oe&&(te={level:0});const ce=Nke;for(var le=0;le<q.length;le++){for(let G=0;G<C;G++)h(L,x,G,U,D,q[le]);de.push(ce.deflate(L,te))}let Z,ne=1e9;for(le=0;le<de.length;le++)de[le].length<ne&&(Z=le,ne=de[le].length);return de[Z]}function h(x,C,D,U,L,H){const oe=D*U;let de=oe+D;if(x[de]=H,de++,H==0)if(U<500)for(var te=0;te<U;te++)x[de+te]=C[oe+te];else x.set(new Uint8Array(C.buffer,oe,U),de);else if(H==1){for(te=0;te<L;te++)x[de+te]=C[oe+te];for(te=L;te<U;te++)x[de+te]=C[oe+te]-C[oe+te-L]+256&255}else if(D==0){for(te=0;te<L;te++)x[de+te]=C[oe+te];if(H==2)for(te=L;te<U;te++)x[de+te]=C[oe+te];if(H==3)for(te=L;te<U;te++)x[de+te]=C[oe+te]-(C[oe+te-L]>>1)+256&255;if(H==4)for(te=L;te<U;te++)x[de+te]=C[oe+te]-n(C[oe+te-L],0,0)+256&255}else{if(H==2)for(te=0;te<U;te++)x[de+te]=C[oe+te]+256-C[oe+te-U]&255;if(H==3){for(te=0;te<L;te++)x[de+te]=C[oe+te]+256-(C[oe+te-U]>>1)&255;for(te=L;te<U;te++)x[de+te]=C[oe+te]+256-(C[oe+te-U]+C[oe+te-L]>>1)&255}if(H==4){for(te=0;te<L;te++)x[de+te]=C[oe+te]+256-n(0,C[oe+te-U],0)&255;for(te=L;te<U;te++)x[de+te]=C[oe+te]+256-n(C[oe+te-L],C[oe+te-U],C[oe+te-L-U])&255}}}function y(x,C){const D=new Uint8Array(x),U=D.slice(0),L=new Uint32Array(U.buffer),H=g(U,C),oe=H[0],de=H[1],te=D.length,q=new Uint8Array(te>>2);let ce;if(D.length<2e7)for(var le=0;le<te;le+=4)ce=_(oe,Z=D[le]*(1/255),ne=D[le+1]*(1/255),G=D[le+2]*(1/255),W=D[le+3]*(1/255)),q[le>>2]=ce.ind,L[le>>2]=ce.est.rgba;else for(le=0;le<te;le+=4){var Z=D[le]*.00392156862745098,ne=D[le+1]*(1/255),G=D[le+2]*(1/255),W=D[le+3]*(1/255);for(ce=oe;ce.left;)ce=b(ce.est,Z,ne,G,W)<=0?ce.left:ce.right;q[le>>2]=ce.ind,L[le>>2]=ce.est.rgba}return{abuf:U.buffer,inds:q,plte:de}}function g(x,C,D){D==null&&(D=1e-4);const U=new Uint32Array(x.buffer),L={i0:0,i1:x.length,bst:null,est:null,tdst:0,left:null,right:null};L.bst=F(x,L.i0,L.i1),L.est=T(L.bst);const H=[L];for(;H.length<C;){let de=0,te=0;for(var oe=0;oe<H.length;oe++)H[oe].est.L>de&&(de=H[oe].est.L,te=oe);if(de<D)break;const q=H[te],ce=S(x,U,q.i0,q.i1,q.est.e,q.est.eMq255);if(q.i0>=ce||q.i1<=ce){q.est.L=0;continue}const le={i0:q.i0,i1:ce,bst:null,est:null,tdst:0,left:null,right:null};le.bst=F(x,le.i0,le.i1),le.est=T(le.bst);const Z={i0:ce,i1:q.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Z.bst={R:[],m:[],N:q.bst.N-le.bst.N},oe=0;oe<16;oe++)Z.bst.R[oe]=q.bst.R[oe]-le.bst.R[oe];for(oe=0;oe<4;oe++)Z.bst.m[oe]=q.bst.m[oe]-le.bst.m[oe];Z.est=T(Z.bst),q.left=le,q.right=Z,H[te]=le,H.push(Z)}for(H.sort(((de,te)=>te.bst.N-de.bst.N)),oe=0;oe<H.length;oe++)H[oe].ind=oe;return[L,H]}function _(x,C,D,U,L){if(x.left==null)return x.tdst=(function(le,Z,ne,G,W){const Q=Z-le[0],O=ne-le[1],ae=G-le[2],j=W-le[3];return Q*Q+O*O+ae*ae+j*j})(x.est.q,C,D,U,L),x;const H=b(x.est,C,D,U,L);let oe=x.left,de=x.right;H>0&&(oe=x.right,de=x.left);const te=_(oe,C,D,U,L);if(te.tdst<=H*H)return te;const q=_(de,C,D,U,L);return q.tdst<te.tdst?q:te}function b(x,C,D,U,L){const{e:H}=x;return H[0]*C+H[1]*D+H[2]*U+H[3]*L-x.eMq}function S(x,C,D,U,L,H){for(U-=4;D<U;){for(;B(x,D,L)<=H;)D+=4;for(;B(x,U,L)>H;)U-=4;if(D>=U)break;const oe=C[D>>2];C[D>>2]=C[U>>2],C[U>>2]=oe,D+=4,U-=4}for(;B(x,D,L)>H;)D-=4;return D+4}function B(x,C,D){return x[C]*D[0]+x[C+1]*D[1]+x[C+2]*D[2]+x[C+3]*D[3]}function F(x,C,D){const U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L=[0,0,0,0],H=D-C>>2;for(let oe=C;oe<D;oe+=4){const de=x[oe]*.00392156862745098,te=x[oe+1]*(1/255),q=x[oe+2]*(1/255),ce=x[oe+3]*(1/255);L[0]+=de,L[1]+=te,L[2]+=q,L[3]+=ce,U[0]+=de*de,U[1]+=de*te,U[2]+=de*q,U[3]+=de*ce,U[5]+=te*te,U[6]+=te*q,U[7]+=te*ce,U[10]+=q*q,U[11]+=q*ce,U[15]+=ce*ce}return U[4]=U[1],U[8]=U[2],U[9]=U[6],U[12]=U[3],U[13]=U[7],U[14]=U[11],{R:U,m:L,N:H}}function T(x){const{R:C}=x,{m:D}=x,{N:U}=x,L=D[0],H=D[1],oe=D[2],de=D[3],te=U==0?0:1/U,q=[C[0]-L*L*te,C[1]-L*H*te,C[2]-L*oe*te,C[3]-L*de*te,C[4]-H*L*te,C[5]-H*H*te,C[6]-H*oe*te,C[7]-H*de*te,C[8]-oe*L*te,C[9]-oe*H*te,C[10]-oe*oe*te,C[11]-oe*de*te,C[12]-de*L*te,C[13]-de*H*te,C[14]-de*oe*te,C[15]-de*de*te],ce=q,le=E;let Z=[Math.random(),Math.random(),Math.random(),Math.random()],ne=0,G=0;if(U!=0)for(let Q=0;Q<16&&(Z=le.multVec(ce,Z),G=Math.sqrt(le.dot(Z,Z)),Z=le.sml(1/G,Z),!(Q!=0&&Math.abs(G-ne)<1e-9));Q++)ne=G;const W=[L*te,H*te,oe*te,de*te];return{Cov:q,q:W,e:Z,L:ne,eMq255:le.dot(le.sml(255,W),Z),eMq:le.dot(Z,W),rgba:(Math.round(255*W[3])<<24|Math.round(255*W[2])<<16|Math.round(255*W[1])<<8|Math.round(255*W[0])<<0)>>>0}}var E={multVec:(x,C)=>[x[0]*C[0]+x[1]*C[1]+x[2]*C[2]+x[3]*C[3],x[4]*C[0]+x[5]*C[1]+x[6]*C[2]+x[7]*C[3],x[8]*C[0]+x[9]*C[1]+x[10]*C[2]+x[11]*C[3],x[12]*C[0]+x[13]*C[1]+x[14]*C[2]+x[15]*C[3]],dot:(x,C)=>x[0]*C[0]+x[1]*C[1]+x[2]*C[2]+x[3]*C[3],sml:(x,C)=>[x*C[0],x*C[1],x*C[2],x*C[3]]};El.encode=function(C,D,U,L,H,oe,de){L==null&&(L=0),de==null&&(de=!1);const te=d(C,D,U,L,[!1,!1,!1,0,de,!1]);return f(te,-1),c(te,D,U,H,oe)},El.encodeLL=function(C,D,U,L,H,oe,de,te){const q={ctype:0+(L==1?0:2)+(H==0?0:4),depth:oe,frames:[]},ce=(L+H)*oe,le=ce*D;for(let Z=0;Z<C.length;Z++)q.frames.push({rect:{x:0,y:0,width:D,height:U},img:new Uint8Array(C[Z]),blend:0,dispose:1,bpp:Math.ceil(ce/8),bpl:Math.ceil(le/8)});return f(q,0,!0),c(q,D,U,de,te)},El.encode.compress=d,El.encode.dither=l,El.quantize=y,El.quantize.getKDtree=g,El.quantize.getNearest=_})();const OH={toArrayBuffer(e,t){const n=e.width,a=e.height,r=n<<2,s=e.getContext("2d").getImageData(0,0,n,a),o=new Uint32Array(s.data.buffer),l=(32*n+31)/32<<2,c=l*a,f=122+c,d=new ArrayBuffer(f),A=new DataView(d),m=1<<20;let p,h,y,g,_=m,b=0,S=0,B=0;function F(x){A.setUint16(S,x,!0),S+=2}function T(x){A.setUint32(S,x,!0),S+=4}function E(x){S+=x}F(19778),T(f),E(4),T(122),T(108),T(n),T(-a>>>0),F(1),F(32),T(3),T(c),T(2835),T(2835),E(8),T(16711680),T(65280),T(255),T(4278190080),T(1466527264),(function x(){for(;b<a&&_>0;){for(g=122+b*l,p=0;p<r;)_--,h=o[B++],y=h>>>24,A.setUint32(g+p,h<<8|y),p+=4;b++}B<o.length?(_=m,setTimeout(x,OH._dly)):t(d)})()},toBlob(e,t){this.toArrayBuffer(e,(n=>{t(new Blob([n],{type:"image/bmp"}))}))},_dly:9};var ii={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Vke={[ii.CHROME]:16384,[ii.FIREFOX]:11180,[ii.DESKTOP_SAFARI]:16384,[ii.IE]:8192,[ii.IOS]:4096,[ii.ETC]:8192};const IT=typeof window<"u",HH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,v2=IT&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Lke=(IT||HH)&&(v2&&v2.getOriginalSymbol(window,"File")||typeof File<"u"&&File),$H=(IT||HH)&&(v2&&v2.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function FT(e,t,n=Date.now()){return new Promise((a=>{const r=e.split(","),s=r[0].match(/:(.*?);/)[1],o=globalThis.atob(r[1]);let l=o.length;const c=new Uint8Array(l);for(;l--;)c[l]=o.charCodeAt(l);const f=new Blob([c],{type:s});f.name=t,f.lastModified=n,a(f)}))}function QH(e){return new Promise(((t,n)=>{const a=new $H;a.onload=()=>t(a.result),a.onerror=r=>n(r),a.readAsDataURL(e)}))}function GH(e){return new Promise(((t,n)=>{const a=new Image;a.onload=()=>t(a),a.onerror=r=>n(r),a.src=e}))}function Xf(){if(Xf.cachedResult!==void 0)return Xf.cachedResult;let e=ii.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=ii.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=ii.IOS:/Safari/i.test(t)?e=ii.DESKTOP_SAFARI:/Firefox/i.test(t)?e=ii.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=ii.IE),Xf.cachedResult=e,Xf.cachedResult}function zH(e,t){const n=Xf(),a=Vke[n];let r=e,s=t,o=r*s;const l=r>s?s/r:r/s;for(;o>a*a;){const c=(a+r)/2,f=(a+s)/2;c<f?(s=f,r=f*l):(s=c*l,r=c),o=r*s}return{width:r,height:s}}function zw(e,t){let n,a;try{if(n=new OffscreenCanvas(e,t),a=n.getContext("2d"),a===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),a=n.getContext("2d")}return n.width=e,n.height=t,[n,a]}function WH(e,t){const{width:n,height:a}=zH(e.width,e.height),[r,s]=zw(n,a);return t&&/jpe?g/.test(t)&&(s.fillStyle="white",s.fillRect(0,0,r.width,r.height)),s.drawImage(e,0,0,r.width,r.height),r}function h_(){return h_.cachedResult!==void 0||(h_.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),h_.cachedResult}function h2(e,t={}){return new Promise((function(n,a){let r,s;var o=function(){try{return s=WH(r,t.fileType||e.type),n([r,s])}catch(c){return a(c)}},l=function(c){try{var f=function(d){try{throw d}catch(A){return a(A)}};try{let d;return QH(e).then((function(A){try{return d=A,GH(d).then((function(m){try{return r=m,(function(){try{return o()}catch(p){return a(p)}})()}catch(p){return f(p)}}),f)}catch(m){return f(m)}}),f)}catch(d){f(d)}}catch(d){return a(d)}};try{if(h_()||[ii.DESKTOP_SAFARI,ii.MOBILE_SAFARI].includes(Xf()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(c){try{return r=c,o()}catch{return l()}}),l)}catch{l()}}))}function p2(e,t,n,a,r=1){return new Promise((function(s,o){let l;if(t==="image/png"){let f,d,A;return f=e.getContext("2d"),{data:d}=f.getImageData(0,0,e.width,e.height),A=El.encode([d.buffer],e.width,e.height,4096*r),l=new Blob([A],{type:t}),l.name=n,l.lastModified=a,c.call(this)}{let f=function(){return c.call(this)};if(t==="image/bmp")return new Promise((d=>OH.toBlob(e,d))).then((function(d){try{return l=d,l.name=n,l.lastModified=a,f.call(this)}catch(A){return o(A)}}).bind(this),o);{let d=function(){return f.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:r}).then((function(A){try{return l=A,l.name=n,l.lastModified=a,d.call(this)}catch(m){return o(m)}}).bind(this),o);{let A;return A=e.toDataURL(t,r),FT(A,n,a).then((function(m){try{return l=m,d.call(this)}catch(p){return o(p)}}).bind(this),o)}}}function c(){return s(l)}}))}function Cu(e){e.width=0,e.height=0}function ov(){return new Promise((function(e,t){let n,a,r,s;return ov.cachedResult!==void 0?e(ov.cachedResult):FT("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(o){try{return n=o,h2(n).then((function(l){try{return a=l[1],p2(a,n.type,n.name,n.lastModified).then((function(c){try{return r=c,Cu(a),h2(r).then((function(f){try{return s=f[0],ov.cachedResult=s.width===1&&s.height===2,e(ov.cachedResult)}catch(d){return t(d)}}),t)}catch(f){return t(f)}}),t)}catch(c){return t(c)}}),t)}catch(l){return t(l)}}),t)}))}function KH(e){return new Promise(((t,n)=>{const a=new $H;a.onload=r=>{const s=new DataView(r.target.result);if(s.getUint16(0,!1)!=65496)return t(-2);const o=s.byteLength;let l=2;for(;l<o;){if(s.getUint16(l+2,!1)<=8)return t(-1);const c=s.getUint16(l,!1);if(l+=2,c==65505){if(s.getUint32(l+=2,!1)!=1165519206)return t(-1);const f=s.getUint16(l+=6,!1)==18761;l+=s.getUint32(l+4,f);const d=s.getUint16(l,f);l+=2;for(let A=0;A<d;A++)if(s.getUint16(l+12*A,f)==274)return t(s.getUint16(l+12*A+8,f))}else{if((65280&c)!=65280)break;l+=s.getUint16(l,!1)}}return t(-1)},a.onerror=r=>n(r),a.readAsArrayBuffer(e)}))}function jH(e,t){const{width:n}=e,{height:a}=e,{maxWidthOrHeight:r}=t;let s,o=e;return isFinite(r)&&(n>r||a>r)&&([o,s]=zw(n,a),n>a?(o.width=r,o.height=a/n*r):(o.width=n/a*r,o.height=r),s.drawImage(e,0,0,o.width,o.height),Cu(e)),o}function qH(e,t){const{width:n}=e,{height:a}=e,[r,s]=zw(n,a);switch(t>4&&t<9?(r.width=a,r.height=n):(r.width=n,r.height=a),t){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,a);break;case 4:s.transform(1,0,0,-1,0,a);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,a,0);break;case 7:s.transform(0,-1,-1,0,a,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(e,0,0,n,a),Cu(e),r}function dR(e,t,n=0){return new Promise((function(a,r){let s,o,l,c,f,d,A,m,p,h,y,g,_,b,S,B,F,T,E,x;function C(U=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;s+=U,t.onProgress(Math.min(s,100))}function D(U){if(t.signal&&t.signal.aborted)throw t.signal.reason;s=Math.min(Math.max(U,s),100),t.onProgress(s)}return s=n,o=t.maxIteration||10,l=1024*t.maxSizeMB*1024,C(),h2(e,t).then((function(U){try{return[,c]=U,C(),f=jH(c,t),C(),new Promise((function(L,H){var oe;if(!(oe=t.exifOrientation))return KH(e).then((function(te){try{return oe=te,de.call(this)}catch(q){return H(q)}}).bind(this),H);function de(){return L(oe)}return de.call(this)})).then((function(L){try{return d=L,C(),ov().then((function(H){try{return A=H?f:qH(f,d),C(),m=t.initialQuality||1,p=t.fileType||e.type,p2(A,p,e.name,e.lastModified,m).then((function(oe){try{{let te=function(){if(o--&&(S>l||S>_)){let ce,le;return ce=x?.95*E.width:E.width,le=x?.95*E.height:E.height,[F,T]=zw(ce,le),T.drawImage(E,0,0,ce,le),m*=p==="image/png"?.85:.95,p2(F,p,e.name,e.lastModified,m).then((function(Z){try{return B=Z,Cu(E),E=F,S=B.size,D(Math.min(99,Math.floor((b-S)/(b-l)*100))),te}catch(ne){return r(ne)}}),r)}return[1]},q=function(){return Cu(E),Cu(F),Cu(f),Cu(A),Cu(c),D(100),a(B)};if(h=oe,C(),y=h.size>l,g=h.size>e.size,!y&&!g)return D(100),a(h);var de;return _=e.size,b=h.size,S=b,E=A,x=!t.alwaysKeepResolution&&y,(de=(function(ce){for(;ce;){if(ce.then)return void ce.then(de,r);try{if(ce.pop){if(ce.length)return ce.pop()?q.call(this):ce;ce=te}else ce=ce.call(this)}catch(le){return r(le)}}}).bind(this))(te)}}catch(te){return r(te)}}).bind(this),r)}catch(oe){return r(oe)}}).bind(this),r)}catch(H){return r(H)}}).bind(this),r)}catch(L){return r(L)}}).bind(this),r)}))}const Mke=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let UC;function Oke(e,t){return new Promise(((n,a)=>{UC||(UC=(function(o){const l=[];return l.push(o),URL.createObjectURL(new Blob(l))})(Mke));const r=new Worker(UC);r.addEventListener("message",(function(o){if(t.signal&&t.signal.aborted)r.terminate();else if(o.data.progress===void 0){if(o.data.error)return a(new Error(o.data.error)),void r.terminate();n(o.data.file),r.terminate()}else t.onProgress(o.data.progress)})),r.addEventListener("error",a),t.signal&&t.signal.addEventListener("abort",(()=>{a(t.signal.reason),r.terminate()})),r.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function us(e,t){return new Promise((function(n,a){let r,s,o,l,c,f;if(r={...t},o=0,{onProgress:l}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=p=>{o=p,typeof l=="function"&&l(o)},!(e instanceof Blob||e instanceof Lke))return a(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return a(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||f)return dR(e,r).then((function(p){try{return s=p,m.call(this)}catch(h){return a(h)}}).bind(this),a);var d=(function(){try{return m.call(this)}catch(p){return a(p)}}).bind(this),A=function(p){try{return dR(e,r).then((function(h){try{return s=h,d()}catch(y){return a(y)}}),a)}catch(h){return a(h)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Oke(e,r).then((function(p){try{return s=p,d()}catch{return A()}}),A)}catch{A()}function m(){try{s.name=e.name,s.lastModified=e.lastModified}catch{}try{r.preserveExif&&e.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===e.type)&&(s=MH(e,s))}catch{}return n(s)}}))}us.getDataUrlFromFile=QH,us.getFilefromDataUrl=FT,us.loadImage=GH,us.drawImageInCanvas=WH,us.drawFileInCanvas=h2,us.canvasToFile=p2,us.getExifOrientation=KH,us.handleMaxWidthOrHeight=jH,us.followExifOrientation=qH,us.cleanupCanvasMemory=Cu,us.isAutoOrientationInBrowser=ov,us.approximateBelowMaximumCanvasSizeOfBrowser=zH,us.copyExifWithoutOrientation=MH,us.getBrowserName=Xf,us.version="2.0.2";const Hke={class:"text-caption"},$ke={key:1,class:"text-overline grey--text text--darken-3 mx-2"},Qke={class:"mb-3"},Gke={class:"text-body-2"},zke={class:"text-body-2"},Wke={class:"text-caption text-grey-600"},Kke={class:"d-flex justify-center"},jke={class:"text-center text-caption mt-2 text-info"},fR={__name:"upload-dialog",props:{consultation:{type:Object,required:!1},procedure:{type:Object,required:!1},patient:{type:Object,required:!1}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=R([]),s=R(!1),o=R(""),l=R(null),c=R([]),f=R(""),d=R(null),A=R(""),m=R("fast"),p=R([]),h=[{title:"Skip Compression",value:"none",subtitle:"Upload files without compression (fastest)"},{title:"Fast Compression",value:"fast",subtitle:"Quick compression, minimal quality loss"},{title:"Balanced",value:"balanced",subtitle:"Good balance of quality and size"},{title:"High Quality",value:"high",subtitle:"Best quality, larger files"},{title:"Aggressive",value:"aggressive",subtitle:"Smaller files, some quality loss"},{title:"Ultra",value:"ultra",subtitle:"Maximum compression, noticeable quality loss"}],y=Pke(),g=y.limits,_=y.acceptedTypes,b=["before_image","after_image","prescription","report","consent_letter"],S=ee(()=>l.value&&l.value.validFiles.length>0),B=ee(()=>S.value&&o.value&&!s.value),F=ee(()=>l.value?.validFiles?l.value.validFiles.some(Z=>Z.file.type.startsWith("image/")):!1),T=ee(()=>{if(!l.value?.validFiles)return"";const Z=l.value.validFiles.filter(j=>j.file.type.startsWith("image/"));if(Z.length===0)return"";const ne=Z.reduce((j,J)=>j+J.file.size,0),G=(ne/(1024*1024)).toFixed(2),W={high:.7,balanced:.5,aggressive:.3,ultra:.2},O=(ne*W[m.value]/(1024*1024)).toFixed(2),ae=((1-W[m.value])*100).toFixed(0);return`${G}MB  ${O}MB (${ae}% reduction)`}),E=()=>{if(!l.value?.validFiles){p.value=[];return}const Z=l.value.validFiles.filter(G=>G.file.type.startsWith("image/")),ne={high:.7,balanced:.5,aggressive:.3,ultra:.2};p.value=Z.map(G=>{const W=G.file.size,Q=(W/(1024*1024)).toFixed(2),ae=(W*ne[m.value]/(1024*1024)).toFixed(2),j=((1-ne[m.value])*100).toFixed(0);return{name:G.file.name,originalSize:`${Q}MB`,estimatedSize:`${ae}MB`,reduction:j}})},x=Z=>{if(f.value="",c.value=[],l.value=null,!Z||Z.length===0)return;const ne=Ike(Z);l.value=ne;const G=Fke(ne);c.value=G,!ne.success&&!ne.hasWarnings&&(f.value="Selected files cannot be uploaded due to validation errors"),console.log("File validation result:",ne)};Ge(r,x);const C=Z=>({image:"mdi-image",document:"mdi-file-document",video:"mdi-video",other:"mdi-file"})[Z]||"mdi-file",D=Z=>({image:"success",document:"info",video:"warning",other:"grey"})[Z]||"grey",U={high:{maxSizeMB:2,maxWidthOrHeight:2048,quality:.9,fileType:"image/jpeg"},balanced:{maxSizeMB:1,maxWidthOrHeight:1920,quality:.85,fileType:"image/jpeg"},aggressive:{maxSizeMB:.5,maxWidthOrHeight:1600,quality:.75,fileType:"image/jpeg"},ultra:{maxSizeMB:.25,maxWidthOrHeight:1200,quality:.65,fileType:"image/jpeg"}},L=Z=>{const ne=Z.size/1048576;return(Z.name.toLowerCase().includes("xray")||Z.name.toLowerCase().includes("scan")||Z.name.toLowerCase().includes("mri"))&&ne<=5&&m.value!=="ultra"?U.high:U[m.value]||U.balanced};Ge([l,m],()=>{E()},{immediate:!0});const H=async Z=>new Promise(ne=>{const G=document.createElement("canvas"),W=G.getContext("2d"),Q=new Image;Q.onload=()=>{requestAnimationFrame(()=>{G.width=Q.width,G.height=Q.height,W.drawImage(Q,0,0),window.requestIdleCallback?requestIdleCallback(()=>{G.toBlob(O=>{const ae=new File([O],Z.name,{type:Z.type,lastModified:Date.now()});ne(ae)},Z.type,.95)}):setTimeout(()=>{G.toBlob(O=>{const ae=new File([O],Z.name,{type:Z.type,lastModified:Date.now()});ne(ae)},Z.type,.95)},0)})},Q.src=URL.createObjectURL(Z)}),oe=Z=>{const ne=Z.type==="image/png"&&Z.name.toLowerCase().includes("transparent");return Z.type==="image/png"||ne?"image/png":"image/jpeg"},de=async Z=>{if(!Z.type.startsWith("image/"))return Z;try{const ne=Z.size;console.log(`Compressing image: ${Z.name} (${(ne/1024/1024).toFixed(2)}MB)`);const G=await H(Z);console.log(`Metadata stripped: ${(G.size/1024/1024).toFixed(2)}MB`);let W;if(m.value==="fast")W={maxSizeMB:1,maxWidthOrHeight:1200,quality:.7,fileType:"image/jpeg",useWebWorker:!1,initialQuality:.7};else{W=L(G);const J=oe(G);W.fileType=J}let Q=await us(G,W);const O=Q.size/ne;if(O>.8){if(console.log(`Primary compression insufficient (${(O*100).toFixed(1)}%), trying alternatives...`),W.fileType!=="image/jpeg"){const J={...W,fileType:"image/jpeg",quality:Math.max(.6,W.quality-.1)},ie=await us(G,J);ie.size<Q.size&&(Q=ie,console.log("JPEG compression was better"))}if(Q.size/ne>.7){console.log("Still too large, applying ultra compression...");const ie=await us(G,{maxSizeMB:.2,maxWidthOrHeight:1e3,quality:.6,fileType:"image/jpeg",useWebWorker:!0});ie.size<Q.size&&(Q=ie,console.log("Ultra compression applied"))}}const ae=Q.size,j=((1-ae/ne)*100).toFixed(1);return console.log(`Final compression: ${Z.name} -> ${(ae/1024/1024).toFixed(2)}MB (${j}% reduction)`),Q}catch(ne){console.warn(`Failed to compress ${Z.name}:`,ne);try{return console.log(`Attempting fallback JPEG compression for ${Z.name}`),await us(Z,{maxSizeMB:1,maxWidthOrHeight:1600,quality:.7,fileType:"image/jpeg",useWebWorker:!0})}catch(G){return console.warn(`Fallback compression also failed for ${Z.name}:`,G),Z}}},te=async(Z,ne=null)=>{const G=[];let W=0;for(let Q=0;Q<Z.length;Q++){const O=Z[Q];if(O.type.startsWith("image/")){if(m.value==="none"||O.size>10*1024*1024){console.log(`Skipping compression for file: ${O.name} (${(O.size/1024/1024).toFixed(2)}MB)`),G.push(O),W++;continue}ne&&ne(Math.round(W/Z.length*100),`Compressing ${O.name}...`);const ae=await new Promise(j=>{setTimeout(async()=>{try{await new Promise(fe=>setTimeout(fe,0));const J=de(O),ie=new Promise((fe,M)=>setTimeout(()=>M(new Error("Compression timeout")),1e4)),X=await Promise.race([J,ie]);j(X)}catch(J){console.error("Compression error:",J),j(O)}},0)});G.push(ae)}else G.push(O);W++,Q<Z.length-1&&await new Promise(ae=>setTimeout(ae,50))}return ne&&ne(100,"Compression complete!"),G},q=()=>{a("close")},ce=()=>{r.value=[],o.value="",l.value=null,c.value=[],f.value=""},le=async()=>{if(!B.value){console.warn("Cannot upload: validation failed or missing file type");return}s.value=!0;try{const Z=l.value.validFiles.map(ie=>ie.file);if(Z.length===0)throw new Error("No valid files to upload");console.log("Compressing images before upload..."),d.value=0,A.value="Starting compression...";const ne=await te(Z,(ie,X)=>{d.value=ie,A.value=X}),G=new FormData;ne.forEach(ie=>{G.append("files",ie)});const W={tag:o.value},Q=n.consultation?.id,O=Q&&Q!==0&&Q!=="0",ae=n.procedure?.id,j=ae&&ae!==0&&ae!=="0";if(O)W.consultationId=Q;else if(j)W.treatmentPlanId=ae;else if(n.patient?.id)W.patientId=n.patient.id;else throw new Error("Either consultation, procedure, or patient ID is required");console.log("Uploading files:",{fileCount:ne.length,totalSize:ne.reduce((ie,X)=>ie+X.size,0),tag:o.value,params:W});const J=await it.post("/upload/",G,{params:W,headers:{"Content-Type":"multipart/form-data"}});console.log("Upload successful:",J.data)}catch(Z){console.error("Upload failed:",Z)}finally{s.value=!1,d.value=null,A.value="",q()}};return(Z,ne)=>{const G=I("v-chip"),W=I("v-card-title"),Q=I("v-col"),O=I("v-icon"),ae=I("v-btn"),j=I("v-tooltip"),J=I("v-row"),ie=I("v-card"),X=I("v-file-input"),fe=I("v-alert"),M=I("v-expansion-panel-title"),z=I("v-list-item-title"),se=I("v-list-item-subtitle"),be=I("v-list-item"),Fe=I("v-list"),ye=I("v-expansion-panel-text"),Qe=I("v-expansion-panel"),_e=I("v-expansion-panels"),Se=I("v-select"),Ee=I("v-divider"),Ue=I("v-progress-linear");return P(),he(ie,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[i(J,{"no-gutters":""},{default:u(()=>[i(Q,{cols:"12"},{default:u(()=>[i(ie,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(J,{"no-gutters":""},{default:u(()=>[i(Q,{cols:"10"},{default:u(()=>[i(W,{class:"pa-0 pl-2"},{default:u(()=>[ne[3]||(ne[3]=N(" Medical File Upload ",-1)),i(G,{size:"small",color:"info",class:"ml-2"},{default:u(()=>[N(" Max: "+K(Oe(g).maxFiles)+" files, "+K(Oe(g).maxFileSize),1)]),_:1})]),_:1})]),_:1}),i(Q,{cols:"2",class:"d-flex justify-end align-center"},{default:u(()=>[i(j,{"max-width":"400"},{activator:u(({props:je})=>[i(ae,Ie({icon:"",size:"x-small"},je,{class:"mr-1"}),{default:u(()=>[i(O,null,{default:u(()=>[...ne[4]||(ne[4]=[N("mdi-help-circle-outline",-1)])]),_:1})]),_:1},16)]),default:u(()=>[v("div",Hke,[ne[5]||(ne[5]=v("strong",null,"File Limits:",-1)),ne[6]||(ne[6]=v("br",null,null,-1)),N("  Maximum "+K(Oe(g).maxFiles)+" files per upload",1),ne[7]||(ne[7]=v("br",null,null,-1)),N("  Maximum "+K(Oe(g).maxFileSize)+" per file",1),ne[8]||(ne[8]=v("br",null,null,-1)),ne[9]||(ne[9]=v("br",null,null,-1)),ne[10]||(ne[10]=v("strong",null,"Accepted Types:",-1)),ne[11]||(ne[11]=v("br",null,null,-1)),N("  Images: "+K(Oe(_).images),1),ne[12]||(ne[12]=v("br",null,null,-1)),N("  Documents: "+K(Oe(_).documents),1),ne[13]||(ne[13]=v("br",null,null,-1)),N("  Videos: "+K(Oe(_).videos),1)])]),_:1}),i(ae,{icon:"",size:"x-small",onClick:q,class:"btn-hover-base"},{default:u(()=>[i(O,null,{default:u(()=>[...ne[14]||(ne[14]=[v("img",{src:su,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(J,{"no-gutters":""},{default:u(()=>[i(Q,{cols:"12"},{default:u(()=>[i(ie,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[i(J,{"no-gutters":""},{default:u(()=>[i(Q,{cols:"12"},{default:u(()=>[i(X,{modelValue:r.value,"onUpdate:modelValue":[ne[0]||(ne[0]=je=>r.value=je),x],loading:s.value,density:"comfortable",variant:"solo-inverted",counter:"",clearable:"",accept:"image/*,application/*,video/*",label:"Select medical files",chips:"",multiple:"",error:!!f.value,"error-messages":f.value},{selection:u(({fileNames:je,index:at})=>[at<2?(P(),he(G,{key:0,color:"primary",size:"small",class:"me-2"},{default:u(()=>[N(K(je[at]),1)]),_:2},1024)):at===2?(P(),Ae("span",$ke," +"+K(r.value.length-2)+" File(s) ",1)):ge("",!0)]),_:1},8,["modelValue","loading","error","error-messages"])]),_:1}),c.value.length>0?(P(),he(Q,{key:0,cols:"12"},{default:u(()=>[v("div",Qke,[(P(!0),Ae(ze,null,Jt(c.value,(je,at)=>(P(),he(fe,{key:at,type:je.type,title:je.title,text:je.message,class:"mb-2",density:"compact",variant:"tonal"},null,8,["type","title","text"]))),128))])]),_:1})):ge("",!0),l.value&&l.value.validFiles.length>0?(P(),he(Q,{key:1,cols:"12"},{default:u(()=>[i(_e,{variant:"accordion",class:"mb-3"},{default:u(()=>[i(Qe,null,{default:u(()=>[i(M,null,{default:u(()=>[v("span",Gke,"  "+K(l.value.summary.validFiles)+" Valid Files ("+K(l.value.summary.formattedTotalSize)+") ",1)]),_:1}),i(ye,null,{default:u(()=>[i(Fe,{dense:"",class:"py-0"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(l.value.validFiles,je=>(P(),he(be,{key:je.index,class:"px-0 py-1"},{prepend:u(()=>[i(O,{size:"small",color:D(je.category)},{default:u(()=>[N(K(C(je.category)),1)]),_:2},1032,["color"])]),default:u(()=>[i(z,{class:"text-caption"},{default:u(()=>[N(K(je.file.name),1)]),_:2},1024),i(se,{class:"text-caption"},{default:u(()=>[N(K(je.formattedSize)+"  "+K(je.category),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0),i(Q,{cols:"12"},{default:u(()=>[i(Se,{modelValue:o.value,"onUpdate:modelValue":ne[1]||(ne[1]=je=>o.value=je),density:"comfortable",variant:"solo-inverted",items:b,label:"Select type",disabled:!S.value},null,8,["modelValue","disabled"])]),_:1}),S.value&&F.value?(P(),he(Q,{key:2,cols:"12"},{default:u(()=>[i(_e,{variant:"accordion",class:"mb-3"},{default:u(()=>[i(Qe,null,{default:u(()=>[i(M,null,{default:u(()=>[v("span",zke,[ne[15]||(ne[15]=N("  Image Compression Settings ",-1)),i(G,{size:"x-small",color:"info",class:"ml-2"},{default:u(()=>[N(K(m.value),1)]),_:1})])]),_:1}),i(ye,null,{default:u(()=>[i(J,{"no-gutters":""},{default:u(()=>[i(Q,{cols:"12",class:"mb-3"},{default:u(()=>[i(Se,{modelValue:m.value,"onUpdate:modelValue":ne[2]||(ne[2]=je=>m.value=je),items:h,label:"Compression Mode",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),i(Q,{cols:"12",class:"mb-2"},{default:u(()=>[v("div",Wke," Estimated compression: "+K(T.value),1)]),_:1}),p.value.length>0?(P(),he(Q,{key:0,cols:"12"},{default:u(()=>[i(Fe,{dense:"",class:"py-0"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(p.value,je=>(P(),he(be,{key:je.name,class:"px-0 py-1"},{default:u(()=>[i(z,{class:"text-caption"},{default:u(()=>[N(K(je.name),1)]),_:2},1024),i(se,{class:"text-caption"},{default:u(()=>[N(K(je.originalSize)+"  "+K(je.estimatedSize)+" ("+K(je.reduction)+"% reduction) ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0),i(Q,{cols:"12"},{default:u(()=>[i(Ee,{class:"mb-2"}),v("div",Kke,[i(ae,{variant:"outlined",onClick:ce,disabled:!r.value||r.value.length===0,class:"btn-hover-base mr-4"},{default:u(()=>[...ne[16]||(ne[16]=[N(" Clear ",-1)])]),_:1},8,["disabled"]),i(ae,{variant:"elevated",color:"primary",onClick:le,loading:s.value,disabled:!B.value,class:"btn-hover-enhanced ml-4"},{default:u(()=>[i(O,{start:""},{default:u(()=>[...ne[17]||(ne[17]=[N("mdi-upload",-1)])]),_:1}),N(" Upload "+K(l.value?.summary?.validFiles||0)+" Files ",1)]),_:1},8,["loading","disabled"])])]),_:1}),d.value!==null&&d.value<100?(P(),he(Q,{key:3,cols:"12"},{default:u(()=>[i(Ue,{"model-value":d.value,color:"info",class:"mt-3"},null,8,["model-value"]),v("div",jke,K(A.value),1)]),_:1})):ge("",!0),s.value?(P(),he(Q,{key:4,cols:"12"},{default:u(()=>[i(Ue,{indeterminate:"",color:"primary",class:"mt-3"}),ne[18]||(ne[18]=v("div",{class:"text-center text-caption mt-2 text-primary"}," Uploading medical files... ",-1))]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},qke=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",YH=async()=>{try{const t=`${Q5()}/api`;return console.log("[network] Network API initialized with:",t),t}catch(e){console.error("[network] Failed to initialize network API:",e);const t=xo("localhost").api.http;return console.log("[network] Using fallback URL:",t),t}},Ww=async()=>{try{const e=Q5();return console.log("[network] Using server base URL from environment:",e),e}catch(e){if(qke())return console.warn("[network] Failed to get server base URL, using localhost fallback:",e.message),xo("localhost").http;{console.warn("[network] Endpoint parameter not found, trying window.location.origin:",e.message);const t=window.location.origin;return console.log("[network] Using current origin as server URL:",t),t}}},Yke=async(e,t="/api/upload/file")=>{try{return`${await Ww()}${t}?path=${encodeURIComponent(e)}`}catch(n){return console.error("Failed to create file URL, using localhost fallback:",n),`${xo("localhost").https}${t}?path=${encodeURIComponent(e)}`}},PT=async(e,t="/api/upload/file")=>{try{const n=await Ww();return e.map(a=>`${n}${t}?path=${encodeURIComponent(a)}`)}catch(n){console.error("Failed to create file URLs, using localhost fallback:",n);const a=xo("localhost").https;return e.map(r=>`${a}${t}?path=${encodeURIComponent(r)}`)}},AR=Object.freeze(Object.defineProperty({__proto__:null,createFileURL:Yke,createFileURLBatch:PT,getCurrentServerURL:Ww,getServerURLs:xo,initializeNetworkAPI:YH},Symbol.toStringTag,{value:"Module"})),Xke={key:0,style:{height:"70vh"}},Jke={key:0,style:{height:"100%",width:"100%",position:"relative"},class:"bg-grey-lighten-4"},Zke={class:"d-flex align-center justify-center fill-height"},eBe={class:"d-flex align-center justify-center fill-height"},tBe={class:"image-controls"},nBe=["src"],aBe={key:2,style:{height:"100%",width:"100%",position:"relative",background:"#f5f5f5"}},rBe={class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},sBe={class:"mt-4"},oBe={class:"mt-6"},iBe={key:3,class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},lBe={class:"mt-4 text-subtitle-1"},uBe={class:"text-caption text-grey"},cBe={class:"mt-4",style:{width:"100%",height:"60%"}},dBe=["src"],fBe={key:4,class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},ABe={class:"mt-4 text-subtitle-1"},mBe={class:"text-caption text-grey"},vBe={__name:"media-viewer",props:{isOpen:{type:Boolean,required:!0},mediaItems:{type:Array,required:!0},selectedMedia:{type:Object,default:null},currentIndex:{type:Number,default:0},patient:{type:Object,default:null}},emits:["close","navigate"],setup(e,{emit:t}){const n=R(!1);let a=null;try{window.require&&(a=window.require("electron").ipcRenderer,n.value=!0)}catch{console.log("Not running in Electron environment")}const r=e,s=t,o=Ln(),l=ee(()=>o.getters["doctorModule/currentDoctor"]),c=R(!1),f=R(0),d=R(1),A=R(0),m=R(0),p=R(!1),h=R({x:0,y:0}),y=R(!1),g=R(!1),_=R(null),b=R(!1);(async()=>{try{const j=await Ww();_.value=j,b.value=!0,console.log("[media-viewer] Server URL initialized:",j)}catch(j){if(console.error("Failed to get server URL, using localhost fallback:",j),n.value)_.value=xo("localhost").http;else try{const J=window.location.origin;_.value=J}catch{_.value=xo("localhost").http}b.value=!0}})();const B=j=>!b.value||!_.value?"":`${_.value}/api/upload/file?path=${encodeURIComponent(j)}`,F=j=>{if(!j)return"Unknown File";const J=j.split("/");return J[J.length-1]||"Unknown File"},T=j=>{f.value=(f.value+j)%360,f.value<0&&(f.value+=360)},E=()=>{f.value=0},x=()=>{const j=Math.min(d.value*1.2,5);d.value=j},C=()=>{const j=Math.max(d.value/1.2,.2);d.value=j,U()},D=()=>{d.value=1,A.value=0,m.value=0},U=()=>{const j=Math.max(0,(d.value-1)*200);A.value=Math.max(-j,Math.min(j,A.value)),m.value=Math.max(-j,Math.min(j,m.value))},L=j=>{d.value>1&&(p.value=!0,h.value={x:j.clientX,y:j.clientY},j.preventDefault())},H=j=>{if(p.value&&d.value>1){const J=j.clientX-h.value.x,ie=j.clientY-h.value.y;A.value+=J/d.value,m.value+=ie/d.value,U(),h.value={x:j.clientX,y:j.clientY},j.preventDefault()}},oe=()=>{p.value=!1},de=j=>{j.deltaY<0?x():C()},te=async()=>{if(!n.value||!a){console.warn("Copy feature only available in Electron");return}if(!r.selectedMedia||!r.selectedMedia.type.startsWith("image/")){console.warn("Copy feature only available for images");return}try{y.value=!0;const j=await a.invoke("copy-image-to-clipboard",r.selectedMedia.path);if(j.success)console.log("Image copied to clipboard successfully");else throw new Error(j.error||"Failed to copy image")}catch(j){console.error("Failed to copy image to clipboard:",j)}finally{y.value=!1}},q=j=>new Promise((J,ie)=>{fetch(j,{credentials:"include"}).then(X=>X.blob()).then(X=>{const fe=new FileReader;fe.readAsDataURL(X),fe.onload=()=>{const M=fe.result.split(",")[1];J(M)},fe.onerror=M=>ie(M)}).catch(ie)}),ce=async()=>{if(!r.selectedMedia||!r.selectedMedia.type.startsWith("image/")||!r.selectedMedia.path){console.warn("Share only available for images");return}if(!r.patient||!r.patient.contactNumber&&!r.patient.phoneNumber){console.warn("Patient contact number required to share");return}try{g.value=!0;const j=B(r.selectedMedia.path),J=await q(j),ie=F(r.selectedMedia.path)||"image.jpg",X=r.selectedMedia.type||"image/jpeg",fe=await _Ae(J,ie,X);if(!fe.success)throw new Error(fe.error||"Failed to upload image");const M=fe.data.file_url,z=l.value?.doctorName||"Your Doctor",se=r.patient.name||r.patient.patientName||"Patient",be=r.patient.contactNumber||r.patient.phoneNumber,Fe=`Hi ${se},

Your image from Dr. ${z} is ready to view.

 **View your image:** ${M}
 (Please open link within 24 hours)

Best regards,
Dr. ${z}`,ye=`https://api.whatsapp.com/send?phone=${be}&text=${encodeURIComponent(Fe)}`;try{if(window.require){const{ipcRenderer:Qe}=window.require("electron");if((await Qe.invoke("open-external",ye)).success)return}}catch{console.warn("Electron open-external failed, using fallback")}window.open(ye,"_blank","noopener,noreferrer")}catch(j){console.error("Error sharing image via WhatsApp:",j),alert(`Failed to share image: ${j.message}`)}finally{g.value=!1}},le=()=>{f.value=0,d.value=1,A.value=0,m.value=0,p.value=!1,y.value=!1,g.value=!1},Z=j=>{let J;j==="next"?J=Math.min(r.currentIndex+1,r.mediaItems.length-1):J=Math.max(r.currentIndex-1,0),J!==r.currentIndex&&(le(),s("navigate",J))},ne=j=>{if(r.isOpen)switch(j.key){case"ArrowLeft":j.preventDefault(),Z("prev");break;case"ArrowRight":j.preventDefault(),Z("next");break;case"Escape":j.preventDefault(),ae();break}},G=async j=>{const J=B(j.path);if(window.require)try{const{ipcRenderer:ie}=window.require("electron"),X=await ie.invoke("open-external",J);if(X.success){console.log("Successfully opened PDF with system default application");return}else console.error("Failed to open with system app:",X.error)}catch(ie){console.error("Failed to use Electron IPC:",ie)}W(J)},W=j=>{try{if(!window.open(j,"_blank","noopener,noreferrer")){console.log("Popup blocked, trying alternative approach");const ie=document.createElement("a");ie.href=j,ie.target="_blank",ie.rel="noopener noreferrer",document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)}}catch(J){console.error("Failed to open URL:",J),Q(j)}},Q=async j=>{try{await navigator.clipboard.writeText(j),console.log("URL copied to clipboard:",j),alert("Unable to open PDF. URL copied to clipboard - paste it in your browser.")}catch(J){console.error("Failed to copy to clipboard:",J),prompt("Copy this URL to view the PDF:",j)}},O=j=>{const J=B(j.path),ie=document.createElement("a");ie.href=J,ie.download=F(j.path)||"download",document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)},ae=()=>{c.value=!1,s("close")};return(j,J)=>{const ie=I("v-icon"),X=I("v-btn"),fe=I("v-tooltip"),M=I("v-col"),z=I("v-chip"),se=I("v-row"),be=I("v-card"),Fe=I("v-progress-circular"),ye=I("v-alert"),Qe=I("v-img"),_e=I("v-card-text");return P(),he(be,{onKeydown:ne},{default:u(()=>[i(se,{"no-gutters":""},{default:u(()=>[i(M,{cols:"12"},{default:u(()=>[i(be,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(se,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(M,{cols:"3",class:"d-flex align-center justify-end"},{default:u(()=>[i(fe,{text:"Previous ()",location:"bottom"},{activator:u(({props:Se})=>[i(X,Ie({icon:"",variant:"elevated",size:"x-small",disabled:e.currentIndex===0,onClick:J[0]||(J[0]=Ee=>Z("prev")),class:"mr-1"},Se),{default:u(()=>[i(ie,null,{default:u(()=>[...J[14]||(J[14]=[N("mdi-chevron-left",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})]),_:1}),i(M,{cols:"6",class:"d-flex align-center justify-center flex-nowrap"},{default:u(()=>[i(z,{class:"mr-2",size:"small",variant:"outlined"},{default:u(()=>[N(K(e.currentIndex+1)+" of "+K(e.mediaItems.length),1)]),_:1}),e.selectedMedia?.tag?(P(),he(z,{key:0,size:"small",color:"primary"},{default:u(()=>[N(K(e.selectedMedia.tag==="before_image"?"Before":e.selectedMedia.tag==="after_image"?"After":e.selectedMedia.tag==="report"?"Report":e.selectedMedia.tag==="prescription"?"Rx":e.selectedMedia.tag==="consent_letter"?"Consent":e.selectedMedia.tag),1)]),_:1})):ge("",!0)]),_:1}),i(M,{cols:"2",class:"d-flex align-center justify-start"},{default:u(()=>[i(fe,{text:"Next ()",location:"bottom"},{activator:u(({props:Se})=>[i(X,Ie({icon:"",variant:"elevated",size:"x-small",disabled:e.currentIndex===e.mediaItems.length-1,onClick:J[1]||(J[1]=Ee=>Z("next")),class:"mr-1"},Se),{default:u(()=>[i(ie,null,{default:u(()=>[...J[15]||(J[15]=[N("mdi-chevron-right",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})]),_:1}),i(M,{cols:"1",class:"d-flex align-center justify-end"},{default:u(()=>[i(fe,{text:"Close (Esc)",location:"bottom"},{activator:u(({props:Se})=>[i(X,Ie({icon:"",size:"x-small",onClick:ae},Se),{default:u(()=>[i(ie,null,{default:u(()=>[...J[16]||(J[16]=[v("img",{src:su,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(_e,{class:"pa-0"},{default:u(()=>[e.selectedMedia?(P(),Ae("div",Xke,[e.selectedMedia.type.startsWith("image/")?(P(),Ae("div",Jke,[v("div",{style:Mt([{height:"100%",width:"100%",overflow:"hidden",cursor:"grab"},{cursor:p.value?"grabbing":d.value>1?"grab":"default"}]),onMousedown:L,onMousemove:H,onMouseup:oe,onMouseleave:oe,onWheel:gn(de,["prevent"])},[e.selectedMedia.path?(P(),he(Qe,{key:0,src:B(e.selectedMedia.path),height:"100%",width:"100%",contain:"",style:Mt({transform:`rotate(${f.value}deg) scale(${d.value}) translate(${A.value}px, ${m.value}px)`,transition:p.value?"none":"transform 0.3s ease",transformOrigin:"center center"})},{placeholder:u(()=>[v("div",Zke,[i(Fe,{indeterminate:"",color:"primary"})])]),error:u(()=>[v("div",eBe,[i(ye,{type:"error",variant:"tonal"},{default:u(()=>[...J[17]||(J[17]=[N(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src","style"])):ge("",!0)],36),v("div",tBe,[i(fe,{text:"Copy Image",location:"top"},{activator:u(({props:Se})=>[i(X,Ie({icon:"",size:"small",variant:"elevated",onClick:J[2]||(J[2]=Ee=>te())},Se,{class:"mr-2",loading:y.value,disabled:y.value}),{default:u(()=>[i(ie,null,{default:u(()=>[...J[18]||(J[18]=[N("mdi-content-copy",-1)])]),_:1})]),_:1},16,["loading","disabled"])]),_:1}),i(fe,{text:"Zoom In",location:"top"},{activator:u(({props:Se})=>[i(X,Ie({icon:"",size:"small",variant:"elevated",onClick:J[3]||(J[3]=Ee=>x())},Se,{class:"mr-2",disabled:d.value>=5}),{default:u(()=>[i(ie,null,{default:u(()=>[...J[19]||(J[19]=[N("mdi-magnify-plus-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),i(fe,{text:"Zoom Out",location:"top"},{activator:u(({props:Se})=>[i(X,Ie({icon:"",size:"small",variant:"elevated",onClick:J[4]||(J[4]=Ee=>C())},Se,{class:"mr-2",disabled:d.value<=.2}),{default:u(()=>[i(ie,null,{default:u(()=>[...J[20]||(J[20]=[N("mdi-magnify-minus-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),i(fe,{text:"Reset Zoom",location:"top"},{activator:u(({props:Se})=>[i(X,Ie({icon:"",size:"small",variant:"elevated",onClick:J[5]||(J[5]=Ee=>D())},Se,{class:"mr-2",disabled:d.value===1&&A.value===0&&m.value===0}),{default:u(()=>[i(ie,null,{default:u(()=>[...J[21]||(J[21]=[N("mdi-fit-to-page-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),i(fe,{text:"Rotate Left",location:"top"},{activator:u(({props:Se})=>[i(X,Ie({icon:"",size:"small",variant:"elevated",onClick:J[6]||(J[6]=Ee=>T(-90))},Se,{class:"mr-2"}),{default:u(()=>[i(ie,null,{default:u(()=>[...J[22]||(J[22]=[N("mdi-rotate-left",-1)])]),_:1})]),_:1},16)]),_:1}),i(fe,{text:"Rotate Right",location:"top"},{activator:u(({props:Se})=>[i(X,Ie({icon:"",size:"small",variant:"elevated",onClick:J[7]||(J[7]=Ee=>T(90))},Se,{class:"mr-2"}),{default:u(()=>[i(ie,null,{default:u(()=>[...J[23]||(J[23]=[N("mdi-rotate-right",-1)])]),_:1})]),_:1},16)]),_:1}),i(fe,{text:"Reset Rotation",location:"top"},{activator:u(({props:Se})=>[i(X,Ie({icon:"",size:"small",variant:"elevated",onClick:J[8]||(J[8]=Ee=>E())},Se,{disabled:f.value===0}),{default:u(()=>[i(ie,null,{default:u(()=>[...J[24]||(J[24]=[N("mdi-backup-restore",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),e.patient&&(e.patient.contactNumber||e.patient.phoneNumber)?(P(),he(fe,{key:0,text:"Share via WhatsApp",location:"top"},{activator:u(({props:Se})=>[i(X,Ie({icon:"",size:"small",variant:"elevated",onClick:J[9]||(J[9]=Ee=>ce())},Se,{class:"mr-2",loading:g.value,disabled:g.value}),{default:u(()=>[i(ie,{size:"large"},{default:u(()=>[...J[25]||(J[25]=[v("img",{src:G0,alt:"Share via WhatsApp",class:"whatsapp-icon"},null,-1)])]),_:1})]),_:1},16,["loading","disabled"])]),_:1})):ge("",!0)])])):e.selectedMedia.type.startsWith("video/")?(P(),Ae("video",{key:1,src:B(e.selectedMedia.path),controls:"",style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,nBe)):e.selectedMedia.type==="application/pdf"?(P(),Ae("div",aBe,[v("div",rBe,[i(ie,{size:"80",color:"primary"},{default:u(()=>[...J[26]||(J[26]=[N("mdi-file-pdf-box",-1)])]),_:1}),v("h3",sBe,K(F(e.selectedMedia.path)),1),J[29]||(J[29]=v("p",{class:"text-caption text-grey mt-2"},"PDF Document",-1)),J[30]||(J[30]=v("p",{class:"text-caption text-grey"},"Click to open/download this PDF",-1)),v("div",oBe,[i(X,{color:"primary",variant:"elevated",size:"large",onClick:J[10]||(J[10]=Se=>G(e.selectedMedia)),class:"px-8"},{default:u(()=>[i(ie,{left:""},{default:u(()=>[...J[27]||(J[27]=[N("mdi-file-pdf-box",-1)])]),_:1}),J[28]||(J[28]=N(" Open PDF ",-1))]),_:1})])])])):e.selectedMedia.type.startsWith("application/")?(P(),Ae("div",iBe,[i(ie,{size:"64",color:"grey"},{default:u(()=>[...J[31]||(J[31]=[N("mdi-file-document",-1)])]),_:1}),v("p",lBe,K(F(e.selectedMedia.path)),1),v("p",uBe,"File type: "+K(e.selectedMedia.type),1),v("div",cBe,[v("iframe",{src:B(e.selectedMedia.path),style:{width:"100%",height:"100%",border:"1px solid #ccc"},title:"Document Viewer",onError:J[11]||(J[11]=Se=>c.value=!0)},null,40,dBe)]),i(X,{color:"primary",variant:"outlined",class:"mt-4",onClick:J[12]||(J[12]=Se=>O(e.selectedMedia))},{default:u(()=>[i(ie,{left:""},{default:u(()=>[...J[32]||(J[32]=[N("mdi-download",-1)])]),_:1}),J[33]||(J[33]=N(" Download File ",-1))]),_:1})])):(P(),Ae("div",fBe,[i(ie,{size:"64",color:"grey"},{default:u(()=>[...J[34]||(J[34]=[N("mdi-file",-1)])]),_:1}),v("p",ABe,K(F(e.selectedMedia.path)),1),v("p",mBe,"File type: "+K(e.selectedMedia.type),1),i(X,{color:"primary",variant:"outlined",class:"mt-4",onClick:J[13]||(J[13]=Se=>O(e.selectedMedia))},{default:u(()=>[i(ie,{left:""},{default:u(()=>[...J[35]||(J[35]=[N("mdi-download",-1)])]),_:1}),J[36]||(J[36]=N(" Download File ",-1))]),_:1})]))])):ge("",!0)]),_:1})]),_:1})}}},mR=en(vBe,[["__scopeId","data-v-01599a62"]]),hBe={key:0,class:"text-caption text-medium-emphasis ml-2"},pBe={key:0,class:"d-flex justify-center align-center",style:{height:"400px"}},gBe={key:1,class:"text-center pa-4"},yBe={class:"text-error"},_Be={key:2},wBe={class:"images-column"},bBe={class:"column-header pa-3 bg-surface-variant"},xBe={key:0,class:"images-scroll"},CBe={class:"pa-2"},SBe={class:"text-body-2 font-weight-bold"},EBe={class:"d-flex align-center justify-center fill-height"},kBe={class:"d-flex align-center justify-center fill-height"},BBe={key:1,class:"empty-state pa-4 text-center"},TBe={class:"images-column"},IBe={class:"column-header pa-3 bg-surface-variant"},FBe={key:0,class:"images-scroll"},PBe={class:"pa-2"},DBe={class:"text-body-2 font-weight-bold"},UBe={class:"d-flex align-center justify-center fill-height"},RBe={class:"d-flex align-center justify-center fill-height"},NBe={key:1,class:"empty-state pa-4 text-center"},VBe={__name:"patient-images-modal",props:{isOpen:{type:Boolean,required:!0},patientId:{type:Number,required:!0},doctorId:{type:Number,required:!1}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=R(!1),s=R(null),o=R(null),l=R([]),c=ee(()=>l.value.filter(p=>p.tag==="before_image").sort((p,h)=>h.createdAt-p.createdAt)),f=ee(()=>l.value.filter(p=>p.tag==="after_image").sort((p,h)=>h.createdAt-p.createdAt)),d=p=>{if(!p)return"";const h=new Date(p*1e3),y=new Date,g=new Date(h.getFullYear(),h.getMonth(),h.getDate()),b=new Date(y.getFullYear(),y.getMonth(),y.getDate()).getTime()-g.getTime(),S=Math.floor(b/(1e3*3600*24)),B=h.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"short",day:"numeric"});let F;return S===0?F="Today":S===1?F="1 day ago":F=`${S} days ago`,`${B}  ${F}`},A=async()=>{if(n.patientId){r.value=!0,s.value=null;try{const p=await gAe(n.patientId,"both",n.doctorId);if(p.success){o.value=p.data.patient;const h=p.data.images.map(g=>g.path),y=await PT(h);l.value=p.data.images.map((g,_)=>({...g,fileUrl:y[_]}))}else s.value=p.error}catch(p){s.value=p.message||"Failed to fetch patient images"}finally{r.value=!1}}},m=()=>{a("close")};return An(()=>{n.patientId&&A()}),Ge(()=>n.isOpen,p=>{p&&n.patientId&&A()}),Ge(()=>n.patientId,p=>{p&&n.isOpen&&A()}),(p,h)=>{const y=I("v-card-title"),g=I("v-col"),_=I("v-icon"),b=I("v-btn"),S=I("v-row"),B=I("v-card"),F=I("v-progress-circular"),T=I("v-chip"),E=I("v-card-subtitle"),x=I("v-alert"),C=I("v-img"),D=I("v-card-text");return P(),he(B,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[i(S,{"no-gutters":""},{default:u(()=>[i(g,{cols:"12"},{default:u(()=>[i(B,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(S,{"no-gutters":""},{default:u(()=>[i(g,{cols:"11"},{default:u(()=>[i(y,{class:"pa-0 pl-2"},{default:u(()=>[h[0]||(h[0]=N(" Patient Images History ",-1)),o.value?(P(),Ae("span",hBe," - "+K(o.value.name),1)):ge("",!0)]),_:1})]),_:1}),i(g,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(b,{icon:"",size:"x-small",onClick:m},{default:u(()=>[i(_,null,{default:u(()=>[...h[1]||(h[1]=[v("img",{src:su,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(S,{"no-gutters":""},{default:u(()=>[i(g,{cols:"12"},{default:u(()=>[i(B,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[r.value?(P(),Ae("div",pBe,[i(F,{indeterminate:"",color:"primary",size:"64"})])):s.value?(P(),Ae("div",gBe,[i(_,{color:"error",size:"48",class:"mb-2"},{default:u(()=>[...h[2]||(h[2]=[N("mdi-alert-circle",-1)])]),_:1}),v("p",yBe,K(s.value),1),i(b,{onClick:A,color:"primary",variant:"outlined"},{default:u(()=>[...h[3]||(h[3]=[N(" Try Again ",-1)])]),_:1})])):(P(),Ae("div",_Be,[i(D,{class:"pa-0",style:{height:"75vh"}},{default:u(()=>[i(S,{"no-gutters":"",class:"fill-height"},{default:u(()=>[i(g,{cols:"6",class:"border-e"},{default:u(()=>[v("div",wBe,[v("div",bBe,[i(_,{icon:"mdi-camera-outline",class:"me-2",color:"success"}),h[4]||(h[4]=v("span",{class:"text-subtitle-2 font-weight-bold"},"Before Images",-1)),i(T,{size:"small",class:"ms-2"},{default:u(()=>[N(K(c.value.length),1)]),_:1})]),c.value.length>0?(P(),Ae("div",xBe,[v("div",CBe,[i(S,{"no-gutters":""},{default:u(()=>[(P(!0),Ae(ze,null,Jt(c.value,(U,L)=>(P(),he(g,{key:`before-${L}`,cols:"12",class:"mb-3"},{default:u(()=>[i(B,{class:"image-card",elevation:"2"},{default:u(()=>[i(E,{class:"pa-2"},{default:u(()=>[v("div",SBe,[i(_,{icon:"mdi-calendar",size:"small",class:"me-1"}),N(" "+K(d(U.createdAt)),1)])]),_:2},1024),U.fileUrl?(P(),he(C,{key:0,src:U.fileUrl,"aspect-ratio":"1",cover:"",loading:"lazy",transition:!1,class:"image-thumbnail"},{placeholder:u(()=>[v("div",EBe,[i(F,{indeterminate:"",size:"24"})])]),error:u(()=>[v("div",kBe,[i(x,{type:"error",variant:"tonal"},{default:u(()=>[...h[5]||(h[5]=[N(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src"])):ge("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])):(P(),Ae("div",BBe,[i(_,{icon:"mdi-camera-off",size:"48",class:"text-medium-emphasis mb-2"}),h[6]||(h[6]=v("p",{class:"text-body-2 text-medium-emphasis"},"No before images found",-1))]))])]),_:1}),i(g,{cols:"6"},{default:u(()=>[v("div",TBe,[v("div",IBe,[i(_,{icon:"mdi-camera-enhance",class:"me-2",color:"info"}),h[7]||(h[7]=v("span",{class:"text-subtitle-2 font-weight-bold"},"After Images",-1)),i(T,{size:"small",class:"ms-2"},{default:u(()=>[N(K(f.value.length),1)]),_:1})]),f.value.length>0?(P(),Ae("div",FBe,[v("div",PBe,[i(S,{"no-gutters":""},{default:u(()=>[(P(!0),Ae(ze,null,Jt(f.value,(U,L)=>(P(),he(g,{key:`after-${L}`,cols:"12",class:"mb-3"},{default:u(()=>[i(B,{class:"image-card",elevation:"2"},{default:u(()=>[i(E,{class:"pa-2"},{default:u(()=>[v("div",DBe,[i(_,{icon:"mdi-calendar",size:"small",class:"me-1"}),N(" "+K(d(U.createdAt)),1)])]),_:2},1024),U.fileUrl?(P(),he(C,{key:0,src:U.fileUrl,"aspect-ratio":"1",cover:"",loading:"lazy",transition:!1,class:"image-thumbnail"},{placeholder:u(()=>[v("div",UBe,[i(F,{indeterminate:"",size:"24"})])]),error:u(()=>[v("div",RBe,[i(x,{type:"error",variant:"tonal"},{default:u(()=>[...h[8]||(h[8]=[N(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src"])):ge("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])):(P(),Ae("div",NBe,[i(_,{icon:"mdi-camera-off",size:"48",class:"text-medium-emphasis mb-2"}),h[9]||(h[9]=v("p",{class:"text-body-2 text-medium-emphasis"},"No after images found",-1))]))])]),_:1})]),_:1})]),_:1})]))]),_:1})]),_:1})]),_:1})]),_:1})}}},vR=en(VBe,[["__scopeId","data-v-8c82235c"]]),LBe={__name:"delete-upload",props:{deleteSelectedUpload:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=R(n.deleteSelectedUpload),s=()=>{a("close")},o=async l=>{try{const c=await xAe(l.id);c.success?console.log("Upload deleted successfully"):console.error("Error deleting upload:",c.error)}catch(c){console.error("Error deleting upload:",c)}s()};return(l,c)=>{const f=I("v-card-title"),d=I("v-col"),A=I("v-icon"),m=I("v-btn"),p=I("v-row"),h=I("v-card"),y=I("v-card-text"),g=I("v-divider");return P(),he(h,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(h,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"11"},{default:u(()=>[i(f,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[N("Confirm Upload Delete",-1)])]),_:1})]),_:1}),i(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[i(A,null,{default:u(()=>[...c[2]||(c[2]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(h,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[N(" Are you sure you want to delete this uploaded file? ",-1),v("span",{class:"text-red font-weight-bold"}," You will not be able to recover the file once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),i(g),i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"2"}),i(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(m,{variant:"outlined",onClick:c[0]||(c[0]=_=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[N("Yes, Delete File",-1)])]),_:1})]),_:1}),i(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},MBe=""+new URL("images/upload_image-CQ-OTL21.png",import.meta.url).href,OBe={key:1,class:"d-flex justify-center align-center",style:{height:"100%","min-height":"60vh"}},HBe={key:2,class:"date-organized-uploads-vertical"},$Be={class:"date-header-vertical mb-3"},QBe={class:"upload-count-vertical text-caption text-medium-emphasis ml-2"},GBe={class:"d-flex align-center justify-center fill-height"},zBe={class:"d-flex align-center justify-center fill-height"},WBe={key:1,class:"no-images-placeholder text-center pa-4"},KBe={key:0,class:"documents-list"},jBe={class:"d-flex align-center"},qBe={class:"file-info flex-grow-1 min-width-0"},YBe={class:"file-name text-body-2 font-weight-medium text-truncate"},XBe={class:"file-type text-caption text-medium-emphasis"},JBe={key:1,class:"no-documents-placeholder text-center pa-4"},ZBe={__name:"upload-files",props:{consultation:{type:Object,required:!1},procedure:{type:Object,required:!1},patient:{type:Object,required:!1}},setup(e){const t=e,n=Ln(),a=R([]),r=R(!1),s=R(t.consultation?Kn.cloneDeep(t.consultation):null),o=R(t.procedure?Kn.cloneDeep(t.procedure):null),l=R(!1),c=R(null),f=R(0),d=R(!1),A=R(null),m=R(null),p=R(!1),h=R(null),y=ee(()=>{if(!a.value||a.value.length===0)return[];const q={};return a.value.forEach(ce=>{const le=new Date(ce.createdAt*1e3),Z=new Date,ne=new Date(Z);ne.setDate(ne.getDate()-1);let G,W;if(le.toDateString()===Z.toDateString())G="Today",W="Today";else if(le.toDateString()===ne.toDateString())G="Yesterday",W="Yesterday";else{const Q=le.getFullYear()===Z.getFullYear();G=le.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",...Q?{}:{year:"numeric"}}),W=le.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric"})}q[G]||(q[G]={date:G,fullDate:W,rawDate:le,items:[]}),q[G].items.push(ce)}),Object.values(q).sort((ce,le)=>le.rawDate.getTime()-ce.rawDate.getTime())}),g=q=>{const ce=[],le=[];return q.forEach(Z=>{Z.type.startsWith("image/")?ce.push(Z):le.push(Z)}),{images:ce,documents:le}},_=async()=>{const q=A.value,ce=m.value||n.state.doctorModule?.doctorId;if(!q){console.log("Cannot fetch upload items: Patient ID not available"),a.value=[],r.value=!1;return}if(!ce){console.log("Cannot fetch upload items: Doctor ID not available"),a.value=[],r.value=!1;return}r.value=!0;try{const le=await yAe(q,ce);if(le.success&&le.data.uploads){const Z=le.data.uploads.map(G=>G.path),ne=await PT(Z);a.value=le.data.uploads.map((G,W)=>({...G,fileUrl:ne[W]}))}else console.error("Failed to fetch patient uploads:",le.error),a.value=[]}catch(le){console.error("Error fetching upload items:",le),a.value=[]}finally{r.value=!1}};Ge(()=>t.consultation,async q=>{q?(s.value=Kn.cloneDeep(q),A.value=q.patientId,m.value=q.doctorId,q.patientId&&q.doctorId?await _():(a.value=[],console.log("Patient ID or Doctor ID not available"))):(s.value=null,t.patient?.id&&(A.value=t.patient.id,m.value=m.value||n.state.doctorModule?.doctorId,A.value&&m.value&&await _()))},{immediate:!0}),Ge(()=>t.patient,async q=>{q&&q.id&&(A.value||(A.value=q.id),m.value||(m.value=n.state.doctorModule?.doctorId),A.value&&m.value&&await _())},{immediate:!0}),Ge(()=>t.procedure,async q=>{q?(o.value=Kn.cloneDeep(q),A.value=q.patientId,m.value=q.doctorId,q.patientId&&q.doctorId?await _():(a.value=[],console.log("Patient ID or Doctor ID not available"))):(o.value=null,t.patient?.id?(A.value=t.patient.id,m.value=m.value||n.state.doctorModule?.doctorId,A.value&&m.value&&await _()):a.value=[])},{immediate:!0});const b=R(!1),S=()=>{b.value=!0,console.log("Upload Template")},B=async()=>{b.value=!1,await _()},F=q=>({before_image:"Before",after_image:"After",report:"Report",prescription:"Rx",consent_letter:"Consent"})[q]||"Others",T=q=>({before_image:"mdi-camera-outline",after_image:"mdi-camera-enhance",report:"mdi-file-document-outline",prescription:"mdi-pill",consent_letter:"mdi-file-sign"})[q]||"mdi-file",E=q=>q.includes("pdf")?"mdi-file-pdf-box":q.includes("word")||q.includes("document")?"mdi-file-word-box":q.includes("excel")||q.includes("spreadsheet")?"mdi-file-excel-box":q.includes("powerpoint")||q.includes("presentation")?"mdi-file-powerpoint-box":"mdi-file-document-outline",x=q=>q.includes("pdf")?"red":q.includes("word")||q.includes("document")?"blue":q.includes("excel")||q.includes("spreadsheet")?"green":q.includes("powerpoint")||q.includes("presentation")?"orange":"grey",C=q=>{const ce=q.split("/"),Z=ce[ce.length-1].split(".").pop();return Z?Z.toUpperCase():"FILE"},D=q=>{console.log("Open Media",q);const ce=a.value.findIndex(le=>le.path===q.path);f.value=ce,c.value=q,l.value=!0},U=q=>{f.value=q,c.value=a.value[q]},L=()=>{l.value=!1,c.value=null,f.value=0},H=()=>{A.value?d.value=!0:console.warn("Patient information not available")},oe=()=>{d.value=!1},de=q=>{if(!q){console.error("No upload provided for deletion");return}p.value=!0,h.value=q,console.log("Selected Upload for Deletion:",q)},te=async()=>{try{p.value=!1,h.value=null,await _()}catch(q){console.error("Error handling upload delete close:",q)}};return(q,ce)=>{const le=I("v-col"),Z=I("v-btn"),ne=I("v-tooltip"),G=I("v-icon"),W=I("v-row"),Q=I("v-card"),O=I("v-progress-circular"),ae=I("v-empty-state"),j=I("v-chip"),J=I("v-divider"),ie=I("v-alert"),X=I("v-img"),fe=I("v-card-text"),M=I("v-bottom-sheet"),z=I("v-dialog");return P(),Ae(ze,null,[i(Q,{rounded:"0",class:"pa-1 section-header-style",elevation:"0"},{default:u(()=>[i(W,{"no-gutters":""},{default:u(()=>[i(le,{cols:"6"}),i(le,{cols:"6",class:"d-flex justify-end align-center py-1"},{default:u(()=>[i(ne,{text:"Upload Files"},{activator:u(({props:se})=>[i(Z,Ie({size:"small"},se,{onClick:S,class:"mr-1 btn-hover-base"}),{default:u(()=>[...ce[7]||(ce[7]=[N(" Upload ",-1)])]),_:1},16)]),_:1}),i(ne,{text:"View Patient Images History"},{activator:u(({props:se})=>[i(Z,Ie({variant:"outlined",size:"small"},se,{onClick:H,class:"mr-1 btn-hover-base"}),{default:u(()=>[i(G,{size:"small"},{default:u(()=>[...ce[8]||(ce[8]=[v("img",{src:kke,alt:"History"},null,-1)])]),_:1})]),_:1},16)]),_:1}),i(ne,{text:"Refresh Files"},{activator:u(({props:se})=>[i(Z,Ie({variant:"outlined",size:"small"},se,{onClick:_,class:"btn-hover-base"}),{default:u(()=>[i(G,{size:"small"},{default:u(()=>[...ce[9]||(ce[9]=[v("img",{src:Dg,alt:"Refresh"},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1}),i(W,{"no-gutters":""},{default:u(()=>[i(le,{cols:"12",class:"scroll-element mt-1"},{default:u(()=>[r.value?(P(),he(W,{key:0,"no-gutters":""},{default:u(()=>[i(le,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%","min-height":"60vh"}},{default:u(()=>[i(O,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):a.value.length===0?(P(),Ae("div",OBe,[i(ae,{image:Oe(MBe)},{title:u(()=>[...ce[10]||(ce[10]=[v("div",{class:"text-subtitle-2 mt-8"}," No images or documents found for this patient ",-1)])]),text:u(()=>[...ce[11]||(ce[11]=[v("div",{class:"text-caption"}," All uploaded images and documents for this patient will appear here ",-1)])]),_:1},8,["image"])])):(P(),Ae("div",HBe,[(P(!0),Ae(ze,null,Jt(y.value,(se,be)=>(P(),Ae("div",{key:be,class:"date-section mb-4"},[v("div",$Be,[i(j,{color:"primary",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar",title:se.fullDate||se.date},{default:u(()=>[N(K(se.date),1)]),_:2},1032,["title"]),v("span",QBe,K(se.items.length)+" upload"+K(se.items.length!==1?"s":""),1),i(J,{class:"ml-4"})]),i(W,{"no-gutters":"",class:"split-content-row"},{default:u(()=>[i(le,{cols:"9",class:"images-section pr-2"},{default:u(()=>[g(se.items).images.length>0?(P(),he(W,{key:0,"no-gutters":""},{default:u(()=>[(P(!0),Ae(ze,null,Jt(g(se.items).images,(Fe,ye)=>(P(),he(le,{key:`img-${be}-${ye}`,cols:"12",sm:"6",md:"4",class:"image-item-col pa-1"},{default:u(()=>[i(Q,{class:"image-card elevation-2 card-hover-base",rounded:"lg",onClick:Qe=>D(Fe)},{default:u(()=>[i(j,{color:"primary",variant:"elevated",size:"x-small",class:"media-tag-small text-white","prepend-icon":T(Fe.tag)},{default:u(()=>[N(K(F(Fe.tag)),1)]),_:2},1032,["prepend-icon"]),i(ne,{text:"Delete File"},{activator:u(({props:Qe})=>[i(Z,Ie({icon:"",size:"small",variant:"plain",color:"secondary",class:"delete-icon-small"},{ref_for:!0},Qe,{onClick:gn(_e=>de(Fe),["stop"])}),{default:u(()=>[i(G,{size:"small"},{default:u(()=>[...ce[12]||(ce[12]=[v("img",{src:Fc,alt:"Delete"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),i(X,{src:Fe.fileUrl,class:"image-thumbnail",cover:"","aspect-ratio":"1",loading:"lazy",transition:!1},{placeholder:u(()=>[v("div",GBe,[i(O,{indeterminate:"",size:"20"})])]),error:u(()=>[v("div",zBe,[i(ie,{type:"error",variant:"tonal",density:"compact"},{default:u(()=>[...ce[13]||(ce[13]=[N(" Failed to load ",-1)])]),_:1})])]),_:1},8,["src"])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:2},1024)):(P(),Ae("div",WBe,[i(G,{icon:"mdi-image-off",size:"32",class:"text-medium-emphasis mb-2"}),ce[14]||(ce[14]=v("p",{class:"text-caption text-medium-emphasis"},"No images for this date",-1))]))]),_:2},1024),i(le,{cols:"3",class:"documents-section pl-2"},{default:u(()=>[g(se.items).documents.length>0?(P(),Ae("div",KBe,[(P(!0),Ae(ze,null,Jt(g(se.items).documents,(Fe,ye)=>(P(),he(Q,{key:`doc-${be}-${ye}`,class:"document-item mb-2 elevation-1",rounded:"md",onClick:Qe=>D(Fe),hover:""},{default:u(()=>[i(fe,{class:"pa-2"},{default:u(()=>[v("div",jBe,[i(G,{icon:E(Fe.type),size:"20",color:x(Fe.type),class:"mr-2 flex-shrink-0"},null,8,["icon","color"]),v("div",qBe,[v("div",YBe,K(F(Fe.tag)),1),v("div",XBe,K(C(Fe.path)),1)]),i(Z,{icon:"",size:"small",variant:"plain",color:"error",class:"ml-1 flex-shrink-0",onClick:gn(Qe=>de(Fe),["stop"])},{default:u(()=>[i(G,{size:"small"},{default:u(()=>[...ce[15]||(ce[15]=[v("img",{src:Fc,alt:"Delete"},null,-1)])]),_:1})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):(P(),Ae("div",JBe,[i(G,{icon:"mdi-file-off",size:"32",class:"text-medium-emphasis mb-2"}),ce[16]||(ce[16]=v("p",{class:"text-caption text-medium-emphasis"},"No documents for this date",-1))]))]),_:2},1024)]),_:2},1024)]))),128))]))]),_:1})]),_:1}),Oe(oi)?(P(),he(M,{key:0,modelValue:b.value,"onUpdate:modelValue":ce[0]||(ce[0]=se=>b.value=se),class:"elevation-24","max-width":"100%"},{default:u(()=>[i(fR,{consultation:s.value,procedure:o.value,patient:t.patient,onClose:B},null,8,["consultation","procedure","patient"])]),_:1},8,["modelValue"])):ge("",!0),Oe(oi)?ge("",!0):(P(),he(z,{key:1,modelValue:b.value,"onUpdate:modelValue":ce[1]||(ce[1]=se=>b.value=se),persistent:"","max-width":"40%"},{default:u(()=>[i(fR,{consultation:s.value,procedure:o.value,patient:t.patient,onClose:B},null,8,["consultation","procedure","patient"])]),_:1},8,["modelValue"])),Oe(oi)?(P(),he(M,{key:2,modelValue:l.value,"onUpdate:modelValue":ce[2]||(ce[2]=se=>l.value=se),class:"elevation-24","max-width":"100%"},{default:u(()=>[i(mR,{isOpen:l.value,mediaItems:a.value,selectedMedia:c.value,currentIndex:f.value,patient:t.patient,onClose:L,onNavigate:U},null,8,["isOpen","mediaItems","selectedMedia","currentIndex","patient"])]),_:1},8,["modelValue"])):ge("",!0),Oe(oi)?ge("",!0):(P(),he(z,{key:3,modelValue:l.value,"onUpdate:modelValue":ce[3]||(ce[3]=se=>l.value=se),"max-width":"90%","max-height":"90%"},{default:u(()=>[i(mR,{isOpen:l.value,mediaItems:a.value,selectedMedia:c.value,currentIndex:f.value,patient:t.patient,onClose:L,onNavigate:U},null,8,["isOpen","mediaItems","selectedMedia","currentIndex","patient"])]),_:1},8,["modelValue"])),Oe(oi)?(P(),he(M,{key:4,modelValue:d.value,"onUpdate:modelValue":ce[4]||(ce[4]=se=>d.value=se),class:"elevation-24","max-width":"100%","max-height":"95%"},{default:u(()=>[i(vR,{isOpen:d.value,patientId:A.value,doctorId:m.value,onClose:oe},null,8,["isOpen","patientId","doctorId"])]),_:1},8,["modelValue"])):ge("",!0),Oe(oi)?ge("",!0):(P(),he(z,{key:5,modelValue:d.value,"onUpdate:modelValue":ce[5]||(ce[5]=se=>d.value=se),"max-width":"95%","max-height":"95%"},{default:u(()=>[i(vR,{isOpen:d.value,patientId:A.value,doctorId:m.value,onClose:oe},null,8,["isOpen","patientId","doctorId"])]),_:1},8,["modelValue"])),i(z,{modelValue:p.value,"onUpdate:modelValue":ce[6]||(ce[6]=se=>p.value=se),"max-width":"30%",persistent:""},{default:u(()=>[i(LBe,{deleteSelectedUpload:h.value,onClose:te},null,8,["deleteSelectedUpload"])]),_:1},8,["modelValue"])],64)}}},XH=en(ZBe,[["__scopeId","data-v-d73fbe4f"]]),hR=""+new URL("images/no_today_consultation-CFXdUpZK.png",import.meta.url).href,eTe={class:"text-caption"},tTe={class:"text-center"},nTe={class:"text-body-2 text-medium-emphasis mt-2"},aTe={key:1,class:"text-caption text-medium-emphasis ml-2"},rTe={class:"d-flex justify-start align-center flex-wrap"},sTe={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},oTe={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},iTe={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},lTe={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},uTe={class:"medicine-info flex-grow-1"},cTe={class:"d-flex align-center justify-start"},dTe={class:"d-flex align-center"},fTe={class:"medicine-trade-name text-left"},ATe={key:0,class:"text-caption text-medium-emphasis ml-1"},mTe={class:"d-flex flex-column ml-1 order-buttons-container",style:{gap:"2px"}},vTe={class:"d-flex align-center ml-2"},hTe={class:"text-caption text-medium-emphasis text-right"},pTe={class:"d-flex flex-wrap gap-1"},gTe={class:"text-caption text-error d-flex align-center"},yTe={class:"text-caption text-warning d-flex align-center"},_Te={class:"text-caption"},wTe={class:"text-center"},bTe={class:"text-body-2 text-medium-emphasis mt-2"},xTe={__name:"consultation-window",props:{consultation:{type:Object,required:!0},patient:{type:Object,required:!0},consultationCopy:{type:Object,required:!1}},emits:["update:consultation","createNewArtefact","pdfGenerated"],setup(e,{emit:t}){const n=e,a=Ln(),{showSuccess:r,showError:s,showWarning:o}=la(),l=t,c=R(Kn.cloneDeep(n.patient)),f=R(Kn.cloneDeep(n.consultation)),d=R([]),A=R(null),m=R("write"),p=R(!1),h=R(!1),y=R(null),g=R(!1),_=R(!1),b=R(null),S=R(!1),B=R(!1),F=R(!1),T=R(!1),E=R(!1),x=R({}),C=ee(()=>a.state.doctorModule.doctorId),D=ee(()=>a.getters["doctorModule/currentDoctor"]),U=ee(()=>a.getters["doctorModule/isPharmacyEnabled"]),L=ee(()=>a.getters["pharmacyModule/currentPharmacyId"]),H=R(!1),oe=re=>{if(!re?.consultationDate||!re?.status)return!1;const ue=re.consultationDate,We=re.status,nt=Ct=>{if(!Ct)return!1;const Xe=new Date().toLocaleDateString("en-CA");return Ct===Xe},Yt=Ct=>{if(!Ct)return!1;const Xe=new Date().toLocaleDateString("en-CA"),Et=new Date(Ct),ca=new Date(Xe);return Et>ca};return(nt(ue)||Yt(ue))&&We==="CREATED"||We==="UPDATED"},de=ee(()=>f.value?.id&&f.value.id!=="0"&&oe(f.value)),te=ee(()=>f.value?.status==="UPDATED");ee(()=>!d.value||d.value.length===0?!1:d.value.some(re=>re.isPharmacy===!0&&re.quantityUnits!==null&&re.quantityUnits!==void 0&&re.quantityUnits>0));const q=ee(()=>!O.value||O.value.length===0?[]:O.value.filter(re=>re.isCreatedByUser===!0&&!re.isUserTyped)),ce=re=>re.dosage_schedule&&re.dosage_schedule.trim()||re.duration&&re.duration.trim()||re.instructions&&re.instructions.trim(),le=re=>re.isSelected?ce(re)?null:"missing-dosage":"unselected",Z=re=>{const ue=le(re);return ue?`medicine-${ue}`:""},ne=ee(()=>d.value.filter(re=>re.isSelected&&ce(re)));ee(()=>d.value.filter(re=>re.isSelected&&!ce(re)));const G=ee(()=>d.value.filter(re=>!re.isSelected)),W=ee(()=>d.value.filter(re=>re.isSelected&&!ce(re))),Q=ee(()=>{const re=ne.value.length,ue=W.value.length,We=G.value.length;if(We===0&&ue===0)return"Save Consultation";const nt=[];We>0&&nt.push(`${We} unselected will be excluded`),ue>0&&nt.push(`${ue} without dosage will be excluded`);const Yt=re>0?`${re} medicine${re>1?"s":""} will be saved`:"";return Yt?`Save Consultation (${Yt}, ${nt.join(", ")})`:`Save Consultation (${nt.join(", ")})`}),O=R([]),ae=ee(()=>{const re=new Date;return re.setDate(re.getDate()+1),re.toISOString().split("T")[0]}),j=re=>{(re.ctrlKey||re.metaKey)&&re.key==="s"&&(re.preventDefault(),f.value?.id&&f.value.id!=="0"&&Te(f.value))},J=(re,ue=30)=>!re||re.length<=ue?re:re.substring(0,ue)+"...",ie=re=>{if(!re)return"";const ue=[];return re.dosageSchedule&&re.dosageSchedule.trim()&&ue.push(re.dosageSchedule.trim()),re.duration&&re.duration.trim()&&ue.push(re.duration.trim()),re.instructions&&re.instructions.trim()&&ue.push(re.instructions.trim()),re.quantityUnits!==null&&re.quantityUnits!==void 0&&ue.push(`Qty: ${re.quantityUnits}`),ue.join(", ")},X=re=>{if(!re)return null;if(re instanceof Date){const ue=re.getFullYear(),We=String(re.getMonth()+1).padStart(2,"0"),nt=String(re.getDate()).padStart(2,"0");return`${ue}-${We}-${nt}`}return typeof re=="string"?re.includes("T")?re.split("T")[0]:re:null},fe=re=>{if(!re)return"dd-mm";try{let ue;if(re instanceof Date)ue=re;else if(typeof re=="string")ue=new Date(re.includes("T")?re:re+"T12:00:00");else return"dd-mm";return isNaN(ue.getTime())?"dd-mm":ue.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}catch(ue){return console.error("Error formatting followup date:",ue),"dd-mm"}},M=re=>{f.value.followupDate=X(re),E.value=!1},z=re=>{if(!re)return null;try{if(re instanceof Date)return re;if(typeof re=="string"){const ue=re.includes("T")?re.split("T")[0]:re;return new Date(ue+"T12:00:00")}}catch(ue){console.error("Error parsing followup date for picker:",ue)}return null},se=()=>{f.value.followupDate=null},be=re=>{console.log("Tab changed to:",re)};An(async()=>{await Zn(),document.addEventListener("keydown",j)}),Ri(()=>{document.removeEventListener("keydown",j)});const Fe=()=>{console.log("Add Item"),p.value=!0},ye=()=>{p.value=!1},Qe=re=>{y.value=re,h.value=!0},_e=()=>{h.value=!1,y.value=null},Se=re=>{const ue=d.value.findIndex(We=>We.id===re.id);ue!==-1&&(d.value[ue]={...d.value[ue],...re})},Ee=re=>{if(re===0)return;const ue=[...d.value];[ue[re-1],ue[re]]=[ue[re],ue[re-1]],d.value=ue},Ue=re=>{if(re===d.value.length-1)return;const ue=[...d.value];[ue[re],ue[re+1]]=[ue[re+1],ue[re]],d.value=ue},je=R(!1),at=R(!1),mt=R(null),xe=()=>{je.value=!0,console.log("Diagnosis Template")},Be=re=>{mt.value=re,at.value=!0,console.log("Edit Diagnosis Template",re)},Ye=()=>{je.value=!1},kt=()=>{je.value=!1},xt=()=>{at.value=!1,mt.value=null},Nt=()=>{at.value=!1,mt.value=null},At=async re=>{if(!re||re==="0"){console.log("Cannot fetch vitals: Invalid consultation ID"),A.value=null;return}try{const{fetchVitalsByConsultation:ue}=await ns(async()=>{const{fetchVitalsByConsultation:nt}=await Promise.resolve().then(()=>ZEe);return{fetchVitalsByConsultation:nt}},void 0,import.meta.url),We=await ue(re);A.value=We.data}catch(ue){console.error("Error fetching vitals:",ue)}},Ot=()=>{g.value=!0},Dt=()=>{g.value=!1},bt=re=>{A.value=re,g.value=!1},Ze=()=>{_.value=!0},qt=()=>{_.value=!1},Vt=async re=>{if(!re||re==="0"){b.value=null;return}try{const We=(await it.get(`referral/by-consultation/${re}`,{params:{doctor_id:C.value}})).data?.data??null;b.value=We,f.value&&(f.value.referral=We)}catch(ue){console.error("Error fetching referral:",ue),b.value=null,f.value&&(f.value.referral=null)}},zt=()=>{S.value=!0},ln=()=>{S.value=!1},Dn=re=>{b.value=re,f.value&&(f.value.referral=re),S.value=!1};Ge(()=>n.patient,re=>{re&&(c.value=Kn.cloneDeep(re),console.log("Patient data updated:",c.value))},{immediate:!0}),Ge(()=>n.consultation,async re=>{re&&re.id&&re.id!=="0"?(oe(re)||console.warn("Consultation window received invalid consultation:",{id:re.id,status:re.status,date:re.consultationDate}),f.value=Kn.cloneDeep(re),console.log("Consultation Details",f.value),d.value=Kn.cloneDeep(f.value.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(ue=>{ue.isSelected=!0,ue.dosage?(ue.dosage_schedule=ue.dosage.dosageSchedule||"",ue.duration=ue.dosage.duration||"",ue.instructions=ue.dosage.instructions||"",ue.quantityUnits=ue.dosage.quantityUnits!==null&&ue.dosage.quantityUnits!==void 0?ue.dosage.quantityUnits:null):(ue.dosage_schedule=ue.dosage_schedule||"",ue.duration=ue.duration||"",ue.instructions=ue.instructions||"",ue.quantityUnits=ue.quantityUnits!==null&&ue.quantityUnits!==void 0?ue.quantityUnits:null)}),await At(re.id),await Vt(re.id)):re&&re.id==="0"&&(f.value=Kn.cloneDeep(re),d.value=[],A.value=null,b.value=null,console.log("No consultation selected"))},{immediate:!0}),Ge(()=>n.consultationCopy,re=>{console.log("Consultation Copy",re),f.value.doctorNotes=re.doctorNotes,f.value.patientNotes=re.patientNotes,f.value.diagnosis=re.diagnosis,f.value.investigations=re.investigations,f.value.clinicalNotes=re.clinicalNotes||"",d.value=Kn.cloneDeep(re.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(ue=>{ue.dosage?(ue.dosage_schedule=ue.dosage.dosageSchedule||"",ue.duration=ue.dosage.duration||"",ue.instructions=ue.dosage.instructions||"",ue.quantityUnits=ue.dosage.quantityUnits!==null&&ue.dosage.quantityUnits!==void 0?ue.dosage.quantityUnits:null):(ue.dosage_schedule=ue.dosage_schedule||"",ue.duration=ue.duration||"",ue.instructions=ue.instructions||"",ue.quantityUnits=ue.quantityUnits!==null&&ue.quantityUnits!==void 0?ue.quantityUnits:null)})}),Ge(()=>f.value.patientNotes,re=>{re?.trim()||console.log("Patient notes cleared")});const vt=async re=>{console.log("Searched Medicine",re);for(const ue of re)await et(ue)},et=async re=>{if(d.value.some(ue=>ue.id===re.id))console.log("Medicine already selected");else{if(re.dosage_schedule=re.dosage_schedule||"",re.duration=re.duration||"",re.instructions=re.instructions||"",re.quantityUnits=re.quantityUnits!==null&&re.quantityUnits!==void 0?re.quantityUnits:null,re.isSelected=!0,re.isLocal===!0)try{const{data:ue,error:We,errorMessage:nt}=await cEe(re,C.value,{skipMessages:!0});!We&&ue&&ue.length>0?(re.dosageHistory=ue,console.log(`Fetched ${ue.length} dosage records for local medicine:`,re.productName)):(re.dosageHistory=[],nt&&nt.includes("No dosages found")&&o(nt))}catch(ue){console.error("Error fetching dosage history:",ue),re.dosageHistory=[]}else re.dosageHistory=[];console.log("Selected Medicine",re),d.value.push(re),console.log("Medicines List",d.value)}},Wt=re=>{console.log("New Medicines",re),d.value.push({id:re.id,productName:re.productName,marketer:re.marketer,saltComposition:re.saltComposition,productForm:re.productForm,isLocal:re.isLocal,dosage_schedule:"",duration:"",instructions:"",quantityUnits:null,isSelected:!0})},_n=(re,ue)=>{if(console.log("Selected dosage schedule:",re,"for medicine:",ue),!re||!ue)return;const We=d.value.findIndex(nt=>nt.id===ue.id);if(We!==-1){const nt=typeof re=="string"?re:re.dosage_schedule||"";d.value[We].dosage_schedule=nt,console.log("Updated medicine with dosage schedule:",d.value[We])}},na=(re,ue)=>{if(console.log("Selected dosage instructions:",re,"for medicine:",ue),!ue)return;const We=d.value.findIndex(nt=>nt.id===ue.id);if(We!==-1){const nt=typeof re=="string"?re:re?.instructions||"";d.value[We].instructions=nt,console.log("Updated medicine with instructions:",d.value[We])}},rt=(re,ue)=>{if(console.log("Selected dosage duration:",re,"for medicine:",ue),!ue)return;const We=d.value.findIndex(nt=>nt.id===ue.id);if(We!==-1){const nt=typeof re=="string"?re:re?.duration||"";d.value[We].duration=nt,console.log("Updated medicine with duration:",d.value[We])}},Pe=(re,ue)=>{if(console.log("Selected dosage history:",re,"for medicine:",ue),!re||!ue)return;const We=d.value.findIndex(nt=>nt.id===ue.id);We!==-1&&(d.value[We].dosage_schedule=re.dosageSchedule||"",d.value[We].instructions=re.instructions||"",d.value[We].duration=re.duration||"",d.value[We].quantityUnits=re.quantityUnits!==null&&re.quantityUnits!==void 0?re.quantityUnits:null,console.log("Updated medicine with dosage history:",d.value[We]))},ut=async re=>{console.log("Template selected for auto-fill:",re);const{template:ue,autoFillData:We}=re;if(We.diagnosis&&We.diagnosis.trim()&&(f.value.diagnosis&&f.value.diagnosis.trim()?f.value.diagnosis.includes(We.diagnosis)||(f.value.diagnosis+=", "+We.diagnosis):f.value.diagnosis=We.diagnosis),We.instructions&&We.instructions.trim()&&(f.value.patientNotes&&f.value.patientNotes.trim()?f.value.patientNotes.includes(We.instructions)||(f.value.patientNotes+=", "+We.instructions):f.value.patientNotes=We.instructions),We.investigations&&We.investigations.trim()&&(f.value.investigations&&f.value.investigations.trim()?f.value.investigations.includes(We.investigations)||(f.value.investigations+=", "+We.investigations):f.value.investigations=We.investigations),We.medicines&&Array.isArray(We.medicines))for(const nt of We.medicines)nt.medicine&&await et(nt.medicine);O.value.some(nt=>nt.id===ue.id)||O.value.push(ue),console.log("Template auto-fill completed")},wt=async re=>{if(!re){O.value=[];return}console.log("Diagnosis selected:",re),re.isCreatedByUser&&!re.isUserTyped?(O.value.some(ue=>ue.id===re.id)||O.value.push(re),await wn(re)):(O.value=[],console.log("User-typed or history diagnosis - no template extras to process"))},Xt=async re=>{re&&console.log("Investigation selected:",re)},bn=async re=>{if(!re)return;console.log("Patient advice selected:",re);const ue=re.patientAdvice||"",We=f.value.patientNotes||"";We.trim()?f.value.patientNotes=We.trim()+", "+ue:f.value.patientNotes=ue},wn=async re=>{if(console.log("Processing Diagnosis Extras",re),!re.isCreatedByUser||re.isUserTyped){console.log("Skipping extras for user-typed text:",re.diagnosisName);return}if(re.instructions&&!f.value.patientNotes.includes(re.instructions)&&(f.value.patientNotes.trim()?f.value.patientNotes+=", "+re.instructions:f.value.patientNotes=re.instructions),re.investigations&&!f.value.investigations.includes(re.investigations)&&(f.value.investigations.trim()?f.value.investigations+=", "+re.investigations:f.value.investigations=re.investigations),re.diagnosisMedicines&&Array.isArray(re.diagnosisMedicines))for(const ue of re.diagnosisMedicines)console.log("Diagnosis Medicine",ue),ue.medicine&&await et(ue.medicine)},Zn=async()=>{try{const re=await Ch(C.value);x.value=re.data,console.log("Configuration data fetched:",x.value)}catch(re){console.error("Error fetching diagnosis:",re)}},ua=()=>{console.log("Create New Consultation"),l("createNewArtefact")},Ce=async()=>{if(!f.value.id||f.value.id==="0"){console.log("Cannot refresh: No valid consultation ID");return}const re=await aU(f.value.id);f.value=Kn.cloneDeep(re.data),d.value=Kn.cloneDeep(f.value.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(ue=>{ue.isSelected=!0,ue.dosage?(ue.dosage_schedule=ue.dosage.dosageSchedule||"",ue.duration=ue.dosage.duration||"",ue.instructions=ue.dosage.instructions||"",ue.quantityUnits=ue.dosage.quantityUnits!==null&&ue.dosage.quantityUnits!==void 0?ue.dosage.quantityUnits:null):(ue.dosage_schedule=ue.dosage_schedule||"",ue.duration=ue.duration||"",ue.instructions=ue.instructions||"",ue.quantityUnits=ue.quantityUnits!==null&&ue.quantityUnits!==void 0?ue.quantityUnits:null)}),await At(f.value.id)},He=async re=>{const ue=re.patient_id||re.patientId;ue&&await Hve(ue)},Re=async()=>{if(!f.value?.id||f.value.id==="0"){s("Please save the consultation first");return}if(!L.value){s("Please select a pharmacy first");return}try{H.value=!0;const{data:re,error:ue}=await mM(f.value.id,L.value);ue?s(ue.response?.data?.error||"Failed to send to pharmacy"):r("Draft bill created successfully in pharmacy")}catch(re){console.error("Error sending to pharmacy:",re),s("An unexpected error occurred")}finally{H.value=!1}},Te=async re=>{if(!re?.id||re.id==="0"){console.log("Cannot save: No valid consultation ID");return}try{const ue=d.value.filter(Ct=>Ct.isSelected),We=ue.length>0;if(re.status="UPDATED",await QM(re),!We){console.log("Consultation saved successfully without medicines"),await Ve(),await He(re);return}const nt=await oEe(ue);console.log("Medicines created response",nt.data),nt.data&&ue.forEach(Ct=>{nt.data[Ct.id]&&(Ct.id=nt.data[Ct.id]),Ct.isLocal=!0}),console.log("Medicines for Dosage",ue);const Yt=await iEe(ue,C.value);console.log("Dosage created response",re.id,Yt.data),await lEe(re.id,Yt.data),r("Consultation details and medicines saved successfully"),await Ve(),await He(re)}catch(ue){console.error("Error updating consultation:",ue)}},Ve=async()=>{try{const re=await aU(f.value.id),ue=Kn.cloneDeep(re.data);f.value=ue,d.value=Kn.cloneDeep(ue.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(We=>{We.isSelected=!0,We.dosage?(We.dosage_schedule=We.dosage.dosageSchedule||"",We.duration=We.dosage.duration||"",We.instructions=We.dosage.instructions||"",We.quantityUnits=We.dosage.quantityUnits!==null&&We.dosage.quantityUnits!==void 0?We.dosage.quantityUnits:null):(We.dosage_schedule=We.dosage_schedule||"",We.duration=We.duration||"",We.instructions=We.instructions||"",We.quantityUnits=We.quantityUnits!==null&&We.quantityUnits!==void 0?We.quantityUnits:null)}),await At(ue.id),l("update:consultation",ue),console.log("Emitted fresh consultation data to parent:",ue)}catch(re){console.error("Error refreshing consultation data after save:",re),l("update:consultation",Kn.cloneDeep(f.value))}},$e=re=>{console.log("PDF generated successfully:",re),l("pdfGenerated",re)},dt=()=>{B.value=!0},Bt=re=>{console.log("Clinical notes transcription completed:",re),re&&re.trim()&&(f.value.clinicalNotes&&f.value.clinicalNotes.trim()?f.value.clinicalNotes+=" "+re:f.value.clinicalNotes=re),B.value=!1},yt=()=>{F.value=!0},gt=re=>{console.log("Patient advice transcription completed:",re),re&&re.trim()&&(f.value.patientNotes&&f.value.patientNotes.trim()?f.value.patientNotes+=" "+re:f.value.patientNotes=re),F.value=!1},pt=()=>{T.value=!0},tt=re=>{console.log("Doctor notes transcription completed:",re),re&&re.trim()&&(f.value.doctorNotes&&f.value.doctorNotes.trim()?f.value.doctorNotes+=" "+re:f.value.doctorNotes=re),T.value=!1};return(re,ue)=>{const We=I("v-tab"),nt=I("v-tooltip"),Yt=I("v-tabs"),Ct=I("v-card"),Xe=I("v-col"),Et=I("v-row"),ca=I("v-progress-circular"),Un=I("v-btn"),Vr=I("v-empty-state"),Mn=I("v-icon"),ma=I("v-card-subtitle"),Qn=I("v-chip"),fr=I("v-textarea"),oo=I("v-checkbox"),Qs=I("v-text-field"),Mi=I("v-date-picker"),Zu=I("v-menu"),ss=I("v-divider"),Gr=I("v-dialog"),Ir=I("v-tabs-window-item"),Ps=I("v-tabs-window");return P(),Ae(ze,null,[i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,null,{default:u(()=>[i(Ct,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[i(Yt,{modelValue:m.value,"onUpdate:modelValue":[ue[0]||(ue[0]=Rt=>m.value=Rt),be],"align-tabs":"center",density:"compact",class:"interactive-tabs"},{default:u(()=>[i(nt,{text:"Write Prescription"},{activator:u(({props:Rt})=>[i(We,Ie({value:"write"},Rt,{class:["tab-interactive",{"tab-active":m.value==="write"}],tabindex:"-1"}),{default:u(()=>[...ue[22]||(ue[22]=[v("div",{class:"tab-content"}," WRITE Rx ",-1)])]),_:1},16,["class"])]),_:1}),i(nt,{text:"Share Prescription"},{activator:u(({props:Rt})=>[i(We,Ie({value:"share"},Rt,{class:["tab-interactive",{"tab-active":m.value==="share"}]}),{default:u(()=>[...ue[23]||(ue[23]=[v("div",{class:"tab-content"}," SHARE Rx ",-1)])]),_:1},16,["class"])]),_:1}),i(nt,{text:"Uploaded Items"},{activator:u(({props:Rt})=>[i(We,Ie({value:"media"},Rt,{class:["tab-interactive",{"tab-active":m.value==="media"}],tabindex:"-1"}),{default:u(()=>[...ue[24]||(ue[24]=[v("div",{class:"tab-content"}," UPLOADS ",-1)])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(Ps,{modelValue:m.value,"onUpdate:modelValue":ue[19]||(ue[19]=Rt=>m.value=Rt),class:"flex-grow-1"},{default:u(()=>[i(Ir,{value:"write",class:"h-100"},{default:u(()=>[f.value.id?f.value.id==0?(P(),he(Et,{key:1,"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[i(Vr,{image:Oe(hR)},{title:u(()=>[...ue[25]||(ue[25]=[v("div",{class:"text-subtitle-2"}," No consultation selected ",-1)])]),text:u(()=>[v("div",eTe,[ue[27]||(ue[27]=N(" Create a consultation by clicking on the button above ",-1)),ue[28]||(ue[28]=v("br",null,null,-1)),i(Un,{class:"mt-2",onClick:ua},{default:u(()=>[...ue[26]||(ue[26]=[N("Create Consultation",-1)])]),_:1})])]),_:1},8,["image"])]),_:1})]),_:1})):f.value.id&&!de.value?(P(),he(Et,{key:2,"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",tTe,[i(Mn,{size:"48",color:"warning",class:"mb-4"},{default:u(()=>[...ue[29]||(ue[29]=[N("mdi-alert-circle-outline",-1)])]),_:1}),ue[30]||(ue[30]=v("div",{class:"text-h6 text-medium-emphasis"},"Invalid consultation",-1)),v("div",nTe,"This consultation cannot be displayed (status: "+K(f.value.status)+")",1)])]),_:1})]),_:1})):(P(),Ae(ze,{key:3},[i(Et,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(Ct,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"8",style:{"text-align":"left"},class:"d-flex align-center pl-1"},{default:u(()=>[N(K(f.value.consultationDate?new Date(f.value.consultationDate).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",weekday:"short",month:"short",day:"numeric",year:"numeric"}):f.value.createdAt?Oe(mr)(f.value.createdAt):"No date"),1)]),_:1}),i(Xe,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[U.value?(P(),he(nt,{key:0,text:"Send to Pharmacy"},{activator:u(({props:Rt})=>[i(Un,Ie({onClick:Re},Rt,{class:"btn-hover-base mr-1",tabindex:"-1",variant:"outlined",loading:H.value,disabled:!te.value}),{default:u(()=>[...ue[31]||(ue[31]=[N("Send to Pharmacy",-1)])]),_:1},16,["loading","disabled"])]),_:1})):ge("",!0),i(nt,{text:Q.value},{activator:u(({props:Rt})=>[i(Un,Ie({onClick:ue[1]||(ue[1]=Ar=>Te(f.value))},Rt,{class:"btn-hover-base mr-1",tabindex:"-1"}),{default:u(()=>[...ue[32]||(ue[32]=[N("SAVE",-1)])]),_:1},16)]),_:1},8,["text"]),i(nt,{text:"Refresh Consultation"},{activator:u(({props:Rt})=>[i(Un,Ie({rounded:"x-small",size:"small",variant:"outlined"},Rt,{class:"btn-hover-base",onClick:ue[2]||(ue[2]=Ar=>Ce()),tabindex:"-1"}),{default:u(()=>[i(Mn,{size:"large"},{default:u(()=>[...ue[33]||(ue[33]=[v("img",{src:Dg,alt:"Refresh"},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(Et,{"no-gutters":"",class:"h-100"},{default:u(()=>[i(Xe,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(Ct,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"8",class:"d-flex align-center flex-wrap gap-2"},{default:u(()=>[i(ma,{class:"pa-0"},{default:u(()=>[...ue[34]||(ue[34]=[v("strong",null,"Vitals",-1)])]),_:1}),A.value?(P(),Ae(ze,{key:0},[A.value.pulse?(P(),he(Qn,{key:0,color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[ue[35]||(ue[35]=v("strong",null,"Pulse:",-1)),N(" "+K(Oe(Zr)(A.value.pulse,"bpm")),1)]),_:1})):ge("",!0),A.value.systolicBP&&A.value.diastolicBP?(P(),he(Qn,{key:1,color:"primary","text-color":"black",size:"small"},{default:u(()=>[ue[36]||(ue[36]=v("strong",null,"BP:",-1)),N(" "+K(A.value.systolicBP)+"/"+K(A.value.diastolicBP)+" mmHg ",1)]),_:1})):ge("",!0),A.value.respiratoryRate?(P(),he(Qn,{key:2,color:"primary","text-color":"black",size:"small"},{default:u(()=>[ue[37]||(ue[37]=v("strong",null,"RR:",-1)),N(" "+K(Oe(Zr)(A.value.respiratoryRate,"breaths/min")),1)]),_:1})):ge("",!0),A.value.temperature?(P(),he(Qn,{key:3,color:"primary","text-color":"black",size:"small"},{default:u(()=>[ue[38]||(ue[38]=v("strong",null,"Temp:",-1)),N(" "+K(Oe(Zr)(A.value.temperature,"C")),1)]),_:1})):ge("",!0),A.value.weight?(P(),he(Qn,{key:4,color:"primary","text-color":"black",size:"small"},{default:u(()=>[ue[39]||(ue[39]=v("strong",null,"Weight:",-1)),N(" "+K(Oe(Zr)(A.value.weight,"kg")),1)]),_:1})):ge("",!0),A.value.height?(P(),he(Qn,{key:5,color:"primary","text-color":"black",size:"small"},{default:u(()=>[ue[40]||(ue[40]=v("strong",null,"Height:",-1)),N(" "+K(Oe(Zr)(A.value.height,"cm")),1)]),_:1})):ge("",!0),A.value.serumBilirubin?(P(),he(Qn,{key:6,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[ue[41]||(ue[41]=v("strong",null,"S.Bilirubin:",-1)),N(" "+K(Oe(Zr)(A.value.serumBilirubin,"mg/dL")),1)]),_:1})):ge("",!0),A.value.bloodGlucoseFF?(P(),he(Qn,{key:7,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[ue[42]||(ue[42]=v("strong",null,"Glucose(FF):",-1)),N(" "+K(Oe(Zr)(A.value.bloodGlucoseFF,"mg/dL")),1)]),_:1})):ge("",!0),A.value.bloodGlucosePP?(P(),he(Qn,{key:8,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[ue[43]||(ue[43]=v("strong",null,"Glucose(PP):",-1)),N(" "+K(Oe(Zr)(A.value.bloodGlucosePP,"mg/dL")),1)]),_:1})):ge("",!0),A.value.bloodGlucoseRandom?(P(),he(Qn,{key:9,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[ue[44]||(ue[44]=v("strong",null,"Glucose(R):",-1)),N(" "+K(Oe(Zr)(A.value.bloodGlucoseRandom,"mg/dL")),1)]),_:1})):ge("",!0),A.value.serumCreatinine?(P(),he(Qn,{key:10,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[ue[45]||(ue[45]=v("strong",null,"S.Creatinine:",-1)),N(" "+K(Oe(Zr)(A.value.serumCreatinine,"mg/dL")),1)]),_:1})):ge("",!0)],64)):(P(),Ae("span",aTe," - No vitals recorded yet "))]),_:1}),i(Xe,{cols:"4",class:"d-flex justify-end align-center gap-2"},{default:u(()=>[i(nt,{text:A.value?"Edit Vitals":"Add Vitals"},{activator:u(({props:Rt})=>[i(Un,Ie({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Rt,{onClick:Ot,tabindex:"-1"}),{default:u(()=>[i(Mn,{start:""},{default:u(()=>[...ue[46]||(ue[46]=[v("img",{src:nEe,alt:"Vitals"},null,-1)])]),_:1}),N(" "+K(A.value?"Update":"Add"),1)]),_:1},16)]),_:1},8,["text"]),i(nt,{text:"View Trends"},{activator:u(({props:Rt})=>[i(Un,Ie({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Rt,{onClick:Ze,tabindex:"-1"}),{default:u(()=>[i(Mn,{start:""},{default:u(()=>[...ue[47]||(ue[47]=[v("img",{src:aEe,alt:"Trends"},null,-1)])]),_:1}),ue[48]||(ue[48]=N(" Trends ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(ME,{type:"referredBy",referral:b.value,disabled:!f.value?.id||f.value?.id==="0",onOpenDialog:zt},null,8,["referral","disabled"])]),_:1})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(Ct,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[i(Et,{"no-gutters":"",class:"align-top"},{default:u(()=>[i(Xe,{cols:"2",class:"d-flex align-top"},{default:u(()=>[i(ma,{class:"pa-0"},{default:u(()=>[...ue[49]||(ue[49]=[v("strong",null,"Diagnosis",-1)])]),_:1})]),_:1}),i(Xe,{cols:"7",class:"d-flex align-top"},{default:u(()=>[i(TEe,{"doctor-id":C.value,onTemplateSelected:ut},null,8,["doctor-id"])]),_:1}),i(Xe,{cols:"3",class:"d-flex justify-end align-top"},{default:u(()=>[i(nt,{text:"Save as Template"},{activator:u(({props:Rt})=>[i(Un,Ie({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Rt,{onClick:xe,tabindex:"-1"}),{default:u(()=>[i(Mn,{start:""},{default:u(()=>[...ue[50]||(ue[50]=[v("img",{src:TH,alt:"Save Template"},null,-1)])]),_:1}),ue[51]||(ue[51]=N(" Create Template ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1}),q.value.length>0?(P(),he(Et,{key:0,"no-gutters":"",class:"mt-n2 mb-2"},{default:u(()=>[i(Xe,{cols:"1"}),i(Xe,{cols:"10"},{default:u(()=>[v("div",rTe,[(P(!0),Ae(ze,null,Jt(q.value,Rt=>(P(),he(nt,{key:Rt.id,text:`Edit template: ${Rt.diagnosisName}`},{activator:u(({props:Ar})=>[i(Qn,Ie({variant:"tonal",size:"default",density:"default",color:"primary",text:J(Rt.diagnosisName,30),class:"mr-1 mb-1 chip-hover"},{ref_for:!0},Ar),{append:u(()=>[i(nt,{text:"Edit Template"},{activator:u(({props:Rn})=>[i(Mn,Ie({size:"small",onClick:gn(os=>Be(Rt),["stop"])},{ref_for:!0},Rn,{class:"ml-1 edit-icon",tabindex:"-1"}),{default:u(()=>[...ue[52]||(ue[52]=[v("img",{src:Cv,alt:"Edit Template"},null,-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1040,["text"])]),_:2},1032,["text"]))),128))])]),_:1}),i(Xe,{cols:"1"})]),_:1})):ge("",!0),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"1"}),i(Xe,{cols:"9"},{default:u(()=>[i(gEe,{modelValue:f.value.diagnosis,"onUpdate:modelValue":ue[3]||(ue[3]=Rt=>f.value.diagnosis=Rt),"doctor-id":C.value,onDiagnosisSelected:wt},null,8,["modelValue","doctor-id"])]),_:1}),i(Xe,{cols:"2"})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"1"}),i(Xe,{cols:"9"},{default:u(()=>[i(fr,{modelValue:f.value.clinicalNotes,"onUpdate:modelValue":ue[4]||(ue[4]=Rt=>f.value.clinicalNotes=Rt),label:"Clinical Notes",clearable:"","auto-grow":"",rows:"1","row-height":"15",density:"compact",variant:"underlined",name:"clinical-notes",autocomplete:"off","hide-details":"auto"},null,8,["modelValue"])]),_:1}),i(Xe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[i(nt,{text:"Voice Input"},{activator:u(({props:Rt})=>[i(Un,Ie({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Rt,{onClick:dt,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),i(Xe,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(Ct,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[i(Et,{"no-gutters":"",class:"align-top"},{default:u(()=>[i(Xe,{cols:"2",class:"d-flex align-top"},{default:u(()=>[i(ma,{class:"pa-0"},{default:u(()=>[...ue[53]||(ue[53]=[v("strong",null,"Rx",-1)])]),_:1})]),_:1}),i(Xe,{cols:"7",class:"d-flex align-top px-2"},{default:u(()=>[i(PH,{showInventoryStatus:U.value,onSearchedMedicines:vt,onAddMedicine:Fe},null,8,["showInventoryStatus"])]),_:1}),i(Xe,{cols:"3",class:"d-flex justify-end align-top gap-2"},{default:u(()=>[i(nt,{text:"Add Medicine"},{activator:u(({props:Rt})=>[i(Un,Ie({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Rt,{onClick:Fe,tabindex:"-1"}),{default:u(()=>[i(Mn,{start:""},{default:u(()=>[...ue[54]||(ue[54]=[v("img",{src:m_,alt:"Add Medicine"},null,-1)])]),_:1}),ue[55]||(ue[55]=N(" Create Medicine ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[d.value.length>0?(P(),he(Xe,{key:0,cols:"12"},{default:u(()=>[i(Et,{"no-gutters":"",class:"mb-2 mt-0"},{default:u(()=>[i(Xe,{cols:"12",md:"6",lg:U.value?3:4,class:"pr-2"},{default:u(()=>[v("div",sTe,[i(Mn,{size:"small",class:"mr-1"},{default:u(()=>[...ue[56]||(ue[56]=[N("mdi-clock-outline",-1)])]),_:1}),ue[57]||(ue[57]=N(" Dosage Schedule e.g. 1 after breakfast ",-1))])]),_:1},8,["lg"]),i(Xe,{cols:"12",md:"6",lg:"3",class:"px-1"},{default:u(()=>[v("div",oTe,[i(Mn,{size:"small",class:"mr-1"},{default:u(()=>[...ue[58]||(ue[58]=[N("mdi-calendar-range",-1)])]),_:1}),ue[59]||(ue[59]=N(" Duration e.g. 5 days ",-1))])]),_:1}),i(Xe,{cols:"12",md:"6",lg:U.value?3:5,class:"px-1"},{default:u(()=>[v("div",iTe,[i(Mn,{size:"small",class:"mr-1"},{default:u(()=>[...ue[60]||(ue[60]=[N("mdi-information-outline",-1)])]),_:1}),ue[61]||(ue[61]=N(" Instructions e.g. on empty stomach ",-1))])]),_:1},8,["lg"]),U.value?(P(),he(Xe,{key:0,cols:"12",md:"6",lg:"3",class:"pl-2"},{default:u(()=>[v("div",lTe,[i(Mn,{size:"small",class:"mr-1"},{default:u(()=>[...ue[62]||(ue[62]=[N("mdi-numeric",-1)])]),_:1}),ue[63]||(ue[63]=N(" Quantity e.g. 5 ",-1))])]),_:1})):ge("",!0)]),_:1}),(P(!0),Ae(ze,null,Jt(d.value,(Rt,Ar)=>(P(),Ae(ze,{key:Ar},[i(Ct,{flat:"",class:lt(["medicine-inline-layout mb-1",Z(Rt)])},{default:u(()=>[i(Et,{"no-gutters":"",align:"center",class:"mb-1"},{default:u(()=>[i(Xe,{cols:"5",class:"d-flex align-center"},{default:u(()=>[i(oo,{modelValue:Rt.isSelected,"onUpdate:modelValue":Rn=>Rt.isSelected=Rn,color:"primary",density:"compact","hide-details":"",class:"mr-2 flex-shrink-0",style:{"margin-top":"-2px"},tabindex:"-1"},null,8,["modelValue","onUpdate:modelValue"]),v("div",uTe,[v("div",cTe,[v("div",dTe,[v("span",fTe,[N(K(Rt.productName)+" ",1),Rt.productForm?(P(),Ae("span",ATe," ("+K(Rt.productForm)+") ",1)):ge("",!0)]),Rt.isLocal?(P(),he(nt,{key:0,text:"Edit Medicine"},{activator:u(({props:Rn})=>[i(Mn,Ie({size:"small"},{ref_for:!0},Rn,{class:"edit-icon flex-shrink-0 ml-1",onClick:os=>Qe(Rt),tabindex:"-1"}),{default:u(()=>[...ue[64]||(ue[64]=[N(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)):ge("",!0),v("div",mTe,[i(nt,{text:"Move Up"},{activator:u(({props:Rn})=>[i(Mn,Ie({size:"x-small"},{ref_for:!0},Rn,{class:["order-icon",{"order-icon-disabled":Ar===0}],onClick:os=>Ee(Ar),tabindex:"-1"}),{default:u(()=>[...ue[65]||(ue[65]=[N(" mdi-chevron-up ",-1)])]),_:1},16,["class","onClick"])]),_:2},1024),i(nt,{text:"Move Down"},{activator:u(({props:Rn})=>[i(Mn,Ie({size:"x-small"},{ref_for:!0},Rn,{class:["order-icon",{"order-icon-disabled":Ar===d.value.length-1}],onClick:os=>Ue(Ar),tabindex:"-1"}),{default:u(()=>[...ue[66]||(ue[66]=[N(" mdi-chevron-down ",-1)])]),_:1},16,["class","onClick"])]),_:2},1024)])]),v("div",vTe,[Rt.isPharmacy?(P(),he(nt,{key:0,text:"Pharmacy Medicine"},{activator:u(({props:Rn})=>[i(Mn,Ie({size:"small"},{ref_for:!0},Rn,{class:"flex-shrink-0"}),{default:u(()=>[...ue[67]||(ue[67]=[N(" mdi-store-plus-outline ",-1)])]),_:1},16)]),_:1})):Rt.isLocal?(P(),he(nt,{key:1,text:"Saved Medicine"},{activator:u(({props:Rn})=>[i(Mn,Ie({size:"small"},{ref_for:!0},Rn,{class:"flex-shrink-0"}),{default:u(()=>[...ue[68]||(ue[68]=[v("img",{src:af,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})):(P(),he(nt,{key:2,text:"External Medicine"},{activator:u(({props:Rn})=>[i(Mn,Ie({size:"small"},{ref_for:!0},Rn,{class:"flex-shrink-0"}),{default:u(()=>[...ue[69]||(ue[69]=[v("img",{src:Eh,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1}))])])])]),_:2},1024),i(Xe,{cols:"7",class:"d-flex align-center justify-end pl-2"},{default:u(()=>[v("span",hTe,K(Rt.saltComposition),1)]),_:2},1024)]),_:2},1024),Rt.isLocal&&Rt.dosageHistory&&Rt.dosageHistory.length>0?(P(),he(Et,{key:0,"no-gutters":"",class:"mb-2"},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[v("div",pTe,[(P(!0),Ae(ze,null,Jt(Rt.dosageHistory,(Rn,os)=>(P(),he(Qn,{key:os,size:"small",variant:"outlined",color:"primary",class:"chip-hover text-caption",onClick:pa=>Pe(Rn,Rt),style:{cursor:"pointer"}},{default:u(()=>[N(K(ie(Rn)),1)]),_:2},1032,["onClick"]))),128))])]),_:2},1024)]),_:2},1024)):ge("",!0),i(Et,{"no-gutters":"",align:"center"},{default:u(()=>[i(Xe,{cols:"12",md:"6",lg:U.value?3:4,class:"pr-2"},{default:u(()=>[i(LEe,{modelValue:Rt.dosage_schedule,"onUpdate:modelValue":Rn=>Rt.dosage_schedule=Rn,"medicine-id":Rt.id,"product-form":Rt.productForm,"doctor-id":C.value,onDosageScheduleSelected:Rn=>_n(Rn,Rt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onDosageScheduleSelected"])]),_:2},1032,["lg"]),i(Xe,{cols:"12",md:"6",lg:"3",class:"px-1"},{default:u(()=>[i(OEe,{modelValue:Rt.duration,"onUpdate:modelValue":Rn=>Rt.duration=Rn,"medicine-id":Rt.id,"product-form":Rt.productForm,"doctor-id":C.value,onDurationSelected:Rn=>rt(Rn,Rt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onDurationSelected"])]),_:2},1024),i(Xe,{cols:"12",md:"6",lg:U.value?3:5,class:"px-1"},{default:u(()=>[i($Ee,{modelValue:Rt.instructions,"onUpdate:modelValue":Rn=>Rt.instructions=Rn,"medicine-id":Rt.id,"product-form":Rt.productForm,"doctor-id":C.value,onInstructionsSelected:Rn=>na(Rn,Rt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onInstructionsSelected"])]),_:2},1032,["lg"]),U.value?(P(),he(Xe,{key:0,cols:"12",md:"6",lg:"3",class:"pl-2"},{default:u(()=>[i(Qs,{"model-value":Rt.quantityUnits!==null&&Rt.quantityUnits!==void 0?Rt.quantityUnits:"","onUpdate:modelValue":Rn=>Rt.quantityUnits=Rn===""||Rn===null||Rn===void 0?null:Number(Rn),label:"Quantity",type:"number",variant:"outlined",density:"compact",min:0,disabled:!Rt.isPharmacy,"hide-details":"","single-line":"",class:"flex-grow-1",placeholder:""},{"prepend-inner":u(()=>[i(nt,{text:"Quantity e.g. 5",location:"top"},{activator:u(({props:Rn})=>[i(Mn,Ie({ref_for:!0},Rn,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...ue[70]||(ue[70]=[N(" mdi-numeric ",-1)])]),_:1},16)]),_:1})]),_:1},8,["model-value","onUpdate:modelValue","disabled"])]),_:2},1024)):ge("",!0)]),_:2},1024)]),_:2},1032,["class"]),Rt.isSelected?ge("",!0):(P(),he(Et,{key:0,"no-gutters":"",class:"mb-1"},{default:u(()=>[i(Xe,{cols:"12",class:"px-2"},{default:u(()=>[v("div",gTe,[i(Mn,{size:"x-small",class:"mr-1"},{default:u(()=>[...ue[71]||(ue[71]=[N("mdi-alert-circle-outline",-1)])]),_:1}),ue[72]||(ue[72]=N(" Select this medicine to include it in the prescription ",-1))])]),_:1})]),_:1})),Rt.isSelected&&!ce(Rt)?(P(),he(Et,{key:1,"no-gutters":"",class:"mb-1"},{default:u(()=>[i(Xe,{cols:"12",class:"px-2"},{default:u(()=>[v("div",yTe,[i(Mn,{size:"x-small",class:"mr-1"},{default:u(()=>[...ue[73]||(ue[73]=[N("mdi-alert-circle-outline",-1)])]),_:1}),ue[74]||(ue[74]=N(" Add dosage information to include this medicine in the prescription ",-1))])]),_:1})]),_:1})):ge("",!0)],64))),128))]),_:1})):(P(),he(Xe,{key:1,cols:"12"},{default:u(()=>[i(Ct,{flat:"",class:"pa-2"},{default:u(()=>[i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"1"}),i(Xe,{cols:"10"},{default:u(()=>[i(ma,{style:{textAlign:"centre"}},{default:u(()=>[...ue[75]||(ue[75]=[N("No medicines added yet",-1)])]),_:1})]),_:1}),i(Xe,{cols:"1"})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(Ct,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex align-top mb-2"},{default:u(()=>[i(ma,{class:"pa-0"},{default:u(()=>[...ue[76]||(ue[76]=[v("strong",null,"Investigations & Patient Advice",-1)])]),_:1})]),_:1})]),_:1}),i(Et,{"no-gutters":"",class:"mt-2"},{default:u(()=>[i(Xe,{cols:"1"}),i(Xe,{cols:"6"},{default:u(()=>[i(wEe,{modelValue:f.value.investigations,"onUpdate:modelValue":ue[5]||(ue[5]=Rt=>f.value.investigations=Rt),"doctor-id":C.value,onInvestigationSelected:Xt},null,8,["modelValue","doctor-id"])]),_:1}),i(Xe,{cols:"1"}),i(Xe,{cols:"3",class:"pl-2"},{default:u(()=>[i(Zu,{modelValue:E.value,"onUpdate:modelValue":ue[8]||(ue[8]=Rt=>E.value=Rt),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:Rt})=>[i(Qs,Ie(Rt,{"model-value":fe(f.value.followupDate),label:"Follow-up Date",readonly:"",density:"comfortable",variant:"outlined","hide-details":"auto",class:"input-hover date-input",clearable:"","onClick:clear":se,onKeydown:[ue[6]||(ue[6]=Yd(Ar=>E.value=!0,["enter"])),ue[7]||(ue[7]=Yd(Ar=>E.value=!0,["space"]))]}),{"append-inner":u(()=>[i(Mn,{class:"text-medium-emphasis"},{default:u(()=>[...ue[77]||(ue[77]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16,["model-value"])]),default:u(()=>[i(Mi,{"model-value":z(f.value.followupDate),"onUpdate:modelValue":M,color:"primary",locale:"en-IN",min:ae.value},null,8,["model-value","min"])]),_:1},8,["modelValue"])]),_:1}),i(Xe,{cols:"1"})]),_:1}),i(Et,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(Xe,{cols:"1"}),i(Xe,{cols:"9"},{default:u(()=>[i(CEe,{"doctor-id":C.value,onPatientAdviceSelected:bn},null,8,["doctor-id"])]),_:1}),i(Xe,{cols:"2"})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"1"}),i(Xe,{cols:"9"},{default:u(()=>[i(fr,{modelValue:f.value.patientNotes,"onUpdate:modelValue":ue[9]||(ue[9]=Rt=>f.value.patientNotes=Rt),label:"Patient Advice",clearable:"","auto-grow":"",rows:"2","row-height":"15",density:"compact",variant:"underlined",name:"patient-advice",autocomplete:"off","hide-details":"auto"},null,8,["modelValue"])]),_:1}),i(Xe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[i(nt,{text:"Voice Input"},{activator:u(({props:Rt})=>[i(Un,Ie({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Rt,{onClick:yt,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),i(Xe,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(ME,{type:"referredTo",referral:b.value,disabled:!f.value?.id||f.value?.id==="0",onOpenDialog:zt},null,8,["referral","disabled"])]),_:1})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"px-4 py-1"},{default:u(()=>[i(ss,{thickness:"2",class:"border-opacity-50"})]),_:1})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(Ct,{class:"form-section-card card-status-default mx-2 pa-3",elevation:"2"},{default:u(()=>[i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex align-top mb-1"},{default:u(()=>[i(ma,{class:"pa-0"},{default:u(()=>[...ue[78]||(ue[78]=[v("strong",null,"Notes for Doctor",-1)])]),_:1})]),_:1})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"1"}),i(Xe,{cols:"9"},{default:u(()=>[i(fr,{clearable:"","auto-grow":"",rows:"1","row-height":"15",density:"compact",variant:"underlined",label:"Notes for Doctor",modelValue:f.value.doctorNotes,"onUpdate:modelValue":ue[10]||(ue[10]=Rt=>f.value.doctorNotes=Rt),name:"doctor-notes",autocomplete:"off"},null,8,["modelValue"])]),_:1}),i(Xe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[i(nt,{text:"Voice Input"},{activator:u(({props:Rt})=>[i(Un,Ie({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Rt,{onClick:pt,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),i(Xe,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),i(Gr,{modelValue:h.value,"onUpdate:modelValue":ue[11]||(ue[11]=Rt=>h.value=Rt),"max-width":"40%",persistent:""},{default:u(()=>[y.value?(P(),he(DH,{key:0,medicine:y.value,onClose:_e,"onUpdate:medicine":Se},null,8,["medicine"])):ge("",!0)]),_:1},8,["modelValue"]),i(Gr,{modelValue:p.value,"onUpdate:modelValue":ue[12]||(ue[12]=Rt=>p.value=Rt),"max-width":"40%",persistent:""},{default:u(()=>[i(BT,{onClose:ye,"onUpdate:medicinelist":Wt})]),_:1},8,["modelValue"]),i(Gr,{modelValue:g.value,"onUpdate:modelValue":ue[13]||(ue[13]=Rt=>g.value=Rt),"max-width":"50%",persistent:""},{default:u(()=>[i(nke,{consultation:f.value,patient:c.value,"existing-vitals":A.value,onClose:Dt,onVitalsSaved:bt},null,8,["consultation","patient","existing-vitals"])]),_:1},8,["modelValue"]),i(Gr,{modelValue:S.value,"onUpdate:modelValue":ue[14]||(ue[14]=Rt=>S.value=Rt),"max-width":"50%",persistent:""},{default:u(()=>[i(LH,{"entity-type":"consultation","entity-id":f.value?.id,"existing-referral":b.value,"doctor-id":C.value,onClose:ln,onReferralSaved:Dn},null,8,["entity-id","existing-referral","doctor-id"])]),_:1},8,["modelValue"]),i(Gr,{modelValue:_.value,"onUpdate:modelValue":ue[15]||(ue[15]=Rt=>_.value=Rt),"max-width":"80%",persistent:""},{default:u(()=>[i(xke,{"patient-id":c.value.id,"patient-name":c.value.name,onClose:qt},null,8,["patient-id","patient-name"])]),_:1},8,["modelValue"]),i(l0,{modelValue:B.value,"onUpdate:modelValue":ue[16]||(ue[16]=Rt=>B.value=Rt),"current-text":f.value.clinicalNotes,label:"Clinical Notes",onTranscriptionComplete:Bt},null,8,["modelValue","current-text"]),i(l0,{modelValue:F.value,"onUpdate:modelValue":ue[17]||(ue[17]=Rt=>F.value=Rt),"current-text":f.value.patientNotes,label:"Patient Advice",onTranscriptionComplete:gt},null,8,["modelValue","current-text"]),i(l0,{modelValue:T.value,"onUpdate:modelValue":ue[18]||(ue[18]=Rt=>T.value=Rt),"current-text":f.value.doctorNotes,label:"Doctor Notes",onTranscriptionComplete:tt},null,8,["modelValue","current-text"])]),_:1})]),_:1})],64)):(P(),he(Et,{key:0,"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[i(ca,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))]),_:1}),i(Ir,{value:"share",class:"h-100"},{default:u(()=>[f.value.id?f.value.id==0?(P(),he(Et,{key:1,"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[i(Vr,{image:Oe(hR)},{title:u(()=>[...ue[79]||(ue[79]=[v("div",{class:"text-subtitle-2"}," No consultation selected ",-1)])]),text:u(()=>[v("div",_Te,[ue[81]||(ue[81]=N(" Create a consultation by clicking on the button above ",-1)),ue[82]||(ue[82]=v("br",null,null,-1)),i(Un,{class:"mt-2",onClick:ua},{default:u(()=>[...ue[80]||(ue[80]=[N("Create Consultation",-1)])]),_:1})])]),_:1},8,["image"])]),_:1})]),_:1})):f.value.id&&!de.value?(P(),he(Et,{key:2,"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",wTe,[i(Mn,{size:"48",color:"warning",class:"mb-4"},{default:u(()=>[...ue[83]||(ue[83]=[N("mdi-alert-circle-outline",-1)])]),_:1}),ue[84]||(ue[84]=v("div",{class:"text-h6 text-medium-emphasis"},"Invalid consultation",-1)),v("div",bTe,"This consultation cannot be displayed (status: "+K(f.value.status)+")",1)])]),_:1})]),_:1})):(P(),he(Et,{key:3,"no-gutters":"",class:"h-100"},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(Sh,{"content-type":"consultation",data:{consultation:f.value,medicines:d.value,vitals:A.value,printConfigurations:x.value,doctor:D.value},patient:c.value,onPdfGenerated:$e},null,8,["data","patient"])]),_:1})]),_:1})):(P(),he(Et,{key:0,"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[i(ca,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))]),_:1}),i(Ir,{value:"media",class:"h-100"},{default:u(()=>[i(Et,{"no-gutters":"","aria-label":"toolbar",class:"h-100"},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(XH,{consultation:f.value,patient:c.value},null,8,["consultation","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(Gr,{modelValue:je.value,"onUpdate:modelValue":ue[20]||(ue[20]=Rt=>je.value=Rt),persistent:"","max-width":"40%"},{default:u(()=>[i(AEe,{diagnosis:f.value.diagnosis,patientNotes:f.value.patientNotes,investigations:f.value.investigations,medicineList:d.value,"doctor-id":C.value,onClose:Ye,"onUpdate&close":kt},null,8,["diagnosis","patientNotes","investigations","medicineList","doctor-id"])]),_:1},8,["modelValue"]),i(Gr,{modelValue:at.value,"onUpdate:modelValue":ue[21]||(ue[21]=Rt=>at.value=Rt),persistent:"","max-width":"50%"},{default:u(()=>[i(vEe,{medicineList:d.value,selectedDiagnosis:mt.value,onClose:xt,"onUpdate&close":Nt},null,8,["medicineList","selectedDiagnosis"])]),_:1},8,["modelValue"])],64)}}},JH=en(xTe,[["__scopeId","data-v-f3fa7180"]]),CTe={__name:"create-procedure",emits:["close","update:procedurelist"],setup(e,{emit:t}){const n=t,a=Ln(),r=ee(()=>a.state.doctorModule.doctorId),s=R({procedureName:"",cost:0,description:""}),o=R(!1),l=R(!1),c=[A=>A!=null&&A>=0||"Cost must be a positive number"],f=()=>{n("close")},d=async A=>{if(o.value){if(!r.value){console.error("Doctor ID not available");return}l.value=!0;try{const m=await mT(A.procedureName,A.cost,A.description,!0,"","",r.value);m.error?console.error("Error creating procedure:",m.error):(n("update:procedurelist",m.data),f())}catch(m){console.error("Error creating procedure:",m)}finally{l.value=!1}}};return(A,m)=>{const p=I("v-card-title"),h=I("v-col"),y=I("v-icon"),g=I("v-btn"),_=I("v-row"),b=I("v-card"),S=I("v-text-field"),B=I("v-textarea"),F=I("v-divider"),T=I("v-form");return P(),he(b,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(_,{"no-gutters":""},{default:u(()=>[i(h,{cols:"12"},{default:u(()=>[i(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(_,{"no-gutters":""},{default:u(()=>[i(h,{cols:"11"},{default:u(()=>[i(p,{class:"pa-0 pl-2"},{default:u(()=>[...m[5]||(m[5]=[N("Create New Procedure",-1)])]),_:1})]),_:1}),i(h,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(g,{icon:"",size:"x-small",onClick:f},{default:u(()=>[i(y,null,{default:u(()=>[...m[6]||(m[6]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(_,{"no-gutters":""},{default:u(()=>[i(h,{cols:"12"},{default:u(()=>[i(b,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(T,{modelValue:o.value,"onUpdate:modelValue":m[4]||(m[4]=E=>o.value=E),"validate-on":"blur"},{default:u(()=>[i(_,{"no-gutters":""},{default:u(()=>[i(h,{cols:"12"},{default:u(()=>[i(S,{label:"Procedure Name *",density:"compact",modelValue:s.value.procedureName,"onUpdate:modelValue":m[0]||(m[0]=E=>s.value.procedureName=E),rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(h,{cols:"12"},{default:u(()=>[i(S,{label:"Cost *",density:"compact",modelValue:s.value.cost,"onUpdate:modelValue":m[1]||(m[1]=E=>s.value.cost=E),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",prefix:"",rules:c},null,8,["modelValue"])]),_:1}),i(h,{cols:"12"},{default:u(()=>[i(B,{label:"Description",density:"compact",modelValue:s.value.description,"onUpdate:modelValue":m[2]||(m[2]=E=>s.value.description=E),rows:"3"},null,8,["modelValue"])]),_:1})]),_:1}),i(F),i(_,{"no-gutters":""},{default:u(()=>[i(h,{cols:"2"}),i(h,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(g,{variant:"outlined",onClick:m[3]||(m[3]=E=>d(s.value)),disabled:!o.value,loading:l.value},{default:u(()=>[...m[7]||(m[7]=[N(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),i(h,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},STe={__name:"edit-procedure",props:{procedure:{type:Object,required:!0}},emits:["close","procedureUpdated"],setup(e,{emit:t}){const n=t,a=Ln(),r=ee(()=>a.state.doctorModule.doctorId),o=e.procedure||{},l=R({...Kn.cloneDeep(o),procedureName:o.treatmentName||o.treatment_name||o.procedureName||o.procedure_name||"",description:o.description||o.treatmentDescription||o.procedureDescription||"",cost:o.cost||o.costEstimate||o.cost_estimate||o.procedureCost||0,id:o.id||o.procedure_id||""}),c=R(!1),f=R(!1),d=[p=>p==null||p===""?"Cost is required":p<0?"Cost must be positive":!0],A=()=>{n("close")},m=async()=>{if(!l.value.id){console.error("Cannot update procedure: missing ID");return}if(!r.value){console.error("Doctor ID not available");return}c.value=!0,console.log("Updating procedure",l.value);try{const p=await aO(l.value.id,{procedure_name:l.value.procedureName,description:l.value.description,cost:l.value.cost},r.value);if(p.error)throw console.error("Error updating procedure",p.error),new Error(p.error.message||"Failed to update procedure");console.log("Procedure updated successfully",p.data),n("procedureUpdated",p.data),A()}catch(p){console.error("Error updating procedure",p)}finally{c.value=!1}};return(p,h)=>{const y=I("v-card-title"),g=I("v-col"),_=I("v-icon"),b=I("v-btn"),S=I("v-row"),B=I("v-card"),F=I("v-text-field"),T=I("v-textarea"),E=I("v-divider"),x=I("v-form");return P(),he(B,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(S,{"no-gutters":""},{default:u(()=>[i(g,{cols:"12"},{default:u(()=>[i(B,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(S,{"no-gutters":""},{default:u(()=>[i(g,{cols:"11"},{default:u(()=>[i(y,{class:"pa-0 pl-2"},{default:u(()=>[...h[4]||(h[4]=[N("Edit Procedure",-1)])]),_:1})]),_:1}),i(g,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(b,{icon:"",size:"x-small",onClick:A},{default:u(()=>[i(_,null,{default:u(()=>[...h[5]||(h[5]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(S,{"no-gutters":""},{default:u(()=>[i(g,{cols:"12"},{default:u(()=>[i(B,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(x,{modelValue:f.value,"onUpdate:modelValue":h[3]||(h[3]=C=>f.value=C),"validate-on":"blur"},{default:u(()=>[i(S,{"no-gutters":""},{default:u(()=>[i(g,{cols:"12"},{default:u(()=>[i(F,{label:"Procedure Name *",density:"compact",modelValue:l.value.procedureName,"onUpdate:modelValue":h[0]||(h[0]=C=>l.value.procedureName=C),clearable:"",rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(g,{cols:"12"},{default:u(()=>[i(T,{label:"Procedure Description",density:"compact",modelValue:l.value.description,"onUpdate:modelValue":h[1]||(h[1]=C=>l.value.description=C),clearable:"",rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1}),i(g,{cols:"12"},{default:u(()=>[i(F,{label:"Base Cost *",density:"compact",modelValue:l.value.cost,"onUpdate:modelValue":h[2]||(h[2]=C=>l.value.cost=C),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",prefix:"",clearable:"",rules:d},null,8,["modelValue"])]),_:1})]),_:1}),i(E),i(S,{"no-gutters":""},{default:u(()=>[i(g,{cols:"2"}),i(g,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(b,{variant:"outlined",onClick:m,disabled:!f.value,loading:c.value},{default:u(()=>[...h[6]||(h[6]=[N(" Update Procedure ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),i(g,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},ETe={__name:"delete-procedure-treatment",props:{procedureTreatment:{type:Object,required:!0},treatmentPlanId:{type:[String,Number],required:!0}},emits:["close","deleted"],setup(e,{emit:t}){const n=e,a=t,r=R(n.procedureTreatment),s=()=>{a("close")},o=async l=>{try{const c=await rO(n.treatmentPlanId,l.id);c.error?console.error("Error deleting procedure treatment mapping:",c.error):(console.log("Procedure treatment mapping deleted successfully"),a("deleted",l))}catch(c){console.error("Error deleting procedure treatment mapping:",c)}s()};return(l,c)=>{const f=I("v-card-title"),d=I("v-col"),A=I("v-icon"),m=I("v-btn"),p=I("v-row"),h=I("v-card"),y=I("v-card-text"),g=I("v-divider");return P(),he(h,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(h,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"11"},{default:u(()=>[i(f,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[N("Confirm Procedure Removal",-1)])]),_:1})]),_:1}),i(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[i(A,null,{default:u(()=>[...c[2]||(c[2]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(h,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[N(" Are you sure you want to remove this procedure from the treatment plan? ",-1),v("span",{class:"text-red font-weight-bold"}," You will not be able to recover this data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),i(g),i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"2"}),i(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(m,{variant:"outlined",onClick:c[0]||(c[0]=_=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[N("Yes, Remove Procedure",-1)])]),_:1})]),_:1}),i(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},kTe={class:"procedure-name-wrap"},BTe={class:"font-weight-medium"},TTe={class:"text-center"},ITe={__name:"search-procedure",emits:["handleSearchedProcedures","addProcedure"],setup(e,{emit:t}){const n=t,a=Ln(),r=ee(()=>a.state.doctorModule.doctorId),s=()=>{n("addProcedure")},o=R(!1),l=R([]),c=R(""),f=R([]),d=R(!1);let A=null;Ge(c,h=>{if(A&&clearTimeout(A),d.value=!1,!h||h.trim().length===0){o.value=!1;return}A=setTimeout(()=>{m(h)},300)}),Ge(f,h=>{console.log("Search add procedures changed:",h),h.length>0&&(n("handleSearchedProcedures",h),f.value=[])});const m=async h=>{if(!(!h||h.trim().length===0)){if(!r.value){console.error("Doctor ID not available for procedure search");return}o.value=!0,d.value=!1;try{const y=new URLSearchParams;y.append("doctor_id",r.value);const g=await it.get(`procedure/search_procedure/${h}?${y.toString()}`);l.value=g.data.data.procedures,(!l.value||l.value.length===0)&&(d.value=!0)}catch(y){console.error("Error fetching procedures:",y),d.value=!0}finally{o.value=!1}}},p=ee(()=>!c.value||c.value.trim().length===0?"Start typing to search procedures":o.value?"Searching procedures...":d.value?"No procedures found matching your search. Try different keywords or create new procedure below.":"");return(h,y)=>{const g=I("v-icon"),_=I("v-list-item"),b=I("v-divider"),S=I("v-card-subtitle"),B=I("v-btn"),F=I("v-card"),T=I("v-chip"),E=I("v-autocomplete");return P(),he(E,{multiple:"",clearable:"","clear-on-select":"","hide-selected":"",chips:"","closable-chips":"",density:"compact",variant:"outlined",label:"Search procedures",items:l.value,search:c.value,"onUpdate:search":y[0]||(y[0]=x=>c.value=x),loading:o.value,"item-title":"procedureName","item-value":"item","return-object":"",modelValue:f.value,"onUpdate:modelValue":y[1]||(y[1]=x=>f.value=x),rounded:"l","prepend-inner-icon":"mdi-magnify","no-data-text":p.value,placeholder:o.value?"Searching...":"Start typing to search procedures"},{item:u(({props:x,item:C,index:D})=>[i(_,Ie(x,{density:"compact"}),{title:u(()=>[v("span",kTe,K(C.raw.procedureName),1)]),append:u(()=>[C.raw.isLocal?(P(),he(g,{key:0},{default:u(()=>[...y[2]||(y[2]=[v("img",{src:af,alt:"Local Procedure"},null,-1)])]),_:1})):(P(),he(g,{key:1},{default:u(()=>[...y[3]||(y[3]=[v("img",{src:Eh,alt:"External Procedure"},null,-1)])]),_:1}))]),_:2},1040),D===l.value.length-1?(P(),Ae(ze,{key:0},[i(b),i(F,{flat:"",class:"pt-1"},{default:u(()=>[i(S,null,{default:u(()=>[...y[4]||(y[4]=[N("Procedure not in list?",-1)])]),_:1}),i(B,{class:"ml-3",variant:"outlined",onClick:s},{default:u(()=>[i(g,{class:"mr-2"},{default:u(()=>[...y[5]||(y[5]=[N("mdi-plus",-1)])]),_:1}),y[6]||(y[6]=N(" Create Procedure ",-1))]),_:1})]),_:1})],64)):ge("",!0)]),chip:u(({props:x,item:C})=>[i(T,Ie(x,{size:"small",class:"mr-1"}),{default:u(()=>[v("span",BTe,K(C.raw.procedureName),1)]),_:2},1040)]),"no-data":u(()=>[c.value&&c.value.trim().length>0?(P(),he(F,{key:0,flat:"",class:"pa-4"},{default:u(()=>[v("div",TTe,[i(S,{class:"mb-2"},{default:u(()=>[N(K(p.value),1)]),_:1}),i(B,{variant:"outlined",color:"primary",onClick:s},{default:u(()=>[i(g,{class:"mr-2"},{default:u(()=>[...y[7]||(y[7]=[N("mdi-plus",-1)])]),_:1}),y[8]||(y[8]=N(" Create Procedure ",-1))]),_:1})])]),_:1})):(P(),he(F,{key:1,flat:"",class:"pa-4 text-center"},{default:u(()=>[i(S,null,{default:u(()=>[N(K(p.value),1)]),_:1})]),_:1}))]),_:1},8,["items","search","loading","modelValue","no-data-text","placeholder"])}}},FTe=en(ITe,[["__scopeId","data-v-c9cffa1d"]]),PTe={class:"procedure-care-multiline"},DTe={__name:"search-post-procedure-care",props:{doctorId:{type:[String,Number],required:!0}},emits:["postProcedureCareSelected"],setup(e,{emit:t}){const n=e,a=t,r=R(!1),s=R([]),o=R(""),l=R(null),c=R(!1);let f=null;const d=y=>{s.value.some(_=>_.description===y)||(o.value=y)},A=()=>{(!o.value||o.value.length===0)&&s.value.length===0&&p("")},m=y=>{y&&(a("postProcedureCareSelected",y),l.value=null)};Ge(o,y=>{f&&clearTimeout(f),c.value=!1,f=setTimeout(()=>{p(y||"")},300)});const p=async y=>{r.value=!0,c.value=!1;try{const g=y||"",_=await it.get(`procedure/search_descriptions/${encodeURIComponent(g)}`,{params:{doctor_id:n.doctorId}});s.value=_.data.data.descriptions.filter(b=>b.description&&b.description.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(g){console.error("Error fetching procedure care instructions:",g),c.value=!0}finally{r.value=!1}},h=ee(()=>!o.value||o.value.length<1?r.value?"Loading recent procedure care instructions...":c.value?"No procedure care instructions found. Start typing to search.":"Start typing to search procedure care instructions":r.value?"Searching procedure care instructions...":c.value?"No matches found in procedure care instructions.":"");return Ri(()=>{f&&(clearTimeout(f),f=null)}),(y,g)=>{const _=I("v-icon"),b=I("v-tooltip"),S=I("v-list-item"),B=I("v-card-subtitle"),F=I("v-card"),T=I("v-autocomplete");return P(),he(T,{modelValue:l.value,"onUpdate:modelValue":[g[0]||(g[0]=E=>l.value=E),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:A,"item-title":"description","item-value":"description",label:"Search Post-Procedure Care Instructions",placeholder:"Type to search procedure care instructions...",variant:"outlined",loading:r.value,"no-data-text":h.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact","return-object":"",class:"procedure-care-search"},{item:u(({props:E,item:x})=>[i(S,Ie(E,{density:"compact",class:"procedure-care-list-item"}),{title:u(()=>[v("div",PTe,K(x.raw.description),1)]),append:u(()=>[i(b,{location:"top"},{activator:u(({props:C})=>[i(_,Ie(C,{size:"small"}),{default:u(()=>[x.raw.isFromHistory?(P(),he(_,{key:0,icon:"mdi-history",color:"primary"})):ge("",!0)]),_:2},1040)]),default:u(()=>[v("span",null,K(x.raw.isFromHistory?"From your procedure history":"Custom procedure care instructions"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[i(F,{flat:"",class:"pa-4 text-center"},{default:u(()=>[i(B,null,{default:u(()=>[N(K(h.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},pR=en(DTe,[["__scopeId","data-v-69ba2d09"]]),UTe={class:"template-name template-name-truncate"},RTe={class:"text-caption template-subtitle-truncate"},NTe={key:0},VTe={__name:"treatment-plan-template-autocomplete",props:{doctorId:{type:[String,Number],required:!0}},emits:["template-selected"],setup(e,{emit:t}){const n=e,a=t,r=R(null),s=R([]),o=R(""),l=R(!1),c=R(!1);let f=null;const d=_=>{o.value=_},A=()=>{s.value.length===0&&(!o.value||o.value.length===0)&&p()};Ge(o,_=>{if(f&&clearTimeout(f),!_||_.length===0){p();return}f=setTimeout(()=>{h(_)},300)});const m=_=>{_&&typeof _=="object"&&(console.log("Template selected:",_),a("template-selected",{template:_,autoFillData:{treatmentPlanName:_.treatmentPlanName,notes:_.notes||"",procedures:(_.procedures||[]).map(b=>({procedureId:b.procedureId,costEstimate:b.costEstimate||0,procedureCost:b.procedureCost||0,procedureName:b.procedureName||"",location:b.location||"",option:b.option||"",procedureDescription:b.procedureDescription||""}))}}),setTimeout(()=>{r.value=null,o.value="",s.value=[]},100))},p=async()=>{l.value=!0;try{const _=await cO(n.doctorId);_.error?(s.value=[],c.value=!0):(s.value=_.data||[],c.value=!0)}catch(_){console.error("Error fetching all templates:",_),s.value=[],c.value=!0}finally{l.value=!1}},h=async _=>{if(!(!_||_.length===0)){l.value=!0;try{const b=await oO(_,n.doctorId);b.error?s.value=[]:s.value=b.data||[]}catch(b){console.error("Error fetching templates:",b),s.value=[]}finally{l.value=!1}}},y=_=>{const b=[];return _.notes&&b.push(`Notes: ${_.notes.substring(0,30)}...`),_.procedures&&_.procedures.length>0&&b.push(`${_.procedures.length} procedure(s)`),b.join(" | ")||"Template"},g=ee(()=>l.value?!o.value||o.value.length===0?"Loading templates...":"Searching templates...":!o.value||o.value.length===0?c.value&&s.value.length===0?"No saved treatment plan templates found. Create templates during consultations to see them here.":"Click to view your saved treatment plan templates":o.value&&s.value.length===0?`No templates found for "${o.value}". Try a different search term.`:"");return(_,b)=>{const S=I("v-icon"),B=I("v-tooltip"),F=I("v-list-item"),T=I("v-list"),E=I("v-card-subtitle"),x=I("v-card-text"),C=I("v-card"),D=I("v-autocomplete");return P(),he(D,{modelValue:r.value,"onUpdate:modelValue":[b[0]||(b[0]=U=>r.value=U),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:A,"item-title":"treatmentPlanName","item-value":"treatmentPlanName",label:"select treatment plan template (optional)",placeholder:"Search saved templates...",variant:"outlined",loading:l.value,"no-data-text":g.value,clearable:"","return-object":"",density:"compact","prepend-inner-icon":"mdi-magnify",class:"template-autocomplete"},{item:u(({props:U,item:L})=>[i(T,{density:"compact",class:"template-search-list"},{default:u(()=>[i(F,Ie(U,{class:"template-search-item"}),{title:u(()=>[v("span",UTe,K(L.raw.treatmentPlanName),1)]),subtitle:u(()=>[v("span",RTe,K(y(L.raw)),1)]),append:u(()=>[i(B,{location:"top"},{activator:u(({props:H})=>[i(S,Ie(H,{size:"small",color:"primary"}),{default:u(()=>[...b[1]||(b[1]=[N(" mdi-bookmark ",-1)])]),_:1},16)]),default:u(()=>[b[2]||(b[2]=v("span",null,"Saved Template",-1))]),_:1})]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[i(C,{flat:"",class:"pa-4 text-center"},{default:u(()=>[c.value&&s.value.length===0&&!o.value?(P(),Ae("div",NTe,[i(S,{color:"grey-lighten-1",size:"48",class:"mb-2"},{default:u(()=>[...b[3]||(b[3]=[N("mdi-bookmark-outline",-1)])]),_:1}),i(E,{class:"text-wrap mb-2"},{default:u(()=>[...b[4]||(b[4]=[N("No saved treatment plan templates found",-1)])]),_:1}),i(x,{class:"text-caption text-grey"},{default:u(()=>[...b[5]||(b[5]=[N(" Save treatment plan templates during consultations to quickly reuse them here. ",-1)])]),_:1})])):(P(),he(E,{key:1,class:"text-wrap"},{default:u(()=>[N(K(g.value),1)]),_:1}))]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},LTe=en(VTe,[["__scopeId","data-v-c280e42e"]]),MTe={class:"text-caption mr-3"},OTe={key:0,class:"text-caption mr-3"},HTe={key:1,class:"text-caption mr-3"},$Te={key:2,class:"text-caption"},QTe={__name:"create-treatment-plan-template",props:{procedureList:{type:Array,default:()=>[]},treatmentPlanName:{type:String,default:""},notes:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=R(n.treatmentPlanName),s=R(n.notes),o=R(!1),l=R(!1),c=R([]),f=R(""),d=R(null),A=ee(()=>n.procedureList.filter(y=>y.isLocal&&(y.procedureName||y.procedure_name)&&y.id!==void 0&&y.id!==null)),m=()=>{d.value&&d.value.abort(),a("close")},p=(y,g)=>{if(g)c.value.includes(y.id)||c.value.push(y.id),console.log("Procedure selected:",y.procedureName||y.procedure_name);else{const _=c.value.indexOf(y.id);_>-1&&c.value.splice(_,1),console.log("Procedure deselected:",y.procedureName||y.procedure_name)}f.value=""},h=async()=>{if(c.value.length===0){f.value="Please select at least one procedure to create a template";return}l.value=!0,f.value="",d.value=new AbortController;const y=n.procedureList.filter(_=>c.value.includes(_.id)),g={doctor_id:n.doctorId,treatmentplan_name:r.value,notes:s.value||"",procedures:y.map(_=>({procedure_id:_.procedureId||_.procedure_id||_.id,cost_estimate:_.costEstimate!==void 0&&_.costEstimate!==null?parseFloat(_.costEstimate):parseFloat(_.cost||_.procedureCost||0),location:_.location||"",option:_.option||""}))};console.log("Creating new treatment plan template:",g);try{const _=await iO(g);if(d.value?.signal.aborted)return;_.error?(f.value="Failed to create treatment plan template. Please try again.",console.error("Error creating treatment plan template:",_.error)):(console.log("Treatment plan template created successfully"),a("update&close"))}catch(_){d.value?.signal.aborted||(f.value="An unexpected error occurred. Please try again.",console.error("Error creating treatment plan template:",_))}finally{d.value?.signal.aborted||(l.value=!1),d.value=null}};return ha(()=>{d.value&&d.value.abort()}),(y,g)=>{const _=I("v-card-title"),b=I("v-col"),S=I("v-icon"),B=I("v-btn"),F=I("v-row"),T=I("v-card"),E=I("v-text-field"),x=I("v-textarea"),C=I("v-divider"),D=I("v-card-subtitle"),U=I("v-checkbox"),L=I("v-chip"),H=I("v-card-text"),oe=I("v-alert"),de=I("v-form");return P(),he(T,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(F,{"no-gutters":""},{default:u(()=>[i(b,{cols:"12"},{default:u(()=>[i(T,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(F,{"no-gutters":""},{default:u(()=>[i(b,{cols:"11"},{default:u(()=>[i(_,{class:"pa-0 pl-2"},{default:u(()=>[...g[3]||(g[3]=[N("Create Treatment Plan Template",-1)])]),_:1})]),_:1}),i(b,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(B,{icon:"",size:"x-small",onClick:m},{default:u(()=>[i(S,null,{default:u(()=>[...g[4]||(g[4]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(F,{"no-gutters":""},{default:u(()=>[i(b,{cols:"12"},{default:u(()=>[i(T,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(de,{modelValue:o.value,"onUpdate:modelValue":g[2]||(g[2]=te=>o.value=te),"validate-on":"blur"},{default:u(()=>[i(F,{"no-gutters":""},{default:u(()=>[i(b,{cols:"12"},{default:u(()=>[i(E,{label:"Treatment Plan Name *",density:"compact",modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=te=>r.value=te),rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(b,{cols:"12"},{default:u(()=>[i(x,{label:"Notes",density:"compact",modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=te=>s.value=te),rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),i(F,{"no-gutters":""},{default:u(()=>[i(b,{cols:"12"},{default:u(()=>[i(C,{class:"my-3"},{default:u(()=>[...g[5]||(g[5]=[N("Procedures",-1)])]),_:1}),A.value.length>0?(P(),he(T,{key:0,variant:"outlined"},{default:u(()=>[i(D,{class:"pb-2"},{default:u(()=>[...g[6]||(g[6]=[N("Available Local Procedures (from current treatment plan):",-1)])]),_:1}),i(H,null,{default:u(()=>[(P(!0),Ae(ze,null,Jt(A.value,te=>(P(),he(T,{key:`available-${te.id}`,flat:""},{default:u(()=>[i(F,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(b,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[i(U,{"model-value":c.value.includes(te.id),color:"primary",density:"compact","hide-details":"","onUpdate:modelValue":q=>p(te,q)},null,8,["model-value","onUpdate:modelValue"]),i(L,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[v("strong",null,K(te.procedureName||te.procedure_name),1)]),_:2},1024)]),_:2},1024),i(b,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[v("span",MTe," Base: "+K((te.cost||te.procedureCost||0).toFixed(2)),1),te.costEstimate!==void 0&&te.costEstimate!==null?(P(),Ae("span",OTe," Final: "+K(parseFloat(te.costEstimate||0).toFixed(2)),1)):ge("",!0),te.location?(P(),Ae("span",HTe," Location: "+K(te.location),1)):ge("",!0),te.option?(P(),Ae("span",$Te," Option: "+K(te.option),1)):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(P(),he(oe,{key:1,type:"info",variant:"outlined"},{default:u(()=>[...g[7]||(g[7]=[N(" No local procedures available from current treatment plan to add to template. ",-1)])]),_:1})),f.value?(P(),he(oe,{key:2,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[N(K(f.value),1)]),_:1})):ge("",!0)]),_:1})]),_:1}),i(C),i(F,{"no-gutters":""},{default:u(()=>[i(b,{cols:"2"}),i(b,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(B,{variant:"outlined",onClick:h,disabled:!o.value||c.value.length===0,loading:l.value},{default:u(()=>[...g[8]||(g[8]=[N(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),i(b,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},GTe=en(QTe,[["__scopeId","data-v-11bfc2fd"]]),zTe={class:"text-caption mr-3"},WTe={key:0,class:"text-caption mr-3"},KTe={key:1,class:"text-caption mr-3"},jTe={key:2,class:"text-caption"},qTe={class:"text-caption mr-3"},YTe={key:0,class:"text-caption mr-3"},XTe={key:1,class:"text-caption mr-3"},JTe={key:2,class:"text-caption"},ZTe={__name:"edit-treatment-plan-template",props:{procedureList:{type:Array,required:!0},selectedTemplate:{type:Object,default:null}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=R(null),s=R({}),o=R([]),l=R(!1),c=R(!1),f=R([]),d=R(!1),A=R(""),m=R(null);Ge(()=>n.procedureList,()=>{p()},{deep:!0});const p=()=>{const S=o.value.map(B=>B.procedureId);f.value=n.procedureList.filter(B=>B.isLocal&&B.id!==void 0&&B.id!==null&&!S.includes(B.id)).map(B=>({...B,isSelected:!1,_uniqueKey:`available_${B.id}`}))};An(async()=>{n.selectedTemplate?(r.value=n.selectedTemplate,await h(n.selectedTemplate)):p()});const h=async S=>{if(!S){s.value={},o.value=[],p();return}s.value=Kn.cloneDeep(S),d.value=!0,A.value="";try{const B=await uO(S.id);if(!B.error&&B.data)o.value=(B.data.procedures||[]).map(F=>({...F,isSelected:!0,_uniqueKey:`template_${F.id}`})),console.log("Template procedures fetched:",o.value),p();else throw new Error("Failed to fetch template procedures")}catch(B){console.error("Error fetching template procedures:",B),A.value="Failed to load template procedures. Please try again.",o.value=[],p()}finally{d.value=!1}},y=S=>{console.log("Procedure selection changed:",S.procedureName||S.procedure_name,S.isSelected)},g=S=>{console.log("Template procedure selection changed:",S.procedureName,S.isSelected)},_=async()=>{if(!(!r.value||!c.value)){l.value=!0,A.value="";try{const S=o.value.filter(x=>x.isSelected),B=f.value.filter(x=>x.isSelected),T=[...S,...B].map(x=>({procedure_id:x.procedureId||x.procedure_id||x.id,cost_estimate:x.costEstimate!==void 0&&x.costEstimate!==null?parseFloat(x.costEstimate):parseFloat(x.procedureCost||x.cost||0),location:x.location||"",option:x.option||""})),E=await lO(r.value.id,{treatmentplan_name:s.value.treatmentPlanName,notes:s.value.notes||"",procedures:T});if(E.error){A.value="Failed to update template. Please try again.",console.error("Error updating treatment plan template:",E.error);return}console.log("Template updated successfully"),a("update&close")}catch(S){A.value="An unexpected error occurred. Please try again.",console.error("Error updating template:",S)}finally{l.value=!1}}},b=()=>{m.value&&m.value.abort(),a("close")};return ha(()=>{m.value&&m.value.abort()}),(S,B)=>{const F=I("v-card-title"),T=I("v-col"),E=I("v-icon"),x=I("v-btn"),C=I("v-row"),D=I("v-card"),U=I("v-text-field"),L=I("v-textarea"),H=I("v-divider"),oe=I("v-card-subtitle"),de=I("v-progress-linear"),te=I("v-card-text"),q=I("v-checkbox"),ce=I("v-chip"),le=I("v-alert"),Z=I("v-form");return P(),he(D,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(C,{"no-gutters":""},{default:u(()=>[i(T,{cols:"12"},{default:u(()=>[i(D,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(C,{"no-gutters":""},{default:u(()=>[i(T,{cols:"11"},{default:u(()=>[i(F,{class:"pa-0 pl-2"},{default:u(()=>[...B[3]||(B[3]=[N("Edit Treatment Plan Template",-1)])]),_:1})]),_:1}),i(T,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(x,{icon:"",size:"x-small",onClick:b},{default:u(()=>[i(E,null,{default:u(()=>[...B[4]||(B[4]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(C,{"no-gutters":""},{default:u(()=>[i(T,{cols:"12"},{default:u(()=>[i(D,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(Z,{modelValue:c.value,"onUpdate:modelValue":B[2]||(B[2]=ne=>c.value=ne),"validate-on":"blur"},{default:u(()=>[i(C,{"no-gutters":""},{default:u(()=>[r.value?(P(),Ae(ze,{key:0},[i(T,{cols:"12"},{default:u(()=>[i(U,{label:"Treatment Plan Name *",density:"compact",modelValue:s.value.treatmentPlanName,"onUpdate:modelValue":B[0]||(B[0]=ne=>s.value.treatmentPlanName=ne),rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(T,{cols:"12"},{default:u(()=>[i(L,{label:"Notes",density:"compact",rows:"2","auto-grow":"",modelValue:s.value.notes,"onUpdate:modelValue":B[1]||(B[1]=ne=>s.value.notes=ne)},null,8,["modelValue"])]),_:1}),i(T,{cols:"12"},{default:u(()=>[i(H,{class:"my-3"},{default:u(()=>[...B[5]||(B[5]=[N("Procedures",-1)])]),_:1}),d.value?(P(),he(D,{key:0,variant:"outlined",class:"mb-3"},{default:u(()=>[i(oe,{class:"pb-2"},{default:u(()=>[...B[6]||(B[6]=[N("Loading template procedures...",-1)])]),_:1}),i(te,null,{default:u(()=>[i(de,{indeterminate:""})]),_:1})]),_:1})):o.value.length>0?(P(),he(D,{key:1,variant:"outlined",class:"mb-3"},{default:u(()=>[i(oe,{class:"pb-2"},{default:u(()=>[...B[7]||(B[7]=[N("Current Template Procedures:",-1)])]),_:1}),i(te,null,{default:u(()=>[(P(!0),Ae(ze,null,Jt(o.value,ne=>(P(),he(D,{key:ne._uniqueKey||`template-${ne.id}`,flat:""},{default:u(()=>[i(C,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(T,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[i(q,{modelValue:ne.isSelected,"onUpdate:modelValue":G=>ne.isSelected=G,color:"primary",density:"compact","hide-details":"",onChange:G=>g(ne)},null,8,["modelValue","onUpdate:modelValue","onChange"]),i(ce,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[v("strong",null,K(ne.procedureName),1)]),_:2},1024)]),_:2},1024),i(T,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[v("span",zTe," Base: "+K((ne.procedureCost||0).toFixed(2)),1),ne.costEstimate!==void 0&&ne.costEstimate!==null?(P(),Ae("span",WTe," Final: "+K(parseFloat(ne.costEstimate||0).toFixed(2)),1)):ge("",!0),ne.location?(P(),Ae("span",KTe," Location: "+K(ne.location),1)):ge("",!0),ne.option?(P(),Ae("span",jTe," Option: "+K(ne.option),1)):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0),f.value.length>0?(P(),he(D,{key:2,variant:"outlined"},{default:u(()=>[i(oe,{class:"pb-2"},{default:u(()=>[...B[8]||(B[8]=[N("Available Local Procedures (from current treatment plan):",-1)])]),_:1}),i(te,null,{default:u(()=>[(P(!0),Ae(ze,null,Jt(f.value,ne=>(P(),he(D,{key:ne._uniqueKey||`available-${ne.id}`,flat:""},{default:u(()=>[i(C,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(T,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[i(q,{modelValue:ne.isSelected,"onUpdate:modelValue":G=>ne.isSelected=G,color:"primary",density:"compact","hide-details":"",onChange:G=>y(ne)},null,8,["modelValue","onUpdate:modelValue","onChange"]),i(ce,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[v("strong",null,K(ne.procedureName||ne.procedure_name),1)]),_:2},1024)]),_:2},1024),i(T,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[v("span",qTe," Base: "+K((ne.cost||ne.procedureCost||0).toFixed(2)),1),ne.costEstimate!==void 0&&ne.costEstimate!==null?(P(),Ae("span",YTe," Final: "+K(parseFloat(ne.costEstimate||0).toFixed(2)),1)):ge("",!0),ne.location?(P(),Ae("span",XTe," Location: "+K(ne.location),1)):ge("",!0),ne.option?(P(),Ae("span",JTe," Option: "+K(ne.option),1)):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(P(),he(le,{key:3,type:"info",variant:"outlined"},{default:u(()=>[...B[9]||(B[9]=[N(" No local procedures available from current treatment plan to add to template. ",-1)])]),_:1})),A.value?(P(),he(le,{key:4,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[N(K(A.value),1)]),_:1})):ge("",!0)]),_:1})],64)):(P(),he(T,{key:1,cols:"12"},{default:u(()=>[i(le,{type:"info",variant:"outlined"},{default:u(()=>[...B[10]||(B[10]=[N(" No treatment plan template selected for editing. ",-1)])]),_:1})]),_:1}))]),_:1}),i(H),i(C,{"no-gutters":""},{default:u(()=>[i(T,{cols:"2"}),i(T,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(x,{variant:"outlined",onClick:_,disabled:!c.value||!r.value,loading:l.value},{default:u(()=>[...B[11]||(B[11]=[N(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),i(T,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},e4e=en(ZTe,[["__scopeId","data-v-a21afca5"]]),g2=e=>{if(!e)return"";try{const t=typeof e=="string"?jA(e):new Date(e);return To(t,"MMMM d, yyyy")}catch{return e}},t4e=(e,t,n)=>{const a=g2(e.dueDate);return`Hi ${n},

This is a reminder for your upcoming appointment with Dr. ${t}.

 Date: ${a}

Please arrive 10 minutes early. Contact us if you need to reschedule.

Best regards,
Dr. ${t}`},n4e=(e,t,n)=>{const a=g2(e.details.consultationDate),r=g2(e.dueDate);return`Hi ${n},

Your follow-up consultation with Dr. ${t} is due.

 Original Consultation: ${a}
 Follow-up Due: ${r}

Please schedule your follow-up appointment. Contact us to book a slot.

Best regards,
Dr. ${t}`},a4e=(e,t,n)=>{const a=g2(e.dueDate);let r="",s="";if(e.details.procedures&&Array.isArray(e.details.procedures)){const o=e.details.procedures.filter(c=>c.status==="completed").map(c=>c.procedure_name||c.procedureName).filter(c=>c),l=e.details.procedures.filter(c=>["proposed","ongoing","active","scheduled"].includes(c.status)).map(c=>c.procedure_name||c.procedureName).filter(c=>c);r=o.length>0?o.join(", "):"None",s=l.length>0?l.join(", "):"None"}else{if(e.procedureDetails){if(e.procedureDetails.includes("Completed:")){const o=e.procedureDetails.match(/Completed: ([^]+)/);r=o?o[1].trim():"None"}if(e.procedureDetails.includes("Pending:")){const o=e.procedureDetails.match(/Pending: ([^]*)/);s=o?o[1].trim():"None"}}r||(r="None"),s||(s="None")}return`Hi ${n},

This is a reminder for your treatment plan follow-up with Dr. ${t}.

 Follow-up Due: ${a}
 Completed: ${r}
 Pending: ${s}

Please contact us to schedule your next visit.

Best regards,
Dr. ${t}`},ZH=async(e,t)=>{let n=e;n=n.replace(/\D/g,""),!n.startsWith("91")&&n.length===10&&(n="91"+n);const a=`https://api.whatsapp.com/send?phone=${n}&text=${encodeURIComponent(t)}`;try{const{ipcRenderer:r}=window.require("electron"),s=await r.invoke("open-external",a);return s.success?(console.log("Successfully opened WhatsApp with system default browser"),{success:!0}):(console.error("Failed to open WhatsApp via Electron:",s.error),window.open(a,"_blank","noopener,noreferrer"),{success:!0})}catch(r){return console.error("Failed to use Electron IPC:",r),window.open(a,"_blank","noopener,noreferrer"),{success:!0}}},e$=e=>{if(!e)return!1;const t=e.replace(/\D/g,"");return t.length===10||t.length===12&&t.startsWith("91")},r4e=async(e,t)=>{try{if(!e)throw new Error("Reminder data is required");if(!t?.doctorName)throw new Error("Doctor information is required");const n=e.details?.patient_phone||e.details?.contactNumber||e.details?.contact_number;if(!n)throw new Error("Patient contact number not available");if(!e$(n))throw new Error("Invalid phone number format");const a=e.patientName||"Patient",r=t.doctorName;let s;switch(e.type){case"appointment":s=t4e(e,r,a);break;case"consultation":s=n4e(e,r,a);break;case"procedures":s=a4e(e,r,a);break;default:throw new Error(`Unsupported reminder type: ${e.type}`)}if((await ZH(n,s)).success)return{success:!0,message:`WhatsApp reminder sent to ${a}`};throw new Error("Failed to open WhatsApp")}catch(n){return console.error("WhatsApp reminder failed:",n),{success:!1,error:n.message}}},s4e=(e,t,n,a,r)=>`Hi ${r},

Post-procedure care instructions for ${e}:

${t}

Best regards,
Dr. ${a}`,o4e=async(e,t,n)=>{try{if(!e)throw new Error("Procedure data is required");if(!t)throw new Error("Patient data is required");if(!n?.doctorName)throw new Error("Doctor information is required");const a=t.contactNumber||t.phoneNumber||t.contact_number||t.patient_phone;if(!a)throw new Error("Patient contact number not available");if(!e$(a))throw new Error("Invalid phone number format");const r=t.name||t.patientName||"Patient",s=n.doctorName,o=e.procedureName||e.procedure?.procedure_name||e.procedure_name||"Procedure",l=e.postProcedureCare||e.instructions||"",c=e.startDate||e.procedureDate||e.treatmentPlan?.startDate||new Date().toISOString().split("T")[0];if(!l||!l.trim())throw new Error("Post-procedure care instructions are required");const f=s4e(o,l.trim(),c,s,r);if((await ZH(a,f)).success)return{success:!0,message:`Post-procedure care instructions sent to ${r}`};throw new Error("Failed to open WhatsApp")}catch(a){return console.error("WhatsApp post-procedure care failed:",a),{success:!1,error:a.message}}},i4e={class:"text-caption"},l4e={key:0,class:"d-flex flex-wrap gap-1 align-center mt-1"},u4e={class:"d-flex flex-wrap gap-2 align-center"},c4e={key:0,class:"mt-2"},d4e={key:0,class:"text-caption text-medium-emphasis ml-2"},f4e={key:0,class:"mt-3 mb-3"},A4e={class:"text-center"},m4e={class:"text-body-2 font-weight-medium mb-0"},v4e={class:"text-center"},h4e={class:"text-body-2 font-weight-medium mb-0"},p4e={class:"text-center"},g4e={class:"text-body-2 font-weight-medium mb-0"},y4e={class:"text-center"},_4e={class:"text-body-2 font-weight-medium mb-0"},w4e={class:"text-center"},b4e={class:"text-center"},x4e={key:1,class:"d-flex justify-center align-center pa-4"},C4e={key:2,class:"payment-receipts-container"},S4e={class:"d-flex align-center flex-wrap payment-receipt-details"},E4e={class:"text-subtitle-2 font-weight-bold receipt-id"},k4e={class:"text-caption text-medium-emphasis receipt-date"},B4e={class:"text-caption receipt-amount"},T4e={key:0,class:"mx-2 pb-2"},I4e={class:"text-subtitle-2 text-medium-emphasis"},F4e={class:"d-flex align-center gap-2"},P4e={class:"text-subtitle-2 text-left"},D4e=["src","alt"],U4e={class:"mx-2 pb-2"},R4e={class:"text-subtitle-2 text-medium-emphasis"},N4e={class:"mb-1"},V4e={class:"procedure-name text-body-2 font-weight-bold text-left"},L4e={class:"text-body-2 font-weight-medium text-left d-flex align-center gap-1"},M4e={class:"d-flex align-center gap-1"},O4e={class:"d-flex justify-start align-center gap-2"},H4e={class:"d-flex justify-start"},$4e={class:"d-flex d-lg-none align-center gap-1"},Q4e={key:2,class:"text-center py-8"},G4e={key:0,class:"date-section mb-4"},z4e={class:"date-header-vertical mb-3",style:{"margin-top":"16px","margin-left":"8px"}},W4e={class:"text-subtitle-2 text-left mb-1"},K4e={class:"d-flex flex-wrap gap-2 align-center mb-1"},j4e={class:"text-subtitle-2 text-left mb-1"},q4e={class:"d-flex flex-wrap gap-2 align-center mb-1"},Y4e={key:1,class:"text-center py-8"},X4e={__name:"procedure-window",props:{treatmentPlan:{type:Object,default:()=>({id:"0"})},patient:{type:Object,default:()=>({})}},emits:["update:treatmentPlan","createNewTreatmentPlan"],setup(e,{emit:t}){const n=e,a=t,r=Ln(),s=ee(()=>r.state.doctorModule.doctorId),o=ee(()=>r.getters["doctorModule/currentDoctor"]),{showSuccess:l,showError:c}=la(),f=R("plan"),d=R({}),A=R([]),m=R([]),p=R(!1),h=R(!1),y=R(!1),g=R(null),_=R(null),b=R([]),S=R(!1),B=R(!1),F=R(!1),T=R(null),E=R(null),x=R(!1),C=R([]),D=R(!1),U=R(!1),L=R(null),H=R(new Set),oe=R(!1),de=R({}),te=R(!1),q=R(null),ce=R(!1),le=R(null),Z=R(new Map),ne=R({}),G=R({show:!1,text:"",color:"success"}),W=[{title:"Proposed",value:"proposed"},{title:"Ongoing",value:"ongoing"},{title:"Completed",value:"completed"},{title:"Deleted",value:"deleted"}],Q=[{title:"Proposed",value:"proposed"},{title:"Ongoing",value:"ongoing"},{title:"Completed",value:"completed"},{title:"On Hold",value:"on_hold"},{title:"Cancelled",value:"cancelled"}],O=ee(()=>!A.value||A.value.length===0?0:A.value.filter(re=>re.isSelected&&re.status?.toLowerCase()!=="cancelled").reduce((re,ue)=>{const We=ue.procedureCost||0;return re+We},0)),ae=ee(()=>!A.value||A.value.length===0?0:A.value.filter(re=>re.isSelected&&re.status?.toLowerCase()!=="cancelled").reduce((re,ue)=>{const We=ue.costEstimate||ue.cost_estimate,nt=ue.procedureCost||0;return re+(We!==void 0?We:nt)},0)),j=ee(()=>!A.value||A.value.length===0?0:A.value.filter(re=>re.isSelected&&re.status?.toLowerCase()==="completed"&&re.status?.toLowerCase()!=="cancelled").reduce((re,ue)=>{const We=ue.costEstimate||ue.cost_estimate,nt=ue.procedureCost||0;return re+(We!==void 0?We:nt)},0)),J=ee(()=>!T.value||T.value.length===0?0:T.value.reduce((re,ue)=>re+(ue.totalPaid||0),0)),ie=ee(()=>Math.max(0,j.value-J.value)),X=ee(()=>A.value?A.value.some(re=>(re.option||re.options||"").trim()!==""&&re.status?.toLowerCase()!=="cancelled"):!1),fe=ee(()=>A.value?A.value.filter(re=>re.status?.toLowerCase()!=="cancelled"):[]);ee(()=>{if(!A.value)return[];const re={ongoing:1,on_hold:2,proposed:3,completed:4,cancelled:5},ue=nt=>{const Yt=nt.start_date||nt.startDate,Ct=nt.created_at||nt.createdAt;return Yt?new Date(Yt):Ct?new Date(Ct):new Date(0)},We=[...A.value];return We.length>100?We.sort((nt,Yt)=>{const Ct=Z.value.get(nt.id)||{status:nt.status?.toLowerCase(),date:ue(nt)},Xe=Z.value.get(Yt.id)||{status:Yt.status?.toLowerCase(),date:ue(Yt)},Et=re[Ct.status]||999,ca=re[Xe.status]||999;return Et!==ca?Et-ca:Xe.date-Ct.date}):We.sort((nt,Yt)=>{const Ct=Z.value.get(nt.id)||{status:nt.status?.toLowerCase(),date:ue(nt)},Xe=Z.value.get(Yt.id)||{status:Yt.status?.toLowerCase(),date:ue(Yt)},Et=re[Ct.status]||999,ca=re[Xe.status]||999;return Et!==ca?Et-ca:Xe.date-Ct.date})});const M=ee(()=>{if(!A.value||A.value.length===0)return{unscheduled:[],dateGroups:[]};const re={ongoing:1,on_hold:2,proposed:3,completed:4,cancelled:5},ue=Ct=>Ct.sort((Xe,Et)=>{const ca=(Xe.status||"proposed").toLowerCase(),Un=(Et.status||"proposed").toLowerCase(),Vr=re[ca]||999,Mn=re[Un]||999;return Vr-Mn}),We=[],nt={};A.value.forEach(Ct=>{const Et=Z.value.get(Ct.id)?.startDate;if(!Et)We.push(Ct);else{const ca=new Date(Et),Un=new Date,Vr=ca.getFullYear()===Un.getFullYear(),Mn=ca.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",...Vr?{}:{year:"numeric"}}),ma=ca.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric"});nt[Mn]||(nt[Mn]={date:Mn,fullDate:ma,rawDate:ca,procedures:[]}),nt[Mn].procedures.push(Ct)}}),ue(We),Object.values(nt).forEach(Ct=>{ue(Ct.procedures)});const Yt=Object.values(nt).sort((Ct,Xe)=>Ct.rawDate.getTime()-Xe.rawDate.getTime());return{unscheduled:We,dateGroups:Yt}}),z=async()=>{if(!d.value?.id||d.value.id==="0"){A.value=[];return}try{const re=await CA(d.value.id);if(re.error)throw new Error(re.error.message||"Failed to load procedure details");let ue=re.data.procedures||[];ue=ue.sort((We,nt)=>{const Yt=We.option||We.options||"",Ct=nt.option||nt.options||"";return!Yt&&Ct?-1:Yt&&!Ct?1:Yt.localeCompare(Ct)}),A.value=ue,A.value.forEach(We=>{gt(We)}),wt()}catch(re){console.error("Error loading procedure treatments:",re),A.value=[]}},se=async re=>{if(!re||re==="0"){E.value=null;return}try{const We=(await it.get(`referral/by-treatmentplan/${re}`,{params:{doctor_id:s.value}})).data?.data??null;E.value=We,d.value&&(d.value.referral=We)}catch(ue){console.error("Error fetching referral:",ue),E.value=null,d.value&&(d.value.referral=null)}},be=()=>{x.value=!0},Fe=()=>{x.value=!1},ye=re=>{E.value=re,d.value&&(d.value.referral=re),x.value=!1},Qe=async()=>{if(!d.value?.id||d.value.id==="0"){T.value=[];return}try{T.value=null;const re=await Pw(r,"",d.value.id);if(re.error)throw new Error(re.error.message||"Failed to load payment receipts");T.value=re.data||[]}catch(re){console.error("Error loading payment receipts:",re),T.value=[],Ce("Failed to load payment receipts","error")}};Ge(()=>n.treatmentPlan,re=>{re&&(d.value=Kn.cloneDeep(re),(d.value.amountPaid===void 0||d.value.amountPaid===null)&&(d.value.amountPaid=0),oe.value&&(de.value={treatmentPlanName:d.value.treatmentPlanName||"",status:d.value.status||"proposed",startDate:d.value.startDate||"",endDate:d.value.endDate||"",followupDate:d.value.followupDate||"",notes:d.value.notes||"",isReminded:d.value.isReminded||!1}),z(),re.id&&re.id!=="0"?(Qe(),se(re.id)):(T.value=[],E.value=null))},{immediate:!0,deep:!0}),Ge(()=>de.value.followupDate,(re,ue)=>{re&&ue&&re!==ue&&de.value.isReminded&&(de.value.isReminded=!1,console.log("Follow-up date changed, setting reminder to pending"))});const _e=re=>{console.log("Tab changed to:",re)},Se=()=>{a("createNewTreatmentPlan",{treatmentPlanName:"New Treatment Plan",startDate:"",endDate:"",followupDate:"",status:"proposed",notes:"",amountPaid:0,isTemplate:!1})},Ee=async()=>{if(!s.value){console.error("Doctor ID not available");return}S.value=!0;try{const re=await nO("",s.value);if(re.error)throw new Error(re.error.message||"Failed to load procedures");b.value=re.data}catch(re){console.error("Error loading procedures:",re),Ce("Failed to load procedures","error")}finally{S.value=!1}},Ue=async re=>{if(!d.value?.id||d.value.id==="0"){Ce("Please create a treatment plan first","error");return}const{template:ue,autoFillData:We}=re;if(!We.procedures||We.procedures.length===0){Ce("Template has no procedures to copy","warning");return}try{const nt=await it.put(`/treatmentplan/${d.value.id}`,{treatmentplan_name:We.treatmentPlanName,notes:We.notes||""});if(!nt.data.success)throw new Error(nt.data.error||"Failed to update treatment plan details");let Yt=0,Ct=0;const Xe=[];for(const Et of We.procedures)try{await it.post(`/treatmentplan/${d.value.id}/procedure`,{procedure_id:Et.procedureId,cost_estimate:Et.costEstimate||0,location:Et.location||"",option:Et.option||"",notes:""}),Yt++}catch(ca){Ct++,Xe.push(Et.procedureName||"Unknown"),console.error("Error adding procedure from template:",ca)}await Pe(),C.value.find(Et=>Et.id===ue.id)||C.value.push(ue),Ct===0?Ce(`Applied template "${ue.treatmentPlanName}": ${Yt} procedure(s) added`,"success"):Ce(`Template applied with partial success: ${Yt} succeeded, ${Ct} failed. Failed: ${Xe.join(", ")}`,"warning")}catch(nt){console.error("Error applying template:",nt),Ce("Failed to apply template","error")}},je=()=>{D.value=!0},at=()=>{D.value=!1},mt=()=>{D.value=!1,Ce("Treatment plan template created successfully","success")},xe=re=>{L.value=re,U.value=!0},Be=()=>{U.value=!1,L.value=null},Ye=()=>{U.value=!1,L.value=null,Ce("Treatment plan template updated successfully","success")},kt=re=>{C.value=C.value.filter(ue=>ue.id!==re)},xt=()=>{p.value=!0},Nt=async re=>{console.log("Searched Procedures received:",re),console.log("Current selectedProcedures before:",m.value);for(const ue of re)await At(ue);console.log("Current selectedProcedures after:",m.value)},At=async re=>{if(console.log("Adding procedure to staging:",re),re.isLocal===!0){console.log("Local procedure - saving directly to treatment plan"),await Ot(re);return}console.log("Server procedure - adding to staging area");const ue=m.value.some(We=>We.id===re.id);if(console.log("Procedure already exists in staging:",ue),ue)console.log("Procedure already in staging, skipping");else{const We={...re,cost:re.cost||0,costEstimate:re.cost||0,location:re.location||"",options:re.option||"",isSelected:!0,isLocal:re.isLocal!==void 0?re.isLocal:!0,stagingId:`staging_${Date.now()}_${re.id||Math.random()}`};console.log("Staged Procedure:",We),m.value.push(We),console.log("Updated staging list:",m.value)}},Ot=async re=>{if(!d.value.id||d.value.id==="0"){Ce("Please select a valid treatment plan first","error");return}try{console.log("Saving local procedure directly:",re);const ue=await Fp(d.value.id,re.id,re.cost||0,"","","");if(ue.error)throw new Error(ue.error.message||"Failed to save procedure to treatment plan");await z(),Ce(`"${re.procedureName}" added to treatment plan`,"success")}catch(ue){console.error("Error saving local procedure directly:",ue),Ce("Failed to add procedure to treatment plan","error")}},Dt=async()=>{if(!d.value.id||d.value.id==="0"){Ce("Please select a valid treatment plan first","error");return}if(m.value.length===0){Ce("No procedures selected to save","warning");return}B.value=!0;let re=0;try{for(const ue of m.value)if(ue.isSelected){let We=ue.id;if(!ue.isLocal&&!ue.id.toString().startsWith("staging_"))try{if(console.log("Creating local procedure for server procedure:",ue),!s.value)throw new Error("Doctor ID not available");const Yt=await mT(ue.procedureName,ue.cost||0,"",!0,ue.id.toString().replace("server_",""),ue.identifier||"",s.value);if(Yt.error)throw console.error("API Error Response:",Yt.error),new Error(Yt.error.message||"Failed to create local procedure entry");We=Yt.data.id,console.log("Server procedure saved to local DB with ID:",We)}catch(Yt){throw console.error("Error saving server procedure to local DB:",Yt),Yt}const nt=await Fp(d.value.id,We,ue.costEstimate||ue.cost||0,"",ue.location||"",ue.option||"");if(nt.error)throw new Error(nt.error.message||"Failed to save procedure to treatment plan");re++}re>0&&(m.value=[],await z(),Ce(`${re} procedure(s) added to treatment plan successfully`,"success"))}catch(ue){console.error("Error saving procedures to treatment plan:",ue),Ce("Failed to save procedures to treatment plan","error")}finally{B.value=!1}},bt=re=>{m.value=m.value.filter(ue=>ue.stagingId!==re)},Ze=async()=>{if(!d.value?.id||d.value.id==="0"){Ce("Please select a valid treatment plan first","error");return}if(!A.value||A.value.length===0){Ce("No procedures to save","warning");return}F.value=!0;let re=0;try{for(const ue of A.value){const We={cost_estimate:ue.costEstimate||ue.procedureCost||0,notes:ue.notes||"",location:ue.location||"",option:ue.option||"",status:ue.status||"proposed",start_date:ue.startDate||null,end_date:ue.endDate||null},nt=await uE(d.value.id,ue.id,We);nt.error?console.error("Error saving procedure treatment:",ue.id,nt.error):re++}re>0?(Ce(`${re} procedure(s) saved successfully`,"success"),await z()):Ce("No procedures were saved","warning")}catch(ue){console.error("Error saving procedure treatments:",ue),Ce("Failed to save procedure treatments","error")}finally{F.value=!1}},qt=async re=>{(!re.costEstimate||re.costEstimate===0)&&(re.costEstimate=re.procedureCost||0),console.log("Final cost updated for procedure:",re.id,"New cost:",re.costEstimate)},Vt=re=>{console.log("Edit procedure - original procedureTreatment:",re),console.log("ProcedureTreatment keys:",Object.keys(re)),console.log("ProcedureTreatment ID:",re.id),console.log("ProcedureTreatment procedure_id:",re.procedure_id),console.log("ProcedureTreatment procedure:",re.procedure),console.log("ProcedureTreatment costEstimate:",re.costEstimate),console.log("ProcedureTreatment cost_estimate:",re.cost_estimate);const ue={id:re.procedureId||re.procedure_id||re.procedure?.id,procedureName:re.procedureName||re.procedure_name||re.procedure?.procedureName,description:re.procedureDescription||re.procedure_description||re.procedure?.description||"",cost:re.procedureCost||re.procedure_cost||re.procedure?.cost||0,isLocal:re.isLocal||re.procedure?.isLocal||!0};console.log("Extracted actual procedure for editing:",ue),g.value=ue,h.value=!0},zt=async re=>{if(!d.value?.id||d.value.id==="0"){Ce("Please select a valid treatment plan first","error");return}try{console.log("Duplicating procedure:",re);const ue=re.procedureId||re.procedure_id,We=re.costEstimate||re.cost_estimate||0;if(!ue){Ce("Unable to determine procedure ID for duplication","error");return}const nt=await Fp(d.value.id,ue,We,"","","");if(nt.error){console.error("Error duplicating procedure:",nt.error),Ce("Failed to duplicate procedure","error");return}await z();const Yt=re.procedure?.procedure_name||re.procedureName||re.procedure_name||"procedure";Ce(`"${Yt}" duplicated successfully`,"success")}catch(ue){console.error("Error duplicating procedure:",ue),Ce("Failed to duplicate procedure","error")}},ln=async re=>{if(console.log("New procedure created:",re),console.log("Local treatment plan:",d.value),console.log("Procedure ID:",re.id),console.log("Procedure cost:",re.cost),!d.value.id||d.value.id==="0"){console.error("No valid treatment plan selected"),Ce("Please select a valid treatment plan first","error");return}if(!re.id){console.error("No procedure ID received from creation"),Ce("Procedure was created but ID is missing","error");return}try{console.log("Making API call with:",{treatmentPlanId:d.value.id,procedureId:re.id,costEstimate:re.cost,notes:""});const ue=await Fp(d.value.id,re.id,re.cost,"","","");if(console.log("API response:",ue),ue.error){console.error("API error details:",ue.error);const We=ue.error.response?.data?.error||ue.error.message||"Failed to link procedure to treatment plan";throw new Error(We)}await z(),Ce("Procedure added to treatment plan successfully","success")}catch(ue){console.error("Error linking procedure to treatment plan:",ue),console.error("Error stack:",ue.stack);let We="Failed to add procedure to treatment plan";ue.message&&(We=ue.message),Ce(We,"error")}},Dn=()=>{p.value=!1},vt=()=>{h.value=!1,g.value=null},et=re=>{_.value=re,y.value=!0},Wt=()=>{y.value=!1,_.value=null},_n=async re=>{console.log("Procedure treatment deleted:",re),await z(),Ce("Procedure removed from treatment plan successfully","success")},na=()=>{F.value||(oe.value||(de.value={treatmentPlanName:d.value.treatmentPlanName||"",status:d.value.status||"proposed",startDate:d.value.startDate||"",endDate:d.value.endDate||"",followupDate:d.value.followupDate||"",notes:d.value.notes||"",isReminded:d.value.isReminded||!1}),oe.value=!oe.value)},rt=async()=>{if(!d.value?.id||d.value.id==="0"){Ce("Please select a valid treatment plan first","error");return}if(!de.value.treatmentPlanName?.trim()){Ce("Treatment plan name is required","error");return}F.value=!0;try{const re=await it.put(`/treatmentplan/${d.value.id}`,{treatmentplan_name:de.value.treatmentPlanName,status:de.value.status,start_date:de.value.startDate||null,end_date:de.value.endDate||null,followup_date:de.value.followupDate||null,notes:de.value.notes||"",isReminded:de.value.isReminded||!1});if(!re.data.success)throw new Error(re.data.error||"Failed to update treatment plan");oe.value=!1,de.value={},await Pe(),Ce("Treatment plan updated successfully","success")}catch(re){console.error("Error saving treatment plan changes:",re),Ce("Failed to update treatment plan","error")}finally{F.value=!1}},Pe=async()=>{try{const re=await CA(d.value.id);if(re.error)throw new Error(re.error||"Failed to fetch treatment plan details");const ue=Kn.cloneDeep(re.data);d.value=ue,await z(),await Qe(),a("update:treatmentPlan",ue),console.log("Emitted fresh treatment plan data to parent:",ue)}catch(re){console.error("Error refreshing treatment plan data after save:",re),a("update:treatmentPlan",Kn.cloneDeep(d.value))}},ut=async re=>{console.log("Procedure updated:",re),await z(),Ce("Procedure updated successfully","success")},wt=()=>{if(!A.value)return;const re=ue=>{const We=ue.start_date||ue.startDate,nt=ue.created_at||ue.createdAt;return We?new Date(We):nt?new Date(nt):new Date(0)};A.value.forEach(ue=>{if(!Z.value.has(ue.id)){const We=ue.start_date||ue.startDate;Z.value.set(ue.id,{status:ue.status?.toLowerCase(),date:re(ue),startDate:We||null})}})},Xt=async re=>{if(!d.value?.id||d.value.id==="0"){Ce("Please select a valid treatment plan first","error");return}re.isUpdating=!0;try{console.log("Updating procedure treatment progress:",re),console.log("Procedure treatment keys:",Object.keys(re)),console.log("Treatment procedure ID:",re.id);const ue=re.id;if(!ue)throw console.error("No treatment procedure ID found in procedure treatment object"),new Error("Treatment procedure ID not found in treatment data");const We={cost_estimate:re.costEstimate||re.cost_estimate||0,notes:re.notes||"",location:re.location||"",status:re.status||"proposed",start_date:re.startDate||"",end_date:re.endDate||""};console.log("Sending update with treatmentProcedureId:",ue,"updateData:",We);const nt=await uE(d.value.id,ue,We);if(nt.error)throw new Error(nt.error.message||"Failed to update procedure treatment");console.log("Update response:",nt),Z.value.delete(re.id);const Yt=re.postProcedureCare?.trim?.()||"";if(Yt){const Ct=re.procedureId||re.procedure_id||re.procedure?.id;if(Ct)try{await sO(Ct,Yt,s.value),console.log("Procedure instructions saved to procedure description")}catch(Xe){console.error("Failed to save procedure instructions:",Xe),Ce("Progress saved; instructions could not be saved to procedure","warning")}}await z(),Ce("Procedure progress updated successfully","success")}catch(ue){console.error("Error updating procedure treatment:",ue),Ce("Failed to update procedure progress","error")}finally{re.isUpdating=!1}},bn=re=>{switch(re?.toLowerCase()){case"proposed":return"grey";case"ongoing":return"primary";case"completed":return"success";case"on_hold":return"warning";case"cancelled":return"error";default:return"grey"}},wn=re=>{const ue=new Set(H.value);if(ue.has(re))ue.delete(re);else{ue.add(re);const We=A.value.find(nt=>nt.id===re);if(We&&(We.postProcedureCare===void 0||We.postProcedureCare===null)){const nt=We.procedure?.description||We.procedureDescription||We.procedure_description||We.description||"";We.postProcedureCare=nt,console.log("Initialized postProcedureCare from procedure description:",nt)}}H.value=ue},Zn=re=>H.value.has(re),ua=re=>{try{return new Date(re).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}catch{return re}},Ce=(re,ue="success")=>{G.value={show:!0,text:re,color:ue}},He=re=>{q.value=re,te.value=!0},Re=re=>{console.log("Progress notes transcription completed:",re),re&&re.trim()&&q.value&&(q.value.notes&&q.value.notes.trim()?q.value.notes+=" "+re:q.value.notes=re),te.value=!1,q.value=null},Te=(re,ue)=>{if(!re||!re.description||!ue)return;const We=re.description||"",nt=ue.postProcedureCare||"";nt.trim()?ue.postProcedureCare=nt.trim()+", "+We:ue.postProcedureCare=We},Ve=re=>{le.value=re,ce.value=!0},$e=re=>{console.log("Post-procedure care transcription completed:",re),re&&re.trim()&&le.value&&(le.value.postProcedureCare&&le.value.postProcedureCare.trim()?le.value.postProcedureCare+=" "+re:le.value.postProcedureCare=re),ce.value=!1,le.value=null},dt=re=>{const ue=re?.contactNumber||re?.phoneNumber||re?.contact_number||re?.patient_phone;if(!ue)return!1;const We=ue.replace(/\D/g,"");return We.length===10||We.length===12&&We.startsWith("91")},Bt=async re=>{try{if(!o.value){c("Please select a doctor first");return}if(!dt(n.patient)){c("Patient contact number not available or invalid");return}if(!re.postProcedureCare||!re.postProcedureCare.trim()){c("Post-procedure care instructions are required");return}re.sendingWhatsApp=!0,console.log(" Sending post-procedure care instructions via WhatsApp");const ue={procedureName:re.procedure?.procedure_name||re.procedureName||re.procedure_name||"Procedure",postProcedureCare:re.postProcedureCare.trim(),startDate:re.startDate||re.start_date||d.value.startDate||new Date().toISOString().split("T")[0],procedure:re.procedure,treatmentPlan:d.value},We=await o4e(ue,n.patient,o.value);if(We.success)l(We.message||"Post-procedure care instructions sent successfully");else throw new Error(We.error||"Failed to send post-procedure care instructions")}catch(ue){console.error(" WhatsApp post-procedure care failed:",ue),c(ue.message||"Failed to send post-procedure care instructions")}finally{re&&(re.sendingWhatsApp=!1)}},yt=()=>"primary",gt=re=>{re.scalePercentage===void 0&&(re.scalePercentage=100),re.finalCost===void 0&&(re.finalCost=re.costEstimate||re.cost_estimate||re.procedure?.cost||0),re.option===void 0&&(re.option=re.option||""),re.isSelected===void 0&&(re.isSelected=!0),re.status===void 0&&(re.status="proposed"),re.startDate===void 0&&(re.startDate=""),re.endDate===void 0&&(re.endDate=""),re.notes===void 0&&(re.notes=""),re.isUpdating===void 0&&(re.isUpdating=!1),(re.postProcedureCare===void 0||re.postProcedureCare===null)&&(re.postProcedureCare=re.procedure?.description||re.procedureDescription||re.procedure_description||re.description||""),re.sendingWhatsApp===void 0&&(re.sendingWhatsApp=!1)},pt=re=>{console.log("Treatment plan PDF generated:",re)},tt=async()=>{if(!s.value){console.warn("Doctor ID not available for loading print configurations"),ne.value={};return}try{const{fetchPrintConfigs:re}=await ns(async()=>{const{fetchPrintConfigs:We}=await Promise.resolve().then(()=>j_e);return{fetchPrintConfigs:We}},void 0,import.meta.url),ue=await re(s.value);ne.value=ue.data||{}}catch(re){console.error("Error loading print configurations:",re),ne.value={}}};return An(()=>{Ee(),tt(),d.value?.id&&d.value.id!=="0"&&z()}),(re,ue)=>{const We=I("v-tab"),nt=I("v-tooltip"),Yt=I("v-tabs"),Ct=I("v-card"),Xe=I("v-col"),Et=I("v-row"),ca=I("v-progress-circular"),Un=I("v-btn"),Vr=I("v-empty-state"),Mn=I("v-card-subtitle"),ma=I("v-icon"),Qn=I("v-chip"),fr=I("v-text-field"),oo=I("v-textarea"),Qs=I("v-select"),Mi=I("v-switch"),Zu=I("v-form"),ss=I("v-expand-transition"),Gr=I("v-card-text"),Ir=I("v-divider"),Ps=I("v-checkbox"),Rt=I("v-alert"),Ar=I("v-tabs-window-item"),Rn=I("v-tabs-window"),os=I("v-dialog"),pa=I("v-snackbar");return P(),Ae(ze,null,[i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,null,{default:u(()=>[i(Ct,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[i(Yt,{modelValue:f.value,"onUpdate:modelValue":[ue[0]||(ue[0]=ft=>f.value=ft),_e],"align-tabs":"center",density:"compact",class:"interactive-tabs"},{default:u(()=>[i(nt,{text:"Treatment Plan"},{activator:u(({props:ft})=>[i(We,Ie({value:"plan"},ft,{class:["tab-interactive",{"tab-active":f.value==="plan"}],tabindex:"-1"}),{default:u(()=>[...ue[22]||(ue[22]=[v("div",{class:"tab-content"}," PLAN ",-1)])]),_:1},16,["class"])]),_:1}),i(nt,{text:"Treatment Progress"},{activator:u(({props:ft})=>[i(We,Ie({value:"progress"},ft,{class:["tab-interactive",{"tab-active":f.value==="progress"}],tabindex:"-1"}),{default:u(()=>[...ue[23]||(ue[23]=[v("div",{class:"tab-content"}," PROGRESS ",-1)])]),_:1},16,["class"])]),_:1}),i(nt,{text:"Share Treatment Plan"},{activator:u(({props:ft})=>[i(We,Ie({value:"share"},ft,{class:["tab-interactive",{"tab-active":f.value==="share"}],tabindex:"-1"}),{default:u(()=>[...ue[24]||(ue[24]=[v("div",{class:"tab-content"}," SHARE PLAN ",-1)])]),_:1},16,["class"])]),_:1}),i(nt,{text:"Uploads"},{activator:u(({props:ft})=>[i(We,Ie({value:"uploads"},ft,{class:["tab-interactive",{"tab-active":f.value==="uploads"}],tabindex:"-1"}),{default:u(()=>[...ue[25]||(ue[25]=[v("div",{class:"tab-content"}," UPLOADS ",-1)])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(Rn,{modelValue:f.value,"onUpdate:modelValue":ue[12]||(ue[12]=ft=>f.value=ft),class:"flex-grow-1"},{default:u(()=>[!e.treatmentPlan?.id&&f.value!=="uploads"?(P(),he(Et,{key:0,"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[i(ca,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):e.treatmentPlan.id=="0"&&f.value!=="uploads"?(P(),he(Et,{key:1,"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[i(Vr,null,{title:u(()=>[...ue[26]||(ue[26]=[v("div",{class:"text-subtitle-2"}," No treatment plan selected ",-1)])]),text:u(()=>[v("div",i4e,[ue[28]||(ue[28]=N(" Create a new treatment plan or select an existing one ",-1)),ue[29]||(ue[29]=v("br",null,null,-1)),i(Un,{class:"mt-2",onClick:Se},{default:u(()=>[...ue[27]||(ue[27]=[N("Create Treatment Plan",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})):ge("",!0),i(Ar,{value:"plan",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(P(),he(Et,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[i(Xe,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[i(Ct,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[i(Et,{"no-gutters":"",class:"align-top"},{default:u(()=>[i(Xe,{cols:"2",class:"d-flex align-top"},{default:u(()=>[i(Mn,{class:"pa-0"},{default:u(()=>[...ue[30]||(ue[30]=[v("strong",null,"Treatment Plan Details",-1)])]),_:1})]),_:1}),i(Xe,{cols:"1"}),i(Xe,{cols:"6",class:"d-flex align-top flex-column"},{default:u(()=>[i(LTe,{doctorId:s.value,onTemplateSelected:Ue},null,8,["doctorId"]),C.value.length>0?(P(),Ae("div",l4e,[(P(!0),Ae(ze,null,Jt(C.value,ft=>(P(),he(Qn,{key:ft.id,color:"primary",variant:"outlined",size:"small",closable:"","onClick:close":on=>kt(ft.id),onClick:on=>xe(ft),class:"cursor-pointer"},{default:u(()=>[N(K(ft.treatmentPlanName)+" ",1),i(ma,{end:"",size:"small",class:"ml-1"},{default:u(()=>[...ue[31]||(ue[31]=[N("mdi-pencil",-1)])]),_:1})]),_:2},1032,["onClick:close","onClick"]))),128))])):ge("",!0)]),_:1}),i(Xe,{cols:"3",class:"d-flex justify-end align-top"},{default:u(()=>[i(nt,{text:"Save as Template"},{activator:u(({props:ft})=>[i(Un,Ie({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},ft,{onClick:je,disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0",tabindex:"-1"}),{default:u(()=>[i(ma,{start:""},{default:u(()=>[...ue[32]||(ue[32]=[v("img",{src:TH,alt:"Save Template"},null,-1)])]),_:1}),ue[33]||(ue[33]=N(" Save as Template ",-1))]),_:1},16,["disabled"])]),_:1})]),_:1})]),_:1}),i(Et,{"no-gutters":"",class:"mt-2 mb-2"},{default:u(()=>[i(Xe,{cols:"11"},{default:u(()=>[v("div",u4e,[i(Qn,{color:"primary","text-color":"black",size:"small",density:"compact"},{default:u(()=>[v("strong",null,K(d.value?.treatmentPlanName||"New Treatment Plan"),1)]),_:1}),i(Qn,{size:"small",color:yt(),variant:"outlined",density:"compact"},{default:u(()=>[N(K((d.value?.status||"proposed").charAt(0).toUpperCase()+(d.value?.status||"proposed").slice(1)),1)]),_:1},8,["color"]),d.value?.startDate?(P(),he(Qn,{key:0,size:"small",variant:"outlined",color:"primary",density:"compact"},{default:u(()=>[N(" Start: "+K(Oe(Ul)(d.value.startDate)),1)]),_:1})):ge("",!0),d.value?.endDate?(P(),he(Qn,{key:1,size:"small",variant:"outlined",color:"primary",density:"compact"},{default:u(()=>[N(" End: "+K(Oe(Ul)(d.value.endDate)),1)]),_:1})):ge("",!0),d.value?.followupDate?(P(),he(Qn,{key:2,size:"small",variant:"outlined",color:"secondary",density:"compact"},{default:u(()=>[N(" Follow-up: "+K(Oe(Ul)(d.value.followupDate)),1)]),_:1})):ge("",!0)])]),_:1}),i(Xe,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[i(nt,{text:oe.value?"Collapse":"Edit Treatment Plan"},{activator:u(({props:ft})=>[i(ma,Ie(ft,{size:"small",color:"primary",class:"expand-hint cursor-pointer",disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0"||F.value,onClick:na}),{default:u(()=>[N(K(oe.value?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1},16,["disabled"])]),_:1},8,["text"])]),_:1})]),_:1}),i(ss,null,{default:u(()=>[oe.value?(P(),Ae("div",c4e,[i(Zu,{onSubmit:gn(rt,["prevent"])},{default:u(()=>[i(Et,{"no-gutters":"",class:"mb-2 align-top"},{default:u(()=>[i(Xe,{cols:"10",class:"pr-2"},{default:u(()=>[i(fr,{modelValue:de.value.treatmentPlanName,"onUpdate:modelValue":ue[1]||(ue[1]=ft=>de.value.treatmentPlanName=ft),label:"Treatment Plan Name",variant:"outlined",density:"compact",required:"","hide-details":""},null,8,["modelValue"])]),_:1}),i(Xe,{cols:"2",class:"d-flex justify-center align-start"},{default:u(()=>[i(Un,{color:"primary",size:"small",type:"submit",loading:F.value,disabled:!de.value.treatmentPlanName},{default:u(()=>[...ue[34]||(ue[34]=[N(" Save ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),i(Et,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(Xe,{cols:"10"},{default:u(()=>[i(oo,{modelValue:de.value.notes,"onUpdate:modelValue":ue[2]||(ue[2]=ft=>de.value.notes=ft),label:"Notes",variant:"outlined",density:"compact",rows:"1","auto-grow":"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),i(Et,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(Xe,{cols:"4",class:"pr-1"},{default:u(()=>[i(Qs,{modelValue:de.value.status,"onUpdate:modelValue":ue[3]||(ue[3]=ft=>de.value.status=ft),items:W,label:"Status",variant:"outlined",density:"compact",required:"","hide-details":""},null,8,["modelValue"])]),_:1}),i(Xe,{cols:"3",class:"px-1"},{default:u(()=>[i(fr,{modelValue:de.value.startDate,"onUpdate:modelValue":ue[4]||(ue[4]=ft=>de.value.startDate=ft),label:"Start Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),i(Xe,{cols:"3",class:"pl-1"},{default:u(()=>[i(fr,{modelValue:de.value.endDate,"onUpdate:modelValue":ue[5]||(ue[5]=ft=>de.value.endDate=ft),label:"End Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),i(Et,{"no-gutters":"",class:"mb-0"},{default:u(()=>[i(Xe,{cols:"4",class:"pr-1"},{default:u(()=>[i(fr,{modelValue:de.value.followupDate,"onUpdate:modelValue":ue[6]||(ue[6]=ft=>de.value.followupDate=ft),label:"Follow-up Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),i(Xe,{cols:"6",class:"pl-1 d-flex align-center"},{default:u(()=>[i(Mi,{modelValue:de.value.isReminded,"onUpdate:modelValue":ue[7]||(ue[7]=ft=>de.value.isReminded=ft),label:de.value.isReminded?"Reminded":"Reminder Pending",color:"primary",density:"compact","hide-details":"","true-value":!0,"false-value":!1},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})])):ge("",!0)]),_:1})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(ME,{referral:E.value,disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0",onOpenDialog:be},null,8,["referral","disabled"])]),_:1})]),_:1}),i(Ct,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex align-center"},{default:u(()=>[i(Mn,{class:"pa-0"},{default:u(()=>[...ue[35]||(ue[35]=[v("strong",null,"Cost and Payment Information",-1)])]),_:1}),T.value&&T.value.length===0?(P(),Ae("span",d4e,"- No payment receipts found")):ge("",!0)]),_:1})]),_:1}),A.value&&A.value.length>0?(P(),Ae("div",f4e,[i(Ct,{class:"cost-breakdown-card",color:"blue-grey-lighten-5",elevation:"0",rounded:"lg"},{default:u(()=>[i(Gr,{class:"pa-3"},{default:u(()=>[i(Et,{"no-gutters":"",class:"justify-space-between align-center"},{default:u(()=>[i(Xe,null,{default:u(()=>[v("div",A4e,[ue[36]||(ue[36]=v("p",{class:"text-caption text-medium-emphasis mb-0"},"Base Cost",-1)),v("p",m4e,""+K(O.value.toLocaleString()),1)])]),_:1}),i(Xe,null,{default:u(()=>[v("div",v4e,[ue[37]||(ue[37]=v("p",{class:"text-caption text-medium-emphasis mb-0"},"Final Cost",-1)),v("p",h4e,""+K(ae.value.toLocaleString()),1)])]),_:1}),i(Xe,null,{default:u(()=>[v("div",p4e,[ue[38]||(ue[38]=v("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Due",-1)),v("p",g4e,""+K(j.value.toLocaleString()),1)])]),_:1}),i(Xe,null,{default:u(()=>[v("div",y4e,[ue[39]||(ue[39]=v("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Paid",-1)),v("p",_4e,""+K(J.value.toLocaleString()),1)])]),_:1}),i(Xe,null,{default:u(()=>[v("div",w4e,[ue[40]||(ue[40]=v("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Pending",-1)),v("p",{class:lt(["text-body-2 font-weight-medium mb-0",ie.value>0?"text-error":"text-success"])}," "+K(ie.value.toLocaleString()),3)])]),_:1})]),_:1}),O.value!==ae.value?(P(),he(Et,{key:0,"no-gutters":"",class:"justify-space-between align-center mt-2"},{default:u(()=>[i(Xe),i(Xe,null,{default:u(()=>[v("div",b4e,[i(Qn,{size:"small",color:ae.value<O.value?"success":"warning",variant:"outlined",density:"compact"},{default:u(()=>[N(K(ae.value<O.value?""+(O.value-ae.value).toLocaleString()+" off":""+(ae.value-O.value).toLocaleString()+" markup"),1)]),_:1},8,["color"])])]),_:1}),i(Xe),i(Xe),i(Xe)]),_:1})):ge("",!0)]),_:1})]),_:1})])):ge("",!0),T.value?T.value.length>0?(P(),Ae("div",C4e,[(P(!0),Ae(ze,null,Jt(T.value,ft=>(P(),he(Ct,{key:ft.id,class:"payment-receipt-card ma-1 pa-2",variant:"outlined",rounded:"md"},{default:u(()=>[i(Et,{"no-gutters":"",align:"center"},{default:u(()=>[i(Xe,null,{default:u(()=>[v("div",S4e,[v("span",E4e,K(ft.identifier),1),i(Ir,{vertical:"",class:"mx-2"}),v("span",k4e,K(ua(ft.paymentReceiptDate)),1),i(Ir,{vertical:"",class:"mx-2"}),v("span",B4e,[ue[41]||(ue[41]=v("strong",null,"Paid:",-1)),N(" "+K((ft.totalPaid||0).toLocaleString()),1)]),ft.balanceDue>0?ge("",!0):(P(),Ae(ze,{key:0},[i(Ir,{vertical:"",class:"mx-2"}),i(Qn,{size:"x-small",color:"success",variant:"outlined",class:"receipt-status"},{default:u(()=>[...ue[42]||(ue[42]=[N(" Paid ",-1)])]),_:1})],64))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])):ge("",!0):(P(),Ae("div",x4e,[i(ca,{indeterminate:"",color:"primary",size:"24"})]))]),_:1}),i(Ct,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"6",class:"d-flex align-top"},{default:u(()=>[i(Mn,{class:"pa-0"},{default:u(()=>[...ue[43]||(ue[43]=[v("strong",null,"Procedures",-1)])]),_:1})]),_:1}),i(Xe,{cols:"6",class:"d-flex justify-end align-center mb-2 gap-2"},{default:u(()=>[i(nt,{text:"Create Procedure"},{activator:u(({props:ft})=>[i(Un,Ie({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},ft,{onClick:xt,disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0"}),{default:u(()=>[i(ma,{start:""},{default:u(()=>[...ue[44]||(ue[44]=[v("img",{src:m_,alt:"Create Procedure"},null,-1)])]),_:1}),ue[45]||(ue[45]=N(" Create Procedure ",-1))]),_:1},16,["disabled"])]),_:1})]),_:1})]),_:1}),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"1"}),i(Xe,{cols:"10"},{default:u(()=>[i(FTe,{onHandleSearchedProcedures:Nt,onAddProcedure:xt})]),_:1})]),_:1}),m.value&&m.value.length>0?(P(),Ae("div",T4e,[i(Et,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(Xe,{cols:"8",class:"d-flex justify-start align-center"},{default:u(()=>[v("h6",I4e,"Selected Procedures ("+K(m.value.filter(ft=>ft.isSelected).length)+")",1)]),_:1}),i(Xe,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[i(Un,{color:"primary",size:"small",class:"btn-hover-enhanced",onClick:Dt,loading:B.value,disabled:m.value.filter(ft=>ft.isSelected).length===0},{default:u(()=>[...ue[46]||(ue[46]=[N(" Save to Treatment Plan ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),(P(!0),Ae(ze,null,Jt(m.value,ft=>(P(),Ae("div",{key:ft.stagingId,class:"staging-row pa-3 mb-2",style:{border:"2px dashed rgba(var(--v-theme-primary), 0.3)","border-radius":"8px","background-color":"rgba(var(--v-theme-primary), 0.05)"}},[i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"3",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[v("div",F4e,[v("h5",P4e,K(ft.procedureName||"Unknown Procedure"),1),i(ma,{size:"small",class:"text-medium-emphasis"},{default:u(()=>[v("img",{src:ft.isLocal?Oe(af):Oe(Eh),alt:ft.isLocal?"Local":"Server"},null,8,D4e)]),_:2},1024)])]),_:2},1024),i(Xe,{cols:"2",class:"px-2"},{default:u(()=>[ue[47]||(ue[47]=v("div",{class:"text-caption text-medium-emphasis"},"Location",-1)),i(fr,{modelValue:ft.location,"onUpdate:modelValue":on=>ft.location=on,variant:"underlined",density:"compact",placeholder:"e.g.#14,left leg","hide-details":"",class:"location-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"2",class:"px-2"},{default:u(()=>[ue[48]||(ue[48]=v("div",{class:"text-caption text-medium-emphasis"},"Option",-1)),i(Qs,{modelValue:ft.option,"onUpdate:modelValue":on=>ft.option=on,variant:"underlined",density:"compact",items:["","A","B","C","D"],placeholder:"Select","hide-details":"",class:"option-select"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"2",class:"px-2"},{default:u(()=>[ue[49]||(ue[49]=v("div",{class:"text-caption text-medium-emphasis"},"Base Cost",-1)),i(fr,{modelValue:ft.cost,"onUpdate:modelValue":on=>ft.cost=on,modelModifiers:{number:!0},variant:"underlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"base-cost-input",placeholder:ft.isLocal?"Set cost":"Server procedure",onInput:on=>ft.costEstimate=ft.cost},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"])]),_:2},1024),i(Xe,{cols:"2",class:"px-2"},{default:u(()=>[ue[50]||(ue[50]=v("div",{class:"text-caption text-medium-emphasis"},"Estimate Cost",-1)),i(fr,{modelValue:ft.costEstimate,"onUpdate:modelValue":on=>ft.costEstimate=on,modelModifiers:{number:!0},variant:"underlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"final-cost-input"},null,8,["modelValue","onUpdate:modelValue"]),ft.cost&&ft.costEstimate!==ft.cost?(P(),he(Qn,{key:0,size:"small",color:ft.costEstimate<ft.cost?"success":"warning",variant:"outlined",density:"comfortable",class:"mt-1"},{default:u(()=>[N(K(ft.costEstimate<ft.cost?""+(ft.cost-ft.costEstimate).toLocaleString()+" off":""+(ft.costEstimate-ft.cost).toLocaleString()+" markup"),1)]),_:2},1032,["color"])):ge("",!0)]),_:2},1024),i(Xe,{cols:"1",class:"d-none d-lg-flex justify-end align-center"},{default:u(()=>[i(nt,{text:"Remove from staging"},{activator:u(({props:on})=>[i(Un,Ie({size:"small",icon:"",variant:"plain",onClick:Bn=>bt(ft.stagingId),class:"edit-icon mr-2"},{ref_for:!0},on),{default:u(()=>[i(ma,{size:"small",color:"error"},{default:u(()=>[...ue[51]||(ue[51]=[N("mdi-delete",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),i(Ps,{modelValue:ft.isSelected,"onUpdate:modelValue":on=>ft.isSelected=on,"true-value":!0,"false-value":!1,density:"compact","hide-details":"",class:"treatment-checkbox"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),i(Et,{"no-gutters":"",class:"d-flex d-lg-none justify-end align-center mt-2"},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex justify-end align-center gap-2"},{default:u(()=>[i(nt,{text:"Remove from staging"},{activator:u(({props:on})=>[i(Un,Ie({size:"small",icon:"",variant:"plain",onClick:Bn=>bt(ft.stagingId),class:"edit-icon"},{ref_for:!0},on),{default:u(()=>[i(ma,{size:"small",color:"error"},{default:u(()=>[...ue[52]||(ue[52]=[N("mdi-delete",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),i(Ps,{modelValue:ft.isSelected,"onUpdate:modelValue":on=>ft.isSelected=on,"true-value":!0,"false-value":!1,density:"compact","hide-details":"",class:"treatment-checkbox"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]))),128))])):ge("",!0),m.value&&m.value.length>0&&A.value&&A.value.length>0?(P(),he(Ir,{key:1,class:"mx-4 my-2"})):ge("",!0),X.value?(P(),he(Rt,{key:2,type:"info",variant:"tonal",density:"compact",class:"mx-2 mb-2",icon:"mdi-information-outline",border:"start"},{default:u(()=>[...ue[53]||(ue[53]=[v("div",{class:"text-caption"}," Some procedures have options (A, B, C...) added to them. Please clear options once treatmentplan is finalized. ",-1)])]),_:1})):ge("",!0),v("div",U4e,[fe.value&&fe.value.length>0?(P(),he(Et,{key:0,"no-gutters":"",class:"mb-2"},{default:u(()=>[i(Xe,{cols:"8",class:"d-flex justify-start align-center"},{default:u(()=>[v("h6",R4e,"Saved Procedures ("+K(fe.value.filter(ft=>ft.isSelected&&ft.status?.toLowerCase()!=="cancelled").length)+")",1)]),_:1}),i(Xe,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[i(Un,{color:"primary",size:"small",class:"btn-hover-enhanced",onClick:Ze,loading:F.value,disabled:!fe.value||fe.value.length===0},{default:u(()=>[...ue[54]||(ue[54]=[N(" Save Changes ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})):ge("",!0),fe.value&&fe.value.length>0?(P(!0),Ae(ze,{key:1},Jt(fe.value,ft=>(P(),Ae("div",{key:ft.id,class:"procedure-item-card pa-2 mb-1",style:{border:"1px solid rgba(var(--v-theme-outline), 0.12)","border-radius":"12px","background-color":"rgba(var(--v-theme-surface), 0.5)"}},[i(Et,{"no-gutters":"",align:"center"},{default:u(()=>[i(Xe,{cols:"5",class:"pr-2"},{default:u(()=>[v("div",N4e,[v("div",V4e,K(ft.procedure?.procedure_name||ft.procedureName||ft.procedure_name||"Unknown Procedure"),1)]),v("div",L4e,[N(" Base Cost "+K((ft.procedureCost||0).toLocaleString())+" ",1),i(nt,{text:"Edit Procedure"},{activator:u(({props:on})=>[i(Un,Ie({size:"x-small",icon:"",variant:"text",onClick:gn(Bn=>Vt(ft),["stop"]),class:"edit-icon-btn"},{ref_for:!0},on),{default:u(()=>[i(ma,{size:"14",color:"primary"},{default:u(()=>[...ue[55]||(ue[55]=[v("img",{src:Cv},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024),i(Xe,{cols:"2",class:"px-1"},{default:u(()=>[ue[56]||(ue[56]=v("div",{class:"text-caption text-medium-emphasis mb-1"},"Location",-1)),i(fr,{modelValue:ft.location,"onUpdate:modelValue":on=>ft.location=on,variant:"outlined",density:"compact",placeholder:"e.g.#14,left leg","hide-details":"",class:"location-input-field"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"2",class:"px-1"},{default:u(()=>[ue[57]||(ue[57]=v("div",{class:"text-caption text-medium-emphasis mb-1"},"Option",-1)),i(Qs,{modelValue:ft.option,"onUpdate:modelValue":on=>ft.option=on,variant:"outlined",density:"compact",items:["","A","B","C","D"],placeholder:"Select","hide-details":"",class:"option-select-field"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"2",class:"px-1"},{default:u(()=>[ue[58]||(ue[58]=v("div",{class:"text-caption text-medium-emphasis mb-1"},"Final Cost",-1)),i(fr,{modelValue:ft.costEstimate,"onUpdate:modelValue":on=>ft.costEstimate=on,modelModifiers:{number:!0},variant:"outlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"final-cost-input-field",onBlur:on=>qt(ft)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024),i(Xe,{cols:"1",class:"pl-1 d-none d-lg-flex justify-end align-center"},{default:u(()=>[v("div",M4e,[i(nt,{text:"Duplicate Procedure"},{activator:u(({props:on})=>[i(Un,Ie({size:"small",icon:"",variant:"text",onClick:Bn=>zt(ft),class:"edit-icon-btn"},{ref_for:!0},on),{default:u(()=>[i(ma,{size:"18",color:"primary"},{default:u(()=>[...ue[59]||(ue[59]=[v("img",{src:m_},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),i(nt,{text:"Remove Procedure"},{activator:u(({props:on})=>[i(Un,Ie({size:"small",icon:"",variant:"text",onClick:Bn=>et(ft),class:"edit-icon-btn"},{ref_for:!0},on),{default:u(()=>[i(ma,{size:"18",color:"error"},{default:u(()=>[...ue[60]||(ue[60]=[v("img",{src:Fc},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024),i(Et,{"no-gutters":"",align:"center",class:"mt-1"},{default:u(()=>[i(Xe,{cols:"5",class:"pr-2"},{default:u(()=>[v("div",O4e,[i(Qn,{size:"small",color:bn(ft.status),variant:"outlined",density:"compact",class:"text-caption"},{default:u(()=>[N(K((ft.status||"proposed").charAt(0).toUpperCase()+(ft.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])])]),_:2},1024),i(Xe,{cols:"2",class:"px-1"}),i(Xe,{cols:"2",class:"px-1"}),i(Xe,{cols:"2",class:"px-1"},{default:u(()=>[v("div",H4e,[ft.procedureCost&&ft.costEstimate!==ft.procedureCost?(P(),he(Qn,{key:0,size:"small",color:ft.costEstimate<ft.procedureCost?"success":"warning",variant:"outlined",density:"compact",class:"text-caption"},{default:u(()=>[N(K(ft.costEstimate<ft.procedureCost?""+(ft.procedureCost-ft.costEstimate).toLocaleString()+" off":""+(ft.costEstimate-ft.procedureCost).toLocaleString()+" markup"),1)]),_:2},1032,["color"])):ge("",!0)])]),_:2},1024),i(Xe,{cols:"1",class:"pl-1 d-flex justify-end align-center"},{default:u(()=>[v("div",$4e,[i(nt,{text:"Duplicate Procedure"},{activator:u(({props:on})=>[i(Un,Ie({size:"small",icon:"",variant:"text",onClick:Bn=>zt(ft),class:"edit-icon-btn"},{ref_for:!0},on),{default:u(()=>[i(ma,{size:"18",color:"primary"},{default:u(()=>[...ue[61]||(ue[61]=[v("img",{src:m_},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),i(nt,{text:"Remove Procedure"},{activator:u(({props:on})=>[i(Un,Ie({size:"small",icon:"",variant:"text",onClick:Bn=>et(ft),class:"edit-icon-btn"},{ref_for:!0},on),{default:u(()=>[i(ma,{size:"18",color:"error"},{default:u(()=>[...ue[62]||(ue[62]=[v("img",{src:Fc},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024)]))),128)):(P(),Ae("div",Q4e,[...ue[63]||(ue[63]=[v("p",{class:"text-subtitle-1 text-medium-emphasis"},"No procedures added yet",-1),v("p",{class:"text-caption text-medium-emphasis"},"Add procedures to create a treatment plan",-1)])]))])]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1}),i(Ar,{value:"progress",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(P(),he(Et,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[i(Xe,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[M.value.unscheduled.length>0||M.value.dateGroups.length>0?(P(),Ae(ze,{key:0},[M.value.unscheduled.length>0?(P(),Ae("div",G4e,[v("div",z4e,[i(Qn,{color:"grey",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar-remove"},{default:u(()=>[...ue[64]||(ue[64]=[N(" Unscheduled ",-1)])]),_:1}),i(Ir,{class:"ml-4"})]),(P(!0),Ae(ze,null,Jt(M.value.unscheduled,ft=>(P(),Ae("div",{key:ft.id,class:"ma-2 mb-2"},[i(Ct,{class:"form-section-card card-status-default pa-3 treatment-row"},{default:u(()=>[i(Et,{"no-gutters":"",class:"mb-2 procedure-header",onClick:on=>wn(ft.id),style:{cursor:"pointer"}},{default:u(()=>[i(Xe,{cols:"11",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[v("h5",W4e,K(ft.procedure?.procedure_name||ft.procedureName||ft.procedure_name||"Unknown Procedure"),1),v("div",K4e,[ft.location?(P(),he(Qn,{key:0,size:"small",color:"blue-grey",variant:"outlined",density:"compact"},{default:u(()=>[N(K(ft.location),1)]),_:2},1024)):ge("",!0),i(Qn,{size:"small",color:bn(ft.status),variant:"outlined",density:"compact"},{default:u(()=>[N(K((ft.status||"proposed").charAt(0).toUpperCase()+(ft.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])])]),_:2},1024),i(Xe,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[i(ma,{size:"small",color:"primary",class:"expand-hint"},{default:u(()=>[N(K(Zn(ft.id)?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),i(ss,null,{default:u(()=>[Sa(v("div",null,[i(Et,{"no-gutters":"",class:"mb-4 align-center"},{default:u(()=>[i(Xe,{cols:"12",md:"2",class:"pr-2"},{default:u(()=>[i(fr,{modelValue:ft.startDate,"onUpdate:modelValue":on=>ft.startDate=on,label:"Start Date",variant:"outlined",density:"compact",type:"date","hide-details":"",class:"date-input",onClick:ue[8]||(ue[8]=on=>on.target.showPicker&&on.target.showPicker())},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"12",md:"2",class:"px-1"},{default:u(()=>[i(fr,{modelValue:ft.endDate,"onUpdate:modelValue":on=>ft.endDate=on,label:"End Date",variant:"outlined",density:"compact",type:"date","hide-details":"",class:"date-input",onClick:ue[9]||(ue[9]=on=>on.target.showPicker&&on.target.showPicker())},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"12",md:"2",class:"px-1"},{default:u(()=>[i(Qs,{modelValue:ft.status,"onUpdate:modelValue":on=>ft.status=on,label:"Status",variant:"outlined",density:"compact",items:Q,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),i(Et,{"no-gutters":"",class:"mt-2"},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(Et,{"no-gutters":"",class:"mb-1 mx-2 align-center"},{default:u(()=>[i(Xe,{cols:"10"},{default:u(()=>[i(oo,{modelValue:ft.notes,"onUpdate:modelValue":on=>ft.notes=on,label:"Doctors Notes",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Add notes about procedure progress..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"2",class:"d-flex align-center justify-start"},{default:u(()=>[i(nt,{text:"Voice Input"},{activator:u(({props:on})=>[i(Un,Ie({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},on,{onClick:Bn=>He(ft),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),i(Et,{"no-gutters":"",class:"mt-4"},{default:u(()=>[i(Xe,{cols:"12",class:"px-2"},{default:u(()=>[i(Ct,{variant:"outlined",class:"pa-3 post-procedure-care-card"},{default:u(()=>[i(Mn,{class:"text-subtitle-2 pa-0 mb-2 text-left"},{default:u(()=>[...ue[65]||(ue[65]=[N(" Post-Procedure Care Instructions ",-1)])]),_:1}),i(Et,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(Xe,{cols:"10"},{default:u(()=>[i(pR,{"doctor-id":s.value,onPostProcedureCareSelected:on=>Te(on,ft)},null,8,["doctor-id","onPostProcedureCareSelected"])]),_:2},1024),i(Xe,{cols:"2"})]),_:2},1024),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"10"},{default:u(()=>[i(oo,{modelValue:ft.postProcedureCare,"onUpdate:modelValue":on=>ft.postProcedureCare=on,label:"Instructions",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Enter post-procedure care instructions..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"2",class:"d-flex align-center justify-start",style:{gap:"2px"}},{default:u(()=>[i(nt,{text:"Voice Input"},{activator:u(({props:on})=>[i(Un,Ie({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},on,{onClick:Bn=>Ve(ft),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024),i(nt,{text:"Share via WhatsApp"},{activator:u(({props:on})=>[i(Un,Ie({icon:"",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},on,{onClick:Bn=>Bt(ft),loading:ft.sendingWhatsApp,disabled:!ft.postProcedureCare||!ft.postProcedureCare.trim(),tabindex:"-1",class:"whatsapp-btn"}),{default:u(()=>[i(ma,{size:"small"},{default:u(()=>[...ue[66]||(ue[66]=[v("img",{src:G0,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","loading","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),i(Et,{"no-gutters":"",class:"mt-4"},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex justify-start px-2"},{default:u(()=>[i(Un,{color:"primary",variant:"flat",size:"small",class:"btn-hover-enhanced",loading:ft.isUpdating,onClick:gn(on=>Xt(ft),["stop"])},{default:u(()=>[...ue[67]||(ue[67]=[N(" Save ",-1)])]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024)],512),[[fi,Zn(ft.id)]])]),_:2},1024)]),_:2},1024)]))),128))])):ge("",!0),(P(!0),Ae(ze,null,Jt(M.value.dateGroups,(ft,on)=>(P(),Ae("div",{key:`date-${on}`,class:"date-section mb-4"},[v("div",{class:"date-header-vertical mb-3",style:Mt((on===0&&M.value.unscheduled.length===0?"margin-top: 16px;":"")+" margin-left: 8px;")},[i(Qn,{color:"primary",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar",title:ft.fullDate||ft.date},{default:u(()=>[N(K(ft.date),1)]),_:2},1032,["title"]),i(Ir,{class:"ml-4"})],4),(P(!0),Ae(ze,null,Jt(ft.procedures,Bn=>(P(),Ae("div",{key:Bn.id,class:"ma-2 mb-2"},[i(Ct,{class:"form-section-card card-status-default pa-3 treatment-row"},{default:u(()=>[i(Et,{"no-gutters":"",class:"mb-2 procedure-header",onClick:Ma=>wn(Bn.id),style:{cursor:"pointer"}},{default:u(()=>[i(Xe,{cols:"11",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[v("h5",j4e,K(Bn.procedure?.procedure_name||Bn.procedureName||Bn.procedure_name||"Unknown Procedure"),1),v("div",q4e,[Bn.location?(P(),he(Qn,{key:0,size:"small",color:"blue-grey",variant:"outlined",density:"compact"},{default:u(()=>[N(K(Bn.location),1)]),_:2},1024)):ge("",!0),i(Qn,{size:"small",color:bn(Bn.status),variant:"outlined",density:"compact"},{default:u(()=>[N(K((Bn.status||"proposed").charAt(0).toUpperCase()+(Bn.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])])]),_:2},1024),i(Xe,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[i(ma,{size:"small",color:"primary",class:"expand-hint"},{default:u(()=>[N(K(Zn(Bn.id)?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),i(ss,null,{default:u(()=>[Sa(v("div",null,[i(Et,{"no-gutters":"",class:"mb-4 align-center"},{default:u(()=>[i(Xe,{cols:"12",md:"2",class:"pr-2"},{default:u(()=>[i(fr,{modelValue:Bn.startDate,"onUpdate:modelValue":Ma=>Bn.startDate=Ma,label:"Start Date",variant:"outlined",density:"compact",type:"date","hide-details":"",class:"date-input",onClick:ue[10]||(ue[10]=Ma=>Ma.target.showPicker&&Ma.target.showPicker())},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"12",md:"2",class:"px-1"},{default:u(()=>[i(fr,{modelValue:Bn.endDate,"onUpdate:modelValue":Ma=>Bn.endDate=Ma,label:"End Date",variant:"outlined",density:"compact",type:"date","hide-details":"",class:"date-input",onClick:ue[11]||(ue[11]=Ma=>Ma.target.showPicker&&Ma.target.showPicker())},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"12",md:"2",class:"px-1"},{default:u(()=>[i(Qs,{modelValue:Bn.status,"onUpdate:modelValue":Ma=>Bn.status=Ma,label:"Status",variant:"outlined",density:"compact",items:Q,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),i(Et,{"no-gutters":"",class:"mt-2"},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(Et,{"no-gutters":"",class:"mb-1 mx-2 align-center"},{default:u(()=>[i(Xe,{cols:"10"},{default:u(()=>[i(oo,{modelValue:Bn.notes,"onUpdate:modelValue":Ma=>Bn.notes=Ma,label:"Doctors Notes",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Add notes about procedure progress..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"2",class:"d-flex align-center justify-start"},{default:u(()=>[i(nt,{text:"Voice Input"},{activator:u(({props:Ma})=>[i(Un,Ie({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},Ma,{onClick:lu=>He(Bn),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),i(Et,{"no-gutters":"",class:"mt-4"},{default:u(()=>[i(Xe,{cols:"12",class:"px-2"},{default:u(()=>[i(Ct,{variant:"outlined",class:"pa-3 post-procedure-care-card"},{default:u(()=>[i(Mn,{class:"text-subtitle-2 pa-0 mb-2 text-left"},{default:u(()=>[...ue[68]||(ue[68]=[N(" Post-Procedure Care Instructions ",-1)])]),_:1}),i(Et,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(Xe,{cols:"10"},{default:u(()=>[i(pR,{"doctor-id":s.value,onPostProcedureCareSelected:Ma=>Te(Ma,Bn)},null,8,["doctor-id","onPostProcedureCareSelected"])]),_:2},1024),i(Xe,{cols:"2"})]),_:2},1024),i(Et,{"no-gutters":""},{default:u(()=>[i(Xe,{cols:"10"},{default:u(()=>[i(oo,{modelValue:Bn.postProcedureCare,"onUpdate:modelValue":Ma=>Bn.postProcedureCare=Ma,label:"Instructions",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Enter post-procedure care instructions..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(Xe,{cols:"2",class:"d-flex align-center justify-start",style:{gap:"2px"}},{default:u(()=>[i(nt,{text:"Voice Input"},{activator:u(({props:Ma})=>[i(Un,Ie({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},Ma,{onClick:lu=>Ve(Bn),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024),i(nt,{text:"Share via WhatsApp"},{activator:u(({props:Ma})=>[i(Un,Ie({icon:"",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},Ma,{onClick:lu=>Bt(Bn),loading:Bn.sendingWhatsApp,disabled:!Bn.postProcedureCare||!Bn.postProcedureCare.trim(),tabindex:"-1",class:"whatsapp-btn"}),{default:u(()=>[i(ma,{size:"small"},{default:u(()=>[...ue[69]||(ue[69]=[v("img",{src:G0,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","loading","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),i(Et,{"no-gutters":"",class:"mt-4"},{default:u(()=>[i(Xe,{cols:"12",class:"d-flex justify-start px-2"},{default:u(()=>[i(Un,{color:"primary",variant:"flat",size:"small",class:"btn-hover-enhanced",loading:Bn.isUpdating,onClick:gn(Ma=>Xt(Bn),["stop"])},{default:u(()=>[...ue[70]||(ue[70]=[N(" Save ",-1)])]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024)],512),[[fi,Zn(Bn.id)]])]),_:2},1024)]),_:2},1024)]))),128))]))),128))],64)):(P(),Ae("div",Y4e,[i(ma,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...ue[71]||(ue[71]=[v("img",{src:NE},null,-1)])]),_:1}),ue[72]||(ue[72]=v("p",{class:"text-subtitle-1 text-medium-emphasis"},"No procedures to track",-1)),ue[73]||(ue[73]=v("p",{class:"text-caption text-medium-emphasis"},"Add procedures to the treatment plan first",-1))]))]),_:1})]),_:1})):ge("",!0)]),_:1}),i(Ar,{value:"share",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(P(),he(Et,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(Sh,{"content-type":"treatment-plan",data:{treatmentPlan:d.value,procedureTreatments:A.value,paymentReceipts:T.value,printConfigurations:ne.value},patient:e.patient,onPdfGenerated:pt},null,8,["data","patient"])]),_:1})]),_:1})):ge("",!0)]),_:1}),i(Ar,{value:"uploads",class:"h-100"},{default:u(()=>[i(Et,{"no-gutters":"","aria-label":"toolbar",class:"h-100"},{default:u(()=>[i(Xe,{cols:"12"},{default:u(()=>[i(XH,{procedure:d.value,patient:e.patient},null,8,["procedure","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(os,{modelValue:p.value,"onUpdate:modelValue":ue[13]||(ue[13]=ft=>p.value=ft),"max-width":"500px",persistent:""},{default:u(()=>[i(CTe,{onClose:Dn,"onUpdate:procedurelist":ln})]),_:1},8,["modelValue"]),i(os,{modelValue:h.value,"onUpdate:modelValue":ue[14]||(ue[14]=ft=>h.value=ft),"max-width":"500px",persistent:""},{default:u(()=>[g.value?(P(),he(STe,{key:0,procedure:g.value,onClose:vt,onProcedureUpdated:ut},null,8,["procedure"])):ge("",!0)]),_:1},8,["modelValue"]),i(os,{modelValue:y.value,"onUpdate:modelValue":ue[15]||(ue[15]=ft=>y.value=ft),"max-width":"500px",persistent:""},{default:u(()=>[_.value&&y.value?(P(),he(ETe,{key:0,"procedure-treatment":_.value,"treatment-plan-id":e.treatmentPlan?.id,onClose:Wt,onDeleted:_n},null,8,["procedure-treatment","treatment-plan-id"])):ge("",!0)]),_:1},8,["modelValue"]),i(l0,{modelValue:te.value,"onUpdate:modelValue":ue[16]||(ue[16]=ft=>te.value=ft),"current-text":q.value?.notes||"",label:"Progress Notes",onTranscriptionComplete:Re},null,8,["modelValue","current-text"]),i(l0,{modelValue:ce.value,"onUpdate:modelValue":ue[17]||(ue[17]=ft=>ce.value=ft),"current-text":le.value?.postProcedureCare||"",label:"Post-Procedure Care Instructions",onTranscriptionComplete:$e},null,8,["modelValue","current-text"]),i(os,{modelValue:D.value,"onUpdate:modelValue":ue[18]||(ue[18]=ft=>D.value=ft),"max-width":"800",persistent:""},{default:u(()=>[i(GTe,{treatmentPlanName:d.value?.treatmentPlanName||"",notes:d.value?.notes||"",procedureList:A.value||[],doctorId:s.value,onClose:at,"onUpdate&close":mt},null,8,["treatmentPlanName","notes","procedureList","doctorId"])]),_:1},8,["modelValue"]),i(os,{modelValue:x.value,"onUpdate:modelValue":ue[19]||(ue[19]=ft=>x.value=ft),"max-width":"50%",persistent:""},{default:u(()=>[i(LH,{"entity-type":"treatmentPlan","entity-id":e.treatmentPlan?.id,"existing-referral":E.value,"doctor-id":s.value,onClose:Fe,onReferralSaved:ye},null,8,["entity-id","existing-referral","doctor-id"])]),_:1},8,["modelValue"]),i(os,{modelValue:U.value,"onUpdate:modelValue":ue[20]||(ue[20]=ft=>U.value=ft),"max-width":"800",persistent:""},{default:u(()=>[L.value?(P(),he(e4e,{key:0,selectedTemplate:L.value,procedureList:A.value||[],onClose:Be,"onUpdate&close":Ye},null,8,["selectedTemplate","procedureList"])):ge("",!0)]),_:1},8,["modelValue"]),i(pa,{modelValue:G.value.show,"onUpdate:modelValue":ue[21]||(ue[21]=ft=>G.value.show=ft),color:G.value.color,class:"elevation-24"},{default:u(()=>[N(K(G.value.text),1)]),_:1},8,["modelValue","color"])],64)}}},J4e=en(X4e,[["__scopeId","data-v-b2dded05"]]),Z4e={class:"d-flex age-dob-container",style:{gap:"8px"}},eIe={class:"d-flex justify-center"},tIe={__name:"edit-patient-details",props:{patient:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=R({id:n.patient.id,name:n.patient.name||"",age:n.patient.age||"",birthDate:"",gender:n.patient.gender||"",contactNumber:n.patient.contactNumber||"",email:n.patient.email||"",address:n.patient.address||"",note:n.patient.note||""}),s=R("dob"),o=R(""),l=R(!1),c=Tn(),f=_=>{if(!_)return;let b="";if(_ instanceof Date){const S=_.getFullYear(),B=String(_.getMonth()+1).padStart(2,"0"),F=String(_.getDate()).padStart(2,"0");b=`${S}-${B}-${F}`}else typeof _=="string"&&(b=_.split("T")[0]||_);b&&(r.value.birthDate=b,p(b)),l.value=!1},d=()=>{r.value.birthDate="",o.value=""},A=R(!1),m=R(null);An(()=>{if(n.patient.birthDate){let _="";typeof n.patient.birthDate=="string"?_=n.patient.birthDate:typeof n.patient.birthDate=="number"&&(_=zve(n.patient.birthDate)),_&&(r.value.birthDate=_,s.value="dob")}else s.value="dob";m.value=JSON.stringify(r.value)}),Ge(s,_=>{_==="age"?(r.value.birthDate&&(o.value=r.value.birthDate),r.value.birthDate=""):o.value&&(r.value.birthDate=o.value)});const p=_=>{if(s.value==="dob")if(_){o.value=_;const b=lT(_);b!==null&&(r.value.age=b.toString())}else o.value=""},h=R(!1);Ge(r,()=>{m.value&&(A.value=JSON.stringify(r.value)!==m.value)},{deep:!0});const y=()=>{a("close")},g=async()=>{const _={...r.value,name:r.value.name||"",age:r.value.age||"",gender:r.value.gender||"",contactNumber:r.value.contactNumber||"",email:r.value.email||"",address:r.value.address||"",note:r.value.note||""};if(s.value==="dob"&&_.birthDate){const S=Bd(_.birthDate);S!==null?_.birthDate=S.toString():_.birthDate=""}else delete _.birthDate;const b=await Gve(_);b&&!b.error?(console.log("Patient updated successfully"),a("close",r.value)):(console.error("Error updating patient"),a("close"))};return(_,b)=>{const S=I("v-card-title"),B=I("v-col"),F=I("v-icon"),T=I("v-btn"),E=I("v-row"),x=I("v-card"),C=I("v-text-field"),D=I("v-btn-toggle"),U=I("v-date-picker"),L=I("v-menu"),H=I("v-select"),oe=I("v-textarea"),de=I("v-divider"),te=I("v-form");return P(),he(x,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[i(E,{"no-gutters":""},{default:u(()=>[i(B,{cols:"12"},{default:u(()=>[i(x,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(E,{"no-gutters":""},{default:u(()=>[i(B,{cols:"11"},{default:u(()=>[i(S,{class:"pa-0 pl-2"},{default:u(()=>[...b[14]||(b[14]=[N("Edit patient details",-1)])]),_:1})]),_:1}),i(B,{cols:"1",class:"d-flex justify-end align-center"},{default:u(()=>[i(T,{icon:"",size:"x-small",onClick:y},{default:u(()=>[i(F,null,{default:u(()=>[...b[15]||(b[15]=[v("img",{src:su,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(E,{"no-gutters":""},{default:u(()=>[i(B,{cols:"12"},{default:u(()=>[i(x,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(te,{modelValue:h.value,"onUpdate:modelValue":b[13]||(b[13]=q=>h.value=q),"validate-on":"blur"},{default:u(()=>[i(E,{"no-gutters":""},{default:u(()=>[i(B,{cols:"12",class:"my-2"},{default:u(()=>[i(C,{label:"Name *",variant:"outlined",modelValue:r.value.name,"onUpdate:modelValue":b[0]||(b[0]=q=>r.value.name=q),clearable:"",density:"compact",rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(B,{cols:"12",class:"mb-2"},{default:u(()=>[i(C,{label:"Contact Number *",variant:"outlined",modelValue:r.value.contactNumber,"onUpdate:modelValue":b[1]||(b[1]=q=>r.value.contactNumber=q),type:"tel",rules:Oe(_h),clearable:"",density:"compact"},null,8,["modelValue","rules"])]),_:1}),i(B,{cols:"12",class:"mb-2"},{default:u(()=>[v("div",Z4e,[i(D,{modelValue:s.value,"onUpdate:modelValue":b[2]||(b[2]=q=>s.value=q),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[i(T,{value:"dob",size:"small"},{default:u(()=>[...b[16]||(b[16]=[N("DOB",-1)])]),_:1}),i(T,{value:"age",size:"small"},{default:u(()=>[...b[17]||(b[17]=[N("AGE",-1)])]),_:1})]),_:1},8,["modelValue"]),s.value==="age"?(P(),he(C,{key:0,label:"Age (yrs) *",variant:"outlined",modelValue:r.value.age,"onUpdate:modelValue":b[3]||(b[3]=q=>r.value.age=q),clearable:"",density:"compact",rules:Oe(uT),disabled:!!r.value.birthDate||!!o.value,class:"flex-grow-1"},null,8,["modelValue","rules","disabled"])):(P(),he(L,{key:1,modelValue:l.value,"onUpdate:modelValue":b[7]||(b[7]=q=>l.value=q),"close-on-content-click":!1,transition:"scale-transition","offset-y":"",class:"flex-grow-1"},{activator:u(({props:q})=>[i(C,Ie(q,{label:"Date of Birth *",variant:"outlined",modelValue:r.value.birthDate,"onUpdate:modelValue":b[4]||(b[4]=ce=>r.value.birthDate=ce),readonly:"",clearable:"",density:"compact",rules:Oe(cT),class:"flex-grow-1 date-input dob-input","onClick:clear":d,onKeydown:[b[5]||(b[5]=Yd(ce=>l.value=!0,["enter"])),b[6]||(b[6]=Yd(gn(ce=>l.value=!0,["prevent"]),["space"]))]}),{"append-inner":u(()=>[i(F,{class:"text-medium-emphasis"},{default:u(()=>[...b[18]||(b[18]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","rules"])]),default:u(()=>[i(U,{"model-value":r.value.birthDate||Oe(c),"onUpdate:modelValue":f,color:"primary",locale:"en-IN",max:Oe(Tn)(),"view-mode":"year"},null,8,["model-value","max"])]),_:1},8,["modelValue"]))])]),_:1}),i(B,{cols:"12",class:"mb-2"},{default:u(()=>[i(H,{modelValue:r.value.gender,"onUpdate:modelValue":b[8]||(b[8]=q=>r.value.gender=q),items:["Male","Female"],label:"Gender *",required:"",clearable:"",variant:"outlined",density:"compact",rules:Oe(dT)},null,8,["modelValue","rules"])]),_:1}),i(B,{cols:"12",class:"mb-2"},{default:u(()=>[i(C,{label:"Email (optional)",variant:"outlined",modelValue:r.value.email,"onUpdate:modelValue":b[9]||(b[9]=q=>r.value.email=q),clearable:"",density:"compact",rules:Oe(Rg)},null,8,["modelValue","rules"])]),_:1}),i(B,{cols:"12",class:"mb-2"},{default:u(()=>[i(C,{label:"Address (optional)",variant:"outlined",modelValue:r.value.address,"onUpdate:modelValue":b[10]||(b[10]=q=>r.value.address=q),clearable:"",density:"compact"},null,8,["modelValue"])]),_:1}),i(B,{cols:"12",class:"mb-2"},{default:u(()=>[i(oe,{label:"Patient Notes (optional)",variant:"outlined",modelValue:r.value.note,"onUpdate:modelValue":b[11]||(b[11]=q=>r.value.note=q),clearable:"",density:"compact",rows:"3","auto-grow":""},null,8,["modelValue"])]),_:1}),i(B,{cols:"12"},{default:u(()=>[i(de,{class:"mb-2"}),v("div",eIe,[i(T,{variant:"outlined",onClick:b[12]||(b[12]=q=>g()),disabled:!h.value&&!A.value},{default:u(()=>[...b[19]||(b[19]=[N("Update Patient",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},nIe=en(tIe,[["__scopeId","data-v-6ba2ce47"]]),aIe={__name:"delete-consultation",props:{deleteConsult:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=R(n.deleteConsult),s=()=>{a("close")},o=async l=>{l.status="CANCELLED";const c=await QM(l);c.error?console.error("Consultation delete failed",c.error):console.error("Consultation delete successful"),s()};return(l,c)=>{const f=I("v-card-title"),d=I("v-col"),A=I("v-icon"),m=I("v-btn"),p=I("v-row"),h=I("v-card"),y=I("v-card-text"),g=I("v-divider");return P(),he(h,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(h,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"11"},{default:u(()=>[i(f,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[N("Confirm Consultation Delete",-1)])]),_:1})]),_:1}),i(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[i(A,null,{default:u(()=>[...c[2]||(c[2]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(h,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[N(" Are you sure you want to delete this consultation? You will not be able to recover data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),i(g),i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"2"}),i(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(m,{variant:"outlined",onClick:c[0]||(c[0]=_=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[N("Yes, Delete Consultation",-1)])]),_:1})]),_:1}),i(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},rIe={class:"text-center"},sIe={class:"patient-header w-100"},oIe={class:"d-flex align-center flex-wrap justify-center"},iIe={class:"text-body-2 font-weight-bold"},lIe={class:"text-subtitle-2 ml-2 text-medium-emphasis"},uIe={key:0,class:"patient-note-inline-same-row"},cIe={class:"text-caption text-black font-style-italic"},dIe={key:1,class:"patient-note-inline-same-row",style:{opacity:"0.7"}},fIe={class:"scrollable-content"},AIe={class:"d-flex justify-start section-header"},mIe={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},vIe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},hIe={key:0},pIe={key:1,class:"text-caption text-medium-emphasis"},gIe={class:"d-flex align-center justify-center"},yIe={key:1,class:"text-center pa-4"},_Ie={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},wIe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},bIe={class:"text-caption text-medium-emphasis mb-1"},xIe={class:"d-flex align-center justify-center"},CIe={key:2,class:"text-center pa-4"},SIe={class:"scrollable-content"},EIe={__name:"patient-detail-page",setup(e){const t=Ln(),n=WA(),a=ml(),{hasPermission:r}=gh(),s=R(n.params.id),o=R([]),l=R([]),c=R(!0),f=R({}),d=R({}),A=R(!1),m=R(""),p=R(!1),h=R(""),y=ee(()=>t.state.doctorModule.doctorId),g=R(null),_=R(null),b=R(!0),S=ee(()=>t.getters["doctorModule/isProcedurePrimary"]),B=ee(()=>{const _e=d.value;if(!_e)return"";const Se=_e.birthDate?Ug(_e.birthDate):_e.age!=null&&_e.age!==""?_e.age:null;return qv(Se)}),F=ee(()=>{const _e=[],Se=n.query.from;return Se==="patients-landing-page"?_e.push({text:"Patients",to:{path:"/patients"},icon:"mdi-arrow-left",iconClass:"mr-1"}):Se==="research"?_e.push({text:"Research",to:{path:"/research"},icon:"mdi-arrow-left",iconClass:"mr-1"}):Se==="data"?_e.push({text:"Data",to:{path:"/data"},icon:"mdi-arrow-left",iconClass:"mr-1"}):Se==="home"?_e.push({text:"Home",to:{path:"/home"},icon:"mdi-arrow-left",iconClass:"mr-1"}):_e.push({text:"Patients",to:{path:"/patients"},icon:"mdi-arrow-left",iconClass:"mr-1"}),_e}),T=R("consultations"),E=R([]),x=R({id:"0"}),C=R(!1),D=R(!1);Ge(y,async(_e,Se)=>{if(_e&&Se&&_e!==Se&&d.value?.id){console.log(" Doctor changed from",Se,"to",_e,"- refreshing consultations and procedures");try{const Ee=await u_(d.value.id,_e);Ee.error||(o.value=Kn.cloneDeep(Ee.data)),await M(),await J(),x.value={id:"0"},C.value=!1}catch(Ee){console.error("Error refreshing data after doctor change:",Ee),p.value=!0,h.value="Failed to refresh data for new doctor"}}}),tu(async()=>{try{if(T.value=S.value?"procedures":"consultations",await Q(),!s.value)throw new Error("No patient ID provided");if(!y.value)throw new Error("No doctor ID available - please select a doctor first");console.log(" Initializing patient detail page - Patient:",s.value,"Doctor:",y.value);const _e=await oT(s.value);if(_e.error)throw new Error(`Failed to load patient: ${_e.error.message}`);d.value=Kn.cloneDeep(_e.data),console.log(" Fetching consultations for patient:",d.value.id,"doctor:",y.value);const Se=await u_(d.value.id,y.value);if(Se.error)throw new Error(`Failed to load consultations: ${Se.error.message}`);console.log(" Fetched consultations:",Se.data),o.value=Kn.cloneDeep(Se.data),te(),await M(),await J()}catch(_e){console.error("Error in onBeforeMount:",_e),_.value=_e.message||"Failed to load patient data"}finally{b.value=!1}}),An(async()=>{window.dispatchEvent(new CustomEvent("collapse-side-nav",{detail:!0})),console.log("Consultations on Mount",o.value),console.log("Patient Details on mount",d.value),document.addEventListener("keydown",O)}),ha(async()=>{window.dispatchEvent(new CustomEvent("collapse-side-nav",{detail:!1})),document.removeEventListener("keydown",O)});const U=R(!1),L=R(!1),H=_e=>{if(!_e){console.error("No consultation provided for deletion"),p.value=!0,h.value="Cannot delete: Invalid consultation";return}U.value=!0,g.value=_e,console.log("Selected Consultation for Deletion:",_e)},oe=async()=>{try{g.value&&l.value&&g.value.id===l.value.id&&await J(),U.value=!1,setTimeout(()=>{g.value=null},100)}catch(_e){console.error("Error handling consultation delete close:",_e),p.value=!0,h.value="Error refreshing after deletion",U.value=!1,setTimeout(()=>{g.value=null},100)}},de=async _e=>{try{L.value=!1,_e&&(d.value=Kn.cloneDeep(_e),A.value=!0,m.value="Patient details updated successfully",console.log("Patient details updated:",_e))}catch(Se){console.error("Error updating patient details:",Se),p.value=!0,h.value="Failed to update patient details"}},te=()=>{if(!Array.isArray(o.value)||o.value.length===0)return;o.value.length>50?window.requestIdleCallback?requestIdleCallback(()=>{_e()}):setTimeout(()=>{_e()},0):_e();function _e(){o.value.sort((Se,Ee)=>!Se.consultationDate&&!Ee.consultationDate?0:Se.consultationDate?Ee.consultationDate?new Date(Ee.consultationDate)-new Date(Se.consultationDate):-1:1),console.log(" Sorted consultations chronologically:",o.value)}},q=ee(()=>!Array.isArray(o.value)||o.value.length===0?!1:o.value.some(_e=>_e?.consultationDate&&G(_e))),ce=_e=>{if(!_e)return 0;const Se=new Date().toLocaleDateString("en-CA"),Ee=new Date(_e),je=new Date(Se)-Ee;return Math.floor(je/(1e3*60*60*24))},le=_e=>{if(!_e)return{text:"No date",class:"consultation-date-text"};const Se=new Date(_e).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",year:"numeric"}),Ee=ce(_e);let Ue="",je="consultation-date-text";return Ee===0?(Ue="Today",je+=" date-today"):Ee>0?(Ue=`${Ee}d ago`,je+=" date-past"):(Ue=`${Math.abs(Ee)}d to go`,je+=" date-future"),{text:`${Se}  ${Ue}`,class:je}},Z=_e=>{if(!_e)return!1;const Se=new Date().toLocaleDateString("en-CA");return _e===Se},ne=_e=>{if(!_e)return!1;const Se=new Date().toLocaleDateString("en-CA"),Ee=new Date(_e),Ue=new Date(Se);return Ee>Ue},G=_e=>{if(!_e?.consultationDate||!_e?.status)return!1;const Se=_e.consultationDate,Ee=_e.status;return(Z(Se)||ne(Se))&&Ee==="CREATED"||Ee==="UPDATED"},W=ee(()=>!Array.isArray(o.value)||o.value.length===0?!1:o.value.some(_e=>Z(_e.consultationDate)&&(_e?.status==="UPDATED"||_e?.status==="CREATED"))),Q=async()=>{try{if(await a.isReady(),s.value=n.params.id,!s.value)throw new Error("No patient ID found in URL parameters")}catch(_e){throw console.error("Error extracting URL parameters:",_e),_.value="Invalid patient URL",_e}},O=_e=>{if(_e.key==="Escape"){if(window.dictationModalActive)return;const Se=document.activeElement;if(Se&&(Se.tagName==="INPUT"||Se.tagName==="TEXTAREA"||Se.isContentEditable||Se.closest(".v-field__input")||Se.closest(".v-text-field")||Se.closest(".v-textarea")))return;_e.preventDefault(),ae()}},ae=()=>{try{const _e=n.query.from;_e==="patients-landing-page"?a.push("/patients"):_e==="research"?a.push("/research"):_e==="data"?a.push("/data"):_e==="home"?a.push("/home"):a.push("/patients"),console.log(" Navigating back from ESC shortcut to:",_e||"patients (default)")}catch(_e){console.error("Error in back navigation:",_e),a.push("/patients")}},j=async()=>{try{if(!s.value||!y.value)throw new Error("Missing patient or doctor information");const _e=new Date().toLocaleDateString("en-CA");await sT(s.value,y.value,_e);const Se=await u_(s.value,y.value);if(Se.error)throw new Error(`Failed to refresh consultations: ${Se.error.message}`);o.value=Kn.cloneDeep(Se.data),te(),await J(),console.log("New consultation created"),A.value=!0,m.value="New consultation created successfully"}catch(_e){console.error("Error creating consultation:",_e),p.value=!0,h.value=_e.message||"Failed to create consultation"}},J=async()=>{try{if(o.value&&o.value.length>0){const _e=o.value.filter(Se=>Se?.consultationDate&&G(Se));_e.length>0?(l.value=_e[0],console.log("Selected most recent visible consultation:",l.value)):(console.log("No visible consultations available"),l.value={id:"0"})}else console.log("No consultations available"),l.value={id:"0"};c.value=Z(l.value?.consultationDate)}catch(_e){console.error("Error selecting most recent consultation:",_e),l.value={id:"0"},c.value=!1}},ie=_e=>{if(!_e){console.error("No consultation provided to selectArtefact");return}if(!G(_e)){console.warn("Attempted to select a consultation that should not be visible:",_e);return}l.value=_e,c.value=!1,C.value=!1,console.log("Selected Artefact:",l.value)},X=_e=>{if(!_e?.id){console.error("Invalid consultation provided for update");return}const Se=o.value.findIndex(Ee=>Ee?.id===_e.id);Se!==-1&&(o.value[Se]=_e),console.log("Updated Consultation:",l.value)},fe=_e=>{if(!_e){console.error("No consultation provided to copy"),p.value=!0,h.value="Failed to copy consultation details";return}try{f.value=Kn.cloneDeep(_e),A.value=!0,m.value="Details copied to new consultation",console.log("Copied Artefact:",f.value)}catch(Se){console.error("Error copying consultation:",Se),p.value=!0,h.value="Failed to copy consultation details"}},M=async()=>{if(!d.value.id||!y.value){console.warn("Patient ID or Doctor ID not available for loading procedures");return}D.value=!0;try{console.log(" Fetching procedures for patient:",d.value.id,"doctor:",y.value);const _e=await AT(d.value.id,y.value);if(_e.error)throw new Error(`Failed to load treatment plans: ${_e.error.message}`);console.log(" Fetched procedures:",_e.data),E.value=Kn.cloneDeep(_e.data),console.log("Successfully loaded procedures:",E.value)}catch(_e){console.error("Error loading procedures:",_e),E.value=[],p.value=!0,h.value=`Failed to load treatment plans: ${_e.message}`}finally{D.value=!1}},z=async()=>{if(!d.value.id||!y.value){p.value=!0,h.value="Patient or doctor information missing";return}try{const _e=`New Treatment Plan ${new Date().toLocaleDateString()}`,Se=await lE(d.value.id,y.value,_e,"","","");if(Se.error)throw new Error(`Failed to create procedure: ${Se.error.message}`);await M(),x.value=Se.data,C.value=!0,A.value=!0,m.value="New treatment plan created successfully",console.log("Created new procedure:",Se.data)}catch(_e){console.error("Error creating procedure:",_e),p.value=!0,h.value=_e.message||"Failed to create treatment plan"}},se=_e=>{if(!_e){console.error("No procedure provided to selectProcedure");return}x.value=_e,C.value=!0,console.log("Selected Procedure:",x.value)},be=_e=>{if(!_e?.id){console.error("Invalid procedure provided for update");return}const Se=E.value.findIndex(Ee=>Ee?.id===_e.id);Se!==-1&&(E.value[Se]=_e,x.value=_e),console.log("Updated Procedure:",x.value)},Fe=async _e=>{if(!d.value.id||!y.value){p.value=!0,h.value="Patient or doctor information missing";return}try{const Se=await lE(d.value.id,y.value,_e.treatmentPlanName||"New Treatment Plan",_e.startDate||"",_e.endDate||"",_e.notes||"");if(Se.error)throw new Error(`Failed to create procedure: ${Se.error.message}`);await M(),x.value=Se.data,A.value=!0,m.value="Treatment plan created successfully",console.log("Created procedure from window:",Se.data)}catch(Se){console.error("Error creating procedure from window:",Se),p.value=!0,h.value=Se.message||"Failed to create treatment plan"}},ye=async _e=>{if(!_e?.id){console.error("No procedure provided for deletion"),p.value=!0,h.value="Cannot delete: Invalid treatment plan";return}if(confirm(`Are you sure you want to delete the treatment plan "${_e.treatmentPlanName}"?`))try{const Se=await tO(_e.id);if(Se.error){const Ee=Se.error.message||Se.error.response?.data?.error||"Failed to delete treatment plan";throw new Error(Ee)}await M(),x.value?.id===_e.id&&(x.value={id:"0"},C.value=!1),A.value=!0,m.value="Treatment plan deleted successfully",console.log("Deleted procedure:",_e.id)}catch(Se){console.error("Error deleting procedure:",Se),p.value=!0,h.value=Se.message||"Failed to delete treatment plan"}},Qe=_e=>{if(!_e)return{text:"No data",class:"procedure-date-text"};let Se="",Ee="",Ue="procedure-date-text";const je=mt=>mt?new Date(mt).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",year:"numeric"}):null;return _e.status&&(Ee=_e.status,_e.status.toLowerCase()==="completed"&&(Ue+=" status-completed")),_e.startDate&&_e.endDate?Se=`${je(_e.startDate)}  ${je(_e.endDate)}`:_e.startDate?Se=`Start: ${je(_e.startDate)}`:_e.endDate?Se=`End: ${je(_e.endDate)}`:_e.createdAt?Se=`Created: ${je(_e.createdAt)}`:Se="No date available",{text:Ee?`${Ee}  ${Se}`:Se,class:Ue}};return(_e,Se)=>{const Ee=I("v-alert"),Ue=I("v-progress-circular"),je=I("v-col"),at=I("v-row"),mt=I("v-icon"),xe=I("v-breadcrumbs-item"),Be=I("v-breadcrumbs"),Ye=I("v-card-title"),kt=I("v-btn"),xt=I("v-tooltip"),Nt=I("v-card"),At=I("v-tab"),Ot=I("v-tabs"),Dt=I("v-card-text"),bt=I("v-tabs-window-item"),Ze=I("v-tabs-window"),qt=I("v-dialog"),Vt=I("v-snackbar");return P(),Ae(ze,null,[_.value?(P(),he(Ee,{key:0,type:"error",dismissible:"","onClick:close":Se[0]||(Se[0]=zt=>_.value=null),class:"ma-3"},{default:u(()=>[N(K(_.value),1)]),_:1})):ge("",!0),b.value?(P(),he(at,{key:1,"no-gutters":"",class:"pa-3",style:{height:"100%"}},{default:u(()=>[i(je,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[v("div",rIe,[i(Ue,{indeterminate:"",color:"primary",size:"64"}),Se[8]||(Se[8]=v("div",{class:"mt-4 text-subtitle-1"},"Loading patient details...",-1))])]),_:1})]),_:1})):_.value?ge("",!0):(P(),Ae(ze,{key:2},[i(at,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[i(je,{cols:"12"},{default:u(()=>[i(Nt,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[v("div",sIe,[i(at,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(je,{cols:"2",class:"d-flex justify-start"},{default:u(()=>[i(Be,{density:"default",class:"pa-0 breadcrumb-enhanced"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(F.value,(zt,ln)=>(P(),he(xe,{key:ln,to:zt.to,disabled:zt.disabled,class:"text-subtitle-2 font-weight-medium breadcrumb-item-enhanced"},{default:u(()=>[zt.icon?(P(),he(mt,{key:0,start:zt.iconPosition!=="end",end:zt.iconPosition==="end",size:"default",color:"primary",class:lt(zt.iconClass)},{default:u(()=>[N(K(zt.icon),1)]),_:2},1032,["start","end","class"])):ge("",!0),N(" "+K(zt.text),1)]),_:2},1032,["to","disabled"]))),128))]),_:1})]),_:1}),i(je,{cols:"10",class:"d-flex justify-center"},{default:u(()=>[v("div",oIe,[i(Ye,{class:"pb-2 pr-2"},{default:u(()=>[v("span",iIe,K((d.value?.name||"Unknown Patient").length>40?(d.value?.name||"Unknown Patient").slice(0,40)+"":d.value?.name||"Unknown Patient"),1),v("span",lIe," ID: "+K(d.value?.id||"N/A")+"  "+K(d.value?.gender||"Unknown")+K(B.value?`, ${B.value}`:"")+K(d.value?.importID?`  Import ID: ${d.value.importID}`:""),1)]),_:1}),d.value?.note&&d.value.note.trim()!==""?(P(),Ae("div",uIe,[v("span",cIe,K(d.value.note),1)])):(P(),Ae("div",dIe,[...Se[9]||(Se[9]=[v("span",{class:"text-caption text-medium-emphasis font-style-italic"},"no special note",-1)])])),i(En,{permission:"patients.edit"},{default:u(()=>[i(xt,{text:"Edit Patient Details"},{activator:u(({props:zt})=>[i(kt,Ie({color:"primary",variant:"text",size:"small"},zt,{onClick:Se[1]||(Se[1]=ln=>L.value=!0),icon:"",tabindex:"-1",class:"ml-2"}),{default:u(()=>[i(mt,null,{default:u(()=>[...Se[10]||(Se[10]=[v("img",{src:Cv},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),i(at,{"no-gutters":"","aria-label":"main row",class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[i(je,{cols:"3",order:"1","aria-label":"list column",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",fIe,[i(Nt,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[v("div",AIe,[i(Ot,{modelValue:T.value,"onUpdate:modelValue":Se[2]||(Se[2]=zt=>T.value=zt),density:"compact",class:"mb-2"},{default:u(()=>[S.value?(P(),Ae(ze,{key:0},[Oe(r)("home.queue.patient").value||Oe(r)("patients.details").value?(P(),he(At,{key:0,value:"procedures",tabindex:"-1"},{default:u(()=>[...Se[11]||(Se[11]=[N(" Procedure ",-1)])]),_:1})):ge("",!0),Oe(r)("home.queue.patient").value||Oe(r)("patients.details").value?(P(),he(At,{key:1,value:"consultations",tabindex:"-1"},{default:u(()=>[...Se[12]||(Se[12]=[N(" Consultation ",-1)])]),_:1})):ge("",!0)],64)):(P(),Ae(ze,{key:1},[Oe(r)("home.queue.patient").value||Oe(r)("patients.details").value?(P(),he(At,{key:0,value:"consultations",tabindex:"-1"},{default:u(()=>[...Se[13]||(Se[13]=[N(" Consultation ",-1)])]),_:1})):ge("",!0),Oe(r)("home.queue.patient").value||Oe(r)("patients.details").value?(P(),he(At,{key:1,value:"procedures",tabindex:"-1"},{default:u(()=>[...Se[14]||(Se[14]=[N(" Procedure ",-1)])]),_:1})):ge("",!0)],64))]),_:1},8,["modelValue"])]),i(Ze,{modelValue:T.value,"onUpdate:modelValue":Se[3]||(Se[3]=zt=>T.value=zt),class:"flex-grow-1"},{default:u(()=>[i(En,{anyPermission:["home.queue.patient","patients.details"]},{default:u(()=>[i(bt,{value:"consultations",class:"h-100"},{default:u(()=>[i(at,{"no-gutters":"",class:"h-100"},{default:u(()=>[i(je,{cols:"12",class:"mt-1 h-100"},{default:u(()=>[v("div",mIe,[i(En,{permission:"consultations.create"},{default:u(()=>[W.value?ge("",!0):(P(),he(Nt,{key:0,color:"surfaceContainerHigh",density:"compact",class:"ma-2",rounded:"lg"},{default:u(()=>[i(Dt,{class:"pa-3"},{default:u(()=>[i(kt,{color:"primary",variant:"flat",block:"",onClick:j,disabled:!d.value?.id||!y.value},{default:u(()=>[...Se[15]||(Se[15]=[N(" Create New Consultation ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}))]),_:1}),q.value?(P(!0),Ae(ze,{key:0},Jt(o.value,zt=>(P(),Ae(ze,{key:zt.id},[zt?.consultationDate&&G(zt)?(P(),he(Nt,{key:0,style:Mt([{textAlign:"left"},{cursor:"pointer"}]),class:lt([{"card-status-selected":l.value?.id===zt.id,"card-status-default":l.value?.id!==zt.id},"mx-2 mt-1 mb-2 card-enhanced card-hover-base"]),density:"compact",rounded:"lg",onClick:ln=>ie(zt)},{default:u(()=>[i(at,{"no-gutters":""},{default:u(()=>[i(je,{cols:"12"},{default:u(()=>[i(Ye,{class:"pb-0 pt-2"},{default:u(()=>[v("div",vIe,K(zt?.diagnosis||"No diagnosis"),1)]),_:2},1024),i(at,{"no-gutters":""},{default:u(()=>[i(je,{cols:"12"},{default:u(()=>[i(Dt,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[Se[16]||(Se[16]=v("span",{class:"text-caption text-medium-emphasis font-weight-bold"},"Rx: ",-1)),zt?.medicines&&zt.medicines.length>0?(P(!0),Ae(ze,{key:0},Jt(zt.medicines,ln=>(P(),Ae(ze,{key:ln?.id||ln},[N(K(ln?.productName||"Unknown medicine")+" ",1),zt.medicines&&zt.medicines.length>1&&zt.medicines.indexOf(ln)!==zt.medicines.length-1?(P(),Ae("span",hIe,", ")):ge("",!0)],64))),128)):(P(),Ae("span",pIe,"No medicines prescribed"))]),_:2},1024)]),_:2},1024),zt?.investigations&&zt.investigations.trim()!==""?(P(),he(je,{key:0,cols:"12"},{default:u(()=>[i(Dt,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[Se[17]||(Se[17]=v("span",{class:"text-caption text-medium-emphasis font-weight-bold"},"Investigations: ",-1)),N(K(zt.investigations),1)]),_:2},1024)]),_:2},1024)):ge("",!0),i(je,{cols:"12",class:"d-flex align-center justify-space-between action-row-highlight pa-3 ma-0"},{default:u(()=>[i(Dt,{class:"pa-0"},{default:u(()=>[v("span",{class:lt(le(zt.consultationDate).class)},K(le(zt.consultationDate).text),3)]),_:2},1024),v("div",gIe,[i(xt,{text:Z(zt.consultationDate)||ne(zt.consultationDate)?"Cannot copy from today's or future consultations":"Copy to Most Recent"},{activator:u(({props:ln})=>[i(kt,Ie({onClick:gn(Dn=>fe(zt),["stop"]),variant:"plain"},{ref_for:!0},ln,{size:"small",color:"primary",disabled:l.value?.id===zt.id||Z(zt.consultationDate)||ne(zt.consultationDate),class:"btn-hover-base mr-1"}),{default:u(()=>[i(mt,{size:"medium"},{default:u(()=>[...Se[18]||(Se[18]=[v("img",{src:tEe},null,-1)])]),_:1})]),_:1},16,["onClick","disabled"])]),_:2},1032,["text"]),i(En,{permission:"consultations.delete"},{default:u(()=>[i(xt,{text:Z(zt.consultationDate)?"Cannot delete today's consultation":"Delete Consultation"},{activator:u(({props:ln})=>[i(kt,Ie({color:"secondary",variant:"plain",size:"small"},{ref_for:!0},ln,{onClick:gn(Dn=>H(zt),["stop"]),disabled:Z(zt.consultationDate),class:"btn-hover-base"}),{default:u(()=>[i(mt,{size:"medium"},{default:u(()=>[...Se[19]||(Se[19]=[v("img",{src:Fc},null,-1)])]),_:1})]),_:1},16,["onClick","disabled"])]),_:2},1032,["text"])]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","onClick"])):ge("",!0)],64))),128)):(P(),Ae("div",yIe,[i(mt,{size:"48",color:"primary",class:"mb-2"},{default:u(()=>[...Se[20]||(Se[20]=[v("img",{src:NE},null,-1)])]),_:1}),Se[21]||(Se[21]=v("p",{class:"text-subtitle-2 text-medium-emphasis"},"No consultations yet",-1)),Se[22]||(Se[22]=v("p",{class:"text-caption text-medium-emphasis"},"Create a consultation to get started",-1))]))])]),_:1})]),_:1})]),_:1})]),_:1}),i(En,{anyPermission:["home.queue.patient","patients.details"]},{default:u(()=>[i(bt,{value:"procedures",class:"h-100"},{default:u(()=>[i(at,{"no-gutters":"",class:"h-100"},{default:u(()=>[i(je,{cols:"12",class:"mt-1 h-100"},{default:u(()=>[v("div",_Ie,[i(En,{permission:"treatmentplans.create"},{default:u(()=>[i(Nt,{color:"surfaceContainerHigh",density:"compact",class:"ma-2",rounded:"lg"},{default:u(()=>[i(Dt,{class:"pa-3"},{default:u(()=>[i(kt,{color:"primary",variant:"flat",block:"",onClick:z,disabled:!d.value?.id||!y.value},{default:u(()=>[...Se[23]||(Se[23]=[N(" Create Treatment Plan ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),D.value?(P(),he(at,{key:0,"no-gutters":""},{default:u(()=>[i(je,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100px"}},{default:u(()=>[i(Ue,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):E.value&&E.value.length>0?(P(!0),Ae(ze,{key:1},Jt(E.value,zt=>(P(),he(Nt,{key:zt.id,style:Mt([{textAlign:"left"},{cursor:"pointer"}]),class:lt([{"card-status-selected":x.value?.id===zt.id&&C.value,"card-status-default":!(x.value?.id===zt.id&&C.value)},"ma-2 card-enhanced card-hover-base"]),density:"compact",rounded:"lg",onClick:ln=>se(zt)},{default:u(()=>[i(at,{"no-gutters":""},{default:u(()=>[i(je,{cols:"12"},{default:u(()=>[i(Ye,{class:"pb-0 pt-2"},{default:u(()=>[v("div",wIe,K(zt?.treatmentPlanName||"Unnamed Treatment Plan"),1)]),_:2},1024),i(at,{"no-gutters":""},{default:u(()=>[i(je,{cols:"12"},{default:u(()=>[i(Dt,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[v("p",bIe,K(zt?.notes||"No notes"),1)]),_:2},1024)]),_:2},1024),i(je,{cols:"12",class:"d-flex align-center justify-space-between action-row-highlight pa-3 ma-0"},{default:u(()=>[i(Dt,{class:"pa-0"},{default:u(()=>[v("span",{class:lt(Qe(zt).class),style:{"min-height":"18px",display:"inline-block"}},K(Qe(zt).text),3)]),_:2},1024),v("div",xIe,[i(En,{permission:"treatmentplans.delete"},{default:u(()=>[i(xt,{text:"Delete Treatment Plan"},{activator:u(({props:ln})=>[i(kt,Ie({color:"secondary",variant:"plain",size:"small"},{ref_for:!0},ln,{onClick:gn(Dn=>ye(zt),["stop"]),class:"btn-hover-base"}),{default:u(()=>[i(mt,{size:"medium"},{default:u(()=>[...Se[24]||(Se[24]=[v("img",{src:Fc},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128)):(P(),Ae("div",CIe,[i(mt,{size:"48",color:"primary",class:"mb-2"},{default:u(()=>[...Se[25]||(Se[25]=[v("img",{src:NE},null,-1)])]),_:1}),Se[26]||(Se[26]=v("p",{class:"text-subtitle-2 text-medium-emphasis"},"No treatment plans yet",-1)),Se[27]||(Se[27]=v("p",{class:"text-caption text-medium-emphasis"},"Create a treatment plan to get started",-1))]))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(qt,{modelValue:U.value,"onUpdate:modelValue":Se[4]||(Se[4]=zt=>U.value=zt),"max-width":"30%",persistent:""},{default:u(()=>[i(aIe,{deleteConsult:g.value,onClose:oe},null,8,["deleteConsult"])]),_:1},8,["modelValue"]),i(qt,{modelValue:L.value,"onUpdate:modelValue":Se[5]||(Se[5]=zt=>L.value=zt),"max-width":"50%",persistent:""},{default:u(()=>[i(nIe,{patient:d.value,onClose:de},null,8,["patient"])]),_:1},8,["modelValue"])]),_:1})])]),_:1}),i(je,{cols:"9",order:"2",class:"pl-1 stable-height-column","aria-label":"consultation column"},{default:u(()=>[v("div",SIe,[i(Nt,{color:"surfaceContainer",flat:"",style:{height:"100%"}},{default:u(()=>[T.value==="procedures"?(P(),he(J4e,{treatmentPlan:x.value,patient:d.value,key:x.value?.id||"new","onUpdate:treatmentPlan":be,onCreateNewTreatmentPlan:Fe},null,8,["treatmentPlan","patient"])):(P(),he(JH,{consultation:l.value,patient:d.value,key:l.value.id,consultationCopy:f.value,"onUpdate:consultation":X,onCreateNewArtefact:j},null,8,["consultation","patient","consultationCopy"]))]),_:1})])]),_:1})]),_:1}),i(Vt,{modelValue:A.value,"onUpdate:modelValue":Se[6]||(Se[6]=zt=>A.value=zt),class:"elevation-24",color:"success"},{default:u(()=>[N(K(m.value),1)]),_:1},8,["modelValue"]),i(Vt,{modelValue:p.value,"onUpdate:modelValue":Se[7]||(Se[7]=zt=>p.value=zt),class:"elevation-24",color:"failure"},{default:u(()=>[N(K(h.value),1)]),_:1},8,["modelValue"])],64))],64)}}},kIe=en(EIe,[["__scopeId","data-v-2ef86d9e"]]),BIe={__name:"edit-doctor",props:{doctor:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=t,a=R(Qw),r=e,s=R(Kn.clone(r.doctor)),o=R(!1),l=()=>{n("close")},c=async f=>{console.log("Updating doctor details",f);const d={...f,email:f.email||"",isGST:f.isGST||!1,gstIdentifier:f.gstIdentifier||"",isPharmacy:f.isPharmacy||!1},A=await lce(d);A.error?console.error("Error updating doctor details",A.error):console.error("Doctor detail update successful"),l()};return(f,d)=>{const A=I("v-card-title"),m=I("v-col"),p=I("v-icon"),h=I("v-btn"),y=I("v-row"),g=I("v-card"),_=I("v-switch"),b=I("v-card-subtitle"),S=I("v-divider"),B=I("v-text-field"),F=I("v-combobox"),T=I("v-form");return P(),he(g,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"11"},{default:u(()=>[i(A,{class:"pa-0 pl-2"},{default:u(()=>[...d[10]||(d[10]=[N("Update Doctor Details",-1)])]),_:1})]),_:1}),i(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(h,{icon:"",size:"x-small",onClick:l},{default:u(()=>[i(p,null,{default:u(()=>[...d[11]||(d[11]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(g,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(T,{modelValue:o.value,"onUpdate:modelValue":d[9]||(d[9]=E=>o.value=E),"validate-on":"blur"},{default:u(()=>[i(y,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(_,{modelValue:s.value.procedurePrimary,"onUpdate:modelValue":d[0]||(d[0]=E=>s.value.procedurePrimary=E),label:"Procedure-Primary Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),i(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[12]||(d[12]=[N(" Enable this for procedure-centric practices. ",-1)])]),_:1})]),_:1})]),_:1}),i(S,{class:"mb-3"}),i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(B,{label:"Doctor Name (Dr.) *",density:"compact",modelValue:s.value.doctorName,"onUpdate:modelValue":d[1]||(d[1]=E=>s.value.doctorName=E),clearable:"",rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(m,{cols:"12"},{default:u(()=>[i(F,{label:"Specialization *",density:"compact",items:a.value,rules:Oe(Cr),clearable:"",modelValue:s.value.doctorSpecialization,"onUpdate:modelValue":d[2]||(d[2]=E=>s.value.doctorSpecialization=E)},null,8,["items","rules","modelValue"])]),_:1}),i(m,{cols:"12"},{default:u(()=>[i(B,{label:"Doctor Email (optional)",density:"compact",clearable:"",rules:Oe(Rg),modelValue:s.value.email,"onUpdate:modelValue":d[3]||(d[3]=E=>s.value.email=E)},null,8,["rules","modelValue"])]),_:1}),i(m,{cols:"12"},{default:u(()=>[i(B,{label:"Review Link (optional)",density:"compact",clearable:"",modelValue:s.value.doctorReviewLink,"onUpdate:modelValue":d[4]||(d[4]=E=>s.value.doctorReviewLink=E)},null,8,["modelValue"])]),_:1})]),_:1}),i(S,{class:"my-3"}),i(y,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(_,{modelValue:s.value.isGST,"onUpdate:modelValue":d[5]||(d[5]=E=>s.value.isGST=E),label:"GST Registered Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),i(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[13]||(d[13]=[N(" Enable if your practice is registered for GST. ",-1)])]),_:1})]),_:1})]),_:1}),s.value.isGST?(P(),he(y,{key:0,"no-gutters":"",class:"mb-3"},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(B,{label:"GST Registration Number (optional)",density:"compact",modelValue:s.value.gstIdentifier,"onUpdate:modelValue":d[6]||(d[6]=E=>s.value.gstIdentifier=E),clearable:"",placeholder:"e.g., 27AAAAA0000A1Z5"},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0),i(S,{class:"my-3"}),i(y,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(_,{modelValue:s.value.isPharmacy,"onUpdate:modelValue":d[7]||(d[7]=E=>s.value.isPharmacy=E),label:"Pharmacy Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),i(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[14]||(d[14]=[N(" Enable this for pharmacy practices. ",-1)])]),_:1})]),_:1})]),_:1}),i(S),i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"2"}),i(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(h,{variant:"outlined",onClick:d[8]||(d[8]=E=>c(s.value)),disabled:!o.value},{default:u(()=>[...d[15]||(d[15]=[N("Update",-1)])]),_:1},8,["disabled"])]),_:1}),i(m,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},TIe={__name:"edit-clinic",props:{clinic:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=t,a=e,r=R(Kn.clone(a.clinic)),s=R(!1),o=()=>{n("close")},l=async c=>{console.log("Updating clinic details",c);const f=await dce(c);f.error?console.error("Error updating clinic details",f.error):console.error("Clinic detail update successful"),o()};return(c,f)=>{const d=I("v-card-title"),A=I("v-col"),m=I("v-icon"),p=I("v-btn"),h=I("v-row"),y=I("v-card"),g=I("v-text-field"),_=I("v-select"),b=I("v-divider"),S=I("v-form");return P(),he(y,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(h,{"no-gutters":""},{default:u(()=>[i(A,{cols:"12"},{default:u(()=>[i(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(h,{"no-gutters":""},{default:u(()=>[i(A,{cols:"11"},{default:u(()=>[i(d,{class:"pa-0 pl-2"},{default:u(()=>[...f[5]||(f[5]=[N("Update Clinic Details",-1)])]),_:1})]),_:1}),i(A,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(p,{icon:"",size:"x-small",onClick:o},{default:u(()=>[i(m,null,{default:u(()=>[...f[6]||(f[6]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(h,{"no-gutters":""},{default:u(()=>[i(A,{cols:"12"},{default:u(()=>[i(y,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(S,{modelValue:s.value,"onUpdate:modelValue":f[4]||(f[4]=B=>s.value=B),"validate-on":"blur"},{default:u(()=>[i(h,{"no-gutters":""},{default:u(()=>[i(A,{cols:"12"},{default:u(()=>[i(g,{label:"Clinic Name *",density:"compact",modelValue:r.value.clinicName,"onUpdate:modelValue":f[0]||(f[0]=B=>r.value.clinicName=B),clearable:"",rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(A,{cols:"12"},{default:u(()=>[i(_,{label:"State/UT *",density:"compact",modelValue:r.value.clinicAddress,"onUpdate:modelValue":f[1]||(f[1]=B=>r.value.clinicAddress=B),items:Oe(CT),rules:Oe(Cr),clearable:""},null,8,["modelValue","items","rules"])]),_:1}),i(A,{cols:"12"},{default:u(()=>[i(g,{label:"Contact Number *",density:"compact",clearable:"",modelValue:r.value.contactNumber,"onUpdate:modelValue":f[2]||(f[2]=B=>r.value.contactNumber=B),rules:Oe(_h)},null,8,["modelValue","rules"])]),_:1})]),_:1}),i(b),i(h,{"no-gutters":""},{default:u(()=>[i(A,{cols:"2"}),i(A,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(p,{variant:"outlined",onClick:f[3]||(f[3]=B=>l(r.value)),disabled:!s.value},{default:u(()=>[...f[7]||(f[7]=[N("Update",-1)])]),_:1},8,["disabled"])]),_:1}),i(A,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},IIe={__name:"create-clinic",emits:["close"],setup(e,{emit:t}){const n=t,a=R({clinicName:"",clinicAddress:"",contactNumber:""}),r=R(!1),s=()=>{n("close")},o=async l=>{console.log("Create clinic",l);const c=await cce(l);c.error?console.error("Error creating clinic",c.error):console.error("Clinic create successful"),s()};return(l,c)=>{const f=I("v-card-title"),d=I("v-col"),A=I("v-icon"),m=I("v-btn"),p=I("v-row"),h=I("v-card"),y=I("v-text-field"),g=I("v-select"),_=I("v-divider"),b=I("v-form");return P(),he(h,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(h,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"11"},{default:u(()=>[i(f,{class:"pa-0 pl-2"},{default:u(()=>[...c[5]||(c[5]=[N("Create New Clinic",-1)])]),_:1})]),_:1}),i(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[i(A,null,{default:u(()=>[...c[6]||(c[6]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(h,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(b,{modelValue:r.value,"onUpdate:modelValue":c[4]||(c[4]=S=>r.value=S),"validate-on":"blur"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"12"},{default:u(()=>[i(y,{label:"Clinic Name *",density:"compact",modelValue:a.value.clinicName,"onUpdate:modelValue":c[0]||(c[0]=S=>a.value.clinicName=S),clearable:"",rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(d,{cols:"12"},{default:u(()=>[i(g,{label:"State/UT *",density:"compact",modelValue:a.value.clinicAddress,"onUpdate:modelValue":c[1]||(c[1]=S=>a.value.clinicAddress=S),items:Oe(CT),rules:Oe(Cr),clearable:""},null,8,["modelValue","items","rules"])]),_:1}),i(d,{cols:"12"},{default:u(()=>[i(y,{label:"Contact Number *",density:"compact",clearable:"",modelValue:a.value.contactNumber,"onUpdate:modelValue":c[2]||(c[2]=S=>a.value.contactNumber=S),rules:Oe(_h)},null,8,["modelValue","rules"])]),_:1})]),_:1}),i(_),i(p,{"no-gutters":""},{default:u(()=>[i(d,{cols:"2"}),i(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(m,{variant:"outlined",onClick:c[3]||(c[3]=S=>o(a.value)),disabled:!r.value},{default:u(()=>[...c[7]||(c[7]=[N("Create",-1)])]),_:1},8,["disabled"])]),_:1}),i(d,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},FIe={__name:"create-doctor",emits:["close"],setup(e,{emit:t}){const n=t,a=R(Qw),r=R({doctorName:"",doctorSpecialization:"",email:"",doctorReviewLink:"",procedurePrimary:!1,isGST:!1,gstIdentifier:"",isPharmacy:!1}),s=R(!1),o=()=>{n("close")},l=async c=>{console.log("Create doctor details",c);const f=await ice(c);f.error?console.error("Error creating doctor",f.error):console.error("Doctor created successfully"),o()};return(c,f)=>{const d=I("v-card-title"),A=I("v-col"),m=I("v-icon"),p=I("v-btn"),h=I("v-row"),y=I("v-card"),g=I("v-switch"),_=I("v-card-subtitle"),b=I("v-divider"),S=I("v-text-field"),B=I("v-combobox"),F=I("v-form");return P(),he(y,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(h,{"no-gutters":""},{default:u(()=>[i(A,{cols:"12"},{default:u(()=>[i(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(h,{"no-gutters":""},{default:u(()=>[i(A,{cols:"11"},{default:u(()=>[i(d,{class:"pa-0 pl-2"},{default:u(()=>[...f[10]||(f[10]=[N("Create New Doctor",-1)])]),_:1})]),_:1}),i(A,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(p,{icon:"",size:"x-small",onClick:o},{default:u(()=>[i(m,null,{default:u(()=>[...f[11]||(f[11]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(h,{"no-gutters":""},{default:u(()=>[i(A,{cols:"12"},{default:u(()=>[i(y,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(F,{modelValue:s.value,"onUpdate:modelValue":f[9]||(f[9]=T=>s.value=T),"validate-on":"blur"},{default:u(()=>[i(h,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[i(A,{cols:"12"},{default:u(()=>[i(g,{modelValue:r.value.procedurePrimary,"onUpdate:modelValue":f[0]||(f[0]=T=>r.value.procedurePrimary=T),label:"Procedure-Primary Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),i(_,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...f[12]||(f[12]=[N(" Enable this for procedure-centric practices. ",-1)])]),_:1})]),_:1})]),_:1}),i(b,{class:"mb-3"}),i(h,{"no-gutters":""},{default:u(()=>[i(A,{cols:"12"},{default:u(()=>[i(S,{label:"Doctor Name (Dr.) *",density:"compact",modelValue:r.value.doctorName,"onUpdate:modelValue":f[1]||(f[1]=T=>r.value.doctorName=T),clearable:"",rules:Oe(Cr)},null,8,["modelValue","rules"])]),_:1}),i(A,{cols:"12"},{default:u(()=>[i(B,{label:"Specialization *",density:"compact",items:a.value,rules:Oe(Cr),clearable:"",modelValue:r.value.doctorSpecialization,"onUpdate:modelValue":f[2]||(f[2]=T=>r.value.doctorSpecialization=T)},null,8,["items","rules","modelValue"])]),_:1}),i(A,{cols:"12"},{default:u(()=>[i(S,{label:"Doctor Email (optional)",density:"compact",clearable:"",rules:Oe(Rg),modelValue:r.value.email,"onUpdate:modelValue":f[3]||(f[3]=T=>r.value.email=T)},null,8,["rules","modelValue"])]),_:1}),i(A,{cols:"12"},{default:u(()=>[i(S,{label:"Review Link (optional)",density:"compact",clearable:"",modelValue:r.value.doctorReviewLink,"onUpdate:modelValue":f[4]||(f[4]=T=>r.value.doctorReviewLink=T)},null,8,["modelValue"])]),_:1})]),_:1}),i(b,{class:"my-3"}),i(h,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[i(A,{cols:"12"},{default:u(()=>[i(g,{modelValue:r.value.isGST,"onUpdate:modelValue":f[5]||(f[5]=T=>r.value.isGST=T),label:"GST Registered Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),i(_,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...f[13]||(f[13]=[N(" Enable if your practice is registered for GST. ",-1)])]),_:1})]),_:1})]),_:1}),r.value.isGST?(P(),he(h,{key:0,"no-gutters":"",class:"mb-3"},{default:u(()=>[i(A,{cols:"12"},{default:u(()=>[i(S,{label:"GST Registration Number (optional)",density:"compact",modelValue:r.value.gstIdentifier,"onUpdate:modelValue":f[6]||(f[6]=T=>r.value.gstIdentifier=T),clearable:"",placeholder:"e.g., 27AAAAA0000A1Z5"},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0),i(b,{class:"my-3"}),i(h,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[i(A,{cols:"12"},{default:u(()=>[i(g,{modelValue:r.value.isPharmacy,"onUpdate:modelValue":f[7]||(f[7]=T=>r.value.isPharmacy=T),label:"Pharmacy Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),i(_,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...f[14]||(f[14]=[N(" Enable this for pharmacy practices. ",-1)])]),_:1})]),_:1})]),_:1}),i(b),i(h,{"no-gutters":""},{default:u(()=>[i(A,{cols:"2"}),i(A,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(p,{variant:"outlined",onClick:f[8]||(f[8]=T=>l(r.value)),disabled:!s.value},{default:u(()=>[...f[15]||(f[15]=[N("Create",-1)])]),_:1},8,["disabled"])]),_:1}),i(A,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},PIe={class:"permissions-section"},DIe={class:"d-flex align-center justify-space-between mb-4"},UIe={key:0,class:"text-center py-8"},RIe={key:1,class:"features-container"},NIe={class:"d-flex align-center justify-space-between w-100 pr-4"},VIe={class:"d-flex align-center flex-grow-1"},LIe={class:"flex-grow-1"},MIe={class:"text-body-1 font-weight-medium d-flex align-center"},OIe={class:"text-caption text-medium-emphasis mt-1"},HIe={class:"text-caption text-medium-emphasis mb-3 d-flex align-center"},$Ie={class:"action-card-content"},QIe={class:"action-card-text"},GIe={class:"text-body-2 font-weight-medium action-title"},zIe={class:"action-description-wrapper"},WIe={class:"text-caption text-medium-emphasis action-description"},KIe={__name:"permission-assignment",props:{user:{type:Object,required:!0,default:()=>({permissions:[],selectedFeatures:[],role:null})},availableFeatures:{type:Array,required:!0,default:()=>[]}},emits:["update:user"],setup(e,{emit:t}){const n=e,a=t,r=R(""),s=R([]),o=R([]),l=R(null),c=ee(()=>o.value.map(F=>({value:F.id,name:F.name,description:F.description,...F}))),f=async()=>{try{const F=await it.get("/admin/users/roles");F.data&&F.data.success&&(o.value=F.data.roles||[])}catch(F){console.error("Failed to load roles:",F)}},d=F=>{if(A.value=!0,l.value=F,!F){y({role:null}),A.value=!1;return}const T=o.value.find(U=>U.id===F);if(!T){A.value=!1;return}const E=T.defaultFeatures||[],x=T.defaultPermissions||[],C=E.includes("home")?[...E]:["home",...E],D=[...x];y({role:F,selectedFeatures:C,permissions:D}),setTimeout(()=>{A.value=!1},100)},A=R(!1),m=()=>{if(!n.user)return;const F=n.user.permissions||[],T=n.user.selectedFeatures||[];let E=!1;const x={};T.includes("home")||(x.selectedFeatures=[...T,"home"],E=!0),F.includes("home")||(x.permissions=[...F,"home"],E=!0),E&&y(x)};An(()=>{f(),n.user.role&&(l.value=n.user.role),m()}),Ge(()=>[n.user?.permissions,n.user?.selectedFeatures],()=>{const F=n.user?.permissions||[],T=n.user?.selectedFeatures||[];(!F.includes("home")||!T.includes("home"))&&m()},{immediate:!0}),Ge(()=>n.user.role,F=>{A.value||F!==l.value&&(l.value=F||null)});const p=F=>F&&F.actions&&Array.isArray(F.actions)&&F.actions.length>0,h=(F,T)=>{if(!p(F)){T.stopPropagation(),T.preventDefault();const E=s.value.indexOf(F.id);E>-1&&s.value.splice(E,1)}},y=F=>{a("update:user",{...n.user,...F})},g=ee(()=>{if(!r.value||r.value.trim()==="")return n.availableFeatures||[];const F=r.value.toLowerCase().trim();return(n.availableFeatures||[]).filter(T=>{if(!T)return!1;const E=(T.name||"").toLowerCase().includes(F),x=(T.description||"").toLowerCase().includes(F),C=(T.id||"").toLowerCase().includes(F),D=T.actions&&Array.isArray(T.actions)&&T.actions.some(U=>{const L=(U.description||"").toLowerCase(),H=(U.id||"").toLowerCase(),oe=(U.action||"").toLowerCase();return L.includes(F)||H.includes(F)||oe.includes(F)});return E||x||C||D})}),_=F=>!n.user||!n.user.permissions||!Array.isArray(n.user.permissions)?!1:n.user.permissions.includes(F),b=F=>{if(!n.user||!n.user.permissions||!Array.isArray(n.user.permissions))return 0;const T=n.availableFeatures.find(x=>x&&x.id===F);if(!T||!T.actions||!Array.isArray(T.actions))return 0;const E=T.actions.filter(x=>x&&x.id).map(x=>x.id);return n.user.permissions.filter(x=>E.includes(x)).length},S=(F,T)=>{if(!n.user||F==="home"&&!T)return;const E=n.user.permissions||[],x=n.user.selectedFeatures||[],C=n.availableFeatures.find(H=>H&&H.id===F);if(!C)return;const D=C.actions&&Array.isArray(C.actions)?C.actions.filter(H=>H&&H.id).map(H=>H.id):[];let U=[...E],L=[...x];T?(L.includes(F)||L.push(F),U.includes(F)||U.push(F),D.forEach(H=>{U.includes(H)||U.push(H)}),U=[...new Set(U)]):(L=L.filter(H=>H!==F),U=U.filter(H=>!(H===F||D.includes(H)||H&&typeof H=="string"&&H.startsWith(`${F}.`)))),L.includes("home")||L.push("home"),U.includes("home")||U.push("home"),y({permissions:U,selectedFeatures:L})},B=(F,T)=>{if(!n.user)return;let x=[...n.user.permissions||[]];T?x.includes(F)||x.push(F):x=x.filter(C=>C!==F),y({permissions:x})};return(F,T)=>{const E=I("v-chip"),x=I("v-list-item-subtitle"),C=I("v-list-item"),D=I("v-select"),U=I("v-text-field"),L=I("v-progress-circular"),H=I("v-checkbox"),oe=I("v-expansion-panel-title"),de=I("v-icon"),te=I("v-card"),q=I("v-col"),ce=I("v-row"),le=I("v-expansion-panel-text"),Z=I("v-expansion-panel"),ne=I("v-expansion-panels");return P(),Ae("div",PIe,[v("div",DIe,[T[5]||(T[5]=v("div",null,[v("h3",{class:"text-h6 mb-1"},"Assign Permissions"),v("p",{class:"text-caption text-medium-emphasis mb-0"}," Select features and specific actions the user can perform ")],-1)),e.user.selectedFeatures&&e.user.selectedFeatures.length>0?(P(),he(E,{key:0,color:"primary",size:"small",variant:"flat",class:"font-weight-medium"},{default:u(()=>[N(K(e.user.selectedFeatures.length)+" selected ",1)]),_:1})):ge("",!0)]),i(D,{modelValue:l.value,"onUpdate:modelValue":[T[0]||(T[0]=G=>l.value=G),d],items:c.value,"item-value":"value","item-title":"name",label:"Select Role",variant:"outlined",density:"comfortable",clearable:"","hide-details":"",class:"mb-4",color:"primary"},{item:u(({props:G,item:W})=>[i(C,fl(Al(G)),{default:u(()=>[i(x,null,{default:u(()=>[N(K(W.raw.description),1)]),_:2},1024)]),_:2},1040)]),selection:u(({item:G})=>[N(K(G.raw.name),1)]),_:1},8,["modelValue","items"]),i(U,{modelValue:r.value,"onUpdate:modelValue":T[1]||(T[1]=G=>r.value=G),"prepend-inner-icon":"mdi-magnify",label:"Search features or actions...",variant:"outlined",density:"comfortable",clearable:"","hide-details":"",class:"mb-4",color:"primary"},null,8,["modelValue"]),!e.availableFeatures||e.availableFeatures.length===0?(P(),Ae("div",UIe,[i(L,{indeterminate:"",color:"primary",size:"32"}),T[6]||(T[6]=v("p",{class:"text-body-2 text-medium-emphasis mt-4"},"Loading permissions...",-1))])):(P(),Ae("div",RIe,[i(ne,{modelValue:s.value,"onUpdate:modelValue":T[4]||(T[4]=G=>s.value=G),variant:"accordion",multiple:"",class:"feature-panels"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(g.value,G=>(P(),he(Z,{key:G?.id||G,value:G.id,class:"feature-panel"},{default:u(()=>[i(oe,{class:"feature-panel-title","hide-actions":!p(G),onClick:W=>h(G,W)},{default:u(()=>[v("div",NIe,[v("div",VIe,[G&&G.id?(P(),he(H,{key:0,"model-value":e.user.selectedFeatures&&Array.isArray(e.user.selectedFeatures)&&e.user.selectedFeatures.includes(G.id),disabled:G.id==="home",onClick:T[2]||(T[2]=gn(()=>{},["stop"])),"onUpdate:modelValue":W=>S(G.id,W),density:"comfortable","hide-details":"",color:"primary",class:"mr-3"},null,8,["model-value","disabled","onUpdate:modelValue"])):ge("",!0),v("div",LIe,[v("div",MIe,[N(K(G.name||G.id)+" ",1),b(G.id)>0?(P(),he(E,{key:0,size:"x-small",color:"primary",variant:"flat",class:"ml-2"},{default:u(()=>[N(K(b(G.id))+"/"+K(G.actions?.length||0),1)]),_:2},1024)):ge("",!0)]),v("div",OIe,K(G.description||"No description available"),1)])])])]),_:2},1032,["hide-actions","onClick"]),p(G)?(P(),he(le,{key:0,class:"feature-panel-content"},{default:u(()=>[v("div",null,[v("div",HIe,[i(de,{size:"small",class:"mr-1"},{default:u(()=>[...T[7]||(T[7]=[N("mdi-check-circle-outline",-1)])]),_:1}),T[8]||(T[8]=N(" Select specific actions for this feature ",-1))]),i(ce,{dense:"",class:"actions-grid"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(G.actions,W=>(P(),Ae(ze,{key:W?.id||`action-${W?.action}`},[W&&W.id?(P(),he(q,{key:0,cols:"12",sm:"6",md:"4"},{default:u(()=>[i(te,{class:lt(["action-card",{"action-card-selected":_(W.id)}]),onClick:Q=>B(W.id,!_(W.id)),elevation:"0"},{default:u(()=>[v("div",$Ie,[i(H,{"model-value":_(W.id),onClick:T[3]||(T[3]=gn(()=>{},["stop"])),"onUpdate:modelValue":Q=>B(W.id,Q),density:"compact","hide-details":"",color:"primary",class:"action-checkbox"},null,8,["model-value","onUpdate:modelValue"]),v("div",QIe,[v("div",GIe,K(W.action?W.action.charAt(0).toUpperCase()+W.action.slice(1):W.id?W.id.split(".").pop():"Action"),1)])]),v("div",zIe,[v("div",WIe,K(W.description||W.id||"No description"),1)])]),_:2},1032,["class","onClick"])]),_:2},1024)):ge("",!0)],64))),128))]),_:2},1024)])]),_:2},1024)):ge("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))])}}},gR=en(KIe,[["__scopeId","data-v-ab117aa2"]]),jIe={__name:"CreatePharmacy",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","saved"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=la(),r=e,s=t,o=R(r.modelValue),l=R(null),c=R(!1),f=R(!1),d=R({pharmacyName:"",pharmacyNameLine1:"",addressAndContactInfo:"",gstNumberLine1:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"}),A=["A4","A5"];Ge(()=>r.modelValue,h=>{o.value=h,h&&(d.value={pharmacyName:"",pharmacyNameLine1:"",addressAndContactInfo:"",gstNumberLine1:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"},l.value&&l.value.resetValidation())}),Ge(o,h=>{s("update:modelValue",h)});const m=()=>{o.value=!1},p=async()=>{if(!l.value)return;const{valid:h}=await l.value.validate();if(h){f.value=!0;try{const y=d.value.pharmacyNameLine1.trim()+(d.value.addressAndContactInfo?.trim()?`
`+d.value.addressAndContactInfo.trim():""),g=d.value.gstNumberLine1.trim()+(d.value.otherRegistrationInfo?.trim()?`
`+d.value.otherRegistrationInfo.trim():""),_={pharmacyName:d.value.pharmacyName,header:y,gstNumber:g,useHeader:d.value.useHeader,pageSize:d.value.pageSize||"A4"},{data:b,error:S}=await yce(_);if(S)throw S;n("Pharmacy created successfully"),s("saved",b),m()}catch(y){console.error("Error creating pharmacy:",y),a(y.response?.data?.error||y.message||"Failed to create pharmacy")}finally{f.value=!1}}};return(h,y)=>{const g=I("v-icon"),_=I("v-btn"),b=I("v-card-title"),S=I("v-divider"),B=I("v-text-field"),F=I("v-col"),T=I("v-textarea"),E=I("v-switch"),x=I("v-select"),C=I("v-row"),D=I("v-form"),U=I("v-card-text"),L=I("v-spacer"),H=I("v-card-actions"),oe=I("v-card"),de=I("v-dialog");return P(),he(de,{modelValue:o.value,"onUpdate:modelValue":y[8]||(y[8]=te=>o.value=te),"max-width":"600",persistent:""},{default:u(()=>[i(oe,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[i(b,{class:"d-flex align-center justify-space-between"},{default:u(()=>[y[10]||(y[10]=v("span",null,"Create Pharmacy",-1)),i(_,{onClick:m,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(g,{size:"18"},{default:u(()=>[...y[9]||(y[9]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(S),i(U,{class:"py-1"},{default:u(()=>[i(D,{ref_key:"form",ref:l,modelValue:c.value,"onUpdate:modelValue":y[7]||(y[7]=te=>c.value=te)},{default:u(()=>[i(C,{dense:""},{default:u(()=>[i(F,{cols:"12"},{default:u(()=>[i(B,{modelValue:d.value.pharmacyName,"onUpdate:modelValue":y[0]||(y[0]=te=>d.value.pharmacyName=te),label:"Pharmacy Name (Display) *",variant:"outlined",density:"compact",rules:[te=>!!te||"Pharmacy name is required"],hint:"Name shown in the UI for selecting this pharmacy","prepend-inner-icon":"mdi-pill"},null,8,["modelValue","rules"])]),_:1}),i(F,{cols:"12"},{default:u(()=>[i(B,{modelValue:d.value.pharmacyNameLine1,"onUpdate:modelValue":y[1]||(y[1]=te=>d.value.pharmacyNameLine1=te),label:"Pharmacy Name (First Line on Bill) *",variant:"outlined",density:"compact",rules:[te=>!!te||"Pharmacy name for bill is required"],hint:"First line of pharmacy name on printed bills","prepend-inner-icon":"mdi-file-document-outline"},null,8,["modelValue","rules"])]),_:1}),i(F,{cols:"12"},{default:u(()=>[i(T,{modelValue:d.value.addressAndContactInfo,"onUpdate:modelValue":y[2]||(y[2]=te=>d.value.addressAndContactInfo=te),label:"Address and Contact Info (Second Line on Bill)",variant:"outlined",density:"compact","auto-grow":"",rows:"2",hint:"Address, phone, email - second line on printed bills","prepend-inner-icon":"mdi-map-marker-outline"},null,8,["modelValue"])]),_:1}),i(F,{cols:"12"},{default:u(()=>[i(B,{modelValue:d.value.gstNumberLine1,"onUpdate:modelValue":y[3]||(y[3]=te=>d.value.gstNumberLine1=te),label:"GST Number (First Line)",variant:"outlined",density:"compact",hint:"GST number - first line on printed bills","prepend-inner-icon":"mdi-identifier"},null,8,["modelValue"])]),_:1}),i(F,{cols:"12"},{default:u(()=>[i(T,{modelValue:d.value.otherRegistrationInfo,"onUpdate:modelValue":y[4]||(y[4]=te=>d.value.otherRegistrationInfo=te),label:"Other Registration Info (Second Line)",variant:"outlined",density:"compact","auto-grow":"",rows:"2",hint:"Other registration numbers, licenses - second line on printed bills","prepend-inner-icon":"mdi-certificate-outline"},null,8,["modelValue"])]),_:1}),i(F,{cols:"12",class:"py-0 pl-2 pr-2"},{default:u(()=>[i(E,{modelValue:d.value.useHeader,"onUpdate:modelValue":y[5]||(y[5]=te=>d.value.useHeader=te),label:"Use Header on Pharmacy Bill",hint:"When disabled, blank space will be left at the top of each page for your custom pharmacy header",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),i(F,{cols:"12"},{default:u(()=>[i(x,{modelValue:d.value.pageSize,"onUpdate:modelValue":y[6]||(y[6]=te=>d.value.pageSize=te),label:"Page Size",items:A,variant:"outlined",density:"compact","prepend-inner-icon":"mdi-file-document"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(S),i(H,{class:"pa-3"},{default:u(()=>[i(L),i(_,{variant:"outlined",onClick:m,disabled:f.value},{default:u(()=>[...y[11]||(y[11]=[N(" Cancel ",-1)])]),_:1},8,["disabled"]),i(_,{color:"primary",onClick:p,loading:f.value,disabled:!c.value||f.value},{default:u(()=>[...y[12]||(y[12]=[N(" Create ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},qIe={__name:"EditPharmacy",props:{modelValue:{type:Boolean,default:!1},pharmacy:{type:Object,default:null}},emits:["update:modelValue","saved"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=la(),r=e,s=t,o=R(r.modelValue),l=R(null),c=R(!1),f=R(!1),d=R({pharmacyName:"",pharmacyNameLine1:"",addressAndContactInfo:"",gstNumberLine1:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"}),A=["A4","A5"];Ge(()=>r.modelValue,h=>{if(o.value=h,h&&r.pharmacy){const g=(r.pharmacy.header||"").split(`
`),_=g[0]||"",b=g[1]||"",B=(r.pharmacy.gstNumber||"").split(`
`),F=B[0]||"",T=B[1]||"";d.value={pharmacyName:r.pharmacy.pharmacyName||"",pharmacyNameLine1:_,addressAndContactInfo:b,gstNumberLine1:F,otherRegistrationInfo:T,useHeader:r.pharmacy.useHeader!==void 0?r.pharmacy.useHeader===1||r.pharmacy.useHeader===!0:!0,pageSize:r.pharmacy.pageSize||"A4"},l.value&&l.value.resetValidation()}}),Ge(()=>r.pharmacy,h=>{if(h&&o.value){const g=(h.header||"").split(`
`),_=g[0]||"",b=g[1]||"",B=(h.gstNumber||"").split(`
`),F=B[0]||"",T=B[1]||"";d.value={pharmacyName:h.pharmacyName||"",pharmacyNameLine1:_,addressAndContactInfo:b,gstNumberLine1:F,otherRegistrationInfo:T,useHeader:h.useHeader!==void 0?h.useHeader===1||h.useHeader===!0:!0,pageSize:h.pageSize||"A4"}}}),Ge(o,h=>{s("update:modelValue",h)});const m=()=>{o.value=!1},p=async()=>{if(!l.value||!r.pharmacy)return;const{valid:h}=await l.value.validate();if(h){f.value=!0;try{const y=d.value.pharmacyNameLine1.trim()+(d.value.addressAndContactInfo?.trim()?`
`+d.value.addressAndContactInfo.trim():""),g=d.value.gstNumberLine1.trim()+(d.value.otherRegistrationInfo?.trim()?`
`+d.value.otherRegistrationInfo.trim():""),_={pharmacyName:d.value.pharmacyName,header:y,gstNumber:g,useHeader:d.value.useHeader,pageSize:d.value.pageSize||"A4"},{data:b,error:S}=await _ce(r.pharmacy.id,_);if(S)throw S;n("Pharmacy updated successfully"),s("saved"),m()}catch(y){console.error("Error updating pharmacy:",y),a(y.response?.data?.error||y.message||"Failed to update pharmacy")}finally{f.value=!1}}};return(h,y)=>{const g=I("v-icon"),_=I("v-btn"),b=I("v-card-title"),S=I("v-divider"),B=I("v-text-field"),F=I("v-col"),T=I("v-textarea"),E=I("v-switch"),x=I("v-select"),C=I("v-row"),D=I("v-form"),U=I("v-card-text"),L=I("v-spacer"),H=I("v-card-actions"),oe=I("v-card"),de=I("v-dialog");return P(),he(de,{modelValue:o.value,"onUpdate:modelValue":y[8]||(y[8]=te=>o.value=te),"max-width":"600",persistent:""},{default:u(()=>[i(oe,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[i(b,{class:"d-flex align-center justify-space-between"},{default:u(()=>[y[10]||(y[10]=v("span",null,"Edit Pharmacy",-1)),i(_,{onClick:m,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(g,{size:"18"},{default:u(()=>[...y[9]||(y[9]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(S),i(U,{class:"py-1"},{default:u(()=>[i(D,{ref_key:"form",ref:l,modelValue:c.value,"onUpdate:modelValue":y[7]||(y[7]=te=>c.value=te)},{default:u(()=>[i(C,{dense:""},{default:u(()=>[i(F,{cols:"12"},{default:u(()=>[i(B,{modelValue:d.value.pharmacyName,"onUpdate:modelValue":y[0]||(y[0]=te=>d.value.pharmacyName=te),label:"Pharmacy Name (Display) *",variant:"outlined",density:"compact",rules:[te=>!!te||"Pharmacy name is required"],hint:"Name shown in the UI for selecting this pharmacy","prepend-inner-icon":"mdi-pill"},null,8,["modelValue","rules"])]),_:1}),i(F,{cols:"12"},{default:u(()=>[i(B,{modelValue:d.value.pharmacyNameLine1,"onUpdate:modelValue":y[1]||(y[1]=te=>d.value.pharmacyNameLine1=te),label:"Pharmacy Name (First Line on Bill) *",variant:"outlined",density:"compact",rules:[te=>!!te||"Pharmacy name for bill is required"],hint:"First line of pharmacy name on printed bills","prepend-inner-icon":"mdi-file-document-outline"},null,8,["modelValue","rules"])]),_:1}),i(F,{cols:"12"},{default:u(()=>[i(T,{modelValue:d.value.addressAndContactInfo,"onUpdate:modelValue":y[2]||(y[2]=te=>d.value.addressAndContactInfo=te),label:"Address and Contact Info (Second Line on Bill)",variant:"outlined",density:"compact","auto-grow":"",rows:"2",hint:"Address, phone, email - second line on printed bills","prepend-inner-icon":"mdi-map-marker-outline"},null,8,["modelValue"])]),_:1}),i(F,{cols:"12"},{default:u(()=>[i(B,{modelValue:d.value.gstNumberLine1,"onUpdate:modelValue":y[3]||(y[3]=te=>d.value.gstNumberLine1=te),label:"GST Number (First Line)",variant:"outlined",density:"compact",hint:"GST number - first line on printed bills","prepend-inner-icon":"mdi-identifier"},null,8,["modelValue"])]),_:1}),i(F,{cols:"12"},{default:u(()=>[i(T,{modelValue:d.value.otherRegistrationInfo,"onUpdate:modelValue":y[4]||(y[4]=te=>d.value.otherRegistrationInfo=te),label:"Other Registration Info (Second Line)",variant:"outlined",density:"compact","auto-grow":"",rows:"2",hint:"Other registration numbers, licenses - second line on printed bills","prepend-inner-icon":"mdi-certificate-outline"},null,8,["modelValue"])]),_:1}),i(F,{cols:"12",class:"py-0 pl-2 pr-2"},{default:u(()=>[i(E,{modelValue:d.value.useHeader,"onUpdate:modelValue":y[5]||(y[5]=te=>d.value.useHeader=te),label:"Use Header on Pharmacy Bill",hint:"When disabled, blank space will be left at the top of each page for your custom pharmacy header",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),i(F,{cols:"12"},{default:u(()=>[i(x,{modelValue:d.value.pageSize,"onUpdate:modelValue":y[6]||(y[6]=te=>d.value.pageSize=te),label:"Page Size",items:A,variant:"outlined",density:"compact","prepend-inner-icon":"mdi-file-document"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(S),i(H,{class:"pa-3"},{default:u(()=>[i(L),i(_,{variant:"outlined",onClick:m,disabled:f.value},{default:u(()=>[...y[11]||(y[11]=[N(" Cancel ",-1)])]),_:1},8,["disabled"]),i(_,{color:"primary",onClick:p,loading:f.value,disabled:!c.value||f.value},{default:u(()=>[...y[12]||(y[12]=[N(" Save ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},YIe=async(e,t,n)=>{try{if(!e)throw new Error("Doctor ID is required");if(!t||t.length!==3||!/^[A-Z]{3}$/.test(t))throw new Error("Prefix must be exactly 3 uppercase letters (A-Z)");if(!n||n.length!==6||!/^\d{6}$/.test(n))throw new Error("Seed suffix must be exactly 6 digits");const r=new Date().toISOString().split("T")[0],s={identifier:`${t}${n}`,status:"SERIES",paymentReceiptDate:r,doctorId:e,isThreeC:!1,additionalDiscount:0};return console.log("Creating receipt series with seed:",s),{data:(await it.post("/paymentreceipt/",s)).data.data,error:null}}catch(a){return console.error("Error creating receipt series:",a),{data:null,error:a}}},XIe=async(e,t,n)=>{try{if(!e)throw new Error("Doctor ID is required");if(!t||t.length!==3||!/^[A-Z]{3}$/.test(t))throw new Error("Prefix must be exactly 3 uppercase letters (A-Z)");if(!n||n.length!==6||!/^\d{6}$/.test(n))throw new Error("Seed suffix must be exactly 6 digits");const r=new Date().toISOString().split("T")[0],s={identifier:`${t}${n}`,status:"SERIES",billDate:r,doctorId:e,additionalDiscount:0};return console.log("Creating bill series with seed:",s),{data:(await it.post("/billreceipt/series",s)).data.data,error:null}}catch(a){return console.error("Error creating bill series:",a),{data:null,error:a}}},JIe={class:"text-center"},ZIe={class:"scroll-hover",style:{"overflow-y":"auto",height:"100%"}},eFe={key:0,class:"ma-2 mb-3"},tFe={key:1,class:"ma-2 mt-4"},nFe={key:2,class:"ma-2 mt-4"},aFe={class:"text-subtitle-2 ml-2"},rFe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},sFe={key:0,class:"mb-3"},oFe={key:1},iFe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},lFe={key:0,class:"text-caption text-medium-emphasis"},uFe={key:1,class:"text-caption text-medium-emphasis"},cFe={class:"d-flex align-center justify-center fill-height"},dFe={class:"d-flex align-center justify-center fill-height"},fFe={class:"d-flex align-center justify-space-between"},AFe={class:"flex-grow-1"},mFe={class:"d-flex align-center"},vFe=["href"],hFe={key:1,class:"text-body-2 text-disabled"},pFe={class:"d-flex align-center flex-wrap"},gFe={class:"text-body-2 text-break mr-1"},yFe={key:1,class:"text-body-2 text-disabled"},_Fe={class:"d-flex align-center"},wFe={class:"text-body-2"},bFe={class:"d-flex flex-wrap mt-3"},xFe={class:"text-subtitle-2 ml-2"},CFe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},SFe={class:"text-subtitle-2 ml-2"},EFe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},kFe={class:"text-subtitle-2 ml-2"},BFe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},TFe={class:"scroll-hover pa-3",style:{"overflow-y":"auto","max-height":"75vh"}},IFe={class:"d-flex align-center justify-space-between"},FFe={class:"flex-grow-1 text-left"},PFe={class:"d-flex align-center"},DFe={class:"d-flex align-start text-left"},UFe={class:"flex-grow-1 text-left"},RFe={class:"text-body-2 text-left"},NFe={key:0,class:"text-caption text-medium-emphasis mt-0 text-left"},VFe={class:"d-flex align-center text-left"},LFe={class:"text-body-2 text-left"},MFe={class:"d-flex align-center text-left"},OFe={class:"text-body-2 text-left"},HFe={class:"d-flex align-center text-left"},$Fe={class:"text-body-2 text-left"},QFe={class:"d-flex flex-wrap mt-2"},GFe={class:"scroll-hover pa-3",style:{"overflow-y":"auto","max-height":"75vh"}},zFe={class:"d-flex align-center"},WFe={class:"text-white"},KFe={class:"text-left"},jFe={class:"text-subtitle-2 font-weight-bold text-left"},qFe={class:"text-caption text-grey text-left"},YFe={class:"text-caption text-left"},XFe={key:0,class:"text-grey"},JFe={class:"user-actions-container"},ZFe={class:"dialog-title"},ePe={class:"text-center pa-4"},tPe={class:"mb-4"},nPe={class:"mb-4"},aPe={class:"mb-4"},rPe={class:"text-body-1 font-weight-bold mb-2"},sPe={class:"text-body-2"},oPe={class:"text-caption"},iPe={__name:"admin-page",setup(e){const t=Ln(),{isAdmin:n,hasPermission:a}=gh(),r=R(!0),s=R(null),o=ee(()=>n.value),l=ee(()=>{const Ne=a("admin.vitals").value,me=a("admin.setup.prescription").value||a("admin.setup.receipt").value||a("admin.setup.bill").value||a("admin.setup.doctor").value||a("admin.setup.clinic").value||a("admin.setup.remote").value||a("admin.setup.pharmacy").value;return Ne||me}),c=ee(()=>n.value),f=()=>a("admin.vitals").value?"vitalsconfig":n.value?"rxprintdetails":"vitalsconfig",d=Ne=>{if(!Ne||typeof Ne!="string")return Ne;const me=Ne.trim();return/^https?:\/\//i.test(me)?me:`https://${me}`},A=R("vitalsconfig"),m=R(!1),p=R(""),h=R(!1),y=R(""),g=R(""),_=R(""),b=R(29200),S=R(!1),B=R(""),F=R(""),T=R(""),E=R(null),x=R(!1),C=R(),D=R(),U=ee(()=>t.state.doctorModule.doctorId),L=R({pulse:!0,bloodPressure:!0,temperature:!0,respiratoryRate:!0,height:!1,serumBilirubin:!1,bloodGlucoseFF:!1,bloodGlucosePP:!1,bloodGlucoseRandom:!1,serumCreatinine:!1}),H=R(!1),oe=R({prefix:"",suffix:""}),de=R(!1),te=R(!1),q=R({prefix:"",suffix:""}),ce=R(!1),le=R(!1),Z=R({pharmacyName:"",addressAndContactInfo:"",gstNumber:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"});R(!1),R(!1);const ne=R([]),G=R(!1),W=R(!1),Q=R(!1),O=R(null),ae=R(!1),j=R(null),J=R(null),ie=R({prefix:"",seed:null}),X=R(!1),fe=R(!1),M=R([]),z=R(!1),se=R([]);Ge(se,Ne=>{Array.isArray(Ne)||(se.value=[])},{deep:!0});const be=R(!1),Fe=R(!1),ye=R(!1),Qe=R(null),_e=R(null),Se=R({name:"",email:"",passcode:"",doctorId:null,role:null,permissions:["home"],selectedFeatures:["home"]}),Ee=R(!1),Ue=R(!1),je=R(!1),at=R(null),mt=R({id:null,name:"",email:"",doctorId:null,role:null,permissions:[],selectedFeatures:[]}),xe=R(!1),Be=R(!1),Ye=R(!1),kt=R(null),xt=R(""),Nt=R(!1),At=R(!1),Ot=R(!1),Dt=R(!1),bt=R(null),Ze=R(""),qt=R(!1),Vt=R(null),zt=R(!1),ln=R(null),Dn=R(""),vt=R(!1),et=R([]);Ge(et,Ne=>{Array.isArray(Ne)||(et.value=[])},{deep:!0});const Wt=[Ne=>!!Ne||"Prefix is required",Ne=>Ne&&Ne.length===3||"Prefix must be exactly 3 characters",Ne=>Ne&&/^[A-Z]{3}$/.test(Ne)||"Prefix must be 3 uppercase letters (A-Z)"],_n=[Ne=>!!Ne||"First receipt number is required",Ne=>Ne&&Ne.length===6||"First receipt number must be exactly 6 digits",Ne=>Ne&&/^\d{6}$/.test(Ne)||"First receipt number must be 6 digits (000001-999999)",Ne=>Ne&&parseInt(Ne)>=1&&parseInt(Ne)<=999999||"First receipt number must be between 000001 and 999999"],na=[Ne=>!!Ne||"Prefix is required",Ne=>Ne&&Ne.length===3||"Prefix must be exactly 3 characters",Ne=>Ne&&/^[A-Z]{3}$/.test(Ne)||"Prefix must be 3 uppercase letters (A-Z)"],rt=[Ne=>!!Ne||"First bill number is required",Ne=>Ne&&Ne.length===6||"First bill number must be exactly 6 digits",Ne=>Ne&&/^\d{6}$/.test(Ne)||"First bill number must be 6 digits (000001-999999)",Ne=>Ne&&parseInt(Ne)>=1&&parseInt(Ne)<=999999||"First bill number must be between 000001 and 999999"],Pe=ee(()=>t.getters["doctorModule/currentDoctor"]?.doctorName||null),ut=ee(()=>t.getters["doctorModule/isGSTRegistered"]);ee(()=>_.value?`https://${_.value}:${b.value}`:"");const wt=(Ne,me="An error occurred")=>{console.error(me,Ne),h.value=!0,y.value=`${me}: ${Ne?.response?.data?.message||Ne.message||"Unknown error"}`;const Ht=Ne?.response?.status===401||Ne?.response?.status===403;(Ne?.response?.status>=500||!Ne?.response)&&!Ht&&(s.value=`${me}. Please try again or contact support.`)},Xt=Ne=>{m.value=!0,p.value=Ne},bn=async Ne=>{try{await navigator.clipboard.writeText(Ne);let me="Text copied to clipboard";Ne.includes("http")?me="URL copied to clipboard":Ne.includes(":")?me="Server address copied to clipboard":Ne.match(/^\d+\.\d+\.\d+\.\d+$/)&&(me="IP address copied to clipboard"),Xt(me)}catch(me){console.error("Failed to copy to clipboard:",me),h.value=!0,y.value="Failed to copy to clipboard"}},wn=()=>{try{if(!F.value||typeof F.value!="string")return console.warn("Invalid ngrok QR path value:",F.value),"";let me=`file:///${F.value.replace(/\\/g,"/")}`;return E.value&&(me+=`?t=${E.value}`),me}catch(Ne){return console.error("Error processing ngrok QR URL:",Ne),""}},Zn=R(!1),ua=R(!1),Ce=[{title:"A4",value:"A4"},{title:"Letter",value:"Letter"},{title:"Legal",value:"Legal"}],He=R(!1),Re=Ne=>{try{if(!Ne||typeof Ne!="object")throw new Error("Invalid doctor data provided");C.value=Ne,He.value=!0}catch(me){wt(me,"Failed to open doctor edit dialog")}},Te=async()=>{try{He.value=!1,window.dispatchEvent(new Event("doctor-list-updated")),await Gr()}catch(Ne){wt(Ne,"Failed to refresh doctor details")}},Ve=R(!1),$e=async()=>{try{Ve.value=!1,window.dispatchEvent(new Event("doctor-list-updated")),await Gr()}catch(Ne){wt(Ne,"Failed to refresh doctor details after creation")}},dt=R(!1),Bt=Ne=>{try{if(!Ne||typeof Ne!="object")throw new Error("Invalid clinic data provided");D.value=Ne,dt.value=!0}catch(me){wt(me,"Failed to open clinic edit dialog")}},yt=async()=>{try{dt.value=!1,window.dispatchEvent(new Event("clinic-list-updated")),await Ps()}catch(Ne){wt(Ne,"Failed to refresh clinic details")}},gt=R(!1),pt=async()=>{try{gt.value=!1,window.dispatchEvent(new Event("clinic-list-updated")),await Ps()}catch(Ne){wt(Ne,"Failed to refresh clinic details after creation")}};An(()=>{try{console.log("Admin page mounted successfully")}catch(Ne){wt(Ne,"Failed to mount admin page")}}),tu(async()=>{try{r.value=!0,console.log("AdminPage component is about to be mounted.");const Ne=f();Ne&&(A.value=Ne);const me=[Ct(),Gr(),Ps(),ca(),Et()];(await Promise.allSettled(me)).forEach((un,Ut)=>{un.status==="rejected"&&console.error(`Promise ${Ut} failed:`,un.reason)}),Rt()}catch(Ne){wt(Ne,"Failed to initialize admin page")}finally{r.value=!1}}),Ge(U,async(Ne,me)=>{try{Ne&&Ne!==me&&(console.log(`Doctor ID changed from ${me} to ${Ne}, refetching configurations...`),await Ct(Ne),Rt())}catch(Ht){wt(Ht,"Failed to fetch configurations for new doctor")}},{immediate:!1}),Ge(A,async Ne=>{Ne==="usermanagement"&&(await Promise.all([pa(),ft()]),et.value.length||await on())},{immediate:!1}),Ge(A,async Ne=>{Ne==="mobiledetails"&&!g.value&&!_.value&&await tt(),Ne==="pharmacyconfig"&&(Z.value.pharmacyName||await ca())},{immediate:!1}),Ge(ut,Ne=>{if(!Ne&&A.value==="billconfig"){const me=f();me&&(A.value=me),Xt("GST Bill Series Configuration is only available for GST-registered doctors")}},{immediate:!0}),Ge([n,()=>a("admin.vitals").value],()=>{if(!(()=>{switch(A.value){case"vitalsconfig":return a("admin.vitals").value;case"rxprintdetails":case"mobiledetails":case"doctordetails":case"clinicdetails":case"receiptconfig":case"billconfig":case"pharmacyconfig":case"usermanagement":return n.value;default:return!0}})()){const me=f();me&&(A.value=me)}},{immediate:!0}),ha(()=>{try{r.value=!1,s.value=null,re.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:null,useHeader:!0,pageSize:"A4",headerImagePath:""},We.value="",ue.value=null,Z.value={pharmacyName:"",addressAndContactInfo:"",gstNumber:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"},ss.value=[],Ir.value=[],console.log("Admin page cleanup completed")}catch(Ne){console.error("Error during admin page cleanup:",Ne)}});const tt=async()=>{try{S.value=!0;const Ne=await wAe();if(!Ne.success||!Ne.data)throw new Error(Ne.error||"Invalid response received from server");const me=Ne.data;g.value=me.path||"",_.value=me.ipAddress||"",b.value=me.port||29200,B.value=me.ngrokTunnelUrl||"",F.value=me.ngrokQrPath||"",T.value=me.ngrokEndpointUrl||"",console.log("QR Code data fetched - IP:",_.value,"Port:",b.value,"Path:",g.value),console.log("Ngrok data fetched - Tunnel:",B.value,"QR Path:",F.value,"Endpoint:",T.value),T.value?console.log(" Ngrok endpoint URL is available:",T.value):console.log(" Ngrok endpoint URL is NOT available"),F.value?console.log(" Ngrok QR path is available:",F.value):console.log(" Ngrok QR path is NOT available")}catch(Ne){if(Ne?.response?.status===401||Ne?.response?.status===403){console.log("Authentication required for mobile connection details"),g.value="",_.value="",b.value=29200,B.value="",F.value="",T.value="";return}wt(Ne,"Failed to fetch mobile connection details"),g.value="",_.value="",b.value=29200,B.value="",F.value="",T.value=""}finally{S.value=!1}},re=R({doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:null,useHeader:!0,useFooter:!0,pageSize:"A4",headerSize:1.8,headerImagePath:""}),ue=R(null),We=R(""),nt=R(!1),Yt=R(!1);Ge(Ee,Ne=>{Ne||(xe.value=!1)}),Ge(ue,async(Ne,me)=>{if(Ne&&Ne instanceof File&&Ne!==me&&!nt.value){const Ht=new FileReader;Ht.onload=un=>{We.value=un.target.result},Ht.readAsDataURL(Ne),console.log("File selected via watcher, auto-uploading:",Ne.name);try{await Na()}catch(un){console.error("Auto-upload failed:",un)}}else!Ne&&me&&(We.value="")});const Ct=async(Ne=null)=>{try{const me=Ne||U.value;if(!me)throw new Error("Doctor ID is required to fetch print configurations");console.log(`Fetching print configurations for doctor ID: ${me}`);const Ht=await Ch(me);if(Ht.error)throw Ht.error;if(!Ht.data){console.log("No existing configuration found, initializing with defaults for new user"),re.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:me,useHeader:!0,useFooter:!0,pageSize:"A4",headerSize:1.8,headerImagePath:""},We.value="",Xt("Please setup your print preferences.");return}const un=Ht.data;re.value={doctorName:un.doctorName||"",doctorDegrees:un.doctorDegrees||"",doctorRegistrationNumber:un.doctorRegistrationNumber||"",clinicAddress:un.clinicAddress||"",email:un.email||"",doctorId:me,useHeader:un.useHeader!==void 0?un.useHeader:!0,useFooter:un.useFooter!==void 0?un.useFooter:!0,pageSize:un.pageSize||"A4",headerSize:un.headerSize!==void 0&&un.headerSize!==null?un.headerSize:1.8,headerImagePath:un.headerImagePath||""},un.headerImagePath?Td(me,un.headerImagePath).then(Ut=>{We.value=Ut}).catch(Ut=>{console.error("Failed to get header image URL:",Ut),We.value=""}):We.value="",console.log("Configuration data fetched:",re.value)}catch(me){if(me?.response?.status===404){console.log("Print configuration not found - this is normal for new users");const un=Ne||U.value;re.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:un,useHeader:!0,useFooter:!0,pageSize:"A4",headerImagePath:""},We.value="",Xt("Please setup your print preferences.");return}wt(me,"Failed to fetch print configurations");const Ht=Ne||U.value;re.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:Ht,useHeader:!0,useFooter:!0,pageSize:"A4",headerImagePath:""},We.value=""}},Xe=async()=>{if(!ua.value)try{if(ua.value=!0,!Zn.value)throw new Error("Please fix validation errors before saving");const Ne=t.state.doctorModule.doctorId;if(!Ne)throw new Error("Doctor ID is required to save configurations");if(!re.value.doctorName?.trim())throw new Error("Doctor name is required");const me={doctorName:re.value.doctorName,doctorDegrees:re.value.doctorDegrees,doctorRegistrationNumber:re.value.doctorRegistrationNumber,clinicAddress:re.value.clinicAddress,email:re.value.email,useHeader:re.value.useHeader,useFooter:re.value.useFooter,pageSize:re.value.pageSize,headerSize:re.value.headerSize!==void 0&&re.value.headerSize!==null?re.value.headerSize:1.8,headerImagePath:re.value.headerImagePath||"",doctorId:Ne};console.log("Saving print configs with data:",me),await tc(it.post(`/print/${Ne}`,me)),Xt("Print configurations saved successfully")}catch(Ne){wt(Ne,"Failed to save print configurations")}finally{ua.value=!1}},Et=async()=>{try{G.value=!0;const{data:Ne,error:me}=await eT();if(me)throw me;ne.value=Array.isArray(Ne)?Ne:[]}catch(Ne){wt(Ne,"Failed to fetch pharmacies"),ne.value=[]}finally{G.value=!1}},ca=async()=>{try{console.log("Fetching pharmacy configurations...");const Ne=await hM();if(Ne.error)throw Ne.error;if(!Ne.data){console.log("No existing pharmacy configuration found, initializing with defaults"),Z.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"};return}const me=Ne.data,un=(me.header||"Add pharmacy details here").split(`
`),Ut=un[0]||"Add pharmacy details here",hn=un[1]||"",qn=(me.gstNumber||"Add GST number here").split(`
`),sn=qn[0]||"Add GST number here",rr=qn[1]||"";Z.value={pharmacyName:Ut,addressAndContactInfo:hn,gstNumber:sn,otherRegistrationInfo:rr,useHeader:me.useHeader!==void 0?me.useHeader===1||me.useHeader===!0:!0,pageSize:me.pageSize||"A4"},console.log("Pharmacy configuration data fetched:",Z.value)}catch(Ne){if(Ne?.response?.status===404){console.log("Pharmacy configuration not found - this is normal for new installations"),Z.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"};return}wt(Ne,"Failed to fetch pharmacy configurations"),Z.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"}}},Un=()=>{W.value=!0},Vr=async Ne=>{await Et(),await t.dispatch("pharmacyModule/fetchPharmacies"),Ne&&Ne.id&&(await Cn(),setTimeout(()=>{const me=ne.value.find(Ht=>Ht.id===Ne.id);me?(ie.value={prefix:"",seed:null},J.value=null,j.value=me,ae.value=!0):(ie.value={prefix:"",seed:null},J.value=null,j.value=Ne,ae.value=!0)},100))},Mn=Ne=>{O.value=Ne,Q.value=!0},ma=async Ne=>{j.value=Ne,ie.value={prefix:"",seed:null},J.value=null;try{const{data:me,error:Ht}=await wce(Ne.id);Ht?console.warn("Could not fetch latest series:",Ht):me&&me.identifier&&(J.value={identifier:me.identifier,prefix:me.prefix,seed:me.seed}),ae.value=!0}catch(me){console.warn("Error fetching latest series:",me),ae.value=!0}},Qn=Ne=>{if(!Ne||Ne.length<9)return"";const me=Ne.substring(0,3),Ht=Ne.substring(3),Ut=(parseInt(Ht)||0)+1;return`${me}${Ut.toString().padStart(6,"0")}`},fr=Ne=>Ne&&Ne.split(`
`)[0]||"",oo=Ne=>{if(!Ne)return"";const me=Ne.split(`
`);return me.length>1?me[1]:""},Qs=Ne=>Ne&&Ne.split(`
`)[0]||"",Mi=Ne=>{if(!Ne)return"";const me=Ne.split(`
`);return me.length>1?me[1]:""},Zu=async()=>{if(j.value)try{fe.value=!0;const{data:Ne,error:me}=await xce(j.value.id,ie.value.prefix,"",ie.value.seed);if(me)throw me;Xt("Pharmacy series created successfully"),ae.value=!1,j.value=null,J.value=null,ie.value={prefix:"",seed:null}}catch(Ne){wt(Ne,"Failed to create pharmacy series")}finally{fe.value=!1}},ss=R([]),Gr=async()=>{try{const Ne=await aE();if(!Ne?.data){console.warn("No doctor data found in response"),ss.value=[];return}const me=Array.isArray(Ne.data)?Ne.data:[Ne.data];ss.value=me.filter(Ht=>Ht&&typeof Ht=="object"&&Ht.id),console.log("Doctor details fetched:",ss.value)}catch(Ne){wt(Ne,"Failed to fetch doctor details"),ss.value=[]}},Ir=R([]),Ps=async()=>{try{const Ne=await fM();if(!Ne?.data){console.warn("No clinic data found in response"),Ir.value=[];return}const me=Array.isArray(Ne.data)?Ne.data:[Ne.data];Ir.value=me.filter(Ht=>Ht&&typeof Ht=="object"&&Ht.id),console.log("Clinic details fetched:",Ir.value)}catch(Ne){wt(Ne,"Failed to fetch clinic details"),Ir.value=[]}},Rt=()=>{try{const Ne=U.value;if(!Ne){console.warn("No doctor ID available to load vitals preferences");return}const me=TT(Ne);L.value={pulse:me.pulse,bloodPressure:me.bloodPressure,temperature:me.temperature,respiratoryRate:me.respiratoryRate,height:me.height,serumBilirubin:me.serumBilirubin,bloodGlucoseFF:me.bloodGlucoseFF,bloodGlucosePP:me.bloodGlucosePP,bloodGlucoseRandom:me.bloodGlucoseRandom,serumCreatinine:me.serumCreatinine},console.log("Vitals preferences loaded:",L.value)}catch(Ne){wt(Ne,"Failed to load vitals preferences")}},Ar=async()=>{if(!H.value)try{H.value=!0;const Ne=U.value;if(!Ne)throw new Error("Doctor ID is required to save vitals preferences");const me={...L.value,weight:!0};if(eke(Ne,me))Xt("Vitals preferences saved successfully");else throw new Error("Failed to save preferences")}catch(Ne){wt(Ne,"Failed to save vitals preferences")}finally{H.value=!1}},Rn=async()=>{if(!te.value)try{if(te.value=!0,!de.value)throw new Error("Please fix validation errors before creating series");const Ne=U.value;if(!Ne)throw new Error("Doctor ID is required to create receipt series");if(!oe.value.prefix?.trim())throw new Error("Prefix is required");if(!oe.value.suffix?.trim())throw new Error("First receipt number is required");const un=(parseInt(oe.value.suffix)-1).toString().padStart(6,"0");console.log("Creating receipt series with:",{doctorId:Ne,prefix:oe.value.prefix,suffix:un,firstReceiptWillBe:oe.value.suffix});const Ut=await YIe(Ne,oe.value.prefix,un);if(Ut.error)throw Ut.error;Xt(`Receipt series created successfully. First receipt will be: ${oe.value.prefix}${oe.value.suffix}`),oe.value={prefix:"",suffix:""},de.value=!1}catch(Ne){wt(Ne,"Failed to create receipt series")}finally{te.value=!1}},os=async()=>{if(!le.value)try{if(le.value=!0,!ce.value)throw new Error("Please fix validation errors before creating bill series");const Ne=U.value;if(!Ne)throw new Error("Doctor ID is required to create bill series");if(!q.value.prefix?.trim())throw new Error("Prefix is required");if(!q.value.suffix?.trim())throw new Error("First bill number is required");const un=(parseInt(q.value.suffix)-1).toString().padStart(6,"0");console.log("Creating bill series with:",{doctorId:Ne,prefix:q.value.prefix,suffix:un,firstBillWillBe:q.value.suffix});const Ut=await XIe(Ne,q.value.prefix,un);if(Ut.error)throw Ut.error;Xt(`Bill series created successfully. First bill will be: ${q.value.prefix}${q.value.suffix}`),q.value={prefix:"",suffix:""},ce.value=!1}catch(Ne){wt(Ne,"Failed to create bill series")}finally{le.value=!1}},pa=async()=>{z.value=!0;try{const Ne=await it.get("/admin/users");M.value=Ne.data.users||[]}catch(Ne){console.error("Failed to load users:",Ne),M.value=[]}finally{z.value=!1}},ft=async()=>{try{const me=(await it.get("/admin/users/features")).data.features||[];console.log("Loaded features:",me),me.forEach(Ht=>{console.log(`Feature ${Ht.id} (${Ht.name}):`,{hasActions:!!Ht.actions,actionsType:Array.isArray(Ht.actions)?"array":typeof Ht.actions,actionsLength:Array.isArray(Ht.actions)?Ht.actions.length:0,actions:Ht.actions})}),se.value=me}catch(Ne){console.error("Failed to load features:",Ne),se.value=[]}},on=async()=>{try{const Ne=await aE();et.value=Ne||[]}catch(Ne){console.error("Failed to load doctors:",Ne),et.value=[]}},Bn=Ne=>Ne?Ne.split(" ").map(me=>me[0]).join("").toUpperCase().slice(0,2):"?",Ma=Ne=>Ne?Ne.charAt(0).toUpperCase()+Ne.slice(1):"",lu=Ne=>{if(!Ne)return"";const me=se.value.find(rn=>rn&&rn.id===Ne);if(me)return me.name||Ne;let Ht=null,un=Ne;for(const rn of se.value)if(rn&&rn.id&&Ne.startsWith(`${rn.id}.`)){Ht=rn,un=Ne.substring(rn.id.length+1);break}if(!Ht){const rn=Ne.split(".");if(rn.length>=2){const qn=rn[0];Ht=se.value.find(sn=>sn&&sn.id===qn),un=rn.slice(1).join(".")}}const Ut=Ht?Ht.name||Ht.id:Ne.split(".")[0];let hn=un;if(Ht&&Ht.actions){const rn=Ht.actions.find(qn=>qn&&qn.id===Ne);if(rn)hn=rn.action?rn.action.charAt(0).toUpperCase()+rn.action.slice(1):un;else{const qn=un.split(".");hn=qn[qn.length-1].charAt(0).toUpperCase()+qn[qn.length-1].slice(1)}}else{const rn=un.split(".");hn=rn[rn.length-1].charAt(0).toUpperCase()+rn[rn.length-1].slice(1)}return`${Ut}: ${hn}`},Hh=async()=>{se.value.length||await ft(),et.value.length||await on(),Se.value={name:"",email:"",passcode:"",doctorId:null,permissions:["home"],selectedFeatures:["home"]},_e.value=null,be.value=!0},cm=async()=>{if(console.log("[createUser] ========== FUNCTION CALLED =========="),console.log("[createUser] createUserLoading:",ye.value),console.log("[createUser] createUserValid:",Fe.value),console.log("[createUser] Form ref exists:",!!Qe.value),ye.value){console.log("[createUser] Already loading, returning early");return}if(Qe.value){const{valid:Ne}=await Qe.value.validate();console.log("[createUser] Form validation result:",Ne),Ne||console.warn("[createUser] Form is not valid, but proceeding anyway for debugging")}console.log("[createUser] Setting loading to true"),ye.value=!0;try{console.log("[createUser] Starting user creation process"),console.log("[createUser] newUser.value:",Se.value);const Ne=pl(Se.value.permissions||[],Se.value.selectedFeatures||[],se.value);if(console.log("[createUser] Creating user with permissions:",{selectedFeatures:Se.value.selectedFeatures,permissions:Ne,permissionsCount:Ne.length}),console.log("[createUser] About to make API call to /admin/users"),console.log("[createUser] Request payload:",{name:Se.value.name,email:Se.value.email,passcode:Se.value.passcode,doctorId:Se.value.doctorId,role:Se.value.role,permissions:Ne}),console.log("[createUser] apiClient:",it),console.log("[createUser] apiClient baseURL:",it.defaults?.baseURL),console.log("[createUser] apiClient defaults:",it.defaults),!it.defaults?.baseURL)throw console.error("[createUser] ERROR: API client baseURL is not set!"),new Error("API client is not initialized. Please refresh the page.");console.log("[createUser] Making POST request to:",`${it.defaults.baseURL}/admin/users`);const me=await it.post("/admin/users",{name:Se.value.name,email:Se.value.email,passcode:Se.value.passcode,doctorId:Se.value.doctorId,role:Se.value.role,permissions:Ne});console.log("[createUser] API call successful, response:",me.data),me.data.success&&(Xt(`User "${Se.value.name}" created successfully`),be.value=!1,await pa())}catch(Ne){console.error("[createUser] Error occurred:",Ne),console.error("[createUser] Error details:",{message:Ne.message,response:Ne.response?.data,status:Ne.response?.status,config:Ne.config});const me=Ne.response?.data?.code,Ht=Ne.response?.data?.error||Ne.message;me==="PASSCODE_NOT_UNIQUE"||Ht?.toLowerCase().includes("passcode")?_e.value="This passcode is already in use by another user. Please use a different unique passcode.":(_e.value=null,wt(Ne,"Failed to create user"))}finally{console.log("[createUser] Finally block - setting loading to false"),ye.value=!1}},dm=async Ne=>{try{if(se.value.length||await ft(),et.value.length||await on(),!se.value||se.value.length===0){console.error("Features not loaded"),alert("Failed to load features. Please try again.");return}if(!Ne||!Ne.id){console.error("Invalid user data:",Ne),alert("Invalid user data");return}const me=[],Ht=Ne.permissions||[];for(const un of se.value){if(!un||!un.id)continue;if((!un.actions||un.actions.length===0)&&Ht.includes(un.id)){me.push(un.id);continue}Ht.some(hn=>!hn||typeof hn!="string"?!1:hn===un.id||hn.startsWith(`${un.id}.`))&&me.push(un.id)}Ht.includes("home")||Ht.push("home"),me.includes("home")||me.push("home"),mt.value={id:Ne.id,name:Ne.name||"",email:Ne.email||"",doctorId:Ne.doctorId||null,role:Ne.role||null,isAdmin:Ne.isAdmin===!0,permissions:Array.isArray(Ht)?[...Ht]:["home"],selectedFeatures:Array.isArray(me)?[...me]:["home"]},(!mt.value.permissions||!Array.isArray(mt.value.permissions))&&(mt.value.permissions=["home"]),(!mt.value.selectedFeatures||!Array.isArray(mt.value.selectedFeatures))&&(mt.value.selectedFeatures=["home"]),mt.value.permissions.includes("home")||mt.value.permissions.push("home"),mt.value.selectedFeatures.includes("home")||mt.value.selectedFeatures.push("home"),Ee.value=!0}catch(me){console.error("Error opening edit user dialog:",me),alert("Error opening user editor. Please try again.")}},fm=async()=>{if(!je.value){je.value=!0;try{const Ne=mt.value.isAdmin===!0;if(await it.put(`/admin/users/${mt.value.id}`,{name:mt.value.name,email:mt.value.email,role:mt.value.role,isActive:!0,isAdmin:Ne}),Ne)Xt("Admin user updated successfully");else{const me=pl(mt.value.permissions||[],mt.value.selectedFeatures||[],se.value);mt.value.permissions=me,console.log("Saving permissions:",{selectedFeatures:mt.value.selectedFeatures,permissions:me,permissionsCount:me.length}),await it.put(`/admin/users/${mt.value.id}/permissions`,{permissions:me}),Xt("User updated successfully")}Ee.value=!1,await pa()}catch(Ne){wt(Ne,"Failed to update user")}finally{je.value=!1}}},pl=(Ne,me,Ht)=>{if(!Array.isArray(Ne)||!Array.isArray(me)||!Array.isArray(Ht))return Ne||[];const un=new Set;me.forEach(rn=>{const qn=Ht.find(sn=>sn&&sn.id===rn);qn&&(qn.actions&&Array.isArray(qn.actions)&&qn.actions.forEach(sn=>{sn&&sn.id&&un.add(sn.id)}),(!qn.actions||qn.actions.length===0)&&un.add(rn))});const Ut=new Set;Ne.forEach(rn=>{rn&&typeof rn=="string"&&me.some(sn=>rn.startsWith(`${sn}.`)||rn===sn)&&Ut.add(rn)}),me.forEach(rn=>{const qn=Ht.find(sn=>sn&&sn.id===rn);qn&&((!qn.actions||qn.actions.length===0)&&Ut.add(rn),Ne.includes(rn)&&Ut.add(rn))});const hn=Array.from(Ut);return console.log("Cleaned permissions:",{original:Ne.length,cleaned:hn.length,added:Ut.size-Ne.length,selectedFeatures:me,validPermissionIds:Array.from(un)}),hn},Oi=Ne=>{kt.value=Ne,xt.value="",Be.value=!0},Am=async Ne=>{bt.value=Ne,Ze.value="",Vt.value=null,qt.value=!1,Ot.value=!0,await mm(Ne)},mm=async Ne=>{if(!Dt.value){Dt.value=!0,Vt.value=null;try{const me=await it.get(`/admin/users/${Ne.id}/passcode`);me.data.success&&me.data.passcode?Ze.value=me.data.passcode:(Ze.value="",Vt.value=null)}catch(me){me.response?.status===404||me.response?.status===400?(Ze.value="",Vt.value=null):(Vt.value=me.response?.data?.error||"Failed to retrieve passcode",Ze.value="")}finally{Dt.value=!1}}},gf=async()=>{if(Ze.value)try{await navigator.clipboard.writeText(Ze.value),Xt("Passcode copied to clipboard")}catch(Ne){console.error("Failed to copy passcode to clipboard:",Ne),h.value=!0,y.value="Failed to copy passcode to clipboard"}},uu=async()=>{if(!Ye.value){Ye.value=!0;try{(await it.put(`/admin/users/${kt.value.id}/passcode`,{passcode:xt.value})).data.success&&(Xt(`Passcode reset for "${kt.value.name}"`),Be.value=!1,xt.value="",ec(kt.value)&&setTimeout(()=>{window.location.reload()},1e3))}catch(Ne){wt(Ne,"Failed to reset passcode")}finally{Ye.value=!1}}},$h=ph();t2(it);const Qh=ee(()=>$h.userId.value),ec=Ne=>!Ne||!Ne.id?!1:Ne.id===Qh.value,Xo=Ne=>{ln.value=Ne,Dn.value="",zt.value=!0},Gh=async()=>{if(!(vt.value||!ln.value)){if(ec(ln.value)){wt(null,"Cannot delete your own account"),zt.value=!1;return}if(Dn.value!=="DELETE"){wt(null,"Please type DELETE to confirm");return}vt.value=!0;try{(await it.delete(`/admin/users/${ln.value.id}`)).data.success&&(Xt(`User "${ln.value.name}" deleted successfully`),zt.value=!1,Dn.value="",ln.value=null,await pa())}catch(Ne){Ne.response?.status===400&&Ne.response?.data?.error?.includes("own account")?wt(Ne,"Cannot delete your own account"):wt(Ne,"Failed to delete user")}finally{vt.value=!1}}},zh=()=>{console.warn("Ngrok QR code image failed to load"),h.value=!0,y.value="Remote access QR code could not be loaded. Please refresh the page."},td=async()=>{if(!x.value)try{x.value=!0,console.log(" Clearing existing ngrok data..."),B.value="",F.value="",T.value="",E.value=null,console.log(" Regenerating ngrok tunnel...");const Ne=await bAe();if(!Ne.success)throw new Error(Ne.error||"Failed to regenerate ngrok tunnel");const me=Ne.data;B.value=me.ngrokTunnelUrl||"",F.value=me.ngrokQrPath||"",T.value=me.ngrokEndpointUrl||"",E.value=Date.now(),console.log(" Ngrok tunnel regenerated successfully"),console.log("New tunnel URL:",B.value),console.log("New QR path:",F.value),console.log("New endpoint URL:",T.value),Xt("Remote access regenerated successfully. New QR code and URL are now available.")}catch(Ne){console.error("Failed to regenerate ngrok tunnel:",Ne),wt(Ne,"Failed to regenerate remote access")}finally{x.value=!1}},tc=(Ne,me=3e4)=>Promise.race([Ne,new Promise((Ht,un)=>setTimeout(()=>un(new Error("Request timeout")),me))]),vm=Ne=>{console.log("File input changed")},Na=async()=>{if(ue.value&&!nt.value)try{nt.value=!0;const Ne=U.value;if(!Ne)throw new Error("Doctor ID is required to upload header image");let me=ue.value;const Ht=me.size;if(me.type.startsWith("image/")&&Ht>100*1024)try{console.log(`Compressing header image: ${me.name} (${(Ht/1024/1024).toFixed(2)}MB)`),me=await us(me,{maxSizeMB:2,maxWidthOrHeight:1200,useWebWorker:!0,fileType:"image/jpeg",initialQuality:.85});const qn=me.size,sn=((1-qn/Ht)*100).toFixed(1);console.log(`Header image compressed: ${(qn/1024/1024).toFixed(2)}MB (${sn}% reduction)`)}catch(rn){console.warn("Image compression failed, using original file:",rn)}const un=await vH(Ne,me);if(un.error)throw un.error;let Ut=un.data?.filename||un.data?.data?.filename;if(!Ut){const rn=ue.value.name.split(".").pop()?.toLowerCase()||"jpg";Ut=`prescription_header_${Ne}.${rn==="png"?"png":"jpg"}`,console.warn("No filename in upload response, using constructed:",Ut)}re.value.headerImagePath=Ut,console.log("Header image path updated to:",Ut);const hn={doctorName:re.value.doctorName||"",doctorDegrees:re.value.doctorDegrees||"",doctorRegistrationNumber:re.value.doctorRegistrationNumber||"",clinicAddress:re.value.clinicAddress||"",email:re.value.email||"",useHeader:re.value.useHeader!==void 0?re.value.useHeader:!0,useFooter:re.value.useFooter!==void 0?re.value.useFooter:!0,pageSize:re.value.pageSize||"A4",headerSize:re.value.headerSize!==void 0&&re.value.headerSize!==null?re.value.headerSize:1.8,headerImagePath:Ut,doctorId:Ne};console.log("Auto-saving print configs with headerImagePath:",hn),await tc(it.post(`/print/${Ne}`,hn)),Ut&&Td(Ne,Ut).then(rn=>{We.value=rn}).catch(rn=>{console.error("Failed to get header image URL:",rn)}),ue.value=null,Xt("Header image uploaded and saved successfully")}catch(Ne){wt(Ne,"Failed to upload header image")}finally{nt.value=!1}},Ea=async()=>{if(!Yt.value)try{Yt.value=!0;const Ne=U.value;if(!Ne)throw new Error("Doctor ID is required to delete header image");const me=await hH(Ne);if(me.error)throw me.error;re.value.headerImagePath="",We.value="",ue.value=null,Xt("Header image removed successfully")}catch(Ne){wt(Ne,"Failed to remove header image")}finally{Yt.value=!1}};return(Ne,me)=>{const Ht=I("v-alert"),un=I("v-progress-circular"),Ut=I("v-col"),hn=I("v-row"),rn=I("v-card-title"),qn=I("v-card-subtitle"),sn=I("v-card"),rr=I("v-tooltip"),Fn=I("v-btn"),nd=I("v-switch"),ad=I("v-img"),is=I("v-file-input"),_r=I("v-text-field"),nc=I("v-textarea"),ac=I("v-select"),Hi=I("v-form"),Gs=I("v-tabs-window-item"),gs=I("v-card-text"),aa=I("v-icon"),cu=I("v-card-item"),zr=I("v-divider"),$i=I("v-chip"),zs=I("v-dialog"),Fr=I("v-checkbox"),rc=I("v-avatar"),du=I("v-tabs-window"),ga=I("v-spacer"),Ds=I("v-card-actions"),Jo=I("v-snackbar"),hm=I("v-main");return P(),he(hm,{class:"mt-5"},{default:u(()=>[s.value?(P(),he(Ht,{key:0,type:"error",dismissible:"","onClick:close":me[0]||(me[0]=Ke=>s.value=null),class:"ma-3"},{default:u(()=>[N(K(s.value),1)]),_:1})):ge("",!0),r.value?(P(),he(hn,{key:1,"no-gutters":"",class:"pa-3",style:{height:"88%"}},{default:u(()=>[i(Ut,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[v("div",JIe,[i(un,{indeterminate:"",color:"primary",size:"64"}),me[91]||(me[91]=v("div",{class:"mt-4 text-subtitle-1"},"Loading admin settings...",-1))])]),_:1})]),_:1})):s.value?ge("",!0):(P(),Ae(ze,{key:2},[i(hn,{"aria-label":"main row",class:"pl-3 pr-3",style:{height:"100%"}},{default:u(()=>[i(Ut,{cols:"4",order:"1",class:"pr-1",style:{height:"92%"}},{default:u(()=>[i(sn,{color:"surfaceContainer",flat:"",style:{height:"100%"}},{default:u(()=>[v("div",ZIe,[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[o.value?(P(),Ae("div",eFe,[i(rn,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...me[92]||(me[92]=[N(" evamed Setup ",-1)])]),_:1}),i(En,{permission:"admin.setup.doctor"},{default:u(()=>[i(rr,{text:"Doctor Setup Details"},{activator:u(({props:Ke})=>[i(sn,Ie({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":A.value==="doctordetails","card-status-default":A.value!=="doctordetails"}],onClick:me[1]||(me[1]=wa=>A.value="doctordetails")},Ke),{default:u(()=>[i(rn,{class:"pb-0 pt-2"},{default:u(()=>[...me[93]||(me[93]=[v("div",{class:"text-body-2 font-weight-bold"},"Doctor Setup",-1)])]),_:1}),i(qn,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...me[94]||(me[94]=[N("Name, Specialization ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),i(En,{permission:"admin.setup.clinic"},{default:u(()=>[i(rr,{text:"Clinic Setup Details"},{activator:u(({props:Ke})=>[i(sn,Ie({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":A.value==="clinicdetails","card-status-default":A.value!=="clinicdetails"}],onClick:me[2]||(me[2]=wa=>A.value="clinicdetails")},Ke),{default:u(()=>[i(rn,{class:"pb-0 pt-2"},{default:u(()=>[...me[95]||(me[95]=[v("div",{class:"text-body-2 font-weight-bold"},"Clinic Setup",-1)])]),_:1}),i(qn,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...me[96]||(me[96]=[N("Name, Address ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),i(En,{permission:"admin.setup.remote"},{default:u(()=>[i(rr,{text:"Remote Access"},{activator:u(({props:Ke})=>[i(sn,Ie({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":A.value==="mobiledetails","card-status-default":A.value!=="mobiledetails"}],onClick:me[3]||(me[3]=wa=>A.value="mobiledetails")},Ke),{default:u(()=>[i(rn,{class:"pb-0 pt-2"},{default:u(()=>[...me[97]||(me[97]=[v("div",{class:"text-body-2 font-weight-bold"},"Remote Access",-1)])]),_:1}),i(qn,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...me[98]||(me[98]=[N("Server address, QR Code ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),i(En,{permission:"admin.setup.pharmacy"},{default:u(()=>[i(rr,{text:"Pharmacy Configurations"},{activator:u(({props:Ke})=>[i(sn,Ie({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":A.value==="pharmacyconfig","card-status-default":A.value!=="pharmacyconfig"}],onClick:me[4]||(me[4]=wa=>A.value="pharmacyconfig")},Ke),{default:u(()=>[i(rn,{class:"pb-0 pt-2"},{default:u(()=>[...me[99]||(me[99]=[v("div",{class:"text-body-2 font-weight-bold"},"Pharmacy Configurations",-1)])]),_:1}),i(qn,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...me[100]||(me[100]=[N("Header, GST Number ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1})])):ge("",!0),l.value?(P(),Ae("div",tFe,[i(rn,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...me[101]||(me[101]=[N(" Doctor Specific Setup ",-1)])]),_:1}),i(En,{permission:"admin.vitals"},{default:u(()=>[i(rr,{text:"Configure Vitals Parameters"},{activator:u(({props:Ke})=>[i(sn,Ie({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base vitals-config-card",{"card-status-selected":A.value==="vitalsconfig","card-status-default":A.value!=="vitalsconfig"}],onClick:me[5]||(me[5]=wa=>A.value="vitalsconfig")},Ke),{default:u(()=>[i(rn,{class:"pb-0 pt-2"},{default:u(()=>[...me[102]||(me[102]=[v("div",{class:"text-body-2 font-weight-bold"},"Vitals Configuration",-1)])]),_:1}),i(qn,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...me[103]||(me[103]=[N("Select relevant parameters ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),i(En,{permission:"admin.setup.prescription"},{default:u(()=>[i(rr,{text:"Print Configuration Details"},{activator:u(({props:Ke})=>[i(sn,Ie({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":A.value==="rxprintdetails","card-status-default":A.value!=="rxprintdetails"}],onClick:me[6]||(me[6]=wa=>A.value="rxprintdetails")},Ke),{default:u(()=>[i(rn,{class:"pb-0 pt-2"},{default:u(()=>[...me[104]||(me[104]=[v("div",{class:"text-body-2 font-weight-bold"},"Prescription Print Configuration",-1)])]),_:1}),i(qn,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...me[105]||(me[105]=[N("Name, Registration number ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),i(En,{permission:"admin.setup.receipt"},{default:u(()=>[i(rr,{text:"Payment Receipt Configuration Details"},{activator:u(({props:Ke})=>[i(sn,Ie({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":A.value==="receiptconfig","card-status-default":A.value!=="receiptconfig"}],onClick:me[7]||(me[7]=wa=>A.value="receiptconfig")},Ke),{default:u(()=>[i(rn,{class:"pb-0 pt-2"},{default:u(()=>[...me[106]||(me[106]=[v("div",{class:"text-body-2 font-weight-bold"},"Payment Receipt Configuration",-1)])]),_:1}),i(qn,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...me[107]||(me[107]=[N("Setup receipt series prefix and suffix ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),i(En,{permission:"admin.setup.bill"},{default:u(()=>[ut.value?(P(),he(rr,{key:0,text:ut.value?"GST Bill Series Configuration Details":"GST Bill Series Configuration (Only available for GST-registered doctors)"},{activator:u(({props:Ke})=>[i(sn,Ie({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":A.value==="billconfig","card-status-default":A.value!=="billconfig"}],onClick:me[8]||(me[8]=()=>{ut.value&&(A.value="billconfig")})},Ke),{default:u(()=>[i(rn,{class:"pb-0 pt-2"},{default:u(()=>[...me[108]||(me[108]=[v("div",{class:"text-body-2 font-weight-bold"},"GST Bill Series Configuration",-1)])]),_:1}),i(qn,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...me[109]||(me[109]=[N("Setup GST bill series prefix and suffix ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1},8,["text"])):ge("",!0)]),_:1})])):ge("",!0),c.value?(P(),Ae("div",nFe,[i(rn,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...me[110]||(me[110]=[N(" Access Control ",-1)])]),_:1}),i(En,{"require-admin":""},{default:u(()=>[i(rr,{text:"Manage Users and Permissions"},{activator:u(({props:Ke})=>[i(sn,Ie({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":A.value==="usermanagement","card-status-default":A.value!=="usermanagement"}],onClick:me[9]||(me[9]=wa=>A.value="usermanagement")},Ke),{default:u(()=>[i(rn,{class:"pb-0 pt-2"},{default:u(()=>[...me[111]||(me[111]=[v("div",{class:"text-body-2 font-weight-bold"},"User Management",-1)])]),_:1}),i(qn,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...me[112]||(me[112]=[N("Create users, assign permissions ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1})])):ge("",!0)]),_:1})]),_:1})])]),_:1})]),_:1}),i(Ut,{cols:"8",order:"2",class:"pl-1",style:{height:"100%"}},{default:u(()=>[i(sn,{color:"surfaceContainer",flat:"",style:{height:"92%"}},{default:u(()=>[i(du,{modelValue:A.value,"onUpdate:modelValue":me[49]||(me[49]=Ke=>A.value=Ke)},{default:u(()=>[i(Gs,{value:"rxprintdetails"},{default:u(()=>[i(hn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"8",class:"d-flex align-center"},{default:u(()=>[v("div",aFe,[Pe.value?(P(),Ae(ze,{key:0},[N(" Editing configurations for: "+K(Pe.value),1)],64)):(P(),Ae(ze,{key:1},[N(" Print Configuration Settings ")],64))])]),_:1}),i(Ut,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[i(Fn,{onClick:Xe,disabled:!Zn.value||ua.value,loading:ua.value,class:"btn-hover-enhanced"},{default:u(()=>[...me[113]||(me[113]=[N(" SAVE ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",rFe,[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12",color:"surfaceContainer"},{default:u(()=>[i(Hi,{modelValue:Zn.value,"onUpdate:modelValue":me[20]||(me[20]=Ke=>Zn.value=Ke),"validate-on":"blur",onSubmit:gn(Xe,["prevent"])},{default:u(()=>[i(hn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[i(Ut,{cols:"6",class:"py-0 pl-2 pr-2"},{default:u(()=>[i(nd,{modelValue:re.value.useHeader,"onUpdate:modelValue":me[10]||(me[10]=Ke=>re.value.useHeader=Ke),label:"Use Header on Prescription",hint:"When disabled, blank space will be left at the top of each page for your custom prescription header",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"6",class:"py-0 pl-2 pr-2"},{default:u(()=>[i(nd,{modelValue:re.value.useFooter,"onUpdate:modelValue":me[11]||(me[11]=Ke=>re.value.useFooter=Ke),label:"Use Footer on Prescription",hint:"When disabled, no footer will be printed at the bottom of each page",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"12",class:"py-2 mb-4"},{default:u(()=>[i(sn,{variant:"outlined",class:"pa-3"},{default:u(()=>[i(rn,{class:"text-subtitle-2 pa-0 mb-2"},{default:u(()=>[...me[114]||(me[114]=[N("Prescription Header Image",-1)])]),_:1}),i(qn,{class:"text-caption pa-0 mb-3"},{default:u(()=>[...me[115]||(me[115]=[N(" Upload an image to replace the text-based header. Image will be used when available. ",-1)])]),_:1}),We.value?(P(),Ae("div",sFe,[i(ad,{src:We.value,"max-height":"150",contain:"",class:"mb-2",style:{border:"1px solid #e0e0e0","border-radius":"4px"}},null,8,["src"]),i(Fn,{onClick:Ea,color:"error",variant:"outlined",size:"small",loading:Yt.value},{default:u(()=>[...me[116]||(me[116]=[N(" Remove Image ",-1)])]),_:1},8,["loading"])])):(P(),Ae("div",oFe,[i(is,{modelValue:ue.value,"onUpdate:modelValue":me[12]||(me[12]=Ke=>ue.value=Ke),label:"Upload Header Image",accept:"image/jpeg,image/jpg,image/png","prepend-icon":"mdi-image",variant:"outlined",density:"compact",disabled:nt.value,loading:nt.value,onChange:vm,class:"input-hover"},null,8,["modelValue","disabled","loading"])]))]),_:1})]),_:1}),i(Ut,{cols:"12"},{default:u(()=>[i(_r,{modelValue:re.value.doctorName,"onUpdate:modelValue":me[13]||(me[13]=Ke=>re.value.doctorName=Ke),label:"Doctor Name (Dr.) *",variant:"outlined",clearable:"",density:"compact",rows:"10",rules:Oe(Cr),class:"input-hover"},null,8,["modelValue","rules"])]),_:1}),i(Ut,{cols:"12"},{default:u(()=>[i(nc,{"auto-grow":"",label:"Doctor Qualification *",clearable:"",rows:"2","row-height":"10",variant:"outlined",density:"compact",class:"input-hover",rules:Oe(Cr),modelValue:re.value.doctorDegrees,"onUpdate:modelValue":me[14]||(me[14]=Ke=>re.value.doctorDegrees=Ke)},null,8,["rules","modelValue"])]),_:1}),i(Ut,{cols:"12"},{default:u(()=>[i(_r,{modelValue:re.value.doctorRegistrationNumber,"onUpdate:modelValue":me[15]||(me[15]=Ke=>re.value.doctorRegistrationNumber=Ke),label:"Registration Number *",clearable:"",density:"compact",variant:"outlined",rows:"10",rules:Oe(KM),class:"input-hover"},null,8,["modelValue","rules"])]),_:1}),i(Ut,{cols:"12"},{default:u(()=>[i(nc,{"auto-grow":"",label:"Clinic Details *",clearable:"",rows:"2","row-height":"10",variant:"outlined",density:"compact",class:"input-hover",rules:Oe(Cr),modelValue:re.value.clinicAddress,"onUpdate:modelValue":me[16]||(me[16]=Ke=>re.value.clinicAddress=Ke)},null,8,["rules","modelValue"])]),_:1}),i(Ut,{cols:"12"},{default:u(()=>[i(_r,{modelValue:re.value.email,"onUpdate:modelValue":me[17]||(me[17]=Ke=>re.value.email=Ke),label:"Email (optional)",variant:"outlined",density:"compact",rows:"10",class:"input-hover"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"12"},{default:u(()=>[i(ac,{modelValue:re.value.pageSize,"onUpdate:modelValue":me[18]||(me[18]=Ke=>re.value.pageSize=Ke),label:"Page Size",items:Ce,variant:"outlined",density:"compact",class:"input-hover"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"12"},{default:u(()=>[i(_r,{modelValue:re.value.headerSize,"onUpdate:modelValue":me[19]||(me[19]=Ke=>re.value.headerSize=Ke),modelModifiers:{number:!0},label:"Header Size (inches)",variant:"outlined",density:"compact",type:"number",step:"0.1",min:"0.7",max:"2.8",suffix:"in",hint:"Header size in inches (0.7 to 2.8)","persistent-hint":"",rules:[Ke=>Ke==null||Ke>=.7&&Ke<=2.8||"Header size must be between 0.7 and 2.8 inches"],class:"input-hover"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1}),i(Gs,{value:"mobiledetails"},{default:u(()=>[i(hn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"10"}),i(Ut,{cols:"2",class:"d-flex justify-end ma-3"})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",iFe,[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(rn,null,{default:u(()=>[...me[117]||(me[117]=[N("Remote Access via Internet",-1)])]),_:1}),i(gs,{class:"ma-0 pa-0 pl-4 pb-2"},{default:u(()=>[T.value?(P(),Ae("div",lFe," Industry first access from other locations and devices using evamed True Private Network ")):(P(),Ae("div",uFe,[...me[118]||(me[118]=[N(" Remote access is not currently available.",-1),v("br",null,null,-1),N(" Ngrok tunnel may not be configured or running. ",-1)])]))]),_:1})]),_:1})]),_:1}),i(hn,{"no-gutters":"",class:"pa-4"},{default:u(()=>[S.value?(P(),he(Ut,{key:0,cols:"12",class:"d-flex justify-center align-center pa-4"},{default:u(()=>[i(un,{indeterminate:"",color:"primary"}),me[119]||(me[119]=v("span",{class:"ml-2"},"Loading mobile connection details...",-1))]),_:1})):x.value?(P(),he(Ut,{key:1,cols:"12",class:"d-flex flex-column justify-center align-center pa-4"},{default:u(()=>[i(un,{indeterminate:"",color:"primary",size:"64"}),me[120]||(me[120]=v("span",{class:"mt-3 text-subtitle-2"},"Regenerating Remote Access...",-1)),me[121]||(me[121]=v("span",{class:"mt-1 text-caption text-medium-emphasis"},"Creating new tunnel and QR code",-1))]),_:1})):(P(),Ae(ze,{key:2},[i(Ut,{cols:"12",class:"d-flex justify-center mb-4"},{default:u(()=>[F.value&&wn()?(P(),he(ad,{src:wn(),contain:"",height:"150",width:"150",onError:zh,key:E.value},{placeholder:u(()=>[v("div",cFe,[i(un,{indeterminate:"",color:"primary"})])]),error:u(()=>[v("div",dFe,[i(Ht,{type:"error",variant:"tonal"},{default:u(()=>[...me[122]||(me[122]=[N(" Failed to load QR code ",-1)])]),_:1})])]),_:1},8,["src"])):(P(),he(Ht,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...me[123]||(me[123]=[v("div",{class:"text-center"},[v("div",{class:"text-subtitle-2 mb-2"},"Remote Access Not Available"),v("div",{class:"text-caption"},[N(" Ngrok tunnel is not running or not configured."),v("br"),N(" Check server logs for ngrok setup instructions. ")])],-1)])]),_:1}))]),_:1}),i(Ut,{cols:"12"},{default:u(()=>[T.value?(P(),he(_r,{key:0,"model-value":T.value,label:"Remote Access URL",readonly:"",variant:"outlined",density:"compact","append-inner-icon":"mdi-content-copy","onClick:appendInner":me[21]||(me[21]=Ke=>bn(T.value))},null,8,["model-value"])):(P(),he(Ht,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...me[124]||(me[124]=[v("div",{class:"text-center"},[v("div",{class:"text-subtitle-2 mb-1"},"Remote Access URL Not Available"),v("div",{class:"text-caption"}," Configure ngrok tunnel to enable remote access ")],-1)])]),_:1}))]),_:1}),i(Ut,{cols:"12",class:"mt-3 d-flex flex-column align-center"},{default:u(()=>[i(Fn,{onClick:td,disabled:x.value||S.value,loading:x.value,color:"primary",variant:"outlined",size:"small",density:"compact",class:"btn-hover-enhanced"},{default:u(()=>[i(aa,{start:"",size:"small"},{default:u(()=>[...me[125]||(me[125]=[N("mdi-refresh",-1)])]),_:1}),N(" "+K(x.value?"Regenerating...":"Regenerate Remote Access"),1)]),_:1},8,["disabled","loading"]),me[126]||(me[126]=v("div",{class:"text-caption text-medium-emphasis mt-1 text-center",style:{"font-size":"0.7rem"}}," This will create a new tunnel URL and QR code. The old URL will stop working. ",-1))]),_:1})],64))]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),i(Gs,{value:"doctordetails"},{default:u(()=>[i(hn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"10"}),i(Ut,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[i(Fn,{onClick:me[22]||(me[22]=Ke=>Ve.value=!0),class:"btn-hover-enhanced"},{default:u(()=>[...me[127]||(me[127]=[N("Create New",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12",color:"surfaceContainer"},{default:u(()=>[!ss.value||ss.value.length===0?(P(),he(Ht,{key:0,type:"info",variant:"tonal",class:"ma-3"},{default:u(()=>[...me[128]||(me[128]=[N(' No doctors found. Click "Create New" to add a doctor. ',-1)])]),_:1})):ge("",!0),(P(!0),Ae(ze,null,Jt(ss.value||[],Ke=>(P(),he(sn,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base",key:Ke?.id||Math.random()},{default:u(()=>[i(cu,{class:"pb-2"},{default:u(()=>[v("div",fFe,[v("div",AFe,[i(rn,{class:"text-h6 pa-0 mb-1"},{default:u(()=>[N(K(Ke?.doctorName||"Unknown Doctor"),1)]),_:2},1024),Ke?.doctorSpecialization?(P(),he(qn,{key:0,class:"text-body-2 pa-0"},{default:u(()=>[N(K(Ke?.doctorSpecialization),1)]),_:2},1024)):ge("",!0)]),i(rr,{text:"Edit Doctor Details"},{activator:u(({props:wa})=>[i(Fn,Ie({icon:"",variant:"outlined",size:"small"},{ref_for:!0},wa,{onClick:hi=>Re(Ke),class:"icon-btn-border"}),{default:u(()=>[...me[129]||(me[129]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024),i(zr,{class:"mx-4 mb-3"}),i(gs,{class:"pt-0"},{default:u(()=>[i(hn,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(Ut,{cols:"12",class:"mb-2"},{default:u(()=>[v("div",mFe,[i(aa,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...me[130]||(me[130]=[N("mdi-email-outline",-1)])]),_:1}),me[131]||(me[131]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Email:",-1)),Ke?.email&&Ke.email!=="Not specified"?(P(),Ae("a",{key:0,href:`mailto:${Ke.email}`,class:"text-body-2 text-primary text-decoration-none",onClick:me[23]||(me[23]=gn(()=>{},["stop"]))},K(Ke.email),9,vFe)):(P(),Ae("span",hFe,"Not specified"))])]),_:2},1024),i(Ut,{cols:"12",class:"mb-2"},{default:u(()=>[v("div",pFe,[i(aa,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...me[132]||(me[132]=[N("mdi-link-variant",-1)])]),_:1}),me[134]||(me[134]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Review Link:",-1)),Ke?.doctorReviewLink&&Ke.doctorReviewLink!=="Not specified"?(P(),Ae(ze,{key:0},[v("span",gFe,K(d(Ke.doctorReviewLink)),1),i(rr,{text:"Copy link"},{activator:u(({props:wa})=>[i(Fn,Ie({icon:"",variant:"text",size:"x-small",density:"compact"},{ref_for:!0},wa,{onClick:gn(hi=>bn(d(Ke.doctorReviewLink)),["stop"])}),{default:u(()=>[i(aa,{size:"small"},{default:u(()=>[...me[133]||(me[133]=[N("mdi-content-copy",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)],64)):(P(),Ae("span",yFe,"Not specified"))])]),_:2},1024),Ke?.isGST&&Ke?.gstIdentifier?(P(),he(Ut,{key:0,cols:"12",class:"mb-2"},{default:u(()=>[v("div",_Fe,[i(aa,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...me[135]||(me[135]=[N("mdi-receipt",-1)])]),_:1}),me[136]||(me[136]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"GST Number:",-1)),v("span",wFe,K(Ke.gstIdentifier),1)])]),_:2},1024)):ge("",!0)]),_:2},1024),v("div",bFe,[i($i,{color:Ke?.isGST?"success":"default",variant:Ke?.isGST?"tonal":"outlined",size:"small",density:"comfortable",class:"mr-2 mb-1"},{default:u(()=>[i(aa,{start:"",size:"small"},{default:u(()=>[N(K(Ke?.isGST?"mdi-check-circle":"mdi-cancel"),1)]),_:2},1024),N(" "+K(Ke?.isGST?"GST Registered":"Not GST registered"),1)]),_:2},1032,["color","variant"]),i($i,{color:Ke?.isPharmacy?"success":"default",variant:Ke?.isPharmacy?"tonal":"outlined",size:"small",density:"comfortable",class:"mb-1"},{default:u(()=>[i(aa,{start:"",size:"small"},{default:u(()=>[N(K(Ke?.isPharmacy?"mdi-check-circle":"mdi-cancel"),1)]),_:2},1024),N(" "+K(Ke?.isPharmacy?"Pharmacy Enabled":"Pharmacy Not Enabled"),1)]),_:2},1032,["color","variant"])])]),_:2},1024)]),_:2},1024))),128)),i(zs,{modelValue:He.value,"onUpdate:modelValue":me[24]||(me[24]=Ke=>He.value=Ke),"max-width":"40%",persistent:""},{default:u(()=>[i(BIe,{doctor:C.value,onClose:Te},null,8,["doctor"])]),_:1},8,["modelValue"]),i(zs,{modelValue:Ve.value,"onUpdate:modelValue":me[25]||(me[25]=Ke=>Ve.value=Ke),"max-width":"40%",persistent:""},{default:u(()=>[i(FIe,{onClose:$e})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(Gs,{value:"clinicdetails"},{default:u(()=>[i(hn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"10"}),i(Ut,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[i(Fn,{onClick:me[26]||(me[26]=Ke=>gt.value=!0),class:"btn-hover-enhanced"},{default:u(()=>[...me[137]||(me[137]=[N("Create New",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12",color:"surfaceContainer"},{default:u(()=>[!Ir.value||Ir.value.length===0?(P(),he(Ht,{key:0,type:"info",variant:"tonal",class:"ma-3"},{default:u(()=>[...me[138]||(me[138]=[N(' No clinics found. Click "Create New" to add a clinic. ',-1)])]),_:1})):ge("",!0),(P(!0),Ae(ze,null,Jt(Ir.value||[],Ke=>(P(),he(sn,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base",key:Ke?.id||Math.random()},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"10"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(rn,null,{default:u(()=>[N(K(Ke?.clinicName||"Unknown Clinic"),1)]),_:2},1024)]),_:2},1024),i(Ut,{cols:"12"},{default:u(()=>[i(gs,{class:"ma-0 pa-0 pl-4 pb-2"},{default:u(()=>[v("div",null,"Address: "+K(Ke?.clinicAddress||"Not specified"),1),v("div",null,"Contact: "+K(Ke?.contactNumber||"Not specified"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),i(Ut,{cols:"2",class:"d-flex justify-end align-center"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[i(rr,{text:"Edit Clinic Details"},{activator:u(({props:wa})=>[i(Fn,Ie({icon:"",variant:"outlined",size:"small"},{ref_for:!0},wa,{onClick:hi=>Bt(Ke),class:"icon-btn-border"}),{default:u(()=>[...me[139]||(me[139]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),i(zr),i(Ut,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[i(rr,{text:"Delete Clinic"},{activator:u(({props:wa})=>[i(Fn,Ie({icon:"",variant:"outlined",size:"small"},{ref_for:!0},wa,{disabled:"",class:"icon-btn-border"}),{default:u(()=>[...me[140]||(me[140]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("polyline",{points:"3 6 5 6 21 6"}),v("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])]),_:1},16)]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),i(zs,{modelValue:dt.value,"onUpdate:modelValue":me[27]||(me[27]=Ke=>dt.value=Ke),"max-width":"40%",persistent:""},{default:u(()=>[i(TIe,{clinic:D.value,onClose:yt},null,8,["clinic"])]),_:1},8,["modelValue"]),i(zs,{modelValue:gt.value,"onUpdate:modelValue":me[28]||(me[28]=Ke=>gt.value=Ke),"max-width":"40%",persistent:""},{default:u(()=>[i(IIe,{onClose:pt})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(Gs,{value:"vitalsconfig"},{default:u(()=>[i(hn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"8",class:"d-flex align-center"},{default:u(()=>[v("div",xFe,[Pe.value?(P(),Ae(ze,{key:0},[N(" Vitals Parameters Configured for: "+K(Pe.value),1)],64)):(P(),Ae(ze,{key:1},[N(" Configure Vitals Parameters ")],64))])]),_:1}),i(Ut,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[i(Fn,{onClick:Ar,disabled:H.value,loading:H.value,class:"btn-hover-enhanced"},{default:u(()=>[...me[141]||(me[141]=[N(" Save Preferences ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",CFe,[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12",color:"surfaceContainer"},{default:u(()=>[i(sn,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(rn,{class:"text-h6 mb-2"},{default:u(()=>[...me[142]||(me[142]=[N("Select Vitals Parameters",-1)])]),_:1}),i(qn,{class:"text-subtitle-2 mb-1"},{default:u(()=>[...me[143]||(me[143]=[N("Basic Vitals",-1)])]),_:1}),i(hn,{"no-gutters":"",class:"mb-3"},{default:u(()=>[i(Ut,{cols:"4",class:"pr-1"},{default:u(()=>[i(Fr,{label:"Weight (kg)","model-value":!0,disabled:"",density:"compact",class:"input-hover",color:"primary"})]),_:1}),i(Ut,{cols:"4",class:"px-1"},{default:u(()=>[i(Fr,{modelValue:L.value.pulse,"onUpdate:modelValue":me[29]||(me[29]=Ke=>L.value.pulse=Ke),label:"Pulse (bpm)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"4",class:"pl-1"},{default:u(()=>[i(Fr,{modelValue:L.value.temperature,"onUpdate:modelValue":me[30]||(me[30]=Ke=>L.value.temperature=Ke),label:"Temperature (C)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"4",class:"pr-1"},{default:u(()=>[i(Fr,{modelValue:L.value.bloodPressure,"onUpdate:modelValue":me[31]||(me[31]=Ke=>L.value.bloodPressure=Ke),label:"Blood Pressure (mmHg)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"4",class:"px-1"},{default:u(()=>[i(Fr,{modelValue:L.value.respiratoryRate,"onUpdate:modelValue":me[32]||(me[32]=Ke=>L.value.respiratoryRate=Ke),label:"Respiratory Rate (breaths/min)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"4",class:"pl-1"},{default:u(()=>[i(Fr,{modelValue:L.value.height,"onUpdate:modelValue":me[33]||(me[33]=Ke=>L.value.height=Ke),label:"Height (cm)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),i(qn,{class:"text-subtitle-2 mb-1"},{default:u(()=>[...me[144]||(me[144]=[N("Blood Chemistry Parameters",-1)])]),_:1}),i(hn,{"no-gutters":"",class:"mb-3"},{default:u(()=>[i(Ut,{cols:"4",class:"pr-1"},{default:u(()=>[i(Fr,{modelValue:L.value.serumBilirubin,"onUpdate:modelValue":me[34]||(me[34]=Ke=>L.value.serumBilirubin=Ke),label:"Serum Bilirubin (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"4",class:"px-1"},{default:u(()=>[i(Fr,{modelValue:L.value.bloodGlucoseFF,"onUpdate:modelValue":me[35]||(me[35]=Ke=>L.value.bloodGlucoseFF=Ke),label:"Blood Glucose - FF (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"4",class:"pl-1"},{default:u(()=>[i(Fr,{modelValue:L.value.bloodGlucosePP,"onUpdate:modelValue":me[36]||(me[36]=Ke=>L.value.bloodGlucosePP=Ke),label:"Blood Glucose - PP (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"4",class:"pr-1"},{default:u(()=>[i(Fr,{modelValue:L.value.bloodGlucoseRandom,"onUpdate:modelValue":me[37]||(me[37]=Ke=>L.value.bloodGlucoseRandom=Ke),label:"Blood Glucose - Random (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"4",class:"px-1"},{default:u(()=>[i(Fr,{modelValue:L.value.serumCreatinine,"onUpdate:modelValue":me[38]||(me[38]=Ke=>L.value.serumCreatinine=Ke),label:"Serum Creatinine (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),i(Ht,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:u(()=>[...me[145]||(me[145]=[N(" These preferences will be applied to the vitals form and trends view. Weight is always enabled as it's considered essential. Blood chemistry parameters are advanced lab values that can be enabled as needed. ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),i(Gs,{value:"receiptconfig"},{default:u(()=>[i(hn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12",class:"d-flex align-center"},{default:u(()=>[v("div",SFe,[Pe.value?(P(),Ae(ze,{key:0},[N(" Payment Receipt Configuration for: "+K(Pe.value),1)],64)):(P(),Ae(ze,{key:1},[N(" Payment Receipt Configuration Settings ")],64))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",EFe,[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12",color:"surfaceContainer"},{default:u(()=>[i(Hi,{modelValue:de.value,"onUpdate:modelValue":me[43]||(me[43]=Ke=>de.value=Ke),"validate-on":"blur",onSubmit:gn(Rn,["prevent"])},{default:u(()=>[i(hn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{flat:"",class:"mb-4",color:"surfaceContainer"},{default:u(()=>[i(rn,{class:"text-h6 mb-2"},{default:u(()=>[...me[146]||(me[146]=[N("Payment Receipt Series",-1)])]),_:1}),i(gs,null,{default:u(()=>[...me[147]||(me[147]=[N(" Create a new receipt series by specifying a 3-letter prefix and the first receipt number you want to use. The system will generate sequential receipt numbers starting from your specified number. ",-1)])]),_:1})]),_:1})]),_:1}),i(Ut,{cols:"12",class:"mb-3"},{default:u(()=>[i(Ht,{type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...me[148]||(me[148]=[v("strong",null,"Example:",-1),N(' If you enter prefix "INV" and first number "000100", your receipts will be numbered "INV000100", "INV000101", "INV000102", and so on. ',-1)])]),_:1})]),_:1}),i(Ut,{cols:"6",class:"pr-2"},{default:u(()=>[i(_r,{modelValue:oe.value.prefix,"onUpdate:modelValue":me[39]||(me[39]=Ke=>oe.value.prefix=Ke),label:"Prefix (3 letters) *",variant:"outlined",clearable:"",density:"compact",rules:Wt,class:"input-hover",hint:"Enter 3 uppercase letters (e.g., INV, REC, PAY)",maxlength:"3",onInput:me[40]||(me[40]=Ke=>oe.value.prefix=(Ke.target?.value||Ke||"").toString().toUpperCase())},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"6",class:"pl-2"},{default:u(()=>[i(_r,{modelValue:oe.value.suffix,"onUpdate:modelValue":me[41]||(me[41]=Ke=>oe.value.suffix=Ke),label:"First Receipt Number (6 digits) *",variant:"outlined",clearable:"",density:"compact",rules:_n,class:"input-hover",hint:"Enter 6 digits (000001-999999). This will be your first receipt number.",maxlength:"6",onInput:me[42]||(me[42]=Ke=>oe.value.suffix=(Ke.target?.value||Ke||"").toString().replace(/\D/g,""))},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"12",class:"mt-2"},{default:u(()=>[oe.value.prefix&&oe.value.suffix?(P(),he(Ht,{key:0,type:"success",variant:"tonal",density:"compact"},{default:u(()=>[me[149]||(me[149]=v("strong",null,"First Receipt Number:",-1)),N(" "+K(oe.value.prefix)+K(oe.value.suffix)+" ",1),me[150]||(me[150]=v("br",null,null,-1)),me[151]||(me[151]=v("strong",null,"Second Receipt Number:",-1)),N(" "+K(oe.value.prefix)+K((parseInt(oe.value.suffix)+1).toString().padStart(6,"0")),1)]),_:1})):(P(),he(Ht,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[me[152]||(me[152]=v("strong",null,"Preview:",-1)),N(" "+K(oe.value.prefix||"XXX")+K(oe.value.suffix||"000000")+" ",1),me[153]||(me[153]=v("br",null,null,-1)),me[154]||(me[154]=N("Enter both prefix and first receipt number to see the preview. ",-1))]),_:1}))]),_:1}),i(Ut,{cols:"12",class:"mt-3 d-flex justify-center"},{default:u(()=>[i(Fn,{onClick:Rn,disabled:!de.value||te.value,loading:te.value,color:"primary",variant:"elevated",class:"btn-hover-enhanced"},{default:u(()=>[...me[155]||(me[155]=[N(" Create Series ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1}),ut.value?(P(),he(Gs,{key:0,value:"billconfig"},{default:u(()=>[i(hn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12",class:"d-flex align-center"},{default:u(()=>[v("div",kFe,[Pe.value?(P(),Ae(ze,{key:0},[N(" GST Bill Series Configuration for: "+K(Pe.value),1)],64)):(P(),Ae(ze,{key:1},[N(" GST Bill Series Configuration Settings ")],64))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",BFe,[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12",color:"surfaceContainer"},{default:u(()=>[i(Hi,{modelValue:ce.value,"onUpdate:modelValue":me[48]||(me[48]=Ke=>ce.value=Ke),"validate-on":"blur",onSubmit:gn(os,["prevent"])},{default:u(()=>[i(hn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{flat:"",class:"mb-4",color:"surfaceContainer"},{default:u(()=>[i(rn,{class:"text-h6 mb-2"},{default:u(()=>[...me[156]||(me[156]=[N("GST Bill Series",-1)])]),_:1}),i(gs,null,{default:u(()=>[...me[157]||(me[157]=[N(" Create a new GST bill series by specifying a 3-letter prefix and the first bill number you want to use. The system will generate sequential bill numbers starting from your specified number. This is separate from payment receipts and specifically for GST-registered billing. ",-1)])]),_:1})]),_:1})]),_:1}),i(Ut,{cols:"12",class:"mb-3"},{default:u(()=>[i(Ht,{type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...me[158]||(me[158]=[v("strong",null,"Example:",-1),N(' If you enter prefix "BTX" and first number "000100", your GST bills will be numbered "BTX000100", "BTX000101", "BTX000102", and so on. ',-1),v("br",null,null,-1),v("strong",null,"Suggestion:",-1),N(' Use "BTX" for Bill Tax, "GST" for GST Bills, or your clinic initials. ',-1)])]),_:1})]),_:1}),i(Ut,{cols:"6",class:"pr-2"},{default:u(()=>[i(_r,{modelValue:q.value.prefix,"onUpdate:modelValue":me[44]||(me[44]=Ke=>q.value.prefix=Ke),label:"Prefix (3 letters) *",variant:"outlined",clearable:"",density:"compact",rules:na,class:"input-hover",hint:"Enter 3 uppercase letters (e.g., BTX, GST, CLN)",maxlength:"3",onInput:me[45]||(me[45]=Ke=>q.value.prefix=(Ke.target?.value||Ke||"").toString().toUpperCase())},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"6",class:"pl-2"},{default:u(()=>[i(_r,{modelValue:q.value.suffix,"onUpdate:modelValue":me[46]||(me[46]=Ke=>q.value.suffix=Ke),label:"First Bill Number (6 digits) *",variant:"outlined",clearable:"",density:"compact",rules:rt,class:"input-hover",hint:"Enter 6 digits (000001-999999). This will be your first bill number.",maxlength:"6",onInput:me[47]||(me[47]=Ke=>q.value.suffix=(Ke.target?.value||Ke||"").toString().replace(/\D/g,""))},null,8,["modelValue"])]),_:1}),i(Ut,{cols:"12",class:"mt-2"},{default:u(()=>[q.value.prefix&&q.value.suffix?(P(),he(Ht,{key:0,type:"success",variant:"tonal",density:"compact"},{default:u(()=>[me[159]||(me[159]=v("strong",null,"First Bill Number:",-1)),N(" "+K(q.value.prefix)+K(q.value.suffix)+" ",1),me[160]||(me[160]=v("br",null,null,-1)),me[161]||(me[161]=v("strong",null,"Second Bill Number:",-1)),N(" "+K(q.value.prefix)+K((parseInt(q.value.suffix)+1).toString().padStart(6,"0")),1)]),_:1})):(P(),he(Ht,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[me[162]||(me[162]=v("strong",null,"Preview:",-1)),N(" "+K(q.value.prefix||"XXX")+K(q.value.suffix||"000000")+" ",1),me[163]||(me[163]=v("br",null,null,-1)),me[164]||(me[164]=N("Enter both prefix and first bill number to see the preview. ",-1))]),_:1}))]),_:1}),i(Ut,{cols:"12",class:"mt-3 d-flex justify-center"},{default:u(()=>[i(Fn,{onClick:os,disabled:!ce.value||le.value,loading:le.value,color:"primary",variant:"elevated",class:"btn-hover-enhanced"},{default:u(()=>[...me[165]||(me[165]=[N(" Create Bill Series ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})):ge("",!0),i(Gs,{value:"pharmacyconfig"},{default:u(()=>[i(hn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"8",class:"d-flex align-center"},{default:u(()=>[...me[166]||(me[166]=[v("div",{class:"text-subtitle-2 ml-2"}," Pharmacy Management ",-1)])]),_:1}),i(Ut,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[i(Fn,{onClick:Un,color:"primary",class:"btn-hover-enhanced"},{default:u(()=>[i(aa,{left:""},{default:u(()=>[...me[167]||(me[167]=[N("mdi-plus",-1)])]),_:1}),me[168]||(me[168]=N(" Add Pharmacy ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",TFe,[G.value?(P(),he(hn,{key:0,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[i(un,{indeterminate:"",color:"primary"})]),_:1})):ne.value.length?(P(),he(hn,{key:2,"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(ne.value,Ke=>(P(),he(sn,{key:Ke.id,density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base"},{default:u(()=>[i(cu,{class:"pb-1"},{default:u(()=>[v("div",IFe,[v("div",FFe,[i(rn,{class:"text-h6 pa-0 mb-0"},{default:u(()=>[N(K(Ke.pharmacyName||"Unnamed Pharmacy"),1)]),_:2},1024)]),v("div",PFe,[i(rr,{text:"Edit Pharmacy"},{activator:u(({props:wa})=>[i(Fn,Ie({icon:"",variant:"outlined",size:"small"},{ref_for:!0},wa,{onClick:hi=>Mn(Ke),class:"icon-btn-border mr-1"}),{default:u(()=>[...me[172]||(me[172]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),_:1},16,["onClick"])]),_:2},1024),i(rr,{text:"Configure Series"},{activator:u(({props:wa})=>[i(Fn,Ie({icon:"",variant:"outlined",size:"small"},{ref_for:!0},wa,{onClick:hi=>ma(Ke),class:"icon-btn-border"}),{default:u(()=>[i(aa,{size:"small"},{default:u(()=>[...me[173]||(me[173]=[N("mdi-format-list-numbered",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)])])]),_:2},1024),i(zr,{class:"mx-4 mb-2"}),i(gs,{class:"pt-0 pb-2"},{default:u(()=>[i(hn,{"no-gutters":"",class:"mb-1"},{default:u(()=>[Ke.header?(P(),he(Ut,{key:0,cols:"12",class:"mb-1"},{default:u(()=>[v("div",DFe,[i(aa,{size:"small",class:"mr-2 text-medium-emphasis mt-1"},{default:u(()=>[...me[174]||(me[174]=[N("mdi-file-document-outline",-1)])]),_:1}),v("div",UFe,[me[175]||(me[175]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Bill Header:",-1)),v("div",RFe,K(fr(Ke.header)),1),oo(Ke.header)?(P(),Ae("div",NFe,K(oo(Ke.header)),1)):ge("",!0)])])]),_:2},1024)):ge("",!0),Qs(Ke.gstNumber)?(P(),he(Ut,{key:1,cols:"12",class:"mb-1"},{default:u(()=>[v("div",VFe,[i(aa,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...me[176]||(me[176]=[N("mdi-identifier",-1)])]),_:1}),me[177]||(me[177]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"GST Number:",-1)),v("span",LFe,K(Qs(Ke.gstNumber)),1)])]),_:2},1024)):ge("",!0),Mi(Ke.gstNumber)?(P(),he(Ut,{key:2,cols:"12",class:"mb-1"},{default:u(()=>[v("div",MFe,[i(aa,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...me[178]||(me[178]=[N("mdi-certificate-outline",-1)])]),_:1}),me[179]||(me[179]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Registration Details:",-1)),v("span",OFe,K(Mi(Ke.gstNumber)),1)])]),_:2},1024)):ge("",!0),i(Ut,{cols:"12",class:"mb-1"},{default:u(()=>[v("div",HFe,[i(aa,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...me[180]||(me[180]=[N("mdi-file-document",-1)])]),_:1}),me[181]||(me[181]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Page Size:",-1)),v("span",$Fe,K(Ke.pageSize||"A4"),1)])]),_:2},1024)]),_:2},1024),v("div",QFe,[i($i,{color:Ke.useHeader?"success":"default",variant:Ke.useHeader?"tonal":"outlined",size:"small",density:"compact",class:"mr-2"},{default:u(()=>[i(aa,{start:"",size:"small"},{default:u(()=>[N(K(Ke.useHeader?"mdi-check-circle":"mdi-cancel"),1)]),_:2},1024),N(" "+K(Ke.useHeader?"Header Enabled":"Header Disabled"),1)]),_:2},1032,["color","variant"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(P(),he(hn,{key:1,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[i(Ut,{cols:"12",class:"text-center"},{default:u(()=>[i(aa,{size:"64",color:"grey-lighten-1"},{default:u(()=>[...me[169]||(me[169]=[N("mdi-pill",-1)])]),_:1}),me[170]||(me[170]=v("p",{class:"text-subtitle-1 mt-4"},"No pharmacies found",-1)),me[171]||(me[171]=v("p",{class:"text-caption text-grey"},'Click "Add Pharmacy" to create your first pharmacy',-1))]),_:1})]),_:1}))])]),_:1}),i(Gs,{value:"usermanagement"},{default:u(()=>[i(hn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(sn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(hn,{"no-gutters":""},{default:u(()=>[i(Ut,{cols:"8",class:"d-flex align-center"},{default:u(()=>[...me[182]||(me[182]=[v("div",{class:"text-subtitle-2 ml-2"}," User Management & Permissions ",-1)])]),_:1}),i(Ut,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[i(Fn,{onClick:Hh,color:"primary",class:"btn-hover-enhanced"},{default:u(()=>[i(aa,{left:""},{default:u(()=>[...me[183]||(me[183]=[N("mdi-plus",-1)])]),_:1}),me[184]||(me[184]=N(" Add User ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",GFe,[z.value?(P(),he(hn,{key:0,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[i(un,{indeterminate:"",color:"primary"})]),_:1})):M.value.length?(P(),he(hn,{key:2,"no-gutters":""},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(M.value,Ke=>(P(),he(sn,{key:Ke.id,class:"mb-2 card-enhanced card-hover-base",outlined:""},{default:u(()=>[i(gs,{class:"d-flex align-center justify-space-between"},{default:u(()=>[v("div",zFe,[i(rc,{color:Ke.isActive?"primary":"grey",size:"40",class:"mr-3"},{default:u(()=>[v("span",WFe,K(Bn(Ke.name)),1)]),_:2},1032,["color"]),v("div",KFe,[v("div",jFe,[N(K(Ke.name)+" ",1),Ke.isAdmin?(P(),he($i,{key:0,"x-small":"",color:"primary",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[...me[188]||(me[188]=[N("Admin",-1)])]),_:1})):ge("",!0),Ke.role?(P(),he($i,{key:1,"x-small":"",color:"success",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[N(K(Ma(Ke.role)),1)]),_:2},1024)):ge("",!0)]),v("div",qFe,[N(K(Ke.email||"No email")+" ",1),Ke.doctorId?(P(),he($i,{key:0,"x-small":"",color:"info",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[...me[189]||(me[189]=[N("Doctor",-1)])]),_:1})):ge("",!0)]),v("div",YFe,[(P(!0),Ae(ze,null,Jt(Ke.permissions?.slice(0,3),wa=>(P(),he($i,{key:wa,"x-small":"",class:"mr-1 mt-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[N(K(lu(wa)),1)]),_:2},1024))),128)),Ke.permissions?.length>3?(P(),Ae("span",XFe," +"+K(Ke.permissions.length-3)+" more ",1)):ge("",!0)])])]),v("div",JFe,[i(rr,{text:"Edit User"},{activator:u(({props:wa})=>[i(Fn,Ie({icon:"",size:"small",variant:"outlined",onClick:hi=>dm(Ke),class:"icon-btn-border mr-1"},{ref_for:!0},wa),{default:u(()=>[...me[190]||(me[190]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),_:1},16,["onClick"])]),_:2},1024),i(rr,{text:"View Passcode"},{activator:u(({props:wa})=>[i(Fn,Ie({icon:"",size:"small",variant:"outlined",onClick:hi=>Am(Ke),class:"icon-btn-border mr-1"},{ref_for:!0},wa),{default:u(()=>[...me[191]||(me[191]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),v("circle",{cx:"12",cy:"12",r:"3"})],-1)])]),_:1},16,["onClick"])]),_:2},1024),i(rr,{text:"Reset Passcode"},{activator:u(({props:wa})=>[i(Fn,Ie({icon:"",size:"small",variant:"outlined",onClick:hi=>Oi(Ke),class:"icon-btn-border mr-1"},{ref_for:!0},wa),{default:u(()=>[...me[192]||(me[192]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),v("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)])]),_:1},16,["onClick"])]),_:2},1024),i(En,{"require-admin":""},{default:u(()=>[i(rr,{text:"Delete User"},{activator:u(({props:wa})=>[i(Fn,Ie({icon:"",size:"small",variant:"outlined",onClick:hi=>Xo(Ke),disabled:ec(Ke),color:"error",class:"icon-btn-border"},{ref_for:!0},wa),{default:u(()=>[...me[193]||(me[193]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("polyline",{points:"3 6 5 6 21 6"}),v("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])]),_:1},16,["onClick","disabled"])]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(P(),he(hn,{key:1,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[i(Ut,{cols:"12",class:"text-center"},{default:u(()=>[i(aa,{size:"64",color:"grey-lighten-1"},{default:u(()=>[...me[185]||(me[185]=[N("mdi-account-group-outline",-1)])]),_:1}),me[186]||(me[186]=v("p",{class:"text-subtitle-1 mt-4"},"No users found",-1)),me[187]||(me[187]=v("p",{class:"text-caption text-grey"},'Click "Add User" to create your first user',-1))]),_:1})]),_:1}))])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(zs,{modelValue:be.value,"onUpdate:modelValue":me[60]||(me[60]=Ke=>be.value=Ke),"max-width":"600",scrollable:""},{default:u(()=>[i(sn,{class:"dialog-card"},{default:u(()=>[i(rn,{class:"dialog-header"},{default:u(()=>[me[195]||(me[195]=v("span",{class:"dialog-title"},"Create New User",-1)),i(ga),i(Fn,{icon:"",variant:"text",size:"small",onClick:me[50]||(me[50]=Ke=>be.value=!1),class:"dialog-close-btn"},{default:u(()=>[i(aa,null,{default:u(()=>[...me[194]||(me[194]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(gs,{class:"dialog-card-text"},{default:u(()=>[_e.value?(P(),he(Ht,{key:0,type:"error",variant:"tonal",dismissible:"","onClick:close":me[51]||(me[51]=Ke=>_e.value=null),class:"mb-4"},{default:u(()=>[N(K(_e.value),1)]),_:1})):ge("",!0),i(Hi,{ref_key:"createUserForm",ref:Qe,modelValue:Fe.value,"onUpdate:modelValue":me[58]||(me[58]=Ke=>Fe.value=Ke)},{default:u(()=>[i(_r,{modelValue:Se.value.name,"onUpdate:modelValue":me[52]||(me[52]=Ke=>Se.value.name=Ke),label:"User Name *",variant:"outlined",density:"compact",rules:[Ke=>!!Ke||"Name is required"],class:"mb-2"},null,8,["modelValue","rules"]),i(_r,{modelValue:Se.value.passcode,"onUpdate:modelValue":me[54]||(me[54]=Ke=>Se.value.passcode=Ke),label:"Passcode *",variant:"outlined",density:"compact",type:Nt.value?"text":"password",rules:[Ke=>!!Ke||"Passcode is required",Ke=>Ke.length>=4||"Passcode must be at least 4 characters"],error:!!_e.value,onInput:me[55]||(me[55]=Ke=>_e.value=null),class:"mb-2"},{"append-inner":u(()=>[i(aa,{icon:Nt.value?"mdi-eye-off":"mdi-eye",onClick:me[53]||(me[53]=Ke=>Nt.value=!Nt.value),style:{cursor:"pointer"}},null,8,["icon"])]),_:1},8,["modelValue","type","rules","error"]),i(_r,{modelValue:Se.value.email,"onUpdate:modelValue":me[56]||(me[56]=Ke=>Se.value.email=Ke),label:"Email (optional)",variant:"outlined",density:"compact",type:"email",class:"mb-2"},null,8,["modelValue"]),i(gR,{user:Se.value,"available-features":se.value,"onUpdate:user":me[57]||(me[57]=Ke=>Se.value=Ke)},null,8,["user","available-features"])]),_:1},8,["modelValue"])]),_:1}),i(Ds,{class:"dialog-actions"},{default:u(()=>[i(ga),i(Fn,{variant:"outlined",color:"grey-darken-1",onClick:me[59]||(me[59]=Ke=>be.value=!1),class:"dialog-cancel-btn"},{default:u(()=>[...me[196]||(me[196]=[N(" Cancel ",-1)])]),_:1}),i(Fn,{color:"primary",variant:"flat",disabled:!Fe.value,loading:ye.value,onClick:cm,class:"dialog-save-btn"},{default:u(()=>[...me[197]||(me[197]=[N(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(zs,{modelValue:Ee.value,"onUpdate:modelValue":me[67]||(me[67]=Ke=>Ee.value=Ke),"max-width":"600",persistent:je.value,scrollable:""},{default:u(()=>[mt.value&&mt.value.id&&Array.isArray(se.value)&&Array.isArray(et.value)?(P(),he(sn,{key:0,class:"dialog-card"},{default:u(()=>[i(rn,{class:"dialog-header"},{default:u(()=>[v("span",ZFe,"Edit User: "+K(mt.value?.name),1),i(ga),i(Fn,{icon:"",variant:"text",size:"small",onClick:me[61]||(me[61]=Ke=>Ee.value=!1),disabled:je.value,class:"dialog-close-btn"},{default:u(()=>[i(aa,null,{default:u(()=>[...me[198]||(me[198]=[N("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1}),i(gs,{class:"dialog-card-text"},{default:u(()=>[i(Hi,{ref_key:"editUserForm",ref:at,modelValue:Ue.value,"onUpdate:modelValue":me[65]||(me[65]=Ke=>Ue.value=Ke)},{default:u(()=>[i(_r,{modelValue:mt.value.name,"onUpdate:modelValue":me[62]||(me[62]=Ke=>mt.value.name=Ke),label:"User Name *",variant:"outlined",density:"compact",rules:[Ke=>!!Ke||"Name is required"],"validate-on":"blur",class:"mb-2"},null,8,["modelValue","rules"]),i(_r,{modelValue:mt.value.email,"onUpdate:modelValue":me[63]||(me[63]=Ke=>mt.value.email=Ke),label:"Email (optional)",variant:"outlined",density:"compact",type:"email","validate-on":"blur",class:"mb-2"},null,8,["modelValue"]),mt.value.isAdmin?ge("",!0):(P(),he(gR,{key:0,user:mt.value,"available-features":se.value,"onUpdate:user":me[64]||(me[64]=Ke=>mt.value=Ke)},null,8,["user","available-features"]))]),_:1},8,["modelValue"])]),_:1}),i(Ds,{class:"dialog-actions"},{default:u(()=>[i(ga),i(Fn,{variant:"outlined",color:"grey-darken-1",onClick:me[66]||(me[66]=Ke=>Ee.value=!1),disabled:je.value,class:"dialog-cancel-btn"},{default:u(()=>[...me[199]||(me[199]=[N(" Cancel ",-1)])]),_:1},8,["disabled"]),i(Fn,{color:"primary",variant:"flat",disabled:!Ue.value,loading:je.value,onClick:fm,class:"dialog-save-btn"},{default:u(()=>[...me[200]||(me[200]=[N(" Save ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})):(P(),he(sn,{key:1},{default:u(()=>[i(gs,null,{default:u(()=>[v("div",ePe,[i(un,{indeterminate:"",color:"primary"}),me[201]||(me[201]=v("p",{class:"mt-4"},"Loading user data...",-1))])]),_:1})]),_:1}))]),_:1},8,["modelValue","persistent"]),i(zs,{modelValue:Be.value,"onUpdate:modelValue":me[71]||(me[71]=Ke=>Be.value=Ke),"max-width":"400"},{default:u(()=>[i(sn,null,{default:u(()=>[i(rn,null,{default:u(()=>[...me[202]||(me[202]=[N("Reset Passcode",-1)])]),_:1}),i(gs,null,{default:u(()=>[v("p",tPe,"Enter a new passcode for "+K(kt.value?.name),1),i(_r,{modelValue:xt.value,"onUpdate:modelValue":me[69]||(me[69]=Ke=>xt.value=Ke),label:"New Passcode *",variant:"outlined",density:"compact",type:At.value?"text":"password",rules:[Ke=>!!Ke||"Passcode is required",Ke=>Ke.length>=4||"Passcode must be at least 4 characters"]},{"append-inner":u(()=>[i(aa,{icon:At.value?"mdi-eye-off":"mdi-eye",onClick:me[68]||(me[68]=Ke=>At.value=!At.value),style:{cursor:"pointer"}},null,8,["icon"])]),_:1},8,["modelValue","type","rules"])]),_:1}),i(Ds,null,{default:u(()=>[i(ga),i(Fn,{text:"",onClick:me[70]||(me[70]=Ke=>Be.value=!1)},{default:u(()=>[...me[203]||(me[203]=[N("Cancel",-1)])]),_:1}),i(Fn,{color:"primary",disabled:!xt.value||xt.value.length<4,loading:Ye.value,onClick:uu},{default:u(()=>[...me[204]||(me[204]=[N("Reset",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(zs,{modelValue:Ot.value,"onUpdate:modelValue":me[76]||(me[76]=Ke=>Ot.value=Ke),"max-width":"400"},{default:u(()=>[i(sn,null,{default:u(()=>[i(rn,null,{default:u(()=>[...me[205]||(me[205]=[N("View Passcode",-1)])]),_:1}),i(gs,null,{default:u(()=>[v("p",nPe,"Passcode for "+K(bt.value?.name),1),Vt.value?(P(),he(Ht,{key:0,type:"error",variant:"tonal",dismissible:"","onClick:close":me[72]||(me[72]=Ke=>Vt.value=null),class:"mb-4"},{default:u(()=>[N(K(Vt.value),1)]),_:1})):ge("",!0),i(_r,{modelValue:Ze.value,"onUpdate:modelValue":me[74]||(me[74]=Ke=>Ze.value=Ke),label:"Passcode",variant:"outlined",density:"compact",type:qt.value?"text":"password",readonly:"",loading:Dt.value},{"append-inner":u(()=>[i(aa,{icon:qt.value?"mdi-eye-off":"mdi-eye",onClick:me[73]||(me[73]=Ke=>qt.value=!qt.value),style:{cursor:"pointer"}},null,8,["icon"])]),_:1},8,["modelValue","type","loading"]),!Dt.value&&!Vt.value&&!Ze.value?(P(),he(Ht,{key:1,type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:u(()=>[...me[206]||(me[206]=[N(" Passcode cannot be viewed for security reasons. Passcodes are stored securely and cannot be retrieved. ",-1)])]),_:1})):ge("",!0)]),_:1}),i(Ds,null,{default:u(()=>[i(ga),i(Fn,{icon:"",size:"small",onClick:gf,disabled:!Ze.value,class:"mr-2"},{default:u(()=>[i(aa,null,{default:u(()=>[...me[207]||(me[207]=[N("mdi-content-copy",-1)])]),_:1})]),_:1},8,["disabled"]),i(Fn,{text:"",onClick:me[75]||(me[75]=Ke=>Ot.value=!1)},{default:u(()=>[...me[208]||(me[208]=[N("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(zs,{modelValue:zt.value,"onUpdate:modelValue":me[79]||(me[79]=Ke=>zt.value=Ke),"max-width":"500"},{default:u(()=>[i(sn,null,{default:u(()=>[i(rn,{class:"text-error"},{default:u(()=>[i(aa,{color:"error",class:"mr-2"},{default:u(()=>[...me[209]||(me[209]=[N("mdi-alert-circle",-1)])]),_:1}),me[210]||(me[210]=N(" Delete User ",-1))]),_:1}),i(gs,null,{default:u(()=>[v("div",aPe,[v("p",rPe,[me[211]||(me[211]=N(" Are you sure you want to delete ",-1)),v("strong",null,K(ln.value?.name),1),me[212]||(me[212]=N("? ",-1))]),i(Ht,{type:"warning",variant:"tonal",class:"mb-2"},{default:u(()=>[...me[213]||(me[213]=[v("div",{class:"text-caption"},[v("strong",null,"This action cannot be undone!")],-1),v("div",{class:"text-caption mt-1"},[N(" This will permanently delete: "),v("ul",{class:"mt-1 mb-0"},[v("li",null,"User account"),v("li",null,"All user permissions"),v("li",null,"All active sessions"),v("li",null,"All subscription data"),v("li",null,"All usage tracking data")])],-1)])]),_:1}),ec(ln.value)?(P(),he(Ht,{key:0,type:"error",variant:"tonal"},{default:u(()=>[...me[214]||(me[214]=[N(" You cannot delete your own account! ",-1)])]),_:1})):ge("",!0)]),i(_r,{modelValue:Dn.value,"onUpdate:modelValue":me[77]||(me[77]=Ke=>Dn.value=Ke),label:"Type 'DELETE' to confirm",variant:"outlined",density:"compact",rules:[Ke=>Ke==="DELETE"||"Please type DELETE to confirm"]},null,8,["modelValue","rules"])]),_:1}),i(Ds,null,{default:u(()=>[i(ga),i(Fn,{text:"",onClick:me[78]||(me[78]=Ke=>{zt.value=!1,Dn.value=""})},{default:u(()=>[...me[215]||(me[215]=[N("Cancel",-1)])]),_:1}),i(Fn,{color:"error",disabled:Dn.value!=="DELETE"||ec(ln.value),loading:vt.value,onClick:Gh},{default:u(()=>[...me[216]||(me[216]=[N(" Delete User ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(jIe,{modelValue:W.value,"onUpdate:modelValue":me[80]||(me[80]=Ke=>W.value=Ke),onSaved:Vr},null,8,["modelValue"]),i(qIe,{modelValue:Q.value,"onUpdate:modelValue":me[81]||(me[81]=Ke=>Q.value=Ke),pharmacy:O.value,onSaved:Vr},null,8,["modelValue","pharmacy"]),i(zs,{modelValue:ae.value,"onUpdate:modelValue":me[88]||(me[88]=Ke=>ae.value=Ke),"max-width":"500",persistent:""},{default:u(()=>[i(sn,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[i(rn,{class:"d-flex align-center justify-space-between"},{default:u(()=>[v("span",null,"Configure Bill Series - "+K(j.value?.pharmacyName||""),1),i(Fn,{onClick:me[82]||(me[82]=Ke=>{ae.value=!1,j.value=null,J.value=null}),variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(aa,{size:"18"},{default:u(()=>[...me[217]||(me[217]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(zr),i(gs,{class:"py-1"},{default:u(()=>[J.value?(P(),he(Ht,{key:0,type:"info",variant:"tonal",density:"compact",class:"mb-3"},{default:u(()=>[v("div",sPe,[me[218]||(me[218]=v("strong",null,"Current Latest Series:",-1)),N(" "+K(J.value.identifier)+" ",1),me[219]||(me[219]=v("br",null,null,-1)),v("span",oPe,"(Next bill will be: "+K(Qn(J.value.identifier))+")",1)])]),_:1})):(P(),he(Ht,{key:1,type:"warning",variant:"tonal",density:"compact",class:"mb-3"},{default:u(()=>[...me[220]||(me[220]=[v("div",{class:"text-body-2"},"No series configured yet. Create a new series below.",-1)])]),_:1})),i(Hi,{ref:"seriesForm",modelValue:X.value,"onUpdate:modelValue":me[86]||(me[86]=Ke=>X.value=Ke)},{default:u(()=>[i(hn,{dense:""},{default:u(()=>[i(Ut,{cols:"12"},{default:u(()=>[i(_r,{modelValue:ie.value.prefix,"onUpdate:modelValue":[me[83]||(me[83]=Ke=>ie.value.prefix=Ke),me[84]||(me[84]=Ke=>{ie.value.prefix=(Ke||"").toString().toUpperCase().replace(/[^A-Z]/g,"").substring(0,3)})],label:"Prefix (3 letters) *",variant:"outlined",density:"compact",hint:"e.g., PHM, BIL","prepend-inner-icon":"mdi-format-text",maxlength:"3",rules:[Ke=>!!Ke||"Prefix is required",Ke=>Ke&&Ke.length===3||"Prefix must be exactly 3 letters"]},null,8,["modelValue","rules"])]),_:1}),i(Ut,{cols:"12"},{default:u(()=>[i(_r,{modelValue:ie.value.seed,"onUpdate:modelValue":me[85]||(me[85]=Ke=>ie.value.seed=Ke),modelModifiers:{number:!0},label:"Seed (Starting Number) *",variant:"outlined",density:"compact",type:"number",hint:"Starting number for the series (e.g., 1). The first bill will be PREFIX000001","prepend-inner-icon":"mdi-numeric",min:"1",rules:[Ke=>Ke!=null&&Ke>=1||"Seed must be at least 1"]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(zr),i(Ds,{class:"pa-3"},{default:u(()=>[i(ga),i(Fn,{variant:"outlined",onClick:me[87]||(me[87]=Ke=>{ae.value=!1,j.value=null,J.value=null}),disabled:fe.value},{default:u(()=>[...me[221]||(me[221]=[N(" Cancel ",-1)])]),_:1},8,["disabled"]),i(Fn,{color:"primary",onClick:Zu,loading:fe.value,disabled:!X.value},{default:u(()=>[...me[222]||(me[222]=[N(" Create Series ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(Jo,{modelValue:m.value,"onUpdate:modelValue":me[89]||(me[89]=Ke=>m.value=Ke),class:"elevation-24",color:"success"},{default:u(()=>[N(K(p.value),1)]),_:1},8,["modelValue"]),i(Jo,{modelValue:h.value,"onUpdate:modelValue":me[90]||(me[90]=Ke=>h.value=Ke),timeout:2e3,class:"elevation-24",color:"failure"},{default:u(()=>[N(K(y.value),1)]),_:1},8,["modelValue"])],64))]),_:1})}}},lPe=en(iPe,[["__scopeId","data-v-3ebd6e0c"]]);var t$=1252,uPe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],DT={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},UT=function(e){uPe.indexOf(e)!=-1&&(t$=DT[0]=e)};function cPe(){UT(1252)}var Rl=function(e){UT(e)};function n$(){Rl(1200),cPe()}function yR(e){for(var t=[],n=0,a=e.length;n<a;++n)t[n]=e.charCodeAt(n);return t}function dPe(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n)+(e.charCodeAt(2*n+1)<<8));return t.join("")}function a$(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var Mp=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return t==255&&n==254?dPe(e.slice(2)):t==254&&n==255?a$(e.slice(2)):t==65279?e.slice(1):e},Py=function(t){return String.fromCharCode(t)},_R=function(t){return String.fromCharCode(t)},j0,Ud="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function wR(e){for(var t="",n=0,a=0,r=0,s=0,o=0,l=0,c=0,f=0;f<e.length;)n=e.charCodeAt(f++),s=n>>2,a=e.charCodeAt(f++),o=(n&3)<<4|a>>4,r=e.charCodeAt(f++),l=(a&15)<<2|r>>6,c=r&63,isNaN(a)?l=c=64:isNaN(r)&&(c=64),t+=Ud.charAt(s)+Ud.charAt(o)+Ud.charAt(l)+Ud.charAt(c);return t}function Ui(e){var t="",n=0,a=0,r=0,s=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var f=0;f<e.length;)s=Ud.indexOf(e.charAt(f++)),o=Ud.indexOf(e.charAt(f++)),n=s<<2|o>>4,t+=String.fromCharCode(n),l=Ud.indexOf(e.charAt(f++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=Ud.indexOf(e.charAt(f++)),r=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(r));return t}var xa=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),qA=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,n){return n?new Buffer(t,n):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function rf(e){return xa?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function bR(e){return xa?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Il=function(t){return xa?qA(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)&255})};function YA(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function RT(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return RT(new Uint8Array(e));for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t}var Id=xa?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:qA(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var a=new Uint8Array(n),r=0;for(t=0,n=0;t<e.length;n+=r,++t)if(r=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],n);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),n)}return a}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function fPe(e){for(var t=[],n=0,a=e.length+250,r=rf(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)r[n++]=o;else if(o<2048)r[n++]=192|o>>6&31,r[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++s)&1023;r[n++]=240|o>>8&7,r[n++]=128|o>>2&63,r[n++]=128|l>>6&15|(o&3)<<4,r[n++]=128|l&63}else r[n++]=224|o>>12&15,r[n++]=128|o>>6&63,r[n++]=128|o&63;n>a&&(t.push(r.slice(0,n)),n=0,r=rf(65535),a=65530)}return t.push(r.slice(0,n)),Id(t)}var zo=/\u0000/g,Op=/[\u0001-\u0006]/g;function kv(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function Nl(e,t){var n=""+e;return n.length>=t?n:Mr("0",t-n.length)+n}function NT(e,t){var n=""+e;return n.length>=t?n:Mr(" ",t-n.length)+n}function y2(e,t){var n=""+e;return n.length>=t?n:n+Mr(" ",t-n.length)}function APe(e,t){var n=""+Math.round(e);return n.length>=t?n:Mr("0",t-n.length)+n}function mPe(e,t){var n=""+e;return n.length>=t?n:Mr("0",t-n.length)+n}var xR=Math.pow(2,32);function jm(e,t){if(e>xR||e<-xR)return APe(e,t);var n=Math.round(e);return mPe(n,t)}function _2(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var CR=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],RC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function vPe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var sa={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},SR={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},hPe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function w2(e,t,n){for(var a=e<0?-1:1,r=e*a,s=0,o=1,l=0,c=1,f=0,d=0,A=Math.floor(r);f<t&&(A=Math.floor(r),l=A*o+s,d=A*f+c,!(r-A<5e-8));)r=1/(r-A),s=o,o=l,c=f,f=d;if(d>t&&(f>t?(d=c,l=s):(d=f,l=o)),!n)return[0,a*l,d];var m=Math.floor(a*l/d);return[m,a*l-m*d,d]}function Jf(e,t,n){if(e>2958465||e<0)return null;var a=e|0,r=Math.floor(86400*(e-a)),s=0,o=[],l={D:a,T:r,u:86400*(e-a)-r,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++r==86400&&(l.T=r=0,++a,++l.D)),a===60)o=n?[1317,10,29]:[1900,2,29],s=3;else if(a===0)o=n?[1317,8,29]:[1900,1,0],s=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),a<60&&(s=(s+6)%7),n&&(s=bPe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=r%60,r=Math.floor(r/60),l.M=r%60,r=Math.floor(r/60),l.H=r,l.q=s,l}var r$=new Date(1899,11,31,0,0,0),pPe=r$.getTime(),gPe=new Date(1900,2,1,0,0,0);function s$(e,t){var n=e.getTime();return t?n-=1461*24*60*60*1e3:e>=gPe&&(n+=1440*60*1e3),(n-(pPe+(e.getTimezoneOffset()-r$.getTimezoneOffset())*6e4))/(1440*60*1e3)}function VT(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function yPe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function _Pe(e){var t=e<0?12:11,n=VT(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10),n.length<=t)?n:e.toExponential(5)}function wPe(e){var t=VT(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function q0(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),n;return t>=-4&&t<=-1?n=e.toPrecision(10+t):Math.abs(t)<=9?n=_Pe(e):t===10?n=e.toFixed(10).substr(0,12):n=wPe(e),VT(yPe(n.toUpperCase()))}function SA(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):q0(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ul(14,s$(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function bPe(e,t){t[0]-=581;var n=e.getDay();return e<60&&(n=(n+6)%7),n}function xPe(e,t,n,a){var r="",s=0,o=0,l=n.y,c,f=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,f=2;break;default:c=l%1e4,f=4;break}break;case 109:switch(t.length){case 1:case 2:c=n.m,f=t.length;break;case 3:return RC[n.m-1][1];case 5:return RC[n.m-1][0];default:return RC[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=n.d,f=t.length;break;case 3:return CR[n.q][0];default:return CR[n.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(n.H+11)%12,f=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=n.H,f=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=n.M,f=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return n.u===0&&(t=="s"||t=="ss")?Nl(n.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,s=Math.round(o*(n.S+n.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(r=Nl(s,2+a),t==="ss"?r.substr(0,2):"."+r.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=n.D*24+n.H;break;case"[m]":case"[mm]":c=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":c=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}f=t.length===3?1:2;break;case 101:c=l,f=1;break}var d=f>0?Nl(c,f):"";return d}function Rd(e){var t=3;if(e.length<=t)return e;for(var n=e.length%t,a=e.substr(0,n);n!=e.length;n+=t)a+=(a.length>0?",":"")+e.substr(n,t);return a}var o$=/%/g;function CPe(e,t,n){var a=t.replace(o$,""),r=t.length-a.length;return Dc(e,a,n*Math.pow(10,2*r))+Mr("%",r)}function SPe(e,t,n){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Dc(e,t.substr(0,a),n/Math.pow(10,3*(t.length-a)))}function i$(e,t){var n,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+i$(e,-t);var r=e.indexOf(".");r===-1&&(r=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%r;if(s<0&&(s+=r),n=(t/Math.pow(10,s)).toPrecision(a+1+(r+s)%r),n.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,r)+"."+n.substr(2+r),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,f,d){return c+f+d.substr(0,(r+s)%r)+"."+d.substr(s)+"E"})}else n=t.toExponential(a);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var l$=/# (\?+)( ?)\/( ?)(\d+)/;function EPe(e,t,n){var a=parseInt(e[4],10),r=Math.round(t*a),s=Math.floor(r/a),o=r-s*a,l=a;return n+(s===0?"":""+s)+" "+(o===0?Mr(" ",e[1].length+1+e[4].length):NT(o,e[1].length)+e[2]+"/"+e[3]+Nl(l,e[4].length))}function kPe(e,t,n){return n+(t===0?"":""+t)+Mr(" ",e[1].length+2+e[4].length)}var u$=/^#*0*\.([0#]+)/,c$=/\).*[0#]/,d$=/\(###\) ###\\?-####/;function Oo(e){for(var t="",n,a=0;a!=e.length;++a)switch(n=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(n)}return t}function ER(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function kR(e,t){var n=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(n*a)).length?0:Math.round(n*a)}function BPe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function TPe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Xi(e,t,n){if(e.charCodeAt(0)===40&&!t.match(c$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Xi("n",a,n):"("+Xi("n",a,-n)+")"}if(t.charCodeAt(t.length-1)===44)return SPe(e,t,n);if(t.indexOf("%")!==-1)return CPe(e,t,n);if(t.indexOf("E")!==-1)return i$(t,n);if(t.charCodeAt(0)===36)return"$"+Xi(e,t.substr(t.charAt(1)==" "?2:1),n);var r,s,o,l,c=Math.abs(n),f=n<0?"-":"";if(t.match(/^00+$/))return f+jm(c,t.length);if(t.match(/^[#?]+$/))return r=jm(n,0),r==="0"&&(r=""),r.length>t.length?r:Oo(t.substr(0,t.length-r.length))+r;if(s=t.match(l$))return EPe(s,c,f);if(t.match(/^#+0+$/))return f+jm(c,t.length-t.indexOf("0"));if(s=t.match(u$))return r=ER(n,s[1].length).replace(/^([^\.]+)$/,"$1."+Oo(s[1])).replace(/\.$/,"."+Oo(s[1])).replace(/\.(\d*)$/,function(h,y){return"."+y+Mr("0",Oo(s[1]).length-y.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return f+ER(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return f+Rd(jm(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Xi(e,t,-n):Rd(""+(Math.floor(n)+BPe(n,s[1].length)))+"."+Nl(kR(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Xi(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=kv(Xi(e,t.replace(/[\\-]/g,""),n)),o=0,kv(kv(t.replace(/\\/g,"")).replace(/[0#]/g,function(h){return o<r.length?r.charAt(o++):h==="0"?"0":""}));if(t.match(d$))return r=Xi(e,"##########",n),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=w2(c,Math.pow(10,o)-1,!1),r=""+f,d=Dc("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),r+=d+s[2]+"/"+s[3],d=y2(l[2],o),d.length<s[4].length&&(d=Oo(s[4].substr(s[4].length-d.length))+d),r+=d,r;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=w2(c,Math.pow(10,o)-1,!0),f+(l[0]||(l[1]?"":"0"))+" "+(l[1]?NT(l[1],o)+s[2]+"/"+s[3]+y2(l[2],o):Mr(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return r=jm(n,0),t.length<=r.length?r:Oo(t.substr(0,t.length-r.length))+r;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){r=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=r.indexOf(".");var A=t.indexOf(".")-o,m=t.length-r.length-A;return Oo(t.substr(0,A)+r+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=kR(n,s[1].length),n<0?"-"+Xi(e,t,-n):Rd(TPe(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(h){return"00,"+(h.length<3?Nl(0,3-h.length):"")+h})+"."+Nl(o,s[1].length);switch(t){case"###,##0.00":return Xi(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var p=Rd(jm(c,0));return p!=="0"?f+p:"";case"###,###.00":return Xi(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Xi(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function IPe(e,t,n){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Dc(e,t.substr(0,a),n/Math.pow(10,3*(t.length-a)))}function FPe(e,t,n){var a=t.replace(o$,""),r=t.length-a.length;return Dc(e,a,n*Math.pow(10,2*r))+Mr("%",r)}function f$(e,t){var n,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+f$(e,-t);var r=e.indexOf(".");r===-1&&(r=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%r;if(s<0&&(s+=r),n=(t/Math.pow(10,s)).toPrecision(a+1+(r+s)%r),!n.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,f,d){return c+f+d.substr(0,(r+s)%r)+"."+d.substr(s)+"E"})}else n=t.toExponential(a);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function wu(e,t,n){if(e.charCodeAt(0)===40&&!t.match(c$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?wu("n",a,n):"("+wu("n",a,-n)+")"}if(t.charCodeAt(t.length-1)===44)return IPe(e,t,n);if(t.indexOf("%")!==-1)return FPe(e,t,n);if(t.indexOf("E")!==-1)return f$(t,n);if(t.charCodeAt(0)===36)return"$"+wu(e,t.substr(t.charAt(1)==" "?2:1),n);var r,s,o,l,c=Math.abs(n),f=n<0?"-":"";if(t.match(/^00+$/))return f+Nl(c,t.length);if(t.match(/^[#?]+$/))return r=""+n,n===0&&(r=""),r.length>t.length?r:Oo(t.substr(0,t.length-r.length))+r;if(s=t.match(l$))return kPe(s,c,f);if(t.match(/^#+0+$/))return f+Nl(c,t.length-t.indexOf("0"));if(s=t.match(u$))return r=(""+n).replace(/^([^\.]+)$/,"$1."+Oo(s[1])).replace(/\.$/,"."+Oo(s[1])),r=r.replace(/\.(\d*)$/,function(h,y){return"."+y+Mr("0",Oo(s[1]).length-y.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return f+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return f+Rd(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+wu(e,t,-n):Rd(""+n)+"."+Mr("0",s[1].length);if(s=t.match(/^#,#*,#0/))return wu(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=kv(wu(e,t.replace(/[\\-]/g,""),n)),o=0,kv(kv(t.replace(/\\/g,"")).replace(/[0#]/g,function(h){return o<r.length?r.charAt(o++):h==="0"?"0":""}));if(t.match(d$))return r=wu(e,"##########",n),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=w2(c,Math.pow(10,o)-1,!1),r=""+f,d=Dc("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),r+=d+s[2]+"/"+s[3],d=y2(l[2],o),d.length<s[4].length&&(d=Oo(s[4].substr(s[4].length-d.length))+d),r+=d,r;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=w2(c,Math.pow(10,o)-1,!0),f+(l[0]||(l[1]?"":"0"))+" "+(l[1]?NT(l[1],o)+s[2]+"/"+s[3]+y2(l[2],o):Mr(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return r=""+n,t.length<=r.length?r:Oo(t.substr(0,t.length-r.length))+r;if(s=t.match(/^([#0]+)\.([#0]+)$/)){r=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=r.indexOf(".");var A=t.indexOf(".")-o,m=t.length-r.length-A;return Oo(t.substr(0,A)+r+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+wu(e,t,-n):Rd(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(h){return"00,"+(h.length<3?Nl(0,3-h.length):"")+h})+"."+Nl(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=Rd(""+c);return p!=="0"?f+p:"";default:if(t.match(/\.[0#?]*$/))return wu(e,t.slice(0,t.lastIndexOf(".")),n)+Oo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Dc(e,t,n){return(n|0)===n?wu(e,t,n):Xi(e,t,n)}function PPe(e){for(var t=[],n=!1,a=0,r=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:n=!n;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(r,a-r),r=a+1}if(t[t.length]=e.substr(r),n===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var A$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function kh(e){for(var t=0,n="",a="";t<e.length;)switch(n=e.charAt(t)){case"G":_2(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=n;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(A$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||n=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function DPe(e,t,n,a){for(var r=[],s="",o=0,l="",c="t",f,d,A,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!_2(e,o))throw new Error("unrecognized character "+l+" in "+e);r[r.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(A=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(A);r[r.length]={t:"t",v:s},++o;break;case"\\":var p=e.charAt(++o),h=p==="("||p===")"?p:"t";r[r.length]={t:h,v:p},++o;break;case"_":r[r.length]={t:"t",v:" "},o+=2;break;case"@":r[r.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(f==null&&(f=Jf(t,n,e.charAt(o+1)==="2"),f==null))return"";r[r.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||f==null&&(f=Jf(t,n),f==null))return"";for(s=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),r[r.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var y={t:l,v:l};if(f==null&&(f=Jf(t,n)),e.substr(o,3).toUpperCase()==="A/P"?(f!=null&&(y.v=f.H>=12?"P":"A"),y.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(f!=null&&(y.v=f.H>=12?"PM":"AM"),y.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(f!=null&&(y.v=f.H>=12?"":""),y.t="T",o+=5,m="h"):(y.t="t",++o),f==null&&y.t==="T")return"";r[r.length]=y,c=l;break;case"[":for(s=l;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(A$)){if(f==null&&(f=Jf(t,n),f==null))return"";r[r.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",kh(e)||(r[r.length]={t:"t",v:s}));break;case".":if(f!=null){for(s=l;++o<e.length&&(l=e.charAt(o))==="0";)s+=l;r[r.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)s+=l;r[r.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++o)===l;)s+=l;r[r.length]={t:l,v:s},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":r[r.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);r[r.length]={t:"D",v:s};break;case" ":r[r.length]={t:l,v:l},++o;break;case"$":r[r.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);r[r.length]={t:"t",v:l},++o;break}var g=0,_=0,b;for(o=r.length-1,c="t";o>=0;--o)switch(r[o].t){case"h":case"H":r[o].t=m,c="h",g<1&&(g=1);break;case"s":(b=r[o].v.match(/\.0+$/))&&(_=Math.max(_,b[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=r[o].t;break;case"m":c==="s"&&(r[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&r[o].v.match(/[Hh]/)&&(g=1),g<2&&r[o].v.match(/[Mm]/)&&(g=2),g<3&&r[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M),f.M>=60&&(f.M=0,++f.H);break;case 2:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M);break}var S="",B;for(o=0;o<r.length;++o)switch(r[o].t){case"t":case"T":case" ":case"D":break;case"X":r[o].v="",r[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":r[o].v=xPe(r[o].t.charCodeAt(0),r[o].v,f,_),r[o].t="t";break;case"n":case"?":for(B=o+1;r[B]!=null&&((l=r[B].t)==="?"||l==="D"||(l===" "||l==="t")&&r[B+1]!=null&&(r[B+1].t==="?"||r[B+1].t==="t"&&r[B+1].v==="/")||r[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(r[B].v==="/"||r[B].v===" "&&r[B+1]!=null&&r[B+1].t=="?"));)r[o].v+=r[B].v,r[B]={v:"",t:";"},++B;S+=r[o].v,o=B-1;break;case"G":r[o].t="t",r[o].v=SA(t,n);break}var F="",T,E;if(S.length>0){S.charCodeAt(0)==40?(T=t<0&&S.charCodeAt(0)===45?-t:t,E=Dc("n",S,T)):(T=t<0&&a>1?-t:t,E=Dc("n",S,T),T<0&&r[0]&&r[0].t=="t"&&(E=E.substr(1),r[0].v="-"+r[0].v)),B=E.length-1;var x=r.length;for(o=0;o<r.length;++o)if(r[o]!=null&&r[o].t!="t"&&r[o].v.indexOf(".")>-1){x=o;break}var C=r.length;if(x===r.length&&E.indexOf("E")===-1){for(o=r.length-1;o>=0;--o)r[o]==null||"n?".indexOf(r[o].t)===-1||(B>=r[o].v.length-1?(B-=r[o].v.length,r[o].v=E.substr(B+1,r[o].v.length)):B<0?r[o].v="":(r[o].v=E.substr(0,B+1),B=-1),r[o].t="t",C=o);B>=0&&C<r.length&&(r[C].v=E.substr(0,B+1)+r[C].v)}else if(x!==r.length&&E.indexOf("E")===-1){for(B=E.indexOf(".")-1,o=x;o>=0;--o)if(!(r[o]==null||"n?".indexOf(r[o].t)===-1)){for(d=r[o].v.indexOf(".")>-1&&o===x?r[o].v.indexOf(".")-1:r[o].v.length-1,F=r[o].v.substr(d+1);d>=0;--d)B>=0&&(r[o].v.charAt(d)==="0"||r[o].v.charAt(d)==="#")&&(F=E.charAt(B--)+F);r[o].v=F,r[o].t="t",C=o}for(B>=0&&C<r.length&&(r[C].v=E.substr(0,B+1)+r[C].v),B=E.indexOf(".")+1,o=x;o<r.length;++o)if(!(r[o]==null||"n?(".indexOf(r[o].t)===-1&&o!==x)){for(d=r[o].v.indexOf(".")>-1&&o===x?r[o].v.indexOf(".")+1:0,F=r[o].v.substr(0,d);d<r[o].v.length;++d)B<E.length&&(F+=E.charAt(B++));r[o].v=F,r[o].t="t",C=o}}}for(o=0;o<r.length;++o)r[o]!=null&&"n?".indexOf(r[o].t)>-1&&(T=a>1&&t<0&&o>0&&r[o-1].v==="-"?-t:t,r[o].v=Dc(r[o].t,r[o].v,T),r[o].t="t");var D="";for(o=0;o!==r.length;++o)r[o]!=null&&(D+=r[o].v);return D}var BR=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function TR(e,t){if(t==null)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0;break}return!1}function UPe(e,t){var n=PPe(e),a=n.length,r=n[a-1].indexOf("@");if(a<4&&r>-1&&--a,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof t!="number")return[4,n.length===4||r>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=r>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=r>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=r>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=t>0?n[0]:t<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[a,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(BR),l=n[1].match(BR);return TR(t,o)?[a,n[0]]:TR(t,l)?[a,n[1]]:[a,n[o!=null&&l!=null?2:1]]}return[a,s]}function ul(e,t,n){n==null&&(n={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&n.dateNF?a=n.dateNF:a=e;break;case"number":e==14&&n.dateNF?a=n.dateNF:a=(n.table!=null?n.table:sa)[e],a==null&&(a=n.table&&n.table[SR[e]]||sa[SR[e]]),a==null&&(a=hPe[e]||"General");break}if(_2(a,0))return SA(t,n);t instanceof Date&&(t=s$(t,n.date1904));var r=UPe(a,t);if(_2(r[1]))return SA(t,n);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return DPe(r[1],t,n,r[0])}function cA(e,t){if(typeof t!="number"){t=+t||-1;for(var n=0;n<392;++n){if(sa[n]==null){t<0&&(t=n);continue}if(sa[n]==e){t=n;break}}t<0&&(t=391)}return sa[t]=e,t}function m$(){sa=vPe()}var RPe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},v$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function NPe(e){var t=typeof e=="number"?sa[e]:e;return t=t.replace(v$,"(\\d+)"),new RegExp("^"+t+"$")}function VPe(e,t,n){var a=-1,r=-1,s=-1,o=-1,l=-1,c=-1;(t.match(v$)||[]).forEach(function(A,m){var p=parseInt(n[m+1],10);switch(A.toLowerCase().charAt(0)){case"y":a=p;break;case"d":s=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:r=p;break}}),c>=0&&l==-1&&r>=0&&(l=r,r=-1);var f=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(r>=1?r:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);f.length==7&&(f="0"+f),f.length==8&&(f="20"+f);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?f:a==-1&&r==-1&&s==-1?d:f+"T"+d}var LPe=(function(){var e={};e.version="1.2.0";function t(){for(var E=0,x=new Array(256),C=0;C!=256;++C)E=C,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,x[C]=E;return typeof Int32Array<"u"?new Int32Array(x):x}var n=t();function a(E){var x=0,C=0,D=0,U=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)U[D]=E[D];for(D=0;D!=256;++D)for(C=E[D],x=256+D;x<4096;x+=256)C=U[x]=C>>>8^E[C&255];var L=[];for(D=1;D!=16;++D)L[D-1]=typeof Int32Array<"u"?U.subarray(D*256,D*256+256):U.slice(D*256,D*256+256);return L}var r=a(n),s=r[0],o=r[1],l=r[2],c=r[3],f=r[4],d=r[5],A=r[6],m=r[7],p=r[8],h=r[9],y=r[10],g=r[11],_=r[12],b=r[13],S=r[14];function B(E,x){for(var C=x^-1,D=0,U=E.length;D<U;)C=C>>>8^n[(C^E.charCodeAt(D++))&255];return~C}function F(E,x){for(var C=x^-1,D=E.length-15,U=0;U<D;)C=S[E[U++]^C&255]^b[E[U++]^C>>8&255]^_[E[U++]^C>>16&255]^g[E[U++]^C>>>24]^y[E[U++]]^h[E[U++]]^p[E[U++]]^m[E[U++]]^A[E[U++]]^d[E[U++]]^f[E[U++]]^c[E[U++]]^l[E[U++]]^o[E[U++]]^s[E[U++]]^n[E[U++]];for(D+=15;U<D;)C=C>>>8^n[(C^E[U++])&255];return~C}function T(E,x){for(var C=x^-1,D=0,U=E.length,L=0,H=0;D<U;)L=E.charCodeAt(D++),L<128?C=C>>>8^n[(C^L)&255]:L<2048?(C=C>>>8^n[(C^(192|L>>6&31))&255],C=C>>>8^n[(C^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,H=E.charCodeAt(D++)&1023,C=C>>>8^n[(C^(240|L>>8&7))&255],C=C>>>8^n[(C^(128|L>>2&63))&255],C=C>>>8^n[(C^(128|H>>6&15|(L&3)<<4))&255],C=C>>>8^n[(C^(128|H&63))&255]):(C=C>>>8^n[(C^(224|L>>12&15))&255],C=C>>>8^n[(C^(128|L>>6&63))&255],C=C>>>8^n[(C^(128|L&63))&255]);return~C}return e.table=n,e.bstr=B,e.buf=F,e.str=T,e})(),Ta=(function(){var t={};t.version="1.2.1";function n(Ce,He){for(var Re=Ce.split("/"),Te=He.split("/"),Ve=0,$e=0,dt=Math.min(Re.length,Te.length);Ve<dt;++Ve){if($e=Re[Ve].length-Te[Ve].length)return $e;if(Re[Ve]!=Te[Ve])return Re[Ve]<Te[Ve]?-1:1}return Re.length-Te.length}function a(Ce){if(Ce.charAt(Ce.length-1)=="/")return Ce.slice(0,-1).indexOf("/")===-1?Ce:a(Ce.slice(0,-1));var He=Ce.lastIndexOf("/");return He===-1?Ce:Ce.slice(0,He+1)}function r(Ce){if(Ce.charAt(Ce.length-1)=="/")return r(Ce.slice(0,-1));var He=Ce.lastIndexOf("/");return He===-1?Ce:Ce.slice(He+1)}function s(Ce,He){typeof He=="string"&&(He=new Date(He));var Re=He.getHours();Re=Re<<6|He.getMinutes(),Re=Re<<5|He.getSeconds()>>>1,Ce.write_shift(2,Re);var Te=He.getFullYear()-1980;Te=Te<<4|He.getMonth()+1,Te=Te<<5|He.getDate(),Ce.write_shift(2,Te)}function o(Ce){var He=Ce.read_shift(2)&65535,Re=Ce.read_shift(2)&65535,Te=new Date,Ve=Re&31;Re>>>=5;var $e=Re&15;Re>>>=4,Te.setMilliseconds(0),Te.setFullYear(Re+1980),Te.setMonth($e-1),Te.setDate(Ve);var dt=He&31;He>>>=5;var Bt=He&63;return He>>>=6,Te.setHours(He),Te.setMinutes(Bt),Te.setSeconds(dt<<1),Te}function l(Ce){Ys(Ce,0);for(var He={},Re=0;Ce.l<=Ce.length-4;){var Te=Ce.read_shift(2),Ve=Ce.read_shift(2),$e=Ce.l+Ve,dt={};switch(Te){case 21589:Re=Ce.read_shift(1),Re&1&&(dt.mtime=Ce.read_shift(4)),Ve>5&&(Re&2&&(dt.atime=Ce.read_shift(4)),Re&4&&(dt.ctime=Ce.read_shift(4))),dt.mtime&&(dt.mt=new Date(dt.mtime*1e3));break}Ce.l=$e,He[Te]=dt}return He}var c;function f(){return c||(c={})}function d(Ce,He){if(Ce[0]==80&&Ce[1]==75)return ln(Ce,He);if((Ce[0]|32)==109&&(Ce[1]|32)==105)return ut(Ce,He);if(Ce.length<512)throw new Error("CFB file size "+Ce.length+" < 512");var Re=3,Te=512,Ve=0,$e=0,dt=0,Bt=0,yt=0,gt=[],pt=Ce.slice(0,512);Ys(pt,0);var tt=A(pt);switch(Re=tt[0],Re){case 3:Te=512;break;case 4:Te=4096;break;case 0:if(tt[1]==0)return ln(Ce,He);default:throw new Error("Major Version: Expected 3 or 4 saw "+Re)}Te!==512&&(pt=Ce.slice(0,Te),Ys(pt,28));var re=Ce.slice(0,Te);m(pt,Re);var ue=pt.read_shift(4,"i");if(Re===3&&ue!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ue);pt.l+=4,dt=pt.read_shift(4,"i"),pt.l+=4,pt.chk("00100000","Mini Stream Cutoff Size: "),Bt=pt.read_shift(4,"i"),Ve=pt.read_shift(4,"i"),yt=pt.read_shift(4,"i"),$e=pt.read_shift(4,"i");for(var We=-1,nt=0;nt<109&&(We=pt.read_shift(4,"i"),!(We<0));++nt)gt[nt]=We;var Yt=p(Ce,Te);g(yt,$e,Yt,Te,gt);var Ct=b(Yt,dt,gt,Te);Ct[dt].name="!Directory",Ve>0&&Bt!==H&&(Ct[Bt].name="!MiniFAT"),Ct[gt[0]].name="!FAT",Ct.fat_addrs=gt,Ct.ssz=Te;var Xe={},Et=[],ca=[],Un=[];S(dt,Ct,Yt,Et,Ve,Xe,ca,Bt),h(ca,Un,Et),Et.shift();var Vr={FileIndex:ca,FullPaths:Un};return He&&He.raw&&(Vr.raw={header:re,sectors:Yt}),Vr}function A(Ce){if(Ce[Ce.l]==80&&Ce[Ce.l+1]==75)return[0,0];Ce.chk(oe,"Header Signature: "),Ce.l+=16;var He=Ce.read_shift(2,"u");return[Ce.read_shift(2,"u"),He]}function m(Ce,He){var Re=9;switch(Ce.l+=2,Re=Ce.read_shift(2)){case 9:if(He!=3)throw new Error("Sector Shift: Expected 9 saw "+Re);break;case 12:if(He!=4)throw new Error("Sector Shift: Expected 12 saw "+Re);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Re)}Ce.chk("0600","Mini Sector Shift: "),Ce.chk("000000000000","Reserved: ")}function p(Ce,He){for(var Re=Math.ceil(Ce.length/He)-1,Te=[],Ve=1;Ve<Re;++Ve)Te[Ve-1]=Ce.slice(Ve*He,(Ve+1)*He);return Te[Re-1]=Ce.slice(Re*He),Te}function h(Ce,He,Re){for(var Te=0,Ve=0,$e=0,dt=0,Bt=0,yt=Re.length,gt=[],pt=[];Te<yt;++Te)gt[Te]=pt[Te]=Te,He[Te]=Re[Te];for(;Bt<pt.length;++Bt)Te=pt[Bt],Ve=Ce[Te].L,$e=Ce[Te].R,dt=Ce[Te].C,gt[Te]===Te&&(Ve!==-1&&gt[Ve]!==Ve&&(gt[Te]=gt[Ve]),$e!==-1&&gt[$e]!==$e&&(gt[Te]=gt[$e])),dt!==-1&&(gt[dt]=Te),Ve!==-1&&Te!=gt[Te]&&(gt[Ve]=gt[Te],pt.lastIndexOf(Ve)<Bt&&pt.push(Ve)),$e!==-1&&Te!=gt[Te]&&(gt[$e]=gt[Te],pt.lastIndexOf($e)<Bt&&pt.push($e));for(Te=1;Te<yt;++Te)gt[Te]===Te&&($e!==-1&&gt[$e]!==$e?gt[Te]=gt[$e]:Ve!==-1&&gt[Ve]!==Ve&&(gt[Te]=gt[Ve]));for(Te=1;Te<yt;++Te)if(Ce[Te].type!==0){if(Bt=Te,Bt!=gt[Bt])do Bt=gt[Bt],He[Te]=He[Bt]+"/"+He[Te];while(Bt!==0&&gt[Bt]!==-1&&Bt!=gt[Bt]);gt[Te]=-1}for(He[0]+="/",Te=1;Te<yt;++Te)Ce[Te].type!==2&&(He[Te]+="/")}function y(Ce,He,Re){for(var Te=Ce.start,Ve=Ce.size,$e=[],dt=Te;Re&&Ve>0&&dt>=0;)$e.push(He.slice(dt*L,dt*L+L)),Ve-=L,dt=Gf(Re,dt*4);return $e.length===0?xs(0):Id($e).slice(0,Ce.size)}function g(Ce,He,Re,Te,Ve){var $e=H;if(Ce===H){if(He!==0)throw new Error("DIFAT chain shorter than expected")}else if(Ce!==-1){var dt=Re[Ce],Bt=(Te>>>2)-1;if(!dt)return;for(var yt=0;yt<Bt&&($e=Gf(dt,yt*4))!==H;++yt)Ve.push($e);g(Gf(dt,Te-4),He-1,Re,Te,Ve)}}function _(Ce,He,Re,Te,Ve){var $e=[],dt=[];Ve||(Ve=[]);var Bt=Te-1,yt=0,gt=0;for(yt=He;yt>=0;){Ve[yt]=!0,$e[$e.length]=yt,dt.push(Ce[yt]);var pt=Re[Math.floor(yt*4/Te)];if(gt=yt*4&Bt,Te<4+gt)throw new Error("FAT boundary crossed: "+yt+" 4 "+Te);if(!Ce[pt])break;yt=Gf(Ce[pt],gt)}return{nodes:$e,data:MR([dt])}}function b(Ce,He,Re,Te){var Ve=Ce.length,$e=[],dt=[],Bt=[],yt=[],gt=Te-1,pt=0,tt=0,re=0,ue=0;for(pt=0;pt<Ve;++pt)if(Bt=[],re=pt+He,re>=Ve&&(re-=Ve),!dt[re]){yt=[];var We=[];for(tt=re;tt>=0;){We[tt]=!0,dt[tt]=!0,Bt[Bt.length]=tt,yt.push(Ce[tt]);var nt=Re[Math.floor(tt*4/Te)];if(ue=tt*4&gt,Te<4+ue)throw new Error("FAT boundary crossed: "+tt+" 4 "+Te);if(!Ce[nt]||(tt=Gf(Ce[nt],ue),We[tt]))break}$e[re]={nodes:Bt,data:MR([yt])}}return $e}function S(Ce,He,Re,Te,Ve,$e,dt,Bt){for(var yt=0,gt=Te.length?2:0,pt=He[Ce].data,tt=0,re=0,ue;tt<pt.length;tt+=128){var We=pt.slice(tt,tt+128);Ys(We,64),re=We.read_shift(2),ue=$T(We,0,re-gt),Te.push(ue);var nt={name:ue,type:We.read_shift(1),color:We.read_shift(1),L:We.read_shift(4,"i"),R:We.read_shift(4,"i"),C:We.read_shift(4,"i"),clsid:We.read_shift(16),state:We.read_shift(4,"i"),start:0,size:0},Yt=We.read_shift(2)+We.read_shift(2)+We.read_shift(2)+We.read_shift(2);Yt!==0&&(nt.ct=B(We,We.l-8));var Ct=We.read_shift(2)+We.read_shift(2)+We.read_shift(2)+We.read_shift(2);Ct!==0&&(nt.mt=B(We,We.l-8)),nt.start=We.read_shift(4,"i"),nt.size=We.read_shift(4,"i"),nt.size<0&&nt.start<0&&(nt.size=nt.type=0,nt.start=H,nt.name=""),nt.type===5?(yt=nt.start,Ve>0&&yt!==H&&(He[yt].name="!StreamData")):nt.size>=4096?(nt.storage="fat",He[nt.start]===void 0&&(He[nt.start]=_(Re,nt.start,He.fat_addrs,He.ssz)),He[nt.start].name=nt.name,nt.content=He[nt.start].data.slice(0,nt.size)):(nt.storage="minifat",nt.size<0?nt.size=0:yt!==H&&nt.start!==H&&He[yt]&&(nt.content=y(nt,He[yt].data,(He[Bt]||{}).data))),nt.content&&Ys(nt.content,0),$e[ue]=nt,dt.push(nt)}}function B(Ce,He){return new Date((Si(Ce,He+4)/1e7*Math.pow(2,32)+Si(Ce,He)/1e7-11644473600)*1e3)}function F(Ce,He){return f(),d(c.readFileSync(Ce),He)}function T(Ce,He){var Re=He&&He.type;switch(Re||xa&&Buffer.isBuffer(Ce)&&(Re="buffer"),Re||"base64"){case"file":return F(Ce,He);case"base64":return d(Il(Ui(Ce)),He);case"binary":return d(Il(Ce),He)}return d(Ce,He)}function E(Ce,He){var Re=He||{},Te=Re.root||"Root Entry";if(Ce.FullPaths||(Ce.FullPaths=[]),Ce.FileIndex||(Ce.FileIndex=[]),Ce.FullPaths.length!==Ce.FileIndex.length)throw new Error("inconsistent CFB structure");Ce.FullPaths.length===0&&(Ce.FullPaths[0]=Te+"/",Ce.FileIndex[0]={name:Te,type:5}),Re.CLSID&&(Ce.FileIndex[0].clsid=Re.CLSID),x(Ce)}function x(Ce){var He="Sh33tJ5";if(!Ta.find(Ce,"/"+He)){var Re=xs(4);Re[0]=55,Re[1]=Re[3]=50,Re[2]=54,Ce.FileIndex.push({name:He,type:2,content:Re,size:4,L:69,R:69,C:69}),Ce.FullPaths.push(Ce.FullPaths[0]+He),C(Ce)}}function C(Ce,He){E(Ce);for(var Re=!1,Te=!1,Ve=Ce.FullPaths.length-1;Ve>=0;--Ve){var $e=Ce.FileIndex[Ve];switch($e.type){case 0:Te?Re=!0:(Ce.FileIndex.pop(),Ce.FullPaths.pop());break;case 1:case 2:case 5:Te=!0,isNaN($e.R*$e.L*$e.C)&&(Re=!0),$e.R>-1&&$e.L>-1&&$e.R==$e.L&&(Re=!0);break;default:Re=!0;break}}if(!(!Re&&!He)){var dt=new Date(1987,1,19),Bt=0,yt=Object.create?Object.create(null):{},gt=[];for(Ve=0;Ve<Ce.FullPaths.length;++Ve)yt[Ce.FullPaths[Ve]]=!0,Ce.FileIndex[Ve].type!==0&&gt.push([Ce.FullPaths[Ve],Ce.FileIndex[Ve]]);for(Ve=0;Ve<gt.length;++Ve){var pt=a(gt[Ve][0]);Te=yt[pt],Te||(gt.push([pt,{name:r(pt).replace("/",""),type:1,clsid:te,ct:dt,mt:dt,content:null}]),yt[pt]=!0)}for(gt.sort(function(ue,We){return n(ue[0],We[0])}),Ce.FullPaths=[],Ce.FileIndex=[],Ve=0;Ve<gt.length;++Ve)Ce.FullPaths[Ve]=gt[Ve][0],Ce.FileIndex[Ve]=gt[Ve][1];for(Ve=0;Ve<gt.length;++Ve){var tt=Ce.FileIndex[Ve],re=Ce.FullPaths[Ve];if(tt.name=r(re).replace("/",""),tt.L=tt.R=tt.C=-(tt.color=1),tt.size=tt.content?tt.content.length:0,tt.start=0,tt.clsid=tt.clsid||te,Ve===0)tt.C=gt.length>1?1:-1,tt.size=0,tt.type=5;else if(re.slice(-1)=="/"){for(Bt=Ve+1;Bt<gt.length&&a(Ce.FullPaths[Bt])!=re;++Bt);for(tt.C=Bt>=gt.length?-1:Bt,Bt=Ve+1;Bt<gt.length&&a(Ce.FullPaths[Bt])!=a(re);++Bt);tt.R=Bt>=gt.length?-1:Bt,tt.type=1}else a(Ce.FullPaths[Ve+1]||"")==a(re)&&(tt.R=Ve+1),tt.type=2}}}function D(Ce,He){var Re=He||{};if(Re.fileType=="mad")return wt(Ce,Re);switch(C(Ce),Re.fileType){case"zip":return vt(Ce,Re)}var Te=(function(ue){for(var We=0,nt=0,Yt=0;Yt<ue.FileIndex.length;++Yt){var Ct=ue.FileIndex[Yt];if(Ct.content){var Xe=Ct.content.length;Xe>0&&(Xe<4096?We+=Xe+63>>6:nt+=Xe+511>>9)}}for(var Et=ue.FullPaths.length+3>>2,ca=We+7>>3,Un=We+127>>7,Vr=ca+nt+Et+Un,Mn=Vr+127>>7,ma=Mn<=109?0:Math.ceil((Mn-109)/127);Vr+Mn+ma+127>>7>Mn;)ma=++Mn<=109?0:Math.ceil((Mn-109)/127);var Qn=[1,ma,Mn,Un,Et,nt,We,0];return ue.FileIndex[0].size=We<<6,Qn[7]=(ue.FileIndex[0].start=Qn[0]+Qn[1]+Qn[2]+Qn[3]+Qn[4]+Qn[5])+(Qn[6]+7>>3),Qn})(Ce),Ve=xs(Te[7]<<9),$e=0,dt=0;{for($e=0;$e<8;++$e)Ve.write_shift(1,de[$e]);for($e=0;$e<8;++$e)Ve.write_shift(2,0);for(Ve.write_shift(2,62),Ve.write_shift(2,3),Ve.write_shift(2,65534),Ve.write_shift(2,9),Ve.write_shift(2,6),$e=0;$e<3;++$e)Ve.write_shift(2,0);for(Ve.write_shift(4,0),Ve.write_shift(4,Te[2]),Ve.write_shift(4,Te[0]+Te[1]+Te[2]+Te[3]-1),Ve.write_shift(4,0),Ve.write_shift(4,4096),Ve.write_shift(4,Te[3]?Te[0]+Te[1]+Te[2]-1:H),Ve.write_shift(4,Te[3]),Ve.write_shift(-4,Te[1]?Te[0]-1:H),Ve.write_shift(4,Te[1]),$e=0;$e<109;++$e)Ve.write_shift(-4,$e<Te[2]?Te[1]+$e:-1)}if(Te[1])for(dt=0;dt<Te[1];++dt){for(;$e<236+dt*127;++$e)Ve.write_shift(-4,$e<Te[2]?Te[1]+$e:-1);Ve.write_shift(-4,dt===Te[1]-1?H:dt+1)}var Bt=function(ue){for(dt+=ue;$e<dt-1;++$e)Ve.write_shift(-4,$e+1);ue&&(++$e,Ve.write_shift(-4,H))};for(dt=$e=0,dt+=Te[1];$e<dt;++$e)Ve.write_shift(-4,q.DIFSECT);for(dt+=Te[2];$e<dt;++$e)Ve.write_shift(-4,q.FATSECT);Bt(Te[3]),Bt(Te[4]);for(var yt=0,gt=0,pt=Ce.FileIndex[0];yt<Ce.FileIndex.length;++yt)pt=Ce.FileIndex[yt],pt.content&&(gt=pt.content.length,!(gt<4096)&&(pt.start=dt,Bt(gt+511>>9)));for(Bt(Te[6]+7>>3);Ve.l&511;)Ve.write_shift(-4,q.ENDOFCHAIN);for(dt=$e=0,yt=0;yt<Ce.FileIndex.length;++yt)pt=Ce.FileIndex[yt],pt.content&&(gt=pt.content.length,!(!gt||gt>=4096)&&(pt.start=dt,Bt(gt+63>>6)));for(;Ve.l&511;)Ve.write_shift(-4,q.ENDOFCHAIN);for($e=0;$e<Te[4]<<2;++$e){var tt=Ce.FullPaths[$e];if(!tt||tt.length===0){for(yt=0;yt<17;++yt)Ve.write_shift(4,0);for(yt=0;yt<3;++yt)Ve.write_shift(4,-1);for(yt=0;yt<12;++yt)Ve.write_shift(4,0);continue}pt=Ce.FileIndex[$e],$e===0&&(pt.start=pt.size?pt.start-1:H);var re=$e===0&&Re.root||pt.name;if(gt=2*(re.length+1),Ve.write_shift(64,re,"utf16le"),Ve.write_shift(2,gt),Ve.write_shift(1,pt.type),Ve.write_shift(1,pt.color),Ve.write_shift(-4,pt.L),Ve.write_shift(-4,pt.R),Ve.write_shift(-4,pt.C),pt.clsid)Ve.write_shift(16,pt.clsid,"hex");else for(yt=0;yt<4;++yt)Ve.write_shift(4,0);Ve.write_shift(4,pt.state||0),Ve.write_shift(4,0),Ve.write_shift(4,0),Ve.write_shift(4,0),Ve.write_shift(4,0),Ve.write_shift(4,pt.start),Ve.write_shift(4,pt.size),Ve.write_shift(4,0)}for($e=1;$e<Ce.FileIndex.length;++$e)if(pt=Ce.FileIndex[$e],pt.size>=4096)if(Ve.l=pt.start+1<<9,xa&&Buffer.isBuffer(pt.content))pt.content.copy(Ve,Ve.l,0,pt.size),Ve.l+=pt.size+511&-512;else{for(yt=0;yt<pt.size;++yt)Ve.write_shift(1,pt.content[yt]);for(;yt&511;++yt)Ve.write_shift(1,0)}for($e=1;$e<Ce.FileIndex.length;++$e)if(pt=Ce.FileIndex[$e],pt.size>0&&pt.size<4096)if(xa&&Buffer.isBuffer(pt.content))pt.content.copy(Ve,Ve.l,0,pt.size),Ve.l+=pt.size+63&-64;else{for(yt=0;yt<pt.size;++yt)Ve.write_shift(1,pt.content[yt]);for(;yt&63;++yt)Ve.write_shift(1,0)}if(xa)Ve.l=Ve.length;else for(;Ve.l<Ve.length;)Ve.write_shift(1,0);return Ve}function U(Ce,He){var Re=Ce.FullPaths.map(function(yt){return yt.toUpperCase()}),Te=Re.map(function(yt){var gt=yt.split("/");return gt[gt.length-(yt.slice(-1)=="/"?2:1)]}),Ve=!1;He.charCodeAt(0)===47?(Ve=!0,He=Re[0].slice(0,-1)+He):Ve=He.indexOf("/")!==-1;var $e=He.toUpperCase(),dt=Ve===!0?Re.indexOf($e):Te.indexOf($e);if(dt!==-1)return Ce.FileIndex[dt];var Bt=!$e.match(Op);for($e=$e.replace(zo,""),Bt&&($e=$e.replace(Op,"!")),dt=0;dt<Re.length;++dt)if((Bt?Re[dt].replace(Op,"!"):Re[dt]).replace(zo,"")==$e||(Bt?Te[dt].replace(Op,"!"):Te[dt]).replace(zo,"")==$e)return Ce.FileIndex[dt];return null}var L=64,H=-2,oe="d0cf11e0a1b11ae1",de=[208,207,17,224,161,177,26,225],te="00000000000000000000000000000000",q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:H,FREESECT:-1,HEADER_SIGNATURE:oe,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:te,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(Ce,He,Re){f();var Te=D(Ce,Re);c.writeFileSync(He,Te)}function le(Ce){for(var He=new Array(Ce.length),Re=0;Re<Ce.length;++Re)He[Re]=String.fromCharCode(Ce[Re]);return He.join("")}function Z(Ce,He){var Re=D(Ce,He);switch(He&&He.type||"buffer"){case"file":return f(),c.writeFileSync(He.filename,Re),Re;case"binary":return typeof Re=="string"?Re:le(Re);case"base64":return wR(typeof Re=="string"?Re:le(Re));case"buffer":if(xa)return Buffer.isBuffer(Re)?Re:qA(Re);case"array":return typeof Re=="string"?Il(Re):Re}return Re}var ne;function G(Ce){try{var He=Ce.InflateRaw,Re=new He;if(Re._processChunk(new Uint8Array([3,0]),Re._finishFlushFlag),Re.bytesRead)ne=Ce;else throw new Error("zlib does not expose bytesRead")}catch(Te){console.error("cannot use native zlib: "+(Te.message||Te))}}function W(Ce,He){if(!ne)return Vt(Ce,He);var Re=ne.InflateRaw,Te=new Re,Ve=Te._processChunk(Ce.slice(Ce.l),Te._finishFlushFlag);return Ce.l+=Te.bytesRead,Ve}function Q(Ce){return ne?ne.deflateRawSync(Ce):xt(Ce)}var O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function J(Ce){var He=(Ce<<1|Ce<<11)&139536|(Ce<<5|Ce<<15)&558144;return(He>>16|He>>8|He)&255}for(var ie=typeof Uint8Array<"u",X=ie?new Uint8Array(256):[],fe=0;fe<256;++fe)X[fe]=J(fe);function M(Ce,He){var Re=X[Ce&255];return He<=8?Re>>>8-He:(Re=Re<<8|X[Ce>>8&255],He<=16?Re>>>16-He:(Re=Re<<8|X[Ce>>16&255],Re>>>24-He))}function z(Ce,He){var Re=He&7,Te=He>>>3;return(Ce[Te]|(Re<=6?0:Ce[Te+1]<<8))>>>Re&3}function se(Ce,He){var Re=He&7,Te=He>>>3;return(Ce[Te]|(Re<=5?0:Ce[Te+1]<<8))>>>Re&7}function be(Ce,He){var Re=He&7,Te=He>>>3;return(Ce[Te]|(Re<=4?0:Ce[Te+1]<<8))>>>Re&15}function Fe(Ce,He){var Re=He&7,Te=He>>>3;return(Ce[Te]|(Re<=3?0:Ce[Te+1]<<8))>>>Re&31}function ye(Ce,He){var Re=He&7,Te=He>>>3;return(Ce[Te]|(Re<=1?0:Ce[Te+1]<<8))>>>Re&127}function Qe(Ce,He,Re){var Te=He&7,Ve=He>>>3,$e=(1<<Re)-1,dt=Ce[Ve]>>>Te;return Re<8-Te||(dt|=Ce[Ve+1]<<8-Te,Re<16-Te)||(dt|=Ce[Ve+2]<<16-Te,Re<24-Te)||(dt|=Ce[Ve+3]<<24-Te),dt&$e}function _e(Ce,He,Re){var Te=He&7,Ve=He>>>3;return Te<=5?Ce[Ve]|=(Re&7)<<Te:(Ce[Ve]|=Re<<Te&255,Ce[Ve+1]=(Re&7)>>8-Te),He+3}function Se(Ce,He,Re){var Te=He&7,Ve=He>>>3;return Re=(Re&1)<<Te,Ce[Ve]|=Re,He+1}function Ee(Ce,He,Re){var Te=He&7,Ve=He>>>3;return Re<<=Te,Ce[Ve]|=Re&255,Re>>>=8,Ce[Ve+1]=Re,He+8}function Ue(Ce,He,Re){var Te=He&7,Ve=He>>>3;return Re<<=Te,Ce[Ve]|=Re&255,Re>>>=8,Ce[Ve+1]=Re&255,Ce[Ve+2]=Re>>>8,He+16}function je(Ce,He){var Re=Ce.length,Te=2*Re>He?2*Re:He+5,Ve=0;if(Re>=He)return Ce;if(xa){var $e=bR(Te);if(Ce.copy)Ce.copy($e);else for(;Ve<Ce.length;++Ve)$e[Ve]=Ce[Ve];return $e}else if(ie){var dt=new Uint8Array(Te);if(dt.set)dt.set(Ce);else for(;Ve<Re;++Ve)dt[Ve]=Ce[Ve];return dt}return Ce.length=Te,Ce}function at(Ce){for(var He=new Array(Ce),Re=0;Re<Ce;++Re)He[Re]=0;return He}function mt(Ce,He,Re){var Te=1,Ve=0,$e=0,dt=0,Bt=0,yt=Ce.length,gt=ie?new Uint16Array(32):at(32);for($e=0;$e<32;++$e)gt[$e]=0;for($e=yt;$e<Re;++$e)Ce[$e]=0;yt=Ce.length;var pt=ie?new Uint16Array(yt):at(yt);for($e=0;$e<yt;++$e)gt[Ve=Ce[$e]]++,Te<Ve&&(Te=Ve),pt[$e]=0;for(gt[0]=0,$e=1;$e<=Te;++$e)gt[$e+16]=Bt=Bt+gt[$e-1]<<1;for($e=0;$e<yt;++$e)Bt=Ce[$e],Bt!=0&&(pt[$e]=gt[Bt+16]++);var tt=0;for($e=0;$e<yt;++$e)if(tt=Ce[$e],tt!=0)for(Bt=M(pt[$e],Te)>>Te-tt,dt=(1<<Te+4-tt)-1;dt>=0;--dt)He[Bt|dt<<tt]=tt&15|$e<<4;return Te}var xe=ie?new Uint16Array(512):at(512),Be=ie?new Uint16Array(32):at(32);if(!ie){for(var Ye=0;Ye<512;++Ye)xe[Ye]=0;for(Ye=0;Ye<32;++Ye)Be[Ye]=0}(function(){for(var Ce=[],He=0;He<32;He++)Ce.push(5);mt(Ce,Be,32);var Re=[];for(He=0;He<=143;He++)Re.push(8);for(;He<=255;He++)Re.push(9);for(;He<=279;He++)Re.push(7);for(;He<=287;He++)Re.push(8);mt(Re,xe,288)})();var kt=(function(){for(var He=ie?new Uint8Array(32768):[],Re=0,Te=0;Re<j.length-1;++Re)for(;Te<j[Re+1];++Te)He[Te]=Re;for(;Te<32768;++Te)He[Te]=29;var Ve=ie?new Uint8Array(259):[];for(Re=0,Te=0;Re<ae.length-1;++Re)for(;Te<ae[Re+1];++Te)Ve[Te]=Re;function $e(Bt,yt){for(var gt=0;gt<Bt.length;){var pt=Math.min(65535,Bt.length-gt),tt=gt+pt==Bt.length;for(yt.write_shift(1,+tt),yt.write_shift(2,pt),yt.write_shift(2,~pt&65535);pt-- >0;)yt[yt.l++]=Bt[gt++]}return yt.l}function dt(Bt,yt){for(var gt=0,pt=0,tt=ie?new Uint16Array(32768):[];pt<Bt.length;){var re=Math.min(65535,Bt.length-pt);if(re<10){for(gt=_e(yt,gt,+(pt+re==Bt.length)),gt&7&&(gt+=8-(gt&7)),yt.l=gt/8|0,yt.write_shift(2,re),yt.write_shift(2,~re&65535);re-- >0;)yt[yt.l++]=Bt[pt++];gt=yt.l*8;continue}gt=_e(yt,gt,+(pt+re==Bt.length)+2);for(var ue=0;re-- >0;){var We=Bt[pt];ue=(ue<<5^We)&32767;var nt=-1,Yt=0;if((nt=tt[ue])&&(nt|=pt&-32768,nt>pt&&(nt-=32768),nt<pt))for(;Bt[nt+Yt]==Bt[pt+Yt]&&Yt<250;)++Yt;if(Yt>2){We=Ve[Yt],We<=22?gt=Ee(yt,gt,X[We+1]>>1)-1:(Ee(yt,gt,3),gt+=5,Ee(yt,gt,X[We-23]>>5),gt+=3);var Ct=We<8?0:We-4>>2;Ct>0&&(Ue(yt,gt,Yt-ae[We]),gt+=Ct),We=He[pt-nt],gt=Ee(yt,gt,X[We]>>3),gt-=3;var Xe=We<4?0:We-2>>1;Xe>0&&(Ue(yt,gt,pt-nt-j[We]),gt+=Xe);for(var Et=0;Et<Yt;++Et)tt[ue]=pt&32767,ue=(ue<<5^Bt[pt])&32767,++pt;re-=Yt-1}else We<=143?We=We+48:gt=Se(yt,gt,1),gt=Ee(yt,gt,X[We]),tt[ue]=pt&32767,++pt}gt=Ee(yt,gt,0)-1}return yt.l=(gt+7)/8|0,yt.l}return function(yt,gt){return yt.length<8?$e(yt,gt):dt(yt,gt)}})();function xt(Ce){var He=xs(50+Math.floor(Ce.length*1.1)),Re=kt(Ce,He);return He.slice(0,Re)}var Nt=ie?new Uint16Array(32768):at(32768),At=ie?new Uint16Array(32768):at(32768),Ot=ie?new Uint16Array(128):at(128),Dt=1,bt=1;function Ze(Ce,He){var Re=Fe(Ce,He)+257;He+=5;var Te=Fe(Ce,He)+1;He+=5;var Ve=be(Ce,He)+4;He+=4;for(var $e=0,dt=ie?new Uint8Array(19):at(19),Bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],yt=1,gt=ie?new Uint8Array(8):at(8),pt=ie?new Uint8Array(8):at(8),tt=dt.length,re=0;re<Ve;++re)dt[O[re]]=$e=se(Ce,He),yt<$e&&(yt=$e),gt[$e]++,He+=3;var ue=0;for(gt[0]=0,re=1;re<=yt;++re)pt[re]=ue=ue+gt[re-1]<<1;for(re=0;re<tt;++re)(ue=dt[re])!=0&&(Bt[re]=pt[ue]++);var We=0;for(re=0;re<tt;++re)if(We=dt[re],We!=0){ue=X[Bt[re]]>>8-We;for(var nt=(1<<7-We)-1;nt>=0;--nt)Ot[ue|nt<<We]=We&7|re<<3}var Yt=[];for(yt=1;Yt.length<Re+Te;)switch(ue=Ot[ye(Ce,He)],He+=ue&7,ue>>>=3){case 16:for($e=3+z(Ce,He),He+=2,ue=Yt[Yt.length-1];$e-- >0;)Yt.push(ue);break;case 17:for($e=3+se(Ce,He),He+=3;$e-- >0;)Yt.push(0);break;case 18:for($e=11+ye(Ce,He),He+=7;$e-- >0;)Yt.push(0);break;default:Yt.push(ue),yt<ue&&(yt=ue);break}var Ct=Yt.slice(0,Re),Xe=Yt.slice(Re);for(re=Re;re<286;++re)Ct[re]=0;for(re=Te;re<30;++re)Xe[re]=0;return Dt=mt(Ct,Nt,286),bt=mt(Xe,At,30),He}function qt(Ce,He){if(Ce[0]==3&&!(Ce[1]&3))return[rf(He),2];for(var Re=0,Te=0,Ve=bR(He||1<<18),$e=0,dt=Ve.length>>>0,Bt=0,yt=0;(Te&1)==0;){if(Te=se(Ce,Re),Re+=3,Te>>>1)Te>>1==1?(Bt=9,yt=5):(Re=Ze(Ce,Re),Bt=Dt,yt=bt);else{Re&7&&(Re+=8-(Re&7));var gt=Ce[Re>>>3]|Ce[(Re>>>3)+1]<<8;if(Re+=32,gt>0)for(!He&&dt<$e+gt&&(Ve=je(Ve,$e+gt),dt=Ve.length);gt-- >0;)Ve[$e++]=Ce[Re>>>3],Re+=8;continue}for(;;){!He&&dt<$e+32767&&(Ve=je(Ve,$e+32767),dt=Ve.length);var pt=Qe(Ce,Re,Bt),tt=Te>>>1==1?xe[pt]:Nt[pt];if(Re+=tt&15,tt>>>=4,(tt>>>8&255)===0)Ve[$e++]=tt;else{if(tt==256)break;tt-=257;var re=tt<8?0:tt-4>>2;re>5&&(re=0);var ue=$e+ae[tt];re>0&&(ue+=Qe(Ce,Re,re),Re+=re),pt=Qe(Ce,Re,yt),tt=Te>>>1==1?Be[pt]:At[pt],Re+=tt&15,tt>>>=4;var We=tt<4?0:tt-2>>1,nt=j[tt];for(We>0&&(nt+=Qe(Ce,Re,We),Re+=We),!He&&dt<ue&&(Ve=je(Ve,ue+100),dt=Ve.length);$e<ue;)Ve[$e]=Ve[$e-nt],++$e}}}return He?[Ve,Re+7>>>3]:[Ve.slice(0,$e),Re+7>>>3]}function Vt(Ce,He){var Re=Ce.slice(Ce.l||0),Te=qt(Re,He);return Ce.l+=Te[1],Te[0]}function zt(Ce,He){if(Ce)typeof console<"u"&&console.error(He);else throw new Error(He)}function ln(Ce,He){var Re=Ce;Ys(Re,0);var Te=[],Ve=[],$e={FileIndex:Te,FullPaths:Ve};E($e,{root:He.root});for(var dt=Re.length-4;(Re[dt]!=80||Re[dt+1]!=75||Re[dt+2]!=5||Re[dt+3]!=6)&&dt>=0;)--dt;Re.l=dt+4,Re.l+=4;var Bt=Re.read_shift(2);Re.l+=6;var yt=Re.read_shift(4);for(Re.l=yt,dt=0;dt<Bt;++dt){Re.l+=20;var gt=Re.read_shift(4),pt=Re.read_shift(4),tt=Re.read_shift(2),re=Re.read_shift(2),ue=Re.read_shift(2);Re.l+=8;var We=Re.read_shift(4),nt=l(Re.slice(Re.l+tt,Re.l+tt+re));Re.l+=tt+re+ue;var Yt=Re.l;Re.l=We+4,Dn(Re,gt,pt,$e,nt),Re.l=Yt}return $e}function Dn(Ce,He,Re,Te,Ve){Ce.l+=2;var $e=Ce.read_shift(2),dt=Ce.read_shift(2),Bt=o(Ce);if($e&8257)throw new Error("Unsupported ZIP encryption");for(var yt=Ce.read_shift(4),gt=Ce.read_shift(4),pt=Ce.read_shift(4),tt=Ce.read_shift(2),re=Ce.read_shift(2),ue="",We=0;We<tt;++We)ue+=String.fromCharCode(Ce[Ce.l++]);if(re){var nt=l(Ce.slice(Ce.l,Ce.l+re));(nt[21589]||{}).mt&&(Bt=nt[21589].mt),((Ve||{})[21589]||{}).mt&&(Bt=Ve[21589].mt)}Ce.l+=re;var Yt=Ce.slice(Ce.l,Ce.l+gt);switch(dt){case 8:Yt=W(Ce,pt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+dt)}var Ct=!1;$e&8&&(yt=Ce.read_shift(4),yt==134695760&&(yt=Ce.read_shift(4),Ct=!0),gt=Ce.read_shift(4),pt=Ce.read_shift(4)),gt!=He&&zt(Ct,"Bad compressed size: "+He+" != "+gt),pt!=Re&&zt(Ct,"Bad uncompressed size: "+Re+" != "+pt),bn(Te,ue,Yt,{unsafe:!0,mt:Bt})}function vt(Ce,He){var Re=He||{},Te=[],Ve=[],$e=xs(1),dt=Re.compression?8:0,Bt=0,yt=0,gt=0,pt=0,tt=0,re=Ce.FullPaths[0],ue=re,We=Ce.FileIndex[0],nt=[],Yt=0;for(yt=1;yt<Ce.FullPaths.length;++yt)if(ue=Ce.FullPaths[yt].slice(re.length),We=Ce.FileIndex[yt],!(!We.size||!We.content||ue=="Sh33tJ5")){var Ct=pt,Xe=xs(ue.length);for(gt=0;gt<ue.length;++gt)Xe.write_shift(1,ue.charCodeAt(gt)&127);Xe=Xe.slice(0,Xe.l),nt[tt]=LPe.buf(We.content,0);var Et=We.content;dt==8&&(Et=Q(Et)),$e=xs(30),$e.write_shift(4,67324752),$e.write_shift(2,20),$e.write_shift(2,Bt),$e.write_shift(2,dt),We.mt?s($e,We.mt):$e.write_shift(4,0),$e.write_shift(-4,nt[tt]),$e.write_shift(4,Et.length),$e.write_shift(4,We.content.length),$e.write_shift(2,Xe.length),$e.write_shift(2,0),pt+=$e.length,Te.push($e),pt+=Xe.length,Te.push(Xe),pt+=Et.length,Te.push(Et),$e=xs(46),$e.write_shift(4,33639248),$e.write_shift(2,0),$e.write_shift(2,20),$e.write_shift(2,Bt),$e.write_shift(2,dt),$e.write_shift(4,0),$e.write_shift(-4,nt[tt]),$e.write_shift(4,Et.length),$e.write_shift(4,We.content.length),$e.write_shift(2,Xe.length),$e.write_shift(2,0),$e.write_shift(2,0),$e.write_shift(2,0),$e.write_shift(2,0),$e.write_shift(4,0),$e.write_shift(4,Ct),Yt+=$e.l,Ve.push($e),Yt+=Xe.length,Ve.push(Xe),++tt}return $e=xs(22),$e.write_shift(4,101010256),$e.write_shift(2,0),$e.write_shift(2,0),$e.write_shift(2,tt),$e.write_shift(2,tt),$e.write_shift(4,Yt),$e.write_shift(4,pt),$e.write_shift(2,0),Id([Id(Te),Id(Ve),$e])}var et={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Wt(Ce,He){if(Ce.ctype)return Ce.ctype;var Re=Ce.name||"",Te=Re.match(/\.([^\.]+)$/);return Te&&et[Te[1]]||He&&(Te=(Re=He).match(/[\.\\]([^\.\\])+$/),Te&&et[Te[1]])?et[Te[1]]:"application/octet-stream"}function _n(Ce){for(var He=wR(Ce),Re=[],Te=0;Te<He.length;Te+=76)Re.push(He.slice(Te,Te+76));return Re.join(`\r
`)+`\r
`}function na(Ce){var He=Ce.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(gt){var pt=gt.charCodeAt(0).toString(16).toUpperCase();return"="+(pt.length==1?"0"+pt:pt)});He=He.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),He.charAt(0)==`
`&&(He="=0D"+He.slice(1)),He=He.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Re=[],Te=He.split(`\r
`),Ve=0;Ve<Te.length;++Ve){var $e=Te[Ve];if($e.length==0){Re.push("");continue}for(var dt=0;dt<$e.length;){var Bt=76,yt=$e.slice(dt,dt+Bt);yt.charAt(Bt-1)=="="?Bt--:yt.charAt(Bt-2)=="="?Bt-=2:yt.charAt(Bt-3)=="="&&(Bt-=3),yt=$e.slice(dt,dt+Bt),dt+=Bt,dt<$e.length&&(yt+="="),Re.push(yt)}}return Re.join(`\r
`)}function rt(Ce){for(var He=[],Re=0;Re<Ce.length;++Re){for(var Te=Ce[Re];Re<=Ce.length&&Te.charAt(Te.length-1)=="=";)Te=Te.slice(0,Te.length-1)+Ce[++Re];He.push(Te)}for(var Ve=0;Ve<He.length;++Ve)He[Ve]=He[Ve].replace(/[=][0-9A-Fa-f]{2}/g,function($e){return String.fromCharCode(parseInt($e.slice(1),16))});return Il(He.join(`\r
`))}function Pe(Ce,He,Re){for(var Te="",Ve="",$e="",dt,Bt=0;Bt<10;++Bt){var yt=He[Bt];if(!yt||yt.match(/^\s*$/))break;var gt=yt.match(/^(.*?):\s*([^\s].*)$/);if(gt)switch(gt[1].toLowerCase()){case"content-location":Te=gt[2].trim();break;case"content-type":$e=gt[2].trim();break;case"content-transfer-encoding":Ve=gt[2].trim();break}}switch(++Bt,Ve.toLowerCase()){case"base64":dt=Il(Ui(He.slice(Bt).join("")));break;case"quoted-printable":dt=rt(He.slice(Bt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ve)}var pt=bn(Ce,Te.slice(Re.length),dt,{unsafe:!0});$e&&(pt.ctype=$e)}function ut(Ce,He){if(le(Ce.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Re=He&&He.root||"",Te=(xa&&Buffer.isBuffer(Ce)?Ce.toString("binary"):le(Ce)).split(`\r
`),Ve=0,$e="";for(Ve=0;Ve<Te.length;++Ve)if($e=Te[Ve],!!/^Content-Location:/i.test($e)&&($e=$e.slice($e.indexOf("file")),Re||(Re=$e.slice(0,$e.lastIndexOf("/")+1)),$e.slice(0,Re.length)!=Re))for(;Re.length>0&&(Re=Re.slice(0,Re.length-1),Re=Re.slice(0,Re.lastIndexOf("/")+1),$e.slice(0,Re.length)!=Re););var dt=(Te[1]||"").match(/boundary="(.*?)"/);if(!dt)throw new Error("MAD cannot find boundary");var Bt="--"+(dt[1]||""),yt=[],gt=[],pt={FileIndex:yt,FullPaths:gt};E(pt);var tt,re=0;for(Ve=0;Ve<Te.length;++Ve){var ue=Te[Ve];ue!==Bt&&ue!==Bt+"--"||(re++&&Pe(pt,Te.slice(tt,Ve),Re),tt=Ve)}return pt}function wt(Ce,He){var Re=He||{},Te=Re.boundary||"SheetJS";Te="------="+Te;for(var Ve=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Te.slice(2)+'"',"","",""],$e=Ce.FullPaths[0],dt=$e,Bt=Ce.FileIndex[0],yt=1;yt<Ce.FullPaths.length;++yt)if(dt=Ce.FullPaths[yt].slice($e.length),Bt=Ce.FileIndex[yt],!(!Bt.size||!Bt.content||dt=="Sh33tJ5")){dt=dt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Yt){return"_x"+Yt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Yt){return"_u"+Yt.charCodeAt(0).toString(16)+"_"});for(var gt=Bt.content,pt=xa&&Buffer.isBuffer(gt)?gt.toString("binary"):le(gt),tt=0,re=Math.min(1024,pt.length),ue=0,We=0;We<=re;++We)(ue=pt.charCodeAt(We))>=32&&ue<128&&++tt;var nt=tt>=re*4/5;Ve.push(Te),Ve.push("Content-Location: "+(Re.root||"file:///C:/SheetJS/")+dt),Ve.push("Content-Transfer-Encoding: "+(nt?"quoted-printable":"base64")),Ve.push("Content-Type: "+Wt(Bt,dt)),Ve.push(""),Ve.push(nt?na(pt):_n(pt))}return Ve.push(Te+`--\r
`),Ve.join(`\r
`)}function Xt(Ce){var He={};return E(He,Ce),He}function bn(Ce,He,Re,Te){var Ve=Te&&Te.unsafe;Ve||E(Ce);var $e=!Ve&&Ta.find(Ce,He);if(!$e){var dt=Ce.FullPaths[0];He.slice(0,dt.length)==dt?dt=He:(dt.slice(-1)!="/"&&(dt+="/"),dt=(dt+He).replace("//","/")),$e={name:r(He),type:2},Ce.FileIndex.push($e),Ce.FullPaths.push(dt),Ve||Ta.utils.cfb_gc(Ce)}return $e.content=Re,$e.size=Re?Re.length:0,Te&&(Te.CLSID&&($e.clsid=Te.CLSID),Te.mt&&($e.mt=Te.mt),Te.ct&&($e.ct=Te.ct)),$e}function wn(Ce,He){E(Ce);var Re=Ta.find(Ce,He);if(Re){for(var Te=0;Te<Ce.FileIndex.length;++Te)if(Ce.FileIndex[Te]==Re)return Ce.FileIndex.splice(Te,1),Ce.FullPaths.splice(Te,1),!0}return!1}function Zn(Ce,He,Re){E(Ce);var Te=Ta.find(Ce,He);if(Te){for(var Ve=0;Ve<Ce.FileIndex.length;++Ve)if(Ce.FileIndex[Ve]==Te)return Ce.FileIndex[Ve].name=r(Re),Ce.FullPaths[Ve]=Re,!0}return!1}function ua(Ce){C(Ce,!0)}return t.find=U,t.read=T,t.parse=d,t.write=Z,t.writeFile=ce,t.utils={cfb_new:Xt,cfb_add:bn,cfb_del:wn,cfb_mov:Zn,cfb_gc:ua,ReadShift:u0,CheckField:V$,prep_blob:Ys,bconcat:Id,use_zlib:G,_deflateRaw:xt,_inflateRaw:Vt,consts:q},t})();function MPe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var n=t.read();return t.close(),n}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Lu(e){for(var t=Object.keys(e),n=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&n.push(t[a]);return n}function LT(e){for(var t=[],n=Lu(e),a=0;a!==n.length;++a)t[e[n[a]]]=n[a];return t}var b2=new Date(1899,11,30,0,0,0);function jo(e,t){var n=e.getTime(),a=b2.getTime()+(e.getTimezoneOffset()-b2.getTimezoneOffset())*6e4;return(n-a)/(1440*60*1e3)}var h$=new Date,OPe=b2.getTime()+(h$.getTimezoneOffset()-b2.getTimezoneOffset())*6e4,IR=h$.getTimezoneOffset();function Kw(e){var t=new Date;return t.setTime(e*24*60*60*1e3+OPe),t.getTimezoneOffset()!==IR&&t.setTime(t.getTime()+(t.getTimezoneOffset()-IR)*6e4),t}function HPe(e){var t=0,n=0,a=!1,r=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!r)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=r.length;++s)if(r[s]){switch(n=1,s>3&&(a=!0),r[s].slice(r[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+r[s].slice(r[s].length-1));case"D":n*=24;case"H":n*=60;case"M":if(a)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=n*parseInt(r[s],10)}return t}var FR=new Date("2017-02-19T19:06:09.000Z"),p$=isNaN(FR.getFullYear())?new Date("2/19/17"):FR,$Pe=p$.getFullYear()==2017;function Hs(e,t){var n=new Date(e);if($Pe)return t>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):t<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(e instanceof Date)return e;if(p$.getFullYear()==1917&&!isNaN(n.getFullYear())){var a=n.getFullYear();return e.indexOf(""+a)>-1||n.setFullYear(n.getFullYear()+100),n}var r=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+r[0],+r[1]-1,+r[2],+r[3]||0,+r[4]||0,+r[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function EA(e,t){if(xa&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return $p(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return $p(a$(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return $p(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return $p(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return n[s]||s})}catch{}for(var a=[],r=0;r!=e.length;++r)a.push(String.fromCharCode(e[r]));return a.join("")}function ao(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=ao(e[n]));return t}function Mr(e,t){for(var n="";n.length<t;)n+=e;return n}function Hl(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(r,s){return n=-n,s}),!isNaN(t=Number(a)))?t/n:t}var QPe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Zv(e){var t=new Date(e),n=new Date(NaN),a=t.getYear(),r=t.getMonth(),s=t.getDate();if(isNaN(s))return n;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&QPe.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return a<0||a>8099?n:(r>0||s>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?n:t}var GPe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(n,a,r){if(e||typeof a=="string")return n.split(a);for(var s=n.split(a),o=[s[0]],l=1;l<s.length;++l)o.push(r),o.push(s[l]);return o}})();function g$(e){return e?e.content&&e.type?EA(e.content,!0):e.data?Mp(e.data):e.asNodeBuffer&&xa?Mp(e.asNodeBuffer().toString("binary")):e.asBinary?Mp(e.asBinary()):e._data&&e._data.getContent?Mp(EA(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function y$(e){if(!e)return null;if(e.data)return yR(e.data);if(e.asNodeBuffer&&xa)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?yR(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function zPe(e){return e&&e.name.slice(-4)===".bin"?y$(e):g$(e)}function el(e,t){for(var n=e.FullPaths||Lu(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),r=a.replace(/\\/g,"/"),s=0;s<n.length;++s){var o=n[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||r==o)return e.files?e.files[n[s]]:e.FileIndex[s]}return null}function MT(e,t){var n=el(e,t);if(n==null)throw new Error("Cannot find file "+t+" in zip");return n}function cs(e,t,n){if(!n)return zPe(MT(e,t));if(!t)return null;try{return cs(e,t)}catch{return null}}function Ei(e,t,n){if(!n)return g$(MT(e,t));if(!t)return null;try{return Ei(e,t)}catch{return null}}function WPe(e,t,n){return y$(MT(e,t))}function PR(e){for(var t=e.FullPaths||Lu(e.files),n=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&n.push(t[a].replace(/^Root Entry[\/]/,""));return n.sort()}function KPe(e,t,n){if(e.FullPaths){if(typeof n=="string"){var a;return xa?a=qA(n):a=fPe(n),Ta.utils.cfb_add(e,t,a)}Ta.utils.cfb_add(e,t,n)}else e.file(t,n)}function _$(e,t){switch(t.type){case"base64":return Ta.read(e,{type:"base64"});case"binary":return Ta.read(e,{type:"binary"});case"buffer":case"array":return Ta.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Hp(e,t){if(e.charAt(0)=="/")return e.slice(1);var n=t.split("/");t.slice(-1)!="/"&&n.pop();for(var a=e.split("/");a.length!==0;){var r=a.shift();r===".."?n.pop():r!=="."&&n.push(r)}return n.join("/")}var w$=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,jPe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,DR=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,qPe=/<[^>]*>/g,Do=w$.match(DR)?DR:qPe,YPe=/<\w*:/,XPe=/<(\/?)\w+:/;function zn(e,t,n){for(var a={},r=0,s=0;r!==e.length&&!((s=e.charCodeAt(r))===32||s===10||s===13);++r);if(t||(a[0]=e.slice(0,r)),r===e.length)return a;var o=e.match(jPe),l=0,c="",f=0,d="",A="",m=1;if(o)for(f=0;f!=o.length;++f){for(A=o[f],s=0;s!=A.length&&A.charCodeAt(s)!==61;++s);for(d=A.slice(0,s).trim();A.charCodeAt(s+1)==32;)++s;for(m=(r=A.charCodeAt(s+1))==34||r==39?1:0,c=A.slice(s+1+m,A.length-m),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),a[d]=c,a[d.toLowerCase()]=c;else{var p=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(a[p]&&d.slice(l-3,l)=="ext")continue;a[p]=c,a[p.toLowerCase()]=c}}return a}function qu(e){return e.replace(XPe,"<$1")}var b$={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},JPe=LT(b$),Va=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function n(a){var r=a+"",s=r.indexOf("<![CDATA[");if(s==-1)return r.replace(e,function(l,c){return b$[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=r.indexOf("]]>");return n(r.slice(0,s))+r.slice(s+9,o)+n(r.slice(o+3))}})(),ZPe=/[&<>'"]/g,eDe=/[\u0000-\u001f]/g;function OT(e){var t=e+"";return t.replace(ZPe,function(n){return JPe[n]}).replace(/\n/g,"<br/>").replace(eDe,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}var UR=(function(){var e=/&#(\d+);/g;function t(n,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}})();function Dr(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function NC(e){for(var t="",n=0,a=0,r=0,s=0,o=0,l=0;n<e.length;){if(a=e.charCodeAt(n++),a<128){t+=String.fromCharCode(a);continue}if(r=e.charCodeAt(n++),a>191&&a<224){o=(a&31)<<6,o|=r&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(n++),a<240){t+=String.fromCharCode((a&15)<<12|(r&63)<<6|s&63);continue}o=e.charCodeAt(n++),l=((a&7)<<18|(r&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function RR(e){var t=rf(2*e.length),n,a,r=1,s=0,o=0,l;for(a=0;a<e.length;a+=r)r=1,(l=e.charCodeAt(a))<128?n=l:l<224?(n=(l&31)*64+(e.charCodeAt(a+1)&63),r=2):l<240?(n=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),r=3):(r=4,n=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=n%256,t[s++]=n>>>8;return t.slice(0,s).toString("ucs2")}function NR(e){return qA(e,"binary").toString("utf8")}var Dy="foo bar baz",gr=xa&&(NR(Dy)==NC(Dy)&&NR||RR(Dy)==NC(Dy)&&RR)||NC,$p=xa?function(e){return qA(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,a=0,r=0;n<e.length;)switch(a=e.charCodeAt(n++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,r=e.charCodeAt(n++)-56320+(a<<10),t.push(String.fromCharCode(240+(r>>18&7))),t.push(String.fromCharCode(144+(r>>12&63))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(r&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},Y0=(function(){var e={};return function(n,a){var r=n+"|"+(a||"");return e[r]?e[r]:e[r]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",a||"")}})(),x$=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(n){for(var a=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),r=0;r<e.length;++r)a=a.replace(e[r][0],e[r][1]);return a}})(),tDe=(function(){var e={};return function(n){return e[n]!==void 0?e[n]:e[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}})(),nDe=/<\/?(?:vt:)?variant>/g,aDe=/<(?:vt:)([^>]*)>([\s\S]*)</;function VR(e,t){var n=zn(e),a=e.match(tDe(n.baseType))||[],r=[];if(a.length!=n.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+n.size);return r}return a.forEach(function(s){var o=s.replace(nDe,"").match(aDe);o&&r.push({v:gr(o[2]),t:o[1]})}),r}var rDe=/(^\s|\s$|\n)/;function sDe(e){return Lu(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function oDe(e,t,n){return"<"+e+(n!=null?sDe(n):"")+(t!=null?(t.match(rDe)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function HT(e){if(xa&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return gr(YA(RT(e)));throw new Error("Bad input format: expected Buffer or string")}var X0=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,iDe={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},lDe=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function uDe(e,t){for(var n=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),r=e[t+6]&15,s=5;s>=0;--s)r=r*256+e[t+s];return a==2047?r==0?n*(1/0):NaN:(a==0?a=-1022:(a-=1023,r+=Math.pow(2,52)),n*Math.pow(2,a-52)*r)}function cDe(e,t,n){var a=(t<0||1/t==-1/0?1:0)<<7,r=0,s=0,o=a?-t:t;isFinite(o)?o==0?r=s=0:(r=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-r),r<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?r=-1022:(s-=Math.pow(2,52),r+=1023)):(r=2047,s=isNaN(t)?26985:0);for(var l=0;l<=5;++l,s/=256)e[n+l]=s&255;e[n+6]=(r&15)<<4|s&15,e[n+7]=r>>4|a}var LR=function(e){for(var t=[],n=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var r=0,s=e[0][a].length;r<s;r+=n)t.push.apply(t,e[0][a].slice(r,r+n));return t},MR=xa?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:qA(t)})):LR(e)}:LR,OR=function(e,t,n){for(var a=[],r=t;r<n;r+=2)a.push(String.fromCharCode(Bc(e,r)));return a.join("").replace(zo,"")},$T=xa?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(zo,""):OR(e,t,n)}:OR,HR=function(e,t,n){for(var a=[],r=t;r<t+n;++r)a.push(("0"+e[r].toString(16)).slice(-2));return a.join("")},C$=xa?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):HR(e,t,n)}:HR,$R=function(e,t,n){for(var a=[],r=t;r<n;r++)a.push(String.fromCharCode(nv(e,r)));return a.join("")},Og=xa?function(t,n,a){return Buffer.isBuffer(t)?t.toString("utf8",n,a):$R(t,n,a)}:$R,S$=function(e,t){var n=Si(e,t);return n>0?Og(e,t+4,t+4+n-1):""},E$=S$,k$=function(e,t){var n=Si(e,t);return n>0?Og(e,t+4,t+4+n-1):""},B$=k$,T$=function(e,t){var n=2*Si(e,t);return n>0?Og(e,t+4,t+4+n-1):""},I$=T$,F$=function(t,n){var a=Si(t,n);return a>0?$T(t,n+4,n+4+a):""},P$=F$,D$=function(e,t){var n=Si(e,t);return n>0?Og(e,t+4,t+4+n):""},U$=D$,R$=function(e,t){return uDe(e,t)},x2=R$,N$=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};xa&&(E$=function(t,n){if(!Buffer.isBuffer(t))return S$(t,n);var a=t.readUInt32LE(n);return a>0?t.toString("utf8",n+4,n+4+a-1):""},B$=function(t,n){if(!Buffer.isBuffer(t))return k$(t,n);var a=t.readUInt32LE(n);return a>0?t.toString("utf8",n+4,n+4+a-1):""},I$=function(t,n){if(!Buffer.isBuffer(t))return T$(t,n);var a=2*t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+a-1)},P$=function(t,n){if(!Buffer.isBuffer(t))return F$(t,n);var a=t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+a)},U$=function(t,n){if(!Buffer.isBuffer(t))return D$(t,n);var a=t.readUInt32LE(n);return t.toString("utf8",n+4,n+4+a)},x2=function(t,n){return Buffer.isBuffer(t)?t.readDoubleLE(n):R$(t,n)},N$=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var nv=function(e,t){return e[t]},Bc=function(e,t){return e[t+1]*256+e[t]},dDe=function(e,t){var n=e[t+1]*256+e[t];return n<32768?n:(65535-n+1)*-1},Si=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Gf=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},fDe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function u0(e,t){var n="",a,r,s=[],o,l,c,f;switch(t){case"dbcs":if(f=this.l,xa&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)n+=String.fromCharCode(Bc(this,f)),f+=2;e*=2;break;case"utf8":n=Og(this,this.l,this.l+e);break;case"utf16le":e*=2,n=$T(this,this.l,this.l+e);break;case"wstr":return u0.call(this,e,"dbcs");case"lpstr-ansi":n=E$(this,this.l),e=4+Si(this,this.l);break;case"lpstr-cp":n=B$(this,this.l),e=4+Si(this,this.l);break;case"lpwstr":n=I$(this,this.l),e=4+2*Si(this,this.l);break;case"lpp4":e=4+Si(this,this.l),n=P$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Si(this,this.l),n=U$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,n="";(o=nv(this,this.l+e++))!==0;)s.push(Py(o));n=s.join("");break;case"_wstr":for(e=0,n="";(o=Bc(this,this.l+e))!==0;)s.push(Py(o)),e+=2;e+=2,n=s.join("");break;case"dbcs-cont":for(n="",f=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(f)!==-1)return o=nv(this,f),this.l=f+1,l=u0.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(Py(Bc(this,f))),f+=2}n=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(n="",f=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(f)!==-1)return o=nv(this,f),this.l=f+1,l=u0.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(Py(nv(this,f))),f+=1}n=s.join("");break;default:switch(e){case 1:return a=nv(this,this.l),this.l++,a;case 2:return a=(t==="i"?dDe:Bc)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?Gf:fDe)(this,this.l),this.l+=4,a):(r=Si(this,this.l),this.l+=4,r);case 8:case-8:if(t==="f")return e==8?r=x2(this,this.l):r=x2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:n=C$(this,this.l,e);break}}return this.l+=e,n}var ADe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},mDe=function(e,t,n){e[n]=t&255,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},vDe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255};function hDe(e,t,n){var a=0,r=0;if(n==="dbcs"){for(r=0;r!=t.length;++r)vDe(this,t.charCodeAt(r),this.l+2*r);a=2*t.length}else if(n==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),r=0;r!=t.length;++r)this[this.l+r]=t.charCodeAt(r)&255;a=t.length}else if(n==="hex"){for(;r<e;++r)this[this.l++]=parseInt(t.slice(2*r,2*r+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+e,this.length);for(r=0;r<Math.min(t.length,e);++r){var o=t.charCodeAt(r);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,ADe(this,t,this.l);break;case 8:if(a=8,n==="f"){cDe(this,t,this.l);break}case 16:break;case-4:a=4,mDe(this,t,this.l);break}return this.l+=a,this}function V$(e,t){var n=C$(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function Ys(e,t){e.l=t,e.read_shift=u0,e.chk=V$,e.write_shift=hDe}function Io(e,t){e.l+=t}function xs(e){var t=rf(e);return Ys(t,0),t}function Xc(e,t,n){if(e){var a,r,s;Ys(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var f=T2[l]||T2[65535];for(a=e.read_shift(1),s=a&127,r=1;r<4&&a&128;++r)s+=((a=e.read_shift(1))&127)<<7*r;c=e.l+s;var d=f.f&&f.f(e,s,n);if(e.l=c,t(d,f,l))return}}}function OE(){var e=[],t=xa?256:2048,n=function(f){var d=xs(f);return Ys(d,0),d},a=n(t),r=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},s=function(f){return a&&f<a.length-a.l?a:(r(),a=n(Math.max(f+1,t)))},o=function(){return r(),Id(e)},l=function(f){r(),a=f,a.l==null&&(a.l=a.length),s(t)};return{next:s,push:l,end:o,_bufs:e}}function c0(e,t,n){var a=ao(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!n||n.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function QR(e,t,n){var a=ao(e);return a.s=c0(a.s,t.s,n),a.e=c0(a.e,t.s,n),a}function d0(e,t){if(e.cRel&&e.c<0)for(e=ao(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=ao(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=Jn(e);return!e.cRel&&e.cRel!=null&&(n=yDe(n)),!e.rRel&&e.rRel!=null&&(n=pDe(n)),n}function VC(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Es(e.s.c)+":"+(e.e.cRel?"":"$")+Es(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ro(e.s.r)+":"+(e.e.rRel?"":"$")+ro(e.e.r):d0(e.s,t.biff)+":"+d0(e.e,t.biff)}function QT(e){return parseInt(gDe(e),10)-1}function ro(e){return""+(e+1)}function pDe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function gDe(e){return e.replace(/\$(\d+)$/,"$1")}function GT(e){for(var t=_De(e),n=0,a=0;a!==t.length;++a)n=26*n+t.charCodeAt(a)-64;return n-1}function Es(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function yDe(e){return e.replace(/^([A-Z])/,"$$$1")}function _De(e){return e.replace(/^\$([A-Z])/,"$1")}function wDe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Qo(e){for(var t=0,n=0,a=0;a<e.length;++a){var r=e.charCodeAt(a);r>=48&&r<=57?t=10*t+(r-48):r>=65&&r<=90&&(n=26*n+(r-64))}return{c:n-1,r:t-1}}function Jn(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function Bh(e){var t=e.indexOf(":");return t==-1?{s:Qo(e),e:Qo(e)}:{s:Qo(e.slice(0,t)),e:Qo(e.slice(t+1))}}function Pa(e,t){return typeof t>"u"||typeof t=="number"?Pa(e.s,e.e):(typeof e!="string"&&(e=Jn(e)),typeof t!="string"&&(t=Jn(t)),e==t?e:e+":"+t)}function Hr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,a=0,r=0,s=e.length;for(n=0;a<s&&!((r=e.charCodeAt(a)-64)<1||r>26);++a)n=26*n+r;for(t.s.c=--n,n=0;a<s&&!((r=e.charCodeAt(a)-48)<0||r>9);++a)n=10*n+r;if(t.s.r=--n,a===s||r!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,n=0;a!=s&&!((r=e.charCodeAt(a)-64)<1||r>26);++a)n=26*n+r;for(t.e.c=--n,n=0;a!=s&&!((r=e.charCodeAt(a)-48)<0||r>9);++a)n=10*n+r;return t.e.r=--n,t}function GR(e,t){var n=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=ul(e.z,n?jo(t):t)}catch{}try{return e.w=ul((e.XF||{}).numFmtId||(n?14:0),n?jo(t):t)}catch{return""+t}}function Gc(e,t,n){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),e.t=="e"?ZA[e.v]||e.v:t==null?GR(e,e.v):GR(e,t))}function mf(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",a={};return a[n]=e,{SheetNames:[n],Sheets:a}}function L$(e,t,n){var a=n||{},r=e?Array.isArray(e):a.dense,s=e||(r?[]:{}),o=0,l=0;if(s&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Qo(a.origin):a.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var f={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Hr(s["!ref"]);f.s.c=d.s.c,f.s.r=d.s.r,f.e.c=Math.max(f.e.c,d.e.c),f.e.r=Math.max(f.e.r,d.e.r),o==-1&&(f.e.r=o=d.e.r+1)}for(var A=0;A!=t.length;++A)if(t[A]){if(!Array.isArray(t[A]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[A].length;++m)if(!(typeof t[A][m]>"u")){var p={v:t[A][m]},h=o+A,y=l+m;if(f.s.r>h&&(f.s.r=h),f.s.c>y&&(f.s.c=y),f.e.r<h&&(f.e.r=h),f.e.c<y&&(f.e.c=y),t[A][m]&&typeof t[A][m]=="object"&&!Array.isArray(t[A][m])&&!(t[A][m]instanceof Date))p=t[A][m];else if(Array.isArray(p.v)&&(p.f=t[A][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(a.nullError)p.t="e",p.v=0;else if(a.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=a.dateNF||sa[14],a.cellDates?(p.t="d",p.w=ul(p.z,jo(p.v))):(p.t="n",p.v=jo(p.v),p.w=ul(p.z,p.v))):p.t="s";if(r)s[h]||(s[h]=[]),s[h][y]&&s[h][y].z&&(p.z=s[h][y].z),s[h][y]=p;else{var g=Jn({c:y,r:h});s[g]&&s[g].z&&(p.z=s[g].z),s[g]=p}}}return f.s.c<1e7&&(s["!ref"]=Pa(f)),s}function Th(e,t){return L$(null,e,t)}function bDe(e){return e.read_shift(4,"i")}function Bo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function xDe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function zT(e,t){var n=e.l,a=e.read_shift(1),r=Bo(e),s=[],o={t:r,h:r};if((a&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)s.push(xDe(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=n+t,o}var CDe=zT;function vl(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function XA(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var SDe=Bo;function WT(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var EDe=Bo,HE=WT;function KT(e){var t=e.slice(e.l,e.l+4),n=t[0]&1,a=t[0]&2;e.l+=4;var r=a===0?x2([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Gf(t,0)>>2;return n?r/100:r}function M$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var JA=M$;function wo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function kDe(e){var t={},n=e.read_shift(1),a=n>>>1,r=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=r;var f=dA[r];f&&(t.rgb=Z0(f));break;case 2:t.rgb=Z0([o,l,c]);break;case 3:t.theme=r;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function BDe(e){var t=e.read_shift(1);e.l++;var n={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return n}function O$(e,t){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return n[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function TDe(e){return O$(e,1)}function IDe(e){return O$(e,2)}var jT=2,ri=3,Uy=11,zR=12,C2=19,Ry=64,FDe=65,PDe=71,DDe=4108,UDe=4126,Vs=80,H$=81,RDe=[Vs,H$],NDe={1:{n:"CodePage",t:jT},2:{n:"Category",t:Vs},3:{n:"PresentationFormat",t:Vs},4:{n:"ByteCount",t:ri},5:{n:"LineCount",t:ri},6:{n:"ParagraphCount",t:ri},7:{n:"SlideCount",t:ri},8:{n:"NoteCount",t:ri},9:{n:"HiddenCount",t:ri},10:{n:"MultimediaClipCount",t:ri},11:{n:"ScaleCrop",t:Uy},12:{n:"HeadingPairs",t:DDe},13:{n:"TitlesOfParts",t:UDe},14:{n:"Manager",t:Vs},15:{n:"Company",t:Vs},16:{n:"LinksUpToDate",t:Uy},17:{n:"CharacterCount",t:ri},19:{n:"SharedDoc",t:Uy},22:{n:"HyperlinksChanged",t:Uy},23:{n:"AppVersion",t:ri,p:"version"},24:{n:"DigSig",t:FDe},26:{n:"ContentType",t:Vs},27:{n:"ContentStatus",t:Vs},28:{n:"Language",t:Vs},29:{n:"Version",t:Vs},255:{},2147483648:{n:"Locale",t:C2},2147483651:{n:"Behavior",t:C2},1919054434:{}},VDe={1:{n:"CodePage",t:jT},2:{n:"Title",t:Vs},3:{n:"Subject",t:Vs},4:{n:"Author",t:Vs},5:{n:"Keywords",t:Vs},6:{n:"Comments",t:Vs},7:{n:"Template",t:Vs},8:{n:"LastAuthor",t:Vs},9:{n:"RevNumber",t:Vs},10:{n:"EditTime",t:Ry},11:{n:"LastPrinted",t:Ry},12:{n:"CreatedDate",t:Ry},13:{n:"ModifiedDate",t:Ry},14:{n:"PageCount",t:ri},15:{n:"WordCount",t:ri},16:{n:"CharCount",t:ri},17:{n:"Thumbnail",t:PDe},18:{n:"Application",t:Vs},19:{n:"DocSecurity",t:ri},255:{},2147483648:{n:"Locale",t:C2},2147483651:{n:"Behavior",t:C2},1919054434:{}},WR={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},LDe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function MDe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var ODe=MDe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),dA=ao(ODe),ZA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},$$={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},KR={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function HDe(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function $De(e){var t=HDe();if(!e||!e.match)return t;var n={};if((e.match(Do)||[]).forEach(function(a){var r=zn(a);switch(r[0].replace(YPe,"<")){case"<?xml":break;case"<Types":t.xmlns=r["xmlns"+(r[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[r.Extension]=r.ContentType;break;case"<Override":t[KR[r.ContentType]]!==void 0&&t[KR[r.ContentType]].push(r.PartName);break}}),t.xmlns!==iDe.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=n,delete t.calcchains,t}var iv={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function $E(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function f0(e,t){var n={"!id":{}};if(!e)return n;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(Do)||[]).forEach(function(r){var s=zn(r);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Hp(s.Target,t);n[l]=o,a[s.Id]=o}}),n["!id"]=a,n}var QDe="application/vnd.oasis.opendocument.spreadsheet";function GDe(e,t){for(var n=HT(e),a,r;a=X0.exec(n);)switch(a[3]){case"manifest":break;case"file-entry":if(r=zn(a[0],!1),r.path=="/"&&r.type!==QDe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}var A0=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],zDe=(function(){for(var e=new Array(A0.length),t=0;t<A0.length;++t){var n=A0[t],a="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e})();function Q$(e){var t={};e=gr(e);for(var n=0;n<A0.length;++n){var a=A0[n],r=e.match(zDe[n]);r!=null&&r.length>0&&(t[a[1]]=Va(r[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=Hs(t[a[1]]))}return t}var WDe=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function G$(e,t,n,a){var r=[];if(typeof e=="string")r=VR(e,a);else for(var s=0;s<e.length;++s)r=r.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?VR(t,a).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var f=0;f!==r.length;f+=2){switch(c=+r[f+1].v,r[f].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":n.Worksheets=c,n.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":n.NamedRanges=c,n.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":n.Chartsheets=c,n.ChartNames=o.slice(l,l+c);break}l+=c}}function KDe(e,t,n){var a={};return t||(t={}),e=gr(e),WDe.forEach(function(r){var s=(e.match(Y0(r[0]))||[])[1];switch(r[2]){case"string":s&&(t[r[1]]=Va(s));break;case"bool":t[r[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+r[0]+"[^>]*>([\\s\\S]*?)</"+r[0]+">"));o&&o.length>0&&(a[r[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&G$(a.HeadingPairs,a.TitlesOfParts,t,n),t}var jDe=/<[^>]+>[^<]*/g;function qDe(e,t){var n={},a="",r=e.match(jDe);if(r)for(var s=0;s!=r.length;++s){var o=r[s],l=zn(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Va(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),f=c[0].slice(4),d=c[1];switch(f){case"lpstr":case"bstr":case"lpwstr":n[a]=Va(d);break;case"bool":n[a]=Dr(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[a]=parseInt(d,10);break;case"r4":case"r8":case"decimal":n[a]=parseFloat(d);break;case"filetime":case"date":n[a]=Hs(d);break;case"cy":case"error":n[a]=Va(d);break;default:if(f.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,f,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return n}var YDe={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},LC;function XDe(e,t,n){LC||(LC=LT(YDe)),t=LC[t]||t,e[t]=n}function qT(e){var t=e.read_shift(4),n=e.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function z$(e,t,n){var a=e.l,r=e.read_shift(0,"lpstr-cp");if(n)for(;e.l-a&3;)++e.l;return r}function W$(e,t,n){var a=e.read_shift(0,"lpwstr");return a}function K$(e,t,n){return t===31?W$(e):z$(e,t,n)}function QE(e,t,n){return K$(e,t,n===!1?0:4)}function JDe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return K$(e,t,0)}function ZDe(e){for(var t=e.read_shift(4),n=[],a=0;a!=t;++a){var r=e.l;n[a]=e.read_shift(0,"lpwstr").replace(zo,""),e.l-r&2&&(e.l+=2)}return n}function e3e(e){for(var t=e.read_shift(4),n=[],a=0;a!=t;++a)n[a]=e.read_shift(0,"lpstr-cp").replace(zo,"");return n}function t3e(e){var t=e.l,n=S2(e,H$);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=S2(e,ri);return[n,a]}function n3e(e){for(var t=e.read_shift(4),n=[],a=0;a<t/2;++a)n.push(t3e(e));return n}function jR(e,t){for(var n=e.read_shift(4),a={},r=0;r!=n;++r){var s=e.read_shift(4),o=e.read_shift(4);a[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(zo,"").replace(Op,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function j$(e){var t=e.read_shift(4),n=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),n}function a3e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function S2(e,t,n){var a=e.read_shift(2),r,s=n||{};if(e.l+=2,t!==zR&&a!==t&&RDe.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===zR?a:t){case 2:return r=e.read_shift(2,"i"),s.raw||(e.l+=2),r;case 3:return r=e.read_shift(4,"i"),r;case 11:return e.read_shift(4)!==0;case 19:return r=e.read_shift(4),r;case 30:return z$(e,a,4).replace(zo,"");case 31:return W$(e);case 64:return qT(e);case 65:return j$(e);case 71:return a3e(e);case 80:return QE(e,a,!s.raw).replace(zo,"");case 81:return JDe(e,a).replace(zo,"");case 4108:return n3e(e);case 4126:case 4127:return a==4127?ZDe(e):e3e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function qR(e,t){var n=e.l,a=e.read_shift(4),r=e.read_shift(4),s=[],o=0,l=0,c=-1,f={};for(o=0;o!=r;++o){var d=e.read_shift(4),A=e.read_shift(4);s[o]=[d,A+n]}s.sort(function(b,S){return b[1]-S[1]});var m={};for(o=0;o!=r;++o){if(e.l!==s[o][1]){var p=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],p=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],p=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(p=!1,e.l=s[o][1]),p)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var h=t[s[o][0]];if(m[h.n]=S2(e,h.t,{raw:!0}),h.p==="version"&&(m[h.n]=String(m[h.n]>>16)+"."+("0000"+String(m[h.n]&65535)).slice(-4)),h.n=="CodePage")switch(m[h.n]){case 0:m[h.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Rl(l=m[h.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[h.n])}}else if(s[o][0]===1){if(l=m.CodePage=S2(e,jT),Rl(l),c!==-1){var y=e.l;e.l=s[c][1],f=jR(e,l),e.l=y}}else if(s[o][0]===0){if(l===0){c=o,e.l=s[o+1][1];continue}f=jR(e,l)}else{var g=f[s[o][0]],_;switch(e[e.l]){case 65:e.l+=4,_=j$(e);break;case 30:e.l+=4,_=QE(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,_=QE(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,_=e.read_shift(4,"i");break;case 19:e.l+=4,_=e.read_shift(4);break;case 5:e.l+=4,_=e.read_shift(8,"f");break;case 11:e.l+=4,_=Yr(e,4);break;case 64:e.l+=4,_=Hs(qT(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[g]=_}}return e.l=n+a,m}function YR(e,t,n){var a=e.content;if(!a)return{};Ys(a,0);var r,s,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var f=a.read_shift(4),d=a.read_shift(16);if(d!==Ta.utils.consts.HEADER_CLSID&&d!==n)throw new Error("Bad PropertySet CLSID "+d);if(r=a.read_shift(4),r!==1&&r!==2)throw new Error("Unrecognized #Sets: "+r);if(s=a.read_shift(16),l=a.read_shift(4),r===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);r===2&&(o=a.read_shift(16),c=a.read_shift(4));var A=qR(a,t),m={SystemIdentifier:f};for(var p in A)m[p]=A[p];if(m.FMTID=s,r===1)return m;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var h;try{h=qR(a,null)}catch{}for(p in h)m[p]=h[p];return m.FMTID=[s,o],m}function hd(e,t){return e.read_shift(t),null}function r3e(e,t,n){for(var a=[],r=e.l+t;e.l<r;)a.push(n(e,r-e.l));if(r!==e.l)throw new Error("Slurp error");return a}function Yr(e,t){return e.read_shift(t)===1}function ds(e){return e.read_shift(2,"u")}function q$(e,t){return r3e(e,t,ds)}function s3e(e){var t=e.read_shift(1),n=e.read_shift(1);return n===1?t:t===1}function Hg(e,t,n){var a=e.read_shift(n&&n.biff>=12?2:1),r="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var s=e.read_shift(1);s&&(r="dbcs-cont")}else n.biff==12&&(r="wstr");n.biff>=2&&n.biff<=5&&(r="cpstr");var o=a?e.read_shift(a,r):"";return o}function o3e(e){var t=e.read_shift(2),n=e.read_shift(1),a=n&4,r=n&8,s=1+(n&1),o=0,l,c={};r&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var f=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,f);return r&&(e.l+=4*o),a&&(e.l+=l),c.t=d,r||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function kA(e,t,n){var a;if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}var r=e.read_shift(1);return r===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function $g(e,t,n){var a=e.read_shift(n&&n.biff==2?1:2);return a===0?(e.l++,""):kA(e,a,n)}function em(e,t,n){if(n.biff>5)return $g(e,t,n);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function i3e(e){var t=e.read_shift(1);e.l++;var n=e.read_shift(2);return e.l+=2,[t,n]}function l3e(e){var t=e.read_shift(4),n=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=n);var r=e.read_shift((a?t-24:t)>>1,"utf16le").replace(zo,"");return a&&(e.l+=24),r}function u3e(e){for(var t=e.read_shift(2),n="";t-- >0;)n+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var r=e.read_shift(4);if(r===0)return n+a.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(zo,"");return n+o}function c3e(e,t){var n=e.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return l3e(e);case"0303000000000000c000000000000046":return u3e(e);default:throw new Error("Unsupported Moniker "+n)}}function Ny(e){var t=e.read_shift(4),n=t>0?e.read_shift(t,"utf16le").replace(zo,""):"";return n}function d3e(e,t){var n=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var r=e.read_shift(2);e.l+=2;var s,o,l,c,f="",d,A;r&16&&(s=Ny(e,n-e.l)),r&128&&(o=Ny(e,n-e.l)),(r&257)===257&&(l=Ny(e,n-e.l)),(r&257)===1&&(c=c3e(e,n-e.l)),r&8&&(f=Ny(e,n-e.l)),r&32&&(d=e.read_shift(16)),r&64&&(A=qT(e)),e.l=n;var m=o||l||c||"";m&&f&&(m+="#"+f),m||(m="#"+f),r&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return d&&(p.guid=d),A&&(p.time=A),s&&(p.Tooltip=s),p}function Y$(e){var t=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1),r=e.read_shift(1);return[t,n,a,r]}function X$(e,t){var n=Y$(e);return n[3]=0,n}function Yu(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{r:t,c:n,ixfe:a}}function f3e(e){var t=e.read_shift(2),n=e.read_shift(2);return e.l+=8,{type:t,flags:n}}function A3e(e,t,n){return t===0?"":em(e,t,n)}function m3e(e,t,n){var a=n.biff>8?4:2,r=e.read_shift(a),s=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[r,s,o]}function J$(e){var t=e.read_shift(2),n=KT(e);return[t,n]}function v3e(e,t,n){e.l+=4,t-=4;var a=e.l+t,r=Hg(e,t,n),s=e.read_shift(2);if(a-=e.l,s!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+s);return e.l+=s,r}function jw(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2);return{s:{c:a,r:t},e:{c:r,r:n}}}function Z$(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(1),r=e.read_shift(1);return{s:{c:a,r:t},e:{c:r,r:n}}}var h3e=Z$;function e9(e){e.l+=4;var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[n,t,a]}function p3e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function g3e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function co(e){e.l+=2,e.l+=e.read_shift(2)}var y3e={0:co,4:co,5:co,6:co,7:g3e,8:co,9:co,10:co,11:co,12:co,13:p3e,14:co,15:co,16:co,17:co,18:co,19:co,20:co,21:e9};function _3e(e,t){for(var n=e.l+t,a=[];e.l<n;){var r=e.read_shift(2);e.l-=2;try{a.push(y3e[r](e,n-e.l))}catch{return e.l=n,a}}return e.l!=n&&(e.l=n),a}function Vy(e,t){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=e.read_shift(2),t-=2,t>=2&&(n.dt=e.read_shift(2),e.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return e.read_shift(t),n}function w3e(e,t){return t===0||e.read_shift(2),1200}function b3e(e,t,n){if(n.enc)return e.l+=t,"";var a=e.l,r=em(e,0,n);return e.read_shift(t+a-e.l),r}function x3e(e,t,n){var a=n&&n.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function C3e(e,t,n){var a=e.read_shift(4),r=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=Hg(e,0,n);return o.length===0&&(o="Sheet1"),{pos:a,hs:r,dt:s,name:o}}function S3e(e,t){for(var n=e.l+t,a=e.read_shift(4),r=e.read_shift(4),s=[],o=0;o!=r&&e.l<n;++o)s.push(o3e(e));return s.Count=a,s.Unique=r,s}function E3e(e,t){var n={};return n.dsst=e.read_shift(2),e.l+=t-2,n}function k3e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var n=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=n/20),t}function B3e(e){var t=f3e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var n=e.read_shift(4);return n!==0}function T3e(e){return e.read_shift(2),e.read_shift(4)}function XR(e,t,n){var a=0;n&&n.biff==2||(a=e.read_shift(2));var r=e.read_shift(2);n&&n.biff==2&&(a=1-(r>>15),r&=32767);var s={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[s,r]}function I3e(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),f=e.read_shift(2);return{Pos:[t,n],Dim:[a,r],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:f}}function F3e(e,t,n){if(n&&n.biff>=2&&n.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function P3e(){}function D3e(e,t,n){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=Hg(e,0,n),a}function U3e(e){var t=Yu(e);return t.isst=e.read_shift(4),t}function R3e(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=e.l+t,r=Yu(e);n.biff==2&&e.l++;var s=$g(e,a-e.l,n);return r.val=s,r}function N3e(e,t,n){var a=e.read_shift(2),r=em(e,0,n);return[a,r]}var V3e=em;function JR(e,t,n){var a=e.l+t,r=n.biff==8||!n.biff?4:2,s=e.read_shift(r),o=e.read_shift(r),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:s,c:l},e:{r:o,c}}}function L3e(e){var t=e.read_shift(2),n=e.read_shift(2),a=J$(e);return{r:t,c:n,ixfe:a[0],rknum:a[1]}}function M3e(e,t){for(var n=e.l+t-2,a=e.read_shift(2),r=e.read_shift(2),s=[];e.l<n;)s.push(J$(e));if(e.l!==n)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-r+1)throw new Error("MulRK length mismatch");return{r:a,c:r,C:o,rkrec:s}}function O3e(e,t){for(var n=e.l+t-2,a=e.read_shift(2),r=e.read_shift(2),s=[];e.l<n;)s.push(e.read_shift(2));if(e.l!==n)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-r+1)throw new Error("MulBlank length mismatch");return{r:a,c:r,C:o,ixfe:s}}function H3e(e,t,n,a){var r={},s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return r.patternType=LDe[l>>26],a.cellStyles&&(r.alc=s&7,r.fWrap=s>>3&1,r.alcV=s>>4&7,r.fJustLast=s>>7&1,r.trot=s>>8&255,r.cIndent=s>>16&15,r.fShrinkToFit=s>>20&1,r.iReadOrder=s>>22&2,r.fAtrNum=s>>26&1,r.fAtrFnt=s>>27&1,r.fAtrAlc=s>>28&1,r.fAtrBdr=s>>29&1,r.fAtrPat=s>>30&1,r.fAtrProt=s>>31&1,r.dgLeft=o&15,r.dgRight=o>>4&15,r.dgTop=o>>8&15,r.dgBottom=o>>12&15,r.icvLeft=o>>16&127,r.icvRight=o>>23&127,r.grbitDiag=o>>30&3,r.icvTop=l&127,r.icvBottom=l>>7&127,r.icvDiag=l>>14&127,r.dgDiag=l>>21&15,r.icvFore=c&127,r.icvBack=c>>7&127,r.fsxButton=c>>14&1),r}function $3e(e,t,n){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=H3e(e,t,a.fStyle,n),a}function Q3e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function ZR(e,t,n){var a=Yu(e);(n.biff==2||t==9)&&++e.l;var r=s3e(e);return a.val=r,a.t=r===!0||r===!1?"b":"e",a}function G3e(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=Yu(e),r=wo(e);return a.val=r,a}var eN=A3e;function z3e(e,t,n){var a=e.l+t,r=e.read_shift(2),s=e.read_shift(2);if(n.sbcch=s,s==1025||s==14849)return[s,r];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=kA(e,s),l=[];a>e.l;)l.push($g(e));return[s,r,o,l]}function tN(e,t,n){var a=e.read_shift(2),r,s={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return n.sbcch===14849&&(r=v3e(e,t-2,n)),s.body=r||e.read_shift(t-2),typeof r=="string"&&(s.Name=r),s}var W3e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function nN(e,t,n){var a=e.l+t,r=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(n&&n.biff==2?1:2),c=0;(!n||n.biff>=5)&&(n.biff!=5&&(e.l+=2),c=e.read_shift(2),n.biff==5&&(e.l+=2),e.l+=4);var f=kA(e,o,n);r&32&&(f=W3e[f.charCodeAt(0)]);var d=a-e.l;n&&n.biff==2&&--d;var A=a==e.l||l===0||!(d>0)?[]:kVe(e,d,n,l);return{chKey:s,Name:f,itab:c,rgce:A}}function t9(e,t,n){if(n.biff<8)return K3e(e,t,n);for(var a=[],r=e.l+t,s=e.read_shift(n.biff>8?4:2);s--!==0;)a.push(m3e(e,n.biff>8?12:6,n));if(e.l!=r)throw new Error("Bad ExternSheet: "+e.l+" != "+r);return a}function K3e(e,t,n){e[e.l+1]==3&&e[e.l]++;var a=Hg(e,t,n);return a.charCodeAt(0)==3?a.slice(1):a}function j3e(e,t,n){if(n.biff<8){e.l+=t;return}var a=e.read_shift(2),r=e.read_shift(2),s=kA(e,a,n),o=kA(e,r,n);return[s,o]}function q3e(e,t,n){var a=Z$(e);e.l++;var r=e.read_shift(1);return t-=8,[BVe(e,t,n),r,a]}function aN(e,t,n){var a=h3e(e);switch(n.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,SVe(e,t,n)]}function Y3e(e){var t=e.read_shift(4)!==0,n=e.read_shift(4)!==0,a=e.read_shift(4);return[t,n,a]}function X3e(e,t,n){if(!(n.biff<8)){var a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=em(e,0,n);return n.biff<8&&e.read_shift(1),[{r:a,c:r},l,o,s]}}function J3e(e,t,n){return X3e(e,t,n)}function Z3e(e,t){for(var n=[],a=e.read_shift(2);a--;)n.push(jw(e));return n}function eUe(e,t,n){if(n&&n.biff<8)return nUe(e,t,n);var a=e9(e),r=_3e(e,t-22,a[1]);return{cmo:a,ft:r}}var tUe={8:function(e,t){var n=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var r=e.read_shift(1);return e.l+=r,e.l=n,{fmt:a}}};function nUe(e,t,n){e.l+=4;var a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((tUe[a]||Io)(e,t,n)),{cmo:[r,a,s],ft:o}}function aUe(e,t,n){var a=e.l,r="";try{e.l+=4;var s=(n.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=i3e(e,6,n);var l=e.read_shift(2);e.read_shift(2),ds(e,2);var c=e.read_shift(2);e.l+=c;for(var f=1;f<e.lens.length-1;++f){if(e.l-a!=e.lens[f])throw new Error("TxO: bad continue record");var d=e[e.l],A=kA(e,e.lens[f+1]-e.lens[f]-1);if(r+=A,r.length>=(d?l:2*l))break}if(r.length!==l&&r.length!==l*2)throw new Error("cchText: "+l+" != "+r.length);return e.l=a+t,{t:r}}catch{return e.l=a+t,{t:r}}}function rUe(e,t){var n=jw(e);e.l+=16;var a=d3e(e,t-24);return[n,a]}function sUe(e,t){e.read_shift(2);var n=jw(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(zo,""),[n,a]}function oUe(e){var t=[0,0],n;return n=e.read_shift(2),t[0]=WR[n]||n,n=e.read_shift(2),t[1]=WR[n]||n,t}function iUe(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(X$(e));return n}function lUe(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(X$(e));return n}function uUe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function n9(e,t,n){if(!n.cellStyles)return Io(e,t);var a=n&&n.biff>=12?4:2,r=e.read_shift(a),s=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var f={s:r,e:s,w:o,ixfe:l,flags:c};return(n.biff>=5||!n.biff)&&(f.level=c>>8&7),f}function cUe(e,t){var n={};return t<32||(e.l+=16,n.header=wo(e),n.footer=wo(e),e.l+=2),n}function dUe(e,t,n){var a={area:!1};if(n.biff!=5)return e.l+=t,a;var r=e.read_shift(1);return e.l+=3,r&16&&(a.area=!0),a}var fUe=Yu,AUe=q$,mUe=$g;function vUe(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(4),r={fmt:t,env:n,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,r}function hUe(e,t,n){n.biffguess&&n.biff==5&&(n.biff=2);var a=Yu(e);++e.l;var r=em(e,t-7,n);return a.t="str",a.val=r,a}function pUe(e){var t=Yu(e);++e.l;var n=wo(e);return t.t="n",t.val=n,t}function gUe(e){var t=Yu(e);++e.l;var n=e.read_shift(2);return t.t="n",t.val=n,t}function yUe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function _Ue(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function wUe(e,t,n){var a=e.l+t,r=Yu(e),s=e.read_shift(2),o=kA(e,s,n);return e.l=a,r.t="str",r.val=o,r}var bUe=[2,3,48,49,131,139,140,245],rN=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=LT({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(l,c){var f=[],d=rf(1);switch(c.type){case"base64":d=Il(Ui(l));break;case"binary":d=Il(l);break;case"buffer":case"array":d=l;break}Ys(d,0);var A=d.read_shift(1),m=!!(A&136),p=!1,h=!1;switch(A){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:h=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+A.toString(16))}var y=0,g=521;A==2&&(y=d.read_shift(2)),d.l+=3,A!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),A!=2&&(g=d.read_shift(2));var _=d.read_shift(2),b=c.codepage||1252;A!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(b=e[d[d.l]]),d.l+=1,d.l+=2),h&&(d.l+=36);for(var S=[],B={},F=Math.min(d.length,A==2?521:g-10-(p?264:0)),T=h?32:11;d.l<F&&d[d.l]!=13;)switch(B={},B.name=j0.utils.decode(b,d.slice(d.l,d.l+T)).replace(/[\u0000\r\n].*$/g,""),d.l+=T,B.type=String.fromCharCode(d.read_shift(1)),A!=2&&!h&&(B.offset=d.read_shift(4)),B.len=d.read_shift(1),A==2&&(B.offset=d.read_shift(2)),B.dec=d.read_shift(1),B.name.length&&S.push(B),A!=2&&(d.l+=h?13:14),B.type){case"B":(!p||B.len!=8)&&c.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+B.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var E=0,x=0;for(f[0]=[],x=0;x!=S.length;++x)f[0][x]=S[x].name;for(;y-- >0;){if(d[d.l]===42){d.l+=_;continue}for(++d.l,f[++E]=[],x=0,x=0;x!=S.length;++x){var C=d.slice(d.l,d.l+S[x].len);d.l+=S[x].len,Ys(C,0);var D=j0.utils.decode(b,C);switch(S[x].type){case"C":D.trim().length&&(f[E][x]=D.replace(/\s+$/,""));break;case"D":D.length===8?f[E][x]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):f[E][x]=D;break;case"F":f[E][x]=parseFloat(D.trim());break;case"+":case"I":f[E][x]=h?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":f[E][x]=!0;break;case"N":case"F":f[E][x]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+A.toString(16));f[E][x]="##MEMO##"+(h?parseInt(D.trim(),10):C.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(f[E][x]=+D||0);break;case"@":f[E][x]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":f[E][x]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":f[E][x]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":f[E][x]=-C.read_shift(-8,"f");break;case"B":if(p&&S[x].len==8){f[E][x]=C.read_shift(8,"f");break}case"G":case"P":C.l+=S[x].len;break;case"0":if(S[x].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+S[x].type)}}}if(A!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(f=f.slice(0,c.sheetRows)),c.DBF=S,f}function a(l,c){var f=c||{};f.dateNF||(f.dateNF="yyyymmdd");var d=Th(n(l,f),f);return d["!cols"]=f.DBF.map(function(A){return{wch:A.len,DBF:A}}),delete f.DBF,d}function r(l,c){try{return mf(a(l,c),c)}catch(f){if(c&&c.WTF)throw f}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var f=c||{};if(+f.codepage>=0&&Rl(+f.codepage),f.type=="string")throw new Error("Cannot write DBF to JS string");var d=OE(),A=YE(l,{header:1,raw:!0,cellDates:!0}),m=A[0],p=A.slice(1),h=l["!cols"]||[],y=0,g=0,_=0,b=1;for(y=0;y<m.length;++y){if(((h[y]||{}).DBF||{}).name){m[y]=h[y].DBF.name,++_;continue}if(m[y]!=null){if(++_,typeof m[y]=="number"&&(m[y]=m[y].toString(10)),typeof m[y]!="string")throw new Error("DBF Invalid column name "+m[y]+" |"+typeof m[y]+"|");if(m.indexOf(m[y])!==y){for(g=0;g<1024;++g)if(m.indexOf(m[y]+"_"+g)==-1){m[y]+="_"+g;break}}}}var S=Hr(l["!ref"]),B=[],F=[],T=[];for(y=0;y<=S.e.c-S.s.c;++y){var E="",x="",C=0,D=[];for(g=0;g<p.length;++g)p[g][y]!=null&&D.push(p[g][y]);if(D.length==0||m[y]==null){B[y]="?";continue}for(g=0;g<D.length;++g){switch(typeof D[g]){case"number":x="B";break;case"string":x="C";break;case"boolean":x="L";break;case"object":x=D[g]instanceof Date?"D":"C";break;default:x="C"}C=Math.max(C,String(D[g]).length),E=E&&E!=x?"C":x}C>250&&(C=250),x=((h[y]||{}).DBF||{}).type,x=="C"&&h[y].DBF.len>C&&(C=h[y].DBF.len),E=="B"&&x=="N"&&(E="N",T[y]=h[y].DBF.dec,C=h[y].DBF.len),F[y]=E=="C"||x=="N"?C:s[E]||0,b+=F[y],B[y]=E}var U=d.next(32);for(U.write_shift(4,318902576),U.write_shift(4,p.length),U.write_shift(2,296+32*_),U.write_shift(2,b),y=0;y<4;++y)U.write_shift(4,0);for(U.write_shift(4,0|(+t[t$]||3)<<8),y=0,g=0;y<m.length;++y)if(m[y]!=null){var L=d.next(32),H=(m[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);L.write_shift(1,H,"sbcs"),L.write_shift(1,B[y]=="?"?"C":B[y],"sbcs"),L.write_shift(4,g),L.write_shift(1,F[y]||s[B[y]]||0),L.write_shift(1,T[y]||0),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(1,0),L.write_shift(4,0),L.write_shift(4,0),g+=F[y]||s[B[y]]||0}var oe=d.next(264);for(oe.write_shift(4,13),y=0;y<65;++y)oe.write_shift(4,0);for(y=0;y<p.length;++y){var de=d.next(b);for(de.write_shift(1,0),g=0;g<m.length;++g)if(m[g]!=null)switch(B[g]){case"L":de.write_shift(1,p[y][g]==null?63:p[y][g]?84:70);break;case"B":de.write_shift(8,p[y][g]||0,"f");break;case"N":var te="0";for(typeof p[y][g]=="number"&&(te=p[y][g].toFixed(T[g]||0)),_=0;_<F[g]-te.length;++_)de.write_shift(1,32);de.write_shift(1,te,"sbcs");break;case"D":p[y][g]?(de.write_shift(4,("0000"+p[y][g].getFullYear()).slice(-4),"sbcs"),de.write_shift(2,("00"+(p[y][g].getMonth()+1)).slice(-2),"sbcs"),de.write_shift(2,("00"+p[y][g].getDate()).slice(-2),"sbcs")):de.write_shift(8,"00000000","sbcs");break;case"C":var q=String(p[y][g]!=null?p[y][g]:"").slice(0,F[g]);for(de.write_shift(1,q,"sbcs"),_=0;_<F[g]-q.length;++_)de.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:r,to_sheet:a,from_sheet:o}})(),xUe=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Lu(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(m,p){var h=e[p];return typeof h=="number"?_R(h):h},a=function(m,p,h){var y=p.charCodeAt(0)-32<<4|h.charCodeAt(0)-48;return y==59?m:_R(y)};e["|"]=254;function r(m,p){switch(p.type){case"base64":return s(Ui(m),p);case"binary":return s(m,p);case"buffer":return s(xa&&Buffer.isBuffer(m)?m.toString("binary"):YA(m),p);case"array":return s(EA(m),p)}throw new Error("Unrecognized type "+p.type)}function s(m,p){var h=m.split(/[\n\r]+/),y=-1,g=-1,_=0,b=0,S=[],B=[],F=null,T={},E=[],x=[],C=[],D=0,U;for(+p.codepage>=0&&Rl(+p.codepage);_!==h.length;++_){D=0;var L=h[_].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,n),H=L.replace(/;;/g,"\0").split(";").map(function(O){return O.replace(/\u0000/g,";")}),oe=H[0],de;if(L.length>0)switch(oe){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":H[1].charAt(0)=="P"&&B.push(L.slice(3).replace(/;;/g,";"));break;case"C":var te=!1,q=!1,ce=!1,le=!1,Z=-1,ne=-1;for(b=1;b<H.length;++b)switch(H[b].charAt(0)){case"A":break;case"X":g=parseInt(H[b].slice(1))-1,q=!0;break;case"Y":for(y=parseInt(H[b].slice(1))-1,q||(g=0),U=S.length;U<=y;++U)S[U]=[];break;case"K":de=H[b].slice(1),de.charAt(0)==='"'?de=de.slice(1,de.length-1):de==="TRUE"?de=!0:de==="FALSE"?de=!1:isNaN(Hl(de))?isNaN(Zv(de).getDate())||(de=Hs(de)):(de=Hl(de),F!==null&&kh(F)&&(de=Kw(de))),te=!0;break;case"E":le=!0;var G=Bv(H[b].slice(1),{r:y,c:g});S[y][g]=[S[y][g],G];break;case"S":ce=!0,S[y][g]=[S[y][g],"S5S"];break;case"G":break;case"R":Z=parseInt(H[b].slice(1))-1;break;case"C":ne=parseInt(H[b].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+L)}if(te&&(S[y][g]&&S[y][g].length==2?S[y][g][0]=de:S[y][g]=de,F=null),ce){if(le)throw new Error("SYLK shared formula cannot have own formula");var W=Z>-1&&S[Z][ne];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");S[y][g][1]=f9(W[1],{r:y-Z,c:g-ne})}break;case"F":var Q=0;for(b=1;b<H.length;++b)switch(H[b].charAt(0)){case"X":g=parseInt(H[b].slice(1))-1,++Q;break;case"Y":for(y=parseInt(H[b].slice(1))-1,U=S.length;U<=y;++U)S[U]=[];break;case"M":D=parseInt(H[b].slice(1))/20;break;case"F":break;case"G":break;case"P":F=B[parseInt(H[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=H[b].slice(1).split(" "),U=parseInt(C[0],10);U<=parseInt(C[1],10);++U)D=parseInt(C[2],10),x[U-1]=D===0?{hidden:!0}:{wch:D},eh(x[U-1]);break;case"C":g=parseInt(H[b].slice(1))-1,x[g]||(x[g]={});break;case"R":y=parseInt(H[b].slice(1))-1,E[y]||(E[y]={}),D>0?(E[y].hpt=D,E[y].hpx=eg(D)):D===0&&(E[y].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+L)}Q<1&&(F=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+L)}}return E.length>0&&(T["!rows"]=E),x.length>0&&(T["!cols"]=x),p&&p.sheetRows&&(S=S.slice(0,p.sheetRows)),[S,T]}function o(m,p){var h=r(m,p),y=h[0],g=h[1],_=Th(y,p);return Lu(g).forEach(function(b){_[b]=g[b]}),_}function l(m,p){return mf(o(m,p),p)}function c(m,p,h,y){var g="C;Y"+(h+1)+";X"+(y+1)+";K";switch(m.t){case"n":g+=m.v||0,m.f&&!m.F&&(g+=";E"+uNe(m.f,{r:h,c:y}));break;case"b":g+=m.v?"TRUE":"FALSE";break;case"e":g+=m.w||m.v;break;case"d":g+='"'+(m.w||m.v)+'"';break;case"s":g+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function f(m,p){p.forEach(function(h,y){var g="F;W"+(y+1)+" "+(y+1)+" ";h.hidden?g+="0":(typeof h.width=="number"&&!h.wpx&&(h.wpx=k2(h.width)),typeof h.wpx=="number"&&!h.wch&&(h.wch=B2(h.wpx)),typeof h.wch=="number"&&(g+=Math.round(h.wch))),g.charAt(g.length-1)!=" "&&m.push(g)})}function d(m,p){p.forEach(function(h,y){var g="F;";h.hidden?g+="M0;":h.hpt?g+="M"+20*h.hpt+";":h.hpx&&(g+="M"+20*u9(h.hpx)+";"),g.length>2&&m.push(g+"R"+(y+1))})}function A(m,p){var h=["ID;PWXL;N;E"],y=[],g=Hr(m["!ref"]),_,b=Array.isArray(m),S=`\r
`;h.push("P;PGeneral"),h.push("F;P0;DG0G8;M255"),m["!cols"]&&f(h,m["!cols"]),m["!rows"]&&d(h,m["!rows"]),h.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var B=g.s.r;B<=g.e.r;++B)for(var F=g.s.c;F<=g.e.c;++F){var T=Jn({r:B,c:F});_=b?(m[B]||[])[F]:m[T],!(!_||_.v==null&&(!_.f||_.F))&&y.push(c(_,m,B,F))}return h.join(S)+S+y.join(S)+S+"E"+S}return{to_workbook:l,to_sheet:o,from_sheet:A}})(),CUe=(function(){function e(s,o){switch(o.type){case"base64":return t(Ui(s),o);case"binary":return t(s,o);case"buffer":return t(xa&&Buffer.isBuffer(s)?s.toString("binary"):YA(s),o);case"array":return t(EA(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var l=s.split(`
`),c=-1,f=-1,d=0,A=[];d!==l.length;++d){if(l[d].trim()==="BOT"){A[++c]=[],f=0;continue}if(!(c<0)){var m=l[d].trim().split(","),p=m[0],h=m[1];++d;for(var y=l[d]||"";(y.match(/["]/g)||[]).length&1&&d<l.length-1;)y+=`
`+l[++d];switch(y=y.trim(),+p){case-1:if(y==="BOT"){A[++c]=[],f=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?A[c][f]=!0:y==="FALSE"?A[c][f]=!1:isNaN(Hl(h))?isNaN(Zv(h).getDate())?A[c][f]=h:A[c][f]=Hs(h):A[c][f]=Hl(h),++f;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),A[c][f++]=y!==""?y:null;break}if(y==="EOD")break}}return o&&o.sheetRows&&(A=A.slice(0,o.sheetRows)),A}function n(s,o){return Th(e(s,o),o)}function a(s,o){return mf(n(s,o),o)}var r=(function(){var s=function(c,f,d,A,m){c.push(f),c.push(d+","+A),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,f,d,A){c.push(f+","+d),c.push(f==1?'"'+A.replace(/"/g,'""')+'"':A)};return function(c){var f=[],d=Hr(c["!ref"]),A,m=Array.isArray(c);s(f,"TABLE",0,1,"sheetjs"),s(f,"VECTORS",0,d.e.r-d.s.r+1,""),s(f,"TUPLES",0,d.e.c-d.s.c+1,""),s(f,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){o(f,-1,0,"BOT");for(var h=d.s.c;h<=d.e.c;++h){var y=Jn({r:p,c:h});if(A=m?(c[p]||[])[h]:c[y],!A){o(f,1,0,"");continue}switch(A.t){case"n":var g=A.w;!g&&A.v!=null&&(g=A.v),g==null?A.f&&!A.F?o(f,1,0,"="+A.f):o(f,1,0,""):o(f,0,g,"V");break;case"b":o(f,0,A.v?1:0,A.v?"TRUE":"FALSE");break;case"s":o(f,1,0,isNaN(A.v)?A.v:'="'+A.v+'"');break;case"d":A.w||(A.w=ul(A.z||sa[14],jo(Hs(A.v)))),o(f,0,A.w,"V");break;default:o(f,1,0,"")}}}o(f,-1,0,"EOD");var _=`\r
`,b=f.join(_);return b}})();return{to_workbook:a,to_sheet:n,from_sheet:r}})(),SUe=(function(){function e(A){return A.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(A){return A.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(A,m){for(var p=A.split(`
`),h=-1,y=-1,g=0,_=[];g!==p.length;++g){var b=p[g].trim().split(":");if(b[0]==="cell"){var S=Qo(b[1]);if(_.length<=S.r)for(h=_.length;h<=S.r;++h)_[h]||(_[h]=[]);switch(h=S.r,y=S.c,b[2]){case"t":_[h][y]=e(b[3]);break;case"v":_[h][y]=+b[3];break;case"vtf":var B=b[b.length-1];case"vtc":switch(b[3]){case"nl":_[h][y]=!!+b[4];break;default:_[h][y]=+b[4];break}b[2]=="vtf"&&(_[h][y]=[_[h][y],B])}}}return m&&m.sheetRows&&(_=_.slice(0,m.sheetRows)),_}function a(A,m){return Th(n(A,m),m)}function r(A,m){return mf(a(A,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function f(A){if(!A||!A["!ref"])return"";for(var m=[],p=[],h,y="",g=Bh(A["!ref"]),_=Array.isArray(A),b=g.s.r;b<=g.e.r;++b)for(var S=g.s.c;S<=g.e.c;++S)if(y=Jn({r:b,c:S}),h=_?(A[b]||[])[S]:A[y],!(!h||h.v==null||h.t==="z")){switch(p=["cell",y,"t"],h.t){case"s":case"str":p.push(t(h.v));break;case"n":h.f?(p[2]="vtf",p[3]="n",p[4]=h.v,p[5]=t(h.f)):(p[2]="v",p[3]=h.v);break;case"b":p[2]="vt"+(h.f?"f":"c"),p[3]="nl",p[4]=h.v?"1":"0",p[5]=t(h.f||(h.v?"TRUE":"FALSE"));break;case"d":var B=jo(Hs(h.v));p[2]="vtc",p[3]="nd",p[4]=""+B,p[5]=h.w||ul(h.z||sa[14],B);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(A){return[s,o,l,o,f(A),c].join(`
`)}return{to_workbook:r,to_sheet:a,from_sheet:d}})(),J0=(function(){function e(d,A,m,p,h){h.raw?A[m][p]=d:d===""||(d==="TRUE"?A[m][p]=!0:d==="FALSE"?A[m][p]=!1:isNaN(Hl(d))?isNaN(Zv(d).getDate())?A[m][p]=d:A[m][p]=Hs(d):A[m][p]=Hl(d))}function t(d,A){var m=A||{},p=[];if(!d||d.length===0)return p;for(var h=d.split(/[\r\n]/),y=h.length-1;y>=0&&h[y].length===0;)--y;for(var g=10,_=0,b=0;b<=y;++b)_=h[b].indexOf(" "),_==-1?_=h[b].length:_++,g=Math.max(g,_);for(b=0;b<=y;++b){p[b]=[];var S=0;for(e(h[b].slice(0,g).trim(),p,b,S,m),S=1;S<=(h[b].length-g)/10+1;++S)e(h[b].slice(g+(S-1)*10,g+S*10).trim(),p,b,S,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var n={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function r(d){for(var A={},m=!1,p=0,h=0;p<d.length;++p)(h=d.charCodeAt(p))==34?m=!m:!m&&h in n&&(A[h]=(A[h]||0)+1);h=[];for(p in A)Object.prototype.hasOwnProperty.call(A,p)&&h.push([A[p],p]);if(!h.length){A=a;for(p in A)Object.prototype.hasOwnProperty.call(A,p)&&h.push([A[p],p])}return h.sort(function(y,g){return y[0]-g[0]||a[y[1]]-a[g[1]]}),n[h.pop()[1]]||44}function s(d,A){var m=A||{},p="",h=m.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=r(d.slice(0,1024)):m&&m.FS?p=m.FS:p=r(d.slice(0,1024));var g=0,_=0,b=0,S=0,B=0,F=p.charCodeAt(0),T=!1,E=0,x=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var C=m.dateNF!=null?NPe(m.dateNF):null;function D(){var U=d.slice(S,B),L={};if(U.charAt(0)=='"'&&U.charAt(U.length-1)=='"'&&(U=U.slice(1,-1).replace(/""/g,'"')),U.length===0)L.t="z";else if(m.raw)L.t="s",L.v=U;else if(U.trim().length===0)L.t="s",L.v=U;else if(U.charCodeAt(0)==61)U.charCodeAt(1)==34&&U.charCodeAt(U.length-1)==34?(L.t="s",L.v=U.slice(2,-1).replace(/""/g,'"')):dNe(U)?(L.t="n",L.f=U.slice(1)):(L.t="s",L.v=U);else if(U=="TRUE")L.t="b",L.v=!0;else if(U=="FALSE")L.t="b",L.v=!1;else if(!isNaN(b=Hl(U)))L.t="n",m.cellText!==!1&&(L.w=U),L.v=b;else if(!isNaN(Zv(U).getDate())||C&&U.match(C)){L.z=m.dateNF||sa[14];var H=0;C&&U.match(C)&&(U=VPe(U,m.dateNF,U.match(C)||[]),H=1),m.cellDates?(L.t="d",L.v=Hs(U,H)):(L.t="n",L.v=jo(Hs(U,H))),m.cellText!==!1&&(L.w=ul(L.z,L.v instanceof Date?jo(L.v):L.v)),m.cellNF||delete L.z}else L.t="s",L.v=U;if(L.t=="z"||(m.dense?(h[g]||(h[g]=[]),h[g][_]=L):h[Jn({c:_,r:g})]=L),S=B+1,x=d.charCodeAt(S),y.e.c<_&&(y.e.c=_),y.e.r<g&&(y.e.r=g),E==F)++_;else if(_=0,++g,m.sheetRows&&m.sheetRows<=g)return!0}e:for(;B<d.length;++B)switch(E=d.charCodeAt(B)){case 34:x===34&&(T=!T);break;case F:case 10:case 13:if(!T&&D())break e;break}return B-S>0&&D(),h["!ref"]=Pa(y),h}function o(d,A){return!(A&&A.PRN)||A.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,A):Th(t(d,A),A)}function l(d,A){var m="",p=A.type=="string"?[0,0,0,0]:a4(d,A);switch(A.type){case"base64":m=Ui(d);break;case"binary":m=d;break;case"buffer":A.codepage==65001?m=d.toString("utf8"):A.codepage&&typeof j0<"u"||(m=xa&&Buffer.isBuffer(d)?d.toString("binary"):YA(d));break;case"array":m=EA(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+A.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=gr(m.slice(3)):A.type!="string"&&A.type!="buffer"&&A.codepage==65001?m=gr(m):A.type=="binary"&&typeof j0<"u",m.slice(0,19)=="socialcalc:version:"?SUe.to_sheet(A.type=="string"?m:gr(m),A):o(m,A)}function c(d,A){return mf(l(d,A),A)}function f(d){for(var A=[],m=Hr(d["!ref"]),p,h=Array.isArray(d),y=m.s.r;y<=m.e.r;++y){for(var g=[],_=m.s.c;_<=m.e.c;++_){var b=Jn({r:y,c:_});if(p=h?(d[y]||[])[_]:d[b],!p||p.v==null){g.push("          ");continue}for(var S=(p.w||(Gc(p),p.w)||"").slice(0,10);S.length<10;)S+=" ";g.push(S+(_===0?" ":""))}A.push(g.join(""))}return A.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:f}})();function EUe(e,t){var n=t||{},a=!!n.WTF;n.WTF=!0;try{var r=xUe.to_workbook(e,n);return n.WTF=a,r}catch(s){if(n.WTF=a,!s.message.match(/SYLK bad record ID/)&&a)throw s;return J0.to_workbook(e,t)}}var m0=(function(){function e(G,W,Q){if(G){Ys(G,G.l||0);for(var O=Q.Enum||Z;G.l<G.length;){var ae=G.read_shift(2),j=O[ae]||O[65535],J=G.read_shift(2),ie=G.l+J,X=j.f&&j.f(G,J,Q);if(G.l=ie,W(X,j,ae))return}}}function t(G,W){switch(W.type){case"base64":return n(Il(Ui(G)),W);case"binary":return n(Il(G),W);case"buffer":case"array":return n(G,W)}throw"Unsupported type "+W.type}function n(G,W){if(!G)return G;var Q=W||{},O=Q.dense?[]:{},ae="Sheet1",j="",J=0,ie={},X=[],fe=[],M={s:{r:0,c:0},e:{r:0,c:0}},z=Q.sheetRows||0;if(G[2]==0&&(G[3]==8||G[3]==9)&&G.length>=16&&G[14]==5&&G[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(G[2]==2)Q.Enum=Z,e(G,function(ye,Qe,_e){switch(_e){case 0:Q.vers=ye,ye>=4096&&(Q.qpro=!0);break;case 6:M=ye;break;case 204:ye&&(j=ye);break;case 222:j=ye;break;case 15:case 51:Q.qpro||(ye[1].v=ye[1].v.slice(1));case 13:case 14:case 16:_e==14&&(ye[2]&112)==112&&(ye[2]&15)>1&&(ye[2]&15)<15&&(ye[1].z=Q.dateNF||sa[14],Q.cellDates&&(ye[1].t="d",ye[1].v=Kw(ye[1].v))),Q.qpro&&ye[3]>J&&(O["!ref"]=Pa(M),ie[ae]=O,X.push(ae),O=Q.dense?[]:{},M={s:{r:0,c:0},e:{r:0,c:0}},J=ye[3],ae=j||"Sheet"+(J+1),j="");var Se=Q.dense?(O[ye[0].r]||[])[ye[0].c]:O[Jn(ye[0])];if(Se){Se.t=ye[1].t,Se.v=ye[1].v,ye[1].z!=null&&(Se.z=ye[1].z),ye[1].f!=null&&(Se.f=ye[1].f);break}Q.dense?(O[ye[0].r]||(O[ye[0].r]=[]),O[ye[0].r][ye[0].c]=ye[1]):O[Jn(ye[0])]=ye[1];break}},Q);else if(G[2]==26||G[2]==14)Q.Enum=ne,G[2]==14&&(Q.qpro=!0,G.l=0),e(G,function(ye,Qe,_e){switch(_e){case 204:ae=ye;break;case 22:ye[1].v=ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ye[3]>J&&(O["!ref"]=Pa(M),ie[ae]=O,X.push(ae),O=Q.dense?[]:{},M={s:{r:0,c:0},e:{r:0,c:0}},J=ye[3],ae="Sheet"+(J+1)),z>0&&ye[0].r>=z)break;Q.dense?(O[ye[0].r]||(O[ye[0].r]=[]),O[ye[0].r][ye[0].c]=ye[1]):O[Jn(ye[0])]=ye[1],M.e.c<ye[0].c&&(M.e.c=ye[0].c),M.e.r<ye[0].r&&(M.e.r=ye[0].r);break;case 27:ye[14e3]&&(fe[ye[14e3][0]]=ye[14e3][1]);break;case 1537:fe[ye[0]]=ye[1],ye[0]==J&&(ae=ye[1]);break}},Q);else throw new Error("Unrecognized LOTUS BOF "+G[2]);if(O["!ref"]=Pa(M),ie[j||ae]=O,X.push(j||ae),!fe.length)return{SheetNames:X,Sheets:ie};for(var se={},be=[],Fe=0;Fe<fe.length;++Fe)ie[X[Fe]]?(be.push(fe[Fe]||X[Fe]),se[fe[Fe]]=ie[fe[Fe]]||ie[X[Fe]]):(be.push(fe[Fe]),se[fe[Fe]]={"!ref":"A1"});return{SheetNames:be,Sheets:se}}function a(G,W){var Q=W||{};if(+Q.codepage>=0&&Rl(+Q.codepage),Q.type=="string")throw new Error("Cannot write WK1 to JS string");var O=OE(),ae=Hr(G["!ref"]),j=Array.isArray(G),J=[];Cl(O,0,s(1030)),Cl(O,6,c(ae));for(var ie=Math.min(ae.e.r,8191),X=ae.s.r;X<=ie;++X)for(var fe=ro(X),M=ae.s.c;M<=ae.e.c;++M){X===ae.s.r&&(J[M]=Es(M));var z=J[M]+fe,se=j?(G[X]||[])[M]:G[z];if(!(!se||se.t=="z"))if(se.t=="n")(se.v|0)==se.v&&se.v>=-32768&&se.v<=32767?Cl(O,13,p(X,M,se.v)):Cl(O,14,y(X,M,se.v));else{var be=Gc(se);Cl(O,15,A(X,M,be.slice(0,239)))}}return Cl(O,1),O.end()}function r(G,W){var Q=W||{};if(+Q.codepage>=0&&Rl(+Q.codepage),Q.type=="string")throw new Error("Cannot write WK3 to JS string");var O=OE();Cl(O,0,o(G));for(var ae=0,j=0;ae<G.SheetNames.length;++ae)(G.Sheets[G.SheetNames[ae]]||{})["!ref"]&&Cl(O,27,le(G.SheetNames[ae],j++));var J=0;for(ae=0;ae<G.SheetNames.length;++ae){var ie=G.Sheets[G.SheetNames[ae]];if(!(!ie||!ie["!ref"])){for(var X=Hr(ie["!ref"]),fe=Array.isArray(ie),M=[],z=Math.min(X.e.r,8191),se=X.s.r;se<=z;++se)for(var be=ro(se),Fe=X.s.c;Fe<=X.e.c;++Fe){se===X.s.r&&(M[Fe]=Es(Fe));var ye=M[Fe]+be,Qe=fe?(ie[se]||[])[Fe]:ie[ye];if(!(!Qe||Qe.t=="z"))if(Qe.t=="n")Cl(O,23,D(se,Fe,J,Qe.v));else{var _e=Gc(Qe);Cl(O,22,E(se,Fe,J,_e.slice(0,239)))}}++J}}return Cl(O,1),O.end()}function s(G){var W=xs(2);return W.write_shift(2,G),W}function o(G){var W=xs(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var Q=0,O=0,ae=0,j=0;j<G.SheetNames.length;++j){var J=G.SheetNames[j],ie=G.Sheets[J];if(!(!ie||!ie["!ref"])){++ae;var X=Bh(ie["!ref"]);Q<X.e.r&&(Q=X.e.r),O<X.e.c&&(O=X.e.c)}}return Q>8191&&(Q=8191),W.write_shift(2,Q),W.write_shift(1,ae),W.write_shift(1,O),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function l(G,W,Q){var O={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&Q.qpro?(O.s.c=G.read_shift(1),G.l++,O.s.r=G.read_shift(2),O.e.c=G.read_shift(1),G.l++,O.e.r=G.read_shift(2),O):(O.s.c=G.read_shift(2),O.s.r=G.read_shift(2),W==12&&Q.qpro&&(G.l+=2),O.e.c=G.read_shift(2),O.e.r=G.read_shift(2),W==12&&Q.qpro&&(G.l+=2),O.s.c==65535&&(O.s.c=O.e.c=O.s.r=O.e.r=0),O)}function c(G){var W=xs(8);return W.write_shift(2,G.s.c),W.write_shift(2,G.s.r),W.write_shift(2,G.e.c),W.write_shift(2,G.e.r),W}function f(G,W,Q){var O=[{c:0,r:0},{t:"n",v:0},0,0];return Q.qpro&&Q.vers!=20768?(O[0].c=G.read_shift(1),O[3]=G.read_shift(1),O[0].r=G.read_shift(2),G.l+=2):(O[2]=G.read_shift(1),O[0].c=G.read_shift(2),O[0].r=G.read_shift(2)),O}function d(G,W,Q){var O=G.l+W,ae=f(G,W,Q);if(ae[1].t="s",Q.vers==20768){G.l++;var j=G.read_shift(1);return ae[1].v=G.read_shift(j,"utf8"),ae}return Q.qpro&&G.l++,ae[1].v=G.read_shift(O-G.l,"cstr"),ae}function A(G,W,Q){var O=xs(7+Q.length);O.write_shift(1,255),O.write_shift(2,W),O.write_shift(2,G),O.write_shift(1,39);for(var ae=0;ae<O.length;++ae){var j=Q.charCodeAt(ae);O.write_shift(1,j>=128?95:j)}return O.write_shift(1,0),O}function m(G,W,Q){var O=f(G,W,Q);return O[1].v=G.read_shift(2,"i"),O}function p(G,W,Q){var O=xs(7);return O.write_shift(1,255),O.write_shift(2,W),O.write_shift(2,G),O.write_shift(2,Q,"i"),O}function h(G,W,Q){var O=f(G,W,Q);return O[1].v=G.read_shift(8,"f"),O}function y(G,W,Q){var O=xs(13);return O.write_shift(1,255),O.write_shift(2,W),O.write_shift(2,G),O.write_shift(8,Q,"f"),O}function g(G,W,Q){var O=G.l+W,ae=f(G,W,Q);if(ae[1].v=G.read_shift(8,"f"),Q.qpro)G.l=O;else{var j=G.read_shift(2);B(G.slice(G.l,G.l+j),ae),G.l+=j}return ae}function _(G,W,Q){var O=W&32768;return W&=-32769,W=(O?G:0)+(W>=8192?W-16384:W),(O?"":"$")+(Q?Es(W):ro(W))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},S=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function B(G,W){Ys(G,0);for(var Q=[],O=0,ae="",j="",J="",ie="";G.l<G.length;){var X=G[G.l++];switch(X){case 0:Q.push(G.read_shift(8,"f"));break;case 1:j=_(W[0].c,G.read_shift(2),!0),ae=_(W[0].r,G.read_shift(2),!1),Q.push(j+ae);break;case 2:{var fe=_(W[0].c,G.read_shift(2),!0),M=_(W[0].r,G.read_shift(2),!1);j=_(W[0].c,G.read_shift(2),!0),ae=_(W[0].r,G.read_shift(2),!1),Q.push(fe+M+":"+j+ae)}break;case 3:if(G.l<G.length){console.error("WK1 premature formula end");return}break;case 4:Q.push("("+Q.pop()+")");break;case 5:Q.push(G.read_shift(2));break;case 6:{for(var z="";X=G[G.l++];)z+=String.fromCharCode(X);Q.push('"'+z.replace(/"/g,'""')+'"')}break;case 8:Q.push("-"+Q.pop());break;case 23:Q.push("+"+Q.pop());break;case 22:Q.push("NOT("+Q.pop()+")");break;case 20:case 21:ie=Q.pop(),J=Q.pop(),Q.push(["AND","OR"][X-20]+"("+J+","+ie+")");break;default:if(X<32&&S[X])ie=Q.pop(),J=Q.pop(),Q.push(J+S[X]+ie);else if(b[X]){if(O=b[X][1],O==69&&(O=G[G.l++]),O>Q.length){console.error("WK1 bad formula parse 0x"+X.toString(16)+":|"+Q.join("|")+"|");return}var se=Q.slice(-O);Q.length-=O,Q.push(b[X][0]+"("+se.join(",")+")")}else return X<=7?console.error("WK1 invalid opcode "+X.toString(16)):X<=24?console.error("WK1 unsupported op "+X.toString(16)):X<=30?console.error("WK1 invalid opcode "+X.toString(16)):X<=115?console.error("WK1 unsupported function opcode "+X.toString(16)):console.error("WK1 unrecognized opcode "+X.toString(16))}}Q.length==1?W[1].f=""+Q[0]:console.error("WK1 bad formula parse |"+Q.join("|")+"|")}function F(G){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=G.read_shift(2),W[3]=G[G.l++],W[0].c=G[G.l++],W}function T(G,W){var Q=F(G);return Q[1].t="s",Q[1].v=G.read_shift(W-4,"cstr"),Q}function E(G,W,Q,O){var ae=xs(6+O.length);ae.write_shift(2,G),ae.write_shift(1,Q),ae.write_shift(1,W),ae.write_shift(1,39);for(var j=0;j<O.length;++j){var J=O.charCodeAt(j);ae.write_shift(1,J>=128?95:J)}return ae.write_shift(1,0),ae}function x(G,W){var Q=F(G);Q[1].v=G.read_shift(2);var O=Q[1].v>>1;if(Q[1].v&1)switch(O&7){case 0:O=(O>>3)*5e3;break;case 1:O=(O>>3)*500;break;case 2:O=(O>>3)/20;break;case 3:O=(O>>3)/200;break;case 4:O=(O>>3)/2e3;break;case 5:O=(O>>3)/2e4;break;case 6:O=(O>>3)/16;break;case 7:O=(O>>3)/64;break}return Q[1].v=O,Q}function C(G,W){var Q=F(G),O=G.read_shift(4),ae=G.read_shift(4),j=G.read_shift(2);if(j==65535)return O===0&&ae===3221225472?(Q[1].t="e",Q[1].v=15):O===0&&ae===3489660928?(Q[1].t="e",Q[1].v=42):Q[1].v=0,Q;var J=j&32768;return j=(j&32767)-16446,Q[1].v=(1-J*2)*(ae*Math.pow(2,j+32)+O*Math.pow(2,j)),Q}function D(G,W,Q,O){var ae=xs(14);if(ae.write_shift(2,G),ae.write_shift(1,Q),ae.write_shift(1,W),O==0)return ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(2,65535),ae;var j=0,J=0,ie=0,X=0;return O<0&&(j=1,O=-O),J=Math.log2(O)|0,O/=Math.pow(2,J-31),X=O>>>0,(X&2147483648)==0&&(O/=2,++J,X=O>>>0),O-=X,X|=2147483648,X>>>=0,O*=Math.pow(2,32),ie=O>>>0,ae.write_shift(4,ie),ae.write_shift(4,X),J+=16383+(j?32768:0),ae.write_shift(2,J),ae}function U(G,W){var Q=C(G);return G.l+=W-14,Q}function L(G,W){var Q=F(G),O=G.read_shift(4);return Q[1].v=O>>6,Q}function H(G,W){var Q=F(G),O=G.read_shift(8,"f");return Q[1].v=O,Q}function oe(G,W){var Q=H(G);return G.l+=W-10,Q}function de(G,W){return G[G.l+W-1]==0?G.read_shift(W,"cstr"):""}function te(G,W){var Q=G[G.l++];Q>W-1&&(Q=W-1);for(var O="";O.length<Q;)O+=String.fromCharCode(G[G.l++]);return O}function q(G,W,Q){if(!(!Q.qpro||W<21)){var O=G.read_shift(1);G.l+=17,G.l+=1,G.l+=2;var ae=G.read_shift(W-21,"cstr");return[O,ae]}}function ce(G,W){for(var Q={},O=G.l+W;G.l<O;){var ae=G.read_shift(2);if(ae==14e3){for(Q[ae]=[0,""],Q[ae][0]=G.read_shift(2);G[G.l];)Q[ae][1]+=String.fromCharCode(G[G.l]),G.l++;G.l++}}return Q}function le(G,W){var Q=xs(5+G.length);Q.write_shift(2,14e3),Q.write_shift(2,W);for(var O=0;O<G.length;++O){var ae=G.charCodeAt(O);Q[Q.l++]=ae>127?95:ae}return Q[Q.l++]=0,Q}var Z={0:{n:"BOF",f:ds},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:h},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:de},222:{n:"SHEETNAMELP",f:te},65535:{n:""}},ne={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:T},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:x},25:{n:"FORMULA19",f:U},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:L},38:{n:"??"},39:{n:"NUMBER27",f:H},40:{n:"FORMULA28",f:oe},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:de},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:r,to_workbook:t}})();function kUe(e){var t={},n=e.match(Do),a=0,r=!1;if(n)for(;a!=n.length;++a){var s=zn(n[a]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=DT[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(s[0].charCodeAt(1)!==47&&!r)throw new Error("Unrecognized rich format "+s[0])}}return t}var BUe=(function(){var e=Y0("t"),t=Y0("rPr");function n(s){var o=s.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Va(o[1])},c=s.match(t);return c&&(l.s=kUe(c[1])),l}var a=/<(?:\w+:)?r>/g,r=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(r).map(n).filter(function(l){return l.v})}})(),TUe=(function(){var t=/(\r\n|\n)/g;function n(r,s,o){var l=[];r.u&&l.push("text-decoration: underline;"),r.uval&&l.push("text-underline-style:"+r.uval+";"),r.sz&&l.push("font-size:"+r.sz+"pt;"),r.outline&&l.push("text-effect: outline;"),r.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),r.b&&(s.push("<b>"),o.push("</b>")),r.i&&(s.push("<i>"),o.push("</i>")),r.strike&&(s.push("<s>"),o.push("</s>"));var c=r.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),r}function a(r){var s=[[],r.v,[]];return r.v?(r.s&&n(r.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(a).join("")}})(),IUe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,FUe=/<(?:\w+:)?r>/,PUe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function YT(e,t){var n=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Va(gr(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=gr(e),n&&(a.h=OT(a.t))):e.match(FUe)&&(a.r=gr(e),a.t=Va(gr((e.replace(PUe,"").match(IUe)||[]).join("").replace(Do,""))),n&&(a.h=TUe(BUe(a.r)))),a):{t:""}}var DUe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,UUe=/<(?:\w+:)?(?:si|sstItem)>/g,RUe=/<\/(?:\w+:)?(?:si|sstItem)>/;function NUe(e,t){var n=[],a="";if(!e)return n;var r=e.match(DUe);if(r){a=r[2].replace(UUe,"").split(RUe);for(var s=0;s!=a.length;++s){var o=YT(a[s].trim(),t);o!=null&&(n[n.length]=o)}r=zn(r[1]),n.Count=r.count,n.Unique=r.uniqueCount}return n}function VUe(e){return[e.read_shift(4),e.read_shift(4)]}function LUe(e,t){var n=[],a=!1;return Xc(e,function(s,o,l){switch(l){case 159:n.Count=s[0],n.Unique=s[1];break;case 19:n.push(s);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function a9(e){for(var t=[],n=e.split(""),a=0;a<n.length;++a)t[a]=n[a].charCodeAt(0);return t}function Uc(e,t){var n={};return n.Major=e.read_shift(2),n.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),n}function MUe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Uc(e,4),t.U=Uc(e,4),t.W=Uc(e,4),t}function OUe(e){for(var t=e.read_shift(4),n=e.l+t-4,a={},r=e.read_shift(4),s=[];r-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=s,e.l!=n)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+n);return a}function HUe(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(OUe(e));return t}function $Ue(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function QUe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Uc(e,4),t.U=Uc(e,4),t.W=Uc(e,4),t}function GUe(e){var t=QUe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function r9(e,t){var n=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var r=!1;switch(a.AlgID){case 26126:case 26127:case 26128:r=a.Flags==36;break;case 26625:r=a.Flags==4;break;case 0:r=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!r)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(n-e.l>>1,"utf16le"),e.l=n,a}function s9(e,t){var n={},a=e.l+t;return e.l+=4,n.Salt=e.slice(e.l,e.l+16),e.l+=16,n.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),n.VerifierHash=e.slice(e.l,a),e.l=a,n}function zUe(e){var t=Uc(e);switch(t.Minor){case 2:return[t.Minor,WUe(e)];case 3:return[t.Minor,KUe()];case 4:return[t.Minor,jUe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function WUe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var n=e.read_shift(4),a=r9(e,n),r=s9(e,e.length-e.l);return{t:"Std",h:a,v:r}}function KUe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function jUe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var n=e.read_shift(e.length-e.l,"utf8"),a={};return n.replace(Do,function(s){var o=zn(s);switch(qu(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function qUe(e,t){var n={},a=n.EncryptionVersionInfo=Uc(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);n.Flags=e.read_shift(4),t-=4;var r=e.read_shift(4);return t-=4,n.EncryptionHeader=r9(e,r),t-=r,n.EncryptionVerifier=s9(e,t),n}function YUe(e){var t={},n=t.EncryptionVersionInfo=Uc(e,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function XUe(e){var t=0,n,a=a9(e),r=a.length+1,s,o,l,c,f;for(n=rf(r),n[0]=a.length,s=1;s!=r;++s)n[s]=a[s-1];for(s=r-1;s>=0;--s)o=n[s],l=(t&16384)===0?0:1,c=t<<1&32767,f=l|c,t=f^o;return t^52811}var o9=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},r=function(o,l){return a(o^l)},s=function(o){for(var l=t[o.length-1],c=104,f=o.length-1;f>=0;--f)for(var d=o[f],A=0;A!=7;++A)d&64&&(l^=n[c]),d*=2,--c;return l};return function(o){for(var l=a9(o),c=s(l),f=l.length,d=rf(16),A=0;A!=16;++A)d[A]=0;var m,p,h;for((f&1)===1&&(m=c>>8,d[f]=r(e[0],m),--f,m=c&255,p=l[l.length-1],d[f]=r(p,m));f>0;)--f,m=c>>8,d[f]=r(l[f],m),--f,m=c&255,d[f]=r(l[f],m);for(f=15,h=15-l.length;h>0;)m=c>>8,d[f]=r(e[h],m),--f,--h,m=c&255,d[f]=r(l[f],m),--f,--h;return d}})(),JUe=function(e,t,n,a,r){r||(r=t),a||(a=o9(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=a[n],o=(o>>5|o<<3)&255,r[s]=o,++n;return[r,n,a]},ZUe=function(e){var t=0,n=o9(e);return function(a){var r=JUe("",a,t,n);return t=r[1],r[0]}};function eRe(e,t,n,a){var r={key:ds(e),verificationBytes:ds(e)};return n.password&&(r.verifier=XUe(n.password)),a.valid=r.verificationBytes===r.verifier,a.valid&&(a.insitu=ZUe(n.password)),r}function tRe(e,t,n){var a=n||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=YUe(e):a.Data=qUe(e,t),a}function nRe(e,t,n){var a={Type:n.biff>=8?e.read_shift(2):0};return a.Type?tRe(e,t-2,a):eRe(e,n.biff>=8?t:t-2,n,a),a}var aRe=(function(){function e(r,s){switch(s.type){case"base64":return t(Ui(r),s);case"binary":return t(r,s);case"buffer":return t(xa&&Buffer.isBuffer(r)?r.toString("binary"):YA(r),s);case"array":return t(EA(r),s)}throw new Error("Unrecognized type "+s.type)}function t(r,s){var o=s||{},l=o.dense?[]:{},c=r.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var f={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,A){Array.isArray(l)&&(l[A]=[]);for(var m=/\\\w+\b/g,p=0,h,y=-1;h=m.exec(d);){switch(h[0]){case"\\cell":var g=d.slice(p,m.lastIndex-h[0].length);if(g[0]==" "&&(g=g.slice(1)),++y,g.length){var _={v:g,t:"s"};Array.isArray(l)?l[A][y]=_:l[Jn({r:A,c:y})]=_}break}p=m.lastIndex}y>f.e.c&&(f.e.c=y)}),l["!ref"]=Pa(f),l}function n(r,s){return mf(e(r,s),s)}function a(r){for(var s=["{\\rtf1\\ansi"],o=Hr(r["!ref"]),l,c=Array.isArray(r),f=o.s.r;f<=o.e.r;++f){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var A=Jn({r:f,c:d});l=c?(r[f]||[])[d]:r[A],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(Gc(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:n,to_sheet:e,from_sheet:a}})();function rRe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Z0(e){for(var t=0,n=1;t!=3;++t)n=n*256+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}function sRe(e){var t=e[0]/255,n=e[1]/255,a=e[2]/255,r=Math.max(t,n,a),s=Math.min(t,n,a),o=r-s;if(o===0)return[0,0,t];var l=0,c=0,f=r+s;switch(c=o/(f>1?2-f:f),r){case t:l=((n-a)/o+6)%6;break;case n:l=(a-t)/o+2;break;case a:l=(t-n)/o+4;break}return[l/6,c,f/2]}function oRe(e){var t=e[0],n=e[1],a=e[2],r=n*2*(a<.5?a:1-a),s=a-r/2,o=[s,s,s],l=6*t,c;if(n!==0)switch(l|0){case 0:case 6:c=r*l,o[0]+=r,o[1]+=c;break;case 1:c=r*(2-l),o[0]+=c,o[1]+=r;break;case 2:c=r*(l-2),o[1]+=r,o[2]+=c;break;case 3:c=r*(4-l),o[1]+=c,o[2]+=r;break;case 4:c=r*(l-4),o[2]+=r,o[0]+=c;break;case 5:c=r*(6-l),o[2]+=c,o[0]+=r;break}for(var f=0;f!=3;++f)o[f]=Math.round(o[f]*255);return o}function E2(e,t){if(t===0)return e;var n=sRe(rRe(e));return t<0?n[2]=n[2]*(1+t):n[2]=1-(1-n[2])*(1-t),Z0(oRe(n))}var i9=6,iRe=15,lRe=1,$o=i9;function k2(e){return Math.floor((e+Math.round(128/$o)/256)*$o)}function B2(e){return Math.floor((e-5)/$o*100+.5)/100}function GE(e){return Math.round((e*$o+5)/$o*256)/256}function MC(e){return GE(B2(k2(e)))}function XT(e){var t=Math.abs(e-MC(e)),n=$o;if(t>.005)for($o=lRe;$o<iRe;++$o)Math.abs(e-MC(e))<=t&&(t=Math.abs(e-MC(e)),n=$o);$o=n}function eh(e){e.width?(e.wpx=k2(e.width),e.wch=B2(e.wpx),e.MDW=$o):e.wpx?(e.wch=B2(e.wpx),e.width=GE(e.wch),e.MDW=$o):typeof e.wch=="number"&&(e.width=GE(e.wch),e.wpx=k2(e.width),e.MDW=$o),e.customWidth&&delete e.customWidth}var uRe=96,l9=uRe;function u9(e){return e*96/l9}function eg(e){return e*l9/96}var cRe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function dRe(e,t,n,a){t.Borders=[];var r={},s=!1;(e[0].match(Do)||[]).forEach(function(o){var l=zn(o);switch(qu(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":r={},l.diagonalUp&&(r.diagonalUp=Dr(l.diagonalUp)),l.diagonalDown&&(r.diagonalDown=Dr(l.diagonalDown)),t.Borders.push(r);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function fRe(e,t,n,a){t.Fills=[];var r={},s=!1;(e[0].match(Do)||[]).forEach(function(o){var l=zn(o);switch(qu(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":r={},t.Fills.push(r);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(r),r={};break;case"<patternFill":case"<patternFill>":l.patternType&&(r.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":r.bgColor||(r.bgColor={}),l.indexed&&(r.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(r.bgColor.theme=parseInt(l.theme,10)),l.tint&&(r.bgColor.tint=parseFloat(l.tint)),l.rgb&&(r.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":r.fgColor||(r.fgColor={}),l.theme&&(r.fgColor.theme=parseInt(l.theme,10)),l.tint&&(r.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(r.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function ARe(e,t,n,a){t.Fonts=[];var r={},s=!1;(e[0].match(Do)||[]).forEach(function(o){var l=zn(o);switch(qu(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(r),r={};break;case"<name":l.val&&(r.name=gr(l.val));break;case"<name/>":case"</name>":break;case"<b":r.bold=l.val?Dr(l.val):1;break;case"<b/>":r.bold=1;break;case"<i":r.italic=l.val?Dr(l.val):1;break;case"<i/>":r.italic=1;break;case"<u":switch(l.val){case"none":r.underline=0;break;case"single":r.underline=1;break;case"double":r.underline=2;break;case"singleAccounting":r.underline=33;break;case"doubleAccounting":r.underline=34;break}break;case"<u/>":r.underline=1;break;case"<strike":r.strike=l.val?Dr(l.val):1;break;case"<strike/>":r.strike=1;break;case"<outline":r.outline=l.val?Dr(l.val):1;break;case"<outline/>":r.outline=1;break;case"<shadow":r.shadow=l.val?Dr(l.val):1;break;case"<shadow/>":r.shadow=1;break;case"<condense":r.condense=l.val?Dr(l.val):1;break;case"<condense/>":r.condense=1;break;case"<extend":r.extend=l.val?Dr(l.val):1;break;case"<extend/>":r.extend=1;break;case"<sz":l.val&&(r.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(r.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(r.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(r.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=DT[parseInt(l.val,10)];break;case"<color":if(r.color||(r.color={}),l.auto&&(r.color.auto=Dr(l.auto)),l.rgb)r.color.rgb=l.rgb.slice(-6);else if(l.indexed){r.color.index=parseInt(l.indexed,10);var c=dA[r.color.index];r.color.index==81&&(c=dA[1]),c||(c=dA[1]),r.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(r.color.theme=parseInt(l.theme,10),l.tint&&(r.color.tint=parseFloat(l.tint)),l.theme&&n.themeElements&&n.themeElements.clrScheme&&(r.color.rgb=E2(n.themeElements.clrScheme[r.color.theme].rgb,r.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function mRe(e,t,n){t.NumberFmt=[];for(var a=Lu(sa),r=0;r<a.length;++r)t.NumberFmt[a[r]]=sa[a[r]];var s=e[0].match(Do);if(s)for(r=0;r<s.length;++r){var o=zn(s[r]);switch(qu(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Va(gr(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}cA(l,c)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var Ly=["numFmtId","fillId","fontId","borderId","xfId"],My=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function vRe(e,t,n){t.CellXf=[];var a,r=!1;(e[0].match(Do)||[]).forEach(function(s){var o=zn(s),l=0;switch(qu(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<Ly.length;++l)a[Ly[l]]&&(a[Ly[l]]=parseInt(a[Ly[l]],10));for(l=0;l<My.length;++l)a[My[l]]&&(a[My[l]]=Dr(a[My[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Dr(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":r=!0;break;case"</AlternateContent>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(n&&n.WTF&&!r)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var hRe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,r=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,f){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var A;return(A=l.match(t))&&mRe(A,d,f),(A=l.match(r))&&ARe(A,d,c,f),(A=l.match(a))&&fRe(A,d,c,f),(A=l.match(s))&&dRe(A,d,c,f),(A=l.match(n))&&vRe(A,d,f),d}})();function pRe(e,t){var n=e.read_shift(2),a=Bo(e);return[n,a]}function gRe(e,t,n){var a={};a.sz=e.read_shift(2)/20;var r=BDe(e);r.fItalic&&(a.italic=1),r.fCondense&&(a.condense=1),r.fExtend&&(a.extend=1),r.fShadow&&(a.shadow=1),r.fOutline&&(a.outline=1),r.fStrikeout&&(a.strike=1);var s=e.read_shift(2);switch(s===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=kDe(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=Bo(e),a}var yRe=Io;function _Re(e,t){var n=e.l+t,a=e.read_shift(2),r=e.read_shift(2);return e.l=n,{ixfe:a,numFmtId:r}}var wRe=Io;function bRe(e,t,n){var a={};a.NumberFmt=[];for(var r in sa)a.NumberFmt[r]=sa[r];a.CellXf=[],a.Fonts=[];var s=[],o=!1;return Xc(e,function(c,f,d){switch(d){case 44:a.NumberFmt[c[0]]=c[1],cA(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=E2(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(f.T>0)s.push(d);else if(f.T<0)s.pop();else if(!o||n.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),a}var xRe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function CRe(e,t,n){t.themeElements.clrScheme=[];var a={};(e[0].match(Do)||[]).forEach(function(r){var s=zn(r);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=s.val;break;case"<a:sysClr":a.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[xRe.indexOf(s[0])]=a,a={}):a.name=s[0].slice(3,s[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function SRe(){}function ERe(){}var kRe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,BRe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,TRe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function IRe(e,t,n){t.themeElements={};var a;[["clrScheme",kRe,CRe],["fontScheme",BRe,SRe],["fmtScheme",TRe,ERe]].forEach(function(r){if(!(a=e.match(r[1])))throw new Error(r[0]+" not found in themeElements");r[2](a,t,n)})}var FRe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function c9(e,t){(!e||e.length===0)&&(e=PRe());var n,a={};if(!(n=e.match(FRe)))throw new Error("themeElements not found in theme");return IRe(n[0],a,t),a.raw=e,a}function PRe(e,t){var n=[w$];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function DRe(e,t,n){var a=e.l+t,r=e.read_shift(4);if(r!==124226){if(!n.cellStyles){e.l=a;return}var s=e.slice(e.l);e.l=a;var o;try{o=_$(s,{type:"array"})}catch{return}var l=Ei(o,"theme/theme/theme1.xml",!0);if(l)return c9(l,n)}}function URe(e){return e.read_shift(4)}function RRe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=NRe(e,4);break;case 2:t.xclrValue=Y$(e);break;case 3:t.xclrValue=URe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function NRe(e,t){return Io(e,t)}function VRe(e,t){return Io(e,t)}function LRe(e){var t=e.read_shift(2),n=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=RRe(e);break;case 6:a[1]=VRe(e,n);break;case 14:case 15:a[1]=e.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+n)}return a}function MRe(e,t){var n=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var r=e.read_shift(2),s=[];r-- >0;)s.push(LRe(e,n-e.l));return{ixfe:a,ext:s}}function ORe(e,t){t.forEach(function(n){n[0]})}function HRe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Bo(e)}}function $Re(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function QRe(e){return e.l+=4,e.read_shift(4)!=0}function GRe(e,t,n){var a={Types:[],Cell:[],Value:[]},r=n||{},s=[],o=!1,l=2;return Xc(e,function(c,f,d){switch(d){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(A){l==1?a.Cell.push({type:a.Types[A[0]-1].name,index:A[1]}):l==0&&a.Value.push({type:a.Types[A[0]-1].name,index:A[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!f.T){if(!o||r.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),a}function zRe(e,t,n){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var r=!1,s=2,o;return e.replace(Do,function(l){var c=zn(l);switch(qu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var f=0;f<a.Types.length;++f)a.Types[f].name==c.name&&(o=a.Types[f]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):s==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!r&&n.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function WRe(e){var t=[];if(!e)return t;var n=1;return(e.match(Do)||[]).forEach(function(a){var r=zn(a);switch(r[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete r[0],r.i?n=r.i:r.i=n,t.push(r);break}}),t}function KRe(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=Jn(n);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function jRe(e,t,n){var a=[];return Xc(e,function(s,o,l){switch(l){case 63:a.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function qRe(e,t,n,a){if(!e)return e;var r=a||{},s=!1;Xc(e,function(l,c,f){switch(f){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||r.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}},r)}function YRe(e,t){if(!e)return"??";var n=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][n].Target}function sN(e,t,n,a){var r=Array.isArray(e),s;t.forEach(function(o){var l=Qo(o.ref);if(r?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[o.ref],!s){s={t:"z"},r?e[l.r][l.c]=s:e[o.ref]=s;var c=Hr(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var f=Pa(c);f!==e["!ref"]&&(e["!ref"]=f)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:n};o.h&&(d.h=o.h);for(var A=s.c.length-1;A>=0;--A){if(!n&&s.c[A].T)return;n&&!s.c[A].T&&s.c.splice(A,1)}if(n&&a){for(A=0;A<a.length;++A)if(d.a==a[A].id){d.a=a[A].name||d.a;break}}s.c.push(d)})}function XRe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],a=[],r=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);r&&r[1]&&r[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&n.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=zn(l[0]),f={author:c.authorId&&n[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Qo(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var A=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!A&&!!A[1]&&YT(A[1])||{r:"",t:"",h:""};f.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),f.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(f.h=m.h),a.push(f)}}}}),a}function JRe(e,t){var n=[],a=!1,r={},s=0;return e.replace(Do,function(l,c){var f=zn(l);switch(qu(f[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":r={author:f.personId,guid:f.id,ref:f.ref,T:1};break;case"</threadedComment>":r.t!=null&&n.push(r);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":r.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+f[0]+" in threaded comments")}return l}),n}function ZRe(e,t){var n=[],a=!1;return e.replace(Do,function(s){var o=zn(s);switch(qu(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),n}function eNe(e){var t={};t.iauthor=e.read_shift(4);var n=JA(e);return t.rfx=n.s,t.ref=Jn(n.s),e.l+=16,t}var tNe=Bo;function nNe(e,t){var n=[],a=[],r={},s=!1;return Xc(e,function(l,c,f){switch(f){case 632:a.push(l);break;case 635:r=l;break;case 637:r.t=l.t,r.h=l.h,r.r=l.r;break;case 636:if(r.author=a[r.iauthor],delete r.iauthor,t.sheetRows&&r.rfx&&t.sheetRows<=r.rfx.r)break;r.t||(r.t=""),delete r.rfx,n.push(r);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}var aNe="application/vnd.ms-office.vbaProject";function rNe(e){var t=Ta.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(n,a){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var r=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Ta.utils.cfb_add(t,r,e.FileIndex[a].content)}}),Ta.write(t)}function sNe(){return{"!type":"dialog"}}function oNe(){return{"!type":"dialog"}}function iNe(){return{"!type":"macro"}}function lNe(){return{"!type":"macro"}}var Bv=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(a,r,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var f=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?f+=t.r:--f,r+(l?"":"$")+Es(d)+(c?"":"$")+ro(f)}return function(r,s){return t=s,r.replace(e,n)}})(),d9=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,uNe=(function(){return function(t,n){return t.replace(d9,function(a,r,s,o,l,c){var f=GT(o)-(s?0:n.c),d=QT(c)-(l?0:n.r),A=d==0?"":l?d+1:"["+d+"]",m=f==0?"":s?f+1:"["+f+"]";return r+"R"+A+"C"+m})}})();function f9(e,t){return e.replace(d9,function(n,a,r,s,o,l){return a+(r=="$"?r+s:Es(GT(s)+t.c))+(o=="$"?o+l:ro(QT(l)+t.r))})}function cNe(e,t,n){var a=Bh(t),r=a.s,s=Qo(n),o={r:s.r-r.r,c:s.c-r.c};return f9(e,o)}function dNe(e){return e.length!=1}function oN(e){return e.replace(/_xlfn\./g,"")}function ls(e){e.l+=1}function sf(e,t){var n=e.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function A9(e,t,n){var a=2;if(n){if(n.biff>=2&&n.biff<=5)return m9(e);n.biff==12&&(a=4)}var r=e.read_shift(a),s=e.read_shift(a),o=sf(e),l=sf(e);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function m9(e){var t=sf(e),n=sf(e),a=e.read_shift(1),r=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:n[0],c:r,cRel:n[1],rRel:n[2]}}}function fNe(e,t,n){if(n.biff<8)return m9(e);var a=e.read_shift(n.biff==12?4:2),r=e.read_shift(n.biff==12?4:2),s=sf(e),o=sf(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r,c:o[0],cRel:o[1],rRel:o[2]}}}function v9(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return ANe(e);var a=e.read_shift(n&&n.biff==12?4:2),r=sf(e);return{r:a,c:r[0],cRel:r[1],rRel:r[2]}}function ANe(e){var t=sf(e),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}function mNe(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function vNe(e,t,n){var a=n&&n.biff?n.biff:8;if(a>=2&&a<=5)return hNe(e);var r=e.read_shift(a>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;r>524287;)r-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r,c:s,cRel:o,rRel:l}}function hNe(e){var t=e.read_shift(2),n=e.read_shift(1),a=(t&32768)>>15,r=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),r==1&&n>=128&&(n=n-256),{r:t,c:n,cRel:r,rRel:a}}function pNe(e,t,n){var a=(e[e.l++]&96)>>5,r=A9(e,n.biff>=2&&n.biff<=5?6:8,n);return[a,r]}function gNe(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=A9(e,s,n);return[a,r,o]}function yNe(e,t,n){var a=(e[e.l++]&96)>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[a]}function _Ne(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[a,r]}function wNe(e,t,n){var a=(e[e.l++]&96)>>5,r=fNe(e,t-1,n);return[a,r]}function bNe(e,t,n){var a=(e[e.l++]&96)>>5;return e.l+=n.biff==2?6:n.biff==12?14:7,[a]}function iN(e){var t=e[e.l+1]&1,n=1;return e.l+=4,[t,n]}function xNe(e,t,n){e.l+=2;for(var a=e.read_shift(n&&n.biff==2?1:2),r=[],s=0;s<=a;++s)r.push(e.read_shift(n&&n.biff==2?1:2));return r}function CNe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(n&&n.biff==2?1:2)]}function SNe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(n&&n.biff==2?1:2)]}function ENe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function kNe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=n&&n.biff==2?3:4,[a]}function h9(e){var t=e.read_shift(1),n=e.read_shift(1);return[t,n]}function BNe(e){return e.read_shift(2),h9(e)}function TNe(e){return e.read_shift(2),h9(e)}function INe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=v9(e,0,n);return[a,r]}function FNe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=vNe(e,0,n);return[a,r]}function PNe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=e.read_shift(2);n&&n.biff==5&&(e.l+=12);var s=v9(e,0,n);return[a,r,s]}function DNe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=e.read_shift(n&&n.biff<=3?1:2);return[UVe[r],y9[r],a]}function UNe(e,t,n){var a=e[e.l++],r=e.read_shift(1),s=n&&n.biff<=3?[a==88?-1:0,e.read_shift(1)]:RNe(e);return[r,(s[0]===0?y9:DVe)[s[1]]]}function RNe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function NNe(e,t,n){e.l+=n&&n.biff==2?3:4}function VNe(e,t,n){if(e.l++,n&&n.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function LNe(e){return e.l++,ZA[e.read_shift(1)]}function MNe(e){return e.l++,e.read_shift(2)}function ONe(e){return e.l++,e.read_shift(1)!==0}function HNe(e){return e.l++,wo(e)}function $Ne(e,t,n){return e.l++,Hg(e,t-1,n)}function QNe(e,t){var n=[e.read_shift(1)];if(t==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Yr(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:n[1]=ZA[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:n[1]=wo(e);break;case 2:n[1]=em(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function GNe(e,t,n){for(var a=e.read_shift(n.biff==12?4:2),r=[],s=0;s!=a;++s)r.push((n.biff==12?JA:jw)(e));return r}function zNe(e,t,n){var a=0,r=0;n.biff==12?(a=e.read_shift(4),r=e.read_shift(4)):(r=1+e.read_shift(1),a=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--a,--r==0&&(r=256));for(var s=0,o=[];s!=a&&(o[s]=[]);++s)for(var l=0;l!=r;++l)o[s][l]=QNe(e,n.biff);return o}function WNe(e,t,n){var a=e.read_shift(1)>>>5&3,r=!n||n.biff>=8?4:2,s=e.read_shift(r);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,s]}function KNe(e,t,n){if(n.biff==5)return jNe(e);var a=e.read_shift(1)>>>5&3,r=e.read_shift(2),s=e.read_shift(4);return[a,r,s]}function jNe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,n,a]}function qNe(e,t,n){var a=e.read_shift(1)>>>5&3;e.l+=n&&n.biff==2?3:4;var r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function YNe(e,t,n){var a=e.read_shift(1)>>>5&3,r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function XNe(e,t,n){var a=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,n.biff==12&&(e.l+=2),[a]}function JNe(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[a,r]}var ZNe=Io,eVe=Io,tVe=Io;function Qg(e,t,n){return e.l+=2,[mNe(e)]}function JT(e){return e.l+=6,[]}var nVe=Qg,aVe=JT,rVe=JT,sVe=Qg;function p9(e){return e.l+=2,[ds(e),e.read_shift(2)&1]}var oVe=Qg,iVe=p9,lVe=JT,uVe=Qg,cVe=Qg,dVe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function fVe(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(4),r=e.read_shift(2),s=e.read_shift(2),o=dVe[n>>2&31];return{ixti:t,coltype:n&3,rt:o,idx:a,c:r,C:s}}function AVe(e){return e.l+=2,[e.read_shift(4)]}function mVe(e,t,n){return e.l+=5,e.l+=2,e.l+=n.biff==2?1:4,["PTGSHEET"]}function vVe(e,t,n){return e.l+=n.biff==2?4:5,["PTGENDSHEET"]}function hVe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function pVe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function gVe(e){return e.l+=4,[0,0]}var lN={1:{n:"PtgExp",f:VNe},2:{n:"PtgTbl",f:tVe},3:{n:"PtgAdd",f:ls},4:{n:"PtgSub",f:ls},5:{n:"PtgMul",f:ls},6:{n:"PtgDiv",f:ls},7:{n:"PtgPower",f:ls},8:{n:"PtgConcat",f:ls},9:{n:"PtgLt",f:ls},10:{n:"PtgLe",f:ls},11:{n:"PtgEq",f:ls},12:{n:"PtgGe",f:ls},13:{n:"PtgGt",f:ls},14:{n:"PtgNe",f:ls},15:{n:"PtgIsect",f:ls},16:{n:"PtgUnion",f:ls},17:{n:"PtgRange",f:ls},18:{n:"PtgUplus",f:ls},19:{n:"PtgUminus",f:ls},20:{n:"PtgPercent",f:ls},21:{n:"PtgParen",f:ls},22:{n:"PtgMissArg",f:ls},23:{n:"PtgStr",f:$Ne},26:{n:"PtgSheet",f:mVe},27:{n:"PtgEndSheet",f:vVe},28:{n:"PtgErr",f:LNe},29:{n:"PtgBool",f:ONe},30:{n:"PtgInt",f:MNe},31:{n:"PtgNum",f:HNe},32:{n:"PtgArray",f:bNe},33:{n:"PtgFunc",f:DNe},34:{n:"PtgFuncVar",f:UNe},35:{n:"PtgName",f:WNe},36:{n:"PtgRef",f:INe},37:{n:"PtgArea",f:pNe},38:{n:"PtgMemArea",f:qNe},39:{n:"PtgMemErr",f:ZNe},40:{n:"PtgMemNoMem",f:eVe},41:{n:"PtgMemFunc",f:YNe},42:{n:"PtgRefErr",f:XNe},43:{n:"PtgAreaErr",f:yNe},44:{n:"PtgRefN",f:FNe},45:{n:"PtgAreaN",f:wNe},46:{n:"PtgMemAreaN",f:hVe},47:{n:"PtgMemNoMemN",f:pVe},57:{n:"PtgNameX",f:KNe},58:{n:"PtgRef3d",f:PNe},59:{n:"PtgArea3d",f:gNe},60:{n:"PtgRefErr3d",f:JNe},61:{n:"PtgAreaErr3d",f:_Ne},255:{}},yVe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},_Ve={1:{n:"PtgElfLel",f:p9},2:{n:"PtgElfRw",f:uVe},3:{n:"PtgElfCol",f:nVe},6:{n:"PtgElfRwV",f:cVe},7:{n:"PtgElfColV",f:sVe},10:{n:"PtgElfRadical",f:oVe},11:{n:"PtgElfRadicalS",f:lVe},13:{n:"PtgElfColS",f:aVe},15:{n:"PtgElfColSV",f:rVe},16:{n:"PtgElfRadicalLel",f:iVe},25:{n:"PtgList",f:fVe},29:{n:"PtgSxName",f:AVe},255:{}},wVe={0:{n:"PtgAttrNoop",f:gVe},1:{n:"PtgAttrSemi",f:kNe},2:{n:"PtgAttrIf",f:SNe},4:{n:"PtgAttrChoose",f:xNe},8:{n:"PtgAttrGoto",f:CNe},16:{n:"PtgAttrSum",f:NNe},32:{n:"PtgAttrBaxcel",f:iN},33:{n:"PtgAttrBaxcel",f:iN},64:{n:"PtgAttrSpace",f:BNe},65:{n:"PtgAttrSpaceSemi",f:TNe},128:{n:"PtgAttrIfError",f:ENe},255:{}};function Gg(e,t,n,a){if(a.biff<8)return Io(e,t);for(var r=e.l+t,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=zNe(e,0,a),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=GNe(e,n[o][1],a),s.push(n[o][2]);break;case"PtgExp":a&&a.biff==12&&(n[o][1][1]=e.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return t=r-e.l,t!==0&&s.push(Io(e,t)),s}function zg(e,t,n){for(var a=e.l+t,r,s,o=[];a!=e.l;)t=a-e.l,s=e[e.l],r=lN[s]||lN[yVe[s]],(s===24||s===25)&&(r=(s===24?_Ve:wVe)[e[e.l+1]]),!r||!r.f?Io(e,t):o.push([r.n,r.f(e,t,n)]);return o}function bVe(e){for(var t=[],n=0;n<e.length;++n){for(var a=e[n],r=[],s=0;s<a.length;++s){var o=a[s];if(o)switch(o[0]){case 2:r.push('"'+o[1].replace(/"/g,'""')+'"');break;default:r.push(o[1])}else r.push("")}t.push(r.join(","))}return t.join(";")}var xVe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function CVe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function g9(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var r="";if(n.biff>8)switch(e[a[0]][0]){case 357:return r=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?r:r+":"+e.SheetNames[a[2]];case 358:return n.SID!=null?e.SheetNames[n.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return r=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?r:r+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[a[0]][0][3]?(r=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?r:r+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function uN(e,t,n){var a=g9(e,t,n);return a=="#REF"?a:CVe(a,n)}function vo(e,t,n,a,r){var s=r&&r.biff||8,o={s:{c:0,r:0}},l=[],c,f,d,A=0,m=0,p,h="";if(!e[0]||!e[0][0])return"";for(var y=-1,g="",_=0,b=e[0].length;_<b;++_){var S=e[0][_];switch(S[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),f=l.pop(),y>=0){switch(e[0][y][1][0]){case 0:g=Mr(" ",e[0][y][1][1]);break;case 1:g=Mr("\r",e[0][y][1][1]);break;default:if(g="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}f=f+g,y=-1}l.push(f+xVe[S[0]]+c);break;case"PtgIsect":c=l.pop(),f=l.pop(),l.push(f+" "+c);break;case"PtgUnion":c=l.pop(),f=l.pop(),l.push(f+","+c);break;case"PtgRange":c=l.pop(),f=l.pop(),l.push(f+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=c0(S[1][1],o,r),l.push(d0(d,s));break;case"PtgRefN":d=n?c0(S[1][1],n,r):S[1][1],l.push(d0(d,s));break;case"PtgRef3d":A=S[1][1],d=c0(S[1][2],o,r),h=uN(a,A,r),l.push(h+"!"+d0(d,s));break;case"PtgFunc":case"PtgFuncVar":var B=S[1][0],F=S[1][1];B||(B=0),B&=127;var T=B==0?[]:l.slice(-B);l.length-=B,F==="User"&&(F=T.shift()),l.push(F+"("+T.join(",")+")");break;case"PtgBool":l.push(S[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(S[1]);break;case"PtgNum":l.push(String(S[1]));break;case"PtgStr":l.push('"'+S[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(S[1]);break;case"PtgAreaN":p=QR(S[1][1],n?{s:n}:o,r),l.push(VC(p,r));break;case"PtgArea":p=QR(S[1][1],o,r),l.push(VC(p,r));break;case"PtgArea3d":A=S[1][1],p=S[1][2],h=uN(a,A,r),l.push(h+"!"+VC(p,r));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=S[1][2];var E=(a.names||[])[m-1]||(a[0]||[])[m],x=E?E.Name:"SH33TJSNAME"+String(m);x&&x.slice(0,6)=="_xlfn."&&!r.xlfn&&(x=x.slice(6)),l.push(x);break;case"PtgNameX":var C=S[1][1];m=S[1][2];var D;if(r.biff<=5)C<0&&(C=-C),a[C]&&(D=a[C][m]);else{var U="";if(((a[C]||[])[0]||[])[0]==14849||(((a[C]||[])[0]||[])[0]==1025?a[C][m]&&a[C][m].itab>0&&(U=a.SheetNames[a[C][m].itab-1]+"!"):U=a.SheetNames[m-1]+"!"),a[C]&&a[C][m])U+=a[C][m].Name;else if(a[0]&&a[0][m])U+=a[0][m].Name;else{var L=(g9(a,C,r)||"").split(";;");L[m-1]?U=L[m-1]:U+="SH33TJSERRX"}l.push(U);break}D||(D={Name:"SH33TJSERRY"}),l.push(D.Name);break;case"PtgParen":var H="(",oe=")";if(y>=0){switch(g="",e[0][y][1][0]){case 2:H=Mr(" ",e[0][y][1][1])+H;break;case 3:H=Mr("\r",e[0][y][1][1])+H;break;case 4:oe=Mr(" ",e[0][y][1][1])+oe;break;case 5:oe=Mr("\r",e[0][y][1][1])+oe;break;default:if(r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}l.push(H+l.pop()+oe);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:S[1][1],r:S[1][0]};var de={c:n.c,r:n.r};if(a.sharedf[Jn(d)]){var te=a.sharedf[Jn(d)];l.push(vo(te,o,de,a,r))}else{var q=!1;for(c=0;c!=a.arrayf.length;++c)if(f=a.arrayf[c],!(d.c<f[0].s.c||d.c>f[0].e.c)&&!(d.r<f[0].s.r||d.r>f[0].e.r)){l.push(vo(f[1],o,de,a,r)),q=!0;break}q||l.push(S[1])}break;case"PtgArray":l.push("{"+bVe(S[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=_;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+S[1].idx+"[#"+S[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(S));default:throw new Error("Unrecognized Formula Token: "+String(S))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(r.biff!=3&&y>=0&&ce.indexOf(e[0][_][0])==-1){S=e[0][y];var le=!0;switch(S[1][0]){case 4:le=!1;case 0:g=Mr(" ",S[1][1]);break;case 5:le=!1;case 1:g=Mr("\r",S[1][1]);break;default:if(g="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+S[1][0])}l.push((le?g:"")+l.pop()+(le?"":g)),y=-1}}if(l.length>1&&r.WTF)throw new Error("bad formula stack");return l[0]}function SVe(e,t,n){var a=e.l+t,r=n.biff==2?1:2,s,o=e.read_shift(r);if(o==65535)return[[],Io(e,t-2)];var l=zg(e,o,n);return t!==o+r&&(s=Gg(e,t-o-r,l,n)),e.l=a,[l,s]}function EVe(e,t,n){var a=e.l+t,r=n.biff==2?1:2,s,o=e.read_shift(r);if(o==65535)return[[],Io(e,t-2)];var l=zg(e,o,n);return t!==o+r&&(s=Gg(e,t-o-r,l,n)),e.l=a,[l,s]}function kVe(e,t,n,a){var r=e.l+t,s=zg(e,a,n),o;return r!==e.l&&(o=Gg(e,r-e.l,s,n)),[s,o]}function BVe(e,t,n){var a=e.l+t,r,s=e.read_shift(2),o=zg(e,s,n);return s==65535?[[],Io(e,t-2)]:(t!==s+2&&(r=Gg(e,a-s-2,o,n)),[o,r])}function TVe(e){var t;if(Bc(e,e.l+6)!==65535)return[wo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function OC(e,t,n){var a=e.l+t,r=Yu(e);n.biff==2&&++e.l;var s=TVe(e),o=e.read_shift(1);n.biff!=2&&(e.read_shift(1),n.biff>=5&&e.read_shift(4));var l=EVe(e,a-e.l,n);return{cell:r,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function qw(e,t,n){var a=e.read_shift(4),r=zg(e,a,n),s=e.read_shift(4),o=s>0?Gg(e,s,r,n):null;return[r,o]}var IVe=qw,Yw=qw,FVe=qw,PVe=qw,DVe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},y9={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},UVe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function cN(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,n){return n.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function HC(e){var t=e.split(":"),n=t[0].split(".")[0];return[n,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var v0={},Tv={};function h0(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(n=[1,1,1,1,.5,.5]),e.left==null&&(e.left=n[0]),e.right==null&&(e.right=n[1]),e.top==null&&(e.top=n[2]),e.bottom==null&&(e.bottom=n[3]),e.header==null&&(e.header=n[4]),e.footer==null&&(e.footer=n[5])}}function _9(e,t,n,a,r,s){try{a.cellNF&&(e.z=sa[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Hs(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(sa[t]==null&&cA(RPe[t]||"General",t),e.t==="e")e.w=e.w||ZA[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=q0(e.v);else if(e.t==="d"){var o=jo(e.v);(o|0)===o?e.w=o.toString(10):e.w=q0(o)}else{if(e.v===void 0)return"";e.w=SA(e.v,Tv)}else e.t==="d"?e.w=ul(t,jo(e.v),Tv):e.w=ul(t,e.v,Tv)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&n!=null)try{e.s=s.Fills[n],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=E2(r.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=r.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=E2(r.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=r.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&s.Fills)throw l}}}function RVe(e,t){var n=Hr(t);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(e["!ref"]=Pa(n))}var NVe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,VVe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,LVe=/<(?:\w:)?hyperlink [^>]*>/mg,MVe=/"(\w*:\w*)"/,OVe=/<(?:\w:)?col\b[^>]*[\/]?>/g,HVe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,$Ve=/<(?:\w:)?pageMargins[^>]*\/>/g,w9=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,QVe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,GVe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function zVe(e,t,n,a,r,s,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},f="",d="",A=e.match(VVe);A?(f=e.slice(0,A.index),d=e.slice(A.index+A[0].length)):f=d=e;var m=f.match(w9);m?ZT(m[0],l,r,n):(m=f.match(QVe))&&WVe(m[0],m[1]||"",l,r,n);var p=(f.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var h=f.slice(p,p+50).match(MVe);h&&RVe(l,h[1])}var y=f.match(GVe);y&&y[1]&&JVe(y[1],r);var g=[];if(t.cellStyles){var _=f.match(OVe);_&&qVe(g,_)}A&&ZVe(A[1],l,t,c,s,o);var b=d.match(HVe);b&&(l["!autofilter"]=YVe(b[0]));var S=[],B=d.match(NVe);if(B)for(p=0;p!=B.length;++p)S[p]=Hr(B[p].slice(B[p].indexOf('"')+1));var F=d.match(LVe);F&&KVe(l,F,a);var T=d.match($Ve);if(T&&(l["!margins"]=jVe(zn(T[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=Pa(c)),t.sheetRows>0&&l["!ref"]){var E=Hr(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Pa(E))}return g.length>0&&(l["!cols"]=g),S.length>0&&(l["!merges"]=S),l}function ZT(e,t,n,a){var r=zn(e);n.Sheets[a]||(n.Sheets[a]={}),r.codeName&&(n.Sheets[a].CodeName=Va(gr(r.codeName)))}function WVe(e,t,n,a,r){ZT(e.slice(0,e.indexOf(">")),n,a,r)}function KVe(e,t,n){for(var a=Array.isArray(e),r=0;r!=t.length;++r){var s=zn(gr(t[r]),!0);if(!s.ref)return;var o=((n||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+Va(s.location))):(s.Target="#"+Va(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Hr(s.ref),c=l.s.r;c<=l.e.r;++c)for(var f=l.s.c;f<=l.e.c;++f){var d=Jn({c:f,r:c});a?(e[c]||(e[c]=[]),e[c][f]||(e[c][f]={t:"z",v:void 0}),e[c][f].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function jVe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(n){e[n]&&(t[n]=parseFloat(e[n]))}),t}function qVe(e,t){for(var n=!1,a=0;a!=t.length;++a){var r=zn(t[a],!0);r.hidden&&(r.hidden=Dr(r.hidden));var s=parseInt(r.min,10)-1,o=parseInt(r.max,10)-1;for(r.outlineLevel&&(r.level=+r.outlineLevel||0),delete r.min,delete r.max,r.width=+r.width,!n&&r.width&&(n=!0,XT(r.width)),eh(r);s<=o;)e[s++]=ao(r)}}function YVe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var XVe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function JVe(e,t){t.Views||(t.Views=[{}]),(e.match(XVe)||[]).forEach(function(n,a){var r=zn(n);t.Views[a]||(t.Views[a]={}),+r.zoomScale&&(t.Views[a].zoom=+r.zoomScale),Dr(r.rightToLeft)&&(t.Views[a].RTL=!0)})}var ZVe=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,r=/ref=["']([^"']*)["']/,s=Y0("v"),o=Y0("f");return function(c,f,d,A,m,p){for(var h=0,y="",g=[],_=[],b=0,S=0,B=0,F="",T,E,x=0,C=0,D,U,L=0,H=0,oe=Array.isArray(p.CellXf),de,te=[],q=[],ce=Array.isArray(f),le=[],Z={},ne=!1,G=!!d.sheetStubs,W=c.split(t),Q=0,O=W.length;Q!=O;++Q){y=W[Q].trim();var ae=y.length;if(ae!==0){var j=0;e:for(h=0;h<ae;++h)switch(y[h]){case">":if(y[h-1]!="/"){++h;break e}if(d&&d.cellStyles){if(E=zn(y.slice(j,h),!0),x=E.r!=null?parseInt(E.r,10):x+1,C=-1,d.sheetRows&&d.sheetRows<x)continue;Z={},ne=!1,E.ht&&(ne=!0,Z.hpt=parseFloat(E.ht),Z.hpx=eg(Z.hpt)),E.hidden=="1"&&(ne=!0,Z.hidden=!0),E.outlineLevel!=null&&(ne=!0,Z.level=+E.outlineLevel),ne&&(le[x-1]=Z)}break;case"<":j=h;break}if(j>=h)break;if(E=zn(y.slice(j,h),!0),x=E.r!=null?parseInt(E.r,10):x+1,C=-1,!(d.sheetRows&&d.sheetRows<x)){A.s.r>x-1&&(A.s.r=x-1),A.e.r<x-1&&(A.e.r=x-1),d&&d.cellStyles&&(Z={},ne=!1,E.ht&&(ne=!0,Z.hpt=parseFloat(E.ht),Z.hpx=eg(Z.hpt)),E.hidden=="1"&&(ne=!0,Z.hidden=!0),E.outlineLevel!=null&&(ne=!0,Z.level=+E.outlineLevel),ne&&(le[x-1]=Z)),g=y.slice(h).split(e);for(var J=0;J!=g.length&&g[J].trim().charAt(0)=="<";++J);for(g=g.slice(J),h=0;h!=g.length;++h)if(y=g[h].trim(),y.length!==0){if(_=y.match(n),b=h,S=0,B=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,_!=null&&_.length===2){for(b=0,F=_[1],S=0;S!=F.length&&!((B=F.charCodeAt(S)-64)<1||B>26);++S)b=26*b+B;--b,C=b}else++C;for(S=0;S!=y.length&&y.charCodeAt(S)!==62;++S);if(++S,E=zn(y.slice(0,S),!0),E.r||(E.r=Jn({r:x-1,c:C})),F=y.slice(S),T={t:""},(_=F.match(s))!=null&&_[1]!==""&&(T.v=Va(_[1])),d.cellFormula){if((_=F.match(o))!=null&&_[1]!==""){if(T.f=Va(gr(_[1])).replace(/\r\n/g,`
`),d.xlfn||(T.f=oN(T.f)),_[0].indexOf('t="array"')>-1)T.F=(F.match(r)||[])[1],T.F.indexOf(":")>-1&&te.push([Hr(T.F),T.F]);else if(_[0].indexOf('t="shared"')>-1){U=zn(_[0]);var ie=Va(gr(_[1]));d.xlfn||(ie=oN(ie)),q[parseInt(U.si,10)]=[U,ie,E.r]}}else(_=F.match(/<f[^>]*\/>/))&&(U=zn(_[0]),q[U.si]&&(T.f=cNe(q[U.si][1],q[U.si][2],E.r)));var X=Qo(E.r);for(S=0;S<te.length;++S)X.r>=te[S][0].s.r&&X.r<=te[S][0].e.r&&X.c>=te[S][0].s.c&&X.c<=te[S][0].e.c&&(T.F=te[S][1])}if(E.t==null&&T.v===void 0)if(T.f||T.F)T.v=0,T.t="n";else if(G)T.t="z";else continue;else T.t=E.t||"n";switch(A.s.c>C&&(A.s.c=C),A.e.c<C&&(A.e.c=C),T.t){case"n":if(T.v==""||T.v==null){if(!G)continue;T.t="z"}else T.v=parseFloat(T.v);break;case"s":if(typeof T.v>"u"){if(!G)continue;T.t="z"}else D=v0[parseInt(T.v,10)],T.v=D.t,T.r=D.r,d.cellHTML&&(T.h=D.h);break;case"str":T.t="s",T.v=T.v!=null?gr(T.v):"",d.cellHTML&&(T.h=OT(T.v));break;case"inlineStr":_=F.match(a),T.t="s",_!=null&&(D=YT(_[1]))?(T.v=D.t,d.cellHTML&&(T.h=D.h)):T.v="";break;case"b":T.v=Dr(T.v);break;case"d":d.cellDates?T.v=Hs(T.v,1):(T.v=jo(Hs(T.v,1)),T.t="n");break;case"e":(!d||d.cellText!==!1)&&(T.w=T.v),T.v=$$[T.v];break}if(L=H=0,de=null,oe&&E.s!==void 0&&(de=p.CellXf[E.s],de!=null&&(de.numFmtId!=null&&(L=de.numFmtId),d.cellStyles&&de.fillId!=null&&(H=de.fillId))),_9(T,L,H,d,m,p),d.cellDates&&oe&&T.t=="n"&&kh(sa[L])&&(T.t="d",T.v=Kw(T.v)),E.cm&&d.xlmeta){var fe=(d.xlmeta.Cell||[])[+E.cm-1];fe&&fe.type=="XLDAPR"&&(T.D=!0)}if(ce){var M=Qo(E.r);f[M.r]||(f[M.r]=[]),f[M.r][M.c]=T}else f[E.r]=T}}}}le.length>0&&(f["!rows"]=le)}})();function eLe(e,t){var n={},a=e.l+t;n.r=e.read_shift(4),e.l+=4;var r=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=a,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=r/20),n}var tLe=JA;function nLe(){}function aLe(e,t){var n={},a=e[e.l];return++e.l,n.above=!(a&64),n.left=!(a&128),e.l+=18,n.name=SDe(e),n}function rLe(e){var t=vl(e);return[t]}function sLe(e){var t=XA(e);return[t]}function oLe(e){var t=vl(e),n=e.read_shift(1);return[t,n,"b"]}function iLe(e){var t=XA(e),n=e.read_shift(1);return[t,n,"b"]}function lLe(e){var t=vl(e),n=e.read_shift(1);return[t,n,"e"]}function uLe(e){var t=XA(e),n=e.read_shift(1);return[t,n,"e"]}function cLe(e){var t=vl(e),n=e.read_shift(4);return[t,n,"s"]}function dLe(e){var t=XA(e),n=e.read_shift(4);return[t,n,"s"]}function fLe(e){var t=vl(e),n=wo(e);return[t,n,"n"]}function b9(e){var t=XA(e),n=wo(e);return[t,n,"n"]}function ALe(e){var t=vl(e),n=KT(e);return[t,n,"n"]}function mLe(e){var t=XA(e),n=KT(e);return[t,n,"n"]}function vLe(e){var t=vl(e),n=zT(e);return[t,n,"is"]}function hLe(e){var t=vl(e),n=Bo(e);return[t,n,"str"]}function pLe(e){var t=XA(e),n=Bo(e);return[t,n,"str"]}function gLe(e,t,n){var a=e.l+t,r=vl(e);r.r=n["!row"];var s=e.read_shift(1),o=[r,s,"b"];if(n.cellFormula){e.l+=2;var l=Yw(e,a-e.l,n);o[3]=vo(l,null,r,n.supbooks,n)}else e.l=a;return o}function yLe(e,t,n){var a=e.l+t,r=vl(e);r.r=n["!row"];var s=e.read_shift(1),o=[r,s,"e"];if(n.cellFormula){e.l+=2;var l=Yw(e,a-e.l,n);o[3]=vo(l,null,r,n.supbooks,n)}else e.l=a;return o}function _Le(e,t,n){var a=e.l+t,r=vl(e);r.r=n["!row"];var s=wo(e),o=[r,s,"n"];if(n.cellFormula){e.l+=2;var l=Yw(e,a-e.l,n);o[3]=vo(l,null,r,n.supbooks,n)}else e.l=a;return o}function wLe(e,t,n){var a=e.l+t,r=vl(e);r.r=n["!row"];var s=Bo(e),o=[r,s,"str"];if(n.cellFormula){e.l+=2;var l=Yw(e,a-e.l,n);o[3]=vo(l,null,r,n.supbooks,n)}else e.l=a;return o}var bLe=JA;function xLe(e,t){var n=e.l+t,a=JA(e),r=WT(e),s=Bo(e),o=Bo(e),l=Bo(e);e.l=n;var c={rfx:a,relId:r,loc:s,display:l};return o&&(c.Tooltip=o),c}function CLe(){}function SLe(e,t,n){var a=e.l+t,r=M$(e),s=e.read_shift(1),o=[r];if(o[2]=s,n.cellFormula){var l=IVe(e,a-e.l,n);o[1]=l}else e.l=a;return o}function ELe(e,t,n){var a=e.l+t,r=JA(e),s=[r];if(n.cellFormula){var o=PVe(e,a-e.l,n);s[1]=o,e.l=a}else e.l=a;return s}var kLe=["left","right","top","bottom","header","footer"];function BLe(e){var t={};return kLe.forEach(function(n){t[n]=wo(e)}),t}function TLe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function ILe(){}function FLe(){}function PLe(e,t,n,a,r,s,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},f,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},A=!1,m=!1,p,h,y,g,_,b,S,B,F,T=[];l.biff=12,l["!row"]=0;var E=0,x=!1,C=[],D={},U=l.supbooks||r.supbooks||[[]];if(U.sharedf=D,U.arrayf=C,U.SheetNames=r.SheetNames||r.Sheets.map(function(ce){return ce.name}),!l.supbooks&&(l.supbooks=U,r.Names))for(var L=0;L<r.Names.length;++L)U[0][L+1]=r.Names[L];var H=[],oe=[],de=!1;T2[16]={n:"BrtShortReal",f:b9};var te;if(Xc(e,function(le,Z,ne){if(!m)switch(ne){case 148:f=le;break;case 0:p=le,l.sheetRows&&l.sheetRows<=p.r&&(m=!0),B=ro(g=p.r),l["!row"]=p.r,(le.hidden||le.hpt||le.level!=null)&&(le.hpt&&(le.hpx=eg(le.hpt)),oe[le.r]=le);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(h={t:le[2]},le[2]){case"n":h.v=le[1];break;case"s":S=v0[le[1]],h.v=S.t,h.r=S.r;break;case"b":h.v=!!le[1];break;case"e":h.v=le[1],l.cellText!==!1&&(h.w=ZA[h.v]);break;case"str":h.t="s",h.v=le[1];break;case"is":h.t="s",h.v=le[1].t;break}if((y=o.CellXf[le[0].iStyleRef])&&_9(h,y.numFmtId,null,l,s,o),_=le[0].c==-1?_+1:le[0].c,l.dense?(c[g]||(c[g]=[]),c[g][_]=h):c[Es(_)+B]=h,l.cellFormula){for(x=!1,E=0;E<C.length;++E){var G=C[E];p.r>=G[0].s.r&&p.r<=G[0].e.r&&_>=G[0].s.c&&_<=G[0].e.c&&(h.F=Pa(G[0]),x=!0)}!x&&le.length>3&&(h.f=le[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>_&&(d.s.c=_),d.e.r<p.r&&(d.e.r=p.r),d.e.c<_&&(d.e.c=_),l.cellDates&&y&&h.t=="n"&&kh(sa[y.numFmtId])){var W=Jf(h.v);W&&(h.t="d",h.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}te&&(te.type=="XLDAPR"&&(h.D=!0),te=void 0);break;case 1:case 12:if(!l.sheetStubs||A)break;h={t:"z",v:void 0},_=le[0].c==-1?_+1:le[0].c,l.dense?(c[g]||(c[g]=[]),c[g][_]=h):c[Es(_)+B]=h,d.s.r>p.r&&(d.s.r=p.r),d.s.c>_&&(d.s.c=_),d.e.r<p.r&&(d.e.r=p.r),d.e.c<_&&(d.e.c=_),te&&(te.type=="XLDAPR"&&(h.D=!0),te=void 0);break;case 176:T.push(le);break;case 49:te=((l.xlmeta||{}).Cell||[])[le-1];break;case 494:var Q=a["!id"][le.relId];for(Q?(le.Target=Q.Target,le.loc&&(le.Target+="#"+le.loc),le.Rel=Q):le.relId==""&&(le.Target="#"+le.loc),g=le.rfx.s.r;g<=le.rfx.e.r;++g)for(_=le.rfx.s.c;_<=le.rfx.e.c;++_)l.dense?(c[g]||(c[g]=[]),c[g][_]||(c[g][_]={t:"z",v:void 0}),c[g][_].l=le):(b=Jn({c:_,r:g}),c[b]||(c[b]={t:"z",v:void 0}),c[b].l=le);break;case 426:if(!l.cellFormula)break;C.push(le),F=l.dense?c[g][_]:c[Es(_)+B],F.f=vo(le[1],d,{r:p.r,c:_},U,l),F.F=Pa(le[0]);break;case 427:if(!l.cellFormula)break;D[Jn(le[0].s)]=le[1],F=l.dense?c[g][_]:c[Es(_)+B],F.f=vo(le[1],d,{r:p.r,c:_},U,l);break;case 60:if(!l.cellStyles)break;for(;le.e>=le.s;)H[le.e--]={width:le.w/256,hidden:!!(le.flags&1),level:le.level},de||(de=!0,XT(le.w/256)),eh(H[le.e+1]);break;case 161:c["!autofilter"]={ref:Pa(le)};break;case 476:c["!margins"]=le;break;case 147:r.Sheets[n]||(r.Sheets[n]={}),le.name&&(r.Sheets[n].CodeName=le.name),(le.above||le.left)&&(c["!outline"]={above:le.above,left:le.left});break;case 137:r.Views||(r.Views=[{}]),r.Views[0]||(r.Views[0]={}),le.RTL&&(r.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:A=!0;break;case 36:A=!1;break;case 37:A=!0;break;case 38:A=!1;break;default:if(!Z.T){if(!A||l.WTF)throw new Error("Unexpected record 0x"+ne.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||f&&(f.e.r>0||f.e.c>0||f.s.r>0||f.s.c>0))&&(c["!ref"]=Pa(f||d)),l.sheetRows&&c["!ref"]){var q=Hr(c["!ref"]);l.sheetRows<=+q.e.r&&(q.e.r=l.sheetRows-1,q.e.r>d.e.r&&(q.e.r=d.e.r),q.e.r<q.s.r&&(q.s.r=q.e.r),q.e.c>d.e.c&&(q.e.c=d.e.c),q.e.c<q.s.c&&(q.s.c=q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Pa(q))}return T.length>0&&(c["!merges"]=T),H.length>0&&(c["!cols"]=H),oe.length>0&&(c["!rows"]=oe),c}function DLe(e){var t=[],n=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=n?+o[2]:o[2])});var r=Va((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){a=s.replace(/<.*?>/g,"")}),[t,r,a]}function ULe(e,t,n,a,r,s){var o=s||{"!type":"chart"};if(!e)return s;var l=0,c=0,f="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(A){var m=DLe(A);d.s.r=d.s.c=0,d.e.c=l,f=Es(l),m[0].forEach(function(p,h){o[f+ro(h)]={t:"n",v:p,z:m[1]},c=h}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=Pa(d)),o}function RLe(e,t,n,a,r){if(!e)return e;a||(a={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(w9);return l&&ZT(l[0],s,r,n),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),a["!id"][s["!rel"]]&&(s["!drawel"]=a["!id"][s["!rel"]]),s}function NLe(e,t){e.l+=10;var n=Bo(e);return{name:n}}function VLe(e,t,n,a,r){if(!e)return e;a||(a={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Xc(e,function(c,f,d){switch(d){case 550:s["!rel"]=c;break;case 651:r.Sheets[n]||(r.Sheets[n]={}),c.name&&(r.Sheets[n].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(f.T>0)){if(!(f.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),a["!id"][s["!rel"]]&&(s["!drawel"]=a["!id"][s["!rel"]]),s}var x9=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],LLe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],MLe=[],OLe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function dN(e,t){for(var n=0;n!=e.length;++n)for(var a=e[n],r=0;r!=t.length;++r){var s=t[r];if(a[s[0]]==null)a[s[0]]=s[1];else switch(s[2]){case"bool":typeof a[s[0]]=="string"&&(a[s[0]]=Dr(a[s[0]]));break;case"int":typeof a[s[0]]=="string"&&(a[s[0]]=parseInt(a[s[0]],10));break}}}function fN(e,t){for(var n=0;n!=t.length;++n){var a=t[n];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=Dr(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function C9(e){fN(e.WBProps,x9),fN(e.CalcPr,OLe),dN(e.WBView,LLe),dN(e.Sheets,MLe),Tv.date1904=Dr(e.WBProps.date1904)}var HLe="][*?/\\".split("");function $Le(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return HLe.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}var QLe=/<\w+:workbook/;function GLe(e,t){if(!e)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,r="xmlns",s={},o=0;if(e.replace(Do,function(c,f){var d=zn(c);switch(qu(d[0])){case"<?xml":break;case"<workbook":c.match(QLe)&&(r="xmlns"+c.match(/<(\w+):/)[1]),n.xmlns=d[r];break;case"</workbook>":break;case"<fileVersion":delete d[0],n.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":x9.forEach(function(A){if(d[A[0]]!=null)switch(A[2]){case"bool":n.WBProps[A[0]]=Dr(d[A[0]]);break;case"int":n.WBProps[A[0]]=parseInt(d[A[0]],10);break;default:n.WBProps[A[0]]=d[A[0]]}}),d.codeName&&(n.WBProps.CodeName=gr(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],n.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Va(gr(d.name)),delete d[0],n.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":s={},s.Name=gr(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Dr(d.hidden||"0")&&(s.Hidden=!0),o=f+c.length;break;case"</definedName>":s.Ref=Va(gr(e.slice(o,f))),n.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],n.CalcPr=d;break;case"<calcPr/>":delete d[0],n.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),lDe.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return C9(n),n}function zLe(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=HE(e),n.name=Bo(e),n}function WLe(e,t){var n={},a=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var r=t>8?Bo(e):"";return r.length>0&&(n.CodeName=r),n.autoCompressPictures=!!(a&65536),n.backupFile=!!(a&64),n.checkCompatibility=!!(a&4096),n.date1904=!!(a&1),n.filterPrivacy=!!(a&8),n.hidePivotFieldList=!!(a&1024),n.promptedSolutions=!!(a&16),n.publishItems=!!(a&2048),n.refreshAllConnections=!!(a&262144),n.saveExternalLinkValues=!!(a&128),n.showBorderUnselectedTables=!!(a&4),n.showInkAnnotation=!!(a&32),n.showObjects=["all","placeholders","none"][a>>13&3],n.showPivotChartFilter=!!(a&32768),n.updateLinks=["userSet","never","always"][a>>8&3],n}function KLe(e,t){var n={};return e.read_shift(4),n.ArchID=e.read_shift(4),e.l+=t-8,n}function jLe(e,t,n){var a=e.l+t;e.l+=4,e.l+=1;var r=e.read_shift(4),s=EDe(e),o=FVe(e,0,n),l=WT(e);e.l=a;var c={Name:s,Ptg:o};return r<268435455&&(c.Sheet=r),l&&(c.Comment=l),c}function qLe(e,t){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],r=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],T2[16]={n:"BrtFRTArchID$",f:KLe},Xc(e,function(c,f,d){switch(d){case 156:o.SheetNames.push(c.name),n.Sheets.push(c);break;case 153:n.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=vo(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(d),r=!0;break;case 36:a.pop(),r=!1;break;case 37:a.push(d),r=!0;break;case 38:a.pop(),r=!1;break;case 16:break;default:if(!f.T){if(!r||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),C9(n),n.Names=s,n.supbooks=o,n}function YLe(e,t,n){return t.slice(-4)===".bin"?qLe(e,n):GLe(e,n)}function XLe(e,t,n,a,r,s,o,l){return t.slice(-4)===".bin"?PLe(e,a,n,r,s,o,l):zVe(e,a,n,r,s,o,l)}function JLe(e,t,n,a,r,s,o,l){return t.slice(-4)===".bin"?VLe(e,a,n,r,s):RLe(e,a,n,r,s)}function ZLe(e,t,n,a,r,s,o,l){return t.slice(-4)===".bin"?iNe():lNe()}function e8e(e,t,n,a,r,s,o,l){return t.slice(-4)===".bin"?sNe():oNe()}function t8e(e,t,n,a){return t.slice(-4)===".bin"?bRe(e,n,a):hRe(e,n,a)}function n8e(e,t,n){return c9(e,n)}function a8e(e,t,n){return t.slice(-4)===".bin"?LUe(e,n):NUe(e,n)}function r8e(e,t,n){return t.slice(-4)===".bin"?nNe(e,n):XRe(e,n)}function s8e(e,t,n){return t.slice(-4)===".bin"?jRe(e):WRe(e)}function o8e(e,t,n,a){return n.slice(-4)===".bin"?qRe(e,t,n,a):void 0}function i8e(e,t,n){return t.slice(-4)===".bin"?GRe(e,t,n):zRe(e,t,n)}var S9=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,E9=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function xl(e,t){var n=e.split(/\s+/),a=[];if(a[0]=n[0],n.length===1)return a;var r=e.match(S9),s,o,l,c;if(r)for(c=0;c!=r.length;++c)s=r[c].match(E9),(o=s[1].indexOf(":"))===-1?a[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),a[l]=s[2].slice(1,s[2].length-1));return a}function l8e(e){var t=e.split(/\s+/),n={};if(t.length===1)return n;var a=e.match(S9),r,s,o,l;if(a)for(l=0;l!=a.length;++l)r=a[l].match(E9),(s=r[1].indexOf(":"))===-1?n[r[1]]=r[2].slice(1,r[2].length-1):(r[1].slice(0,6)==="xmlns:"?o="xmlns"+r[1].slice(6):o=r[1].slice(s+1),n[o]=r[2].slice(1,r[2].length-1));return n}var p0;function u8e(e,t){var n=p0[e]||Va(e);return n==="General"?SA(t):ul(n,t)}function c8e(e,t,n,a){var r=a;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":r=Dr(a);break;case"i2":case"int":r=parseInt(a,10);break;case"r4":case"float":r=parseFloat(a);break;case"date":case"dateTime.tz":r=Hs(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}e[Va(t)]=r}function d8e(e,t,n){if(e.t!=="z"){if(!n||n.cellText!==!1)try{e.t==="e"?e.w=e.w||ZA[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=q0(e.v):e.w=SA(e.v):e.w=u8e(t||"General",e.v)}catch(s){if(n.WTF)throw s}try{var a=p0[t]||t||"General";if(n.cellNF&&(e.z=a),n.cellDates&&e.t=="n"&&kh(a)){var r=Jf(e.v);r&&(e.t="d",e.v=new Date(r.y,r.m-1,r.d,r.H,r.M,r.S,r.u))}}catch(s){if(n.WTF)throw s}}}function f8e(e,t,n){if(n.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=cRe[a.Pattern]||a.Pattern)}e[t.ID]=t}function A8e(e,t,n,a,r,s,o,l,c,f){var d="General",A=a.StyleID,m={};f=f||{};var p=[],h=0;for(A===void 0&&l&&(A=l.StyleID),A===void 0&&o&&(A=o.StyleID);s[A]!==void 0&&(s[A].nf&&(d=s[A].nf),s[A].Interior&&p.push(s[A].Interior),!!s[A].Parent);)A=s[A].Parent;switch(n.Type){case"Boolean":a.t="b",a.v=Dr(e);break;case"String":a.t="s",a.r=UR(Va(e)),a.v=e.indexOf("<")>-1?Va(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(Hs(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=Va(e):a.v<60&&(a.v=a.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=$$[e],f.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=UR(t||e));break}if(d8e(a,d,f),f.cellFormula!==!1)if(a.Formula){var y=Va(a.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),a.f=Bv(y,r),delete a.Formula,a.ArrayRange=="RC"?a.F=Bv("RC:RC",r):a.ArrayRange&&(a.F=Bv(a.ArrayRange,r),c.push([Hr(a.F),a.F]))}else for(h=0;h<c.length;++h)r.r>=c[h][0].s.r&&r.r<=c[h][0].e.r&&r.c>=c[h][0].s.c&&r.c<=c[h][0].e.c&&(a.F=c[h][1]);f.cellStyles&&(p.forEach(function(g){!m.patternType&&g.patternType&&(m.patternType=g.patternType)}),a.s=m),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function m8e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function $C(e,t){var n=t||{};m$();var a=Mp(HT(e));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(a=gr(a));var r=a.slice(0,1024).toLowerCase(),s=!1;if(r=r.replace(/".*?"/g,""),(r.indexOf(">")&1023)>Math.min(r.indexOf(",")&1023,r.indexOf(";")&1023)){var o=ao(n);return o.type="string",J0.to_workbook(a,o)}if(r.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Qe){r.indexOf("<"+Qe)>=0&&(s=!0)}),s)return x8e(a,n);p0={"General Number":"General","General Date":sa[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":sa[15],"Short Date":sa[14],"Long Time":sa[19],"Medium Time":sa[18],"Short Time":sa[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:sa[2],Standard:sa[4],Percent:sa[10],Scientific:sa[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],f,d={},A=[],m=n.dense?[]:{},p="",h={},y={},g=xl('<Data ss:Type="String">'),_=0,b=0,S=0,B={s:{r:2e6,c:2e6},e:{r:0,c:0}},F={},T={},E="",x=0,C=[],D={},U={},L=0,H=[],oe=[],de={},te=[],q,ce=!1,le=[],Z=[],ne={},G=0,W=0,Q={Sheets:[],WBProps:{date1904:!1}},O={};X0.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var ae="";l=X0.exec(a);)switch(l[3]=(ae=l[3]).toLowerCase()){case"data":if(ae=="data"){if(l[1]==="/"){if((f=c.pop())[0]!==l[3])throw new Error("Bad state: "+f.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?A8e(a.slice(_,l.index),E,g,c[c.length-1][0]=="comment"?de:h,{c:b,r:S},F,te[b],y,le,n):(E="",g=xl(l[0]),_=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(oe.length>0&&(h.c=oe),(!n.sheetRows||n.sheetRows>S)&&h.v!==void 0&&(n.dense?(m[S]||(m[S]=[]),m[S][b]=h):m[Es(b)+ro(S)]=h),h.HRef&&(h.l={Target:Va(h.HRef)},h.HRefScreenTip&&(h.l.Tooltip=h.HRefScreenTip),delete h.HRef,delete h.HRefScreenTip),(h.MergeAcross||h.MergeDown)&&(G=b+(parseInt(h.MergeAcross,10)|0),W=S+(parseInt(h.MergeDown,10)|0),C.push({s:{c:b,r:S},e:{c:G,r:W}})),!n.sheetStubs)h.MergeAcross?b=G+1:++b;else if(h.MergeAcross||h.MergeDown){for(var j=b;j<=G;++j)for(var J=S;J<=W;++J)(j>b||J>S)&&(n.dense?(m[J]||(m[J]=[]),m[J][j]={t:"z"}):m[Es(j)+ro(J)]={t:"z"});b=G+1}else++b;else h=l8e(l[0]),h.Index&&(b=+h.Index-1),b<B.s.c&&(B.s.c=b),b>B.e.c&&(B.e.c=b),l[0].slice(-2)==="/>"&&++b,oe=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(S<B.s.r&&(B.s.r=S),S>B.e.r&&(B.e.r=S),l[0].slice(-2)==="/>"&&(y=xl(l[0]),y.Index&&(S=+y.Index-1)),b=0,++S):(y=xl(l[0]),y.Index&&(S=+y.Index-1),ne={},(y.AutoFitHeight=="0"||y.Height)&&(ne.hpx=parseInt(y.Height,10),ne.hpt=u9(ne.hpx),Z[S]=ne),y.Hidden=="1"&&(ne.hidden=!0,Z[S]=ne));break;case"worksheet":if(l[1]==="/"){if((f=c.pop())[0]!==l[3])throw new Error("Bad state: "+f.join("|"));A.push(p),B.s.r<=B.e.r&&B.s.c<=B.e.c&&(m["!ref"]=Pa(B),n.sheetRows&&n.sheetRows<=B.e.r&&(m["!fullref"]=m["!ref"],B.e.r=n.sheetRows-1,m["!ref"]=Pa(B))),C.length&&(m["!merges"]=C),te.length>0&&(m["!cols"]=te),Z.length>0&&(m["!rows"]=Z),d[p]=m}else B={s:{r:2e6,c:2e6},e:{r:0,c:0}},S=b=0,c.push([l[3],!1]),f=xl(l[0]),p=Va(f.Name),m=n.dense?[]:{},C=[],le=[],Z=[],O={name:p,Hidden:0},Q.Sheets.push(O);break;case"table":if(l[1]==="/"){if((f=c.pop())[0]!==l[3])throw new Error("Bad state: "+f.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),te=[],ce=!1}break;case"style":l[1]==="/"?f8e(F,T,n):T=xl(l[0]);break;case"numberformat":T.nf=Va(xl(l[0]).Format||"General"),p0[T.nf]&&(T.nf=p0[T.nf]);for(var ie=0;ie!=392&&sa[ie]!=T.nf;++ie);if(ie==392){for(ie=57;ie!=392;++ie)if(sa[ie]==null){cA(T.nf,ie);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(q=xl(l[0]),q.Hidden&&(q.hidden=!0,delete q.Hidden),q.Width&&(q.wpx=parseInt(q.Width,10)),!ce&&q.wpx>10){ce=!0,$o=i9;for(var X=0;X<te.length;++X)te[X]&&eh(te[X])}ce&&eh(q),te[q.Index-1||te.length]=q;for(var fe=0;fe<+q.Span;++fe)te[te.length]=ao(q);break;case"namedrange":if(l[1]==="/")break;Q.Names||(Q.Names=[]);var M=zn(l[0]),z={Name:M.Name,Ref:Bv(M.RefersTo.slice(1),{r:0,c:0})};Q.Sheets.length>0&&(z.Sheet=Q.Sheets.length-1),Q.Names.push(z);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=a.slice(x,l.index):x=l.index+l[0].length;break;case"interior":if(!n.cellStyles)break;T.Interior=xl(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?XDe(D,ae,a.slice(L,l.index)):L=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((f=c.pop())[0]!==l[3])throw new Error("Bad state: "+f.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((f=c.pop())[0]!==l[3])throw new Error("Bad state: "+f.join("|"));m8e(de),oe.push(de)}else c.push([l[3],!1]),f=xl(l[0]),de={a:f.Author};break;case"autofilter":if(l[1]==="/"){if((f=c.pop())[0]!==l[3])throw new Error("Bad state: "+f.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var se=xl(l[0]);m["!autofilter"]={ref:Bv(se.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((f=c.pop())[0]!==l[3])throw new Error("Bad state: "+f.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((f=c.pop())[0]!==l[3])throw new Error("Bad state: "+f.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return gN(a,n);var be=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:be=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:be=!1}break;case"excelworkbook":switch(l[3]){case"date1904":Q.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:be=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:be=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(L,l.index)){case"SheetHidden":O.Hidden=1;break;case"SheetVeryHidden":O.Hidden=2;break}else L=l.index+l[0].length;break;case"header":m["!margins"]||h0(m["!margins"]={},"xlml"),isNaN(+zn(l[0]).Margin)||(m["!margins"].header=+zn(l[0]).Margin);break;case"footer":m["!margins"]||h0(m["!margins"]={},"xlml"),isNaN(+zn(l[0]).Margin)||(m["!margins"].footer=+zn(l[0]).Margin);break;case"pagemargins":var Fe=zn(l[0]);m["!margins"]||h0(m["!margins"]={},"xlml"),isNaN(+Fe.Top)||(m["!margins"].top=+Fe.Top),isNaN(+Fe.Left)||(m["!margins"].left=+Fe.Left),isNaN(+Fe.Right)||(m["!margins"].right=+Fe.Right),isNaN(+Fe.Bottom)||(m["!margins"].bottom=+Fe.Bottom);break;case"displayrighttoleft":Q.Views||(Q.Views=[]),Q.Views[0]||(Q.Views[0]={}),Q.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:be=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:be=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:be=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:be=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:be=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:be=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:be=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:be=!1}break;case"smarttags":break;default:be=!1;break}if(be||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?c8e(U,ae,H,a.slice(L,l.index)):(H=l,L=l.index+l[0].length);break}if(n.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ye={};return!n.bookSheets&&!n.bookProps&&(ye.Sheets=d),ye.SheetNames=A,ye.Workbook=Q,ye.SSF=ao(sa),ye.Props=D,ye.Custprops=U,ye}function zE(e,t){switch(n4(t=t||{}),t.type||"base64"){case"base64":return $C(Ui(e),t);case"binary":case"buffer":case"file":return $C(e,t);case"array":return $C(YA(e),t)}}function v8e(e){var t={},n=e.content;if(n.l=28,t.AnsiUserType=n.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=TDe(n),n.length-n.l<=4)return t;var a=n.read_shift(4);if(a==0||a>40||(n.l-=4,t.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(a=n.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=IDe(n),a=n.read_shift(4),a==0||a>40))return t;n.l-=4,t.Reserved2=n.read_shift(0,"lpwstr")}var h8e=[60,1084,2066,2165,2175];function p8e(e,t,n,a,r){var s=a,o=[],l=n.slice(n.l,n.l+s);if(r&&r.enc&&r.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:r.enc.insitu(l)}o.push(l),n.l+=s;for(var c=Bc(n,n.l),f=WE[c],d=0;f!=null&&h8e.indexOf(c)>-1;)s=Bc(n,n.l+2),d=n.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=n.slice(d,n.l+4+s),o.push(l),n.l+=4+s,f=WE[c=Bc(n,n.l)];var A=Id(o);Ys(A,0);var m=0;A.lens=[];for(var p=0;p<o.length;++p)A.lens.push(m),m+=o[p].length;if(A.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+A.length+" < "+a;return t.f(A,A.length,r)}function yu(e,t,n){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=sa[a])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||ZA[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=q0(e.v):e.w=SA(e.v):e.w=ul(a,e.v,{date1904:!!n,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&a&&e.t=="n"&&kh(sa[a]||String(a))){var r=Jf(e.v);r&&(e.t="d",e.v=new Date(r.y,r.m-1,r.d,r.H,r.M,r.S,r.u))}}}function Oy(e,t,n){return{v:e,ixfe:t,t:n}}function g8e(e,t){var n={opts:{}},a={},r=t.dense?[]:{},s={},o={},l=null,c=[],f="",d={},A,m="",p,h,y,g,_={},b=[],S,B,F=[],T=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},x={},C=function(xt){return xt<8?dA[xt]:xt<64&&T[xt-8]||dA[xt]},D=function(xt,Nt,At){var Ot=Nt.XF.data;if(!(!Ot||!Ot.patternType||!At||!At.cellStyles)){Nt.s={},Nt.s.patternType=Ot.patternType;var Dt;(Dt=Z0(C(Ot.icvFore)))&&(Nt.s.fgColor={rgb:Dt}),(Dt=Z0(C(Ot.icvBack)))&&(Nt.s.bgColor={rgb:Dt})}},U=function(xt,Nt,At){if(!(ne>1)&&!(At.sheetRows&&xt.r>=At.sheetRows)){if(At.cellStyles&&Nt.XF&&Nt.XF.data&&D(xt,Nt,At),delete Nt.ixfe,delete Nt.XF,A=xt,m=Jn(xt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),xt.r<o.s.r&&(o.s.r=xt.r),xt.c<o.s.c&&(o.s.c=xt.c),xt.r+1>o.e.r&&(o.e.r=xt.r+1),xt.c+1>o.e.c&&(o.e.c=xt.c+1),At.cellFormula&&Nt.f){for(var Ot=0;Ot<b.length;++Ot)if(!(b[Ot][0].s.c>xt.c||b[Ot][0].s.r>xt.r)&&!(b[Ot][0].e.c<xt.c||b[Ot][0].e.r<xt.r)){Nt.F=Pa(b[Ot][0]),(b[Ot][0].s.c!=xt.c||b[Ot][0].s.r!=xt.r)&&delete Nt.f,Nt.f&&(Nt.f=""+vo(b[Ot][1],o,xt,le,L));break}}At.dense?(r[xt.r]||(r[xt.r]=[]),r[xt.r][xt.c]=Nt):r[m]=Nt}},L={enc:!1,sbcch:0,snames:[],sharedf:_,arrayf:b,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(L.password=t.password);var H,oe=[],de=[],te=[],q=[],ce=!1,le=[];le.SheetNames=L.snames,le.sharedf=L.sharedf,le.arrayf=L.arrayf,le.names=[],le.XTI=[];var Z=0,ne=0,G=0,W=[],Q=[],O;L.codepage=1200,Rl(1200);for(var ae=!1;e.l<e.length-1;){var j=e.l,J=e.read_shift(2);if(J===0&&Z===10)break;var ie=e.l===e.length?0:e.read_shift(2),X=WE[J];if(X&&X.f){if(t.bookSheets&&Z===133&&J!==133)break;if(Z=J,X.r===2||X.r==12){var fe=e.read_shift(2);if(ie-=2,!L.enc&&fe!==J&&((fe&255)<<8|fe>>8)!==J)throw new Error("rt mismatch: "+fe+"!="+J);X.r==12&&(e.l+=10,ie-=10)}var M={};if(J===10?M=X.f(e,ie,L):M=p8e(J,X,e,ie,L),ne==0&&[9,521,1033,2057].indexOf(Z)===-1)continue;switch(J){case 34:n.opts.Date1904=E.WBProps.date1904=M;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(L.enc||(e.l=0),L.enc=M,!t.password)throw new Error("File is password-protected");if(M.valid==null)throw new Error("Encryption scheme unsupported");if(!M.valid)throw new Error("Password is incorrect");break;case 92:L.lastuser=M;break;case 66:var z=Number(M);switch(z){case 21010:z=1200;break;case 32768:z=1e4;break;case 32769:z=1252;break}Rl(L.codepage=z),ae=!0;break;case 317:L.rrtabid=M;break;case 25:L.winlocked=M;break;case 439:n.opts.RefreshAll=M;break;case 12:n.opts.CalcCount=M;break;case 16:n.opts.CalcDelta=M;break;case 17:n.opts.CalcIter=M;break;case 13:n.opts.CalcMode=M;break;case 14:n.opts.CalcPrecision=M;break;case 95:n.opts.CalcSaveRecalc=M;break;case 15:L.CalcRefMode=M;break;case 2211:n.opts.FullCalc=M;break;case 129:M.fDialog&&(r["!type"]="dialog"),M.fBelow||((r["!outline"]||(r["!outline"]={})).above=!0),M.fRight||((r["!outline"]||(r["!outline"]={})).left=!0);break;case 224:F.push(M);break;case 430:le.push([M]),le[le.length-1].XTI=[];break;case 35:case 547:le[le.length-1].push(M);break;case 24:case 536:O={Name:M.Name,Ref:vo(M.rgce,o,null,le,L)},M.itab>0&&(O.Sheet=M.itab-1),le.names.push(O),le[0]||(le[0]=[],le[0].XTI=[]),le[le.length-1].push(M),M.Name=="_xlnm._FilterDatabase"&&M.itab>0&&M.rgce&&M.rgce[0]&&M.rgce[0][0]&&M.rgce[0][0][0]=="PtgArea3d"&&(Q[M.itab-1]={ref:Pa(M.rgce[0][0][1][2])});break;case 22:L.ExternCount=M;break;case 23:le.length==0&&(le[0]=[],le[0].XTI=[]),le[le.length-1].XTI=le[le.length-1].XTI.concat(M),le.XTI=le.XTI.concat(M);break;case 2196:if(L.biff<8)break;O!=null&&(O.Comment=M[1]);break;case 18:r["!protect"]=M;break;case 19:M!==0&&L.WTF&&console.error("Password verifier: "+M);break;case 133:s[M.pos]=M,L.snames.push(M.name);break;case 10:{if(--ne)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,r["!ref"]=Pa(o),t.sheetRows&&t.sheetRows<=o.e.r){var se=o.e.r;o.e.r=t.sheetRows-1,r["!fullref"]=r["!ref"],r["!ref"]=Pa(o),o.e.r=se}o.e.r++,o.e.c++}oe.length>0&&(r["!merges"]=oe),de.length>0&&(r["!objects"]=de),te.length>0&&(r["!cols"]=te),q.length>0&&(r["!rows"]=q),E.Sheets.push(x)}f===""?d=r:a[f]=r,r=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(L.biff===8&&(L.biff={9:2,521:3,1033:4}[J]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[M.BIFFVer]||8),L.biffguess=M.BIFFVer==0,M.BIFFVer==0&&M.dt==4096&&(L.biff=5,ae=!0,Rl(L.codepage=28591)),L.biff==8&&M.BIFFVer==0&&M.dt==16&&(L.biff=2),ne++)break;if(r=t.dense?[]:{},L.biff<8&&!ae&&(ae=!0,Rl(L.codepage=t.codepage||1252)),L.biff<5||M.BIFFVer==0&&M.dt==4096){f===""&&(f="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var be={pos:e.l-ie,name:f};s[be.pos]=be,L.snames.push(f)}else f=(s[j]||{name:""}).name;M.dt==32&&(r["!type"]="chart"),M.dt==64&&(r["!type"]="macro"),oe=[],de=[],L.arrayf=b=[],te=[],q=[],ce=!1,x={Hidden:(s[j]||{hs:0}).hs,name:f}}break;case 515:case 3:case 2:r["!type"]=="chart"&&(t.dense?(r[M.r]||[])[M.c]:r[Jn({c:M.c,r:M.r})])&&++M.c,S={ixfe:M.ixfe,XF:F[M.ixfe]||{},v:M.val,t:"n"},G>0&&(S.z=W[S.ixfe>>8&63]),yu(S,t,n.opts.Date1904),U({c:M.c,r:M.r},S,t);break;case 5:case 517:S={ixfe:M.ixfe,XF:F[M.ixfe],v:M.val,t:M.t},G>0&&(S.z=W[S.ixfe>>8&63]),yu(S,t,n.opts.Date1904),U({c:M.c,r:M.r},S,t);break;case 638:S={ixfe:M.ixfe,XF:F[M.ixfe],v:M.rknum,t:"n"},G>0&&(S.z=W[S.ixfe>>8&63]),yu(S,t,n.opts.Date1904),U({c:M.c,r:M.r},S,t);break;case 189:for(var Fe=M.c;Fe<=M.C;++Fe){var ye=M.rkrec[Fe-M.c][0];S={ixfe:ye,XF:F[ye],v:M.rkrec[Fe-M.c][1],t:"n"},G>0&&(S.z=W[S.ixfe>>8&63]),yu(S,t,n.opts.Date1904),U({c:Fe,r:M.r},S,t)}break;case 6:case 518:case 1030:{if(M.val=="String"){l=M;break}if(S=Oy(M.val,M.cell.ixfe,M.tt),S.XF=F[S.ixfe],t.cellFormula){var Qe=M.formula;if(Qe&&Qe[0]&&Qe[0][0]&&Qe[0][0][0]=="PtgExp"){var _e=Qe[0][0][1][0],Se=Qe[0][0][1][1],Ee=Jn({r:_e,c:Se});_[Ee]?S.f=""+vo(M.formula,o,M.cell,le,L):S.F=((t.dense?(r[_e]||[])[Se]:r[Ee])||{}).F}else S.f=""+vo(M.formula,o,M.cell,le,L)}G>0&&(S.z=W[S.ixfe>>8&63]),yu(S,t,n.opts.Date1904),U(M.cell,S,t),l=M}break;case 7:case 519:if(l)l.val=M,S=Oy(M,l.cell.ixfe,"s"),S.XF=F[S.ixfe],t.cellFormula&&(S.f=""+vo(l.formula,o,l.cell,le,L)),G>0&&(S.z=W[S.ixfe>>8&63]),yu(S,t,n.opts.Date1904),U(l.cell,S,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{b.push(M);var Ue=Jn(M[0].s);if(p=t.dense?(r[M[0].s.r]||[])[M[0].s.c]:r[Ue],t.cellFormula&&p){if(!l||!Ue||!p)break;p.f=""+vo(M[1],o,M[0],le,L),p.F=Pa(M[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;_[Jn(l.cell)]=M[0],p=t.dense?(r[l.cell.r]||[])[l.cell.c]:r[Jn(l.cell)],(p||{}).f=""+vo(M[0],o,A,le,L)}}break;case 253:S=Oy(c[M.isst].t,M.ixfe,"s"),c[M.isst].h&&(S.h=c[M.isst].h),S.XF=F[S.ixfe],G>0&&(S.z=W[S.ixfe>>8&63]),yu(S,t,n.opts.Date1904),U({c:M.c,r:M.r},S,t);break;case 513:t.sheetStubs&&(S={ixfe:M.ixfe,XF:F[M.ixfe],t:"z"},G>0&&(S.z=W[S.ixfe>>8&63]),yu(S,t,n.opts.Date1904),U({c:M.c,r:M.r},S,t));break;case 190:if(t.sheetStubs)for(var je=M.c;je<=M.C;++je){var at=M.ixfe[je-M.c];S={ixfe:at,XF:F[at],t:"z"},G>0&&(S.z=W[S.ixfe>>8&63]),yu(S,t,n.opts.Date1904),U({c:je,r:M.r},S,t)}break;case 214:case 516:case 4:S=Oy(M.val,M.ixfe,"s"),S.XF=F[S.ixfe],G>0&&(S.z=W[S.ixfe>>8&63]),yu(S,t,n.opts.Date1904),U({c:M.c,r:M.r},S,t);break;case 0:case 512:ne===1&&(o=M);break;case 252:c=M;break;case 1054:if(L.biff==4){W[G++]=M[1];for(var mt=0;mt<G+163&&sa[mt]!=M[1];++mt);mt>=163&&cA(M[1],G+163)}else cA(M[1],M[0]);break;case 30:{W[G++]=M;for(var xe=0;xe<G+163&&sa[xe]!=M;++xe);xe>=163&&cA(M,G+163)}break;case 229:oe=oe.concat(M);break;case 93:de[M.cmo[0]]=L.lastobj=M;break;case 438:L.lastobj.TxO=M;break;case 127:L.lastobj.ImData=M;break;case 440:for(g=M[0].s.r;g<=M[0].e.r;++g)for(y=M[0].s.c;y<=M[0].e.c;++y)p=t.dense?(r[g]||[])[y]:r[Jn({c:y,r:g})],p&&(p.l=M[1]);break;case 2048:for(g=M[0].s.r;g<=M[0].e.r;++g)for(y=M[0].s.c;y<=M[0].e.c;++y)p=t.dense?(r[g]||[])[y]:r[Jn({c:y,r:g})],p&&p.l&&(p.l.Tooltip=M[1]);break;case 28:{if(L.biff<=5&&L.biff>=2)break;p=t.dense?(r[M[0].r]||[])[M[0].c]:r[Jn(M[0])];var Be=de[M[2]];p||(t.dense?(r[M[0].r]||(r[M[0].r]=[]),p=r[M[0].r][M[0].c]={t:"z"}):p=r[Jn(M[0])]={t:"z"},o.e.r=Math.max(o.e.r,M[0].r),o.s.r=Math.min(o.s.r,M[0].r),o.e.c=Math.max(o.e.c,M[0].c),o.s.c=Math.min(o.s.c,M[0].c)),p.c||(p.c=[]),h={a:M[1],t:Be.TxO.t},p.c.push(h)}break;case 2173:ORe(F[M.ixfe],M.ext);break;case 125:{if(!L.cellStyles)break;for(;M.e>=M.s;)te[M.e--]={width:M.w/256,level:M.level||0,hidden:!!(M.flags&1)},ce||(ce=!0,XT(M.w/256)),eh(te[M.e+1])}break;case 520:{var Ye={};M.level!=null&&(q[M.r]=Ye,Ye.level=M.level),M.hidden&&(q[M.r]=Ye,Ye.hidden=!0),M.hpt&&(q[M.r]=Ye,Ye.hpt=M.hpt,Ye.hpx=eg(M.hpt))}break;case 38:case 39:case 40:case 41:r["!margins"]||h0(r["!margins"]={}),r["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[J]]=M;break;case 161:r["!margins"]||h0(r["!margins"]={}),r["!margins"].header=M.header,r["!margins"].footer=M.footer;break;case 574:M.RTL&&(E.Views[0].RTL=!0);break;case 146:T=M;break;case 2198:H=M;break;case 140:B=M;break;case 442:f?x.CodeName=M||x.name:E.WBProps.CodeName=M||"ThisWorkbook";break}}else X||console.error("Missing Info for XLS Record 0x"+J.toString(16)),e.l+=ie}return n.SheetNames=Lu(s).sort(function(kt,xt){return Number(kt)-Number(xt)}).map(function(kt){return s[kt].name}),t.bookSheets||(n.Sheets=a),!n.SheetNames.length&&d["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=d)):n.Preamble=d,n.Sheets&&Q.forEach(function(kt,xt){n.Sheets[n.SheetNames[xt]]["!autofilter"]=kt}),n.Strings=c,n.SSF=ao(sa),L.enc&&(n.Encryption=L.enc),H&&(n.Themes=H),n.Metadata={},B!==void 0&&(n.Metadata.Country=B),le.names.length>0&&(E.Names=le.names),n.Workbook=E,n}var AN={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function y8e(e,t,n){var a=Ta.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var r=YR(a,NDe,AN.DSI);for(var s in r)t[s]=r[s]}catch(f){if(n.WTF)throw f}var o=Ta.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=YR(o,VDe,AN.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(f){if(n.WTF)throw f}t.HeadingPairs&&t.TitlesOfParts&&(G$(t.HeadingPairs,t.TitlesOfParts,t,n),delete t.HeadingPairs,delete t.TitlesOfParts)}function k9(e,t){t||(t={}),n4(t),n$(),t.codepage&&UT(t.codepage);var n,a;if(e.FullPaths){if(Ta.find(e,"/encryption"))throw new Error("File is password-protected");n=Ta.find(e,"!CompObj"),a=Ta.find(e,"/Workbook")||Ta.find(e,"/Book")}else{switch(t.type){case"base64":e=Il(Ui(e));break;case"binary":e=Il(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ys(e,0),a={content:e}}var r,s;if(n&&v8e(n),t.bookProps&&!t.bookSheets)r={};else{var o=xa?"buffer":"array";if(a&&a.content)r=g8e(a.content,t);else if((s=Ta.find(e,"PerfectOffice_MAIN"))&&s.content)r=m0.to_workbook(s.content,(t.type=o,t));else if((s=Ta.find(e,"NativeContent_MAIN"))&&s.content)r=m0.to_workbook(s.content,(t.type=o,t));else throw(s=Ta.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Ta.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(r.vbaraw=rNe(e))}var l={};return e.FullPaths&&y8e(e,l,t),r.Props=r.Custprops=l,t.bookFiles&&(r.cfb=e),r}var T2={0:{f:eLe},1:{f:rLe},2:{f:ALe},3:{f:lLe},4:{f:oLe},5:{f:fLe},6:{f:hLe},7:{f:cLe},8:{f:wLe},9:{f:_Le},10:{f:gLe},11:{f:yLe},12:{f:sLe},13:{f:mLe},14:{f:uLe},15:{f:iLe},16:{f:b9},17:{f:pLe},18:{f:dLe},19:{f:zT},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:jLe},40:{},42:{},43:{f:gRe},44:{f:pRe},45:{f:yRe},46:{f:wRe},47:{f:_Re},48:{},49:{f:bDe},50:{},51:{f:$Re},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:n9},62:{f:vLe},63:{f:KRe},64:{f:ILe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Io,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:TLe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:aLe},148:{f:tLe,p:16},151:{f:CLe},152:{},153:{f:WLe},154:{},155:{},156:{f:zLe},157:{},158:{},159:{T:1,f:VUe},160:{T:-1},161:{T:1,f:JA},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:bLe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:HRe},336:{T:-1},337:{f:QRe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:HE},357:{},358:{},359:{},360:{T:1},361:{},362:{f:t9},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:SLe},427:{f:ELe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:BLe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:nLe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:xLe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:HE},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:tNe},633:{T:1},634:{T:-1},635:{T:1,f:eNe},636:{T:-1},637:{f:CDe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:NLe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:FLe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},WE={6:{f:OC},10:{f:hd},12:{f:ds},13:{f:ds},14:{f:Yr},15:{f:Yr},16:{f:wo},17:{f:Yr},18:{f:Yr},19:{f:ds},20:{f:eN},21:{f:eN},23:{f:t9},24:{f:nN},25:{f:Yr},26:{},27:{},28:{f:J3e},29:{},34:{f:Yr},35:{f:tN},38:{f:wo},39:{f:wo},40:{f:wo},41:{f:wo},42:{f:Yr},43:{f:Yr},47:{f:nRe},49:{f:D3e},51:{f:ds},60:{},61:{f:I3e},64:{f:Yr},65:{f:P3e},66:{f:ds},77:{},80:{},81:{},82:{},85:{f:ds},89:{},90:{},91:{},92:{f:b3e},93:{f:eUe},94:{},95:{f:Yr},96:{},97:{},99:{f:Yr},125:{f:n9},128:{f:Q3e},129:{f:x3e},130:{f:ds},131:{f:Yr},132:{f:Yr},133:{f:C3e},134:{},140:{f:oUe},141:{f:ds},144:{},146:{f:lUe},151:{},152:{},153:{},154:{},155:{},156:{f:ds},157:{},158:{},160:{f:AUe},161:{f:cUe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:M3e},190:{f:O3e},193:{f:hd},197:{},198:{},199:{},200:{},201:{},202:{f:Yr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ds},220:{},221:{f:Yr},222:{},224:{f:$3e},225:{f:w3e},226:{f:hd},227:{},229:{f:Z3e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:S3e},253:{f:U3e},255:{f:E3e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:q$},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Yr},353:{f:hd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:z3e},431:{f:Yr},432:{},433:{},434:{},437:{},438:{f:aUe},439:{f:Yr},440:{f:rUe},441:{},442:{f:$g},443:{},444:{f:ds},445:{},446:{},448:{f:hd},449:{f:T3e,r:2},450:{f:hd},512:{f:JR},513:{f:fUe},515:{f:G3e},516:{f:R3e},517:{f:ZR},519:{f:mUe},520:{f:k3e},523:{},545:{f:aN},549:{f:XR},566:{},574:{f:F3e},638:{f:L3e},659:{},1048:{},1054:{f:N3e},1084:{},1212:{f:q3e},2048:{f:sUe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Vy},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:hd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:uUe,r:12},2173:{f:MRe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Yr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:j3e,r:12},2197:{},2198:{f:DRe,r:12},2199:{},2200:{},2201:{},2202:{f:Y3e,r:12},2203:{f:hd},2204:{},2205:{},2206:{},2207:{},2211:{f:B3e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ds},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:dUe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:iUe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:JR},1:{},2:{f:gUe},3:{f:pUe},4:{f:hUe},5:{f:ZR},7:{f:yUe},8:{},9:{f:Vy},11:{},22:{f:ds},30:{f:V3e},31:{},32:{},33:{f:aN},36:{},37:{f:XR},50:{f:_Ue},62:{},52:{},67:{},68:{f:ds},69:{},86:{},126:{},127:{f:vUe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:wUe},223:{},234:{},354:{},421:{},518:{f:OC},521:{f:Vy},536:{f:nN},547:{f:tN},561:{},579:{},1030:{f:OC},1033:{f:Vy},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Cl(e,t,n,a){var r=t;if(!isNaN(r)){var s=(n||[]).length||0,o=e.next(4);o.write_shift(2,r),o.write_shift(2,s),s>0&&N$(n)&&e.push(n)}}function mN(e,t){var n=t||{},a=n.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var r=e.match(/<table/i);if(!r)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=r.index,l=s&&s.index||e.length,c=GPe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),f=-1,d=0,A=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},h=[];for(o=0;o<c.length;++o){var y=c[o].trim(),g=y.slice(0,3).toLowerCase();if(g=="<tr"){if(++f,n.sheetRows&&n.sheetRows<=f){--f;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var _=y.split(/<\/t[dh]>/i);for(l=0;l<_.length;++l){var b=_[l].trim();if(b.match(/<t[dh]/i)){for(var S=b,B=0;S.charAt(0)=="<"&&(B=S.indexOf(">"))>-1;)S=S.slice(B+1);for(var F=0;F<h.length;++F){var T=h[F];T.s.c==d&&T.s.r<f&&f<=T.e.r&&(d=T.e.c+1,F=-1)}var E=zn(b.slice(0,b.indexOf(">")));m=E.colspan?+E.colspan:1,((A=+E.rowspan)>1||m>1)&&h.push({s:{r:f,c:d},e:{r:f+(A||1)-1,c:d+m-1}});var x=E.t||E["data-t"]||"";if(!S.length){d+=m;continue}if(S=x$(S),p.s.r>f&&(p.s.r=f),p.e.r<f&&(p.e.r=f),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!S.length){d+=m;continue}var C={t:"s",v:S};n.raw||!S.trim().length||x=="s"||(S==="TRUE"?C={t:"b",v:!0}:S==="FALSE"?C={t:"b",v:!1}:isNaN(Hl(S))?isNaN(Zv(S).getDate())||(C={t:"d",v:Hs(S)},n.cellDates||(C={t:"n",v:jo(C.v)}),C.z=n.dateNF||sa[14]):C={t:"n",v:Hl(S)}),n.dense?(a[f]||(a[f]=[]),a[f][d]=C):a[Jn({r:f,c:d})]=C,d+=m}}}}return a["!ref"]=Pa(p),h.length&&(a["!merges"]=h),a}function _8e(e,t,n,a){for(var r=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,f=0;f<r.length;++f)if(!(r[f].s.r>n||r[f].s.c>o)&&!(r[f].e.r<n||r[f].e.c<o)){if(r[f].s.r<n||r[f].s.c<o){l=-1;break}l=r[f].e.r-r[f].s.r+1,c=r[f].e.c-r[f].s.c+1;break}if(!(l<0)){var d=Jn({r:n,c:o}),A=a.dense?(e[n]||[])[o]:e[d],m=A&&A.v!=null&&(A.h||OT(A.w||(Gc(A),A.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),a.editable?m='<span contenteditable="true">'+m+"</span>":A&&(p["data-t"]=A&&A.t||"z",A.v!=null&&(p["data-v"]=A.v),A.z!=null&&(p["data-z"]=A.z),A.l&&(A.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+A.l.Target+'">'+m+"</a>")),p.id=(a.id||"sjs")+"-"+d,s.push(oDe("td",m,p))}}var h="<tr>";return h+s.join("")+"</tr>"}var w8e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',b8e="</body></html>";function x8e(e,t){var n=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1)return mf(mN(n[0],t),t);var a=r4();return n.forEach(function(r,s){s4(a,mN(r,t),"Sheet"+(s+1))}),a}function C8e(e,t,n){var a=[];return a.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function S8e(e,t){var n=t||{},a=n.header!=null?n.header:w8e,r=n.footer!=null?n.footer:b8e,s=[a],o=Bh(e["!ref"]);n.dense=Array.isArray(e),s.push(C8e(e,o,n));for(var l=o.s.r;l<=o.e.r;++l)s.push(_8e(e,o,l,n));return s.push("</table>"+r),s.join("")}function B9(e,t,n){var a=n||{},r=0,s=0;if(a.origin!=null)if(typeof a.origin=="number")r=a.origin;else{var o=typeof a.origin=="string"?Qo(a.origin):a.origin;r=o.r,s=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),f={s:{r:0,c:0},e:{r,c:s}};if(e["!ref"]){var d=Bh(e["!ref"]);f.s.r=Math.min(f.s.r,d.s.r),f.s.c=Math.min(f.s.c,d.s.c),f.e.r=Math.max(f.e.r,d.e.r),f.e.c=Math.max(f.e.c,d.e.c),r==-1&&(f.e.r=r=d.e.r+1)}var A=[],m=0,p=e["!rows"]||(e["!rows"]=[]),h=0,y=0,g=0,_=0,b=0,S=0;for(e["!cols"]||(e["!cols"]=[]);h<l.length&&y<c;++h){var B=l[h];if(vN(B)){if(a.display)continue;p[y]={hidden:!0}}var F=B.children;for(g=_=0;g<F.length;++g){var T=F[g];if(!(a.display&&vN(T))){var E=T.hasAttribute("data-v")?T.getAttribute("data-v"):T.hasAttribute("v")?T.getAttribute("v"):x$(T.innerHTML),x=T.getAttribute("data-z")||T.getAttribute("z");for(m=0;m<A.length;++m){var C=A[m];C.s.c==_+s&&C.s.r<y+r&&y+r<=C.e.r&&(_=C.e.c+1-s,m=-1)}S=+T.getAttribute("colspan")||1,((b=+T.getAttribute("rowspan")||1)>1||S>1)&&A.push({s:{r:y+r,c:_+s},e:{r:y+r+(b||1)-1,c:_+s+(S||1)-1}});var D={t:"s",v:E},U=T.getAttribute("data-t")||T.getAttribute("t")||"";E!=null&&(E.length==0?D.t=U||"z":a.raw||E.trim().length==0||U=="s"||(E==="TRUE"?D={t:"b",v:!0}:E==="FALSE"?D={t:"b",v:!1}:isNaN(Hl(E))?isNaN(Zv(E).getDate())||(D={t:"d",v:Hs(E)},a.cellDates||(D={t:"n",v:jo(D.v)}),D.z=a.dateNF||sa[14]):D={t:"n",v:Hl(E)})),D.z===void 0&&x!=null&&(D.z=x);var L="",H=T.getElementsByTagName("A");if(H&&H.length)for(var oe=0;oe<H.length&&!(H[oe].hasAttribute("href")&&(L=H[oe].getAttribute("href"),L.charAt(0)!="#"));++oe);L&&L.charAt(0)!="#"&&(D.l={Target:L}),a.dense?(e[y+r]||(e[y+r]=[]),e[y+r][_+s]=D):e[Jn({c:_+s,r:y+r})]=D,f.e.c<_+s&&(f.e.c=_+s),_+=S}}++y}return A.length&&(e["!merges"]=(e["!merges"]||[]).concat(A)),f.e.r=Math.max(f.e.r,y-1+r),e["!ref"]=Pa(f),y>=c&&(e["!fullref"]=Pa((f.e.r=l.length-h+y-1+r,f))),e}function T9(e,t){var n=t||{},a=n.dense?[]:{};return B9(a,e,t)}function E8e(e,t){return mf(T9(e,t),t)}function vN(e){var t="",n=k8e(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function k8e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function B8e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,r){return Array(parseInt(r,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=Va(t.replace(/<[^>]*>/g,""));return[n]}var hN={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function I9(e,t){var n=t||{},a=HT(e),r=[],s,o,l={name:""},c="",f=0,d,A,m={},p=[],h=n.dense?[]:{},y,g,_={value:""},b="",S=0,B=[],F=-1,T=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},x=0,C={},D=[],U={},L=0,H=0,oe=[],de=1,te=1,q=[],ce={Names:[]},le={},Z=["",""],ne=[],G={},W="",Q=0,O=!1,ae=!1,j=0;for(X0.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=X0.exec(a);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?h["!ref"]=Pa(E):h["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=E.e.r&&(h["!fullref"]=h["!ref"],E.e.r=n.sheetRows-1,h["!ref"]=Pa(E)),D.length&&(h["!merges"]=D),oe.length&&(h["!rows"]=oe),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),m[d.name]=h,ae=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=zn(y[0],!1),F=T=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,h=n.dense?[]:{},D=[],oe=[],ae=!0);break;case"table-row-group":y[1]==="/"?--x:++x;break;case"table-row":case"":if(y[1]==="/"){F+=de,de=1;break}if(A=zn(y[0],!1),A.?F=A.-1:F==-1&&(F=0),de=+A["number-rows-repeated"]||1,de<10)for(j=0;j<de;++j)x>0&&(oe[F+j]={level:x});T=-1;break;case"covered-table-cell":y[1]!=="/"&&++T,n.sheetStubs&&(n.dense?(h[F]||(h[F]=[]),h[F][T]={t:"z"}):h[Jn({r:F,c:T})]={t:"z"}),b="",B=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++T,_=zn(y[0],!1),te=parseInt(_["number-columns-repeated"]||"1",10),g={t:"z",v:null},_.formula&&n.cellFormula!=!1&&(g.f=cN(Va(_.formula))),(_.||_["value-type"])=="string"&&(g.t="s",g.v=Va(_["string-value"]||""),n.dense?(h[F]||(h[F]=[]),h[F][T]=g):h[Jn({r:F,c:T})]=g),T+=te-1;else if(y[1]!=="/"){++T,b="",S=0,B=[],te=1;var J=de?F+de-1:F;if(T>E.e.c&&(E.e.c=T),T<E.s.c&&(E.s.c=T),F<E.s.r&&(E.s.r=F),J>E.e.r&&(E.e.r=J),_=zn(y[0],!1),ne=[],G={},g={t:_.||_["value-type"],v:null},n.cellFormula)if(_.formula&&(_.formula=Va(_.formula)),_["number-matrix-columns-spanned"]&&_["number-matrix-rows-spanned"]&&(L=parseInt(_["number-matrix-rows-spanned"],10)||0,H=parseInt(_["number-matrix-columns-spanned"],10)||0,U={s:{r:F,c:T},e:{r:F+L-1,c:T+H-1}},g.F=Pa(U),q.push([U,g.F])),_.formula)g.f=cN(_.formula);else for(j=0;j<q.length;++j)F>=q[j][0].s.r&&F<=q[j][0].e.r&&T>=q[j][0].s.c&&T<=q[j][0].e.c&&(g.F=q[j][1]);switch((_["number-columns-spanned"]||_["number-rows-spanned"])&&(L=parseInt(_["number-rows-spanned"],10)||0,H=parseInt(_["number-columns-spanned"],10)||0,U={s:{r:F,c:T},e:{r:F+L-1,c:T+H-1}},D.push(U)),_["number-columns-repeated"]&&(te=parseInt(_["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=Dr(_["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(_.value);break;case"percentage":g.t="n",g.v=parseFloat(_.value);break;case"currency":g.t="n",g.v=parseFloat(_.value);break;case"date":g.t="d",g.v=Hs(_["date-value"]),n.cellDates||(g.t="n",g.v=jo(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=HPe(_["time-value"])/86400,n.cellDates&&(g.t="d",g.v=Kw(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(_.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",_["string-value"]!=null&&(b=Va(_["string-value"]),B=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(O=!1,g.t==="s"&&(g.v=b||"",B.length&&(g.R=B),O=S==0),le.Target&&(g.l=le),ne.length>0&&(g.c=ne,ne=[]),b&&n.cellText!==!1&&(g.w=b),O&&(g.t="z",delete g.v),(!O||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=F))for(var ie=0;ie<de;++ie){if(te=parseInt(_["number-columns-repeated"]||"1",10),n.dense)for(h[F+ie]||(h[F+ie]=[]),h[F+ie][T]=ie==0?g:ao(g);--te>0;)h[F+ie][T+te]=ao(g);else for(h[Jn({r:F+ie,c:T})]=g;--te>0;)h[Jn({r:F+ie,c:T+te})]=ao(g);E.e.c<=T&&(E.e.c=T)}te=parseInt(_["number-columns-repeated"]||"1",10),T+=te-1,te=0,g={},b="",B=[]}le={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((s=r.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&r.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((s=r.pop())[0]!==y[3])throw"Bad state: "+s;G.t=b,B.length&&(G.R=B),G.a=W,ne.push(G)}else y[0].charAt(y[0].length-2)!=="/"&&r.push([y[3],!1]);W="",Q=0,b="",S=0,B=[];break;case"creator":y[1]==="/"?W=a.slice(Q,y.index):Q=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((s=r.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&r.push([y[3],!1]);b="",S=0,B=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(C[l.name]=c,(s=r.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&(c="",l=zn(y[0],!1),r.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(r[r.length-1][0]){case"time-style":case"date-style":o=zn(y[0],!1),c+=hN[y[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(r[r.length-1][0]){case"time-style":case"date-style":o=zn(y[0],!1),c+=hN[y[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(r[r.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(f,y.index);break}else f=y.index+y[0].length;break;case"named-range":o=zn(y[0],!1),Z=HC(o["cell-range-address"]);var X={Name:o.name,Ref:Z[0]+"!"+Z[1]};ae&&(X.Sheet=p.length),ce.Names.push(X);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(r[r.length-1][0])>-1)break;if(y[1]==="/"&&(!_||!_["string-value"])){var fe=B8e(a.slice(S,y.index));b=(b.length>0?b+`
`:"")+fe[0]}else zn(y[0],!1),S=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{Z=HC(zn(y[0])["target-range-address"]),m[Z[0]]["!autofilter"]={ref:Z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(le=zn(y[0],!1),!le.href)break;le.Target=Va(le.href),delete le.href,le.Target.charAt(0)=="#"&&le.Target.indexOf(".")>-1?(Z=HC(le.Target.slice(1)),le.Target="#"+Z[0]+"!"+Z[1]):le.Target.match(/^\.\.[\\\/]/)&&(le.Target=le.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(n.WTF)throw new Error(y)}}var M={Sheets:m,SheetNames:p,Workbook:ce};return n.bookSheets&&delete M.Sheets,M}function pN(e,t){t=t||{},el(e,"META-INF/manifest.xml")&&GDe(cs(e,"META-INF/manifest.xml"),t);var n=Ei(e,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var a=I9(gr(n),t);return el(e,"meta.xml")&&(a.Props=Q$(cs(e,"meta.xml"))),a}function gN(e,t){return I9(e,t)}function e4(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function KE(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):gr(YA(e))}function jE(e){var t=e.reduce(function(r,s){return r+s.length},0),n=new Uint8Array(t),a=0;return e.forEach(function(r){n.set(r,a),a+=r.length}),n}function yN(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function T8e(e,t){for(var n=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,r=t+13;r>=t;--r)a=a*256+e[r];return(e[t+15]&128?-a:a)*Math.pow(10,n-6176)}function tg(e,t){var n=t?t[0]:0,a=e[n]&127;e:if(e[n++]>=128&&(a|=(e[n]&127)<<7,e[n++]<128||(a|=(e[n]&127)<<14,e[n++]<128)||(a|=(e[n]&127)<<21,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,28),++n,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,35),++n,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,42),++n,e[n++]<128)))break e;return t&&(t[0]=n),a}function Bs(e){var t=0,n=e[t]&127;e:if(e[t++]>=128){if(n|=(e[t]&127)<<7,e[t++]<128||(n|=(e[t]&127)<<14,e[t++]<128)||(n|=(e[t]&127)<<21,e[t++]<128))break e;n|=(e[t]&127)<<28}return n}function Co(e){for(var t=[],n=[0];n[0]<e.length;){var a=n[0],r=tg(e,n),s=r&7;r=Math.floor(r/8);var o=0,l;if(r==0)break;switch(s){case 0:{for(var c=n[0];e[n[0]++]>=128;);l=e.slice(c,n[0])}break;case 5:o=4,l=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,l=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=tg(e,n),l=e.slice(n[0],n[0]+o),n[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(r," at offset ").concat(a))}var f={data:l,type:s};t[r]==null?t[r]=[f]:t[r].push(f)}return t}function t4(e,t){return e?.map(function(n){return t(n.data)})||[]}function I8e(e){for(var t,n=[],a=[0];a[0]<e.length;){var r=tg(e,a),s=Co(e.slice(a[0],a[0]+r));a[0]+=r;var o={id:Bs(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Co(l.data),f=Bs(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+f)}),a[0]+=f}),(t=s[3])!=null&&t[0]&&(o.merge=Bs(s[3][0].data)>>>0>0),n.push(o)}return n}function F8e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],a=tg(t,n),r=[];n[0]<t.length;){var s=t[n[0]]&3;if(s==0){var o=t[n[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[n[0]],l>1&&(o|=t[n[0]+1]<<8),l>2&&(o|=t[n[0]+2]<<16),l>3&&(o|=t[n[0]+3]<<24),o>>>=0,o++,n[0]+=l}r.push(t.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var c=0,f=0;if(s==1?(f=(t[n[0]]>>2&7)+4,c=(t[n[0]++]&224)<<3,c|=t[n[0]++]):(f=(t[n[0]++]>>2)+1,s==2?(c=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(c=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),r=[jE(r)],c==0)throw new Error("Invalid offset 0");if(c>r[0].length)throw new Error("Invalid offset beyond length");if(f>=c)for(r.push(r[0].slice(-c)),f-=c;f>=r[r.length-1].length;)r.push(r[r.length-1]),f-=r[r.length-1].length;r.push(r[0].slice(-c,-c+f))}}var d=jE(r);if(d.length!=a)throw new Error("Unexpected length: ".concat(d.length," != ").concat(a));return d}function P8e(e){for(var t=[],n=0;n<e.length;){var a=e[n++],r=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(F8e(a,e.slice(n,n+r))),n+=r}if(n!==e.length)throw new Error("data is not a valid framed stream!");return jE(t)}function D8e(e,t,n,a){var r=e4(e),s=r.getUint32(4,!0),o=(a>1?12:8)+yN(s&(a>1?3470:398))*4,l=-1,c=-1,f=NaN,d=new Date(2001,0,1);s&512&&(l=r.getUint32(o,!0),o+=4),o+=yN(s&(a>1?12288:4096))*4,s&16&&(c=r.getUint32(o,!0),o+=4),s&32&&(f=r.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+r.getFloat64(o,!0)*1e3),o+=8);var A;switch(e[2]){case 0:break;case 2:A={t:"n",v:f};break;case 3:A={t:"s",v:t[c]};break;case 5:A={t:"d",v:d};break;case 6:A={t:"b",v:f>0};break;case 7:A={t:"n",v:f/86400};break;case 8:A={t:"e",v:0};break;case 9:if(l>-1)A={t:"s",v:n[l]};else if(c>-1)A={t:"s",v:t[c]};else if(!isNaN(f))A={t:"n",v:f};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return A}function U8e(e,t,n){var a=e4(e),r=a.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,f=NaN,d=new Date(2001,0,1);r&1&&(c=T8e(e,s),s+=16),r&2&&(f=a.getFloat64(s,!0),s+=8),r&4&&(d.setTime(d.getTime()+a.getFloat64(s,!0)*1e3),s+=8),r&8&&(l=a.getUint32(s,!0),s+=4),r&16&&(o=a.getUint32(s,!0),s+=4);var A;switch(e[1]){case 0:break;case 2:A={t:"n",v:c};break;case 3:A={t:"s",v:t[l]};break;case 5:A={t:"d",v:d};break;case 6:A={t:"b",v:f>0};break;case 7:A={t:"n",v:f/86400};break;case 8:A={t:"e",v:0};break;case 9:if(o>-1)A={t:"s",v:n[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(r&31," : ").concat(e.slice(0,4)));break;case 10:A={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(r&31," : ").concat(e.slice(0,4)))}return A}function R8e(e,t,n){switch(e[0]){case 0:case 1:case 2:case 3:return D8e(e,t,n,e[0]);case 5:return U8e(e,t,n);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function $d(e){var t=Co(e);return tg(t[1][0].data)}function _N(e,t){var n=Co(t.data),a=Bs(n[1][0].data),r=n[3],s=[];return(r||[]).forEach(function(o){var l=Co(o.data),c=Bs(l[1][0].data)>>>0;switch(a){case 1:s[c]=KE(l[3][0].data);break;case 8:{var f=e[$d(l[9][0].data)][0],d=Co(f.data),A=e[$d(d[1][0].data)][0],m=Bs(A.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=Co(A.data);s[c]=p[3].map(function(h){return KE(h.data)}).join("")}break}}),s}function N8e(e,t){var n,a,r,s,o,l,c,f,d,A,m,p,h,y,g=Co(e),_=Bs(g[1][0].data)>>>0,b=Bs(g[2][0].data)>>>0,S=((a=(n=g[8])==null?void 0:n[0])==null?void 0:a.data)&&Bs(g[8][0].data)>0||!1,B,F;if((s=(r=g[7])==null?void 0:r[0])!=null&&s.data&&t!=0)B=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,F=(f=(c=g[6])==null?void 0:c[0])==null?void 0:f.data;else if((A=(d=g[4])==null?void 0:d[0])!=null&&A.data&&t!=1)B=(p=(m=g[4])==null?void 0:m[0])==null?void 0:p.data,F=(y=(h=g[3])==null?void 0:h[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var T=S?4:1,E=e4(B),x=[],C=0;C<B.length/2;++C){var D=E.getUint16(C*2,!0);D<65535&&x.push([C,D])}if(x.length!=b)throw"Expected ".concat(b," cells, found ").concat(x.length);var U=[];for(C=0;C<x.length-1;++C)U[x[C][0]]=F.subarray(x[C][1]*T,x[C+1][1]*T);return x.length>=1&&(U[x[x.length-1][0]]=F.subarray(x[x.length-1][1]*T)),{R:_,cells:U}}function V8e(e,t){var n,a=Co(t.data),r=(n=a?.[7])!=null&&n[0]?Bs(a[7][0].data)>>>0>0?1:0:-1,s=t4(a[5],function(o){return N8e(o,r)});return{nrows:Bs(a[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,f){if(o[l.R][f])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(f));o[l.R][f]=c}),o},[])}}function L8e(e,t,n){var a,r=Co(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Bs(r[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(r[6][0].data));if(s.e.c=(Bs(r[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(r[7][0].data));n["!ref"]=Pa(s);var o=Co(r[4][0].data),l=_N(e,e[$d(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?_N(e,e[$d(o[17][0].data)][0]):[],f=Co(o[3][0].data),d=0;f[1].forEach(function(A){var m=Co(A.data),p=e[$d(m[2][0].data)][0],h=Bs(p.meta[1][0].data);if(h!=6002)throw new Error("6001 unexpected reference to ".concat(h));var y=V8e(e,p);y.data.forEach(function(g,_){g.forEach(function(b,S){var B=Jn({r:d+_,c:S}),F=R8e(b,l,c);F&&(n[B]=F)})}),d+=y.nrows})}function M8e(e,t){var n=Co(t.data),a={"!ref":"A1"},r=e[$d(n[2][0].data)],s=Bs(r[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return L8e(e,r[0],a),a}function O8e(e,t){var n,a=Co(t.data),r={name:(n=a[1])!=null&&n[0]?KE(a[1][0].data):"",sheets:[]},s=t4(a[2],$d);return s.forEach(function(o){e[o].forEach(function(l){var c=Bs(l.meta[1][0].data);c==6e3&&r.sheets.push(M8e(e,l))})}),r}function H8e(e,t){var n=r4(),a=Co(t.data),r=t4(a[1],$d);if(r.forEach(function(s){e[s].forEach(function(o){var l=Bs(o.meta[1][0].data);if(l==2){var c=O8e(e,o);c.sheets.forEach(function(f,d){s4(n,f,d==0?c.name:c.name+"_"+d,!0)})}})}),n.SheetNames.length==0)throw new Error("Empty NUMBERS file");return n}function QC(e){var t,n,a,r,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var f;try{f=P8e(c.content)}catch(A){return console.log("?? "+c.content.length+" "+(A.message||A))}var d;try{d=I8e(f)}catch(A){return console.log("## "+(A.message||A))}d.forEach(function(A){s[A.id]=A.messages,o.push(A.id)})}}),!o.length)throw new Error("File has no messages");var l=((r=(a=(n=(t=s?.[1])==null?void 0:t[0])==null?void 0:n.meta)==null?void 0:a[1])==null?void 0:r[0].data)&&Bs(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(f){var d=Bs(f.meta[1][0].data)>>>0;if(d==1)if(!l)l=f;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return H8e(s,l)}function $8e(e){return function(n){for(var a=0;a!=e.length;++a){var r=e[a];n[r[0]]===void 0&&(n[r[0]]=r[1]),r[2]==="n"&&(n[r[0]]=Number(n[r[0]]))}}}function n4(e){$8e([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function Q8e(e){return iv.WS.indexOf(e)>-1?"sheet":e==iv.CS?"chart":e==iv.DS?"dialog":e==iv.MS?"macro":e&&e.length?e:"sheet"}function G8e(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,Q8e(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function z8e(e,t,n,a,r,s,o,l,c,f,d,A){try{s[a]=f0(Ei(e,n,!0),t);var m=cs(e,t),p;switch(l){case"sheet":p=XLe(m,t,r,c,s[a],f,d,A);break;case"chart":if(p=JLe(m,t,r,c,s[a],f,d,A),!p||!p["!drawel"])break;var h=Hp(p["!drawel"].Target,t),y=$E(h),g=YRe(Ei(e,h,!0),f0(Ei(e,y,!0),h)),_=Hp(g,h),b=$E(_);p=ULe(Ei(e,_,!0),_,c,f0(Ei(e,b,!0),_),f,p);break;case"macro":p=ZLe(m,t,r,c,s[a],f,d,A);break;case"dialog":p=e8e(m,t,r,c,s[a],f,d,A);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=p;var S=[];s&&s[a]&&Lu(s[a]).forEach(function(B){var F="";if(s[a][B].Type==iv.CMNT){F=Hp(s[a][B].Target,t);var T=r8e(cs(e,F,!0),F,c);if(!T||!T.length)return;sN(p,T,!1)}s[a][B].Type==iv.TCMNT&&(F=Hp(s[a][B].Target,t),S=S.concat(JRe(cs(e,F,!0),c)))}),S&&S.length&&sN(p,S,!0,c.people||[])}catch(B){if(c.WTF)throw B}}function Yi(e){return e.charAt(0)=="/"?e.slice(1):e}function W8e(e,t){if(m$(),t=t||{},n4(t),el(e,"META-INF/manifest.xml")||el(e,"objectdata.xml"))return pN(e,t);if(el(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof QC<"u"){if(e.FileIndex)return QC(e);var n=Ta.utils.cfb_new();return PR(e).forEach(function(oe){KPe(n,oe,WPe(e,oe))}),QC(n)}throw new Error("Unsupported NUMBERS file")}if(!el(e,"[Content_Types].xml"))throw el(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):el(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=PR(e),r=$De(Ei(e,"[Content_Types].xml")),s=!1,o,l;if(r.workbooks.length===0&&(l="xl/workbook.xml",cs(e,l,!0)&&r.workbooks.push(l)),r.workbooks.length===0){if(l="xl/workbook.bin",!cs(e,l,!0))throw new Error("Could not find workbook");r.workbooks.push(l),s=!0}r.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},f={};if(!t.bookSheets&&!t.bookProps){if(v0=[],r.sst)try{v0=a8e(cs(e,Yi(r.sst)),r.sst,t)}catch(oe){if(t.WTF)throw oe}t.cellStyles&&r.themes.length&&(c=n8e(Ei(e,r.themes[0].replace(/^\//,""),!0)||"",r.themes[0],t)),r.style&&(f=t8e(cs(e,Yi(r.style)),r.style,c,t))}r.links.map(function(oe){try{var de=f0(Ei(e,$E(Yi(oe))),oe);return o8e(cs(e,Yi(oe)),de,oe,t)}catch{}});var d=YLe(cs(e,Yi(r.workbooks[0])),r.workbooks[0],t),A={},m="";r.coreprops.length&&(m=cs(e,Yi(r.coreprops[0]),!0),m&&(A=Q$(m)),r.extprops.length!==0&&(m=cs(e,Yi(r.extprops[0]),!0),m&&KDe(m,A,t)));var p={};(!t.bookSheets||t.bookProps)&&r.custprops.length!==0&&(m=Ei(e,Yi(r.custprops[0]),!0),m&&(p=qDe(m,t)));var h={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(de){return de.name}):A.Worksheets&&A.SheetNames.length>0&&(o=A.SheetNames),t.bookProps&&(h.Props=A,h.Custprops=p),t.bookSheets&&typeof o<"u"&&(h.SheetNames=o),t.bookSheets?h.SheetNames:t.bookProps))return h;o={};var y={};t.bookDeps&&r.calcchain&&(y=s8e(cs(e,Yi(r.calcchain)),r.calcchain));var g=0,_={},b,S;{var B=d.Sheets;A.Worksheets=B.length,A.SheetNames=[];for(var F=0;F!=B.length;++F)A.SheetNames[F]=B[F].name}var T=s?"bin":"xml",E=r.workbooks[0].lastIndexOf("/"),x=(r.workbooks[0].slice(0,E+1)+"_rels/"+r.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");el(e,x)||(x="xl/_rels/workbook."+T+".rels");var C=f0(Ei(e,x,!0),x.replace(/_rels.*/,"s5s"));(r.metadata||[]).length>=1&&(t.xlmeta=i8e(cs(e,Yi(r.metadata[0])),r.metadata[0],t)),(r.people||[]).length>=1&&(t.people=ZRe(cs(e,Yi(r.people[0])),t)),C&&(C=G8e(C,d.Sheets));var D=cs(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=A.Worksheets;++g){var U="sheet";if(C&&C[g]?(b="xl/"+C[g][1].replace(/[\/]?xl\//,""),el(e,b)||(b=C[g][1]),el(e,b)||(b=x.replace(/_rels\/.*$/,"")+C[g][1]),U=C[g][2]):(b="xl/worksheets/sheet"+(g+1-D)+"."+T,b=b.replace(/sheet0\./,"sheet.")),S=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(A.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var L=!1,H=0;H!=t.sheets.length;++H)typeof t.sheets[H]=="number"&&t.sheets[H]==g&&(L=1),typeof t.sheets[H]=="string"&&t.sheets[H].toLowerCase()==A.SheetNames[g].toLowerCase()&&(L=1);if(!L)continue e}}z8e(e,b,S,A.SheetNames[g],g,_,o,U,t,d,c,f)}return h={Directory:r,Workbook:d,Props:A,Custprops:p,Deps:y,Sheets:o,SheetNames:A.SheetNames,Strings:v0,Styles:f,Themes:c,SSF:ao(sa)},t&&t.bookFiles&&(e.files?(h.keys=a,h.files=e.files):(h.keys=[],h.files={},e.FullPaths.forEach(function(oe,de){oe=oe.replace(/^Root Entry[\/]/,""),h.keys.push(oe),h.files[oe]=e.FileIndex[de]}))),t&&t.bookVBA&&(r.vba.length>0?h.vbaraw=cs(e,Yi(r.vba[0]),!0):r.defaults&&r.defaults.bin===aNe&&(h.vbaraw=cs(e,"xl/vbaProject.bin",!0))),h}function K8e(e,t){var n=t||{},a="Workbook",r=Ta.find(e,a);try{if(a="/!DataSpaces/Version",r=Ta.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(MUe(r.content),a="/!DataSpaces/DataSpaceMap",r=Ta.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var s=HUe(r.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",r=Ta.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=$Ue(r.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",r=Ta.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);GUe(r.content)}catch{}if(a="/EncryptionInfo",r=Ta.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=zUe(r.content);if(a="/EncryptedPackage",r=Ta.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],r.content,n.password||"",n);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],r.content,n.password||"",n);throw new Error("File is password-protected")}function a4(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=Ui(e.slice(0,12));break;case"binary":n=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function j8e(e,t){return Ta.find(e,"EncryptedPackage")?K8e(e,t):k9(e,t)}function q8e(e,t){var n,a=e,r=t||{};return r.type||(r.type=xa&&Buffer.isBuffer(e)?"buffer":"base64"),n=_$(a,r),W8e(n,r)}function F9(e,t){var n=0;e:for(;n<e.length;)switch(e.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return zE(e.slice(n),t);default:break e}return J0.to_workbook(e,t)}function Y8e(e,t){var n="",a=a4(e,t);switch(t.type){case"base64":n=Ui(e);break;case"binary":n=e;break;case"buffer":n=e.toString("binary");break;case"array":n=EA(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(n=gr(n)),t.type="binary",F9(n,t)}function X8e(e,t){var n=e;return t.type=="base64"&&(n=Ui(n)),n=j0.utils.decode(1200,n.slice(2),"str"),t.type="binary",F9(n,t)}function J8e(e){return e.match(/[^\x00-\x7F]/)?$p(e):e}function GC(e,t,n,a){return a?(n.type="string",J0.to_workbook(e,n)):J0.to_workbook(t,n)}function qE(e,t){n$();var n=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return qE(new Uint8Array(e),(n=ao(n),n.type="array",n));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var a=e,r=[0,0,0,0],s=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),Tv={},n.dateNF&&(Tv.dateNF=n.dateNF),n.type||(n.type=xa&&Buffer.isBuffer(e)?"buffer":"base64"),n.type=="file"&&(n.type=xa?"buffer":"binary",a=MPe(e),typeof Uint8Array<"u"&&!xa&&(n.type="array")),n.type=="string"&&(s=!0,n.type="binary",n.codepage=65001,a=J8e(e)),n.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return n=ao(n),n.type="array",qE(RT(a),n)}switch((r=a4(a,n))[0]){case 208:if(r[1]===207&&r[2]===17&&r[3]===224&&r[4]===161&&r[5]===177&&r[6]===26&&r[7]===225)return j8e(Ta.read(a,n),n);break;case 9:if(r[1]<=8)return k9(a,n);break;case 60:return zE(a,n);case 73:if(r[1]===73&&r[2]===42&&r[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(r[1]===68)return EUe(a,n);break;case 84:if(r[1]===65&&r[2]===66&&r[3]===76)return CUe.to_workbook(a,n);break;case 80:return r[1]===75&&r[2]<9&&r[3]<9?q8e(a,n):GC(e,a,n,s);case 239:return r[3]===60?zE(a,n):GC(e,a,n,s);case 255:if(r[1]===254)return X8e(a,n);if(r[1]===0&&r[2]===2&&r[3]===0)return m0.to_workbook(a,n);break;case 0:if(r[1]===0&&(r[2]>=2&&r[3]===0||r[2]===0&&(r[3]===8||r[3]===9)))return m0.to_workbook(a,n);break;case 3:case 131:case 139:case 140:return rN.to_workbook(a,n);case 123:if(r[1]===92&&r[2]===114&&r[3]===116)return aRe.to_workbook(a,n);break;case 10:case 13:case 32:return Y8e(a,n);case 137:if(r[1]===80&&r[2]===78&&r[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return bUe.indexOf(r[0])>-1&&r[2]<=12&&r[3]<=31?rN.to_workbook(a,n):GC(e,a,n,s)}function Z8e(e,t,n,a,r,s,o,l){var c=ro(n),f=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),A=!0,m=r===1?[]:{};if(r!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:n,enumerable:!1})}catch{m.__rowNum__=n}else m.__rowNum__=n;if(!o||e[n])for(var p=t.s.c;p<=t.e.c;++p){var h=o?e[n][p]:e[a[p]+c];if(h===void 0||h.t===void 0){if(f===void 0)continue;s[p]!=null&&(m[s[p]]=f);continue}var y=h.v;switch(h.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+h.t)}if(s[p]!=null){if(y==null)if(h.t=="e"&&y===null)m[s[p]]=null;else if(f!==void 0)m[s[p]]=f;else if(d&&y===null)m[s[p]]=null;else continue;else m[s[p]]=d&&(h.t!=="n"||h.t==="n"&&l.rawNumbers!==!1)?y:Gc(h,y,l);y!=null&&(A=!1)}}return{row:m,isempty:A}}function YE(e,t){if(e==null||e["!ref"]==null)return[];var n={t:"n",v:0},a=0,r=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},f=t||{},d=f.range!=null?f.range:e["!ref"];switch(f.header===1?a=1:f.header==="A"?a=2:Array.isArray(f.header)?a=3:f.header==null&&(a=0),typeof d){case"string":c=Hr(d);break;case"number":c=Hr(e["!ref"]),c.s.r=d;break;default:c=d}a>0&&(r=0);var A=ro(c.s.r),m=[],p=[],h=0,y=0,g=Array.isArray(e),_=c.s.r,b=0,S={};g&&!e[_]&&(e[_]=[]);var B=f.skipHidden&&e["!cols"]||[],F=f.skipHidden&&e["!rows"]||[];for(b=c.s.c;b<=c.e.c;++b)if(!(B[b]||{}).hidden)switch(m[b]=Es(b),n=g?e[_][b]:e[m[b]+A],a){case 1:s[b]=b-c.s.c;break;case 2:s[b]=m[b];break;case 3:s[b]=f.header[b-c.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),l=o=Gc(n,null,f),y=S[o]||0,!y)S[o]=1;else{do l=o+"_"+y++;while(S[l]);S[o]=y,S[l]=1}s[b]=l}for(_=c.s.r+r;_<=c.e.r;++_)if(!(F[_]||{}).hidden){var T=Z8e(e,c,_,m,a,s,g,f);(T.isempty===!1||(a===1?f.blankrows!==!1:f.blankrows))&&(p[h++]=T.row)}return p.length=h,p}var wN=/"/g;function e5e(e,t,n,a,r,s,o,l){for(var c=!0,f=[],d="",A=ro(n),m=t.s.c;m<=t.e.c;++m)if(a[m]){var p=l.dense?(e[n]||[])[m]:e[a[m]+A];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(l.rawNumbers&&p.t=="n"?p.v:Gc(p,null,l));for(var h=0,y=0;h!==d.length;++h)if((y=d.charCodeAt(h))===r||y===s||y===34||l.forceQuotes){d='"'+d.replace(wN,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(wN,'""')+'"')):d="";f.push(d)}return l.blankrows===!1&&c?null:f.join(o)}function P9(e,t){var n=[],a=t??{};if(e==null||e["!ref"]==null)return"";var r=Hr(e["!ref"]),s=a.FS!==void 0?a.FS:",",o=s.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),f=new RegExp((s=="|"?"\\|":s)+"+$"),d="",A=[];a.dense=Array.isArray(e);for(var m=a.skipHidden&&e["!cols"]||[],p=a.skipHidden&&e["!rows"]||[],h=r.s.c;h<=r.e.c;++h)(m[h]||{}).hidden||(A[h]=Es(h));for(var y=0,g=r.s.r;g<=r.e.r;++g)(p[g]||{}).hidden||(d=e5e(e,r,g,A,o,c,s,a),d!=null&&(a.strip&&(d=d.replace(f,"")),(d||a.blankrows!==!1)&&n.push((y++?l:"")+d)));return delete a.dense,n.join("")}function t5e(e,t){t||(t={}),t.FS="	",t.RS=`
`;var n=P9(e,t);return n}function n5e(e){var t="",n,a="";if(e==null||e["!ref"]==null)return[];var r=Hr(e["!ref"]),s="",o=[],l,c=[],f=Array.isArray(e);for(l=r.s.c;l<=r.e.c;++l)o[l]=Es(l);for(var d=r.s.r;d<=r.e.r;++d)for(s=ro(d),l=r.s.c;l<=r.e.c;++l)if(t=o[l]+s,n=f?(e[d]||[])[l]:e[t],a="",n!==void 0){if(n.F!=null){if(t=n.F,!n.f)continue;a=n.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(n.f!=null)a=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)a=""+n.v;else if(n.t=="b")a=n.v?"TRUE":"FALSE";else if(n.w!==void 0)a="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?a="'"+n.v:a=""+n.v}}c[c.length]=t+"="+a}return c}function D9(e,t,n){var a=n||{},r=+!a.skipHeader,s=e||{},o=0,l=0;if(s&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Qo(a.origin):a.origin;o=c.r,l=c.c}var f,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+r}};if(s["!ref"]){var A=Hr(s["!ref"]);d.e.c=Math.max(d.e.c,A.e.c),d.e.r=Math.max(d.e.r,A.e.r),o==-1&&(o=A.e.r+1,d.e.r=o+t.length-1+r)}else o==-1&&(o=0,d.e.r=t.length-1+r);var m=a.header||[],p=0;t.forEach(function(y,g){Lu(y).forEach(function(_){(p=m.indexOf(_))==-1&&(m[p=m.length]=_);var b=y[_],S="z",B="",F=Jn({c:l+p,r:o+g+r});f=ng(s,F),b&&typeof b=="object"&&!(b instanceof Date)?s[F]=b:(typeof b=="number"?S="n":typeof b=="boolean"?S="b":typeof b=="string"?S="s":b instanceof Date?(S="d",a.cellDates||(S="n",b=jo(b)),B=a.dateNF||sa[14]):b===null&&a.nullError&&(S="e",b=0),f?(f.t=S,f.v=b,delete f.w,delete f.R,B&&(f.z=B)):s[F]=f={t:S,v:b},B&&(f.z=B))})}),d.e.c=Math.max(d.e.c,l+m.length-1);var h=ro(o);if(r)for(p=0;p<m.length;++p)s[Es(p+l)+h]={t:"s",v:m[p]};return s["!ref"]=Pa(d),s}function a5e(e,t){return D9(null,e,t)}function ng(e,t,n){if(typeof t=="string"){if(Array.isArray(e)){var a=Qo(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?ng(e,Jn(t)):ng(e,Jn({r:t,c:n||0}))}function r5e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function r4(){return{SheetNames:[],Sheets:{}}}function s4(e,t,n,a){var r=1;if(!n)for(;r<=65535&&e.SheetNames.indexOf(n="Sheet"+r)!=-1;++r,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);r=s&&+s[2]||0;var o=s&&s[1]||n;for(++r;r<=65535&&e.SheetNames.indexOf(n=o+r)!=-1;++r);}if($Le(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function s5e(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=r5e(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[a].Hidden=n}function o5e(e,t){return e.z=t,e}function U9(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}function i5e(e,t,n){return U9(e,"#"+t,n)}function l5e(e,t,n){e.c||(e.c=[]),e.c.push({t,a:n||"SheetJS"})}function u5e(e,t,n,a){for(var r=typeof t!="string"?t:Hr(t),s=typeof t=="string"?t:Pa(t),o=r.s.r;o<=r.e.r;++o)for(var l=r.s.c;l<=r.e.c;++l){var c=ng(e,o,l);c.t="n",c.F=s,delete c.v,o==r.s.r&&l==r.s.c&&(c.f=n,a&&(c.D=!0))}return e}var c5e={encode_col:Es,encode_row:ro,encode_cell:Jn,encode_range:Pa,decode_col:GT,decode_row:QT,split_cell:wDe,decode_cell:Qo,decode_range:Bh,format_cell:Gc,sheet_add_aoa:L$,sheet_add_json:D9,sheet_add_dom:B9,aoa_to_sheet:Th,json_to_sheet:a5e,table_to_sheet:T9,table_to_book:E8e,sheet_to_csv:P9,sheet_to_txt:t5e,sheet_to_json:YE,sheet_to_html:S8e,sheet_to_formulae:n5e,sheet_to_row_object_array:YE,sheet_get_cell:ng,book_new:r4,book_append_sheet:s4,book_set_sheet_visibility:s5e,cell_set_number_format:o5e,cell_set_hyperlink:U9,cell_set_internal_link:i5e,cell_add_comment:l5e,sheet_set_array_formula:u5e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const R9={practo:{name:"Practo",headerRow:1,requiredColumns:{"Patient Name":"name","Mobile Number":"contact_number",Age:"age",Gender:"gender"},optionalColumns:{"Patient Number":"importID","Email Address":"email",Pincode:"address","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["Patient Name","Mobile Number","Age","Gender"],optional:["Patient Number","Email Address","Pincode","Date of Birth","DOB","Birth Date"],dataTypes:{"Patient Name":"string","Patient Number":"string",Age:["string","number"],Gender:"string","Mobile Number":["string","number"],"Email Address":"string",Pincode:"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},ekacare:{name:"Eka.Care",requiredColumns:{"Patient name":"name",Mobile:"contact_number"},optionalColumns:{"UHID (DF)":"importID",Age:"age",Gender:"gender","Patient Address":"address","Mail ID(DF)":"email","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["Patient name","Mobile"],optional:["UHID (DF)","Age","Gender","Patient Address","Mail ID(DF)","Date of Birth","DOB","Birth Date"],dataTypes:{"Patient name":"string","UHID (DF)":"string",Mobile:"string",Age:"string",Gender:"string","Patient Address":"string","Mail ID(DF)":"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},healthplix:{name:"Healthplix",headerRow:1,requiredColumns:{ID:"importID",name:"name",phone_number:"contact_number",Sex:"gender",age:"age"},optionalColumns:{person_address:"address",email_id:"email",dob:"dateOfBirth",date_of_birth:"dateOfBirth","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["ID","name","phone_number","Sex","age"],optional:["person_address","email_id","dob","date_of_birth","Date of Birth","DOB","Birth Date"],dataTypes:{ID:"string",name:"string",phone_number:["string","number"],Sex:"string",age:["string","number"],person_address:"string",email_id:"string",dob:"string",date_of_birth:"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},"evamed-custom":{name:"Evamed Custom Template",headerRow:1,requiredColumns:{id:"importID",name:"name",phone_number:"contact_number"},optionalColumns:{age:"age",gender:"gender",date_of_birth:"dateOfBirth",address:"address",email:"email"},validation:{required:["id","name","phone_number"],optional:["age","gender","date_of_birth","address","email"],dataTypes:{id:["string","number"],name:"string",phone_number:["string","number"],age:["string","number"],gender:"string",date_of_birth:"string",address:"string",email:"string"}}},tatvacare:{name:"TatvaCare",headerRow:1,requiredColumns:{"Patient Name":"name",Mobile:"contact_number"},optionalColumns:{Gender:"gender","Date of Birth":"dateOfBirth",Age:"age","Patient ID":"importID","Street Address":"streetAddress",City:"city",State:"state","Pin Code":"pinCode"},validation:{required:["Patient Name","Mobile"],optional:["Gender","Date of Birth","Age","Patient ID","Street Address","City","State","Pin Code"],dataTypes:{"Patient Name":"string",Mobile:["string","number"],Gender:"string","Date of Birth":"string",Age:["string","number"],"Patient ID":"string","Street Address":"string",City:"string",State:"string","Pin Code":"string"}}}},I2=e=>R9[e]||null,bN=e=>Object.prototype.hasOwnProperty.call(R9,e),N9=(e,t)=>{const n=I2(t);if(!n)return{isValid:!1,error:`Unsupported EMR system: ${t}`,missing:[],found:[]};const a=n.validation.required,r=new Set(e.map(l=>l.trim()));let s=[],o=[];if(t==="practo"){const l={"Patient Name":["Patient Name","PatientName","patient Name","patient name","Name","Patient","Full Name","FullName"],"Mobile Number":["Mobile Number","MobileNumber","mobile Number","mobile number","Mobile","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Patient Number":["Patient Number","PatientNumber","patient Number","patient number","Patient ID","PatientID","ID","Patient No","PatientNo"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(l[c]||[c]).find(A=>r.has(A))?o.push(c):s.push(c)})}else if(t==="evamed-custom"){const l={id:["id","ID","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId","PatientNumber","patient number","Patient Number"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName","full name"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber","Contact"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)","age (years)"],gender:["gender","Gender","patient_gender","patient gender","Patient Gender","PatientGender","sex","Sex","Gender/Sex"],date_of_birth:["date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","dob","Birth Date","birth date","BirthDate","birthdate"],address:["address","Address","patient_address","patient address","Patient Address","PatientAddress","Address Line","address line"],email:["email","Email","patient_email","patient email","Patient Email","PatientEmail","email_id","email id","Email ID","EmailID","Email Address","email address"]};a.forEach(c=>{(l[c]||[c]).find(A=>r.has(A))?o.push(c):s.push(c)})}else if(t==="tatvacare"){const l={"Patient Name":["Patient Name","PatientName","patient Name","patient name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth Date"],Age:["Age","age","Patient Age","patient Age","Age (Years)","age (years)"],"Patient ID":["Patient ID","PatientID","patient ID","patient id","Patient Id","ID","Id","Patient Number","PatientNumber"],"Street Address":["Street Address","StreetAddress","street Address","street address","Address","address","Street","street"],City:["City","city"],State:["State","state"],"Pin Code":["Pin Code","PinCode","pin Code","pin code","Pincode","pincode","Postal Code","postal Code","Zip Code","zip Code"]};a.forEach(c=>{(l[c]||[c]).find(A=>r.has(A))?o.push(c):s.push(c)})}else if(t==="ekacare"){const l={"Patient name":["Patient name","Patient Name","PatientName","patient name","patient Name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(l[c]||[c]).find(A=>r.has(A))?o.push(c):s.push(c)})}else if(t==="healthplix"){const l={ID:["ID","id","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber"],Sex:["Sex","sex","Gender","gender","Patient Gender","patient Gender"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)"],dob:["dob","DOB","date_of_birth","date of birth","Date of Birth","DateOfBirth","Birth Date","birth date","BirthDate","birthdate"],date_of_birth:["dob","date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","Birth Date","birth date","BirthDate","birthdate"],"Date of Birth":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(l[c]||[c]).find(A=>r.has(A))?o.push(c):s.push(c)})}else s=a.filter(l=>!r.has(l)),o=a.filter(l=>r.has(l));return{isValid:s.length===0,error:s.length>0?`Missing required columns: ${s.join(", ")}`:null,missing:s,found:o,mapping:n}},bp=e=>{if(!e)return null;try{const t=jA(e),a=VM(new Date,t);return isNaN(a)||a<0?null:a}catch(t){return console.error("Error calculating age from DOB:",e,t),null}},d5e=(e,t,n)=>{const a=I2(n);if(!a)throw new Error(`Unsupported EMR system: ${n}`);const r={},s={...a.requiredColumns,...a.optionalColumns},o=(l,c)=>{let f=c.indexOf(l);if(f!==-1)return f;if(n==="practo"){const A={"Patient Name":["Patient Name","patient Name","Patient name","patient name","PatientName","Name","Patient","Full Name","FullName"],"Mobile Number":["Mobile Number","mobile Number","Mobile number","mobile number","MobileNumber","Mobile","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],"Patient Number":["Patient Number","patient Number","Patient number","patient number","PatientNumber","Patient ID","PatientID","ID","Patient No","PatientNo"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Email Address":["Email Address","email Address","Email address","email address","Email","email","Email ID","Email address"],Pincode:["Pincode","pincode","Pin Code","pin Code","Postal Code","postal Code","Zip Code","zip Code"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[l]||[l];for(const m of A)if(f=c.indexOf(m),f!==-1)return f}if(n==="evamed-custom"){const A={id:["id","ID","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId","PatientNumber","patient number","Patient Number"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName","full name"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber","Contact"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)","age (years)"],gender:["gender","Gender","patient_gender","patient gender","Patient Gender","PatientGender","sex","Sex","Gender/Sex"],date_of_birth:["date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","dob","Birth Date","birth date","BirthDate","birthdate"],address:["address","Address","patient_address","patient address","Patient Address","PatientAddress","Address Line","address line"],email:["email","Email","patient_email","patient email","Patient Email","PatientEmail","email_id","email id","Email ID","EmailID","Email Address","email address"]}[l]||[l];for(const m of A)if(f=c.indexOf(m),f!==-1)return f}if(n==="ekacare"){const A={"Patient name":["Patient name","Patient Name","PatientName","patient name","patient Name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[l]||[l];for(const m of A)if(f=c.indexOf(m),f!==-1)return f}if(n==="healthplix"){const A={ID:["ID","id","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber"],Sex:["Sex","sex","Gender","gender","Patient Gender","patient Gender"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)"],dob:["dob","DOB","date_of_birth","date of birth","Date of Birth","DateOfBirth","Birth Date","birth date","BirthDate","birthdate"],date_of_birth:["dob","date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","Birth Date","birth date","BirthDate","birthdate"],"Date of Birth":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[l]||[l];for(const m of A)if(f=c.indexOf(m),f!==-1)return f}if(n==="tatvacare"){const A={"Patient Name":["Patient Name","patient Name","Patient name","patient name","PatientName","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth Date"],Age:["Age","age","Patient Age","patient Age","Age (Years)","age (years)"],"Patient ID":["Patient ID","PatientID","patient ID","patient id","Patient Id","ID","Id","Patient Number","PatientNumber"],"Street Address":["Street Address","StreetAddress","street Address","street address","Address","address","Street","street"],City:["City","city"],State:["State","state"],"Pin Code":["Pin Code","PinCode","pin Code","pin code","Pincode","pincode","Postal Code","postal Code","Zip Code","zip Code"]}[l]||[l];for(const m of A)if(f=c.indexOf(m),f!==-1)return f}return-1};if(Object.entries(s).forEach(([l,c])=>{const f=o(l,t);if(f!==-1&&c){let d=e[f];n==="practo"&&typeof d=="string"&&d.endsWith("'")&&(d=d.slice(0,-1).trim()),d=A5e(d,l,a.validation.dataTypes[l]),d!=null&&d!==""&&(r[c]=d)}}),r.email=r.email||"",r.address=r.address||"",r.note=r.note||"",n==="practo"){if(r.dateOfBirth){const l=Bd(r.dateOfBirth);l!==null&&(r.birthDate=l.toString(),r.age=bp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const l=parseInt(r.age,10);r.age=isNaN(l)||l<0?null:l}else r.age=null;r.gender=r.gender||"Male"}if(n==="ekacare"){if(r.dateOfBirth){const l=Bd(r.dateOfBirth);l!==null&&(r.birthDate=l.toString(),r.age=bp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const l=String(r.age).match(/^\d+/);if(l){const c=parseInt(l[0],10);r.age=isNaN(c)||c<0?null:c}else r.age=null}}if(n==="healthplix"){if(r.dateOfBirth){const l=Bd(r.dateOfBirth);l!==null&&(r.birthDate=l.toString(),r.age=bp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const l=parseInt(r.age,10);r.age=isNaN(l)||l<0?null:l}}if(n==="evamed-custom"){if(r.dateOfBirth){const l=Bd(r.dateOfBirth);l!==null&&(r.birthDate=l.toString(),r.age=bp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null){const l=parseInt(r.age,10);r.age=isNaN(l)||l<0?null:l}if(r.gender){const l=String(r.gender).toLowerCase().trim();l==="male"||l==="m"?r.gender="Male":l==="female"||l==="f"?r.gender="Female":l==="other"||l==="o"?r.gender="Other":r.gender=String(r.gender).trim()}else r.gender="Male"}if(n==="tatvacare"){if(r.dateOfBirth){const c=Bd(r.dateOfBirth);c!==null&&(r.birthDate=c.toString(),r.age=bp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null){const c=parseInt(r.age,10);r.age=isNaN(c)||c<0?null:c}const l=[];if(r.streetAddress&&l.push(r.streetAddress),r.city&&l.push(r.city),r.state&&l.push(r.state),r.pinCode&&l.push(r.pinCode),r.address=l.length>0?l.join(", "):"",delete r.streetAddress,delete r.city,delete r.state,delete r.pinCode,r.gender){const c=String(r.gender).toLowerCase().trim();c==="male"||c==="m"?r.gender="Male":c==="female"||c==="f"?r.gender="Female":c==="other"||c==="o"?r.gender="Other":r.gender=String(r.gender).trim()}else r.gender="Male"}return r.importID=r.importID||null,r.importSource=n,r},f5e=e=>{if(!e||e==="")return"";const t=String(e).trim();let n=t.match(/^(\d{2})-(\d{2})-(\d{4})$/);if(n){const[,a,r,s]=n;return`${s}-${r}-${a}`}if(n=t.match(/^(\d{4})-(\d{2})-(\d{2})$/),n)return t;if(n=t.match(/^(\d{2})\/(\d{2})\/(\d{4})$/),n){const[,a,r,s]=n;return`${s}-${r}-${a}`}if(n=t.match(/^(\d{4})\/(\d{2})\/(\d{2})$/),n){const[,a,r,s]=n;return`${a}-${r}-${s}`}return t},A5e=(e,t,n)=>{if(e==null||e==="")return"";let a=String(e).trim();if(!n)return a;switch(t){case"Patient Age":{if(typeof e=="number")return String(Math.floor(e));const r=a.match(/\d+/);return r?r[0]:a}case"Age":{if(e==null||e===""||a==="")return"";if(a.endsWith("'"))return a.slice(0,-1).trim()||"";const r=a.match(/^\d+/);return r?r[0]:""}case"Patient Contact":return a.replace(/[^\d+\-\s]/g,"");case"Mobile Number":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.startsWith("+91")&&(r=r.substring(3)),r.trim()}case"Mobile":return a.startsWith("+91")?a.substring(3).trim():a.replace(/[^\d]/g,"");case"Patient Gender":case"Gender":case"gender":{if(e==null||e===""||a==="")return"";let r=a;if(r.endsWith("'")&&(r=r.slice(0,-1).trim()),!r.trim())return"";const s=r.toLowerCase().trim();return s==="f"?"Female":s==="m"?"Male":s==="o"?"Other":s==="male"||s.includes("male")&&!s.includes("female")?"Male":s==="female"||s.includes("female")?"Female":s==="other"?"Other":r.trim()}case"Patient Name":case"Patient name":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.replace(/\s+/g," ").trim()}case"Email Address":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"Pincode":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"Patient Number":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"UHID (DF)":return a.trim();case"ID":return a.trim();case"phone_number":{if(e==null||e==="")return"";let r=String(e).trim();return r.startsWith("+91")&&(r=r.substring(3).trim()),r.endsWith(".0")&&(r=r.slice(0,-2)),r=r.replace(/[^\d]/g,""),r}case"Sex":{if(e==null||e===""||a==="")return"";const r=a.trim(),s=r.toLowerCase();return s==="female"?"Female":s==="male"?"Male":r}case"Age":case"age":{if(e==null||e===""||a==="")return"";let r=a;r.endsWith("'")&&(r=r.slice(0,-1).trim());const s=r.match(/^\d+/);return s?s[0]:""}case"id":return e==null||e===""?"":String(e).trim();case"address":case"person_address":return e==null||e===""||a===","||a==='","'?"":String(e).replace(/\s+/g," ").trim();case"email":case"email_id":return e==null||e===""?"":String(e).trim();case"Date of Birth":case"date_of_birth":case"dob":case"DOB":case"Birth Date":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1).trim()),f5e(r)}case"Patient ID":return a.trim();case"Street Address":case"City":case"State":case"Pin Code":return e==null||e===""?"":String(e).trim();default:return a}};function zC(e){const t=[];let n="",a=!1;for(let r=0;r<e.length;r++){const s=e[r],o=e[r+1];s==='"'?a&&o==='"'?(n+='"',r++):a=!a:s===","&&!a?(t.push(n.trim()),n=""):n+=s}return t.push(n.trim()),t}const V9=async(e,t=null)=>{const n=e.name.toLowerCase(),a=e.type==="text/csv"||e.type==="application/csv"||n.endsWith(".csv"),r=e.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||e.type==="application/vnd.ms-excel"||n.endsWith(".xlsx")||n.endsWith(".xls");if(!a&&!r)throw new Error("Unsupported file type. Please use CSV (.csv) or Excel (.xlsx, .xls) files.");return a?new Promise((s,o)=>{const l=new FileReader;l.onload=c=>{try{const d=c.target.result.split(/\r?\n/);let A=0,m=1;if(t){const _=I2(t);_&&_.headerRow&&(A=_.headerRow-1,m=A+1)}if(A>=d.length){o(new Error(`Header row ${A+1} does not exist in file`));return}const p=d[A].trim();if(!p){o(new Error("Header row is empty"));return}const h=zC(p).map(_=>String(_).trim()).filter(_=>_!=="");let y=0;for(let _=m;_<d.length;_++){const b=d[_].trim();b&&zC(b).some(S=>S.trim()!=="")&&y++}const g=[];for(let _=m;_<d.length;_++){const b=d[_].trim();if(b){const S=zC(b);S.some(B=>B.trim()!=="")&&g.push(S)}}s({headers:h,rows:g,totalRows:g.length,headerRowIndex:A+1,isCSV:!0,fileType:"csv"})}catch(f){o(new Error(`Failed to parse CSV file: ${f.message}`))}},l.onerror=()=>o(new Error("Failed to read file")),l.readAsText(e)}):r?new Promise((s,o)=>{const l=new FileReader;l.onload=c=>{try{console.log(`Reading Excel file: ${e.name} (${(e.size/1024/1024).toFixed(2)} MB)`);const f=c.target.result,d=qE(f,{type:"binary",cellDates:!1,cellNF:!1,cellStyles:!1,sheetStubs:!1});if(!d.SheetNames||d.SheetNames.length===0){o(new Error("Excel file has no worksheets"));return}const A=d.SheetNames[0],m=d.Sheets[A];if(!m){o(new Error(`Worksheet "${A}" not found`));return}console.log(`Processing worksheet: ${A}`);const p=c5e.sheet_to_json(m,{header:1,defval:"",raw:!1,blankrows:!1});if(p.length===0){o(new Error("Excel file is empty"));return}console.log(`Excel file parsed: ${p.length} total rows`);let h=0,y=1;if(t){const b=I2(t);b&&b.headerRow&&(h=b.headerRow-1,y=h+1)}if(h>=p.length){o(new Error(`Header row ${h+1} does not exist in Excel file`));return}const g=p[h].map(b=>String(b).trim()).filter(b=>b!=="");if(g.length===0){o(new Error("Header row is empty in Excel file"));return}const _=p.slice(y).filter(b=>b.some(S=>S!=null&&String(S).trim()!==""));console.log(`Excel file processed: ${g.length} columns, ${_.length} data rows`),s({headers:g,rows:_,totalRows:_.length,headerRowIndex:h+1,isCSV:!1,fileType:"excel"})}catch(f){console.error("Excel file parsing error:",f),o(new Error(`Failed to parse Excel file: ${f.message}`))}},l.onerror=()=>{console.error("Failed to read Excel file"),o(new Error("Failed to read Excel file"))},l.readAsBinaryString(e)}):Promise.reject(new Error("Unsupported file type. Please use CSV (.csv) or Excel (.xlsx, .xls) files."))},XE=async(e,t)=>{try{const n=await V9(e,t),a=N9(n.headers,t);return{isValid:a.isValid,error:a.error,fileData:a.isValid?n:null,validation:a}}catch(n){return{isValid:!1,error:n.message,fileData:null,validation:null}}},L9=async(e,t,n=null)=>{const{headers:a,rows:r,fileType:s}=e;s&&console.log(`Processing ${s.toUpperCase()} file with ${r.length} rows`);const o={total:r.length,successful:0,failed:0,errors:[],patients:[],duplicates:0},l=100,c=500,f=new Map,d=[],A=[];for(let m=0;m<r.length;m++)try{const p=d5e(r[m],a,t);p.isImported=!0;const h=v5e(p);if(h){o.failed++,o.errors.push({row:m+1,patientData:r[m],error:h,mappedData:p});continue}p.importID&&p.importID.trim()!==""?(f.set(p.importID,{patientData:p,rowIndex:m+1}),d.push(p)):A.push(p),n&&(m%l===0||m===r.length-1)&&n({current:m+1,total:r.length,phase:"mapping",currentPatient:p.name,message:`Processing row ${m+1} of ${r.length}...`}),m%l===0&&m>0&&await new Promise(y=>setTimeout(y,0))}catch(p){console.error(`Row ${m+1} mapping error:`,p),o.failed++,o.errors.push({row:m+1,patientData:r[m],error:p.message,mappedData:null})}if(d.length>0){n&&n({current:0,total:d.length,phase:"duplicate-check",message:"Checking for existing patients..."});const m=await m5e(d,t);o.duplicates=m.duplicates.length,o.errors.push(...m.duplicates.map(h=>({row:h.row,patientData:h.originalData,error:`Patient already exists with Import ID: ${h.importID}`,mappedData:h.originalData,isDuplicate:!0})));const p=[...m.newPatients,...A];await xN(p,o,n,c)}else await xN(A,o,n,c);return n&&n({current:r.length,total:r.length,phase:"complete",successful:o.successful,failed:o.failed,duplicates:o.duplicates,message:`Import completed: ${o.successful} successful, ${o.failed} failed, ${o.duplicates} duplicates`}),o};async function xN(e,t,n,a){if(e.length===0){console.log("No patients to import");return}n&&n({current:0,total:e.length,phase:"bulk-insert",message:`Inserting ${e.length} patients in batches...`}),console.log(`Bulk inserting ${e.length} patients in batches of ${a}...`);for(let r=0;r<e.length;r+=a){const s=e.slice(r,r+a),o=Math.floor(r/a)+1,l=Math.ceil(e.length/a);console.log(`Processing batch ${o}/${l} (${s.length} patients)...`),n&&n({current:r,total:e.length,phase:"bulk-insert",message:`Inserting batch ${o}/${l}: ${r+1}-${Math.min(r+a,e.length)} of ${e.length}...`});try{const{data:c,error:f}=await $ve(s);f?(console.error(`Batch ${o} failed:`,f),t.failed+=s.length,t.errors.push(...s.map((d,A)=>({patientData:d,error:f.message||"Failed to bulk create patients",row:r+A+1})))):(t.successful+=c.successful||0,t.failed+=c.failed||0,c.patients&&t.patients.push(...c.patients),c.errors&&c.errors.length>0&&t.errors.push(...c.errors.map((d,A)=>({...d,row:r+A+1})))),r+a<e.length&&await new Promise(d=>setTimeout(d,50))}catch(c){console.error(`Batch ${o} error:`,c),t.failed+=s.length,t.errors.push(...s.map((f,d)=>({patientData:f,error:c.message||"Failed to process batch",row:r+d+1})))}s.length=0}console.log(`Bulk insert completed: ${t.successful} successful, ${t.failed} failed`)}const m5e=async(e,t)=>{const n=e.filter(a=>a.importID&&a.importID.trim()!=="");if(n.length===0)return console.log("No patients with importID found, proceeding with all patients"),{newPatients:e,duplicates:[]};try{console.log(`Checking for duplicates: ${n.length} patients with importID from ${t}`);const{default:a}=await ns(async()=>{const{default:c}=await Promise.resolve().then(()=>_M);return{default:c}},void 0,import.meta.url),r=1e3,s=new Set;for(let c=0;c<n.length;c+=r){const d=n.slice(c,c+r).map(A=>A.importID);try{const A=await a.post("/patient/check-duplicates",{importIDs:d,importSource:t});if(A.data&&A.data.success){const m=A.data.data.existingImportIDs||[];m.forEach(p=>s.add(p)),console.log(`Batch ${Math.floor(c/r)+1}: Found ${m.length} duplicates`)}}catch(A){console.warn("Duplicate check batch failed, continuing with other batches:",A.message)}}console.log(`Found ${s.size} total existing patients with matching importIDs`);const o=[],l=[];return e.forEach((c,f)=>{c.importID&&c.importID.trim()!==""&&s.has(c.importID)?l.push({row:f+1,importID:c.importID,originalData:c}):o.push(c)}),console.log(`Duplicate check results: ${o.length} new patients, ${l.length} duplicates`),{newPatients:o,duplicates:l}}catch(a){return console.warn("Duplicate check failed, proceeding with all patients:",a.message),{newPatients:e,duplicates:[]}}},v5e=e=>(console.log("DEBUG validatePatientData - Input data:",JSON.stringify(e,null,2)),!e.name||e.name.trim()===""?"Patient name is required":!e.contact_number||e.contact_number.trim()===""?"Contact number is required":(console.log(`DEBUG validatePatientData - Before modification - Age: ${JSON.stringify(e.age)}, Gender: ${JSON.stringify(e.gender)}`),!e.age&&e.age!=="0"&&(e.age=""),e.gender||(e.gender=""),console.log(`DEBUG validatePatientData - After modification - Age: ${JSON.stringify(e.age)}, Gender: ${JSON.stringify(e.gender)}`),null)),M9=async(e,t)=>{try{if(console.log("saveImportFile called with:",{fileName:e?.name,fileSize:e?.size,fileType:e?.type,emrSystem:t}),!t)throw new Error("EMR system is required");const n=new FormData;n.append("importFile",e,e.name),console.log("FormData contents:");for(let o of n.entries())console.log(o[0],o[1]);const a={emrSystem:t};console.log("Query params:",a);const{default:r}=await ns(async()=>{const{default:o}=await Promise.resolve().then(()=>_M);return{default:o}},void 0,import.meta.url),s=await r.post("/upload/save-import",n,{params:a,headers:{"Content-Type":"multipart/form-data"}});if(s.data&&s.data.success)return{success:!0,filePath:s.data.data.filePath,fileName:s.data.data.fileName};throw new Error(s.data?.error||"Failed to save file")}catch(n){return console.error("Error saving import file:",n),console.error("Error response:",n.response?.data),{success:!1,error:n.response?.data?.error||n.message||"Failed to save import file"}}},O9=e=>{if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+n[a]},H9=e=>{const t=e*.1,n=e*.01,a=t+n+2;return a<60?`~${Math.ceil(a)} seconds`:a<3600?`~${Math.ceil(a/60)} minutes`:`~${Math.ceil(a/3600)} hours`},h5e=Object.freeze(Object.defineProperty({__proto__:null,estimateImportTime:H9,getFileSizeString:O9,processImportFile:L9,readImportFile:V9,saveImportFile:M9,validateFileHeaders:N9,validateImportFile:XE},Symbol.toStringTag,{value:"Module"})),o4={patients:{tableName:"patients",displayName:"Patient Records",columns:[{dbField:"name",exportName:"Name"},{dbField:"age",exportName:"Age"},{dbField:"gender",exportName:"Gender"},{dbField:"contactNumber",exportName:"Contact Number"},{dbField:"email",exportName:"Email Address"},{dbField:"address",exportName:"Address"},{dbField:"note",exportName:"Notes"},{dbField:"importID",exportName:"Import ID"},{dbField:"importSource",exportName:"Import Source"},{dbField:"isImported",exportName:"Is Imported"}]},medicines:{tableName:"medicines",displayName:"Medicines",columns:[{dbField:"productName",exportName:"Product Name"},{dbField:"marketer",exportName:"Marketer"},{dbField:"saltComposition",exportName:"Salt Composition"},{dbField:"productForm",exportName:"Product Form"}]}},p5e=e=>o4[e]?.columns||[],g5e=async e=>{try{const t={success:!1,data:{},summary:{totalRecords:0,dataTypes:[],dateRange:null},filePath:null,error:null};if(!e.dataTypes||!Object.values(e.dataTypes).some(a=>a))throw new Error("No data types selected for export");const n=Object.keys(e.dataTypes).filter(a=>e.dataTypes[a]);console.log("Selected data types for export:",n);for(const a of n){const r=await y5e(a,e);t.data[a]=r,t.summary.totalRecords+=r.length,t.summary.dataTypes.push({type:a,count:r.length,displayName:o4[a]?.displayName||a})}return(e.dateFrom||e.dateTo)&&(t.summary.dateRange={from:e.dateFrom||"Beginning",to:e.dateTo||"Now"}),t.success=!0,t}catch(t){return console.error("Export error:",t),{success:!1,data:{},summary:{totalRecords:0,dataTypes:[],dateRange:null},filePath:null,error:t.message}}},y5e=async(e,t)=>{try{console.log(`Fetching ${e} data for export...`);let n;if(e==="patients"){n=await it.get("/patient/patients",{params:{dateFrom:t.dateFrom,dateTo:t.dateTo,exportAll:!0}});const a=n.data?.data?.patients||n.data?.patients||[];return console.log(`Found ${a.length} patients for export`),a}else if(e==="medicines")try{n=await it.get("/medicine/all",{params:{dateFrom:t.dateFrom,dateTo:t.dateTo,exportAll:!0}});const a=n.data?.data?.medicines||n.data?.medicines||[];return console.log(`Found ${a.length} medicines for export`),a}catch(a){return console.warn("Medicine export endpoint not available yet:",a.message),[]}else throw new Error(`Unknown data type: ${e}`)}catch(n){if(console.error(`Error fetching ${e} data:`,n),n.response?.status===404)return console.warn(`API endpoint for ${e} export not implemented yet. Returning empty array.`),[];throw n}},_5e=e=>{try{const t=[];return Object.keys(e.data).forEach(n=>{const a=e.data[n],r=p5e(n);if(a.length===0)return;t.push(`
--- ${o4[n]?.displayName||n} ---`);const s=r.map(o=>o.exportName);t.push(s.join(",")),a.forEach(o=>{const l=r.map(c=>{const f=o[c.dbField];if(f==null)return"";const d=String(f);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d});t.push(l.join(","))}),t.push("")}),t.join(`
`)}catch(t){throw console.error("Error generating CSV:",t),t}},w5e=()=>{try{const e=["id","name","phone_number","age","gender","date_of_birth","address","email"],t=[{id:"P001",name:"Rajesh Kumar",phone_number:"9876543210",age:"35",gender:"Male",date_of_birth:"1989-05-15",address:"123 Main Street, Mumbai, Maharashtra",email:"rajesh.kumar@example.com"},{id:"P002",name:"Priya Sharma",phone_number:"9876543211",age:"28",gender:"Female",date_of_birth:"1996-08-22",address:"456 Park Avenue, Delhi",email:"priya.sharma@example.com"},{id:"P003",name:"Amit Patel",phone_number:"9876543212",age:"42",gender:"Male",date_of_birth:"1982-03-10",address:"789 MG Road, Bangalore, Karnataka",email:"amit.patel@example.com"},{id:"P004",name:"Sneha Reddy",phone_number:"9876543213",age:"31",gender:"Female",date_of_birth:"1993-11-05",address:"321 Church Street, Hyderabad, Telangana",email:"sneha.reddy@example.com"},{id:"P005",name:"Vikram Singh",phone_number:"9876543214",age:"45",gender:"Male",date_of_birth:"1979-07-18",address:"654 Nehru Road, Pune, Maharashtra",email:"vikram.singh@example.com"},{id:"P006",name:"Anjali Desai",phone_number:"9876543215",age:"29",gender:"Female",date_of_birth:"1995-12-30",address:"987 Gandhi Nagar, Ahmedabad, Gujarat",email:"anjali.desai@example.com"}],n=[];return n.push(e.join(",")),t.forEach(a=>{const r=e.map(s=>{const o=a[s]||"";if(o==null||o==="")return"";const l=String(o);return l.includes(",")||l.includes('"')||l.includes(`
`)?`"${l.replace(/"/g,'""')}"`:l});n.push(r.join(","))}),n.join(`
`)}catch(e){throw console.error("Error generating Evamed template:",e),e}},b5e=async()=>{try{const e=w5e(),t="evamed_template.csv",n=new Blob([e],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const a=await window.electronAPI.showSaveDialog({defaultPath:t,filters:[{name:"CSV Files",extensions:["csv"]}]});return!a.canceled&&a.filePath?(await window.electronAPI.writeFile(a.filePath,e),{success:!0,filePath:a.filePath,filename:t}):{success:!1,error:"Save canceled by user"}}else{const a=document.createElement("a"),r=URL.createObjectURL(n);return a.setAttribute("href",r),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),{success:!0,filePath:`Downloaded: ${t}`,filename:t}}}catch(e){return console.error("Error downloading Evamed template:",e),{success:!1,error:e.message}}},x5e=async(e,t)=>{try{const n=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),r=`evamed_export_${t.dataTypes.map(o=>o.type).join("_")}_${n}.csv`,s=new Blob([e],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const o=await window.electronAPI.showSaveDialog({defaultPath:r,filters:[{name:"CSV Files",extensions:["csv"]}]});return!o.canceled&&o.filePath?(await window.electronAPI.writeFile(o.filePath,e),{success:!0,filePath:o.filePath,filename:r}):{success:!1,error:"Save canceled by user"}}else{const o=document.createElement("a"),l=URL.createObjectURL(s);return o.setAttribute("href",l),o.setAttribute("download",r),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(l),{success:!0,filePath:`Downloaded: ${r}`,filename:r}}}catch(n){return console.error("Error saving export file:",n),{success:!1,error:n.message}}},C5e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},S5e={class:"filter-field mb-3"},E5e={class:"text-caption"},k5e={class:"filter-field mb-3"},B5e={class:"d-flex justify-center mt-4 mb-2"},T5e={key:1,class:"d-flex justify-center"},I5e={__name:"ImportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-import","clear-filters","template-downloaded"],setup(e,{emit:t}){const n=e,a=t,r=R({selectedEMR:n.filters.selectedEMR||"",selectedDataType:n.filters.selectedDataType||"patients",importFile:n.filters.importFile||null}),s=R({isValidating:!1,isValid:null,error:null,fileData:null}),o=R(!1),l=R([...gH]),c=R([...yH,{name:"Appointments",value:"appointments",disabled:!0},{name:"Treatments",value:"treatments",disabled:!0},{name:"Billing Records",value:"billing",disabled:!0}]),f=ee(()=>n.loading),d=ee(()=>r.value.selectedEMR!==""),A=ee(()=>r.value.selectedEMR&&r.value.selectedDataType&&r.value.importFile&&s.value.isValid===!0&&!s.value.isValidating&&!f.value),m=ee(()=>r.value.selectedEMR||r.value.importFile),p=ee(()=>r.value.selectedEMR?s.value.isValidating?"Validating file structure...":s.value.error?`Error: ${s.value.error}`:s.value.isValid&&s.value.fileData?`Valid file: ${s.value.fileData.totalRows} patient records found`:"Supported formats: CSV, Excel":"Please select an EMR system first"),h=async F=>{console.log("File selected, starting validation...",F),s.value={isValidating:!1,isValid:null,error:null,fileData:null};const T=r.value.importFile;console.log("Files from v-model:",T);let E=null;if(T&&(Array.isArray(T)?E=T.length>0?T[0]:null:T instanceof File&&(E=T)),E){console.log("File selected:",E.name,`(${O9(E.size)})`);const x=y(E);if(x.error){console.error("Basic validation failed:",x.error),s.value.error=x.error,s.value.isValid=!1,g();return}if(console.log("Basic validation passed"),r.value.selectedEMR&&bN(r.value.selectedEMR)){console.log("Starting file structure validation for EMR:",r.value.selectedEMR),s.value.isValidating=!0;try{const C=await XE(E,r.value.selectedEMR);console.log("File validation result:",C),s.value.isValid=C.isValid,s.value.error=C.error,s.value.fileData=C.fileData,C.isValid?console.log(` File validated successfully: ${C.fileData.totalRows} rows found`):console.warn(" File validation failed:",C.error)}catch(C){console.error("File validation error:",C),s.value.isValid=!1,s.value.error=`Validation error: ${C.message}`}s.value.isValidating=!1}else console.log("EMR system not selected or not supported, skipping structure validation"),s.value.isValid=!0}else console.log("No file found");g()},y=F=>{if(F.size>52428800)return{error:"File size exceeds 50MB limit"};const E=[".csv",".xlsx",".xls"],x="."+F.name.split(".").pop().toLowerCase();return E.includes(x)?F.size===0?{error:"File is empty"}:{error:null}:{error:"Unsupported file type. Please use CSV or Excel files."}},g=()=>{a("filter-change",{...r.value})},_=()=>{a("start-import",{...r.value})},b=()=>{r.value={selectedEMR:"",selectedDataType:"patients",importFile:null},s.value={isValidating:!1,isValid:null,error:null,fileData:null},a("clear-filters"),g()},S=async()=>{try{o.value=!0;const F=await b5e();F.success?a("template-downloaded",{success:!0,filename:F.filename}):a("template-downloaded",{success:!1,error:F.error})}catch(F){console.error("Error downloading template:",F),a("template-downloaded",{success:!1,error:F.message})}finally{o.value=!1}},B=R({});return Ge(()=>n.filters,F=>{Object.keys(F).some(E=>F[E]!==B.value[E])&&(r.value={...r.value,...F},B.value={...F})},{immediate:!0}),Ge(()=>r.value.selectedEMR,async(F,T)=>{if(F!==T){if(s.value={isValidating:!1,isValid:null,error:null,fileData:null},r.value.importFile&&F&&bN(F)){s.value.isValidating=!0;try{const E=await XE(r.value.importFile[0],F);s.value.isValid=E.isValid,s.value.error=E.error,s.value.fileData=E.fileData}catch(E){s.value.isValid=!1,s.value.error=`Validation error: ${E.message}`}s.value.isValidating=!1}g()}}),(F,T)=>{const E=I("v-card-text"),x=I("v-card"),C=I("v-select"),D=I("v-icon"),U=I("v-alert"),L=I("v-chip"),H=I("v-list-item"),oe=I("v-file-input"),de=I("v-btn");return P(),he(x,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[i(x,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(E,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...T[3]||(T[3]=[v("span",{class:"text-body-2 font-weight-medium"},"Import Configuration",-1)])]),_:1})]),_:1}),v("div",C5e,[v("div",S5e,[i(C,{modelValue:r.value.selectedEMR,"onUpdate:modelValue":[T[0]||(T[0]=te=>r.value.selectedEMR=te),g],items:l.value,"item-title":"name","item-value":"value",label:"EMR System",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input"},null,8,["modelValue","items"])]),r.value.selectedEMR==="evamed-custom"?(P(),he(U,{key:0,type:"info",variant:"tonal",class:"mb-3",border:"start",density:"compact"},{prepend:u(()=>[i(D,{size:"small",color:"primary"},{default:u(()=>[...T[4]||(T[4]=[N("mdi-alert-circle",-1)])]),_:1})]),default:u(()=>[v("div",E5e,[T[5]||(T[5]=N(" Important - please ",-1)),v("a",{href:"#",onClick:gn(S,["prevent"]),class:lt(["template-download-link",{"template-download-link-disabled":o.value}])}," click here ",2),T[6]||(T[6]=N(" to download the blank custom template. Add your information and then import below. ",-1))])]),_:1})):ge("",!0),v("div",k5e,[i(C,{modelValue:r.value.selectedDataType,"onUpdate:modelValue":T[1]||(T[1]=te=>r.value.selectedDataType=te),items:c.value,"item-title":"name","item-value":"value",label:"Data Type",density:"compact",variant:"outlined",disabled:!0,"hide-details":"auto",class:"filter-input"},{item:u(({props:te,item:q})=>[i(H,Ie(te,{disabled:q.raw.disabled}),Dv({_:2},[q.raw.disabled?{name:"append",fn:u(()=>[i(L,{size:"x-small",color:"grey"},{default:u(()=>[...T[7]||(T[7]=[N("Coming Soon",-1)])]),_:1})]),key:"0"}:void 0]),1040,["disabled"])]),_:1},8,["modelValue","items"]),T[8]||(T[8]=v("p",{class:"text-caption text-medium-emphasis mt-1 mb-0"},"Currently we support import of patient information only.",-1))]),v("div",{class:lt(["filter-field mb-3",{"opacity-disabled":!d.value}])},[i(oe,{modelValue:r.value.importFile,"onUpdate:modelValue":T[2]||(T[2]=te=>r.value.importFile=te),label:"Import File",placeholder:"Select file to import",density:"compact",variant:"outlined",accept:".csv,.xlsx,.xls","show-size":"","hide-details":"auto",class:"filter-input",disabled:!d.value,loading:s.value.isValidating,onChange:h},Dv({_:2},[r.value.importFile&&!s.value.isValidating?{name:"append-inner",fn:u(()=>[s.value.isValid===!0?(P(),he(D,{key:0,color:"success",size:"small"},{default:u(()=>[...T[9]||(T[9]=[N(" mdi-check-circle ",-1)])]),_:1})):s.value.isValid===!1?(P(),he(D,{key:1,color:"error",size:"small"},{default:u(()=>[...T[10]||(T[10]=[N(" mdi-alert-circle ",-1)])]),_:1})):ge("",!0)]),key:"0"}:void 0]),1032,["modelValue","disabled","loading"]),v("p",{class:lt(["text-caption mt-1 mb-0",{"text-success":s.value.isValid===!0,"text-error":s.value.isValid===!1,"text-medium-emphasis":s.value.isValid===null}])},K(p.value),3)],2),v("div",B5e,[i(de,{color:"primary",size:"small","prepend-icon":"mdi-upload",onClick:_,disabled:!A.value,loading:f.value,class:"filter-button"},{default:u(()=>[...T[11]||(T[11]=[N(" Start Import ",-1)])]),_:1},8,["disabled","loading"])]),m.value?(P(),Ae("div",T5e,[i(de,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:b,class:"filter-button-clear"},{default:u(()=>[...T[12]||(T[12]=[N(" Clear ",-1)])]),_:1})])):ge("",!0)])]),_:1})}}},F5e=en(I5e,[["__scopeId","data-v-29791cb3"]]),P5e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},D5e={class:"filter-section mb-3"},U5e={class:"filter-section mb-3"},R5e={class:"d-flex justify-center mt-4 mb-2"},N5e={key:0,class:"d-flex justify-center"},V5e={__name:"ExportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-export","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=R({dataTypes:{patients:n.filters.dataTypes?.patients!==void 0?n.filters.dataTypes.patients:!0,medicines:n.filters.dataTypes?.medicines!==void 0?n.filters.dataTypes.medicines:!1},dateFrom:n.filters.dateFrom||"",dateTo:n.filters.dateTo||""}),s=R(n.filters.dataTypes?.patients?"patients":n.filters.dataTypes?.medicines?"medicines":"patients"),o=ee(()=>n.loading),l=ee(()=>new Date().toISOString().split("T")[0]),c=ee(()=>!o.value&&f.value),f=ee(()=>s.value!==null&&s.value!==""),d=ee(()=>r.value.dateFrom||r.value.dateTo||s.value!=="patients"),A=y=>{r.value.dataTypes={patients:!1,medicines:!1},y&&(r.value.dataTypes[y]=!0),m()},m=()=>{a("filter-change",{...r.value})},p=()=>{a("start-export",{...r.value})},h=()=>{s.value="patients",r.value={dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""},a("clear-filters"),m()};return Ge(()=>n.filters,y=>{r.value={...r.value,...y},y.dataTypes&&(s.value=y.dataTypes.patients?"patients":y.dataTypes.medicines?"medicines":"patients")},{deep:!0}),A(s.value),(y,g)=>{const _=I("v-card-text"),b=I("v-card"),S=I("v-radio"),B=I("v-radio-group"),F=I("v-text-field"),T=I("v-btn");return P(),he(b,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[i(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(_,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...g[3]||(g[3]=[v("span",{class:"text-body-2 font-weight-medium"},"Export Configuration",-1)])]),_:1})]),_:1}),v("div",P5e,[v("div",D5e,[g[4]||(g[4]=v("div",{class:"filter-section-label mb-2"},"Data Type",-1)),i(B,{modelValue:s.value,"onUpdate:modelValue":[g[0]||(g[0]=E=>s.value=E),A],"hide-details":"",density:"compact"},{default:u(()=>[i(S,{value:"patients",label:"Patient Records",density:"compact"}),i(S,{value:"medicines",label:"Medicines",density:"compact"})]),_:1},8,["modelValue"])]),v("div",U5e,[g[5]||(g[5]=v("div",{class:"filter-section-label mb-2"},"Date Range (Optional)",-1)),i(F,{modelValue:r.value.dateFrom,"onUpdate:modelValue":[g[1]||(g[1]=E=>r.value.dateFrom=E),m],label:"From Date",type:"date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input mb-2",max:r.value.dateTo||l.value},null,8,["modelValue","max"]),i(F,{modelValue:r.value.dateTo,"onUpdate:modelValue":[g[2]||(g[2]=E=>r.value.dateTo=E),m],label:"To Date",type:"date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input",min:r.value.dateFrom,max:l.value},null,8,["modelValue","min","max"])]),v("div",R5e,[i(T,{disabled:!c.value,loading:o.value,color:"primary",size:"small","prepend-icon":"mdi-download",onClick:p,class:"filter-button"},{default:u(()=>[...g[6]||(g[6]=[N(" Start Export ",-1)])]),_:1},8,["disabled","loading"])]),d.value?(P(),Ae("div",N5e,[i(T,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:h,class:"filter-button-clear"},{default:u(()=>[...g[7]||(g[7]=[N(" Clear ",-1)])]),_:1})])):ge("",!0)])]),_:1})}}},L5e=en(V5e,[["__scopeId","data-v-19977106"]]),M5e={class:"scrollable-content"},O5e={class:"scrollable-content"},H5e={key:1},$5e={class:"text-center"},Q5e={class:"mt-4 text-subtitle-1"},G5e={class:"text-center"},z5e={class:"scrollable-content"},W5e={class:"scrollable-content"},K5e={key:1},j5e={class:"text-center"},q5e={class:"mt-4 text-subtitle-1"},Y5e={key:0,class:"mt-4"},X5e={class:"mb-2"},J5e={class:"mb-2"},Z5e={key:0,class:"mb-2"},e6e={key:1},t6e={class:"text-center"},n6e={class:"mb-4"},a6e={class:"mb-4"},r6e={class:"text-caption"},s6e={key:0,class:"mb-4"},o6e={class:"mt-2"},i6e={key:1},l6e={__name:"data-page",setup(e){const t=R(0);WA();const n=R(null),a=R(!1),r=R(""),s=R(!1),o=R(""),l=R(!1),c=R(null),f=R(!1),d=R(0),A=R(""),m=R([]),p=R([]),h=R({selectedEMR:"",selectedDataType:"patients",importFile:null}),y=R(!1),g=R(0),_=R(""),b=R([]),S=R(null),B=R(!1),F=R({dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""}),T=R([{title:"Data Type",key:"type",sortable:!0},{title:"Import Source",key:"importSource",sortable:!0},{title:"Records Processed",key:"processed",sortable:!0},{title:"Records Imported",key:"imported",sortable:!0},{title:"Duplicates Skipped",key:"duplicates",sortable:!0},{title:"With Import ID",key:"withImportID",sortable:!0},{title:"Errors",key:"errors",sortable:!0},{title:"Status",key:"status",sortable:!0}]),E=R([{title:"Date",key:"date",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Data Types",key:"dataTypes",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0},{title:"Actions",key:"actions",sortable:!1}]),x=R([{title:"Row",key:"row",sortable:!0,width:"80px"},{title:"Patient Data",key:"patientData",sortable:!1},{title:"Error",key:"error",sortable:!1},{title:"Actions",key:"actions",sortable:!1,width:"100px"}]),C=R([{title:"IMPORT",disabled:!1},{title:"EXPORT",disabled:!1}]),D=Z=>{h.value={...h.value,...Z}},U=Z=>{F.value={...F.value,...Z}},L=()=>{h.value={selectedEMR:"",selectedDataType:"patients",importFile:null}},H=Z=>{Z.success?(a.value=!0,r.value=`Evamed template downloaded successfully: ${Z.filename}`):(s.value=!0,o.value=`Failed to download template: ${Z.error}`)},oe=()=>{F.value={dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""}},de=async Z=>{try{if(f.value=!0,d.value=0,A.value="Initializing import...",m.value=[],p.value=[],console.log("Starting import with filters:",Z),!Z.importFile)throw new Error("No file selected for import");if(!Z.selectedEMR)throw new Error("No EMR system selected");let ne;if(Array.isArray(Z.importFile))ne=Z.importFile[0];else if(Z.importFile instanceof File)ne=Z.importFile;else throw new Error("Invalid file format");if(!ne)throw new Error("No valid file found");const G=Z.selectedEMR;if(console.log("Processing file:",ne.name,"for EMR:",G),console.log("Full filterData:",Z),!G||G.trim()==="")throw new Error("EMR system is required and cannot be empty");A.value="Saving import file...";const W=await M9(ne,G);if(!W.success)throw new Error(`Failed to save import file: ${W.error}`);d.value=10,console.log(`Import file saved: ${W.fileName}`),A.value="Reading and validating file...";const{readImportFile:Q,validateFileHeaders:O}=await ns(async()=>{const{readImportFile:z,validateFileHeaders:se}=await Promise.resolve().then(()=>h5e);return{readImportFile:z,validateFileHeaders:se}},void 0,import.meta.url);let ae;try{ae=await Q(ne,G)}catch(z){throw new Error(`Failed to read file: ${z.message}`)}const j=O(ae.headers,G);if(!j.isValid)throw new Error(`File validation failed: ${j.error}`);d.value=20;const J=H9(ae.totalRows);A.value=`Processing ${ae.totalRows} patient records (${J})...`;const ie=await L9(ae,G,z=>{if(z.phase==="mapping")d.value=20+z.current/z.total*30,A.value=`Mapping data: ${z.current} of ${z.total}`,z.currentPatient&&(A.value+=` (${z.currentPatient})`);else if(z.phase==="duplicate-check")d.value=50+z.current/z.total*10,A.value=z.message||"Checking for existing patients...";else if(z.phase==="bulk-insert")d.value=60+z.current/z.total*30,A.value=z.message||"Bulk inserting patients...";else if(z.phase==="complete"&&(d.value=90+z.current/z.total*10,A.value=z.message||"Import completed!",z.successful>0||z.failed>0||z.duplicates>0)){const se=[];z.successful>0&&se.push(`Success: ${z.successful}`),z.failed>0&&se.push(`Failed: ${z.failed}`),z.duplicates>0&&se.push(`Duplicates: ${z.duplicates}`),A.value+=` - ${se.join(", ")}`}z.lastError&&z.failed>0&&console.warn("Import error:",z.lastError)});p.value=ie.errors||[];const X=ie.patients?ie.patients.filter(z=>z.importID&&z.importID.trim()!=="").length:0;d.value=100,f.value=!1;const fe=G==="practo"?"Practo":G==="ekacare"?"Eka.Care":G==="healthplix"?"Healthplix":G==="evamed-custom"?"Evamed Custom Template":G==="tatvacare"?"TatvaCare":G;m.value=[{type:"Patient Records",importSource:fe,processed:ie.total,imported:ie.successful,duplicates:ie.duplicates||0,withImportID:X,errors:ie.failed,status:ie.failed===0?"Success":"Partial Success"}];const M=ie.duplicates||0;if(ie.failed===0&&M===0)A.value=`${fe} import completed successfully! ${ie.successful} patients imported.`,a.value=!0,r.value=`Successfully imported ${ie.successful} patients from ${fe}!`;else if(ie.failed===0&&M>0)A.value=`${fe} import completed successfully! ${ie.successful} patients imported, ${M} duplicates skipped.`,a.value=!0,r.value=`Successfully imported ${ie.successful} patients from ${fe} (${M} duplicates skipped)!`;else{const z=M>0?`, ${M} duplicates skipped`:"";A.value=`${fe} import completed with ${ie.failed} errors. ${ie.successful} patients imported successfully${z}.`,s.value=!0,o.value=`${fe} import completed with ${ie.failed} errors out of ${ie.total} records${z}.`}console.log("Import Results:",ie),ie.errors.length>0&&console.log("Import Errors:",ie.errors)}catch(ne){console.error("Import error:",ne),f.value=!1,d.value=0,s.value=!0,o.value="Import failed: "+ne.message,A.value=`Import failed: ${ne.message}`}},te=async Z=>{try{y.value=!0,g.value=0,_.value="Preparing export...",S.value=null,B.value=!1,console.log("Starting export with filters:",Z),g.value=10,_.value="Collecting data...";const ne=await g5e(Z);if(!ne.success)throw new Error(ne.error||"Failed to collect export data");g.value=50,_.value=`Found ${ne.summary.totalRecords} records. Formatting data...`;const G=_5e(ne);g.value=80,_.value="Preparing file for download...";const W=await x5e(G,ne.summary);if(!W.success)throw new Error(W.error||"Failed to save export file");g.value=100,_.value="Export completed successfully!",S.value={...ne.summary,filePath:W.filePath,filename:W.filename},B.value=!0;const Q={id:Date.now().toString(),date:new Date().toLocaleDateString(),format:"CSV",dataTypes:ne.summary.dataTypes.map(O=>O.displayName).join(", "),recordCount:ne.summary.totalRecords,status:"Completed",filePath:W.filePath,filename:W.filename};b.value.unshift(Q),a.value=!0,r.value=`Export completed! ${ne.summary.totalRecords} records exported.`}catch(ne){console.error("Export error:",ne),y.value=!1,g.value=0,_.value="",B.value=!1,s.value=!0,o.value="Export failed: "+ne.message}finally{setTimeout(()=>{B.value&&(y.value=!1)},1500)}},q=Z=>{console.log("Opening export:",Z),window.require.electronAPI&&Z.filePath&&window.require.electronAPI.showItemInFolder(Z.filePath),a.value=!0,r.value=`Opened ${Z.format} export location`},ce=Z=>{if(!Z||!Array.isArray(Z))return"No data available";const ne=Z[0]||"Unknown",G=Z[3]||Z[1]||"No contact";return`${ne} (${G})`},le=Z=>{let ne=null;Z.mappedData&&(ne={source:Z.mappedData.importSource||"Unknown",importID:Z.mappedData.importID||null}),c.value={row:Z.row,patientData:Z.patientData,error:Z.error,formattedData:ce(Z.patientData),importInfo:ne},l.value=!0};return An(()=>{try{console.log("Data page initialized")}catch(Z){console.error("Error setting up data page:",Z),n.value="Failed to initialize data page"}}),(Z,ne)=>{const G=I("v-alert"),W=I("v-tab"),Q=I("v-tabs"),O=I("v-card"),ae=I("v-col"),j=I("v-row"),J=I("v-card-text"),ie=I("v-progress-circular"),X=I("v-data-table"),fe=I("v-icon"),M=I("v-expansion-panel-title"),z=I("v-chip"),se=I("v-btn"),be=I("v-expansion-panel-text"),Fe=I("v-expansion-panel"),ye=I("v-expansion-panels"),Qe=I("v-window-item"),_e=I("v-card-title"),Se=I("v-window"),Ee=I("v-snackbar"),Ue=I("v-spacer"),je=I("v-card-actions"),at=I("v-dialog"),mt=I("v-main");return P(),he(mt,null,{default:u(()=>[i(En,{feature:"data"},{default:u(()=>[n.value?(P(),he(G,{key:0,type:"error",dismissible:"","onClick:close":ne[0]||(ne[0]=xe=>n.value=null),class:"ma-3"},{default:u(()=>[N(K(n.value),1)]),_:1})):ge("",!0),i(j,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[i(ae,{cols:"12"},{default:u(()=>[i(O,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[i(Q,{modelValue:t.value,"onUpdate:modelValue":ne[1]||(ne[1]=xe=>t.value=xe),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(C.value,(xe,Be)=>(P(),he(W,{key:Be,value:Be,disabled:xe.disabled},{default:u(()=>[N(K(xe.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(Se,{modelValue:t.value,"onUpdate:modelValue":ne[2]||(ne[2]=xe=>t.value=xe),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[i(Qe,{value:0,style:{height:"100%"}},{default:u(()=>[i(En,{permission:"data.import"},{default:u(()=>[i(j,{"aria-label":"import row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[i(ae,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",M5e,[i(F5e,{filters:h.value,loading:f.value,onFilterChange:D,onStartImport:de,onClearFilters:L,onTemplateDownloaded:H},null,8,["filters","loading"])])]),_:1}),i(ae,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",O5e,[i(O,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i(O,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(J,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[m.value.length>0?(P(),Ae(ze,{key:0},[v("strong",null,K(m.value[0]?.imported||0),1),ne[7]||(ne[7]=N(" records imported ",-1))],64)):(P(),Ae("strong",H5e,"Import Data"))]),_:1})]),_:1}),f.value?(P(),he(j,{key:0,"no-gutters":""},{default:u(()=>[i(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",$5e,[i(ie,{indeterminate:"",color:"primary",size:"64"}),v("div",Q5e,K(A.value||"Processing import..."),1)])]),_:1})]),_:1})):m.value.length>0?(P(),he(j,{key:1,"no-gutters":""},{default:u(()=>[i(ae,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[i(X,{headers:T.value,items:m.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"]),p.value.length>0?(P(),he(ye,{key:0,class:"ma-2"},{default:u(()=>[i(Fe,null,{default:u(()=>[i(M,null,{default:u(()=>[i(fe,{color:"error",class:"mr-2"},{default:u(()=>[...ne[8]||(ne[8]=[N("mdi-alert-circle",-1)])]),_:1}),N(" Failed Records ("+K(p.value.length)+") ",1)]),_:1}),i(be,null,{default:u(()=>[i(X,{headers:x.value,items:p.value,class:"elevation-1",density:"comfortable","items-per-page":10,"items-per-page-options":[5,10,25,50]},{"item.patientData":u(({item:xe})=>[i(z,{size:"small",color:"grey",variant:"outlined"},{default:u(()=>[N(K(ce(xe.patientData)),1)]),_:2},1024)]),"item.error":u(({item:xe})=>[i(z,{size:"small",color:"error",variant:"outlined"},{default:u(()=>[N(K(xe.error),1)]),_:2},1024)]),"item.actions":u(({item:xe})=>[i(se,{size:"small",color:"primary",variant:"text",onClick:Be=>le(xe)},{default:u(()=>[i(fe,{size:"small"},{default:u(()=>[...ne[9]||(ne[9]=[N("mdi-eye",-1)])]),_:1}),ne[10]||(ne[10]=N(" Details ",-1))]),_:1},8,["onClick"])]),_:2},1032,["headers","items"])]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1})):(P(),he(j,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[i(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",G5e,[i(fe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...ne[11]||(ne[11]=[N("mdi-cloud-upload",-1)])]),_:1}),ne[12]||(ne[12]=v("div",{class:"text-h6 mb-2"},"Import Data",-1)),ne[13]||(ne[13]=v("div",{class:"text-body-2 text-medium-emphasis"},"Select EMR system and file to begin import process",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),i(Qe,{value:1,style:{height:"100%"}},{default:u(()=>[i(En,{permission:"data.export"},{default:u(()=>[i(j,{"aria-label":"export row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[i(ae,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",z5e,[i(L5e,{filters:F.value,loading:y.value,onFilterChange:U,onStartExport:te,onClearFilters:oe},null,8,["filters","loading"])])]),_:1}),i(ae,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",W5e,[i(O,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i(O,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(J,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[b.value.length>0?(P(),Ae(ze,{key:0},[v("strong",null,K(b.value.length),1),N(" export"+K(b.value.length!==1?"s":"")+" available ",1)],64)):(P(),Ae("strong",K5e,"Export Data"))]),_:1})]),_:1}),y.value?(P(),he(j,{key:0,"no-gutters":""},{default:u(()=>[i(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",j5e,[i(ie,{"model-value":g.value,color:"primary",size:"64",width:"6"},{default:u(()=>[N(K(g.value)+"% ",1)]),_:1},8,["model-value"]),v("div",q5e,K(_.value||"Processing export..."),1),S.value?(P(),Ae("div",Y5e,[i(O,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[i(_e,{class:"text-h6"},{default:u(()=>[...ne[14]||(ne[14]=[N("Export Summary",-1)])]),_:1}),i(J,null,{default:u(()=>[v("div",X5e,[ne[15]||(ne[15]=v("strong",null,"Total Records:",-1)),N(" "+K(S.value.totalRecords),1)]),v("div",J5e,[ne[16]||(ne[16]=v("strong",null,"Data Types:",-1)),(P(!0),Ae(ze,null,Jt(S.value.dataTypes,xe=>(P(),Ae("div",{key:xe.type,class:"ml-2"},K(xe.displayName)+": "+K(xe.count)+" records ",1))),128))]),S.value.dateRange?(P(),Ae("div",Z5e,[ne[17]||(ne[17]=v("strong",null,"Date Range:",-1)),N(" "+K(S.value.dateRange.from)+" - "+K(S.value.dateRange.to),1)])):ge("",!0),B.value&&S.value.filename?(P(),Ae("div",e6e,[ne[18]||(ne[18]=v("strong",null,"File:",-1)),N(" "+K(S.value.filename),1)])):ge("",!0)]),_:1})]),_:1})])):ge("",!0)])]),_:1})]),_:1})):b.value.length>0?(P(),he(j,{key:1,"no-gutters":""},{default:u(()=>[i(ae,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[i(X,{headers:E.value,items:b.value,class:"elevation-1 ma-2",density:"comfortable"},{"item.actions":u(({item:xe})=>[i(se,{size:"small",color:"primary",variant:"text",onClick:Be=>q(xe)},{default:u(()=>[i(fe,null,{default:u(()=>[...ne[19]||(ne[19]=[N("mdi-download",-1)])]),_:1}),ne[20]||(ne[20]=N(" Download ",-1))]),_:1},8,["onClick"])]),_:2},1032,["headers","items"])]),_:1})]),_:1})):(P(),he(j,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[i(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",t6e,[i(fe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...ne[21]||(ne[21]=[N("mdi-download",-1)])]),_:1}),ne[22]||(ne[22]=v("div",{class:"text-h6 mb-2"},"Export Data",-1)),ne[23]||(ne[23]=v("div",{class:"text-body-2 text-medium-emphasis"},"Configure export settings and start export process",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(Ee,{modelValue:a.value,"onUpdate:modelValue":ne[3]||(ne[3]=xe=>a.value=xe),class:"elevation-24",color:"success"},{default:u(()=>[N(K(r.value),1)]),_:1},8,["modelValue"]),i(Ee,{modelValue:s.value,"onUpdate:modelValue":ne[4]||(ne[4]=xe=>s.value=xe),class:"elevation-24",color:"error"},{default:u(()=>[N(K(o.value),1)]),_:1},8,["modelValue"]),i(at,{modelValue:l.value,"onUpdate:modelValue":ne[6]||(ne[6]=xe=>l.value=xe),"max-width":"600px"},{default:u(()=>[i(O,null,{default:u(()=>[i(_e,{class:"text-h6"},{default:u(()=>[i(fe,{color:"error",class:"mr-2"},{default:u(()=>[...ne[24]||(ne[24]=[N("mdi-alert-circle",-1)])]),_:1}),N(" Error Details - Row "+K(c.value?.row),1)]),_:1}),i(J,null,{default:u(()=>[i(j,null,{default:u(()=>[i(ae,{cols:"12"},{default:u(()=>[v("div",n6e,[ne[25]||(ne[25]=v("strong",null,"Error Message:",-1)),i(z,{color:"error",variant:"outlined",class:"ml-2"},{default:u(()=>[N(K(c.value?.error),1)]),_:1})]),v("div",a6e,[ne[26]||(ne[26]=v("strong",null,"Patient Data:",-1)),i(O,{variant:"outlined",class:"mt-2 pa-3"},{default:u(()=>[v("pre",r6e,K(JSON.stringify(c.value?.patientData,null,2)),1)]),_:1})]),c.value?.importInfo?(P(),Ae("div",s6e,[ne[28]||(ne[28]=v("strong",null,"Import Information:",-1)),v("div",o6e,[i(z,{color:"info",variant:"outlined",class:"mr-2"},{default:u(()=>[N(" Source: "+K(c.value.importInfo.source),1)]),_:1}),c.value.importInfo.importID?(P(),he(z,{key:0,color:"secondary",variant:"outlined"},{default:u(()=>[N(" ID: "+K(c.value.importInfo.importID),1)]),_:1})):(P(),he(z,{key:1,color:"warning",variant:"outlined"},{default:u(()=>[...ne[27]||(ne[27]=[N(" No Import ID ",-1)])]),_:1}))])])):ge("",!0),c.value?.formattedData?(P(),Ae("div",i6e,[ne[29]||(ne[29]=v("strong",null,"Formatted Data:",-1)),i(z,{color:"primary",variant:"outlined",class:"ml-2"},{default:u(()=>[N(K(c.value.formattedData),1)]),_:1})])):ge("",!0)]),_:1})]),_:1})]),_:1}),i(je,null,{default:u(()=>[i(Ue),i(se,{color:"primary",onClick:ne[5]||(ne[5]=xe=>l.value=!1)},{default:u(()=>[...ne[30]||(ne[30]=[N(" Close ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},u6e=en(l6e,[["__scopeId","data-v-6767bc22"]]),c6e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},d6e={class:"filter-field mb-3"},f6e={class:"filter-field mb-3"},A6e={key:0,class:"text-caption"},m6e={class:"filter-section mb-3"},v6e={class:"filter-section mb-3"},h6e={class:"d-flex justify-center mt-4 mb-2"},p6e={class:"d-flex justify-center"},g6e={__name:"ResearchFilter",props:{modelValueDiagnosis:{type:String,default:null},modelValueMedicine:{type:String,default:null},modelValueDateFrom:{type:String,default:""},modelValueDateTo:{type:String,default:""},modelValuePatientName:{type:String,default:""},modelValueGender:{type:String,default:""},modelValueAgeGreaterThan:{type:[String,Number],default:""},modelValueAgeLessThan:{type:[String,Number],default:""},maxDate:{type:String,default:()=>Tn()},isSearching:{type:Boolean,default:!1}},emits:["update:modelValueDiagnosis","update:modelValueMedicine","update:modelValueDateFrom","update:modelValueDateTo","update:modelValuePatientName","update:modelValueGender","update:modelValueAgeGreaterThan","update:modelValueAgeLessThan","filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=R(n.modelValueDiagnosis),s=R(n.modelValueMedicine),o=R(n.modelValueDateFrom),l=R(n.modelValueDateTo),c=R(n.modelValuePatientName),f=R(n.modelValueGender),d=R(n.modelValueAgeGreaterThan),A=R(n.modelValueAgeLessThan),m=R(""),p=R(""),h=R(""),y=R(""),g=R(""),_=R(""),b=R(""),S=R(""),B=R(""),F=R([]),T=R(!1),E=[{title:"Male",value:"Male"},{title:"Female",value:"Female"}],x=ee(()=>!!(m.value||p.value||h.value||y.value||g.value||_.value||b.value||S.value));Ge(()=>n.modelValueDiagnosis,ce=>{r.value=ce}),Ge(()=>n.modelValueMedicine,ce=>{s.value=ce}),Ge(()=>n.modelValueDateFrom,ce=>{o.value=ce}),Ge(()=>n.modelValueDateTo,ce=>{l.value=ce}),Ge(()=>n.modelValuePatientName,ce=>{c.value=ce}),Ge(()=>n.modelValueGender,ce=>{f.value=ce}),Ge(()=>n.modelValueAgeGreaterThan,ce=>{d.value=ce}),Ge(()=>n.modelValueAgeLessThan,ce=>{A.value=ce}),Ge(r,ce=>{a("update:modelValueDiagnosis",ce),D()}),Ge(s,ce=>{a("update:modelValueMedicine",ce),D()}),Ge(o,ce=>{a("update:modelValueDateFrom",ce),H(),oe(),D()}),Ge(l,ce=>{a("update:modelValueDateTo",ce),oe(),H(),D()}),Ge(c,ce=>{a("update:modelValuePatientName",ce),D()}),Ge(f,ce=>{a("update:modelValueGender",ce),D()}),Ge(d,ce=>{a("update:modelValueAgeGreaterThan",ce),de(),D()}),Ge(A,ce=>{a("update:modelValueAgeLessThan",ce),de(),D()});let C=null;const D=()=>{const ce=typeof s.value=="object"&&s.value!==null?s.value.productName:s.value;a("filter-change",{diagnosis:r.value,medicine:ce,dateFrom:o.value,dateTo:l.value,patientName:c.value,gender:f.value,ageGreaterThan:d.value,ageLessThan:A.value,hasErrors:x.value})},U=()=>{if(!x.value){const ce={diagnosis:r.value,medicine:s.value,dateFrom:o.value,dateTo:l.value,patientName:c.value,gender:f.value,ageGreaterThan:d.value,ageLessThan:A.value};console.log(" ResearchFilter: Starting search with filters"),a("search",ce)}},L=()=>{r.value=null,s.value=null,o.value="",l.value="",c.value="",f.value="",d.value="",A.value="",B.value="",m.value="",p.value="",h.value="",y.value="",g.value="",_.value="",b.value="",S.value="",a("clear-filters")},H=()=>{h.value="",o.value&&l.value&&o.value>l.value&&(h.value="From date cannot be after to date")},oe=()=>{y.value="",o.value&&l.value&&l.value<o.value&&(y.value="To date cannot be before from date")},de=()=>{b.value="",S.value="",d.value&&(isNaN(d.value)||d.value<0)&&(b.value="Please enter a valid age"),A.value&&(isNaN(A.value)||A.value<0)&&(S.value="Please enter a valid age"),d.value&&A.value&&parseInt(d.value)>=parseInt(A.value)&&(b.value='Must be less than "Age less than"',S.value='Must be greater than "Age greater than"')},te=ce=>{clearTimeout(C),C=setTimeout(()=>{q(ce)},300)},q=async ce=>{T.value=!0;try{const le=await FH(ce);if(le.error)F.value=[];else{const Z=le.data||[];F.value=Z.filter(ne=>ne.isLocal===!0)}}catch(le){console.error("Error fetching medicines:",le),F.value=[]}finally{T.value=!1}};return(ce,le)=>{const Z=I("v-card-text"),ne=I("v-card"),G=I("v-text-field"),W=I("v-icon"),Q=I("v-list-item"),O=I("v-list-item-title"),ae=I("v-autocomplete"),j=I("v-col"),J=I("v-row"),ie=I("v-select"),X=I("v-btn");return P(),he(ne,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[i(ne,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(Z,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...le[10]||(le[10]=[v("span",{class:"text-body-2 font-weight-medium"},"Research Filters",-1)])]),_:1})]),_:1}),v("div",c6e,[v("div",d6e,[i(G,{modelValue:r.value,"onUpdate:modelValue":le[0]||(le[0]=fe=>r.value=fe),label:"Diagnosis",placeholder:"Enter diagnosis name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":m.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),v("div",f6e,[i(ae,{modelValue:s.value,"onUpdate:modelValue":le[1]||(le[1]=fe=>s.value=fe),search:B.value,"onUpdate:search":[le[2]||(le[2]=fe=>B.value=fe),te],items:F.value,loading:T.value,"item-title":"productName","item-value":"item","return-object":"",label:"Medicine",placeholder:"Search for medicine...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":p.value},{item:u(({props:fe,item:M})=>[i(Q,Ie(fe,{title:M.raw.productName}),{subtitle:u(()=>[M.raw.marketer?(P(),Ae("span",A6e,K(M.raw.marketer),1)):ge("",!0)]),append:u(()=>[i(W,null,{default:u(()=>[...le[11]||(le[11]=[v("img",{src:af,alt:"Saved Medicine"},null,-1)])]),_:1})]),_:2},1040,["title"])]),"no-data":u(()=>[B.value&&B.value.length>=3?(P(),he(Q,{key:0},{default:u(()=>[i(O,null,{default:u(()=>[N('No medicines found matching "'+K(B.value)+'"',1)]),_:1})]),_:1})):(P(),he(Q,{key:1},{default:u(()=>[i(O,null,{default:u(()=>[...le[12]||(le[12]=[N("Type at least 3 characters to search",-1)])]),_:1})]),_:1}))]),_:1},8,["modelValue","search","items","loading","error-messages"])]),v("div",m6e,[le[13]||(le[13]=v("div",{class:"filter-section-label mb-2"},"Date Range",-1)),i(J,{dense:""},{default:u(()=>[i(j,{cols:"6"},{default:u(()=>[i(G,{modelValue:o.value,"onUpdate:modelValue":le[3]||(le[3]=fe=>o.value=fe),type:"date",label:"From Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:l.value||e.maxDate,"error-messages":h.value,onInput:H,onClick:le[4]||(le[4]=fe=>fe.target.showPicker&&fe.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),i(j,{cols:"6"},{default:u(()=>[i(G,{modelValue:l.value,"onUpdate:modelValue":le[5]||(le[5]=fe=>l.value=fe),type:"date",label:"To Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",min:o.value,max:e.maxDate,"error-messages":y.value,onInput:oe,onClick:le[6]||(le[6]=fe=>fe.target.showPicker&&fe.target.showPicker())},null,8,["modelValue","min","max","error-messages"])]),_:1})]),_:1})]),v("div",v6e,[le[14]||(le[14]=v("div",{class:"filter-section-label mb-2"},"Demographics",-1)),i(ie,{modelValue:f.value,"onUpdate:modelValue":le[7]||(le[7]=fe=>f.value=fe),items:E,label:"Gender",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input mb-2","error-messages":_.value},null,8,["modelValue","error-messages"]),i(J,{dense:""},{default:u(()=>[i(j,{cols:"6"},{default:u(()=>[i(G,{modelValue:d.value,"onUpdate:modelValue":le[8]||(le[8]=fe=>d.value=fe),type:"number",label:"Age >",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":b.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1}),i(j,{cols:"6"},{default:u(()=>[i(G,{modelValue:A.value,"onUpdate:modelValue":le[9]||(le[9]=fe=>A.value=fe),type:"number",label:"Age <",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":S.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),v("div",h6e,[i(X,{color:"primary",size:"small","prepend-icon":"mdi-database-search",onClick:U,loading:e.isSearching,disabled:x.value,class:"filter-button"},{default:u(()=>[...le[15]||(le[15]=[N(" Search ",-1)])]),_:1},8,["loading","disabled"])]),v("div",p6e,[i(X,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:L,class:"filter-button-clear"},{default:u(()=>[...le[16]||(le[16]=[N(" Clear ",-1)])]),_:1})])])]),_:1})}}},y6e=en(g6e,[["__scopeId","data-v-1e00cd36"]]),_6e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},w6e={class:"filter-field mb-3"},b6e={class:"filter-section mb-3"},x6e={class:"filter-section mb-3"},C6e={class:"d-flex justify-center mt-4 mb-2"},S6e={class:"d-flex justify-center"},E6e={__name:"ProcedureResearchFilter",props:{modelValueProcedureName:{type:String,default:""},modelValueDateFrom:{type:String,default:""},modelValueDateTo:{type:String,default:""},modelValueGender:{type:String,default:""},modelValueAgeGreaterThan:{type:[String,Number],default:""},modelValueAgeLessThan:{type:[String,Number],default:""},maxDate:{type:String,default:()=>Tn()},isSearching:{type:Boolean,default:!1}},emits:["update:modelValueProcedureName","update:modelValueDateFrom","update:modelValueDateTo","update:modelValueGender","update:modelValueAgeGreaterThan","update:modelValueAgeLessThan","filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=R(n.modelValueProcedureName||""),s=R(n.modelValueDateFrom||""),o=R(n.modelValueDateTo||""),l=R(n.modelValueGender||""),c=R(n.modelValueAgeGreaterThan||""),f=R(n.modelValueAgeLessThan||""),d=R(""),A=R(""),m=R(""),p=R(""),h=R(""),y=R(""),g=[{title:"Male",value:"Male"},{title:"Female",value:"Female"}],_=ee(()=>!!(d.value||A.value||m.value||p.value||h.value||y.value)),b=()=>{A.value="",s.value&&o.value&&s.value>o.value&&(A.value="From date cannot be after To date"),s.value&&n.maxDate&&s.value>n.maxDate&&(A.value="From date cannot be in the future")},S=()=>{m.value="",s.value&&o.value&&o.value<s.value&&(m.value="To date cannot be before From date"),o.value&&n.maxDate&&o.value>n.maxDate&&(m.value="To date cannot be in the future")},B=()=>{h.value="",y.value="";const x=parseInt(c.value),C=parseInt(f.value);c.value&&(isNaN(x)||x<0||x>150)&&(h.value="Age must be between 0 and 150"),f.value&&(isNaN(C)||C<0||C>150)&&(y.value="Age must be between 0 and 150"),c.value&&f.value&&x>=C&&(h.value='Must be less than "Age Less Than"',y.value='Must be greater than "Age Greater Than"')},F=Kn.debounce(()=>{const x={procedureName:r.value,dateFrom:s.value,dateTo:o.value,gender:l.value,ageGreaterThan:c.value,ageLessThan:f.value};a("filter-change",x)},300);Ge(()=>n.modelValueProcedureName,x=>{x!==r.value&&(r.value=x||"")}),Ge(()=>n.modelValueDateFrom,x=>{x!==s.value&&(s.value=x||"")}),Ge(()=>n.modelValueDateTo,x=>{x!==o.value&&(o.value=x||"")}),Ge(()=>n.modelValueGender,x=>{x!==l.value&&(l.value=x||"")}),Ge(()=>n.modelValueAgeGreaterThan,x=>{x!==c.value&&(c.value=x||"")}),Ge(()=>n.modelValueAgeLessThan,x=>{x!==f.value&&(f.value=x||"")}),Ge(r,x=>{a("update:modelValueProcedureName",x),F()}),Ge(s,x=>{a("update:modelValueDateFrom",x),b(),S(),F()}),Ge(o,x=>{a("update:modelValueDateTo",x),S(),b(),F()}),Ge(l,x=>{a("update:modelValueGender",x),F()}),Ge(c,x=>{a("update:modelValueAgeGreaterThan",x),B(),F()}),Ge(f,x=>{a("update:modelValueAgeLessThan",x),B(),F()});const T=async()=>{if(b(),S(),B(),await Cn(),_.value){console.log(" Cannot search: validation errors present");return}const x={procedureName:r.value,dateFrom:s.value,dateTo:o.value,gender:l.value,ageGreaterThan:c.value,ageLessThan:f.value};console.log(" Procedure research search triggered with filters:",x),a("search",x)},E=()=>{r.value="",s.value="",o.value="",l.value="",c.value="",f.value="",d.value="",A.value="",m.value="",p.value="",h.value="",y.value="",a("clear-filters")};return(x,C)=>{const D=I("v-card-text"),U=I("v-card"),L=I("v-text-field"),H=I("v-col"),oe=I("v-row"),de=I("v-select"),te=I("v-btn");return P(),he(U,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[i(U,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(D,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...C[8]||(C[8]=[v("span",{class:"text-body-2 font-weight-medium"},"Procedure Research Filters",-1)])]),_:1})]),_:1}),v("div",_6e,[v("div",w6e,[i(L,{modelValue:r.value,"onUpdate:modelValue":C[0]||(C[0]=q=>r.value=q),label:"Procedure Name",placeholder:"Enter procedure name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":d.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),v("div",b6e,[C[9]||(C[9]=v("div",{class:"filter-section-label mb-2"},"Date Range",-1)),i(oe,{dense:""},{default:u(()=>[i(H,{cols:"6"},{default:u(()=>[i(L,{modelValue:s.value,"onUpdate:modelValue":C[1]||(C[1]=q=>s.value=q),type:"date",label:"From Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:o.value||e.maxDate,"error-messages":A.value,onInput:b,onClick:C[2]||(C[2]=q=>q.target.showPicker&&q.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),i(H,{cols:"6"},{default:u(()=>[i(L,{modelValue:o.value,"onUpdate:modelValue":C[3]||(C[3]=q=>o.value=q),type:"date",label:"To Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",min:s.value,max:e.maxDate,"error-messages":m.value,onInput:S,onClick:C[4]||(C[4]=q=>q.target.showPicker&&q.target.showPicker())},null,8,["modelValue","min","max","error-messages"])]),_:1})]),_:1})]),v("div",x6e,[C[10]||(C[10]=v("div",{class:"filter-section-label mb-2"},"Demographics",-1)),i(de,{modelValue:l.value,"onUpdate:modelValue":C[5]||(C[5]=q=>l.value=q),items:g,label:"Gender",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input mb-2","error-messages":p.value},null,8,["modelValue","error-messages"]),i(oe,{dense:""},{default:u(()=>[i(H,{cols:"6"},{default:u(()=>[i(L,{modelValue:c.value,"onUpdate:modelValue":C[6]||(C[6]=q=>c.value=q),type:"number",label:"Age >",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":h.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1}),i(H,{cols:"6"},{default:u(()=>[i(L,{modelValue:f.value,"onUpdate:modelValue":C[7]||(C[7]=q=>f.value=q),type:"number",label:"Age <",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":y.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),v("div",C6e,[i(te,{color:"primary",size:"small","prepend-icon":"mdi-database-search",onClick:T,loading:e.isSearching,disabled:_.value,class:"filter-button"},{default:u(()=>[...C[11]||(C[11]=[N(" Search ",-1)])]),_:1},8,["loading","disabled"])]),v("div",S6e,[i(te,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:E,class:"filter-button-clear"},{default:u(()=>[...C[12]||(C[12]=[N(" Clear ",-1)])]),_:1})])])]),_:1})}}},k6e=en(E6e,[["__scopeId","data-v-1d811a88"]]),B6e={class:"scrollable-content"},T6e={class:"scrollable-content"},I6e={class:"d-flex align-center"},F6e={key:0,class:"text-medium-emphasis ml-2"},P6e={key:1},D6e={key:0,class:"d-flex align-center flex-wrap gap-2"},U6e={class:"text-body-2"},R6e={class:"font-weight-medium"},N6e={class:"text-body-2"},V6e={class:"font-weight-medium"},L6e={class:"text-body-2"},M6e={class:"font-weight-medium"},O6e={class:"text-body-2"},H6e={class:"font-weight-medium"},$6e={class:"text-center"},Q6e={class:"text-center"},G6e={class:"text-body-2 text-medium-emphasis mb-4"},z6e={class:"text-center"},W6e={class:"d-flex align-center"},K6e={class:"mr-2 text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},j6e={class:"text-caption text-medium-emphasis"},q6e={key:0,class:"text-body-2 mb-1"},Y6e={key:1,class:"text-body-2"},X6e={class:"scrollable-content"},J6e={class:"scrollable-content"},Z6e={class:"d-flex align-center"},eMe={key:0,class:"text-medium-emphasis ml-2"},tMe={key:1},nMe={key:0,class:"d-flex align-center flex-wrap gap-2"},aMe={class:"text-body-2"},rMe={class:"font-weight-medium"},sMe={class:"text-body-2"},oMe={class:"font-weight-medium"},iMe={class:"text-body-2"},lMe={class:"font-weight-medium"},uMe={class:"text-body-2"},cMe={class:"font-weight-medium"},dMe={class:"text-center"},fMe={class:"text-center"},AMe={class:"text-body-2 text-medium-emphasis mb-4"},mMe={class:"text-center"},vMe={class:"d-flex align-center"},hMe={class:"mr-2 text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},pMe={class:"text-caption text-medium-emphasis"},gMe={key:0,class:"text-body-2 mb-1"},yMe={__name:"research-page",setup(e){const{showSnackbar:t}=la(),n=Ln(),a=R(0);WA();const r=ml(),s=R(null),o=ee(()=>Tn()),l=R([{title:"Consultations",disabled:!1},{title:"Procedures",disabled:!1}]),c=R({diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""}),f=R({procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""}),d=ee(()=>n.state.researchModule.searchResults),A=ee(()=>n.state.researchModule.isLoading),m=ee(()=>n.state.researchModule.hasSearched),p=ee(()=>n.state.researchModule.searchError),h=ee(()=>n.getters["researchModule/searchSummary"]),y=ee(()=>n.getters["researchModule/hasActiveFilters"]),g=ee(()=>n.getters["researchModule/activeFiltersText"]),_=ee(()=>d.value.length?new Set(d.value.map(J=>J.patientId)).size:0),b=ee(()=>d.value.length?new Set(d.value.filter(J=>J.diagnosis).map(J=>J.diagnosis)).size:0),S=ee(()=>{if(!d.value.length)return 0;const j=new Set;return d.value.forEach(J=>{J.medicines&&Array.isArray(J.medicines)&&J.medicines.forEach(ie=>j.add(ie.productName))}),j.size}),B=ee(()=>d.value.length),F=ee(()=>n.state.procedureResearchModule.searchResults),T=ee(()=>n.state.procedureResearchModule.isLoading),E=ee(()=>n.state.procedureResearchModule.hasSearched),x=ee(()=>n.state.procedureResearchModule.searchError),C=ee(()=>n.getters["procedureResearchModule/searchSummary"]),D=ee(()=>n.getters["procedureResearchModule/hasActiveFilters"]),U=ee(()=>n.getters["procedureResearchModule/activeFiltersText"]),L=ee(()=>F.value.length?new Set(F.value.map(J=>J.patientId)).size:0),H=ee(()=>F.value.length?new Set(F.value.filter(J=>J.procedureName).map(J=>J.procedureName)).size:0),oe=ee(()=>F.value.length?new Set(F.value.filter(J=>J.treatmentPlanId).map(J=>J.treatmentPlanId)).size:0),de=ee(()=>F.value.length);An(()=>{try{const j=n.state.researchModule.filters;c.value={...j};const J=n.state.procedureResearchModule?.filters||{};f.value={...f.value,...J},m.value&&d.value.length>0?(console.log(" Restored previous consultation research search:",d.value.length,"results"),t({message:`Restored previous search: ${d.value.length} results`,color:"success",timeout:3e3})):y.value&&!m.value&&console.log(" Active consultation filters found, ready to search"),E.value&&F.value.length>0?console.log(" Restored previous procedure research search:",F.value.length,"results"):D.value&&!E.value&&console.log(" Active procedure filters found, ready to search")}catch(j){console.error("Error setting up research page:",j),s.value="Failed to initialize research page"}});const te=async j=>{if(A.value){console.log(" Search in progress, skipping filter update");return}try{c.value={...c.value,...j},await n.dispatch("researchModule/updateFilters",{filters:c.value}),console.log(" Research filters updated:",c.value)}catch(J){console.error("Error updating filters:",J),s.value="Failed to update search filters"}},q=async(j=null)=>{if(A.value){console.log(" Search already in progress, skipping duplicate request");return}try{console.log(" Starting research search...");const J=j||c.value;await n.dispatch("researchModule/updateFilters",{filters:J});const ie=await n.dispatch("researchModule/performSearch");ie.success?t({message:`Found ${ie.data.length} research results`,color:"success",timeout:3e3}):t({message:ie.error?.message||"Search failed",color:"error",timeout:5e3})}catch(J){console.error(" Search failed:",J),t({message:J.message||"Failed to perform search",color:"error",timeout:5e3})}},ce=async()=>{await q()},le=async()=>{if(A.value){console.log(" Search in progress, skipping filter clear");return}try{c.value={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},await n.dispatch("researchModule/clearAll"),t({message:"All filters and results cleared",color:"success",timeout:3e3})}catch(j){console.error("Error clearing filters:",j),s.value="Failed to clear filters"}},Z=j=>{try{if(!j.patientId)throw new Error("Invalid patient ID");r.push({path:`/patients/${j.patientId}`,query:{from:"research"}})}catch(J){console.error("Error navigating to patient:",J),t({message:"Failed to open patient details",color:"error",timeout:5e3})}},ne=async j=>{if(T.value){console.log(" Procedure search in progress, skipping filter update");return}try{f.value={...f.value,...j},await n.dispatch("procedureResearchModule/updateFilters",{filters:f.value}),console.log(" Procedure filters updated:",f.value)}catch(J){console.error("Error updating procedure filters:",J),s.value="Failed to update procedure search filters"}},G=async(j=null)=>{if(T.value){console.log(" Procedure search already in progress, skipping duplicate request");return}try{console.log(" Starting procedure research search...");const J=j||f.value;await n.dispatch("procedureResearchModule/updateFilters",{filters:J});const ie=await n.dispatch("procedureResearchModule/performSearch");ie.success?t({message:`Found ${ie.data.length} procedure results`,color:"success",timeout:3e3}):t({message:ie.error?.message||"Procedure search failed",color:"error",timeout:5e3})}catch(J){console.error(" Procedure search failed:",J),t({message:J.message||"Failed to perform procedure search",color:"error",timeout:5e3})}},W=async()=>{await G()},Q=async()=>{if(T.value){console.log(" Procedure search in progress, skipping filter clear");return}try{f.value={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},await n.dispatch("procedureResearchModule/clearAll"),t({message:"All procedure filters and results cleared",color:"success",timeout:3e3})}catch(j){console.error("Error clearing procedure filters:",j),s.value="Failed to clear procedure filters"}},O=j=>{try{if(!j.patientId)throw new Error("Invalid patient ID");r.push({path:`/patients/${j.patientId}`,query:{from:"research"}})}catch(J){console.error("Error navigating to patient from procedure result:",J),t({message:"Failed to open patient details",color:"error",timeout:5e3})}},ae=j=>{if(!j)return"";try{return new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return j}};return(j,J)=>{const ie=I("v-alert"),X=I("v-tab"),fe=I("v-tabs"),M=I("v-card"),z=I("v-col"),se=I("v-row"),be=I("v-card-text"),Fe=I("v-progress-circular"),ye=I("v-icon"),Qe=I("v-btn"),_e=I("v-empty-state"),Se=I("v-chip"),Ee=I("v-card-title"),Ue=I("v-lazy"),je=I("v-window-item"),at=I("v-window"),mt=I("v-main");return P(),he(mt,null,{default:u(()=>[i(En,{feature:"research"},{default:u(()=>[s.value?(P(),he(ie,{key:0,type:"error",dismissible:"","onClick:close":J[0]||(J[0]=xe=>s.value=null),class:"ma-3"},{default:u(()=>[N(K(s.value),1)]),_:1})):ge("",!0),i(se,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[i(z,{cols:"12"},{default:u(()=>[i(M,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[i(fe,{modelValue:a.value,"onUpdate:modelValue":J[1]||(J[1]=xe=>a.value=xe),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(l.value,(xe,Be)=>(P(),he(X,{key:Be,value:Be,disabled:xe.disabled},{default:u(()=>[N(K(xe.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(at,{modelValue:a.value,"onUpdate:modelValue":J[16]||(J[16]=xe=>a.value=xe),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[i(je,{value:0,style:{height:"100%"}},{default:u(()=>[i(se,{"aria-label":"research row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[i(z,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",B6e,[i(y6e,{"model-value-diagnosis":c.value.diagnosis,"onUpdate:modelValueDiagnosis":J[2]||(J[2]=xe=>c.value.diagnosis=xe),"model-value-medicine":c.value.medicine,"onUpdate:modelValueMedicine":J[3]||(J[3]=xe=>c.value.medicine=xe),"model-value-date-from":c.value.dateFrom,"onUpdate:modelValueDateFrom":J[4]||(J[4]=xe=>c.value.dateFrom=xe),"model-value-date-to":c.value.dateTo,"onUpdate:modelValueDateTo":J[5]||(J[5]=xe=>c.value.dateTo=xe),"model-value-patient-name":c.value.patientName,"onUpdate:modelValuePatientName":J[6]||(J[6]=xe=>c.value.patientName=xe),"model-value-gender":c.value.gender,"onUpdate:modelValueGender":J[7]||(J[7]=xe=>c.value.gender=xe),"model-value-age-greater-than":c.value.ageGreaterThan,"onUpdate:modelValueAgeGreaterThan":J[8]||(J[8]=xe=>c.value.ageGreaterThan=xe),"model-value-age-less-than":c.value.ageLessThan,"onUpdate:modelValueAgeLessThan":J[9]||(J[9]=xe=>c.value.ageLessThan=xe),"max-date":o.value,"is-searching":A.value,onFilterChange:te,onSearch:q,onClearFilters:le},null,8,["model-value-diagnosis","model-value-medicine","model-value-date-from","model-value-date-to","model-value-patient-name","model-value-gender","model-value-age-greater-than","model-value-age-less-than","max-date","is-searching"])])]),_:1}),i(z,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",T6e,[i(M,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i(M,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(be,{class:"pt-2 pb-2 d-flex align-center justify-space-between flex-wrap"},{default:u(()=>[v("div",I6e,[h.value&&h.value.totalResults>0?(P(),Ae(ze,{key:0},[v("strong",null,K(h.value.totalResults),1),N("research result"+K(h.value.totalResults!==1?"s":"")+" found ",1),g.value?(P(),Ae("span",F6e,"  "+K(g.value),1)):ge("",!0)],64)):(P(),Ae("strong",P6e,"Research Data Search"))]),d.value&&d.value.length>0?(P(),Ae("div",D6e,[v("span",U6e,[J[17]||(J[17]=N("Patients ",-1)),v("span",R6e,K(_.value),1)]),J[21]||(J[21]=v("span",{class:"text-body-2"},"",-1)),v("span",N6e,[J[18]||(J[18]=N("Diagnoses ",-1)),v("span",V6e,K(b.value),1)]),J[22]||(J[22]=v("span",{class:"text-body-2"},"",-1)),v("span",L6e,[J[19]||(J[19]=N("Medicines ",-1)),v("span",M6e,K(S.value),1)]),J[23]||(J[23]=v("span",{class:"text-body-2"},"",-1)),v("span",O6e,[J[20]||(J[20]=N("Consultations ",-1)),v("span",H6e,K(B.value),1)])])):ge("",!0)]),_:1})]),_:1}),A.value?(P(),he(se,{key:0,"no-gutters":""},{default:u(()=>[i(z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",$6e,[i(Fe,{indeterminate:"",size:"64",color:"primary"}),J[24]||(J[24]=v("div",{class:"mt-4 text-subtitle-1"},"Searching Research Data...",-1))])]),_:1})]),_:1})):p.value?(P(),he(se,{key:1,"no-gutters":""},{default:u(()=>[i(z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",Q6e,[i(ye,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...J[25]||(J[25]=[N("mdi-alert-circle",-1)])]),_:1}),J[27]||(J[27]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",G6e,K(p.value),1),i(Qe,{color:"primary",onClick:ce,"prepend-icon":"mdi-refresh",loading:A.value,disabled:A.value},{default:u(()=>[...J[26]||(J[26]=[N(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):d.value&&d.value.length===0&&m.value?(P(),he(_e,{key:2,image:Oe(Jv),class:"d-flex justify-center"},{title:u(()=>[...J[28]||(J[28]=[v("div",{class:"text-subtitle-2 mt-8 text-center"}," No Research Data Found ",-1)])]),text:u(()=>[...J[29]||(J[29]=[v("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all data ",-1)])]),actions:u(()=>[i(Qe,{color:"primary",variant:"outlined",onClick:le,"prepend-icon":"mdi-filter-remove",loading:A.value,disabled:A.value},{default:u(()=>[...J[30]||(J[30]=[N(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):m.value?d.value&&d.value.length>0?(P(),he(se,{key:4,"no-gutters":""},{default:u(()=>[i(z,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(P(!0),Ae(ze,null,Jt(d.value,xe=>(P(),he(Ue,{key:`${xe.patientId}-${xe.consultationId}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"50"},{default:u(()=>[i(M,{style:Mt([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:Be=>Z(xe)},{default:u(()=>[i(se,{"no-gutters":""},{default:u(()=>[i(z,{cols:"12"},{default:u(()=>[i(Ee,{class:"d-flex align-center justify-space-between pb-2 pt-2"},{default:u(()=>[v("div",W6e,[v("span",K6e,K(xe.patientName||"Unknown Patient"),1),xe.patientGender&&xe.patientGender!==""?(P(),he(Se,{key:0,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[N(K(xe.patientGender),1)]),_:2},1024)):ge("",!0),xe.patientAge&&xe.patientAge!==""?(P(),he(Se,{key:1,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[N(K(xe.patientAge?`${xe.patientAge} yrs`:""),1)]),_:2},1024)):ge("",!0)]),v("div",j6e,K(ae(xe.consultationDate)),1)]),_:2},1024),i(be,{class:"pt-0 pb-1"},{default:u(()=>[i(se,{dense:""},{default:u(()=>[i(z,{cols:"12"},{default:u(()=>[xe.diagnosis?(P(),Ae("div",q6e,[J[34]||(J[34]=v("strong",null,"Diagnosis:",-1)),N(" "+K(xe.diagnosis),1)])):ge("",!0),xe.medicines&&xe.medicines.length>0?(P(),Ae("div",Y6e,[J[35]||(J[35]=v("strong",null,"Medicines:",-1)),N(" "+K(xe.medicines.map(Be=>Be.productName).join(", ")),1)])):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0):(P(),he(se,{key:3,"no-gutters":""},{default:u(()=>[i(z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",z6e,[i(ye,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...J[31]||(J[31]=[N("mdi-database-search",-1)])]),_:1}),J[32]||(J[32]=v("div",{class:"text-h6 mb-2"},"Search for Research Data",-1)),J[33]||(J[33]=v("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to search based on diagnosis, medicines, and dates",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1}),i(je,{value:1,style:{height:"100%"}},{default:u(()=>[i(se,{"aria-label":"procedure research row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[i(z,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",X6e,[i(k6e,{"model-value-procedure-name":f.value.procedureName,"onUpdate:modelValueProcedureName":J[10]||(J[10]=xe=>f.value.procedureName=xe),"model-value-date-from":f.value.dateFrom,"onUpdate:modelValueDateFrom":J[11]||(J[11]=xe=>f.value.dateFrom=xe),"model-value-date-to":f.value.dateTo,"onUpdate:modelValueDateTo":J[12]||(J[12]=xe=>f.value.dateTo=xe),"model-value-gender":f.value.gender,"onUpdate:modelValueGender":J[13]||(J[13]=xe=>f.value.gender=xe),"model-value-age-greater-than":f.value.ageGreaterThan,"onUpdate:modelValueAgeGreaterThan":J[14]||(J[14]=xe=>f.value.ageGreaterThan=xe),"model-value-age-less-than":f.value.ageLessThan,"onUpdate:modelValueAgeLessThan":J[15]||(J[15]=xe=>f.value.ageLessThan=xe),"max-date":o.value,"is-searching":T.value,onFilterChange:ne,onSearch:G,onClearFilters:Q},null,8,["model-value-procedure-name","model-value-date-from","model-value-date-to","model-value-gender","model-value-age-greater-than","model-value-age-less-than","max-date","is-searching"])])]),_:1}),i(z,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",J6e,[i(M,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i(M,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(be,{class:"pt-2 pb-2 d-flex align-center justify-space-between flex-wrap"},{default:u(()=>[v("div",Z6e,[C.value&&C.value.totalResults>0?(P(),Ae(ze,{key:0},[v("strong",null,K(C.value.totalResults),1),N("procedure result"+K(C.value.totalResults!==1?"s":"")+" found ",1),U.value?(P(),Ae("span",eMe,"  "+K(U.value),1)):ge("",!0)],64)):(P(),Ae("strong",tMe,"Procedure Research Search"))]),F.value&&F.value.length>0?(P(),Ae("div",nMe,[v("span",aMe,[J[36]||(J[36]=N("Patients ",-1)),v("span",rMe,K(L.value),1)]),J[40]||(J[40]=v("span",{class:"text-body-2"},"",-1)),v("span",sMe,[J[37]||(J[37]=N("Procedures ",-1)),v("span",oMe,K(H.value),1)]),J[41]||(J[41]=v("span",{class:"text-body-2"},"",-1)),v("span",iMe,[J[38]||(J[38]=N("Plans ",-1)),v("span",lMe,K(oe.value),1)]),J[42]||(J[42]=v("span",{class:"text-body-2"},"",-1)),v("span",uMe,[J[39]||(J[39]=N("Total ",-1)),v("span",cMe,K(de.value),1)])])):ge("",!0)]),_:1})]),_:1}),T.value?(P(),he(se,{key:0,"no-gutters":""},{default:u(()=>[i(z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",dMe,[i(Fe,{indeterminate:"",size:"64",color:"primary"}),J[43]||(J[43]=v("div",{class:"mt-4 text-subtitle-1"},"Searching Procedure Data...",-1))])]),_:1})]),_:1})):x.value?(P(),he(se,{key:1,"no-gutters":""},{default:u(()=>[i(z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",fMe,[i(ye,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...J[44]||(J[44]=[N("mdi-alert-circle",-1)])]),_:1}),J[46]||(J[46]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",AMe,K(x.value),1),i(Qe,{color:"primary",onClick:W,"prepend-icon":"mdi-refresh",loading:T.value,disabled:T.value},{default:u(()=>[...J[45]||(J[45]=[N(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):F.value&&F.value.length===0&&E.value?(P(),he(_e,{key:2,image:Oe(Jv),class:"d-flex justify-center"},{title:u(()=>[...J[47]||(J[47]=[v("div",{class:"text-subtitle-2 mt-8 text-center"}," No Procedure Data Found ",-1)])]),text:u(()=>[...J[48]||(J[48]=[v("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all data ",-1)])]),actions:u(()=>[i(Qe,{color:"primary",variant:"outlined",onClick:Q,"prepend-icon":"mdi-filter-remove",loading:T.value,disabled:T.value},{default:u(()=>[...J[49]||(J[49]=[N(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):E.value?F.value&&F.value.length>0?(P(),he(se,{key:4,"no-gutters":""},{default:u(()=>[i(z,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(P(!0),Ae(ze,null,Jt(F.value,xe=>(P(),he(Ue,{key:`${xe.patientId}-${xe.treatmentProcedureId}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"50"},{default:u(()=>[i(M,{style:Mt([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:Be=>O(xe)},{default:u(()=>[i(se,{"no-gutters":""},{default:u(()=>[i(z,{cols:"12"},{default:u(()=>[i(Ee,{class:"d-flex align-center justify-space-between pb-2 pt-2"},{default:u(()=>[v("div",vMe,[v("span",hMe,K(xe.patientName||"Unknown Patient"),1),xe.patientGender&&xe.patientGender!==""?(P(),he(Se,{key:0,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[N(K(xe.patientGender),1)]),_:2},1024)):ge("",!0),xe.patientAge&&xe.patientAge!==""?(P(),he(Se,{key:1,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[N(K(xe.patientAge?`${xe.patientAge} yrs`:""),1)]),_:2},1024)):ge("",!0)]),v("div",pMe,K(ae(xe.procedureStartDate||xe.treatmentPlanCreatedAt)),1)]),_:2},1024),i(be,{class:"pt-0 pb-1"},{default:u(()=>[i(se,{dense:""},{default:u(()=>[i(z,{cols:"12"},{default:u(()=>[xe.procedureName?(P(),Ae("div",gMe,[J[53]||(J[53]=v("strong",null,"Procedure:",-1)),N(" "+K(xe.procedureName),1)])):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0):(P(),he(se,{key:3,"no-gutters":""},{default:u(()=>[i(z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",mMe,[i(ye,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...J[50]||(J[50]=[N("mdi-database-search",-1)])]),_:1}),J[51]||(J[51]=v("div",{class:"text-h6 mb-2"},"Search for Procedure Data",-1)),J[52]||(J[52]=v("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to search based on procedures, dates, and demographics",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},_Me=en(yMe,[["__scopeId","data-v-5b6aa477"]]),wMe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},bMe={class:"filter-field mb-3"},xMe={class:"filter-field mb-3"},CMe={class:"filter-section mb-3"},SMe={class:"filter-field mb-3"},EMe={class:"d-flex justify-center mt-4 mb-2"},kMe={class:"d-flex justify-center"},BMe={__name:"ReminderFilter",props:{filters:{type:Object,default:()=>({})},isLoading:{type:Boolean,default:!1}},emits:["filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=R(n.filters?.reminderType||""),s=R(n.filters?.reminderStatus||""),o=R(n.filters?.dateFrom||""),l=R(n.filters?.dateTo||""),c=R(n.filters?.patientName||""),f=R(""),d=R(""),A=R(""),m=R(""),p=R(""),h=[{title:"All Types",value:""},{title:"Appointment",value:"appointment"},{title:"Consultation",value:"consultation"},{title:"Procedures",value:"procedures"}],y=[{title:"All Statuses",value:""},{title:"Pending",value:"pending"},{title:"Completed",value:"completed"}],g=ee(()=>!!(f.value||d.value||A.value||m.value||p.value)),_=()=>{A.value="",o.value&&l.value&&o.value>l.value&&(A.value="From date cannot be after To date")},b=()=>{m.value="",o.value&&l.value&&l.value<o.value&&(m.value="To date cannot be before From date")},S=()=>{p.value="",c.value&&c.value.length<2&&(p.value="Patient name must be at least 2 characters")};Ge(()=>n.filters,E=>{E&&(r.value=E.reminderType||"",s.value=E.reminderStatus||"",o.value=E.dateFrom||"",l.value=E.dateTo||"",c.value=E.patientName||"")},{deep:!0}),Ge(r,()=>{B()}),Ge(s,()=>{B()}),Ge(o,()=>{_(),b(),B()}),Ge(l,()=>{b(),_(),B()}),Ge(c,()=>{S(),B()});const B=()=>{const E={reminderType:r.value,reminderStatus:s.value,dateFrom:o.value,dateTo:l.value,patientName:c.value};a("filter-change",E)},F=async()=>{if(_(),b(),S(),await Cn(),g.value){console.log(" Cannot search: validation errors present");return}const E={reminderType:r.value,reminderStatus:s.value,dateFrom:o.value,dateTo:l.value,patientName:c.value};console.log(" Reminder search triggered with filters:",E),a("search",E)},T=()=>{r.value="",s.value="",o.value="",l.value="",c.value="",f.value="",d.value="",A.value="",m.value="",p.value="",a("clear-filters")};return(E,x)=>{const C=I("v-card-text"),D=I("v-card"),U=I("v-select"),L=I("v-text-field"),H=I("v-col"),oe=I("v-row"),de=I("v-btn");return P(),he(D,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[i(D,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(C,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...x[7]||(x[7]=[v("span",{class:"text-body-2 font-weight-medium"},"Filter Reminders",-1)])]),_:1})]),_:1}),v("div",wMe,[v("div",bMe,[i(U,{modelValue:r.value,"onUpdate:modelValue":x[0]||(x[0]=te=>r.value=te),items:h,label:"Reminder Type",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":f.value},null,8,["modelValue","error-messages"])]),v("div",xMe,[i(U,{modelValue:s.value,"onUpdate:modelValue":x[1]||(x[1]=te=>s.value=te),items:y,label:"Reminder Status",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":d.value},null,8,["modelValue","error-messages"])]),v("div",CMe,[x[8]||(x[8]=v("div",{class:"filter-section-label mb-2"},"Date Range",-1)),i(oe,{dense:""},{default:u(()=>[i(H,{cols:"6"},{default:u(()=>[i(L,{modelValue:o.value,"onUpdate:modelValue":x[2]||(x[2]=te=>o.value=te),type:"date",label:"From Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:l.value,"error-messages":A.value,onInput:_,onClick:x[3]||(x[3]=te=>te.target.showPicker&&te.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),i(H,{cols:"6"},{default:u(()=>[i(L,{modelValue:l.value,"onUpdate:modelValue":x[4]||(x[4]=te=>l.value=te),type:"date",label:"To Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",min:o.value,"error-messages":m.value,onInput:b,onClick:x[5]||(x[5]=te=>te.target.showPicker&&te.target.showPicker())},null,8,["modelValue","min","error-messages"])]),_:1})]),_:1})]),v("div",SMe,[i(L,{modelValue:c.value,"onUpdate:modelValue":x[6]||(x[6]=te=>c.value=te),label:"Patient Name",placeholder:"Enter patient name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":p.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),v("div",EMe,[i(de,{color:"primary",size:"small","prepend-icon":"mdi-magnify",onClick:F,loading:e.isLoading,disabled:g.value,class:"filter-button"},{default:u(()=>[...x[9]||(x[9]=[N(" Search ",-1)])]),_:1},8,["loading","disabled"])]),v("div",kMe,[i(de,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:T,disabled:e.isLoading,class:"filter-button-clear"},{default:u(()=>[...x[10]||(x[10]=[N(" Clear ",-1)])]),_:1},8,["disabled"])]),i(D,{color:"info",variant:"tonal",class:"mt-4 pa-2",elevation:"0",rounded:"lg"},{default:u(()=>[...x[11]||(x[11]=[v("div",{class:"text-caption text-medium-emphasis mb-2"},[v("strong",null,"Default Search Windows:")],-1),v("div",{class:"text-caption"},[v("div",{class:"mb-1"},"Appointments: Next 7 days"),v("div",{class:"mb-1"},"Consultations: Next 30 days"),v("div",{class:"mb-1"},"Treatment Plans: Next 30 days")],-1)])]),_:1})])]),_:1})}}},TMe=en(BMe,[["__scopeId","data-v-3c599c88"]]),IMe={class:"scrollable-content"},FMe={class:"scrollable-content"},PMe={class:"d-flex align-center"},DMe={style:{"margin-left":"0.25em"}},UMe={key:0,class:"text-medium-emphasis ml-2"},RMe={key:1},NMe={key:0,class:"d-flex align-center flex-wrap gap-2"},VMe={class:"text-body-2"},LMe={class:"font-weight-medium"},MMe={class:"text-body-2"},OMe={class:"font-weight-medium"},HMe={class:"text-body-2"},$Me={class:"font-weight-medium"},QMe={class:"text-body-2"},GMe={class:"font-weight-medium"},zMe={class:"text-center"},WMe={class:"text-center"},KMe={class:"text-body-2 text-medium-emphasis mb-4"},jMe={class:"text-caption text-center"},qMe={class:"text-center d-flex flex-column align-center"},YMe={class:"text-caption text-center"},XMe={class:"d-flex align-center mb-1"},JMe={class:"d-flex align-center mb-1"},ZMe={class:"d-flex align-center"},eOe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},tOe={class:"d-flex align-center"},nOe={class:"text-body-2 font-weight-medium"},aOe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},rOe={key:0,class:"text-body-2 text-medium-emphasis ml-2"},sOe={key:0,class:"text-body-2 text-medium-emphasis mt-1"},oOe={key:2,class:"text-body-2 text-medium-emphasis mt-1"},iOe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18"},lOe=["d"],uOe={__name:"tasks-page",setup(e){const{showSnackbar:t}=la(),n=Ln(),a=R(0),r=R(null),s=ee(()=>n.state.reminderModule.searchResults),o=ee(()=>n.state.reminderModule.isLoading),l=ee(()=>n.state.reminderModule.hasSearched),c=ee(()=>n.state.reminderModule.searchError),f=ee(()=>n.state.reminderModule.filters),d=ee(()=>n.getters["reminderModule/hasActiveFilters"]),A=ee(()=>n.getters["reminderModule/uniquePatientsCount"]),m=ee(()=>n.getters["reminderModule/pendingRemindersCount"]),p=ee(()=>n.getters["reminderModule/completedRemindersCount"]),h=R([{title:"Reminders",disabled:!1}]);An(()=>{try{console.log("Tasks page initialized")}catch(x){console.error("Error setting up tasks page:",x),r.value="Failed to initialize tasks page"}});const y=x=>{const C=x.details?.patient_phone||x.details?.contactNumber||x.details?.contact_number;if(!C)return!1;const D=C.replace(/\D/g,"");return D.length===10||D.length===12&&D.startsWith("91")},g=async x=>{try{const C=n.getters["doctorModule/currentDoctor"];if(!C){t({message:"Please select a doctor first",color:"warning",timeout:5e3});return}if(!y(x)){t({message:"Patient contact number not available or invalid",color:"warning",timeout:5e3});return}x.sendingWhatsApp=!0,console.log(" Sending WhatsApp reminder for:",x.type,x.patientName);const D=await r4e(x,C);if(D.success)t({message:D.message||"WhatsApp reminder sent successfully",color:"success",timeout:3e3});else throw new Error(D.error||"Failed to send WhatsApp reminder")}catch(C){console.error(" WhatsApp reminder failed:",C),t({message:C.message||"Failed to send WhatsApp reminder",color:"error",timeout:5e3})}finally{x&&(x.sendingWhatsApp=!1)}},_=async x=>{try{await n.dispatch("reminderModule/updateFilters",{filters:x}),console.log(" Reminder filters updated via store:",x)}catch(C){console.error("Error updating filters:",C),r.value="Failed to update search filters"}},b=async(x=null)=>{try{if(x&&await n.dispatch("reminderModule/updateFilters",{filters:x}),!n.state.doctorModule?.doctorId){t({message:"Please select a doctor first to search reminders",color:"warning",timeout:5e3});return}console.log(" Starting reminder search...");const D=await n.dispatch("reminderModule/performSearch");if(D.success){const U=D.data.length;let L=`Found ${U} reminder${U!==1?"s":""}`;D.partialErrors?.length>0?(L+=` (${D.partialErrors.length} source${D.partialErrors.length!==1?"s":""} failed)`,t({message:L,color:"warning",timeout:5e3})):t({message:L,color:"success",timeout:3e3})}else throw new Error(D.error?.message||"Search failed")}catch(C){console.error(" Search failed:",C),t({message:C.message||"Failed to search reminders",color:"error",timeout:5e3})}},S=()=>{F(),setTimeout(()=>{b()},100)},B=async()=>{await b()},F=async()=>{try{await n.dispatch("reminderModule/clearAll"),t({message:"All filters and results cleared",color:"success",timeout:3e3})}catch(x){console.error("Error clearing filters:",x),r.value="Failed to clear filters"}},T=async x=>{try{const C=!x.details.isReminded,D=C?"reminded":"not reminded";console.log(` Toggling reminder status to: ${D}`,x),console.log(" Reminder details:",x.details),t({message:`Marking reminder as ${D}...`,color:"info",timeout:2e3}),await new Promise(L=>requestAnimationFrame(L));const U=await n.dispatch("reminderModule/markAsReminded",{reminder:x,isReminded:C});if(U.success)await new Promise(L=>requestAnimationFrame(L)),t({message:`Reminder marked as ${D}`,color:"success",timeout:3e3});else throw new Error(U.error||"Failed to update reminder status")}catch(C){console.error(" Failed to toggle reminder status:",C),t({message:C.message||"Failed to update reminder status",color:"error",timeout:5e3})}},E=x=>{if(!x)return"";try{return new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return x}};return(x,C)=>{const D=I("v-alert"),U=I("v-tab"),L=I("v-tabs"),H=I("v-card"),oe=I("v-col"),de=I("v-row"),te=I("v-card-text"),q=I("v-progress-circular"),ce=I("v-icon"),le=I("v-btn"),Z=I("v-empty-state"),ne=I("v-divider"),G=I("v-card-title"),W=I("v-tooltip"),Q=I("v-lazy"),O=I("v-window-item"),ae=I("v-window"),j=I("v-main");return P(),he(j,null,{default:u(()=>[r.value?(P(),he(D,{key:0,type:"error",dismissible:"","onClick:close":C[0]||(C[0]=J=>r.value=null),class:"ma-3"},{default:u(()=>[N(K(r.value),1)]),_:1})):ge("",!0),i(de,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[i(oe,{cols:"12"},{default:u(()=>[i(H,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[i(L,{modelValue:a.value,"onUpdate:modelValue":C[1]||(C[1]=J=>a.value=J),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(P(!0),Ae(ze,null,Jt(h.value,(J,ie)=>(P(),he(U,{key:ie,value:ie,disabled:J.disabled},{default:u(()=>[N(K(J.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(ae,{modelValue:a.value,"onUpdate:modelValue":C[2]||(C[2]=J=>a.value=J),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[i(O,{value:0,style:{height:"100%"}},{default:u(()=>[i(de,{"aria-label":"reminders row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[i(oe,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",IMe,[i(TMe,{filters:f.value,isLoading:o.value,onFilterChange:_,onSearch:b,onClearFilters:F},null,8,["filters","isLoading"])])]),_:1}),i(oe,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",FMe,[i(H,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(te,{class:"pt-2 pb-2 d-flex align-center justify-space-between flex-wrap"},{default:u(()=>[v("div",PMe,[s.value.length>0&&l.value?(P(),Ae(ze,{key:0},[v("strong",null,K(s.value.length),1),v("span",DMe,"reminder"+K(s.value.length!==1?"s":"")+" found",1),d.value?(P(),Ae("span",UMe,"  Filtered ")):ge("",!0)],64)):(P(),Ae("strong",RMe,"Reminders Management"))]),s.value.length>0&&l.value?(P(),Ae("div",NMe,[v("span",VMe,[C[3]||(C[3]=N("Patients ",-1)),v("span",LMe,K(A.value),1)]),C[7]||(C[7]=v("span",{class:"text-body-2"},"",-1)),v("span",MMe,[C[4]||(C[4]=N("Pending ",-1)),v("span",OMe,K(m.value),1)]),C[8]||(C[8]=v("span",{class:"text-body-2"},"",-1)),v("span",HMe,[C[5]||(C[5]=N("Completed ",-1)),v("span",$Me,K(p.value),1)]),C[9]||(C[9]=v("span",{class:"text-body-2"},"",-1)),v("span",QMe,[C[6]||(C[6]=N("Total ",-1)),v("span",GMe,K(s.value.length),1)])])):ge("",!0)]),_:1})]),_:1}),o.value?(P(),he(de,{key:0,"no-gutters":""},{default:u(()=>[i(oe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",zMe,[i(q,{indeterminate:"",size:"64",color:"primary"}),C[10]||(C[10]=v("div",{class:"mt-4 text-subtitle-1"},"Searching Reminders...",-1))])]),_:1})]),_:1})):c.value?(P(),he(de,{key:1,"no-gutters":""},{default:u(()=>[i(oe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",WMe,[i(ce,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...C[11]||(C[11]=[N("mdi-alert-circle",-1)])]),_:1}),C[13]||(C[13]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",KMe,K(c.value),1),i(le,{color:"primary",onClick:B,"prepend-icon":"mdi-refresh",loading:o.value,disabled:o.value},{default:u(()=>[...C[12]||(C[12]=[N(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):s.value.length===0&&l.value?(P(),he(Z,{key:2,image:Oe(Jv),class:"d-flex justify-center"},{title:u(()=>[...C[14]||(C[14]=[v("div",{class:"text-subtitle-2 mt-8 text-center"}," No Reminders Found ",-1)])]),text:u(()=>[C[19]||(C[19]=v("div",{class:"text-caption text-center mb-4"}," Try adjusting your search criteria or clear filters to see all reminders ",-1)),i(H,{color:"info",variant:"tonal",class:"pa-3 mx-auto",style:{"max-width":"400px"},rounded:"lg"},{default:u(()=>[v("div",jMe,[i(ce,{size:"small",class:"mb-1"},{default:u(()=>[...C[15]||(C[15]=[N("mdi-information",-1)])]),_:1}),C[16]||(C[16]=v("div",{class:"font-weight-medium mb-1"},"Default Search Ranges",-1)),C[17]||(C[17]=v("div",{class:"text-body-2 text-left"},[N("  "),v("strong",null,"Appointments:"),N(" Next 7 days"),v("br"),N("  "),v("strong",null,"Consultations:"),N(" Next 30 days"),v("br"),N("  "),v("strong",null,"Treatment Plans:"),N(" Next 30 days ")],-1)),C[18]||(C[18]=v("div",{class:"mt-2 text-caption text-medium-emphasis"}," Use date filters to search beyond these ranges ",-1))])]),_:1})]),actions:u(()=>[i(le,{color:"primary",variant:"outlined",onClick:F,"prepend-icon":"mdi-filter-remove",loading:o.value,disabled:o.value},{default:u(()=>[...C[20]||(C[20]=[N(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):l.value?s.value.length>0?(P(),he(de,{key:4,"no-gutters":""},{default:u(()=>[i(oe,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(P(!0),Ae(ze,null,Jt(s.value,J=>(P(),he(Q,{key:`reminder-${J.id}-${J.status}-${J.details?.isReminded||!1}`,options:{threshold:.1,rootMargin:"100px"},"min-height":"60",eager:""},{default:u(()=>[i(H,{style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[i(de,{"no-gutters":""},{default:u(()=>[i(oe,{cols:"10"},{default:u(()=>[i(G,{class:"d-flex justify-space-between align-center pb-0 pt-2"},{default:u(()=>[v("span",eOe,K(J.title||"Reminder"),1),v("div",tOe,[v("span",nOe,K(E(J.dueDate)),1)])]),_:2},1024),i(te,{class:"pb-1"},{default:u(()=>[i(de,{dense:""},{default:u(()=>[i(oe,{cols:"12"},{default:u(()=>[v("div",aOe,[N(K(J.patientName)+" ",1),J.description?(P(),Ae("span",rOe," ("+K(J.description)+") ",1)):ge("",!0)]),J.type==="consultation"&&J.consultationDetails?(P(),Ae("div",sOe,K(J.consultationDetails),1)):ge("",!0),J.type==="procedures"&&J.procedureDetails?(P(!0),Ae(ze,{key:1},Jt(J.procedureDetails.split(" | "),(ie,X)=>(P(),Ae("div",{key:X,class:"text-body-2 text-medium-emphasis mt-1"},K(ie),1))),128)):ge("",!0),J.type==="appointment"&&J.lastAppointmentDetails?(P(),Ae("div",oOe,K(J.lastAppointmentDetails),1)):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),i(oe,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[i(de,{"no-gutters":""},{default:u(()=>[i(oe,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[i(En,{permission:"tasks.edit",tag:"span"},{default:u(()=>[i(W,{text:J.status==="completed"?"Mark as Not Reminded":"Mark as Reminded"},{activator:u(({props:ie})=>[i(le,Ie({color:J.status==="completed"?"success":"warning",variant:"plain",size:"small"},{ref_for:!0},ie,{onClick:gn(X=>T(J),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[i(ce,{color:J.status==="completed"?"success":"warning",size:"18"},{default:u(()=>[(P(),Ae("svg",iOe,[v("path",{fill:"currentColor",d:J.status==="completed"?"M17.75 21.16L15 18.16L16.16 17L17.75 18.59L21.34 15L22.5 16.41L17.75 21.16M3 20V19L5 17V11C5 7.9 7.03 5.18 10 4.29V4C10 2.9 10.9 2 12 2C13.11 2 14 2.9 14 4V4.29C16.97 5.18 19 7.9 19 11V12.08L18 12C14.69 12 12 14.69 12 18C12 18.7 12.12 19.37 12.34 20H3M12 23C10.9 23 10 22.11 10 21H12.8C13.04 21.41 13.33 21.79 13.65 22.13C13.29 22.66 12.69 23 12 23Z":"M23 7V13H21V7M21 15H23V17H21M12 2A2 2 0 0 0 10 4A2 2 0 0 0 10 4.29C7.12 5.14 5 7.82 5 11V17L3 19V20H21V19L19 17V11C19 7.82 16.88 5.14 14 4.29A2 2 0 0 0 14 4A2 2 0 0 0 12 2M10 21A2 2 0 0 0 12 23A2 2 0 0 0 14 21Z"},null,8,lOe)]))]),_:2},1032,["color"])]),_:2},1040,["color","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024),i(ne,{class:"mx-4"}),i(oe,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[i(W,{text:"Send WhatsApp Reminder"},{activator:u(({props:ie})=>[i(le,Ie({variant:"plain",size:"small"},{ref_for:!0},ie,{onClick:gn(X=>g(J),["stop"]),disabled:!y(J),loading:J.sendingWhatsApp,class:"btn-hover-base mt-1"}),{default:u(()=>[i(ce,{size:"18"},{default:u(()=>[...C[34]||(C[34]=[v("img",{src:G0,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","disabled","loading"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0):(P(),he(de,{key:3,"no-gutters":""},{default:u(()=>[i(oe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",qMe,[C[32]||(C[32]=v("div",{class:"text-h6 mb-2"},"Reminder Management",-1)),C[33]||(C[33]=v("div",{class:"text-body-2 text-medium-emphasis mb-2"},"Use the filters on the left to search for reminders",-1)),i(ce,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...C[21]||(C[21]=[N("mdi-bell-outline",-1)])]),_:1}),i(le,{color:"primary",variant:"outlined",onClick:S},{default:u(()=>[...C[22]||(C[22]=[N(" View All Reminders ",-1)])]),_:1}),i(H,{color:"surface-variant",variant:"tonal",class:"mt-6 pa-4 mx-auto",style:{"max-width":"400px"},rounded:"lg"},{default:u(()=>[v("div",YMe,[i(ce,{size:"small",class:"mb-2"},{default:u(()=>[...C[23]||(C[23]=[N("mdi-clock-outline",-1)])]),_:1}),C[30]||(C[30]=v("div",{class:"font-weight-medium mb-2 text-body-2"},"Default Search Windows",-1)),i(de,{dense:"",class:"text-left"},{default:u(()=>[i(oe,{cols:"12",class:"text-body-2"},{default:u(()=>[v("div",XMe,[i(ce,{size:"x-small",color:"primary",class:"mr-2"},{default:u(()=>[...C[24]||(C[24]=[N("mdi-calendar-clock",-1)])]),_:1}),C[25]||(C[25]=v("span",null,[v("strong",null,"Appointments:"),N(" Next 7 days")],-1))]),v("div",JMe,[i(ce,{size:"x-small",color:"success",class:"mr-2"},{default:u(()=>[...C[26]||(C[26]=[N("mdi-stethoscope",-1)])]),_:1}),C[27]||(C[27]=v("span",null,[v("strong",null,"Consultations:"),N(" Next 30 days")],-1))]),v("div",ZMe,[i(ce,{size:"x-small",color:"info",class:"mr-2"},{default:u(()=>[...C[28]||(C[28]=[N("mdi-medical-bag",-1)])]),_:1}),C[29]||(C[29]=v("span",null,[v("strong",null,"Treatment Plans:"),N(" Next 30 days")],-1))])]),_:1})]),_:1}),i(ne,{class:"my-2"}),C[31]||(C[31]=v("div",{class:"text-caption text-medium-emphasis"},"  Set custom date ranges in filters to search beyond these windows ",-1))])]),_:1})])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},cOe=en(uOe,[["__scopeId","data-v-12d6c71d"]]),dOe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},fOe={class:"filter-field mb-3"},AOe={class:"d-flex justify-center mt-4"},mOe={__name:"PaymentFilter",props:{paymentDate:{type:String,default:""}},emits:["filter-change","search","clear"],setup(e,{emit:t}){const n=e,a=t,r=R(n.paymentDate||""),s=ee(()=>Tn()),o=ee(()=>!!r.value);ee(()=>{let m=0;return r.value&&m++,m});const l=m=>{if(!m)return"";try{return new Date(m).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return m}},c=()=>{d()},f=()=>{r.value="",d()},d=()=>{a("filter-change",{paymentDate:r.value,hasErrors:!1,hasFilters:o.value})},A=()=>{r.value="",a("clear"),d()};return Ge(()=>n.paymentDate,m=>{r.value=m||""}),d(),(m,p)=>{const h=I("v-card-text"),y=I("v-card"),g=I("v-text-field"),_=I("v-chip"),b=I("v-btn");return P(),he(y,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[i(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(h,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...p[2]||(p[2]=[v("span",{class:"text-body-2 font-weight-medium"},"Filter Payment Receipts",-1)])]),_:1})]),_:1}),v("div",dOe,[v("div",fOe,[i(g,{modelValue:r.value,"onUpdate:modelValue":[p[0]||(p[0]=S=>r.value=S),c],type:"date",label:"Payment Receipt Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:s.value,"onClick:clear":f,onClick:p[1]||(p[1]=S=>S.target.showPicker&&S.target.showPicker())},null,8,["modelValue","max"]),r.value?(P(),he(_,{key:0,size:"small",color:"primary",variant:"outlined",closable:"",class:"mt-2","onClick:close":f},{default:u(()=>[N(" Date: "+K(l(r.value)),1)]),_:1})):ge("",!0)]),v("div",AOe,[i(b,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:A,class:"filter-button-clear",disabled:!o.value},{default:u(()=>[...p[3]||(p[3]=[N(" Clear ",-1)])]),_:1},8,["disabled"])])])]),_:1})}}},vOe=en(mOe,[["__scopeId","data-v-7a575a48"]]),hOe={class:"scrollable-content"},pOe={class:"scrollable-content"},gOe={class:"text-center"},yOe={class:"text-center"},_Oe={class:"text-body-2 text-medium-emphasis mb-4"},wOe={class:"text-center"},bOe={class:"text-body-2 text-medium-emphasis"},xOe={class:"font-weight-bold",style:{color:"black","word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},COe={key:0,class:"text-medium-emphasis"},SOe={key:0,class:"text-body-2 text-medium-emphasis mb-1"},EOe={class:"font-weight-bold",style:{color:"black"}},kOe={class:"font-weight-bold",style:{color:"black"}},BOe={key:1,class:"font-weight-bold",style:{color:"black"}},TOe={key:1,class:"text-body-2 text-medium-emphasis mb-1"},IOe={key:0,class:"amount-badge"},FOe={class:"text-body-1 font-weight-bold"},POe={__name:"payments",setup(e){const{showSnackbar:t}=la(),n=Ln(),a=R(0),r=R([]),s=R(""),o=R(null),l=R(!1),c=R(null),f=R(!1),d=R(!1),A=R(!1),m=R(null),p=R(!1),h=R(null),y=R(!1);ee(()=>Tn());const g=ee(()=>n.getters["doctorModule/isGSTRegistered"]),_=async()=>{if(!l.value)try{l.value=!0,c.value=null;const Z=await Pw(n,s.value?.trim()||"");if(Z.error)throw new Error(`Search failed: ${Z.error.message||"Unknown error"}`);const ne=Array.isArray(Z.data)?Z.data:[];r.value=ne.filter(G=>G.status!=="Series"),f.value=!0,s.value&&t({message:`Found ${r.value.length} payment receipt${r.value.length!==1?"s":""}`,color:"success",timeout:3e3})}catch(Z){console.error("Error fetching payment receipts:",Z),c.value=Z.message||"Failed to search payment receipts",r.value=[],f.value=!0,t({message:c.value,color:"error",timeout:5e3})}finally{l.value=!1}},b=()=>{c.value=null,_()},S=()=>{try{s.value="",c.value=null,f.value=!0,_(),t({message:"Filters cleared successfully",color:"success",timeout:3e3})}catch(Z){console.error("Error clearing filters:",Z),o.value="Failed to clear filters"}},B=Z=>{s.value=Z.paymentDate||"",Z.hasErrors||(f.value=!0,le())},F=Z=>{s.value=Z.paymentDate||"",_()},T=Z=>{if(g.value){const ne=r.value.find(W=>W.id===Z),G=ne?.billId||ne?.billid;G?(h.value=G,p.value=!0):(t({message:"No associated bill found. Showing payment receipt view.",color:"info",timeout:3e3}),m.value=Z,d.value=!0)}else m.value=Z,d.value=!0},E=Z=>{if(g.value){const ne=r.value.find(W=>W.id===Z),G=ne?.billId||ne?.billid;G?(h.value=G,y.value=!0):(t({message:"No associated bill found. Showing payment receipt edit.",color:"info",timeout:3e3}),m.value=Z,A.value=!0)}else console.log("Edit receipt:",Z),m.value=Z,A.value=!0},x=()=>{d.value=!1,m.value=null},C=()=>{A.value=!1,m.value=null},D=Z=>{d.value=!1,m.value=Z,A.value=!0},U=()=>{p.value=!1,h.value=null},L=Z=>{p.value=!1,h.value=null,h.value=Z,y.value=!0},H=()=>{y.value=!1,h.value=null},oe=Z=>{console.log("Bill updated:",Z),y.value=!1,h.value=null,_(),t({message:`Bill ${Z.identifier} updated successfully!`,color:"success",timeout:3e3})},de=Z=>{console.log("Receipt updated:",Z),A.value=!1,m.value=null,_(),t({message:`Receipt ${Z.identifier} updated successfully!`,color:"success",timeout:3e3})},te=Z=>{if(!Z)return"";try{let ne;typeof Z=="number"?ne=new Date(Z*1e3):ne=new Date(Z);const G=To(ne,"d MMM"),W=To(ne,"EEE");return`${G}, ${W}`}catch(ne){return console.error("Error formatting created day:",ne),""}},q=Z=>{if(!Z)return"";try{let ne;typeof Z=="number"?ne=new Date(Z*1e3):ne=new Date(Z);const G=ne.getHours(),W=ne.getMinutes(),Q=G%12||12,O=G>=12?"PM":"AM";return`${Q}.${W.toString().padStart(2,"0")}${O}`}catch(ne){return console.error("Error formatting created time:",ne),""}};let ce;const le=()=>{clearTimeout(ce),ce=setTimeout(()=>{_()},500)};return Ge([s],()=>{f.value=!0,le()}),An(()=>{try{r.value.length===0&&!f.value&&(f.value=!0,_())}catch(Z){console.error("Error on mount:",Z),o.value="Failed to initialize"}}),OA(()=>{f.value&&_()}),ha(()=>{ce&&(clearTimeout(ce),ce=null)}),(Z,ne)=>{const G=I("v-alert"),W=I("v-tab"),Q=I("v-tabs"),O=I("v-card"),ae=I("v-col"),j=I("v-row"),J=I("v-progress-circular"),ie=I("v-icon"),X=I("v-btn"),fe=I("v-card-text"),M=I("v-empty-state"),z=I("v-card-title"),se=I("v-tooltip"),be=I("v-divider"),Fe=I("v-lazy"),ye=I("v-window-item"),Qe=I("v-window"),_e=I("v-main"),Se=I("v-dialog");return P(),Ae(ze,null,[i(_e,null,{default:u(()=>[o.value?(P(),he(G,{key:0,type:"error",dismissible:"","onClick:close":ne[0]||(ne[0]=Ee=>o.value=null),class:"ma-3"},{default:u(()=>[N(K(o.value),1)]),_:1})):ge("",!0),i(j,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[i(ae,{cols:"12"},{default:u(()=>[i(O,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[i(Q,{modelValue:a.value,"onUpdate:modelValue":ne[1]||(ne[1]=Ee=>a.value=Ee),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[i(W,{value:0},{default:u(()=>[...ne[7]||(ne[7]=[N("List",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(Qe,{modelValue:a.value,"onUpdate:modelValue":ne[2]||(ne[2]=Ee=>a.value=Ee),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[i(ye,{value:0,style:{height:"100%"}},{default:u(()=>[i(j,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[i(ae,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",hOe,[i(vOe,{"payment-date":s.value,onFilterChange:B,onSearch:F,onClear:S},null,8,["payment-date"])])]),_:1}),i(ae,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",pOe,[i(O,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l.value?(P(),he(j,{key:0,"no-gutters":""},{default:u(()=>[i(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",gOe,[i(J,{indeterminate:"",color:"primary",size:"64"}),ne[8]||(ne[8]=v("div",{class:"mt-4 text-subtitle-1"},"Searching payment receipts...",-1))])]),_:1})]),_:1})):c.value?(P(),he(j,{key:1,"no-gutters":""},{default:u(()=>[i(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",yOe,[i(ie,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...ne[9]||(ne[9]=[N("mdi-alert-circle",-1)])]),_:1}),ne[11]||(ne[11]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",_Oe,K(c.value),1),i(X,{color:"primary",onClick:b,"prepend-icon":"mdi-refresh"},{default:u(()=>[...ne[10]||(ne[10]=[N(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):r.value&&r.value.length===0&&f.value?(P(),Ae(ze,{key:2},[i(O,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(fe,{class:"pt-2 pb-0"},{default:u(()=>[...ne[12]||(ne[12]=[v("strong",null,"0",-1),N(" results found ",-1)])]),_:1})]),_:1}),i(M,{image:Oe(Jv),class:"d-flex justify-center"},{title:u(()=>[...ne[13]||(ne[13]=[v("div",{class:"text-subtitle-2 mt-8 text-center"}," No Payment Receipts Found ",-1)])]),text:u(()=>[...ne[14]||(ne[14]=[v("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all receipts ",-1)])]),actions:u(()=>[i(X,{color:"primary",variant:"outlined",onClick:S,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...ne[15]||(ne[15]=[N(" Clear Filters ",-1)])]),_:1})]),_:1},8,["image"])],64)):f.value?r.value&&r.value.length>0?(P(),Ae(ze,{key:4},[i(O,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(fe,{class:"pt-2 pb-0"},{default:u(()=>[v("strong",null,K(r.value.length),1),N(" result"+K(r.value.length!==1?"s":"")+" found ",1)]),_:1})]),_:1}),i(j,{"no-gutters":""},{default:u(()=>[i(ae,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(P(!0),Ae(ze,null,Jt(r.value,(Ee,Ue)=>(P(),he(Fe,{key:Ee?.id||`receipt-${Ue}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"80"},{default:u(()=>[Ee?(P(),he(O,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg"},{default:u(()=>[i(j,{"no-gutters":""},{default:u(()=>[i(ae,{cols:"8"},{default:u(()=>[i(z,{class:"pb-0 pt-2"},{default:u(()=>[v("div",bOe,[Ee?.patientName||Ee?.patientContactNumber?(P(),Ae(ze,{key:0},[v("span",xOe,K(Ee.patientName||""),1),Ee?.patientContactNumber?(P(),Ae("span",COe,K(Ee.patientName?" ":"")+"("+K(Ee.patientContactNumber)+")",1)):ge("",!0)],64)):ge("",!0),(Ee?.patientName||Ee?.patientContactNumber)&&(Ee?.createdAt||Ee?.paymentReceiptDate)?(P(),Ae(ze,{key:1},[N("  ")],64)):ge("",!0),Ee?.createdAt||Ee?.paymentReceiptDate?(P(),Ae(ze,{key:2},[N(K(te(Ee.createdAt||Ee.paymentReceiptDate))+"  "+K(q(Ee.createdAt||Ee.paymentReceiptDate)),1)],64)):ge("",!0)])]),_:2},1024),i(fe,{class:"pb-1"},{default:u(()=>[Ee?.identifier||g.value&&Ee?.billIdentifier?(P(),Ae("div",SOe,[Ee?.identifier?(P(),Ae(ze,{key:0},[v("span",EOe,"Receipt ID: "+K(Ee.identifier),1),g.value&&Ee?.billIdentifier?(P(),Ae(ze,{key:0},[ne[19]||(ne[19]=N("  ",-1)),v("span",kOe,"Invoice ID: "+K(Ee.billIdentifier),1)],64)):ge("",!0)],64)):g.value&&Ee?.billIdentifier?(P(),Ae("span",BOe,"Invoice ID: "+K(Ee.billIdentifier),1)):ge("",!0)])):ge("",!0),Ee?.servicesInfo?(P(),Ae("div",TOe,[i(ie,{size:"small",class:"mr-1"},{default:u(()=>[...ne[20]||(ne[20]=[N("mdi-file-document-outline",-1)])]),_:1}),N(" "+K(Ee.servicesInfo),1)])):ge("",!0)]),_:2},1024)]),_:2},1024),i(ae,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[Ee?.totalPaid!==void 0?(P(),Ae("div",IOe,[v("div",FOe,K(Oe(hr)(Ee.totalPaid)),1)])):ge("",!0)]),_:2},1024),i(ae,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[i(j,{"no-gutters":""},{default:u(()=>[i(ae,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[i(En,{feature:"billing"},{default:u(()=>[i(se,{text:"View Receipt"},{activator:u(({props:je})=>[i(X,Ie({variant:"plain",color:"primary",size:"small"},{ref_for:!0},je,{onClick:gn(at=>T(Ee.id),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[i(ie,{size:"18"},{default:u(()=>[...ne[21]||(ne[21]=[N("mdi-eye",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),i(be,{class:"mx-4"}),i(ae,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[i(En,{permission:"billing.edit"},{default:u(()=>[i(se,{text:"Edit Receipt"},{activator:u(({props:je})=>[i(X,Ie({variant:"plain",color:"secondary",size:"small"},{ref_for:!0},je,{onClick:gn(at=>E(Ee.id),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[i(ie,{size:"18"},{default:u(()=>[...ne[22]||(ne[22]=[N("mdi-pencil",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):ge("",!0)]),_:2},1024))),128))]),_:1})]),_:1})],64)):ge("",!0):(P(),he(j,{key:3,"no-gutters":""},{default:u(()=>[i(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",wOe,[i(ie,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...ne[16]||(ne[16]=[N("mdi-currency-inr",-1)])]),_:1}),ne[17]||(ne[17]=v("div",{class:"text-h6 mb-2"},"Search for Payment Receipts",-1)),ne[18]||(ne[18]=v("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find payment receipts",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(Se,{modelValue:d.value,"onUpdate:modelValue":ne[3]||(ne[3]=Ee=>d.value=Ee),persistent:"","max-width":"70%"},{default:u(()=>[m.value?(P(),he(_H,{key:0,"receipt-id":m.value,onClose:x,onEditReceipt:D},null,8,["receipt-id"])):ge("",!0)]),_:1},8,["modelValue"]),i(Se,{modelValue:p.value,"onUpdate:modelValue":ne[4]||(ne[4]=Ee=>p.value=Ee),persistent:"","max-width":"80%"},{default:u(()=>[h.value?(P(),he(SH,{key:0,"bill-id":h.value,onClose:U,onEditBill:L},null,8,["bill-id"])):ge("",!0)]),_:1},8,["modelValue"]),i(Se,{modelValue:A.value,"onUpdate:modelValue":ne[5]||(ne[5]=Ee=>A.value=Ee),persistent:"","max-width":"70%"},{default:u(()=>[m.value?(P(),he(dO,{key:0,"receipt-id":m.value,onClose:C,onReceiptUpdated:de},null,8,["receipt-id"])):ge("",!0)]),_:1},8,["modelValue"]),i(Se,{modelValue:y.value,"onUpdate:modelValue":ne[6]||(ne[6]=Ee=>y.value=Ee),persistent:"","max-width":"85%"},{default:u(()=>[h.value?(P(),he(EH,{key:0,"bill-id":h.value,onClose:H,onBillUpdated:oe},null,8,["bill-id"])):ge("",!0)]),_:1},8,["modelValue"])],64)}}},DOe=en(POe,[["__scopeId","data-v-da608c1a"]]),UOe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},ROe={class:"filter-field mb-3"},NOe={key:0,class:"filter-section mb-3"},VOe={class:"filter-section-label mb-2"},LOe={class:"d-flex justify-center mt-4 mb-2"},MOe={class:"d-flex justify-center"},OOe={key:1,class:"mt-4"},HOe={class:"text-caption text-medium-emphasis"},$Oe={class:"mb-1"},QOe={key:0},GOe={key:1},zOe={key:2},WOe={key:3},KOe={key:4},jOe={__name:"ReportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-report","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=R({reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",...n.filters}),s=R([{label:"3C Daily Case Register",value:"3c-daily-case-register"},{label:"Payment Report",value:"payment-report"},{label:"GST Bill Report",value:"gst-bill-report"},{label:"GST Detail Report",value:"gst-detail-report"},{label:"Referral Report",value:"referral-report"}]),o=ee(()=>r.value.reportType?r.value.reportType==="3c-daily-case-register"?!!r.value.selectedDate:r.value.reportType==="payment-report"||r.value.reportType==="gst-bill-report"||r.value.reportType==="gst-detail-report"||r.value.reportType==="referral-report"?!!(r.value.startDate&&r.value.endDate):!0:!1);Ge(()=>n.filters,m=>{r.value={...r.value,...m}},{deep:!0});const l=()=>{a("filter-change",{...r.value})},c=()=>{o.value&&a("start-report",{...r.value})},f=()=>{r.value={reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:""},a("clear-filters"),l()},d=m=>{const p=s.value.find(h=>h.value===m);return p?p.label:m},A=m=>m?new Date(m).toLocaleDateString():"";return(m,p)=>{const h=I("v-card-text"),y=I("v-card"),g=I("v-select"),_=I("v-text-field"),b=I("v-col"),S=I("v-row"),B=I("v-btn"),F=I("v-form");return P(),he(y,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(h,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...p[7]||(p[7]=[v("span",{class:"text-body-2 font-weight-medium"},"Report Configuration",-1)])]),_:1})]),_:1}),v("div",UOe,[i(F,{onSubmit:gn(c,["prevent"])},{default:u(()=>[v("div",ROe,[i(g,{modelValue:r.value.reportType,"onUpdate:modelValue":[p[0]||(p[0]=T=>r.value.reportType=T),l],items:s.value,"item-title":"label","item-value":"value",label:"Report Type",variant:"outlined",density:"compact",class:"filter-input"},null,8,["modelValue","items"])]),r.value.reportType?(P(),Ae("div",NOe,[v("div",VOe,K(r.value.reportType==="3c-daily-case-register"?"Select Date":"Select Date Range"),1),r.value.reportType==="3c-daily-case-register"?(P(),he(_,{key:0,modelValue:r.value.selectedDate,"onUpdate:modelValue":[p[1]||(p[1]=T=>r.value.selectedDate=T),l],type:"date",label:"Report Date",variant:"outlined",density:"compact",class:"filter-input date-input",onClick:p[2]||(p[2]=T=>T.target.showPicker&&T.target.showPicker())},null,8,["modelValue"])):r.value.reportType==="payment-report"||r.value.reportType==="gst-bill-report"||r.value.reportType==="gst-detail-report"||r.value.reportType==="referral-report"?(P(),he(S,{key:1,dense:""},{default:u(()=>[i(b,{cols:"6"},{default:u(()=>[i(_,{modelValue:r.value.startDate,"onUpdate:modelValue":[p[3]||(p[3]=T=>r.value.startDate=T),l],type:"date",label:"Start Date",variant:"outlined",density:"compact",class:"filter-input date-input",onClick:p[4]||(p[4]=T=>T.target.showPicker&&T.target.showPicker())},null,8,["modelValue"])]),_:1}),i(b,{cols:"6"},{default:u(()=>[i(_,{modelValue:r.value.endDate,"onUpdate:modelValue":[p[5]||(p[5]=T=>r.value.endDate=T),l],type:"date",label:"End Date",variant:"outlined",density:"compact",class:"filter-input date-input",onClick:p[6]||(p[6]=T=>T.target.showPicker&&T.target.showPicker())},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0)])):ge("",!0),v("div",LOe,[i(B,{type:"submit",color:"primary",size:"small",loading:e.loading,disabled:!o.value,"prepend-icon":"mdi-chart-line",class:"filter-button"},{default:u(()=>[...p[8]||(p[8]=[N(" Generate Report ",-1)])]),_:1},8,["loading","disabled"])]),v("div",MOe,[i(B,{variant:"text",size:"small",onClick:f,"prepend-icon":"mdi-filter-remove",class:"filter-button-clear"},{default:u(()=>[...p[9]||(p[9]=[N(" Clear ",-1)])]),_:1})]),r.value.reportType?(P(),Ae("div",OOe,[i(y,{variant:"outlined",class:"pa-2",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},{default:u(()=>[v("div",HOe,[v("div",$Oe,[p[10]||(p[10]=v("strong",null,"Type:",-1)),N(" "+K(d(r.value.reportType)),1)]),r.value.reportType==="3c-daily-case-register"&&r.value.selectedDate?(P(),Ae("div",QOe,[p[11]||(p[11]=v("strong",null,"Date:",-1)),N(" "+K(A(r.value.selectedDate)),1)])):ge("",!0),r.value.reportType==="payment-report"&&r.value.startDate&&r.value.endDate?(P(),Ae("div",GOe,[p[12]||(p[12]=v("strong",null,"Date Range:",-1)),N(" "+K(A(r.value.startDate))+" - "+K(A(r.value.endDate)),1)])):ge("",!0),r.value.reportType==="gst-bill-report"&&r.value.startDate&&r.value.endDate?(P(),Ae("div",zOe,[p[13]||(p[13]=v("strong",null,"Date Range:",-1)),N(" "+K(A(r.value.startDate))+" - "+K(A(r.value.endDate)),1)])):ge("",!0),r.value.reportType==="gst-detail-report"&&r.value.startDate&&r.value.endDate?(P(),Ae("div",WOe,[p[14]||(p[14]=v("strong",null,"Date Range:",-1)),N(" "+K(A(r.value.startDate))+" - "+K(A(r.value.endDate)),1)])):ge("",!0),r.value.reportType==="referral-report"&&r.value.startDate&&r.value.endDate?(P(),Ae("div",KOe,[p[15]||(p[15]=v("strong",null,"Date Range:",-1)),N(" "+K(A(r.value.startDate))+" - "+K(A(r.value.endDate)),1)])):ge("",!0)])]),_:1})])):ge("",!0)]),_:1})])]),_:1})}}},qOe=en(jOe,[["__scopeId","data-v-88801ea7"]]),YOe={class:"scrollable-content"},XOe={class:"scrollable-content"},JOe={key:1},ZOe={class:"text-center"},eHe={class:"mt-4 text-subtitle-1"},tHe={key:0,class:"mt-4"},nHe={class:"mb-2"},aHe={class:"mb-2"},rHe={key:0,class:"mb-2"},sHe={key:1},oHe={class:"text-center"},iHe={__name:"reports",setup(e){const t=Ln(),n=R(!1),a=R(""),r=R(!1),s=R(""),o=R(!1),l=R(0),c=R(""),f=R([]),d=R(null),A=R(!1),m=R({reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",includeCharts:!0,format:"pdf",includePatientDetails:!0,includeConsultationNotes:!1,includeTaxDetails:!0,includePaymentMethods:!0}),p=R([{title:"Date",key:"date",sortable:!0},{title:"Report Type",key:"reportType",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0}]),h=Q=>{m.value={...m.value,...Q}},y=()=>{m.value={reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",includeCharts:!0,format:"pdf",includePatientDetails:!0,includeConsultationNotes:!1,includeTaxDetails:!0,includePaymentMethods:!0}},g=async Q=>{try{o.value=!0,l.value=0,c.value="Preparing report...",d.value=null,A.value=!1,console.log("Starting report generation with filters:",Q),Q.reportType==="3c-daily-case-register"?await q(Q):Q.reportType==="payment-report"?await H(Q):Q.reportType==="gst-bill-report"?await _(Q):Q.reportType==="gst-detail-report"?await x(Q):Q.reportType==="referral-report"?await U(Q):await W(Q)}catch(O){console.error("Report generation error:",O),o.value=!1,l.value=0,c.value="",A.value=!1,r.value=!0,s.value="Report generation failed: "+O.message}finally{setTimeout(()=>{A.value&&(o.value=!1)},1500)}},_=async Q=>{try{if(!Q.startDate||!Q.endDate)throw new Error("Please select both start and end dates for the GST Bill Report");const O=new Date(Q.startDate),ae=new Date(Q.endDate);if(O>ae)throw new Error("Start date must be less than or equal to end date");l.value=20,c.value="Fetching bills for date range...";const j=await RE(t,Q.startDate,Q.endDate);if(j.error)throw new Error(`Failed to fetch bills: ${j.error.message||"Unknown error"}`);l.value=40,c.value="Processing bill data...";const J=Array.isArray(j.data)?j.data:[],ie=J.filter(be=>be.status!=="Series");console.log(`Found ${ie.length} valid bills out of ${J.length} total bills for date range`),l.value=60,c.value="Transforming data to GST Bill Report format...";const X=await S(ie,Q.startDate,Q.endDate);l.value=80,c.value="Generating CSV file...";const fe=F(X);l.value=90,c.value="Preparing download...";const M=`gst_bill_report_${Q.startDate}_to_${Q.endDate}.csv`,z=await D(fe,M);if(!z.success)throw new Error(z.error||"Failed to save report file");l.value=100,c.value="GST Bill Report generated successfully!",d.value={reportType:"GST Bill Report",totalRecords:X.length,dateRange:{from:Q.startDate,to:Q.endDate},filename:M},A.value=!0;const se={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"GST Bill Report",format:"CSV",recordCount:X.length,status:"Completed",filename:M};f.value.unshift(se),n.value=!0,a.value=`GST Bill Report generated successfully! ${X.length} records included.`}catch(O){throw console.error("GST Bill Report generation error:",O),O}},b=Q=>{if(!Q.services||!Array.isArray(Q.services)||Q.services.length===0)return{itemTotal:0,gstAmount:0,totalWithGST:0,grandTotal:0};let O=0,ae=0,j=0;Q.services.forEach(X=>{const fe=parseFloat(X.baseCost)||0,M=parseInt(X.quantity)||1,z=parseFloat(X.gstPercent)||0,se=parseFloat(X.discountAmount)||0,be=fe*M,Fe=se*M,ye=Math.max(0,be-Fe),Qe=z>0?Math.round(ye*z/(100+z)):0,_e=ye-Qe;O+=_e,ae+=Qe,j+=ye});const J=parseFloat(Q.additionalDiscount)||0,ie=Math.max(0,j-J);return{itemTotal:Math.round(O),gstAmount:ae,totalWithGST:Math.round(j),grandTotal:Math.round(ie)}},S=async(Q,O,ae)=>{const j=[],J=Q.sort((ie,X)=>{const fe=new Date(ie.billDate),M=new Date(X.billDate);return fe-M});for(const ie of J){const X=await B(ie.id),fe=b(ie),M={billIdentifier:ie.identifier||"",billDate:ie.billDate||"",patientName:ie.patientName||"Unknown Patient",services:ie.servicesDescription||"",itemTotal:fe.itemTotal,gstAmount:fe.gstAmount,totalWithGST:fe.totalWithGST,additionalDiscount:ie.additionalDiscount||0,grandTotal:fe.grandTotal,cash:X.cash||0,card:X.card||0,upi:X.upi||0,bankTransfer:X.bankTransfer||0,cheque:X.cheque||0,online:X.online||0};j.push(M)}return console.log("Transformed GST Bill Report data:",j),j},B=async Q=>{const O={cash:0,card:0,upi:0,bankTransfer:0,cheque:0,online:0};try{const{getReceiptsByBill:ae,getPaymentsByReceipt:j}=await ns(async()=>{const{getReceiptsByBill:X,getPaymentsByReceipt:fe}=await Promise.resolve().then(()=>q2e);return{getReceiptsByBill:X,getPaymentsByReceipt:fe}},void 0,import.meta.url),{getPaymentsByReceipt:J}=await ns(async()=>{const{getPaymentsByReceipt:X}=await Promise.resolve().then(()=>mhe);return{getPaymentsByReceipt:X}},void 0,import.meta.url),ie=await ae(Q);if(ie.success&&Array.isArray(ie.data))for(const X of ie.data){const fe=await J(X.id);fe.success&&Array.isArray(fe.data)&&fe.data.forEach(M=>{const z=M.mode?.toLowerCase(),se=M.amount||0;switch(z){case"cash":O.cash+=se;break;case"card":O.card+=se;break;case"upi":O.upi+=se;break;case"bank transfer":case"banktransfer":O.bankTransfer+=se;break;case"cheque":O.cheque+=se;break;case"online":O.online+=se;break;default:O.online+=se;break}})}}catch(ae){console.error("Error fetching payment modes for bill:",Q,ae)}return O},F=Q=>{const ae=[["Bill Identifier","Bill Date","Patient Name","Services","Total Taxable Value","GST Amount","Total with GST","Additional Discount","Grand Total","Cash","Card","UPI","Bank Transfer","Cheque","Online"].join(",")];return Q.forEach(j=>{const J=[Z(j.billIdentifier),j.billDate,Z(j.patientName),Z(j.services),j.itemTotal,j.gstAmount,j.totalWithGST,j.additionalDiscount,j.grandTotal,j.cash,j.card,j.upi,j.bankTransfer,j.cheque,j.online];ae.push(J.join(","))}),ae.join(`
`)},T=Q=>{const O=parseFloat(Q.baseCost)||0,ae=parseInt(Q.quantity)||1,j=parseFloat(Q.gstPercent)||0,J=parseFloat(Q.discountAmount)||0,ie=O*ae,X=J*ae,fe=Math.max(0,ie-X),M=j>0?Math.round(fe*j/(100+j)):0,z=fe-M,se=fe;return{baseCost:O,discountAmount:J,gstPercent:j,quantity:ae,taxableValue:Math.round(z),gstAmount:M,total:Math.round(se)}},E=async(Q,O,ae)=>{const j=[],J=Q.sort((ie,X)=>{const fe=new Date(ie.billDate),M=new Date(X.billDate);return fe-M});for(const ie of J)if(!(!ie.services||!Array.isArray(ie.services)||ie.services.length===0))for(const X of ie.services){const fe=T(X),M={billIdentifier:ie.identifier||"",billDate:ie.billDate||"",patientName:ie.patientName||"Unknown Patient",serviceDescription:X.serviceDescription||"",hsnSacCode:X.hsnSacCode||"",baseCost:fe.baseCost,discountAmount:fe.discountAmount,gstPercent:fe.gstPercent,quantity:fe.quantity,taxableValue:fe.taxableValue,gstAmount:fe.gstAmount,total:fe.total};j.push(M)}return console.log("Transformed GST Detail Report data:",j),j},x=async Q=>{try{l.value=10,c.value="Fetching bills data...",l.value=30,c.value="Loading bills from database...";const O=await RE(t,Q.startDate,Q.endDate);if(O.error)throw new Error(O.error.message||"Failed to fetch bills");const ae=Array.isArray(O.data)?O.data:[],j=ae.filter(z=>z.status!=="Series");console.log(`Found ${j.length} valid bills out of ${ae.length} total bills for date range`),l.value=60,c.value="Transforming data to GST Detail Report format...";const J=await E(j,Q.startDate,Q.endDate);l.value=80,c.value="Generating CSV file...";const ie=C(J);l.value=90,c.value="Preparing download...";const X=`gst_detail_report_${Q.startDate}_to_${Q.endDate}.csv`,fe=await D(ie,X);if(!fe.success)throw new Error(fe.error||"Failed to save report file");l.value=100,c.value="GST Detail Report generated successfully!",d.value={reportType:"GST Detail Report",totalRecords:J.length,dateRange:{from:Q.startDate,to:Q.endDate},filename:X},A.value=!0;const M={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"GST Detail Report",format:"CSV",recordCount:J.length,status:"Completed",filename:X};f.value.unshift(M),n.value=!0,a.value=`GST Detail Report generated successfully! ${J.length} line items included.`}catch(O){throw console.error("GST Detail Report generation error:",O),O}},C=Q=>{const ae=[["Bill Identifier","Bill Date","Patient Name","Service Description","HSN/SAC Code","Base Cost per unit (incl. GST)","Discount per unit","GST %","Quantity","Taxable Value","GST Amount","Total (incl. GST)"].join(",")];return Q.forEach(j=>{const J=[Z(j.billIdentifier),j.billDate,Z(j.patientName),Z(j.serviceDescription),Z(j.hsnSacCode),j.baseCost,j.discountAmount,j.gstPercent,j.quantity,j.taxableValue,j.gstAmount,j.total];ae.push(J.join(","))}),ae.join(`
`)},D=async(Q,O)=>{try{const ae=new Blob([Q],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const j=await window.electronAPI.showSaveDialog({defaultPath:O,filters:[{name:"CSV Files",extensions:["csv"]}]});return!j.canceled&&j.filePath?(await window.electronAPI.writeFile(j.filePath,Q),{success:!0,filePath:j.filePath,filename:O}):{success:!1,error:"Save canceled by user"}}else{const j=document.createElement("a"),J=URL.createObjectURL(ae);return j.setAttribute("href",J),j.setAttribute("download",O),j.style.visibility="hidden",document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(J),{success:!0,filePath:`Downloaded: ${O}`,filename:O}}}catch(ae){return console.error("Error saving GST Bill Report file:",ae),{success:!1,error:ae.message}}},U=async Q=>{try{if(!Q.startDate||!Q.endDate)throw new Error("Please select both start and end dates for the Referral Report");const O=new Date(Q.startDate),ae=new Date(Q.endDate);if(isNaN(O.getTime())||isNaN(ae.getTime()))throw new Error("Invalid date format");if(O>ae)throw new Error("Start date must be less than or equal to end date");const j=t.state.doctorModule?.doctorId;if(!j)throw new Error("No doctor selected. Please select a doctor first.");l.value=20,c.value="Fetching referral data...";const J=Math.floor(new Date(O.getFullYear(),O.getMonth(),O.getDate()).getTime()/1e3),ie=Math.floor(new Date(ae.getFullYear(),ae.getMonth(),ae.getDate(),23,59,59).getTime()/1e3),X=await it.get("referral/report",{params:{start_ts:J,end_ts:ie,doctor_id:j}});if(!X.data?.success||!X.data?.data)throw new Error(X.data?.error||"Failed to fetch referral report");const fe=X.data.data.items||[];l.value=60,c.value="Generating CSV file...";const M=L(fe);l.value=90,c.value="Preparing download...";const z=`referral_report_${Q.startDate}_to_${Q.endDate}.csv`,se=await D(M,z);if(!se.success)throw new Error(se.error||"Failed to save report file");l.value=100,c.value="Referral Report generated successfully!",d.value={reportType:"Referral Report",totalRecords:fe.length,dateRange:{from:Q.startDate,to:Q.endDate},filename:z},A.value=!0;const be={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Referral Report",format:"CSV",recordCount:fe.length,status:"Completed",filename:z};f.value.unshift(be),n.value=!0,a.value=`Referral Report generated successfully! ${fe.length} records included.`}catch(O){throw console.error("Referral Report generation error:",O),O}},L=Q=>{const ae=[["Created At","Referred By","Referred To","Entity Type","Patient Name"].join(",")];return Q.forEach(j=>{const J=j.createdAt?new Date(j.createdAt).toLocaleString():"",ie=[Z(J),Z(j.referredBy||""),Z(j.referredTo||""),Z(j.entityType||""),Z(j.patientName||"")];ae.push(ie.join(","))}),ae.join(`
`)},H=async Q=>{try{if(!Q.startDate||!Q.endDate)throw new Error("Please select both start and end dates for the Payment Report");const O=new Date(Q.startDate),ae=new Date(Q.endDate);if(O>ae)throw new Error("Start date must be less than or equal to end date");l.value=20,c.value="Fetching payment receipts for date range...";const j=await ZM(t,Q.startDate,Q.endDate);if(j.error)throw new Error(`Failed to fetch payment receipts: ${j.error.message||"Unknown error"}`);l.value=40,c.value="Processing payment data...";const J=Array.isArray(j.data)?j.data:[],ie=J.filter(be=>be.status==="Created"||be.status==="Completed");console.log(`Found ${ie.length} valid receipts out of ${J.length} total receipts for date range`),l.value=60,c.value="Transforming data to Payment Report format...";const X=oe(ie,Q.startDate,Q.endDate);l.value=80,c.value="Generating CSV file...";const fe=de(X);l.value=90,c.value="Preparing download...";const M=`payment_report_${Q.startDate}_to_${Q.endDate}.csv`,z=await te(fe,M);if(!z.success)throw new Error(z.error||"Failed to save report file");l.value=100,c.value="Payment Report generated successfully!",d.value={reportType:"Payment Report",totalRecords:X.length,dateRange:{from:Q.startDate,to:Q.endDate},filename:M},A.value=!0;const se={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Payment Report",format:"CSV",recordCount:X.length,status:"Completed",filename:M};f.value.unshift(se),n.value=!0,a.value=`Payment Report generated successfully! ${X.length} records included.`}catch(O){throw console.error("Payment Report generation error:",O),O}},oe=(Q,O,ae)=>{const j=Q.sort((ie,X)=>{const fe=new Date(ie.paymentReceiptDate||ie.createdAt),M=new Date(X.paymentReceiptDate||X.createdAt);return fe-M}),J=[];return j.forEach(ie=>{const X={cash:0,card:0,upi:0,bankTransfer:0,cheque:0,online:0};ie.payments&&Array.isArray(ie.payments)&&ie.payments.forEach(z=>{const se=z.mode?.toLowerCase(),be=z.amount||0;switch(se){case"cash":X.cash+=be;break;case"card":X.card+=be;break;case"upi":X.upi+=be;break;case"bank transfer":case"banktransfer":X.bankTransfer+=be;break;case"cheque":X.cheque+=be;break;case"online":X.online+=be;break;default:X.online+=be;break}});const fe=ie.servicesInfo||"",M={paymentReceiptId:ie.identifier||"",patientName:ie.patientName||"Unknown Patient",services:fe,totalAmount:ie.totalAmount||0,cash:X.cash,card:X.card,upi:X.upi,bankTransfer:X.bankTransfer,cheque:X.cheque,online:X.online,receiptDate:G(ie.paymentReceiptDate||ie.createdAt)};J.push(M)}),console.log("Transformed Payment Report data:",J),J},de=Q=>{const ae=[["Payment Receipt ID","Patient Name","Services","Total Amount","Cash","Card","UPI","Bank Transfer","Cheque","Online","Receipt Date"].join(",")];return Q.forEach(j=>{const J=[Z(j.paymentReceiptId),Z(j.patientName),Z(j.services),j.totalAmount,j.cash,j.card,j.upi,j.bankTransfer,j.cheque,j.online,j.receiptDate];ae.push(J.join(","))}),ae.join(`
`)},te=async(Q,O)=>{try{const ae=new Blob([Q],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const j=await window.electronAPI.showSaveDialog({defaultPath:O,filters:[{name:"CSV Files",extensions:["csv"]}]});return!j.canceled&&j.filePath?(await window.electronAPI.writeFile(j.filePath,Q),{success:!0,filePath:j.filePath,filename:O}):{success:!1,error:"Save canceled by user"}}else{const j=document.createElement("a"),J=URL.createObjectURL(ae);return j.setAttribute("href",J),j.setAttribute("download",O),j.style.visibility="hidden",document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(J),{success:!0,filePath:`Downloaded: ${O}`,filename:O}}}catch(ae){return console.error("Error saving Payment Report file:",ae),{success:!1,error:ae.message}}},q=async Q=>{try{if(!Q.selectedDate)throw new Error("Please select a date for the 3C Daily Case Register report");l.value=20,c.value="Fetching payment receipts...";const O=await Pw(t,Q.selectedDate);if(O.error)throw new Error(`Failed to fetch payment receipts: ${O.error.message||"Unknown error"}`);l.value=40,c.value="Processing receipt data...";const ae=Array.isArray(O.data)?O.data:[],j=ae.filter(z=>z.status==="Created"||z.status==="Completed");console.log(`Found ${j.length} valid receipts out of ${ae.length} total receipts`),l.value=60,c.value="Transforming data to 3C format...";const J=ce(j,Q.selectedDate);l.value=80,c.value="Generating CSV file...";const ie=le(J);l.value=90,c.value="Preparing download...";const X=`3c_daily_case_register_${Q.selectedDate}.csv`,fe=await ne(ie,X);if(!fe.success)throw new Error(fe.error||"Failed to save report file");l.value=100,c.value="Report generated successfully!",d.value={reportType:"3C Daily Case Register",totalRecords:J.length,dateRange:{from:Q.selectedDate,to:Q.selectedDate},filename:X},A.value=!0;const M={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"3C Daily Case Register",format:"CSV",recordCount:J.length,status:"Completed",filename:X};f.value.unshift(M),n.value=!0,a.value=`3C Report generated successfully! ${J.length} records included.`}catch(O){throw console.error("3C Report generation error:",O),O}},ce=(Q,O)=>{const ae=Q.sort((ie,X)=>{const fe=new Date(ie.paymentReceiptDate||ie.createdAt),M=new Date(X.paymentReceiptDate||X.createdAt);return fe-M}),j=[];let J=1;return ae.forEach(ie=>{const X=ie.servicesInfo||"",fe={date:O,serialNumber:J++,patientName:ie.patientName||"Unknown Patient",services:X,feesReceived:ie.totalPaid||0,dateOfReceipt:G(ie.paymentReceiptDate||ie.createdAt),paymentReceiptNo:ie.identifier||""};j.push(fe)}),console.log("Transformed 3C data:",j),j},le=Q=>{const ae=[["Date","Serial Number","Patient Name","Services","Fees Received","Date of Receipt","Payment Receipt No."].join(",")];return Q.forEach(j=>{const J=[j.date,j.serialNumber,Z(j.patientName),Z(j.services),j.feesReceived,j.dateOfReceipt,Z(j.paymentReceiptNo)];ae.push(J.join(","))}),ae.join(`
`)},Z=Q=>{if(Q==null)return"";const O=String(Q);return O.includes(",")||O.includes('"')||O.includes(`
`)?`"${O.replace(/"/g,'""')}"`:O},ne=async(Q,O)=>{try{const ae=new Blob([Q],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const j=await window.electronAPI.showSaveDialog({defaultPath:O,filters:[{name:"CSV Files",extensions:["csv"]}]});return!j.canceled&&j.filePath?(await window.electronAPI.writeFile(j.filePath,Q),{success:!0,filePath:j.filePath,filename:O}):{success:!1,error:"Save canceled by user"}}else{const j=document.createElement("a"),J=URL.createObjectURL(ae);return j.setAttribute("href",J),j.setAttribute("download",O),j.style.visibility="hidden",document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(J),{success:!0,filePath:`Downloaded: ${O}`,filename:O}}}catch(ae){return console.error("Error saving 3C report file:",ae),{success:!1,error:ae.message}}},G=Q=>{if(!Q)return"";try{return new Date(Q).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return Q}},W=async Q=>{l.value=10,c.value="Collecting data...",await new Promise(X=>setTimeout(X,1e3)),l.value=30,c.value="Analyzing records...",await new Promise(X=>setTimeout(X,1500)),l.value=60,c.value="Generating charts and visualizations...",await new Promise(X=>setTimeout(X,1e3)),l.value=80,c.value="Finalizing report...",await new Promise(X=>setTimeout(X,800)),l.value=100,c.value="Report generated successfully!";const O=Math.floor(Math.random()*500)+50,j={"payment-report":"Payment Report","gst-bill-report":"GST Bill Report","gst-detail-report":"GST Detail Report","3c-daily-case-register":"3C Daily Case Register"}[Q.reportType]||"Custom Report";let J=null;(Q.reportType==="payment-report"||Q.reportType==="gst-bill-report"||Q.reportType==="gst-detail-report")&&Q.startDate&&Q.endDate&&(J={from:Q.startDate,to:Q.endDate}),d.value={reportType:j,totalRecords:O,dateRange:J,filename:`${Q.reportType}_report_${new Date().toISOString().split("T")[0]}.${Q.format||"pdf"}`},A.value=!0;const ie={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:j,format:(Q.format||"pdf").toUpperCase(),recordCount:O,status:"Completed",filename:d.value.filename};f.value.unshift(ie),n.value=!0,a.value=`Report generated successfully! ${O} records included.`};return An(()=>{console.log("Reports page initialized")}),(Q,O)=>{const ae=I("v-col"),j=I("v-card-text"),J=I("v-card"),ie=I("v-progress-circular"),X=I("v-card-title"),fe=I("v-row"),M=I("v-data-table"),z=I("v-icon"),se=I("v-snackbar"),be=I("v-main");return P(),he(be,null,{default:u(()=>[i(En,{feature:"reports"},{default:u(()=>[i(fe,{"aria-label":"reports row",style:{height:"calc(100vh - 64px)"},class:"d-flex align-stretch ma-0"},{default:u(()=>[i(ae,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",YOe,[i(qOe,{filters:m.value,loading:o.value,onFilterChange:h,onStartReport:g,onClearFilters:y},null,8,["filters","loading"])])]),_:1}),i(ae,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",XOe,[i(J,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i(J,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(j,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[f.value.length>0?(P(),Ae(ze,{key:0},[v("strong",null,K(f.value.length),1),N(" report"+K(f.value.length!==1?"s":"")+" available ",1)],64)):(P(),Ae("strong",JOe,"Generate Reports"))]),_:1})]),_:1}),o.value?(P(),he(fe,{key:0,"no-gutters":""},{default:u(()=>[i(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",ZOe,[i(ie,{"model-value":l.value,color:"primary",size:"64",width:"6"},{default:u(()=>[N(K(l.value)+"% ",1)]),_:1},8,["model-value"]),v("div",eHe,K(c.value||"Generating report..."),1),d.value?(P(),Ae("div",tHe,[i(J,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[i(X,{class:"text-h6"},{default:u(()=>[...O[2]||(O[2]=[N("Report Summary",-1)])]),_:1}),i(j,null,{default:u(()=>[v("div",nHe,[O[3]||(O[3]=v("strong",null,"Report Type:",-1)),N(" "+K(d.value.reportType),1)]),v("div",aHe,[O[4]||(O[4]=v("strong",null,"Total Records:",-1)),N(" "+K(d.value.totalRecords),1)]),d.value.dateRange?(P(),Ae("div",rHe,[O[5]||(O[5]=v("strong",null,"Date Range:",-1)),N(" "+K(d.value.dateRange.from)+" - "+K(d.value.dateRange.to),1)])):ge("",!0),A.value&&d.value.filename?(P(),Ae("div",sHe,[O[6]||(O[6]=v("strong",null,"File:",-1)),N(" "+K(d.value.filename),1)])):ge("",!0)]),_:1})]),_:1})])):ge("",!0)])]),_:1})]),_:1})):f.value.length>0?(P(),he(fe,{key:1,"no-gutters":""},{default:u(()=>[i(ae,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[i(M,{headers:p.value,items:f.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"])]),_:1})]),_:1})):(P(),he(fe,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[i(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",oHe,[i(z,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...O[7]||(O[7]=[N("mdi-chart-line",-1)])]),_:1}),O[8]||(O[8]=v("div",{class:"text-h6 mb-2"},"Generate Reports",-1)),O[9]||(O[9]=v("div",{class:"text-body-2 text-medium-emphasis"},"Configure report settings and generate comprehensive clinic reports",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1}),i(se,{modelValue:n.value,"onUpdate:modelValue":O[0]||(O[0]=Fe=>n.value=Fe),class:"elevation-24",color:"success"},{default:u(()=>[N(K(a.value),1)]),_:1},8,["modelValue"]),i(se,{modelValue:r.value,"onUpdate:modelValue":O[1]||(O[1]=Fe=>r.value=Fe),class:"elevation-24",color:"error"},{default:u(()=>[N(K(s.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},lHe=en(iHe,[["__scopeId","data-v-6d2b4c29"]]),uHe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},cHe={class:"filter-field mb-3"},dHe={class:"filter-field mb-3"},fHe={class:"status-chip-wrapper"},AHe={class:"d-flex justify-center mt-4 mb-2"},mHe={class:"d-flex justify-center"},vHe={__name:"PharmacyQueueFilter",props:{billDate:{type:String,default:""},status:{type:String,default:null},isSearching:{type:Boolean,default:!1}},emits:["filter-change","search","clear"],setup(e,{emit:t}){const n=e,a=t,r=R(n.billDate||""),s=R(n.status!==null?n.status:null),o=[{value:null,label:"All"},{value:"Draft",label:"Draft"},{value:"Finalized",label:"Finalized"},{value:"Cancelled",label:"Cancelled"},{value:"Refund",label:"Refund"}],l=ee(()=>Tn()),c=ee(()=>!!r.value||s.value!==null),f=()=>{p()},d=()=>{r.value="",p()},A=()=>{p()},m=g=>{s.value=g,A()},p=()=>{a("filter-change",{billDate:r.value,status:s.value,hasErrors:!1,hasFilters:c.value})},h=()=>{a("search",{billDate:r.value,status:s.value})},y=()=>{r.value="",s.value=null,a("clear"),p()};return Ge(()=>n.billDate,g=>{r.value=g||""}),Ge(()=>n.status,g=>{s.value=g!==void 0?g:null}),p(),(g,_)=>{const b=I("v-card-text"),S=I("v-card"),B=I("v-text-field"),F=I("v-icon"),T=I("v-chip"),E=I("v-btn");return P(),he(S,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[i(S,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(b,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[..._[2]||(_[2]=[v("span",{class:"text-body-2 font-weight-medium"},"Filter Pharmacy Bills",-1)])]),_:1})]),_:1}),v("div",uHe,[v("div",cHe,[i(B,{modelValue:r.value,"onUpdate:modelValue":[_[0]||(_[0]=x=>r.value=x),f],type:"date",label:"Bill Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:l.value,"onClick:clear":d,onClick:_[1]||(_[1]=x=>x.target.showPicker&&x.target.showPicker())},null,8,["modelValue","max"])]),v("div",dHe,[_[4]||(_[4]=v("div",{class:"filter-section-label mb-2"},"Status",-1)),v("div",fHe,[(P(),Ae(ze,null,Jt(o,x=>i(T,{key:x.value,size:"small",variant:s.value===x.value?"flat":"outlined",color:s.value===x.value?"primary":"default",class:lt(["status-chip",{"status-chip-active":s.value===x.value}]),onClick:C=>m(x.value)},{default:u(()=>[s.value===x.value?(P(),he(F,{key:0,size:"small",class:"mr-1"},{default:u(()=>[..._[3]||(_[3]=[N(" mdi-check-circle ",-1)])]),_:1})):ge("",!0),N(" "+K(x.label),1)]),_:2},1032,["variant","color","class","onClick"])),64))])]),v("div",AHe,[i(E,{color:"primary",size:"small","prepend-icon":"mdi-magnify",onClick:h,class:"filter-button",loading:e.isSearching},{default:u(()=>[..._[5]||(_[5]=[N(" Search ",-1)])]),_:1},8,["loading"])]),v("div",mHe,[i(E,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:y,class:"filter-button-clear",disabled:!c.value},{default:u(()=>[..._[6]||(_[6]=[N(" Clear ",-1)])]),_:1},8,["disabled"])])])]),_:1})}}},hHe=en(vHe,[["__scopeId","data-v-7b28a2d8"]]);var lv=9e15,vf=1e9,JE="0123456789abcdef",F2="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",P2="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ZE={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-lv,maxE:lv,crypto:!1},$9,Tc,Yn=!0,Xw="[DecimalError] ",of=Xw+"Invalid argument: ",Q9=Xw+"Precision limit exceeded",G9=Xw+"crypto unavailable",z9="[object Decimal]",Fo=Math.floor,Cs=Math.pow,pHe=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,gHe=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,yHe=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,W9=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$l=1e7,Vn=7,_He=9007199254740991,wHe=F2.length-1,ek=P2.length-1,Kt={toStringTag:z9};Kt.absoluteValue=Kt.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),In(e)};Kt.ceil=function(){return In(new this.constructor(this),this.e+1,2)};Kt.clampedTo=Kt.clamp=function(e,t){var n,a=this,r=a.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(of+t);return n=a.cmp(e),n<0?e:a.cmp(t)>0?t:new r(a)};Kt.comparedTo=Kt.cmp=function(e){var t,n,a,r,s=this,o=s.d,l=(e=new s.constructor(e)).d,c=s.s,f=e.s;if(!o||!l)return!c||!f?NaN:c!==f?c:o===l?0:!o^c<0?1:-1;if(!o[0]||!l[0])return o[0]?c:l[0]?-f:0;if(c!==f)return c;if(s.e!==e.e)return s.e>e.e^c<0?1:-1;for(a=o.length,r=l.length,t=0,n=a<r?a:r;t<n;++t)if(o[t]!==l[t])return o[t]>l[t]^c<0?1:-1;return a===r?0:a>r^c<0?1:-1};Kt.cosine=Kt.cos=function(){var e,t,n=this,a=n.constructor;return n.d?n.d[0]?(e=a.precision,t=a.rounding,a.precision=e+Math.max(n.e,n.sd())+Vn,a.rounding=1,n=bHe(a,X9(a,n)),a.precision=e,a.rounding=t,In(Tc==2||Tc==3?n.neg():n,e,t,!0)):new a(1):new a(NaN)};Kt.cubeRoot=Kt.cbrt=function(){var e,t,n,a,r,s,o,l,c,f,d=this,A=d.constructor;if(!d.isFinite()||d.isZero())return new A(d);for(Yn=!1,s=d.s*Cs(d.s*d,1/3),!s||Math.abs(s)==1/0?(n=no(d.d),e=d.e,(s=(e-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=Cs(n,1/3),e=Fo((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?n="5e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),a=new A(n),a.s=d.s):a=new A(s.toString()),o=(e=A.precision)+3;;)if(l=a,c=l.times(l).times(l),f=c.plus(d),a=cr(f.plus(d).times(l),f.plus(c),o+2,1),no(l.d).slice(0,o)===(n=no(a.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!r&&n=="4999"){if(!r&&(In(l,e+1,0),l.times(l).times(l).eq(d))){a=l;break}o+=4,r=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(In(a,e+1,1),t=!a.times(a).times(a).eq(d));break}return Yn=!0,In(a,e,A.rounding,t)};Kt.decimalPlaces=Kt.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-Fo(this.e/Vn))*Vn,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};Kt.dividedBy=Kt.div=function(e){return cr(this,new this.constructor(e))};Kt.dividedToIntegerBy=Kt.divToInt=function(e){var t=this,n=t.constructor;return In(cr(t,new n(e),0,1,1),n.precision,n.rounding)};Kt.equals=Kt.eq=function(e){return this.cmp(e)===0};Kt.floor=function(){return In(new this.constructor(this),this.e+1,3)};Kt.greaterThan=Kt.gt=function(e){return this.cmp(e)>0};Kt.greaterThanOrEqualTo=Kt.gte=function(e){var t=this.cmp(e);return t==1||t===0};Kt.hyperbolicCosine=Kt.cosh=function(){var e,t,n,a,r,s=this,o=s.constructor,l=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return l;n=o.precision,a=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,r=s.d.length,r<32?(e=Math.ceil(r/3),t=(1/Zw(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=th(o,1,s.times(t),new o(1),!0);for(var c,f=e,d=new o(8);f--;)c=s.times(s),s=l.minus(c.times(d.minus(c.times(d))));return In(s,o.precision=n,o.rounding=a,!0)};Kt.hyperbolicSine=Kt.sinh=function(){var e,t,n,a,r=this,s=r.constructor;if(!r.isFinite()||r.isZero())return new s(r);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(r.e,r.sd())+4,s.rounding=1,a=r.d.length,a<3)r=th(s,2,r,r,!0);else{e=1.4*Math.sqrt(a),e=e>16?16:e|0,r=r.times(1/Zw(5,e)),r=th(s,2,r,r,!0);for(var o,l=new s(5),c=new s(16),f=new s(20);e--;)o=r.times(r),r=r.times(l.plus(o.times(c.times(o).plus(f))))}return s.precision=t,s.rounding=n,In(r,t,n,!0)};Kt.hyperbolicTangent=Kt.tanh=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+7,a.rounding=1,cr(n.sinh(),n.cosh(),a.precision=e,a.rounding=t)):new a(n.s)};Kt.inverseCosine=Kt.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),a=t.precision,r=t.rounding;return n!==-1?n===0?e.isNeg()?ku(t,a,r):new t(0):new t(NaN):e.isZero()?ku(t,a+4,r).times(.5):(t.precision=a+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=a,t.rounding=r,e.times(2))};Kt.inverseHyperbolicCosine=Kt.acosh=function(){var e,t,n=this,a=n.constructor;return n.lte(1)?new a(n.eq(1)?0:NaN):n.isFinite()?(e=a.precision,t=a.rounding,a.precision=e+Math.max(Math.abs(n.e),n.sd())+4,a.rounding=1,Yn=!1,n=n.times(n).minus(1).sqrt().plus(n),Yn=!0,a.precision=e,a.rounding=t,n.ln()):new a(n)};Kt.inverseHyperbolicSine=Kt.asinh=function(){var e,t,n=this,a=n.constructor;return!n.isFinite()||n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,a.rounding=1,Yn=!1,n=n.times(n).plus(1).sqrt().plus(n),Yn=!0,a.precision=e,a.rounding=t,n.ln())};Kt.inverseHyperbolicTangent=Kt.atanh=function(){var e,t,n,a,r=this,s=r.constructor;return r.isFinite()?r.e>=0?new s(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=s.precision,t=s.rounding,a=r.sd(),Math.max(a,e)<2*-r.e-1?In(new s(r),e,t,!0):(s.precision=n=a-r.e,r=cr(r.plus(1),new s(1).minus(r),n+e,1),s.precision=e+4,s.rounding=1,r=r.ln(),s.precision=e,s.rounding=t,r.times(.5))):new s(NaN)};Kt.inverseSine=Kt.asin=function(){var e,t,n,a,r=this,s=r.constructor;return r.isZero()?new s(r):(t=r.abs().cmp(1),n=s.precision,a=s.rounding,t!==-1?t===0?(e=ku(s,n+4,a).times(.5),e.s=r.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,r=r.div(new s(1).minus(r.times(r)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=a,r.times(2)))};Kt.inverseTangent=Kt.atan=function(){var e,t,n,a,r,s,o,l,c,f=this,d=f.constructor,A=d.precision,m=d.rounding;if(f.isFinite()){if(f.isZero())return new d(f);if(f.abs().eq(1)&&A+4<=ek)return o=ku(d,A+4,m).times(.25),o.s=f.s,o}else{if(!f.s)return new d(NaN);if(A+4<=ek)return o=ku(d,A+4,m).times(.5),o.s=f.s,o}for(d.precision=l=A+10,d.rounding=1,n=Math.min(28,l/Vn+2|0),e=n;e;--e)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(Yn=!1,t=Math.ceil(l/Vn),a=1,c=f.times(f),o=new d(f),r=f;e!==-1;)if(r=r.times(c),s=o.minus(r.div(a+=2)),r=r.times(c),o=s.plus(r.div(a+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Yn=!0,In(o,d.precision=A,d.rounding=m,!0)};Kt.isFinite=function(){return!!this.d};Kt.isInteger=Kt.isInt=function(){return!!this.d&&Fo(this.e/Vn)>this.d.length-2};Kt.isNaN=function(){return!this.s};Kt.isNegative=Kt.isNeg=function(){return this.s<0};Kt.isPositive=Kt.isPos=function(){return this.s>0};Kt.isZero=function(){return!!this.d&&this.d[0]===0};Kt.lessThan=Kt.lt=function(e){return this.cmp(e)<0};Kt.lessThanOrEqualTo=Kt.lte=function(e){return this.cmp(e)<1};Kt.logarithm=Kt.log=function(e){var t,n,a,r,s,o,l,c,f=this,d=f.constructor,A=d.precision,m=d.rounding,p=5;if(e==null)e=new d(10),t=!0;else{if(e=new d(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new d(NaN);t=e.eq(10)}if(n=f.d,f.s<0||!n||!n[0]||f.eq(1))return new d(n&&!n[0]?-1/0:f.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(r=n[0];r%10===0;)r/=10;s=r!==1}if(Yn=!1,l=A+p,o=Nd(f,l),a=t?D2(d,l+10):Nd(e,l),c=cr(o,a,l,1),ag(c.d,r=A,m))do if(l+=10,o=Nd(f,l),a=t?D2(d,l+10):Nd(e,l),c=cr(o,a,l,1),!s){+no(c.d).slice(r+1,r+15)+1==1e14&&(c=In(c,A+1,0));break}while(ag(c.d,r+=10,m));return Yn=!0,In(c,A,m)};Kt.minus=Kt.sub=function(e){var t,n,a,r,s,o,l,c,f,d,A,m,p=this,h=p.constructor;if(e=new h(e),!p.d||!e.d)return!p.s||!e.s?e=new h(NaN):p.d?e.s=-e.s:e=new h(e.d||p.s!==e.s?p:NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(f=p.d,m=e.d,l=h.precision,c=h.rounding,!f[0]||!m[0]){if(m[0])e.s=-e.s;else if(f[0])e=new h(p);else return new h(c===3?-0:0);return Yn?In(e,l,c):e}if(n=Fo(e.e/Vn),d=Fo(p.e/Vn),f=f.slice(),s=d-n,s){for(A=s<0,A?(t=f,s=-s,o=m.length):(t=m,n=d,o=f.length),a=Math.max(Math.ceil(l/Vn),o)+2,s>a&&(s=a,t.length=1),t.reverse(),a=s;a--;)t.push(0);t.reverse()}else{for(a=f.length,o=m.length,A=a<o,A&&(o=a),a=0;a<o;a++)if(f[a]!=m[a]){A=f[a]<m[a];break}s=0}for(A&&(t=f,f=m,m=t,e.s=-e.s),o=f.length,a=m.length-o;a>0;--a)f[o++]=0;for(a=m.length;a>s;){if(f[--a]<m[a]){for(r=a;r&&f[--r]===0;)f[r]=$l-1;--f[r],f[a]+=$l}f[a]-=m[a]}for(;f[--o]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(e.d=f,e.e=Jw(f,n),Yn?In(e,l,c):e):new h(c===3?-0:0)};Kt.modulo=Kt.mod=function(e){var t,n=this,a=n.constructor;return e=new a(e),!n.d||!e.s||e.d&&!e.d[0]?new a(NaN):!e.d||n.d&&!n.d[0]?In(new a(n),a.precision,a.rounding):(Yn=!1,a.modulo==9?(t=cr(n,e.abs(),0,3,1),t.s*=e.s):t=cr(n,e,0,a.modulo,1),t=t.times(e),Yn=!0,n.minus(t))};Kt.naturalExponential=Kt.exp=function(){return tk(this)};Kt.naturalLogarithm=Kt.ln=function(){return Nd(this)};Kt.negated=Kt.neg=function(){var e=new this.constructor(this);return e.s=-e.s,In(e)};Kt.plus=Kt.add=function(e){var t,n,a,r,s,o,l,c,f,d,A=this,m=A.constructor;if(e=new m(e),!A.d||!e.d)return!A.s||!e.s?e=new m(NaN):A.d||(e=new m(e.d||A.s===e.s?A:NaN)),e;if(A.s!=e.s)return e.s=-e.s,A.minus(e);if(f=A.d,d=e.d,l=m.precision,c=m.rounding,!f[0]||!d[0])return d[0]||(e=new m(A)),Yn?In(e,l,c):e;if(s=Fo(A.e/Vn),a=Fo(e.e/Vn),f=f.slice(),r=s-a,r){for(r<0?(n=f,r=-r,o=d.length):(n=d,a=s,o=f.length),s=Math.ceil(l/Vn),o=s>o?s+1:o+1,r>o&&(r=o,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for(o=f.length,r=d.length,o-r<0&&(r=o,n=d,d=f,f=n),t=0;r;)t=(f[--r]=f[r]+d[r]+t)/$l|0,f[r]%=$l;for(t&&(f.unshift(t),++a),o=f.length;f[--o]==0;)f.pop();return e.d=f,e.e=Jw(f,a),Yn?In(e,l,c):e};Kt.precision=Kt.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(of+e);return n.d?(t=K9(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};Kt.round=function(){var e=this,t=e.constructor;return In(new t(e),e.e+1,t.rounding)};Kt.sine=Kt.sin=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+Math.max(n.e,n.sd())+Vn,a.rounding=1,n=CHe(a,X9(a,n)),a.precision=e,a.rounding=t,In(Tc>2?n.neg():n,e,t,!0)):new a(NaN)};Kt.squareRoot=Kt.sqrt=function(){var e,t,n,a,r,s,o=this,l=o.d,c=o.e,f=o.s,d=o.constructor;if(f!==1||!l||!l[0])return new d(!f||f<0&&(!l||l[0])?NaN:l?o:1/0);for(Yn=!1,f=Math.sqrt(+o),f==0||f==1/0?(t=no(l),(t.length+c)%2==0&&(t+="0"),f=Math.sqrt(t),c=Fo((c+1)/2)-(c<0||c%2),f==1/0?t="5e"+c:(t=f.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),a=new d(t)):a=new d(f.toString()),n=(c=d.precision)+3;;)if(s=a,a=s.plus(cr(o,s,n+2,1)).times(.5),no(s.d).slice(0,n)===(t=no(a.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!r&&t=="4999"){if(!r&&(In(s,c+1,0),s.times(s).eq(o))){a=s;break}n+=4,r=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(In(a,c+1,1),e=!a.times(a).eq(o));break}return Yn=!0,In(a,c,d.rounding,e)};Kt.tangent=Kt.tan=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+10,a.rounding=1,n=n.sin(),n.s=1,n=cr(n,new a(1).minus(n.times(n)).sqrt(),e+10,0),a.precision=e,a.rounding=t,In(Tc==2||Tc==4?n.neg():n,e,t,!0)):new a(NaN)};Kt.times=Kt.mul=function(e){var t,n,a,r,s,o,l,c,f,d=this,A=d.constructor,m=d.d,p=(e=new A(e)).d;if(e.s*=d.s,!m||!m[0]||!p||!p[0])return new A(!e.s||m&&!m[0]&&!p||p&&!p[0]&&!m?NaN:!m||!p?e.s/0:e.s*0);for(n=Fo(d.e/Vn)+Fo(e.e/Vn),c=m.length,f=p.length,c<f&&(s=m,m=p,p=s,o=c,c=f,f=o),s=[],o=c+f,a=o;a--;)s.push(0);for(a=f;--a>=0;){for(t=0,r=c+a;r>a;)l=s[r]+p[a]*m[r-a-1]+t,s[r--]=l%$l|0,t=l/$l|0;s[r]=(s[r]+t)%$l|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=Jw(s,n),Yn?In(e,A.precision,A.rounding):e};Kt.toBinary=function(e,t){return i4(this,2,e,t)};Kt.toDecimalPlaces=Kt.toDP=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Ai(e,0,vf),t===void 0?t=a.rounding:Ai(t,0,8),In(n,e+n.e+1,t))};Kt.toExponential=function(e,t){var n,a=this,r=a.constructor;return e===void 0?n=Mu(a,!0):(Ai(e,0,vf),t===void 0?t=r.rounding:Ai(t,0,8),a=In(new r(a),e+1,t),n=Mu(a,!0,e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};Kt.toFixed=function(e,t){var n,a,r=this,s=r.constructor;return e===void 0?n=Mu(r):(Ai(e,0,vf),t===void 0?t=s.rounding:Ai(t,0,8),a=In(new s(r),e+r.e+1,t),n=Mu(a,!1,e+a.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Kt.toFraction=function(e){var t,n,a,r,s,o,l,c,f,d,A,m,p=this,h=p.d,y=p.constructor;if(!h)return new y(p);if(f=n=new y(1),a=c=new y(0),t=new y(a),s=t.e=K9(h)-p.e-1,o=s%Vn,t.d[0]=Cs(10,o<0?Vn+o:o),e==null)e=s>0?t:f;else{if(l=new y(e),!l.isInt()||l.lt(f))throw Error(of+l);e=l.gt(t)?s>0?t:f:l}for(Yn=!1,l=new y(no(h)),d=y.precision,y.precision=s=h.length*Vn*2;A=cr(l,t,0,1,1),r=n.plus(A.times(a)),r.cmp(e)!=1;)n=a,a=r,r=f,f=c.plus(A.times(r)),c=r,r=t,t=l.minus(A.times(r)),l=r;return r=cr(e.minus(n),a,0,1,1),c=c.plus(r.times(f)),n=n.plus(r.times(a)),c.s=f.s=p.s,m=cr(f,a,s,1).minus(p).abs().cmp(cr(c,n,s,1).minus(p).abs())<1?[f,a]:[c,n],y.precision=d,Yn=!0,m};Kt.toHexadecimal=Kt.toHex=function(e,t){return i4(this,16,e,t)};Kt.toNearest=function(e,t){var n=this,a=n.constructor;if(n=new a(n),e==null){if(!n.d)return n;e=new a(1),t=a.rounding}else{if(e=new a(e),t===void 0?t=a.rounding:Ai(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Yn=!1,n=cr(n,e,0,t,1).times(e),Yn=!0,In(n)):(e.s=n.s,n=e),n};Kt.toNumber=function(){return+this};Kt.toOctal=function(e,t){return i4(this,8,e,t)};Kt.toPower=Kt.pow=function(e){var t,n,a,r,s,o,l=this,c=l.constructor,f=+(e=new c(e));if(!l.d||!e.d||!l.d[0]||!e.d[0])return new c(Cs(+l,f));if(l=new c(l),l.eq(1))return l;if(a=c.precision,s=c.rounding,e.eq(1))return In(l,a,s);if(t=Fo(e.e/Vn),t>=e.d.length-1&&(n=f<0?-f:f)<=_He)return r=j9(c,l,n,a),e.s<0?new c(1).div(r):In(r,a,s);if(o=l.s,o<0){if(t<e.d.length-1)return new c(NaN);if((e.d[t]&1)==0&&(o=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=o,l}return n=Cs(+l,f),t=n==0||!isFinite(n)?Fo(f*(Math.log("0."+no(l.d))/Math.LN10+l.e+1)):new c(n+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?o/0:0):(Yn=!1,c.rounding=l.s=1,n=Math.min(12,(t+"").length),r=tk(e.times(Nd(l,a+n)),a),r.d&&(r=In(r,a+5,1),ag(r.d,a,s)&&(t=a+10,r=In(tk(e.times(Nd(l,t+n)),t),t+5,1),+no(r.d).slice(a+1,a+15)+1==1e14&&(r=In(r,a+1,0)))),r.s=o,Yn=!0,c.rounding=s,In(r,a,s))};Kt.toPrecision=function(e,t){var n,a=this,r=a.constructor;return e===void 0?n=Mu(a,a.e<=r.toExpNeg||a.e>=r.toExpPos):(Ai(e,1,vf),t===void 0?t=r.rounding:Ai(t,0,8),a=In(new r(a),e,t),n=Mu(a,e<=a.e||a.e<=r.toExpNeg,e)),a.isNeg()&&!a.isZero()?"-"+n:n};Kt.toSignificantDigits=Kt.toSD=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Ai(e,1,vf),t===void 0?t=a.rounding:Ai(t,0,8)),In(new a(n),e,t)};Kt.toString=function(){var e=this,t=e.constructor,n=Mu(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};Kt.truncated=Kt.trunc=function(){return In(new this.constructor(this),this.e+1,1)};Kt.valueOf=Kt.toJSON=function(){var e=this,t=e.constructor,n=Mu(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function no(e){var t,n,a,r=e.length-1,s="",o=e[0];if(r>0){for(s+=o,t=1;t<r;t++)a=e[t]+"",n=Vn-a.length,n&&(s+=Cd(n)),s+=a;o=e[t],a=o+"",n=Vn-a.length,n&&(s+=Cd(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function Ai(e,t,n){if(e!==~~e||e<t||e>n)throw Error(of+e)}function ag(e,t,n,a){var r,s,o,l;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=Vn,r=0):(r=Math.ceil((t+1)/Vn),t%=Vn),s=Cs(10,Vn-t),l=e[r]%s|0,a==null?t<3?(t==0?l=l/100|0:t==1&&(l=l/10|0),o=n<4&&l==99999||n>3&&l==49999||l==5e4||l==0):o=(n<4&&l+1==s||n>3&&l+1==s/2)&&(e[r+1]/s/100|0)==Cs(10,t-2)-1||(l==s/2||l==0)&&(e[r+1]/s/100|0)==0:t<4?(t==0?l=l/1e3|0:t==1?l=l/100|0:t==2&&(l=l/10|0),o=(a||n<4)&&l==9999||!a&&n>3&&l==4999):o=((a||n<4)&&l+1==s||!a&&n>3&&l+1==s/2)&&(e[r+1]/s/1e3|0)==Cs(10,t-3)-1,o}function p_(e,t,n){for(var a,r=[0],s,o=0,l=e.length;o<l;){for(s=r.length;s--;)r[s]*=t;for(r[0]+=JE.indexOf(e.charAt(o++)),a=0;a<r.length;a++)r[a]>n-1&&(r[a+1]===void 0&&(r[a+1]=0),r[a+1]+=r[a]/n|0,r[a]%=n)}return r.reverse()}function bHe(e,t){var n,a,r;if(t.isZero())return t;a=t.d.length,a<32?(n=Math.ceil(a/3),r=(1/Zw(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=th(e,1,t.times(r),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var cr=(function(){function e(a,r,s){var o,l=0,c=a.length;for(a=a.slice();c--;)o=a[c]*r+l,a[c]=o%s|0,l=o/s|0;return l&&a.unshift(l),a}function t(a,r,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(a[l]!=r[l]){c=a[l]>r[l]?1:-1;break}return c}function n(a,r,s,o){for(var l=0;s--;)a[s]-=l,l=a[s]<r[s]?1:0,a[s]=l*o+a[s]-r[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,r,s,o,l,c){var f,d,A,m,p,h,y,g,_,b,S,B,F,T,E,x,C,D,U,L,H=a.constructor,oe=a.s==r.s?1:-1,de=a.d,te=r.d;if(!de||!de[0]||!te||!te[0])return new H(!a.s||!r.s||(de?te&&de[0]==te[0]:!te)?NaN:de&&de[0]==0||!te?oe*0:oe/0);for(c?(p=1,d=a.e-r.e):(c=$l,p=Vn,d=Fo(a.e/p)-Fo(r.e/p)),U=te.length,C=de.length,_=new H(oe),b=_.d=[],A=0;te[A]==(de[A]||0);A++);if(te[A]>(de[A]||0)&&d--,s==null?(T=s=H.precision,o=H.rounding):l?T=s+(a.e-r.e)+1:T=s,T<0)b.push(1),h=!0;else{if(T=T/p+2|0,A=0,U==1){for(m=0,te=te[0],T++;(A<C||m)&&T--;A++)E=m*c+(de[A]||0),b[A]=E/te|0,m=E%te|0;h=m||A<C}else{for(m=c/(te[0]+1)|0,m>1&&(te=e(te,m,c),de=e(de,m,c),U=te.length,C=de.length),x=U,S=de.slice(0,U),B=S.length;B<U;)S[B++]=0;L=te.slice(),L.unshift(0),D=te[0],te[1]>=c/2&&++D;do m=0,f=t(te,S,U,B),f<0?(F=S[0],U!=B&&(F=F*c+(S[1]||0)),m=F/D|0,m>1?(m>=c&&(m=c-1),y=e(te,m,c),g=y.length,B=S.length,f=t(y,S,g,B),f==1&&(m--,n(y,U<g?L:te,g,c))):(m==0&&(f=m=1),y=te.slice()),g=y.length,g<B&&y.unshift(0),n(S,y,B,c),f==-1&&(B=S.length,f=t(te,S,U,B),f<1&&(m++,n(S,U<B?L:te,B,c))),B=S.length):f===0&&(m++,S=[0]),b[A++]=m,f&&S[0]?S[B++]=de[x]||0:(S=[de[x]],B=1);while((x++<C||S[0]!==void 0)&&T--);h=S[0]!==void 0}b[0]||b.shift()}if(p==1)_.e=d,$9=h;else{for(A=1,m=b[0];m>=10;m/=10)A++;_.e=A+d*p-1,In(_,l?s+_.e+1:s,o,h)}return _}})();function In(e,t,n,a){var r,s,o,l,c,f,d,A,m,p=e.constructor;e:if(t!=null){if(A=e.d,!A)return e;for(r=1,l=A[0];l>=10;l/=10)r++;if(s=t-r,s<0)s+=Vn,o=t,d=A[m=0],c=d/Cs(10,r-o-1)%10|0;else if(m=Math.ceil((s+1)/Vn),l=A.length,m>=l)if(a){for(;l++<=m;)A.push(0);d=c=0,r=1,s%=Vn,o=s-Vn+1}else break e;else{for(d=l=A[m],r=1;l>=10;l/=10)r++;s%=Vn,o=s-Vn+r,c=o<0?0:d/Cs(10,r-o-1)%10|0}if(a=a||t<0||A[m+1]!==void 0||(o<0?d:d%Cs(10,r-o-1)),f=n<4?(c||a)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||a||n==6&&(s>0?o>0?d/Cs(10,r-o):0:A[m-1])%10&1||n==(e.s<0?8:7)),t<1||!A[0])return A.length=0,f?(t-=e.e+1,A[0]=Cs(10,(Vn-t%Vn)%Vn),e.e=-t||0):A[0]=e.e=0,e;if(s==0?(A.length=m,l=1,m--):(A.length=m+1,l=Cs(10,Vn-s),A[m]=o>0?(d/Cs(10,r-o)%Cs(10,o)|0)*l:0),f)for(;;)if(m==0){for(s=1,o=A[0];o>=10;o/=10)s++;for(o=A[0]+=l,l=1;o>=10;o/=10)l++;s!=l&&(e.e++,A[0]==$l&&(A[0]=1));break}else{if(A[m]+=l,A[m]!=$l)break;A[m--]=0,l=1}for(s=A.length;A[--s]===0;)A.pop()}return Yn&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function Mu(e,t,n){if(!e.isFinite())return Y9(e);var a,r=e.e,s=no(e.d),o=s.length;return t?(n&&(a=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Cd(a):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):r<0?(s="0."+Cd(-r-1)+s,n&&(a=n-o)>0&&(s+=Cd(a))):r>=o?(s+=Cd(r+1-o),n&&(a=n-r-1)>0&&(s=s+"."+Cd(a))):((a=r+1)<o&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-o)>0&&(r+1===o&&(s+="."),s+=Cd(a))),s}function Jw(e,t){var n=e[0];for(t*=Vn;n>=10;n/=10)t++;return t}function D2(e,t,n){if(t>wHe)throw Yn=!0,n&&(e.precision=n),Error(Q9);return In(new e(F2),t,1,!0)}function ku(e,t,n){if(t>ek)throw Error(Q9);return In(new e(P2),t,n,!0)}function K9(e){var t=e.length-1,n=t*Vn+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function Cd(e){for(var t="";e--;)t+="0";return t}function j9(e,t,n,a){var r,s=new e(1),o=Math.ceil(a/Vn+4);for(Yn=!1;;){if(n%2&&(s=s.times(t),SN(s.d,o)&&(r=!0)),n=Fo(n/2),n===0){n=s.d.length-1,r&&s.d[n]===0&&++s.d[n];break}t=t.times(t),SN(t.d,o)}return Yn=!0,s}function CN(e){return e.d[e.d.length-1]&1}function q9(e,t,n){for(var a,r,s=new e(t[0]),o=0;++o<t.length;){if(r=new e(t[o]),!r.s){s=r;break}a=s.cmp(r),(a===n||a===0&&s.s===n)&&(s=r)}return s}function tk(e,t){var n,a,r,s,o,l,c,f=0,d=0,A=0,m=e.constructor,p=m.rounding,h=m.precision;if(!e.d||!e.d[0]||e.e>17)return new m(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(Yn=!1,c=h):c=t,l=new m(.03125);e.e>-2;)e=e.times(l),A+=5;for(a=Math.log(Cs(2,A))/Math.LN10*2+5|0,c+=a,n=s=o=new m(1),m.precision=c;;){if(s=In(s.times(e),c,1),n=n.times(++d),l=o.plus(cr(s,n,c,1)),no(l.d).slice(0,c)===no(o.d).slice(0,c)){for(r=A;r--;)o=In(o.times(o),c,1);if(t==null)if(f<3&&ag(o.d,c-a,p,f))m.precision=c+=10,n=s=l=new m(1),d=0,f++;else return In(o,m.precision=h,p,Yn=!0);else return m.precision=h,o}o=l}}function Nd(e,t){var n,a,r,s,o,l,c,f,d,A,m,p=1,h=10,y=e,g=y.d,_=y.constructor,b=_.rounding,S=_.precision;if(y.s<0||!g||!g[0]||!y.e&&g[0]==1&&g.length==1)return new _(g&&!g[0]?-1/0:y.s!=1?NaN:g?0:y);if(t==null?(Yn=!1,d=S):d=t,_.precision=d+=h,n=no(g),a=n.charAt(0),Math.abs(s=y.e)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)y=y.times(e),n=no(y.d),a=n.charAt(0),p++;s=y.e,a>1?(y=new _("0."+n),s++):y=new _(a+"."+n.slice(1))}else return f=D2(_,d+2,S).times(s+""),y=Nd(new _(a+"."+n.slice(1)),d-h).plus(f),_.precision=S,t==null?In(y,S,b,Yn=!0):y;for(A=y,c=o=y=cr(y.minus(1),y.plus(1),d,1),m=In(y.times(y),d,1),r=3;;){if(o=In(o.times(m),d,1),f=c.plus(cr(o,new _(r),d,1)),no(f.d).slice(0,d)===no(c.d).slice(0,d))if(c=c.times(2),s!==0&&(c=c.plus(D2(_,d+2,S).times(s+""))),c=cr(c,new _(p),d,1),t==null)if(ag(c.d,d-h,b,l))_.precision=d+=h,f=o=y=cr(A.minus(1),A.plus(1),d,1),m=In(y.times(y),d,1),r=l=1;else return In(c,_.precision=S,b,Yn=!0);else return _.precision=S,c;c=f,r+=2}}function Y9(e){return String(e.s*e.s/0)}function g_(e,t){var n,a,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;a++);for(r=t.length;t.charCodeAt(r-1)===48;--r);if(t=t.slice(a,r),t){if(r-=a,e.e=n=n-a-1,e.d=[],a=(n+1)%Vn,n<0&&(a+=Vn),a<r){for(a&&e.d.push(+t.slice(0,a)),r-=Vn;a<r;)e.d.push(+t.slice(a,a+=Vn));t=t.slice(a),a=Vn-t.length}else a-=r;for(;a--;)t+="0";e.d.push(+t),Yn&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function xHe(e,t){var n,a,r,s,o,l,c,f,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),W9.test(t))return g_(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(gHe.test(t))n=16,t=t.toLowerCase();else if(pHe.test(t))n=2;else if(yHe.test(t))n=8;else throw Error(of+t);for(s=t.search(/p/i),s>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,a=e.constructor,o&&(t=t.replace(".",""),l=t.length,s=l-s,r=j9(a,new a(n),s,s*2)),f=p_(t,n,$l),d=f.length-1,s=d;f[s]===0;--s)f.pop();return s<0?new a(e.s*0):(e.e=Jw(f,d),e.d=f,Yn=!1,o&&(e=cr(e,r,l*4)),c&&(e=e.times(Math.abs(c)<54?Cs(2,c):tn.pow(2,c))),Yn=!0,e)}function CHe(e,t){var n,a=t.d.length;if(a<3)return t.isZero()?t:th(e,2,t,t);n=1.4*Math.sqrt(a),n=n>16?16:n|0,t=t.times(1/Zw(5,n)),t=th(e,2,t,t);for(var r,s=new e(5),o=new e(16),l=new e(20);n--;)r=t.times(t),t=t.times(s.plus(r.times(o.times(r).minus(l))));return t}function th(e,t,n,a,r){var s,o,l,c,f=e.precision,d=Math.ceil(f/Vn);for(Yn=!1,c=n.times(n),l=new e(a);;){if(o=cr(l.times(c),new e(t++*t++),f,1),l=r?a.plus(o):a.minus(o),a=cr(o.times(c),new e(t++*t++),f,1),o=l.plus(a),o.d[d]!==void 0){for(s=d;o.d[s]===l.d[s]&&s--;);if(s==-1)break}s=l,l=a,a=o,o=s}return Yn=!0,o.d.length=d+1,o}function Zw(e,t){for(var n=e;--t;)n*=e;return n}function X9(e,t){var n,a=t.s<0,r=ku(e,e.precision,1),s=r.times(.5);if(t=t.abs(),t.lte(s))return Tc=a?4:1,t;if(n=t.divToInt(r),n.isZero())Tc=a?3:2;else{if(t=t.minus(n.times(r)),t.lte(s))return Tc=CN(n)?a?2:3:a?4:1,t;Tc=CN(n)?a?1:4:a?3:2}return t.minus(r).abs()}function i4(e,t,n,a){var r,s,o,l,c,f,d,A,m,p=e.constructor,h=n!==void 0;if(h?(Ai(n,1,vf),a===void 0?a=p.rounding:Ai(a,0,8)):(n=p.precision,a=p.rounding),!e.isFinite())d=Y9(e);else{for(d=Mu(e),o=d.indexOf("."),h?(r=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):r=t,o>=0&&(d=d.replace(".",""),m=new p(1),m.e=d.length-o,m.d=p_(Mu(m),10,r),m.e=m.d.length),A=p_(d,10,r),s=c=A.length;A[--c]==0;)A.pop();if(!A[0])d=h?"0p+0":"0";else{if(o<0?s--:(e=new p(e),e.d=A,e.e=s,e=cr(e,m,n,a,0,r),A=e.d,s=e.e,f=$9),o=A[n],l=r/2,f=f||A[n+1]!==void 0,f=a<4?(o!==void 0||f)&&(a===0||a===(e.s<0?3:2)):o>l||o===l&&(a===4||f||a===6&&A[n-1]&1||a===(e.s<0?8:7)),A.length=n,f)for(;++A[--n]>r-1;)A[n]=0,n||(++s,A.unshift(1));for(c=A.length;!A[c-1];--c);for(o=0,d="";o<c;o++)d+=JE.charAt(A[o]);if(h){if(c>1)if(t==16||t==8){for(o=t==16?4:3,--c;c%o;c++)d+="0";for(A=p_(d,r,t),c=A.length;!A[c-1];--c);for(o=1,d="1.";o<c;o++)d+=JE.charAt(A[o])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>c)for(s-=c;s--;)d+="0";else s<c&&(d=d.slice(0,s)+"."+d.slice(s))}d=(t==16?"0x":t==2?"0b":t==8?"0o":"")+d}return e.s<0?"-"+d:d}function SN(e,t){if(e.length>t)return e.length=t,!0}function SHe(e){return new this(e).abs()}function EHe(e){return new this(e).acos()}function kHe(e){return new this(e).acosh()}function BHe(e,t){return new this(e).plus(t)}function THe(e){return new this(e).asin()}function IHe(e){return new this(e).asinh()}function FHe(e){return new this(e).atan()}function PHe(e){return new this(e).atanh()}function DHe(e,t){e=new this(e),t=new this(t);var n,a=this.precision,r=this.rounding,s=a+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=ku(this,s,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?ku(this,a,r):new this(0),n.s=e.s):!e.d||t.isZero()?(n=ku(this,s,1).times(.5),n.s=e.s):t.s<0?(this.precision=s,this.rounding=1,n=this.atan(cr(e,t,s,1)),t=ku(this,s,1),this.precision=a,this.rounding=r,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(cr(e,t,s,1)),n}function UHe(e){return new this(e).cbrt()}function RHe(e){return In(e=new this(e),e.e+1,2)}function NHe(e,t,n){return new this(e).clamp(t,n)}function VHe(e){if(!e||typeof e!="object")throw Error(Xw+"Object expected");var t,n,a,r=e.defaults===!0,s=["precision",1,vf,"rounding",0,8,"toExpNeg",-lv,0,"toExpPos",0,lv,"maxE",0,lv,"minE",-lv,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],r&&(this[n]=ZE[n]),(a=e[n])!==void 0)if(Fo(a)===a&&a>=s[t+1]&&a<=s[t+2])this[n]=a;else throw Error(of+n+": "+a);if(n="crypto",r&&(this[n]=ZE[n]),(a=e[n])!==void 0)if(a===!0||a===!1||a===0||a===1)if(a)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(G9);else this[n]=!1;else throw Error(of+n+": "+a);return this}function LHe(e){return new this(e).cos()}function MHe(e){return new this(e).cosh()}function J9(e){var t,n,a;function r(s){var o,l,c,f=this;if(!(f instanceof r))return new r(s);if(f.constructor=r,EN(s)){f.s=s.s,Yn?!s.d||s.e>r.maxE?(f.e=NaN,f.d=null):s.e<r.minE?(f.e=0,f.d=[0]):(f.e=s.e,f.d=s.d.slice()):(f.e=s.e,f.d=s.d?s.d.slice():s.d);return}if(c=typeof s,c==="number"){if(s===0){f.s=1/s<0?-1:1,f.e=0,f.d=[0];return}if(s<0?(s=-s,f.s=-1):f.s=1,s===~~s&&s<1e7){for(o=0,l=s;l>=10;l/=10)o++;Yn?o>r.maxE?(f.e=NaN,f.d=null):o<r.minE?(f.e=0,f.d=[0]):(f.e=o,f.d=[s]):(f.e=o,f.d=[s]);return}if(s*0!==0){s||(f.s=NaN),f.e=NaN,f.d=null;return}return g_(f,s.toString())}if(c==="string")return(l=s.charCodeAt(0))===45?(s=s.slice(1),f.s=-1):(l===43&&(s=s.slice(1)),f.s=1),W9.test(s)?g_(f,s):xHe(f,s);if(c==="bigint")return s<0?(s=-s,f.s=-1):f.s=1,g_(f,s.toString());throw Error(of+s)}if(r.prototype=Kt,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=VHe,r.clone=J9,r.isDecimal=EN,r.abs=SHe,r.acos=EHe,r.acosh=kHe,r.add=BHe,r.asin=THe,r.asinh=IHe,r.atan=FHe,r.atanh=PHe,r.atan2=DHe,r.cbrt=UHe,r.ceil=RHe,r.clamp=NHe,r.cos=LHe,r.cosh=MHe,r.div=OHe,r.exp=HHe,r.floor=$He,r.hypot=QHe,r.ln=GHe,r.log=zHe,r.log10=KHe,r.log2=WHe,r.max=jHe,r.min=qHe,r.mod=YHe,r.mul=XHe,r.pow=JHe,r.random=ZHe,r.round=e$e,r.sign=t$e,r.sin=n$e,r.sinh=a$e,r.sqrt=r$e,r.sub=s$e,r.sum=o$e,r.tan=i$e,r.tanh=l$e,r.trunc=u$e,e===void 0&&(e={}),e&&e.defaults!==!0)for(a=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return r.config(e),r}function OHe(e,t){return new this(e).div(t)}function HHe(e){return new this(e).exp()}function $He(e){return In(e=new this(e),e.e+1,3)}function QHe(){var e,t,n=new this(0);for(Yn=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Yn=!0,new this(1/0);n=t}return Yn=!0,n.sqrt()}function EN(e){return e instanceof tn||e&&e.toStringTag===z9||!1}function GHe(e){return new this(e).ln()}function zHe(e,t){return new this(e).log(t)}function WHe(e){return new this(e).log(2)}function KHe(e){return new this(e).log(10)}function jHe(){return q9(this,arguments,-1)}function qHe(){return q9(this,arguments,1)}function YHe(e,t){return new this(e).mod(t)}function XHe(e,t){return new this(e).mul(t)}function JHe(e,t){return new this(e).pow(t)}function ZHe(e){var t,n,a,r,s=0,o=new this(1),l=[];if(e===void 0?e=this.precision:Ai(e,1,vf),a=Math.ceil(e/Vn),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(a));s<a;)r=t[s],r>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:l[s++]=r%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(a*=4);s<a;)r=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(t,s):(l.push(r%1e7),s+=4);s=a/4}else throw Error(G9);else for(;s<a;)l[s++]=Math.random()*1e7|0;for(a=l[--s],e%=Vn,a&&e&&(r=Cs(10,Vn-e),l[s]=(a/r|0)*r);l[s]===0;s--)l.pop();if(s<0)n=0,l=[0];else{for(n=-1;l[0]===0;n-=Vn)l.shift();for(a=1,r=l[0];r>=10;r/=10)a++;a<Vn&&(n-=Vn-a)}return o.e=n,o.d=l,o}function e$e(e){return In(e=new this(e),e.e+1,this.rounding)}function t$e(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function n$e(e){return new this(e).sin()}function a$e(e){return new this(e).sinh()}function r$e(e){return new this(e).sqrt()}function s$e(e,t){return new this(e).sub(t)}function o$e(){var e=0,t=arguments,n=new this(t[e]);for(Yn=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Yn=!0,In(n,this.precision,this.rounding)}function i$e(e){return new this(e).tan()}function l$e(e){return new this(e).tanh()}function u$e(e){return In(e=new this(e),e.e+1,1)}Kt[Symbol.for("nodejs.util.inspect.custom")]=Kt.toString;Kt[Symbol.toStringTag]="Decimal";var tn=Kt.constructor=J9(ZE);F2=new tn(F2);P2=new tn(P2);function Z9(e){const t=R([]),n=R(!1),a=R([]),r=R(!1),s=(A=1e4)=>new Promise((m,p)=>setTimeout(()=>p(new Error("API_TIMEOUT")),A)),o=async()=>{if(!e.value){console.log("No bill ID available for loading payments"),t.value=[];return}if(n.value){console.log("Already loading payments, skipping duplicate call");return}n.value=!0,console.log("Loading payments for pharmacy bill ID:",e.value);try{const A=await Promise.race([Ece(e.value),s(1e4)]);console.log("Full API response:",A),A.success?(t.value=Array.isArray(A.data)?A.data:[],console.log(" Payments loaded successfully:",t.value.length)):(console.error(" API Error loading payments:",A.error),t.value=[])}catch(A){A.message==="API_TIMEOUT"?console.error(" Payment loading timed out"):console.error(" Exception loading bill payments:",A),t.value=[]}finally{n.value=!1}},l=async A=>{if(!e.value)throw new Error("No bill ID available for payment creation");r.value=!0;try{const m={...A,amount:Number(A.amount)};console.log("Creating pharmacy payment with payload:",m);const p=await Promise.race([kce(e.value,m),s(15e3)]);if(!p.success)throw new Error(p.error?.message||"Failed to create payment");return console.log("Payment created successfully:",p.data),await o(),p}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment creation timed out. Please try again."):m}finally{r.value=!1}},c=async A=>{if(!(!A||!e.value)){if(a.value.includes(A)){console.log("Payment already being deleted:",A);return}a.value.push(A);try{const m=await Promise.race([Bce(e.value,A),s(1e4)]);if(!m.success)throw new Error(m.error?.message||"Failed to delete payment");return console.log("Payment deleted successfully:",A),await o(),m}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment deletion timed out. Please try again."):m}finally{a.value=a.value.filter(m=>m!==A)}}},f=ee(()=>Array.isArray(t.value)?t.value.reduce((A,m)=>A+(parseFloat(m.amount)||0),0):0);let d=null;return Ge(e,async(A,m)=>{if(console.log("Bill ID watcher triggered:",{newBillId:A||"null",oldBillId:m||"null",lastBillId:d||"null"}),A===d){console.log("Bill ID unchanged, skipping reload");return}d=A,A?(console.log("Bill ID changed, loading payments for:",A),await o()):(console.log("No bill ID, clearing payments"),t.value=[])},{immediate:!0}),{billPayments:t,isLoadingPayments:n,deletingPayments:a,isSubmittingPayment:r,totalPaymentsMade:f,loadBillPayments:o,createNewPayment:l,deletePayment:c,formatPaymentAmount:hr}}const c$e={class:"text-center"},d$e={class:"text-center"},f$e={class:"text-body-2 text-medium-emphasis mb-4"},A$e={class:"pa-1"},m$e={class:"text-body-1 font-weight-medium"},v$e={class:"text-body-2 text-medium-emphasis"},h$e={class:"pa-1"},p$e={class:"text-body-1 font-weight-medium"},g$e={class:"text-body-2 text-medium-emphasis"},y$e={class:"pa-1"},_$e={class:"text-body-1 font-weight-medium"},w$e={class:"text-body-2 text-medium-emphasis"},b$e={key:0,class:"text-right",style:{width:"100px"}},x$e={key:1,class:"text-right",style:{width:"100px"}},C$e={key:2,class:"text-left",style:{width:"80px"}},S$e={class:"text-body-2 font-weight-medium"},E$e={class:"text-caption text-medium-emphasis"},k$e={key:0,class:"text-caption text-medium-emphasis"},B$e={class:"text-body-2 font-weight-medium"},T$e={key:1},I$e={class:"text-body-2"},F$e={class:"text-caption text-medium-emphasis"},P$e={class:"text-right"},D$e={class:"text-right"},U$e={class:"text-right"},R$e={class:"text-right"},N$e={class:"text-right"},V$e={class:"text-right"},L$e={key:1},M$e={key:0,class:"text-right"},O$e={class:"text-body-2"},H$e={key:1,class:"text-right"},$$e={class:"text-right font-weight-medium"},Q$e={key:2},G$e={key:0},z$e={key:1},W$e={class:"text-body-2 mb-1"},K$e={class:"text-body-2 mb-1"},j$e={class:"text-right"},q$e={key:0},Y$e={class:"text-right"},X$e={key:1},J$e={class:"text-right"},Z$e={class:"text-right"},e9e={class:"text-right"},t9e={class:"text-right font-weight-bold"},n9e={class:"text-right"},a9e={class:"text-right"},r9e={class:"text-right font-weight-medium"},s9e={class:"text-h6"},o9e={key:0,class:"text-caption text-medium-emphasis mt-1"},i9e={class:"text-h6 text-success"},l9e={key:0,class:"text-caption text-info mt-1"},u9e={key:0,class:"text-center pa-4"},c9e={class:"font-weight-bold"},d9e={class:"d-flex align-center flex-wrap",style:{gap:"2px"}},f9e={class:"font-weight-medium text-body-1"},A9e={key:0,class:"text-caption text-medium-emphasis"},m9e={class:"mt-1"},v9e={class:"d-flex align-center justify-space-between flex-wrap gap-2 mt-1"},h9e={class:"d-flex align-center flex-wrap gap-2"},p9e={__name:"pharmacy-bill-edit",props:{billId:{type:[String,Number],required:!0},mode:{type:String,default:"edit",validator:e=>["edit","return"].includes(e)}},emits:["close","bill-updated"],setup(e,{emit:t}){const n=Ln(),{showSuccess:a,showError:r}=la(),s=ee(()=>n.getters["pharmacyModule/currentPharmacyId"]),o=e,l=t,c=R(!1),f=R(null),d=R(null),A=R([]),m=R([]),p=R(0),h=R(!1),y=R(!1),g=R(!1),_=R(!1),b=R(null),S=R([]),B=R(!1),F=R("");let T=null;const E=R({}),x=R(null),C=Z9(x),{billPayments:D,isLoadingPayments:U,deletingPayments:L,totalPaymentsMade:H,loadBillPayments:oe,createNewPayment:de,deletePayment:te}=C,q=bh,ce=R([]),le=[rt=>!!rt||"Amount is required",rt=>rt>0||"Amount must be greater than 0",rt=>Number.isInteger(Number(rt))||"Amount must be a whole number"],Z=[rt=>!!rt||"Payment mode is required"],ne=[rt=>!!rt||"Payment date is required"],G=()=>{ce.value.push({amount:null,mode:"Cash",paymentDate:Tn(),datePickerMenu:!1})},W=rt=>{ce.value.splice(rt,1)},Q=rt=>{if(!rt)return null;try{if(typeof rt=="string")return rt.includes("T")?rt.split("T")[0]:rt;if(rt instanceof Date){const Pe=rt.getFullYear(),ut=String(rt.getMonth()+1).padStart(2,"0"),wt=String(rt.getDate()).padStart(2,"0");return`${Pe}-${ut}-${wt}`}return null}catch(Pe){return console.error("Error parsing payment date:",Pe),null}},O=(rt,Pe)=>{if(rt)if(rt instanceof Date){const ut=rt.getFullYear(),wt=String(rt.getMonth()+1).padStart(2,"0"),Xt=String(rt.getDate()).padStart(2,"0");Pe.paymentDate=`${ut}-${wt}-${Xt}`}else typeof rt=="string"&&(Pe.paymentDate=rt);else Pe.paymentDate="";Pe.datePickerMenu=!1},ae=ee(()=>Array.isArray(ce.value)?ce.value.reduce((rt,Pe)=>rt+(parseFloat(Pe.amount)||0),0):0),j=ee(()=>{const rt=H.value,Pe=ae.value;return Math.max(0,Be.value-rt-Pe)}),J=async()=>{if(ce.value.length===0){console.log("No new payment entries to create");return}console.log("Creating new payment entries:",ce.value);try{const rt=ce.value.filter(Pe=>Pe.amount&&parseFloat(Pe.amount)>0&&Pe.mode&&Pe.paymentDate);console.log("Valid payments to create:",rt);for(const Pe of rt){const ut={amount:parseFloat(Pe.amount),mode:Pe.mode,paymentDate:Pe.paymentDate};console.log("Creating payment with payload:",ut);const wt=await de(ut);wt.success?console.log("Payment created successfully:",wt.data):(console.error("Error creating payment entry:",wt.error),r(`Failed to create payment: ${wt.error?.message||"Unknown error"}`))}ce.value=[],console.log("New payment entries cleared"),await oe()}catch(rt){console.error("Error creating payment entries:",rt),r("Failed to create some payments. Please try again.")}},ie=async()=>{try{c.value=!0,f.value=null;const{data:rt,error:Pe}=await AM(o.billId);if(Pe)f.value=Pe.response?.data?.error||Pe.message||"Failed to load bill",r("Error loading bill");else{if(o.mode==="return"&&rt.status!=="Finalized"){f.value="Only finalized bills can be returned",r("Only finalized bills can be returned");return}d.value=rt,A.value=rt.prescriptionMedicines||[],m.value=(rt.items||[]).map(ut=>({...ut,medicineId:ut.medicineId,medicineName:ut.medicineName,saltComposition:ut.saltComposition||"",marketer:ut.marketer||"",batchId:ut.medicineBatchId||null,batchNumber:ut.batchNumber||"",expiryDate:ut.expiryDate||null,packType:ut.packType||"",unitsPerPack:ut.unitsPerPack||1,mrp:ut.mrp||0,discountPercentage:ut.discountPercentage||0,gstPercentage:ut.gstPercentage||0,quantityUnits:ut.quantityUnits||1,availableUnits:ut.availableUnits||0,returnedQuantity:ut.returnedQuantity||0,returnQuantity:0,billItemId:ut.id})),p.value=rt.additionalDiscountAmount||0,await fe(),x.value=o.billId,await oe()}}catch(rt){console.error("Error loading bill:",rt),f.value=rt.message||"An unexpected error occurred",r("Error loading bill")}finally{c.value=!1}},X=async rt=>{if(E.value[rt])return E.value[rt];try{if(!s.value)return console.error("Pharmacy ID is required to load batches"),[];const{data:Pe,error:ut}=await pce(rt,s.value);if(!ut&&Pe){const wt=Pe.map(Xt=>({id:Xt.batchId||Xt.id,label:`${Xt.batchNumber} (Exp: ${qt(Xt.expiryDate)}, Stock: ${Xt.availableUnits})`,batchNumber:Xt.batchNumber,expiryDate:Xt.expiryDate,packType:Xt.packType||"",unitsPerPack:Xt.unitsPerPack||1,availableUnits:Xt.availableUnits,mrp:Xt.mrp,discountPercentage:Xt.discountPercentage,gstPercentage:Xt.gstPercentage}));return E.value[rt]=wt,wt}}catch(Pe){console.error("Error loading batches:",Pe)}return[]},fe=async()=>{const rt=[...new Set(m.value.map(Pe=>Pe.medicineId))];await Promise.all(rt.map(Pe=>X(Pe)))},M=rt=>E.value[rt]||[],z=async(rt,Pe)=>{const wt=M(rt.medicineId).find(Xt=>Xt.id===rt.batchId);wt&&(rt.batchNumber=wt.batchNumber,rt.expiryDate=wt.expiryDate,rt.packType=wt.packType||"",rt.unitsPerPack=wt.unitsPerPack||1,rt.mrp=wt.mrp,rt.discountPercentage=wt.discountPercentage,rt.gstPercentage=wt.gstPercentage,rt.availableUnits=wt.availableUnits,ye(rt))},se=rt=>{if(!rt.mrp||!rt.unitsPerPack||rt.unitsPerPack<=0)return 0;const Pe=new tn(rt.mrp),ut=new tn(rt.unitsPerPack),wt=new tn(rt.gstPercentage||0),Xt=new tn(rt.discountPercentage||0),bn=Pe.dividedBy(ut),wn=new tn(1).minus(Xt.dividedBy(100)),Zn=bn.times(wn),ua=new tn(1).plus(wt.dividedBy(100));return Zn.dividedBy(ua).toNumber()},be=rt=>{if(!rt.mrp||!rt.unitsPerPack||rt.unitsPerPack<=0)return 0;const Pe=new tn(rt.mrp),ut=new tn(rt.unitsPerPack),wt=new tn(rt.discountPercentage||0),Xt=Pe.dividedBy(ut),bn=new tn(1).minus(wt.dividedBy(100));return Xt.times(bn).toNumber()},Fe=rt=>{if(o.mode==="return"){const Pe=rt.quantityUnits||0,ut=rt.returnQuantity||0;return Math.max(0,Pe-ut)}return rt.quantityUnits||0},ye=(rt,Pe)=>{if(!rt.mrp||!rt.unitsPerPack||rt.unitsPerPack<=0)return 0;const ut=new tn(rt.mrp),wt=new tn(rt.unitsPerPack),Xt=new tn(rt.discountPercentage||0),bn=Fe(rt),wn=new tn(bn),Zn=ut.dividedBy(wt),ua=new tn(1).minus(Xt.dividedBy(100));return Zn.times(ua).times(wn).toNumber()},Qe=()=>{m.value.forEach((rt,Pe)=>{ye(rt)})},_e=ee(()=>m.value.reduce((Pe,ut)=>{if(!ut.mrp||!ut.unitsPerPack||ut.unitsPerPack<=0)return Pe;const wt=new tn(ut.mrp),Xt=new tn(ut.unitsPerPack),bn=Fe(ut),wn=new tn(bn),ua=wt.dividedBy(Xt).times(wn);return Pe.plus(ua)},new tn(0)).toNumber()),Se=ee(()=>m.value.reduce((Pe,ut)=>{if(!ut.mrp||!ut.unitsPerPack||ut.unitsPerPack<=0)return Pe;const wt=new tn(ut.mrp),Xt=new tn(ut.unitsPerPack),bn=new tn(ut.discountPercentage||0),wn=Fe(ut),Zn=new tn(wn),ua=wt.dividedBy(Xt),Ce=new tn(1).minus(bn.dividedBy(100)),He=ua.times(Ce),Te=ua.minus(He).times(Zn);return Pe.plus(Te)},new tn(0)).toNumber()),Ee=ee(()=>m.value.reduce((Pe,ut)=>{if(!ut.mrp||!ut.unitsPerPack||ut.unitsPerPack<=0)return Pe;const wt=new tn(ut.mrp),Xt=new tn(ut.unitsPerPack),bn=new tn(ut.gstPercentage||0),wn=new tn(ut.discountPercentage||0),Zn=Fe(ut),ua=new tn(Zn),Ce=wt.dividedBy(Xt),He=new tn(1).minus(wn.dividedBy(100)),Re=Ce.times(He),Te=new tn(1).plus(bn.dividedBy(100)),dt=Re.dividedBy(Te).times(bn.dividedBy(100)).times(ua);return Pe.plus(dt)},new tn(0)).toNumber()),Ue=ee(()=>new tn(Ee.value).dividedBy(2).toNumber()),je=ee(()=>new tn(Ee.value).dividedBy(2).toNumber()),at=ee(()=>m.value.reduce((Pe,ut)=>{const wt=new tn(ye(ut,m.value.indexOf(ut)));return Pe.plus(wt)},new tn(0)).toNumber()),mt=ee(()=>{const rt=new tn(at.value),Pe=new tn(p.value||0),ut=rt.minus(Pe);return tn.max(new tn(0),ut).toNumber()}),xe=ee(()=>Math.ceil(mt.value)-mt.value),Be=ee(()=>Math.ceil(mt.value)),Ye=rt=>{if(!rt)return"N/A";try{let Pe;if(typeof rt=="number")Pe=new Date(rt*1e3);else if(typeof rt=="string")Pe=new Date(rt);else return"Invalid Date";if(isNaN(Pe.getTime()))return"Invalid Date";const ut=String(Pe.getDate()).padStart(2,"0"),wt=Pe.toLocaleDateString("en-IN",{month:"short"}),Xt=String(Pe.getFullYear()).slice(-2);return`${ut} ${wt} ${Xt}`}catch(Pe){return console.error("Error formatting date:",Pe,rt),"Invalid Date"}},kt=rt=>{if(F.value=rt,T&&clearTimeout(T),!rt||rt.trim().length===0){S.value=[],B.value=!1;return}T=setTimeout(()=>{xt(rt.trim())},300)},xt=async rt=>{if(!rt||rt.trim().length===0){S.value=[];return}if(!s.value){r("Please select a pharmacy first"),S.value=[];return}try{B.value=!0,console.log(" Searching for:",rt);const{data:Pe,error:ut}=await Ice(rt,s.value);if(console.log(" Search response:",{medicinesCount:Pe?.length||0,error:ut?.message||null,data:Pe}),!ut&&Pe){const wt=[];Pe.forEach(Xt=>{console.log(` Medicine: ${Xt.productName}, Batches: ${Xt.batches?.length||0}`);const bn=Xt.batches||[];console.log(` Valid batches for ${Xt.productName}: ${bn.length}`),bn.forEach(wn=>{const Zn=wn.unitsPerPack||1,ua=wn.mrp/Zn;wt.push({batchId:wn.batchId||wn.id,batchNumber:wn.batchNumber,expiryDate:wn.expiryDate,expiryFormatted:Ye(wn.expiryDate),medicineId:Xt.id,medicineName:Xt.productName,saltComposition:Xt.saltComposition||"",marketer:Xt.marketer||"",availableUnits:wn.availableUnits,mrp:wn.mrp,mrpPerUnit:ua,discountPercentage:wn.discountPercentage||0,gstPercentage:wn.gstPercentage||0,packType:wn.packType||"",unitsPerPack:Zn,displayLabel:`${Xt.productName} - ${wn.batchNumber} (Exp: ${Ye(wn.expiryDate)}, Stock: ${wn.availableUnits}, MRP: ${Vt(ua)}/unit)`})})}),S.value=wt,console.log("Flattened batches:",wt.length)}else console.log("No data or error in response"),S.value=[],ut&&r("Error searching medicines: "+(ut.message||"Unknown error"))}catch(Pe){console.error("Error searching medicines:",Pe),S.value=[],r("Error searching medicines")}finally{B.value=!1}},Nt=()=>{_.value=!0,S.value=[],b.value=null,F.value="",T&&clearTimeout(T)},At=()=>{if(!b.value)return;const rt=b.value;if(rt.availableUnits<=0){r("Selected batch has no available stock.");return}const Pe={medicineId:rt.medicineId,medicineName:rt.medicineName,saltComposition:rt.saltComposition,marketer:rt.marketer||"",batchId:rt.batchId,batchNumber:rt.batchNumber,expiryDate:rt.expiryDate,packType:rt.packType,unitsPerPack:rt.unitsPerPack,mrp:rt.mrp,discountPercentage:rt.discountPercentage,gstPercentage:rt.gstPercentage,quantityUnits:1,availableUnits:rt.availableUnits};m.value.push(Pe),ye(Pe,m.value.length-1),_.value=!1,b.value=null,a("Medicine added to bill")},Ot=rt=>{m.value.splice(rt,1),Qe()},Dt=async()=>{if(m.value.length===0)return{success:!1,error:"Please add at least one item to save the draft"};try{const rt=m.value.map(wt=>({medicineId:wt.medicineId,medicineBatchId:wt.batchId,quantityUnits:wt.quantityUnits,discountPercentage:wt.discountPercentage||0})),{data:Pe,error:ut}=await mce(o.billId,rt,p.value);return ut?{success:!1,error:ut.response?.data?.error||ut.message||"Failed to save draft"}:!Pe||!Pe.success?{success:!1,error:"Failed to save draft: Update did not succeed"}:(await J(),{success:!0,error:null})}catch(rt){return console.error("Error saving draft:",rt),{success:!1,error:rt.message||"An unexpected error occurred"}}},bt=async()=>{try{h.value=!0;const rt=await Dt();rt.success?(a("Draft saved successfully"),l("bill-updated"),vt()):r(rt.error||"Failed to save draft")}catch(rt){console.error("Error saving draft:",rt),r("An unexpected error occurred")}finally{h.value=!1}},Ze=async()=>{if(m.value.length===0){r("Please add at least one item to finalize the bill");return}try{y.value=!0;const rt=await Dt();if(!rt.success){r(`Failed to save changes: ${rt.error}. Please try again.`);return}const{data:Pe,error:ut}=await vce(o.billId);ut?r(ut.response?.data?.error||"Failed to finalize bill"):(a("Bill finalized successfully"),l("bill-updated",o.billId))}catch(rt){console.error("Error finalizing bill:",rt),r("An unexpected error occurred")}finally{y.value=!1}},qt=rt=>{if(!rt)return"";try{let Pe;if(typeof rt=="number")Pe=new Date(rt*1e3);else if(typeof rt=="string")Pe=new Date(rt);else return"";if(isNaN(Pe.getTime()))return"";const ut=String(Pe.getDate()).padStart(2,"0"),wt=Pe.toLocaleDateString("en-IN",{month:"short"}),Xt=String(Pe.getFullYear()).slice(-2);return`${ut} ${wt} ${Xt}`}catch(Pe){return console.error("Error formatting date:",Pe,rt),""}},Vt=rt=>rt==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(rt),zt=rt=>rt==null?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(rt),ln=rt=>{if(!rt)return!1;try{let Pe;if(typeof rt=="number")Pe=new Date(rt*1e3);else if(typeof rt=="string")Pe=new Date(rt);else return!1;if(isNaN(Pe.getTime()))return!1;const ut=new Date;return ut.setHours(0,0,0,0),Pe.setHours(0,0,0,0),Pe<ut}catch(Pe){return console.error("Error checking expiry:",Pe,rt),!1}},Dn=rt=>({Draft:"warning",Finalized:"success",Cancelled:"error",Refund:"info"})[rt]||"default",vt=()=>{l("close")},et=rt=>rt.quantityUnits-(rt.returnedQuantity||0),Wt=(rt,Pe)=>{const ut=et(rt);rt.returnQuantity>ut&&(rt.returnQuantity=ut,r(`Return quantity cannot exceed ${ut} units for ${rt.medicineName}`)),rt.returnQuantity<0&&(rt.returnQuantity=0)},_n=ee(()=>m.value.filter(rt=>rt.returnQuantity>0).length),na=async()=>{const rt=m.value.filter(Pe=>Pe.returnQuantity>0).map(Pe=>({billItemId:Pe.billItemId||Pe.id,returnedQuantity:Pe.returnQuantity}));if(rt.length===0){r("Please specify return quantity for at least one item");return}try{if(g.value=!0,ce.value.length>0){const wt=ce.value.filter(Xt=>Xt.amount&&parseFloat(Xt.amount)>0&&Xt.mode&&Xt.paymentDate);if(wt.length>0){for(const Xt of wt){const bn={amount:parseFloat(Xt.amount),mode:Xt.mode,paymentDate:Xt.paymentDate},wn=await de(bn);if(!wn.success){r(`Failed to create payment: ${wn.error?.message||"Unknown error"}`),g.value=!1;return}}ce.value=[],await oe()}}const{data:Pe,error:ut}=await Tce(o.billId,rt);ut?r(ut.response?.data?.error||ut.message||"Failed to process return"):(a("Return processed successfully"),l("bill-updated",o.billId))}catch(Pe){console.error("Error processing return:",Pe),r("An unexpected error occurred")}finally{g.value=!1}};return Ge(()=>o.billId,rt=>{x.value=rt},{immediate:!0}),An(()=>{ie()}),(rt,Pe)=>{const ut=I("v-icon"),wt=I("v-btn"),Xt=I("v-card-title"),bn=I("v-col"),wn=I("v-row"),Zn=I("v-progress-circular"),ua=I("v-label"),Ce=I("v-chip"),He=I("v-card-text"),Re=I("v-card"),Te=I("v-select"),Ve=I("v-text-field"),$e=I("v-table"),dt=I("v-alert"),Bt=I("v-divider"),yt=I("v-date-picker"),gt=I("v-menu"),pt=I("v-container"),tt=I("v-list-item"),re=I("v-card-subtitle"),ue=I("v-autocomplete"),We=I("v-spacer"),nt=I("v-card-actions"),Yt=I("v-dialog");return P(),Ae(ze,null,[i(Re,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[i(wn,{"no-gutters":""},{default:u(()=>[i(bn,{cols:"12"},{default:u(()=>[i(Xt,{class:"d-flex align-center justify-space-between"},{default:u(()=>[v("span",null,"Pharmacy Bill - "+K(e.mode==="return"?"Return":"Edit"),1),i(wt,{onClick:vt,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(ut,{size:"18"},{default:u(()=>[...Pe[4]||(Pe[4]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(wn,{"no-gutters":""},{default:u(()=>[i(bn,{cols:"12",class:"scroll-element"},{default:u(()=>[c.value?(P(),he(wn,{key:0,"no-gutters":""},{default:u(()=>[i(bn,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",c$e,[i(Zn,{indeterminate:"",color:"primary",size:"64"}),Pe[5]||(Pe[5]=v("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):f.value?(P(),he(wn,{key:1,"no-gutters":""},{default:u(()=>[i(bn,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",d$e,[i(ut,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Pe[6]||(Pe[6]=[N("mdi-alert-circle",-1)])]),_:1}),Pe[8]||(Pe[8]=v("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),v("div",f$e,K(f.value),1),i(wt,{color:"primary",onClick:ie,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Pe[7]||(Pe[7]=[N(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):d.value?(P(),he(pt,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[i(Re,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[i(He,{class:"pb-1 pt-2"},{default:u(()=>[i(wn,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(bn,{cols:"4"},{default:u(()=>[v("div",A$e,[i(ua,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Pe[9]||(Pe[9]=[N("Patient Information",-1)])]),_:1}),v("div",m$e,K(d.value.patientName||"Unknown Patient"),1),v("div",v$e,"ID: "+K(d.value.patientId||"N/A"),1)])]),_:1}),i(bn,{cols:"4"},{default:u(()=>[v("div",h$e,[i(ua,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Pe[10]||(Pe[10]=[N("Consultation Details",-1)])]),_:1}),v("div",p$e,"Dr. "+K(d.value.doctorName||"Unknown"),1),v("div",g$e,"Date: "+K(qt(d.value.consultationDate)),1)])]),_:1}),i(bn,{cols:"4"},{default:u(()=>[v("div",y$e,[i(ua,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Pe[11]||(Pe[11]=[N("Bill Information",-1)])]),_:1}),v("div",_$e,K(d.value.identifier),1),v("div",w$e,"Date: "+K(qt(d.value.billDate)),1),i(Ce,{color:Dn(d.value.status),size:"small",variant:"flat",class:"mt-1"},{default:u(()=>[N(K(d.value.status),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1})]),_:1}),A.value&&A.value.length>0?(P(),he(Re,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(He,{class:"pb-2"},{default:u(()=>[Pe[12]||(Pe[12]=v("div",{class:"text-subtitle-1 mb-2"},"Prescription Medicines",-1)),Pe[13]||(Pe[13]=v("div",{class:"text-body-2 text-medium-emphasis mb-2"},"These medicines were prescribed in the consultation:",-1)),(P(!0),Ae(ze,null,Jt(A.value,(Ct,Xe)=>(P(),he(Ce,{key:Xe,size:"small",variant:"outlined",class:"mr-2 mb-2"},{default:u(()=>[N(K(Ct.productName)+" ("+K(Ct.quantityUnits)+" units) ",1)]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0),i(Re,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(He,{class:"pb-2"},{default:u(()=>[Pe[34]||(Pe[34]=v("div",{class:"text-subtitle-1 mb-3"},"Bill Items",-1)),i($e,{density:"compact",class:"mb-3"},{default:u(()=>[v("thead",null,[v("tr",null,[Pe[14]||(Pe[14]=v("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),Pe[15]||(Pe[15]=v("th",{class:"text-left",style:{width:"200px"}},"Item",-1)),Pe[16]||(Pe[16]=v("th",{class:"text-left",style:{width:"150px"}},"Batch Details",-1)),Pe[17]||(Pe[17]=v("th",{class:"text-left",style:{width:"120px"}},"Packaging Details",-1)),Pe[18]||(Pe[18]=v("th",{class:"text-right",style:{width:"100px"}},"MRP (Pack)",-1)),Pe[19]||(Pe[19]=v("th",{class:"text-right",style:{width:"100px"}},"Discount %",-1)),Pe[20]||(Pe[20]=v("th",{class:"text-right",style:{width:"120px"}},"Taxable Value/Unit",-1)),Pe[21]||(Pe[21]=v("th",{class:"text-right",style:{width:"100px"}},"GST %",-1)),Pe[22]||(Pe[22]=v("th",{class:"text-right",style:{width:"120px"}},"Final Value/Unit",-1)),Pe[23]||(Pe[23]=v("th",{class:"text-right",style:{width:"100px"}},"Qty",-1)),e.mode==="return"?(P(),Ae("th",b$e,"Already Returned")):ge("",!0),e.mode==="return"?(P(),Ae("th",x$e,"Return Qty")):ge("",!0),Pe[24]||(Pe[24]=v("th",{class:"text-right",style:{width:"120px"}},"Total ()",-1)),e.mode==="edit"?(P(),Ae("th",C$e,"Actions")):ge("",!0)])]),v("tbody",null,[(P(!0),Ae(ze,null,Jt(m.value,(Ct,Xe)=>(P(),Ae("tr",{key:Xe},[v("td",null,K(Xe+1),1),v("td",null,[v("div",S$e,K(Ct.medicineName),1),v("div",E$e,K(Ct.saltComposition),1),Ct.marketer?(P(),Ae("div",k$e,K(Ct.marketer),1)):ge("",!0)]),v("td",null,[e.mode==="return"||Ct.batchId?(P(),Ae(ze,{key:0},[v("div",B$e,K(Ct.batchNumber||"N/A"),1),v("div",{class:lt(["text-caption text-medium-emphasis",ln(Ct.expiryDate)?"text-error":""])},[Ct.expiryDate?(P(),Ae(ze,{key:0},[N(" Exp: "+K(qt(Ct.expiryDate))+" ",1),ln(Ct.expiryDate)?(P(),he(Ce,{key:0,color:"error",size:"x-small",variant:"tonal",class:"ml-1"},{default:u(()=>[...Pe[25]||(Pe[25]=[N(" Expired ",-1)])]),_:1})):ge("",!0)],64)):(P(),Ae("span",T$e,"Exp: N/A"))],2),e.mode==="return"?(P(),he(Ce,{key:0,size:"x-small",color:"info",variant:"tonal",class:"mt-1"},{default:u(()=>[i(ut,{start:"",size:"x-small"},{default:u(()=>[...Pe[26]||(Pe[26]=[N("mdi-lock",-1)])]),_:1}),Pe[27]||(Pe[27]=N(" Locked ",-1))]),_:1})):ge("",!0)],64)):e.mode==="edit"?(P(),he(Te,{key:1,modelValue:Ct.batchId,"onUpdate:modelValue":[Et=>Ct.batchId=Et,()=>z(Ct,Xe)],items:M(Ct.medicineId),"item-title":"label","item-value":"id",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ge("",!0)]),v("td",null,[v("div",I$e,K(Ct.packType||"N/A"),1),v("div",F$e,K(Ct.unitsPerPack||1)+" units/pack",1)]),v("td",P$e,K(Vt(Ct.mrp)),1),v("td",D$e,K(Ct.discountPercentage)+"%",1),v("td",U$e,K(Vt(se(Ct))),1),v("td",R$e,K(Ct.gstPercentage)+"%",1),v("td",N$e,K(Vt(be(Ct))),1),v("td",V$e,[e.mode==="edit"?(P(),he(Ve,{key:0,modelValue:Ct.quantityUnits,"onUpdate:modelValue":[Et=>Ct.quantityUnits=Et,()=>ye(Ct,Xe)],modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",max:Ct.availableUnits},null,8,["modelValue","onUpdate:modelValue","max"])):(P(),Ae("span",L$e,K(Ct.quantityUnits),1))]),e.mode==="return"?(P(),Ae("td",M$e,[v("span",O$e,K(Ct.returnedQuantity||0),1)])):ge("",!0),e.mode==="return"?(P(),Ae("td",H$e,[i(Ve,{modelValue:Ct.returnQuantity,"onUpdate:modelValue":[Et=>Ct.returnQuantity=Et,()=>{Wt(Ct,Xe),Qe()}],modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"0",max:et(Ct)},null,8,["modelValue","onUpdate:modelValue","max"])])):ge("",!0),v("td",$$e,K(Vt(ye(Ct,Xe))),1),e.mode==="edit"?(P(),Ae("td",Q$e,[i(wt,{icon:"",size:"small",color:"error",variant:"text",onClick:Et=>Ot(Xe)},{default:u(()=>[i(ut,null,{default:u(()=>[...Pe[28]||(Pe[28]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])):ge("",!0)]))),128))])]),_:1}),m.value.length===0?(P(),he(dt,{key:0,type:"info",variant:"tonal",class:"mt-2"},{default:u(()=>[e.mode==="edit"?(P(),Ae("span",G$e,'No items in bill. Click "Add Medicine" to add items.')):(P(),Ae("span",z$e,"No items in bill."))]),_:1})):ge("",!0),e.mode==="edit"?(P(),he(wn,{key:1,"no-gutters":"",class:"align-center mt-3"},{default:u(()=>[i(bn,{cols:"auto"},{default:u(()=>[i(wt,{variant:"outlined",color:"primary",onClick:Nt,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Pe[29]||(Pe[29]=[N(" Add Medicine ",-1)])]),_:1})]),_:1}),i(bn),i(bn,{cols:"3"},{default:u(()=>[i(Ve,{label:"Additional Discount",modelValue:p.value,"onUpdate:modelValue":[Pe[0]||(Pe[0]=Ct=>p.value=Ct),Qe],modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0),e.mode==="return"?(P(),he(Re,{key:2,flat:"",color:"surfaceContainerHigh",class:"mt-3 card-enhanced"},{default:u(()=>[i(He,{class:"pb-2"},{default:u(()=>[Pe[32]||(Pe[32]=v("div",{class:"text-subtitle-2 mb-2"},"Return Summary",-1)),v("div",W$e,[Pe[30]||(Pe[30]=N(" Items to Return: ",-1)),v("strong",null,K(_n.value),1)]),i(Bt,{class:"my-2"}),v("div",K$e,[Pe[31]||(Pe[31]=v("strong",null,"Updated Bill Total (after return):",-1)),N(" "+K(Vt(Be.value)),1)]),Pe[33]||(Pe[33]=v("div",{class:"text-body-2 text-medium-emphasis"}," Bill total updates in real-time. Adjust payments as needed before processing return. ",-1))]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1}),i(Re,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(He,{class:"pb-2"},{default:u(()=>[Pe[44]||(Pe[44]=v("div",{class:"text-subtitle-1 mb-3"},"Bill Summary",-1)),i(Bt,{class:"mb-3"}),i(wn,{"no-gutters":""},{default:u(()=>[i(bn,{cols:"6"},{default:u(()=>[i($e,{density:"compact",class:"summary-table"},{default:u(()=>[v("tbody",null,[v("tr",null,[Pe[35]||(Pe[35]=v("td",{class:"text-left"},"MRP",-1)),v("td",j$e,K(Vt(_e.value)),1)]),Se.value>0?(P(),Ae("tr",q$e,[Pe[36]||(Pe[36]=v("td",{class:"text-left"},"Line item discount",-1)),v("td",Y$e,"-"+K(Vt(Se.value)),1)])):ge("",!0),p.value>0?(P(),Ae("tr",X$e,[Pe[37]||(Pe[37]=v("td",{class:"text-left"},"Additional discount",-1)),v("td",J$e,"-"+K(Vt(p.value)),1)])):ge("",!0),v("tr",null,[Pe[38]||(Pe[38]=v("td",{class:"text-left"},"Net Amount",-1)),v("td",Z$e,K(Vt(mt.value)),1)]),v("tr",null,[Pe[39]||(Pe[39]=v("td",{class:"text-left"},"Round off",-1)),v("td",e9e,K(xe.value>0?"+":"")+K(Vt(xe.value)),1)]),v("tr",null,[Pe[40]||(Pe[40]=v("td",{class:"text-left font-weight-bold"},"Final Amount",-1)),v("td",t9e,K(Vt(Be.value)),1)])])]),_:1})]),_:1}),i(bn,{cols:"6"},{default:u(()=>[i($e,{density:"compact",class:"summary-table"},{default:u(()=>[v("tbody",null,[v("tr",null,[Pe[41]||(Pe[41]=v("td",{class:"text-left"},"CGST",-1)),v("td",n9e,K(Vt(Ue.value)),1)]),v("tr",null,[Pe[42]||(Pe[42]=v("td",{class:"text-left"},"SGST",-1)),v("td",a9e,K(Vt(je.value)),1)]),v("tr",null,[Pe[43]||(Pe[43]=v("td",{class:"text-left font-weight-medium"},"Total GST",-1)),v("td",r9e,K(Vt(Ee.value)),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(Re,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(He,{class:"pb-2"},{default:u(()=>[Pe[55]||(Pe[55]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),i(wn,{"no-gutters":"",class:"mb-3"},{default:u(()=>[i(bn,{cols:"4"},{default:u(()=>[Pe[45]||(Pe[45]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",s9e,K(Vt(Be.value)),1),e.mode==="return"?(P(),Ae("div",o9e," (Updated after return) ")):ge("",!0)]),_:1}),i(bn,{cols:"4"},{default:u(()=>[Pe[46]||(Pe[46]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",i9e,K(Vt(Oe(H)+ae.value)),1)]),_:1}),i(bn,{cols:"4"},{default:u(()=>[Pe[47]||(Pe[47]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),v("div",{class:lt(["text-h6",j.value>0?"text-error":"text-success"])},K(Vt(j.value)),3),e.mode==="return"&&j.value<0?(P(),Ae("div",l9e," (Credit/Overpayment) ")):ge("",!0)]),_:1})]),_:1}),Oe(U)?(P(),Ae("div",u9e,[i(Zn,{indeterminate:"",size:"32",color:"primary"}),Pe[48]||(Pe[48]=v("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(P(),Ae(ze,{key:1},[i(Bt,{class:"mb-3"}),Pe[54]||(Pe[54]=v("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),i($e,{density:"compact",class:"mb-3"},{default:u(()=>[Pe[52]||(Pe[52]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(Oe(D),(Ct,Xe)=>(P(),Ae("tr",{key:`existing-${Ct.id}`},[v("td",null,K(Xe+1),1),v("td",c9e,""+K(Ct.amount.toLocaleString()),1),v("td",null,K(Ct.mode),1),v("td",null,K(qt(Ct.paymentDate)),1),v("td",null,[i(wt,{icon:"",size:"small",color:"error",variant:"text",onClick:Et=>Oe(te)(Ct.id),loading:Oe(L).includes(Ct.id)},{default:u(()=>[i(ut,null,{default:u(()=>[...Pe[49]||(Pe[49]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(P(!0),Ae(ze,null,Jt(ce.value,(Ct,Xe)=>(P(),Ae("tr",{key:`new-${Xe}`},[v("td",null,K(Oe(D).length+Xe+1),1),v("td",null,[i(Ve,{modelValue:Ct.amount,"onUpdate:modelValue":Et=>Ct.amount=Et,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:le},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(Te,{modelValue:Ct.mode,"onUpdate:modelValue":Et=>Ct.mode=Et,items:Oe(q),density:"compact",variant:"underlined","hide-details":"",rules:Z},null,8,["modelValue","onUpdate:modelValue","items"])]),v("td",null,[i(gt,{modelValue:Ct.datePickerMenu,"onUpdate:modelValue":Et=>Ct.datePickerMenu=Et,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:Et})=>[i(Ve,Ie({modelValue:Ct.paymentDate,"onUpdate:modelValue":ca=>Ct.paymentDate=ca,density:"compact",variant:"underlined","hide-details":"",rules:ne,readonly:""},{ref_for:!0},Et),{"append-inner":u(()=>[i(ut,{class:"text-medium-emphasis"},{default:u(()=>[...Pe[50]||(Pe[50]=[N("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[i(yt,{"model-value":Q(Ct.paymentDate),"onUpdate:modelValue":Et=>O(Et,Ct),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),v("td",null,[i(wt,{icon:"",size:"small",color:"error",variant:"text",onClick:Et=>W(Xe)},{default:u(()=>[i(ut,null,{default:u(()=>[...Pe[51]||(Pe[51]=[N("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),i(wn,{"no-gutters":"",class:"align-center"},{default:u(()=>[i(bn,{cols:"auto"},{default:u(()=>[i(wt,{variant:"outlined",color:"secondary",onClick:G,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Pe[53]||(Pe[53]=[N(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))]),_:1})]),_:1}),i(Re,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[i(He,{class:"d-flex justify-center pb-2",style:{gap:"4px"}},{default:u(()=>[e.mode==="edit"?(P(),Ae(ze,{key:0},[i(wt,{variant:"outlined",onClick:bt,loading:h.value,disabled:d.value.status!=="Draft"||m.value.length===0},{default:u(()=>[...Pe[56]||(Pe[56]=[N(" Save Draft ",-1)])]),_:1},8,["loading","disabled"]),i(wt,{color:"primary",onClick:Ze,loading:y.value,disabled:d.value.status!=="Draft"||m.value.length===0},{default:u(()=>[...Pe[57]||(Pe[57]=[N(" Finalize Bill ",-1)])]),_:1},8,["loading","disabled"])],64)):(P(),Ae(ze,{key:1},[i(wt,{variant:"outlined",onClick:vt},{default:u(()=>[...Pe[58]||(Pe[58]=[N(" Cancel ",-1)])]),_:1}),i(wt,{color:"primary",onClick:na,loading:g.value,disabled:_n.value===0},{default:u(()=>[...Pe[59]||(Pe[59]=[N(" Process Return ",-1)])]),_:1},8,["loading","disabled"])],64))]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1}),i(Yt,{modelValue:_.value,"onUpdate:modelValue":Pe[3]||(Pe[3]=Ct=>_.value=Ct),"max-width":"700px",persistent:""},{default:u(()=>[i(Re,null,{default:u(()=>[i(Xt,null,{default:u(()=>[...Pe[60]||(Pe[60]=[N("Add Medicine to Bill",-1)])]),_:1}),i(He,null,{default:u(()=>[i(ue,{modelValue:b.value,"onUpdate:modelValue":Pe[1]||(Pe[1]=Ct=>b.value=Ct),items:S.value,"item-title":"displayLabel","return-object":"",label:"Search Medicine by Batch",variant:"outlined",loading:B.value,"onUpdate:search":kt,placeholder:"Type medicine name to search...",clearable:"",autofocus:""},{item:u(({props:Ct,item:Xe})=>[i(tt,Ie(Ct,{class:"batch-search-item"}),{title:u(()=>[v("div",d9e,[v("span",f9e,K(Xe.raw.medicineName),1),Xe.raw.saltComposition?(P(),Ae("span",A9e," ("+K(Xe.raw.saltComposition)+") ",1)):ge("",!0)])]),subtitle:u(()=>[v("div",m9e,[v("div",v9e,[v("div",h9e,[i(Ce,{size:"small",variant:"tonal",color:"primary",density:"compact"},{default:u(()=>[i(ut,{start:"",size:"small"},{default:u(()=>[...Pe[61]||(Pe[61]=[N("mdi-barcode",-1)])]),_:1}),N(" "+K(Xe.raw.batchNumber),1)]),_:2},1024),i(Ce,{size:"small",variant:"tonal",color:"info",density:"compact"},{default:u(()=>[i(ut,{start:"",size:"small"},{default:u(()=>[...Pe[62]||(Pe[62]=[N("mdi-calendar",-1)])]),_:1}),N(" "+K(Xe.raw.expiryFormatted),1)]),_:2},1024),i(Ce,{size:"small",variant:"tonal",color:"default",density:"compact"},{default:u(()=>[N(K(zt(Xe.raw.mrpPerUnit))+"/unit ",1)]),_:2},1024),Xe.raw.discountPercentage>0?(P(),he(Ce,{key:0,size:"small",variant:"tonal",color:"warning",density:"compact"},{default:u(()=>[i(ut,{start:"",size:"small"},{default:u(()=>[...Pe[63]||(Pe[63]=[N("mdi-tag",-1)])]),_:1}),N(" "+K(Xe.raw.discountPercentage)+"% off ",1)]),_:2},1024)):ge("",!0)]),i(Ce,{size:"default",variant:"flat",color:"success",class:"font-weight-bold"},{default:u(()=>[i(ut,{start:""},{default:u(()=>[...Pe[64]||(Pe[64]=[N("mdi-package-variant",-1)])]),_:1}),N(" "+K(Xe.raw.availableUnits)+" units ",1)]),_:2},1024)])])]),_:2},1040)]),"no-data":u(()=>[i(Re,{flat:"",class:"pa-4 text-center"},{default:u(()=>[i(re,null,{default:u(()=>[N(K(B.value?"Searching...":"No batches found. Try a different search term."),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","loading"])]),_:1}),i(nt,null,{default:u(()=>[i(We),i(wt,{variant:"outlined",onClick:Pe[2]||(Pe[2]=Ct=>_.value=!1)},{default:u(()=>[...Pe[65]||(Pe[65]=[N("Cancel",-1)])]),_:1}),i(wt,{color:"primary",onClick:At,disabled:!b.value},{default:u(()=>[...Pe[66]||(Pe[66]=[N("Add to Bill",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},g9e=en(p9e,[["__scopeId","data-v-80089c1b"]]),y9e={class:"text-center"},_9e={class:"text-center"},w9e={class:"text-body-2 text-medium-emphasis mb-4"},b9e={class:"pa-1"},x9e={class:"text-body-1 font-weight-medium"},C9e={class:"text-body-2 text-medium-emphasis"},S9e={key:0,class:"text-body-2 text-medium-emphasis"},E9e={class:"pa-1"},k9e={class:"text-body-1 font-weight-medium"},B9e={class:"text-body-2 text-medium-emphasis"},T9e={class:"pa-1"},I9e={class:"text-body-1 font-weight-medium"},F9e={class:"text-body-2 text-medium-emphasis"},P9e={class:"text-body-2 font-weight-medium"},D9e={key:0,class:"text-caption text-medium-emphasis"},U9e={class:"text-body-2"},R9e={class:"text-body-2 font-weight-medium"},N9e={key:1},V9e={class:"text-body-2"},L9e={class:"text-caption text-medium-emphasis"},M9e={class:"text-right"},O9e={class:"text-right"},H9e={class:"text-right"},$9e={class:"text-right"},Q9e={class:"text-right"},G9e={class:"text-right"},z9e={class:"text-right font-weight-medium"},W9e={class:"text-right"},K9e={key:0},j9e={class:"text-right"},q9e={key:1},Y9e={class:"text-right"},X9e={class:"text-right"},J9e={class:"text-right"},Z9e={class:"text-right font-weight-bold"},eQe={class:"text-right"},tQe={class:"text-right"},nQe={class:"text-right font-weight-medium"},aQe={class:"text-h6"},rQe={class:"text-h6 text-success"},sQe={key:0,class:"text-center pa-4"},oQe={class:"text-left"},iQe={class:"text-left"},lQe={class:"text-right"},uQe={class:"text-right"},cQe={class:"text-center pa-4"},dQe={key:1,class:"d-flex justify-center align-center pa-8"},fQe={class:"text-center"},AQe={__name:"pharmacy-bill-view",props:{billId:{type:[String,Number],required:!0}},emits:["close","edit-bill"],setup(e,{emit:t}){const{showError:n}=la(),a=e,r=t,s=R(!1),o=R(null),l=R(null),c=R(null),f=R("view"),d=R({}),A=R(null),m=Z9(A),{billPayments:p,isLoadingPayments:h,totalPaymentsMade:y,loadBillPayments:g}=m,_=async()=>{try{s.value=!0,o.value=null;const{data:O,error:ae}=await AM(a.billId);if(ae)o.value=ae.response?.data?.error||ae.message||"Failed to load bill",n("Error loading bill");else{if(l.value=O,O.patientId)try{const j=await oT(O.patientId);j.data&&(c.value=j.data)}catch(j){console.warn("Could not fetch patient details:",j)}await G(),A.value=a.billId,await g()}}catch(O){console.error("Error loading bill:",O),o.value=O.message||"An unexpected error occurred",n("Error loading bill")}finally{s.value=!1}},b=O=>{if(!O)return"";try{let ae;if(typeof O=="number")ae=new Date(O*1e3);else if(typeof O=="string")ae=new Date(O);else return"";if(isNaN(ae.getTime()))return"";const j=String(ae.getDate()).padStart(2,"0"),J=ae.toLocaleDateString("en-IN",{month:"short"}),ie=String(ae.getFullYear()).slice(-2);return`${j} ${J} ${ie}`}catch(ae){return console.error("Error formatting date:",ae,O),""}},S=O=>{if(!O)return"";try{return new Date(O*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return O}},B=O=>O==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(O),F=O=>{if(!O.mrp||!O.unitsPerPack||O.unitsPerPack<=0)return 0;const ae=new tn(O.mrp),j=new tn(O.unitsPerPack),J=new tn(O.gstPercentage||0),ie=new tn(O.discountPercentage||0),X=ae.dividedBy(j),fe=new tn(1).plus(J.dividedBy(100)),M=X.dividedBy(fe),z=new tn(1).minus(ie.dividedBy(100));return M.times(z).toNumber()},T=O=>{if(!O.mrp||!O.unitsPerPack||O.unitsPerPack<=0)return 0;const ae=new tn(F(O)),j=new tn(O.gstPercentage||0),J=new tn(1).plus(j.dividedBy(100));return ae.times(J).toNumber()},E=(O,ae)=>{if(!O.mrp||!O.unitsPerPack||O.unitsPerPack<=0)return 0;const j=new tn(O.mrp),J=new tn(O.unitsPerPack),ie=new tn(O.gstPercentage||0),X=new tn(O.discountPercentage||0),fe=new tn(O.quantityUnits||0),M=j.dividedBy(J),z=new tn(1).plus(ie.dividedBy(100)),se=M.dividedBy(z),be=new tn(1).minus(X.dividedBy(100)),Fe=se.times(be),ye=Fe.times(ie.dividedBy(100));return Fe.plus(ye).times(fe).toNumber()},x=ee(()=>l.value?.items?l.value.items.reduce((ae,j)=>{if(!j.mrp||!j.unitsPerPack||j.unitsPerPack<=0)return ae;const J=new tn(j.mrp),ie=new tn(j.unitsPerPack),X=new tn(j.quantityUnits||0),M=J.dividedBy(ie).times(X);return ae.plus(M)},new tn(0)).toNumber():0),C=ee(()=>l.value?.items?l.value.items.reduce((ae,j)=>{if(!j.mrp||!j.unitsPerPack||j.unitsPerPack<=0)return ae;const J=new tn(j.mrp),ie=new tn(j.unitsPerPack),X=new tn(j.discountPercentage||0),fe=new tn(j.quantityUnits||0),M=J.dividedBy(ie),z=new tn(1).minus(X.dividedBy(100)),se=M.times(z),Fe=M.minus(se).times(fe);return ae.plus(Fe)},new tn(0)).toNumber():0),D=ee(()=>l.value?.items?l.value.items.reduce((ae,j)=>{if(!j.mrp||!j.unitsPerPack||j.unitsPerPack<=0)return ae;const J=new tn(j.mrp),ie=new tn(j.unitsPerPack),X=new tn(j.gstPercentage||0),fe=new tn(j.discountPercentage||0),M=new tn(j.quantityUnits||0),z=J.dividedBy(ie),se=new tn(1).plus(X.dividedBy(100)),be=z.dividedBy(se),Fe=new tn(1).minus(fe.dividedBy(100)),_e=be.times(Fe).times(X.dividedBy(100)).times(M);return ae.plus(_e)},new tn(0)).toNumber():0),U=ee(()=>new tn(D.value).dividedBy(2).toNumber()),L=ee(()=>new tn(D.value).dividedBy(2).toNumber()),H=ee(()=>l.value?.items?l.value.items.reduce((ae,j)=>{const J=j.totalAmount||E(j);return ae.plus(new tn(J))},new tn(0)).toNumber():0),oe=ee(()=>{const O=new tn(H.value),ae=new tn(l.value?.additionalDiscountAmount||0),j=O.minus(ae);return tn.max(new tn(0),j).toNumber()}),de=ee(()=>Math.ceil(oe.value)-oe.value),te=ee(()=>Math.ceil(oe.value)),q=ee(()=>Math.max(0,te.value-y.value)),ce=O=>{if(!O)return!1;try{let ae;if(typeof O=="number")ae=new Date(O*1e3);else if(typeof O=="string")ae=new Date(O);else return!1;if(isNaN(ae.getTime()))return!1;const j=new Date;return j.setHours(0,0,0,0),ae.setHours(0,0,0,0),ae<j}catch(ae){return console.error("Error checking expiry:",ae,O),!1}},le=O=>({Draft:"warning",Finalized:"success",Cancelled:"error",Refund:"info"})[O]||"default",Z=()=>{r("edit-bill")},ne=()=>{r("close")},G=async()=>{try{const O=l.value?.pharmacyId;if(!O){console.warn("No pharmacyId in bill data, using default pharmacy"),d.value={header:"",gstNumber:"",useHeader:!0,pageSize:"A4"};return}const ae=await hM(O);if(ae.error)console.error("Error fetching pharmacy config:",ae.error),d.value={header:"",gstNumber:"",useHeader:!0,pageSize:"A4"};else{const j=ae.data||{};d.value={header:j.header||"",gstNumber:j.gstNumber||"",useHeader:j.useHeader!==void 0?j.useHeader===1||j.useHeader===!0:!0,pageSize:j.pageSize||"A4"}}}catch(O){console.error("Error fetching pharmacy configurations:",O),d.value={header:"",gstNumber:"",useHeader:!0,pageSize:"A4"}}},W=ee(()=>{if(!l.value)return null;const O=l.value.items.map((ae,j)=>({...ae,taxableValuePerUnit:ae.unitPrice||F(ae),finalValuePerUnit:ae.totalAmount&&ae.quantityUnits?ae.totalAmount/ae.quantityUnits:T(ae),itemTotal:ae.totalAmount||E(ae)}));return{pharmacyBill:{identifier:l.value.identifier,billDate:l.value.billDate,status:l.value.status,patientName:l.value.patientName,patientId:l.value.patientId,patientContactNumber:l.value.patientContactNumber,doctorName:l.value.doctorName,consultationDate:l.value.consultationDate,items:O,totalMrp:x.value,totalDiscount:C.value,totalGst:D.value,totalCgst:U.value,totalSgst:L.value,subtotalWithGst:H.value,additionalDiscountAmount:l.value.additionalDiscountAmount||0,netAmount:oe.value,roundOff:de.value,finalAmount:te.value,payments:p.value||[],totalPaymentsMade:y.value,balanceDue:q.value},pharmacyConfigurations:d.value}}),Q=O=>{console.log("Pharmacy bill PDF generated:",O)};return Ge(()=>a.billId,O=>{A.value=O},{immediate:!0}),An(()=>{_()}),(O,ae)=>{const j=I("v-icon"),J=I("v-btn"),ie=I("v-card-title"),X=I("v-col"),fe=I("v-row"),M=I("v-tab"),z=I("v-tabs"),se=I("v-progress-circular"),be=I("v-label"),Fe=I("v-chip"),ye=I("v-card-text"),Qe=I("v-card"),_e=I("v-table"),Se=I("v-divider"),Ee=I("v-container"),Ue=I("v-tabs-window-item"),je=I("v-tabs-window");return P(),he(Qe,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[i(fe,{"no-gutters":""},{default:u(()=>[i(X,{cols:"12"},{default:u(()=>[i(ie,{class:"d-flex align-center justify-space-between"},{default:u(()=>[ae[3]||(ae[3]=v("span",null,"Pharmacy Bill - View",-1)),i(J,{onClick:ne,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(j,{size:"18"},{default:u(()=>[...ae[2]||(ae[2]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(fe,{"no-gutters":""},{default:u(()=>[i(X,{cols:"12"},{default:u(()=>[i(z,{modelValue:f.value,"onUpdate:modelValue":ae[0]||(ae[0]=at=>f.value=at),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[i(M,{value:"view"},{default:u(()=>[i(j,{start:""},{default:u(()=>[...ae[4]||(ae[4]=[N("mdi-eye",-1)])]),_:1}),ae[5]||(ae[5]=N(" View Bill ",-1))]),_:1}),i(M,{value:"share"},{default:u(()=>[i(j,{start:""},{default:u(()=>[...ae[6]||(ae[6]=[N("mdi-share-variant",-1)])]),_:1}),ae[7]||(ae[7]=N(" Share Bill ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(fe,{"no-gutters":""},{default:u(()=>[i(X,{cols:"12",class:"scroll-element"},{default:u(()=>[i(je,{modelValue:f.value,"onUpdate:modelValue":ae[1]||(ae[1]=at=>f.value=at)},{default:u(()=>[i(Ue,{value:"view"},{default:u(()=>[s.value?(P(),he(fe,{key:0,"no-gutters":""},{default:u(()=>[i(X,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",y9e,[i(se,{indeterminate:"",color:"primary",size:"64"}),ae[8]||(ae[8]=v("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):o.value?(P(),he(fe,{key:1,"no-gutters":""},{default:u(()=>[i(X,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",_9e,[i(j,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...ae[9]||(ae[9]=[N("mdi-alert-circle",-1)])]),_:1}),ae[11]||(ae[11]=v("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),v("div",w9e,K(o.value),1),i(J,{color:"primary",onClick:_,"prepend-icon":"mdi-refresh"},{default:u(()=>[...ae[10]||(ae[10]=[N(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):l.value?(P(),he(Ee,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[i(Qe,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[i(ye,{class:"pb-1 pt-2"},{default:u(()=>[i(fe,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(X,{cols:"4"},{default:u(()=>[v("div",b9e,[i(be,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ae[12]||(ae[12]=[N("Patient Information",-1)])]),_:1}),v("div",x9e,K(l.value.patientName||"Unknown Patient"),1),v("div",C9e,"ID: "+K(l.value.patientId||"N/A"),1),l.value.patientContactNumber?(P(),Ae("div",S9e," Phone: "+K(l.value.patientContactNumber),1)):ge("",!0)])]),_:1}),i(X,{cols:"4"},{default:u(()=>[v("div",E9e,[i(be,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ae[13]||(ae[13]=[N("Consultation Details",-1)])]),_:1}),v("div",k9e,"Dr. "+K(l.value.doctorName||"Unknown"),1),v("div",B9e,"Date: "+K(b(l.value.consultationDate)),1)])]),_:1}),i(X,{cols:"4"},{default:u(()=>[v("div",T9e,[i(be,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ae[14]||(ae[14]=[N("Bill Information",-1)])]),_:1}),v("div",I9e,K(l.value.identifier),1),v("div",F9e,"Date: "+K(b(l.value.billDate)),1),i(Fe,{color:le(l.value.status),size:"small",variant:"flat",class:"mt-1"},{default:u(()=>[N(K(l.value.status),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1})]),_:1}),i(Qe,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(ye,{class:"pb-2"},{default:u(()=>[ae[17]||(ae[17]=v("div",{class:"text-subtitle-1 mb-3"},"Bill Items",-1)),i(_e,{density:"compact",class:"mb-3"},{default:u(()=>[ae[16]||(ae[16]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"200px"}},"Item"),v("th",{class:"text-left",style:{width:"100px"}},"HSN Code"),v("th",{class:"text-left",style:{width:"150px"}},"Batch Details"),v("th",{class:"text-left",style:{width:"120px"}},"Packaging Details"),v("th",{class:"text-right",style:{width:"100px"}},"MRP (Pack)"),v("th",{class:"text-right",style:{width:"100px"}},"Discount %"),v("th",{class:"text-right",style:{width:"120px"}},"Taxable Value/Unit"),v("th",{class:"text-right",style:{width:"100px"}},"GST %"),v("th",{class:"text-right",style:{width:"120px"}},"Final Value/Unit"),v("th",{class:"text-right",style:{width:"100px"}},"Qty"),v("th",{class:"text-right",style:{width:"120px"}},"Total ()")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(l.value.items,(at,mt)=>(P(),Ae("tr",{key:mt},[v("td",null,K(mt+1),1),v("td",null,[v("div",P9e,K(at.medicineName),1),at.marketer?(P(),Ae("div",D9e,K(at.marketer),1)):ge("",!0)]),v("td",null,[v("div",U9e,K(at.hsnCode||"N/A"),1)]),v("td",null,[v("div",R9e,K(at.batchNumber||"N/A"),1),v("div",{class:lt(["text-caption text-medium-emphasis",ce(at.expiryDate)?"text-error":""])},[at.expiryDate?(P(),Ae(ze,{key:0},[N(" Exp: "+K(b(at.expiryDate))+" ",1),ce(at.expiryDate)?(P(),he(Fe,{key:0,color:"error",size:"x-small",variant:"tonal",class:"ml-1"},{default:u(()=>[...ae[15]||(ae[15]=[N(" Expired ",-1)])]),_:1})):ge("",!0)],64)):(P(),Ae("span",N9e,"Exp: N/A"))],2)]),v("td",null,[v("div",V9e,K(at.packType||"N/A"),1),v("div",L9e,K(at.unitsPerPack||1)+" units/pack",1)]),v("td",M9e,K(B(at.mrp)),1),v("td",O9e,K(at.discountPercentage)+"%",1),v("td",H9e,K(B(at.unitPrice||F(at))),1),v("td",$9e,K(at.gstPercentage)+"%",1),v("td",Q9e,K(B(at.totalAmount&&at.quantityUnits?at.totalAmount/at.quantityUnits:T(at))),1),v("td",G9e,K(at.quantityUnits),1),v("td",z9e,K(B(at.totalAmount||E(at,mt))),1)]))),128))])]),_:1})]),_:1})]),_:1}),i(Qe,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(ye,{class:"pb-2"},{default:u(()=>[ae[27]||(ae[27]=v("div",{class:"text-subtitle-1 mb-3"},"Bill Summary",-1)),i(Se,{class:"mb-3"}),i(fe,{"no-gutters":""},{default:u(()=>[i(X,{cols:"6"},{default:u(()=>[i(_e,{density:"compact",class:"summary-table"},{default:u(()=>[v("tbody",null,[v("tr",null,[ae[18]||(ae[18]=v("td",{class:"text-left"},"MRP",-1)),v("td",W9e,K(B(x.value)),1)]),C.value>0?(P(),Ae("tr",K9e,[ae[19]||(ae[19]=v("td",{class:"text-left"},"Line item discount",-1)),v("td",j9e,"-"+K(B(C.value)),1)])):ge("",!0),l.value.additionalDiscountAmount>0?(P(),Ae("tr",q9e,[ae[20]||(ae[20]=v("td",{class:"text-left"},"Additional discount",-1)),v("td",Y9e,"-"+K(B(l.value.additionalDiscountAmount)),1)])):ge("",!0),v("tr",null,[ae[21]||(ae[21]=v("td",{class:"text-left"},"Net Amount",-1)),v("td",X9e,K(B(oe.value)),1)]),v("tr",null,[ae[22]||(ae[22]=v("td",{class:"text-left"},"Round off",-1)),v("td",J9e,K(de.value>0?"+":"")+K(B(de.value)),1)]),v("tr",null,[ae[23]||(ae[23]=v("td",{class:"text-left font-weight-bold"},"Final Amount",-1)),v("td",Z9e,K(B(te.value)),1)])])]),_:1})]),_:1}),i(X,{cols:"6"},{default:u(()=>[i(_e,{density:"compact",class:"summary-table"},{default:u(()=>[v("tbody",null,[v("tr",null,[ae[24]||(ae[24]=v("td",{class:"text-left"},"CGST",-1)),v("td",eQe,K(B(U.value)),1)]),v("tr",null,[ae[25]||(ae[25]=v("td",{class:"text-left"},"SGST",-1)),v("td",tQe,K(B(L.value)),1)]),v("tr",null,[ae[26]||(ae[26]=v("td",{class:"text-left font-weight-medium"},"Total GST",-1)),v("td",nQe,K(B(D.value)),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(Qe,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[i(ye,{class:"pb-2"},{default:u(()=>[ae[36]||(ae[36]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),i(fe,{"no-gutters":"",class:"mb-3"},{default:u(()=>[i(X,{cols:"4"},{default:u(()=>[ae[28]||(ae[28]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",aQe,K(B(te.value)),1)]),_:1}),i(X,{cols:"4"},{default:u(()=>[ae[29]||(ae[29]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",rQe,K(B(Oe(y))),1)]),_:1}),i(X,{cols:"4"},{default:u(()=>[ae[30]||(ae[30]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),v("div",{class:lt(["text-h6",q.value>0?"text-error":"text-success"])},K(B(q.value)),3)]),_:1})]),_:1}),Oe(h)?(P(),Ae("div",sQe,[i(se,{indeterminate:"",size:"32",color:"primary"}),ae[31]||(ae[31]=v("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):Oe(p)&&Oe(p).length>0?(P(),Ae(ze,{key:1},[i(Se,{class:"mb-3"}),ae[33]||(ae[33]=v("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),i(_e,{density:"compact"},{default:u(()=>[ae[32]||(ae[32]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Date"),v("th",{class:"text-left"},"Mode"),v("th",{class:"text-right"},"Amount"),v("th",{class:"text-right"},"Created")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(Oe(p),at=>(P(),Ae("tr",{key:at.id},[v("td",oQe,K(b(at.paymentDate)),1),v("td",iQe,K(at.mode),1),v("td",lQe,K(B(at.amount)),1),v("td",uQe,K(S(at.createdAt)),1)]))),128))])]),_:1})],64)):(P(),Ae(ze,{key:2},[i(Se,{class:"mb-3"}),v("div",cQe,[i(j,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...ae[34]||(ae[34]=[N("mdi-currency-inr",-1)])]),_:1}),ae[35]||(ae[35]=v("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))]),_:1})]),_:1}),i(Qe,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[i(ye,{class:"d-flex justify-center pb-2 gap-2"},{default:u(()=>[i(En,{permission:"pharmacy.queue.manage"},{default:u(()=>[l.value.status==="Draft"?(P(),he(J,{key:0,color:"primary",onClick:Z},{default:u(()=>[...ae[37]||(ae[37]=[N(" Edit Bill ",-1)])]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1}),i(Ue,{value:"share",class:"h-100"},{default:u(()=>[i(fe,{"no-gutters":"",class:"h-100"},{default:u(()=>[i(X,{cols:"12"},{default:u(()=>[W.value&&c.value?(P(),he(Sh,{key:0,"content-type":"pharmacy-bill",data:W.value,patient:c.value,onPdfGenerated:Q},null,8,["data","patient"])):(P(),Ae("div",dQe,[v("div",fQe,[i(se,{indeterminate:"",color:"primary",size:"64"}),ae[38]||(ae[38]=v("div",{class:"mt-4 text-subtitle-1"},"Loading bill data...",-1))])]))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},mQe=en(AQe,[["__scopeId","data-v-33ea52ee"]]),vQe={class:"text-medium-emphasis"},hQe={key:0},pQe={__name:"cancel-bill",props:{bill:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=R(!1),l=()=>{a("close")},c=async()=>{try{o.value=!0;const f=await hce(n.bill.id);if(f.error){const d=f.error.response?.data?.error||f.error.message||"Failed to cancel bill";s(d)}else r("Bill cancelled successfully. Inventory has been released."),l()}catch(f){console.error("Error cancelling bill:",f),s("An unexpected error occurred while cancelling the bill")}finally{o.value=!1}};return(f,d)=>{const A=I("v-card-title"),m=I("v-col"),p=I("v-icon"),h=I("v-btn"),y=I("v-row"),g=I("v-card"),_=I("v-card-text"),b=I("v-divider");return P(),he(g,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"11"},{default:u(()=>[i(A,{class:"pa-0 pl-2"},{default:u(()=>[...d[0]||(d[0]=[N("Confirm Bill Cancellation",-1)])]),_:1})]),_:1}),i(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(h,{icon:"",size:"x-small",onClick:l},{default:u(()=>[i(p,null,{default:u(()=>[...d[1]||(d[1]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(g,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(_,{class:"text-left"},{default:u(()=>[d[4]||(d[4]=N(" Are you sure you want to cancel this bill? ",-1)),d[5]||(d[5]=v("span",{class:"text-warning font-weight-bold"}," This will release the reserved/sold inventory back to stock. ",-1)),d[6]||(d[6]=v("br",null,null,-1)),d[7]||(d[7]=v("br",null,null,-1)),v("span",vQe,[d[3]||(d[3]=N(" Bill ID: ",-1)),v("strong",null,K(e.bill?.identifier||"N/A"),1),e.bill?.status?(P(),Ae("span",hQe,[d[2]||(d[2]=N("  Status: ",-1)),v("strong",null,K(e.bill.status),1)])):ge("",!0)])]),_:1})]),_:1})]),_:1}),i(b),i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"2"}),i(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(h,{variant:"outlined",color:"error",onClick:c,loading:o.value,disabled:o.value},{default:u(()=>[...d[8]||(d[8]=[N(" Yes, Cancel Bill ",-1)])]),_:1},8,["loading","disabled"])]),_:1}),i(m,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},gQe={class:"w-100",style:{"white-space":"normal",overflow:"visible","text-overflow":"unset"}},yQe={class:"text-subtitle-2 mb-1",style:{"white-space":"normal","line-height":"1.3",overflow:"visible","text-overflow":"unset"}},_Qe={class:"text-caption",style:{opacity:"0.7"}},wQe={class:"d-flex justify-center"},bQe={__name:"create-draft-bill",emits:["close","draft-bill-created"],setup(e,{emit:t}){const n=Ln(),{showSuccess:a,showError:r}=la(),s=t,o=ee(()=>n.getters["pharmacyModule/currentPharmacyId"]),l=ee(()=>n.getters["doctorModule/allDoctors"]||[]),c=R(null);An(()=>{c.value=n.state.doctorModule.doctorId,l.value.length===0&&n.dispatch("doctorModule/fetchDoctors").then(()=>{!c.value&&l.value.length>0&&(c.value=n.state.doctorModule.doctorId||l.value[0]?.id)})});let f=null,d=null;const A=R(!1),m=R([]),p=R(""),h=R(null),y=R(!1),g=R(!1),_=E=>E?`${E.name||""} (${E.contactNumber||E.contact_number||""})`:"",b=(E,x=0,C=!1)=>{if(x===0)return"First time patient";if(C&&x>1)return E?`Has appointment today  Last visit: ${Ul(E)}`:"Has appointment today";if(C&&x===1)return"First visit today";if(E){const D=Tn(),U=E;if(U<D)return`Last visit: ${Ul(U)}`;if(U>D)return`Next visit: ${Ul(U)}`}return"No previous visits"},S=ee(()=>!p.value||p.value.length<1?"Start typing to search for patients":y.value?`No patients found matching "${p.value}"`:""),B=async E=>{if(!E||E.length<1){m.value=[],y.value=!1;return}d&&d.abort(),d=new AbortController,A.value=!0,y.value=!1;try{const x=await iT(E,{signal:d.signal});d.signal.aborted||(m.value=x.data,(!m.value||m.value.length===0)&&(y.value=!0))}catch(x){x.name!=="AbortError"&&(console.error("Error fetching patients:",x),y.value=!0)}finally{d?.signal.aborted||(A.value=!1)}};Ge(p,E=>{f&&clearTimeout(f),y.value=!1,f=setTimeout(()=>{B(E)},300)});const F=async()=>{if(!h.value||!h.value.id){r("Please select a patient");return}if(!c.value){r("Please select a doctor");return}try{g.value=!0;const E=Tn(),x=await sT(h.value.id,c.value,E);if(x.error){r(x.error.response?.data?.error||"Failed to create consultation");return}if(!x.data||!x.data.consultation_id){r("Failed to get consultation ID");return}const C=x.data.consultation_id;if(!o.value){r("Please select a pharmacy first");return}const D=await mM(C,o.value);if(D.error){r(D.error.response?.data?.error||"Failed to create draft bill");return}a("Draft bill created successfully"),s("draft-bill-created"),T()}catch(E){console.error("Error creating draft bill:",E),r("An unexpected error occurred")}finally{g.value=!1}},T=()=>{s("close")};return ha(()=>{f&&(clearTimeout(f),f=null),d&&(d.abort(),d=null)}),(E,x)=>{const C=I("v-card-title"),D=I("v-col"),U=I("v-icon"),L=I("v-btn"),H=I("v-row"),oe=I("v-card"),de=I("v-list-item"),te=I("v-select"),q=I("v-list"),ce=I("v-card-subtitle"),le=I("v-autocomplete"),Z=I("v-card-text"),ne=I("v-divider"),G=I("v-empty-state");return P(),he(oe,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[i(H,{"no-gutters":""},{default:u(()=>[i(D,{cols:"12"},{default:u(()=>[i(oe,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(H,{"no-gutters":""},{default:u(()=>[i(D,{cols:"11"},{default:u(()=>[i(C,{class:"pa-0 pl-2"},{default:u(()=>[...x[3]||(x[3]=[N("Create Draft Bill",-1)])]),_:1})]),_:1}),i(D,{cols:"1"},{default:u(()=>[i(L,{icon:"",size:"x-small",onClick:T,tabindex:"-1"},{default:u(()=>[i(U,null,{default:u(()=>[...x[4]||(x[4]=[v("img",{src:su,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(H,{"no-gutters":""},{default:u(()=>[i(D,{cols:"12"},{default:u(()=>[i(oe,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[i(te,{modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=W=>c.value=W),items:l.value,"item-title":"doctorName","item-value":"id",density:"compact",variant:"outlined",placeholder:"Select Doctor",style:{width:"90%","max-width":"700px"},"prepend-inner-icon":"mdi-doctor","hide-details":"auto","menu-props":{maxHeight:"400px"}},{item:u(({props:W,item:Q})=>[i(de,fl(Al(W)),{title:u(()=>[N(K(Q.raw.doctorName),1)]),subtitle:u(()=>[N(K(Q.raw.doctorSpecialization),1)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),i(H,{"no-gutters":""},{default:u(()=>[i(D,{cols:"12"},{default:u(()=>[i(oe,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[i(le,{ref:"searchRef",density:"compact",placeholder:"Search by name or phone",style:{width:"90%","max-width":"700px"},theme:"light",variant:"solo",rounded:"l",items:m.value,search:p.value,"onUpdate:search":x[1]||(x[1]=W=>p.value=W),loading:A.value,"item-title":_,"item-value":"id","return-object":"",modelValue:h.value,"onUpdate:modelValue":x[2]||(x[2]=W=>h.value=W),chips:"",clearable:"","prepend-inner-icon":"mdi-magnify","no-data-text":S.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1}},{item:u(({props:W,item:Q,index:O})=>[i(q,{density:"compact",class:"pa-0 py-1"},{default:u(()=>[i(de,Ie(W,{class:"py-0 my-0",style:{"min-height":"60px"}}),{default:u(()=>[v("div",gQe,[v("div",yQe," ID: "+K(Q.raw.id)+"  "+K(Q.raw.gender)+", "+K(Q.raw.age)+" yrs  Added On: "+K(Oe(Ul)(Q.raw.createdAt))+K(Q.raw.importID?`  Import ID: ${Q.raw.importID}`:""),1),v("div",_Qe,K(b(Q.raw.lastAppointmentDate,Q.raw.totalAppointments,Q.raw.hasAppointmentToday)),1)])]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[i(q,{density:"compact"},{default:u(()=>[i(de,null,{default:u(()=>[i(ce,null,{default:u(()=>[N(K(S.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["items","search","loading","modelValue","no-data-text"])]),_:1})]),_:1})]),_:1}),i(H,{"no-gutters":""},{default:u(()=>[i(D,{cols:"12",class:"scroll-element"},{default:u(()=>[i(oe,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[h.value&&h.value.id?(P(),Ae(ze,{key:0},[i(oe,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[i(Z,{class:"ma-0 pa-0 pl-4 mb-1"},{default:u(()=>[i(H,{"no-gutters":""},{default:u(()=>[i(D,{cols:"6"},{default:u(()=>[N(K(`Name: ${h.value.name}`),1)]),_:1}),i(D,{cols:"6"},{default:u(()=>[N(K(`Gender: ${h.value.gender}`),1)]),_:1})]),_:1}),i(H,{"no-gutters":""},{default:u(()=>[i(D,{cols:"6"},{default:u(()=>[N(K(`Contact: ${h.value.contactNumber||h.value.contact_number}`),1)]),_:1}),i(D,{cols:"6"},{default:u(()=>[N(K(h.value.age!==null?`Age: ${h.value.age} yrs`:""),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(oe,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[i(H,{"no-gutters":""},{default:u(()=>[i(D,{cols:"12"},{default:u(()=>[i(ne,{class:"mb-2"}),v("div",wQe,[i(L,{variant:"outlined",onClick:F,disabled:!h.value||g.value,loading:g.value},{default:u(()=>[...x[5]||(x[5]=[N(" Create Draft Bill ",-1)])]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1})],64)):(P(),he(G,{key:1,image:Oe(jM)},{title:u(()=>[...x[6]||(x[6]=[v("div",{class:"text-subtitle-2 mt-8"}," Search for a patient above to create a draft bill ",-1)])]),text:u(()=>[...x[7]||(x[7]=[v("div",{class:"text-caption"},null,-1)])]),_:1},8,["image"]))]),_:1})]),_:1})]),_:1})]),_:1})}}},xQe=en(bQe,[["__scopeId","data-v-8cb4282a"]]),CQe={class:"scrollable-content"},SQe={class:"scrollable-content"},EQe={class:"text-center"},kQe={class:"text-center"},BQe={class:"text-body-2 text-medium-emphasis mb-4"},TQe={class:"text-center"},IQe={class:"text-subtitle-2 mt-8 text-center"},FQe={key:0},PQe={key:1},DQe={class:"text-caption text-center"},UQe={key:0},RQe={key:1},NQe={class:"text-body-2 text-medium-emphasis"},VQe={class:"font-weight-bold",style:{color:"black","word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},LQe={key:0,class:"text-medium-emphasis"},MQe={key:0,class:"text-body-2 text-medium-emphasis mb-1"},OQe={class:"font-weight-bold",style:{color:"black"}},HQe={key:1,class:"text-body-2 text-medium-emphasis mb-1"},$Qe={key:2,class:"text-body-2 font-weight-medium mt-2"},QQe={__name:"pharmacy-queue",setup(e){const t=Ln(),{showError:n}=la(),a=ee(()=>t.getters["pharmacyModule/currentPharmacyId"]),r=R(0),s=R([]),o=R(""),l=R(""),c=R(null),f=R(null),d=R(!1),A=R(null),m=R(!1),p=R(!1),h=R(!1),y=R(null),g=R("edit"),_=R(!1),b=R(null),S=R(!1);ee(()=>Tn());const B=ee(()=>{if(!s.value||s.value.length===0)return[];const ae=o.value?.trim();if(!ae)return s.value;if(/^\d+$/.test(ae))return s.value.filter(J=>J?.patientContactNumber?.includes(ae)??!1);{const J=ae.toLowerCase();return s.value.filter(ie=>ie?.patientName?.toLowerCase().includes(J)??!1)}}),F=ae=>({Draft:"rgb(var(--v-theme-warning))",Finalized:"rgb(var(--v-theme-success))",Cancelled:"rgb(var(--v-theme-error))",Refund:"rgb(var(--v-theme-info))",Series:"rgb(var(--v-theme-secondary))"})[ae]||"rgb(var(--v-theme-on-surface))",T=ae=>{if(!ae)return"";try{const j=new Date(ae*1e3),J=To(j,"d MMM"),ie=To(j,"EEE");return`${J}, ${ie}`}catch(j){return console.error("Error formatting created day:",j),""}},E=ae=>{if(!ae)return"";try{const j=new Date(ae*1e3),J=j.getHours(),ie=j.getMinutes(),X=J%12||12,fe=J>=12?"PM":"AM";return`${X}.${ie.toString().padStart(2,"0")}${fe}`}catch(j){return console.error("Error formatting created time:",j),""}},x=ae=>ae==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(ae),C=async()=>{if(!d.value){if(!a.value){n("Please select a pharmacy first");return}try{d.value=!0,A.value=null;const{data:ae,error:j}=await Ace(l.value||null,c.value||null,a.value);j?(A.value=j.response?.data?.error||j.message||"Failed to fetch pharmacy bills",s.value=[],n("Error fetching pharmacy bills")):(s.value=ae||[],m.value=!0)}catch(ae){console.error("Error in fetchBills:",ae),A.value=ae.message||"An unexpected error occurred",s.value=[],n("Error fetching pharmacy bills")}finally{d.value=!1}}},D=ae=>{l.value=ae.billDate||"",c.value=ae.status||null},U=()=>{C()},L=()=>{l.value="",c.value=null,o.value="",s.value=[],m.value=!1,A.value=null},H=()=>{C()},oe=ae=>{y.value=ae,p.value=!0},de=ae=>{y.value=ae,g.value="edit",h.value=!0},te=ae=>{y.value=ae,g.value="return",h.value=!0},q=ae=>{ae?.status!=="Cancelled"&&(b.value=ae,_.value=!0)},ce=()=>{_.value=!1,b.value=null,C()},le=()=>{h.value=!1,y.value=null,g.value="edit"},Z=()=>{p.value=!1,y.value=null},ne=()=>{p.value=!1,h.value=!0},G=async ae=>{h.value=!1,g.value="edit",await Cn(),ae?(y.value=ae,p.value=!0):y.value=null,C()},W=()=>{S.value=!0},Q=()=>{S.value=!1},O=()=>{C()};return Ge(a,(ae,j)=>{ae&&ae!==j&&m.value&&C()}),An(()=>{l.value=Tn(),C()}),OA(()=>{a.value&&m.value&&C()}),(ae,j)=>{const J=I("v-alert"),ie=I("v-tab"),X=I("v-tabs"),fe=I("v-card"),M=I("v-col"),z=I("v-row"),se=I("v-progress-circular"),be=I("v-icon"),Fe=I("v-btn"),ye=I("v-text-field"),Qe=I("v-tooltip"),_e=I("v-card-text"),Se=I("v-empty-state"),Ee=I("v-card-title"),Ue=I("v-divider"),je=I("v-lazy"),at=I("v-window-item"),mt=I("v-window"),xe=I("v-main"),Be=I("v-dialog");return P(),Ae(ze,null,[i(xe,null,{default:u(()=>[f.value?(P(),he(J,{key:0,type:"error",dismissible:"","onClick:close":j[0]||(j[0]=Ye=>f.value=null),class:"ma-3"},{default:u(()=>[N(K(f.value),1)]),_:1})):ge("",!0),i(z,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[i(M,{cols:"12"},{default:u(()=>[i(fe,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[i(X,{modelValue:r.value,"onUpdate:modelValue":j[1]||(j[1]=Ye=>r.value=Ye),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[i(ie,{value:0},{default:u(()=>[...j[9]||(j[9]=[N("Queue",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(mt,{modelValue:r.value,"onUpdate:modelValue":j[4]||(j[4]=Ye=>r.value=Ye),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[i(at,{value:0,style:{height:"100%"}},{default:u(()=>[i(z,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[i(M,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",CQe,[i(hHe,{"bill-date":l.value,status:c.value,onFilterChange:D,onSearch:U,onClear:L},null,8,["bill-date","status"])])]),_:1}),i(M,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",SQe,[i(fe,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[d.value?(P(),he(z,{key:0,"no-gutters":""},{default:u(()=>[i(M,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",EQe,[i(se,{indeterminate:"",color:"primary",size:"64"}),j[10]||(j[10]=v("div",{class:"mt-4 text-subtitle-1"},"Loading pharmacy bills...",-1))])]),_:1})]),_:1})):A.value?(P(),he(z,{key:1,"no-gutters":""},{default:u(()=>[i(M,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",kQe,[i(be,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...j[11]||(j[11]=[N("mdi-alert-circle",-1)])]),_:1}),j[13]||(j[13]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",BQe,K(A.value),1),i(Fe,{color:"primary",onClick:H,"prepend-icon":"mdi-refresh"},{default:u(()=>[...j[12]||(j[12]=[N(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):m.value?(P(),Ae(ze,{key:3},[i(fe,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(_e,{class:"pt-2 pb-0 d-flex align-center"},{default:u(()=>[i(M,{cols:"4",class:"pa-0"},{default:u(()=>[i(ye,{modelValue:o.value,"onUpdate:modelValue":j[2]||(j[2]=Ye=>o.value=Ye),density:"compact",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-account-search",placeholder:"Search by name or number",class:"patient-search-input"},null,8,["modelValue"])]),_:1}),i(M,{cols:"4",class:"pa-0 text-center"},{default:u(()=>[v("strong",null,K(B.value.length),1),N(" result"+K(B.value.length!==1?"s":"")+" found ",1)]),_:1}),i(M,{cols:"4",class:"pa-0 text-right d-flex justify-end align-center"},{default:u(()=>[i(Qe,{text:"Refresh"},{activator:u(({props:Ye})=>[i(Fe,Ie(Ye,{color:"primary",variant:"outlined",rounded:"x-small",size:"small",class:"mr-2",onClick:C,disabled:d.value,loading:d.value}),{default:u(()=>[i(be,{size:"small"},{default:u(()=>[...j[17]||(j[17]=[N("mdi-refresh",-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),i(En,{permission:"pharmacy.queue.manage"},{default:u(()=>[i(Fe,{color:"primary",variant:"outlined",onClick:W,"prepend-icon":"mdi-plus",size:"small"},{default:u(()=>[...j[18]||(j[18]=[N(" Create Draft Bill ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),B.value&&B.value.length===0?(P(),he(Se,{key:0,image:Oe(Jv),class:"d-flex justify-center"},{title:u(()=>[v("div",IQe,[o.value?(P(),Ae("span",FQe,"No bills match your search")):(P(),Ae("span",PQe,"No Pharmacy Bills Found"))])]),text:u(()=>[v("div",DQe,[o.value?(P(),Ae("span",UQe,"Try a different search term or clear the filter")):(P(),Ae("span",RQe,"Try adjusting your search criteria or clear filters to see all bills"))])]),actions:u(()=>[o.value?(P(),he(Fe,{key:0,color:"primary",variant:"outlined",onClick:j[3]||(j[3]=Ye=>o.value=""),"prepend-icon":"mdi-close",class:"mr-2"},{default:u(()=>[...j[19]||(j[19]=[N(" Clear Search ",-1)])]),_:1})):ge("",!0),i(Fe,{color:"primary",variant:"outlined",onClick:L,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...j[20]||(j[20]=[N(" Clear All Filters ",-1)])]),_:1})]),_:1},8,["image"])):B.value&&B.value.length>0?(P(),he(z,{key:1,"no-gutters":""},{default:u(()=>[i(M,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(P(!0),Ae(ze,null,Jt(B.value,Ye=>(P(),he(je,{key:Ye?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[Ye?(P(),he(fe,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg"},{default:u(()=>[i(z,{"no-gutters":""},{default:u(()=>[i(M,{cols:"8"},{default:u(()=>[i(Ee,{class:"pb-0 pt-2"},{default:u(()=>[v("div",NQe,[Ye?.patientName||Ye?.patientContactNumber?(P(),Ae(ze,{key:0},[v("span",VQe,K(Ye.patientName||""),1),Ye?.patientContactNumber?(P(),Ae("span",LQe,K(Ye.patientName?" ":"")+"("+K(Ye.patientContactNumber)+")",1)):ge("",!0)],64)):ge("",!0),(Ye?.patientName||Ye?.patientContactNumber)&&Ye?.createdAt?(P(),Ae(ze,{key:1},[N("  ")],64)):ge("",!0),Ye?.createdAt?(P(),Ae(ze,{key:2},[N(K(T(Ye.createdAt))+"  "+K(E(Ye.createdAt)),1)],64)):ge("",!0)])]),_:2},1024),i(_e,{class:"pb-1 pt-1"},{default:u(()=>[Ye?.identifier||Ye?.status?(P(),Ae("div",MQe,[v("span",OQe,"Bill ID: "+K(Ye?.status==="Cancelled"||Ye?.status==="Draft"?"":Ye?.identifier||""),1),Ye?.status?(P(),Ae(ze,{key:0},[N("  ")],64)):ge("",!0),Ye?.status?(P(),Ae("span",{key:1,class:"font-weight-medium",style:Mt({color:F(Ye.status)})},K(Ye.status),5)):ge("",!0)])):ge("",!0),Ye?.doctorName?(P(),Ae("div",HQe,[i(be,{size:"small",class:"mr-1"},{default:u(()=>[...j[21]||(j[21]=[N("mdi-doctor",-1)])]),_:1}),N(" Dr. "+K(Ye.doctorName),1)])):ge("",!0),Ye?.netAmount!==void 0?(P(),Ae("div",$Qe,[i(be,{size:"small",class:"mr-1"},{default:u(()=>[...j[22]||(j[22]=[N("mdi-currency-inr",-1)])]),_:1}),N(" Net Amount: "+K(x(Ye.netAmount)),1)])):ge("",!0)]),_:2},1024)]),_:2},1024),i(M,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[i(z,{"no-gutters":""},{default:u(()=>[i(M,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[i(En,{permission:"pharmacy.queue.manage"},{default:u(()=>[i(Qe,{text:"View Bill"},{activator:u(({props:kt})=>[i(Fe,Ie({variant:"plain",color:"primary",size:"small"},{ref_for:!0},kt,{onClick:gn(xt=>oe(Ye.id),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[i(be,{size:"18"},{default:u(()=>[...j[23]||(j[23]=[N("mdi-eye",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),i(Ue,{class:"mx-4"}),i(M,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[i(En,{permission:"pharmacy.queue.manage"},{default:u(()=>[i(Qe,{text:Ye?.status==="Finalized"?"Cannot edit finalized bills":Ye?.status==="Cancelled"?"Cannot edit cancelled bills":"Edit Bill"},{activator:u(({props:kt})=>[i(Fe,Ie({variant:"plain",color:"secondary",size:"small"},{ref_for:!0},kt,{disabled:Ye?.status==="Finalized"||Ye?.status==="Cancelled",onClick:gn(xt=>de(Ye.id),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[i(be,{size:"18"},{default:u(()=>[...j[24]||(j[24]=[N("mdi-pencil",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),i(M,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[i(z,{"no-gutters":""},{default:u(()=>[i(M,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[i(Qe,{text:Ye?.status==="Finalized"?"Return Bill":"Return only available for finalized bills"},{activator:u(({props:kt})=>[i(Fe,Ie({variant:"plain",size:"small"},{ref_for:!0},kt,{disabled:Ye?.status!=="Finalized",onClick:gn(xt=>te(Ye.id),["stop"]),class:"btn-hover-base mb-2",style:{color:"orange"}}),{default:u(()=>[i(be,{size:"18",color:"orange"},{default:u(()=>[...j[25]||(j[25]=[N("mdi-arrow-u-left-top",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024),i(Ue,{class:"mx-4"}),i(M,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[i(En,{permission:"pharmacy.queue.manage"},{default:u(()=>[i(Qe,{text:Ye?.status==="Cancelled"?"Bill is already cancelled":"Cancel Bill"},{activator:u(({props:kt})=>[i(Fe,Ie({variant:"plain",color:"error",size:"small"},{ref_for:!0},kt,{disabled:Ye?.status==="Cancelled",onClick:gn(xt=>q(Ye),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[i(be,{size:"18"},{default:u(()=>[...j[26]||(j[26]=[N("mdi-close-circle",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):ge("",!0)]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0)],64)):(P(),he(z,{key:2,"no-gutters":""},{default:u(()=>[i(M,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",TQe,[i(be,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...j[14]||(j[14]=[N("mdi-pill",-1)])]),_:1}),j[15]||(j[15]=v("div",{class:"text-h6 mb-2"},"Search for Pharmacy Bills",-1)),j[16]||(j[16]=v("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find pharmacy bills",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(Be,{modelValue:h.value,"onUpdate:modelValue":j[5]||(j[5]=Ye=>h.value=Ye),persistent:"","max-width":"85%"},{default:u(()=>[y.value?(P(),he(g9e,{key:0,"bill-id":y.value,mode:g.value,onClose:le,onBillUpdated:G},null,8,["bill-id","mode"])):ge("",!0)]),_:1},8,["modelValue"]),i(Be,{modelValue:p.value,"onUpdate:modelValue":j[6]||(j[6]=Ye=>p.value=Ye),persistent:"","max-width":"70%"},{default:u(()=>[y.value?(P(),he(mQe,{key:0,"bill-id":y.value,onClose:Z,onEditBill:ne},null,8,["bill-id"])):ge("",!0)]),_:1},8,["modelValue"]),i(Be,{modelValue:_.value,"onUpdate:modelValue":j[7]||(j[7]=Ye=>_.value=Ye),persistent:"","max-width":"30%"},{default:u(()=>[b.value?(P(),he(pQe,{key:0,bill:b.value,onClose:ce},null,8,["bill"])):ge("",!0)]),_:1},8,["modelValue"]),i(Be,{modelValue:S.value,"onUpdate:modelValue":j[8]||(j[8]=Ye=>S.value=Ye),persistent:"","max-width":"50%"},{default:u(()=>[i(xQe,{onClose:Q,onDraftBillCreated:O})]),_:1},8,["modelValue"])],64)}}},GQe=en(QQe,[["__scopeId","data-v-9d03673c"]]),zQe={class:"mb-4"},WQe={class:"d-flex align-center justify-space-between"},KQe={class:"flex-grow-1"},jQe={class:"text-subtitle-1 font-weight-medium"},qQe={key:0,class:"text-caption text-medium-emphasis mt-1"},YQe={key:1,class:"text-caption text-medium-emphasis"},XQe={key:2,class:"text-caption text-warning mt-1"},JQe={__name:"pharmacy-medicine-form",emits:["close","medicine-added"],setup(e,{emit:t}){const{showSuccess:n,showInfo:a}=la(),r=t,s=R(null),o=R(!1),l=R(null),c=R(null),f=R(!1),d=async y=>{if(!y||y.length===0)return;const g=y[0];s.value=g,l.value=null,c.value=null,g.isPharmacy?c.value="This medicine is already marked as pharmacy medicine.":g.isLocal||(c.value="This is an external medicine. It will be created in your database and then marked as pharmacy medicine.")},A=()=>{f.value=!0},m=async y=>{f.value=!1,y&&y.id&&(s.value={...y,isLocal:!0,isPharmacy:!1},await p())},p=async()=>{if(!s.value){l.value="Please select a medicine first";return}if(s.value.isPharmacy){a("This medicine is already in pharmacy");return}try{o.value=!0,l.value=null;let y=s.value.id;if(!s.value.isLocal){const b=await IH({productName:s.value.productName,marketer:s.value.marketer||"",saltComposition:s.value.saltComposition||"",productForm:s.value.productForm||"",productId:s.value.productId||"",primaryUse:s.value.primaryUse||"",source:"A",isCreatedByUser:!1});if(b.error){l.value=b.error.response?.data?.error||"Failed to create medicine";return}if(!b.data||!b.data.id){l.value="Medicine was created but ID was not returned";return}y=b.data.id}const{data:g,error:_}=await Lce(y);if(_){l.value=_.response?.data?.error||"Failed to add medicine to pharmacy";return}n("Medicine added to pharmacy successfully"),r("medicine-added",g),h()}catch(y){console.error("Error adding medicine to pharmacy:",y),l.value="An unexpected error occurred"}finally{o.value=!1}},h=()=>{s.value=null,l.value=null,c.value=null,r("close")};return(y,g)=>{const _=I("v-icon"),b=I("v-btn"),S=I("v-card-title"),B=I("v-divider"),F=I("v-alert"),T=I("v-chip"),E=I("v-card"),x=I("v-card-text"),C=I("v-spacer"),D=I("v-card-actions"),U=I("v-dialog");return P(),Ae(ze,null,[i(E,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[i(S,{class:"d-flex align-center justify-space-between"},{default:u(()=>[g[4]||(g[4]=v("span",null,"Add Medicine to Pharmacy",-1)),i(b,{onClick:h,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(_,{size:"18"},{default:u(()=>[...g[3]||(g[3]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(B),i(x,{class:"pt-4"},{default:u(()=>[l.value?(P(),he(F,{key:0,type:"error",variant:"tonal",class:"mb-4",dismissible:"","onClick:close":g[0]||(g[0]=L=>l.value=null)},{default:u(()=>[N(K(l.value),1)]),_:1})):ge("",!0),c.value?(P(),he(F,{key:1,type:"info",variant:"tonal",class:"mb-4"},{default:u(()=>[N(K(c.value),1)]),_:1})):ge("",!0),v("div",zQe,[g[5]||(g[5]=v("div",{class:"text-subtitle-2 mb-2"},"Search and select a medicine to add to pharmacy inventory:",-1)),i(PH,{onSearchedMedicines:d,onAddMedicine:A})]),s.value?(P(),he(E,{key:2,variant:"outlined",class:"pa-3 mb-4",color:s.value.isPharmacy?"success":"primary"},{default:u(()=>[v("div",WQe,[v("div",KQe,[v("div",jQe,[N(K(s.value.productName)+" ",1),s.value.isPharmacy?(P(),he(T,{key:0,size:"x-small",color:"success",variant:"flat",class:"ml-2"},{default:u(()=>[...g[6]||(g[6]=[N(" Already in Pharmacy ",-1)])]),_:1})):ge("",!0)]),s.value.saltComposition?(P(),Ae("div",qQe,K(s.value.saltComposition),1)):ge("",!0),s.value.marketer?(P(),Ae("div",YQe,K(s.value.marketer),1)):ge("",!0),s.value.isLocal?ge("",!0):(P(),Ae("div",XQe,[i(_,{size:"small"},{default:u(()=>[...g[7]||(g[7]=[N("mdi-information",-1)])]),_:1}),g[8]||(g[8]=N(" This medicine will be created in your database first ",-1))]))])])]),_:1},8,["color"])):ge("",!0)]),_:1}),i(B),i(D,{class:"pa-4"},{default:u(()=>[i(C),i(b,{onClick:h},{default:u(()=>[...g[9]||(g[9]=[N(" Cancel ",-1)])]),_:1}),i(b,{color:"primary",variant:"outlined",onClick:p,disabled:!s.value||o.value||s.value&&s.value.isPharmacy,loading:o.value},{default:u(()=>[N(K(s.value?.isPharmacy?"Already Added":"Add to Pharmacy"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),i(U,{modelValue:f.value,"onUpdate:modelValue":g[2]||(g[2]=L=>f.value=L),persistent:"","max-width":"600px"},{default:u(()=>[i(BT,{onClose:g[1]||(g[1]=L=>f.value=!1),"onUpdate:medicinelist":m})]),_:1},8,["modelValue"])],64)}}},ZQe=en(JQe,[["__scopeId","data-v-4e957024"]]),e7e={key:0,class:"text-caption text-medium-emphasis"},t7e={key:1},n7e={class:"text-caption font-weight-medium"},a7e={key:0,class:"text-caption text-medium-emphasis"},r7e={key:2,class:"text-caption text-error"},s7e={class:"text-caption text-medium-emphasis"},o7e={class:"font-weight-medium"},i7e={class:"text-caption text-medium-emphasis"},l7e={key:0,class:"mb-0.5"},u7e={key:1,class:"mb-0.5"},c7e={key:2},d7e={__name:"pharmacy-batch-inward-form",props:{medicineId:{type:Number,default:null},medicineInfo:{type:Object,default:null},purchaseInvoiceId:{type:Number,default:null}},emits:["close","batch-created"],setup(e,{emit:t}){const n=Ln(),{showSuccess:a,showError:r}=la(),s=ee(()=>n.getters["pharmacyModule/currentPharmacyId"]),o=e,l=t,c=R(null),f=R(!1),d=R(!1),A=R(!1),m=R(!1),p=R(null),h=R([]),y=R(""),g=R({medicineId:o.medicineId||null,batchNumber:"",expiryDate:"",packType:"",unitsPerPack:1,mrp:null,discountPercentage:0,saleQuantityPacks:0,freeQuantityPacks:0,cgstPercentage:0,sgstPercentage:0,inwardBillId:"",purchaseInvoiceId:o.purchaseInvoiceId||null,location:""}),_=R("0.00"),b=ee(()=>Number(_.value??0)||0),S=()=>{_.value=(Number(_.value??0)||0).toFixed(2)},B=ee(()=>{const W=Number(g.value.cgstPercentage??0)||0,Q=Number(g.value.sgstPercentage??0)||0;return W+Q}),F=ee(()=>{const W=b.value||0,Q=Number(B.value??0)||0;return W*(1+Q/100)}),T=ee(()=>(Number(F.value??0)||0).toFixed(2)),E=ee(()=>{const W=g.value.saleQuantityPacks||0,Q=g.value.freeQuantityPacks||0;return W+Q}),x=ee(()=>E.value*(g.value.unitsPerPack||1)),C=ee(()=>{const W=g.value.saleQuantityPacks||0,Q=g.value.freeQuantityPacks||0,O=b.value||0,ae=W+Q;return ae===0?null:O*W/ae}),D=ee(()=>{const W=g.value.saleQuantityPacks||0,Q=g.value.freeQuantityPacks||0,O=F.value||0,ae=W+Q;return ae===0?null:O*W/ae}),U=ee(()=>{const W=g.value.cgstPercentage||0,Q=g.value.sgstPercentage||0;return W+Q}),L=[W=>!!W||"Expiry date is required"],H=[W=>W!=null&&!isNaN(W)&&W>=0||"Sale quantity must be non-negative",W=>{const Q=W!=null&&!isNaN(W)?W:0,O=g.value.freeQuantityPacks!==null&&g.value.freeQuantityPacks!==void 0&&!isNaN(g.value.freeQuantityPacks)?g.value.freeQuantityPacks:0;return Q>0||O>0||"At least one of sale quantity or free quantity must be greater than 0"}],oe=[W=>W!=null&&!isNaN(W)&&W>=0||"Free quantity must be non-negative",W=>{const Q=g.value.saleQuantityPacks!==null&&g.value.saleQuantityPacks!==void 0&&!isNaN(g.value.saleQuantityPacks)?g.value.saleQuantityPacks:0,O=W!=null&&!isNaN(W)?W:0;return Q>0||O>0||"At least one of sale quantity or free quantity must be greater than 0"}],de=[W=>{if(!W||W.trim()==="")return"Price to retailer (excl. GST) is required";const Q=Number(W);return isNaN(Q)?"Price to retailer (excl. GST) must be a valid number":Q<0?"Price to retailer (excl. GST) must be non-negative":!0}],te=()=>{c.value&&c.value.validate()},q=()=>{c.value&&c.value.validate()},ce=async()=>{if(o.purchaseInvoiceId)try{const{data:W}=await Pg(o.purchaseInvoiceId);W&&(y.value=`${W.pharmacyPurchaseInvoiceIdentifier} (${le(W.pharmacyPurchaseInvoiceDate)})`)}catch(W){console.error("Error loading invoice info:",W)}else{m.value=!0;try{const{data:W}=await Rce(s.value);h.value=W||[]}catch(W){console.error("Error loading purchase invoices:",W)}finally{m.value=!1}}},le=W=>W?new Date(W*1e3).toLocaleDateString():"-",Z=async()=>{if(!o.medicineId){p.value=null;return}if(o.medicineInfo){p.value={id:o.medicineInfo.id,productName:o.medicineInfo.productName,marketer:o.medicineInfo.marketer},g.value.medicineId=o.medicineInfo.id;return}try{A.value=!0;const{data:W,error:Q}=await Bw();if(!Q&&W){const O=W.find(ae=>ae.id===o.medicineId);O?(p.value={id:O.id,productName:O.productName,marketer:O.marketer},g.value.medicineId=O.id):(r("Medicine not found"),p.value=null)}else r("Failed to load medicine details"),p.value=null}catch(W){console.error("Error loading medicine details:",W),r("Error loading medicine details"),p.value=null}finally{A.value=!1}},ne=async()=>{if(!f.value){c.value?.validate();return}try{d.value=!0;const W=g.value.saleQuantityPacks||0,Q=g.value.freeQuantityPacks||0;if(W===0&&Q===0){r("At least one of sale quantity or free quantity must be greater than 0"),d.value=!1;return}const O=D.value;if(O!==null&&g.value.mrp<O){r("MRP must be greater than or equal to calculated cost"),d.value=!1;return}if(!s.value){r("Please select a pharmacy first");return}const ae={medicineId:g.value.medicineId,pharmacyId:s.value,batchNumber:g.value.batchNumber,expiryDate:g.value.expiryDate,packType:g.value.packType,unitsPerPack:parseInt(g.value.unitsPerPack||1),mrp:parseFloat(g.value.mrp),discountPercentage:parseFloat(g.value.discountPercentage||0),saleQuantityPacks:parseFloat(g.value.saleQuantityPacks||0),freeQuantityPacks:parseFloat(g.value.freeQuantityPacks||0),priceToRetailer:parseFloat(F.value||0),cgstPercentage:parseFloat(g.value.cgstPercentage||0),sgstPercentage:parseFloat(g.value.sgstPercentage||0),inwardBillId:g.value.inwardBillId||"",purchaseInvoiceId:g.value.purchaseInvoiceId||o.purchaseInvoiceId||null,location:g.value.location||""},{data:j,error:J}=await vM(ae);J?r(J.response?.data?.error||"Failed to create batch inward"):(a("Batch inward created successfully"),l("batch-created"),G())}catch(W){console.error("Error saving batch inward:",W),r("An unexpected error occurred")}finally{d.value=!1}},G=()=>{l("close")};return Ge(()=>o.purchaseInvoiceId,W=>{W&&(g.value.purchaseInvoiceId=W,ce())},{immediate:!0}),An(()=>{S(),o.medicineId?Z():r("Medicine ID is required"),ce()}),(W,Q)=>{const O=I("v-icon"),ae=I("v-btn"),j=I("v-card-title"),J=I("v-divider"),ie=I("v-col"),X=I("v-text-field"),fe=I("v-select"),M=I("v-autocomplete"),z=I("v-row"),se=I("v-form"),be=I("v-card-text"),Fe=I("v-spacer"),ye=I("v-card-actions"),Qe=I("v-card");return P(),he(Qe,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[i(j,{class:"d-flex align-center justify-space-between"},{default:u(()=>[Q[16]||(Q[16]=v("span",null,"Add purchased inventory",-1)),i(ae,{onClick:G,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(O,{size:"18"},{default:u(()=>[...Q[15]||(Q[15]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(J),i(be,{class:"py-1"},{default:u(()=>[i(se,{ref_key:"form",ref:c,modelValue:f.value,"onUpdate:modelValue":Q[14]||(Q[14]=_e=>f.value=_e)},{default:u(()=>[i(z,{dense:""},{default:u(()=>[i(ie,{cols:"12",class:"pb-1"},{default:u(()=>[A.value?(P(),Ae("div",e7e," Loading... ")):p.value?(P(),Ae("div",t7e,[v("div",n7e,K(p.value.productName||"Unknown Medicine"),1),p.value.marketer?(P(),Ae("div",a7e,K(p.value.marketer),1)):ge("",!0)])):(P(),Ae("div",r7e," Medicine not found "))]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:g.value.batchNumber,"onUpdate:modelValue":Q[0]||(Q[0]=_e=>g.value.batchNumber=_e),label:"Batch Number *",variant:"outlined",density:"compact",rules:[_e=>!!_e||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:g.value.expiryDate,"onUpdate:modelValue":Q[1]||(Q[1]=_e=>g.value.expiryDate=_e),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:L,"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(fe,{modelValue:g.value.packType,"onUpdate:modelValue":Q[2]||(Q[2]=_e=>g.value.packType=_e),items:Oe(Gw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[_e=>!!_e||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:g.value.unitsPerPack,"onUpdate:modelValue":Q[3]||(Q[3]=_e=>g.value.unitsPerPack=_e),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&!isNaN(_e)&&_e>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:g.value.mrp,"onUpdate:modelValue":Q[4]||(Q[4]=_e=>g.value.mrp=_e),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&!isNaN(_e)&&_e>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:g.value.discountPercentage,"onUpdate:modelValue":Q[5]||(Q[5]=_e=>g.value.discountPercentage=_e),modelModifiers:{number:!0},label:"Discount to Patients % *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&!isNaN(_e)&&_e>=0&&_e<=100||"Discount must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),i(ie,{cols:"12",class:"py-0"},{default:u(()=>[i(J)]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:g.value.saleQuantityPacks,"onUpdate:modelValue":[Q[6]||(Q[6]=_e=>g.value.saleQuantityPacks=_e),te],modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:H,"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue"])]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:g.value.freeQuantityPacks,"onUpdate:modelValue":[Q[7]||(Q[7]=_e=>g.value.freeQuantityPacks=_e),q],modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:oe,"prepend-inner-icon":"mdi-gift"},null,8,["modelValue"])]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:g.value.cgstPercentage,"onUpdate:modelValue":Q[8]||(Q[8]=_e=>g.value.cgstPercentage=_e),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&!isNaN(_e)&&_e>=0&&_e<=100||"CGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:g.value.sgstPercentage,"onUpdate:modelValue":Q[9]||(Q[9]=_e=>g.value.sgstPercentage=_e),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&!isNaN(_e)&&_e>=0&&_e<=100||"SGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:_.value,"onUpdate:modelValue":Q[10]||(Q[10]=_e=>_.value=_e),label:"Price to Retailer (Excl. GST) per Pack () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:de,"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:S},null,8,["modelValue"])]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[v("div",s7e,[v("div",o7e,"Price to Retailer (Incl. GST): "+K(T.value),1),Q[17]||(Q[17]=v("div",null,"Computed using CGST + SGST",-1))])]),_:1}),e.purchaseInvoiceId?ge("",!0):(P(),he(ie,{key:0,cols:"12",md:"6"},{default:u(()=>[i(M,{modelValue:g.value.purchaseInvoiceId,"onUpdate:modelValue":Q[11]||(Q[11]=_e=>g.value.purchaseInvoiceId=_e),items:h.value,"item-title":"displayText","item-value":"id",label:"Purchase Invoice (Optional)",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-file-document",loading:m.value,hint:"Link this batch to a purchase invoice","persistent-hint":"",clearable:""},null,8,["modelValue","items","loading"])]),_:1})),e.purchaseInvoiceId?(P(),he(ie,{key:1,cols:"12",md:"6"},{default:u(()=>[i(X,{"model-value":y.value,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document"},null,8,["model-value"])]),_:1})):ge("",!0),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:g.value.inwardBillId,"onUpdate:modelValue":Q[12]||(Q[12]=_e=>g.value.inwardBillId=_e),label:"Inward Bill ID",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-receipt",hint:"Optional reference to inward bill","persistent-hint":""},null,8,["modelValue"])]),_:1}),i(ie,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:g.value.location,"onUpdate:modelValue":Q[13]||(Q[13]=_e=>g.value.location=_e),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),i(ie,{cols:"12",class:"pt-1"},{default:u(()=>[i(J,{class:"mb-1"}),v("div",i7e,[E.value>0?(P(),Ae("div",l7e,[Q[18]||(Q[18]=v("strong",null,"Total Quantity:",-1)),N(" "+K(E.value)+" packs ("+K(x.value)+" units) ",1)])):ge("",!0),C.value!==null?(P(),Ae("div",u7e,[Q[19]||(Q[19]=v("strong",null,"Cost per Pack (Excl. GST):",-1)),N(" "+K(C.value.toFixed(2)),1)])):ge("",!0),U.value!==null?(P(),Ae("div",c7e,[Q[20]||(Q[20]=v("strong",null,"GST %:",-1)),N(" "+K(U.value.toFixed(2))+"% ",1)])):ge("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(J),i(ye,{class:"pa-3"},{default:u(()=>[i(Fe),i(ae,{onClick:G},{default:u(()=>[...Q[21]||(Q[21]=[N(" Cancel ",-1)])]),_:1}),i(ae,{color:"primary",onClick:ne,disabled:!f.value||d.value,loading:d.value,variant:"outlined"},{default:u(()=>[...Q[22]||(Q[22]=[N(" Add purchased inventory ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},f7e=en(d7e,[["__scopeId","data-v-6a6280f1"]]),A7e={class:"text-body-2 font-weight-medium"},m7e={key:0,class:"text-caption text-medium-emphasis mt-0.5"},v7e={class:"text-caption text-medium-emphasis"},h7e={class:"font-weight-medium"},p7e={class:"text-body-2 text-medium-emphasis"},g7e={key:0,class:"mb-0.5"},y7e={key:1,class:"mb-0.5"},_7e={key:2},w7e={__name:"edit-batch-inward",props:{batchId:{type:Number,required:!0},batch:{type:Object,required:!0}},emits:["close","batch-updated"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=la(),r=e,s=t,o=R(null),l=R(!1),c=R(!1),f=R(null),d=R(null),A=G=>{if(!G)return"";try{const W=new Date(G*1e3);if(isNaN(W.getTime()))return"";const Q=W.getFullYear(),O=String(W.getMonth()+1).padStart(2,"0"),ae=String(W.getDate()).padStart(2,"0");return`${Q}-${O}-${ae}`}catch(W){return console.error("Error converting timestamp to date:",W),""}},m=r.batch.unitsPerPack||1,p=r.batch.saleQuantity||0,h=r.batch.freeQuantity||0,g=(r.batch.priceToRetailer||0)/100,_=ee(()=>{const G=Number(E.value.cgstPercentage??0)||0,W=Number(E.value.sgstPercentage??0)||0;return G+W}),b=R("0.00"),S=ee(()=>Number(b.value??0)||0),B=()=>{b.value=(Number(b.value??0)||0).toFixed(2)},F=ee(()=>{const G=S.value||0,W=Number(_.value??0)||0;return G*(1+W/100)}),T=ee(()=>(Number(F.value??0)||0).toFixed(2)),E=R({batchNumber:r.batch.batchNumber||"",expiryDate:r.batch.expiryDate?typeof r.batch.expiryDate=="number"?A(r.batch.expiryDate):typeof r.batch.expiryDate=="string"&&r.batch.expiryDate.includes("T")?r.batch.expiryDate.split("T")[0]:r.batch.expiryDate:"",packType:r.batch.packType||"",unitsPerPack:m,mrp:r.batch.mrp||null,discountPercentage:r.batch.discountPercentage||0,saleQuantityPacks:m>0?p/m:0,freeQuantityPacks:m>0?h/m:0,cgstPercentage:r.batch.cgstPercentage||0,sgstPercentage:r.batch.sgstPercentage||0,inwardBillId:r.batch.inwardBillId||"",location:r.batch.location||""}),x=()=>{const W=1+(Number(_.value??0)||0)/100;if(W<=0){b.value="0.00";return}b.value=((Number(g??0)||0)/W).toFixed(2)},C=ee(()=>{const G=E.value.saleQuantityPacks||0,W=E.value.freeQuantityPacks||0;return G+W}),D=ee(()=>C.value*(E.value.unitsPerPack||1)),U=ee(()=>{const G=E.value.saleQuantityPacks||0,W=E.value.freeQuantityPacks||0,Q=Number(S.value??0)||0,O=G+W;return O===0?null:Q*G/O}),L=ee(()=>{const G=E.value.saleQuantityPacks||0,W=E.value.freeQuantityPacks||0,Q=F.value||0,O=G+W;return O===0?null:Q*G/O}),H=ee(()=>{const G=E.value.cgstPercentage||0,W=E.value.sgstPercentage||0;return G+W}),oe=[G=>!!G||"Expiry date is required"],de=[G=>G!=null&&G>=0||"Sale quantity must be non-negative",G=>{const W=G||0,Q=E.value.freeQuantityPacks||0;return W>0||Q>0||"At least one of sale quantity or free quantity must be greater than 0"}],te=[G=>G!=null&&G>=0||"Free quantity must be non-negative",G=>{const W=E.value.saleQuantityPacks||0,Q=G||0;return W>0||Q>0||"At least one of sale quantity or free quantity must be greater than 0"}],q=async()=>{if(!l.value){o.value?.validate();return}try{c.value=!0;const G=E.value.saleQuantityPacks||0,W=E.value.freeQuantityPacks||0;if(G===0&&W===0){a("At least one of sale quantity or free quantity must be greater than 0"),c.value=!1;return}const Q=L.value;if(Q!==null&&E.value.mrp<Q){a("MRP must be greater than or equal to calculated cost"),c.value=!1;return}const O={batchNumber:E.value.batchNumber,expiryDate:E.value.expiryDate,packType:E.value.packType,unitsPerPack:parseInt(E.value.unitsPerPack||1),mrp:parseFloat(E.value.mrp),discountPercentage:parseFloat(E.value.discountPercentage||0),saleQuantityPacks:parseFloat(E.value.saleQuantityPacks||0),freeQuantityPacks:parseFloat(E.value.freeQuantityPacks||0),priceToRetailer:parseFloat(F.value||0),cgstPercentage:parseFloat(E.value.cgstPercentage||0),sgstPercentage:parseFloat(E.value.sgstPercentage||0),inwardBillId:E.value.inwardBillId||"",location:E.value.location||""},{data:ae,error:j}=await gce(r.batchId,O);j?a(j.response?.data?.error||"Failed to update batch inward"):(n("Batch inward updated successfully"),s("batch-updated"),ne())}catch(G){console.error("Error updating batch inward:",G),a("An unexpected error occurred")}finally{c.value=!1}},ce=async()=>{if(r.batch.purchaseInvoiceId)try{const{data:G}=await Pg(r.batch.purchaseInvoiceId);G&&(d.value={id:G.id,identifier:G.pharmacyPurchaseInvoiceIdentifier,date:G.pharmacyPurchaseInvoiceDate,displayText:`${G.pharmacyPurchaseInvoiceIdentifier} (${le(G.pharmacyPurchaseInvoiceDate)})`})}catch(G){console.error("Error loading purchase invoice info:",G)}},le=G=>G?new Date(G*1e3).toLocaleDateString():"-",Z=()=>{r.batch.medicineName||r.batch.medicineMarketer?f.value={id:r.batch.medicineId,productName:r.batch.medicineName,marketer:r.batch.medicineMarketer}:Bw().then(({data:G,error:W})=>{if(!W&&G){for(const Q of G)if(Q.batches&&Q.batches.find(ae=>ae.id===r.batchId)){f.value={id:Q.id,productName:Q.productName,marketer:Q.marketer};break}}}).catch(G=>{console.error("Error loading medicine info:",G)})},ne=()=>{s("close")};return An(()=>{Z(),ce(),x()}),(G,W)=>{const Q=I("v-icon"),O=I("v-btn"),ae=I("v-card-title"),j=I("v-divider"),J=I("v-col"),ie=I("v-text-field"),X=I("v-select"),fe=I("v-row"),M=I("v-form"),z=I("v-card-text"),se=I("v-spacer"),be=I("v-card-actions"),Fe=I("v-card");return P(),he(Fe,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[i(ae,{class:"d-flex align-center justify-space-between"},{default:u(()=>[W[15]||(W[15]=v("span",null,"Edit purchased inventory",-1)),i(O,{onClick:ne,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(Q,{size:"18"},{default:u(()=>[...W[14]||(W[14]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(j),i(z,{class:"py-1"},{default:u(()=>[i(M,{ref_key:"form",ref:o,modelValue:l.value,"onUpdate:modelValue":W[13]||(W[13]=ye=>l.value=ye)},{default:u(()=>[i(fe,{dense:""},{default:u(()=>[f.value?(P(),he(J,{key:0,cols:"12"},{default:u(()=>[v("div",A7e,K(f.value.productName||"Unknown Medicine"),1),f.value.marketer?(P(),Ae("div",m7e,K(f.value.marketer),1)):ge("",!0)]),_:1})):ge("",!0),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:E.value.batchNumber,"onUpdate:modelValue":W[0]||(W[0]=ye=>E.value.batchNumber=ye),label:"Batch Number *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:E.value.expiryDate,"onUpdate:modelValue":W[1]||(W[1]=ye=>E.value.expiryDate=ye),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:oe,"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(X,{modelValue:E.value.packType,"onUpdate:modelValue":W[2]||(W[2]=ye=>E.value.packType=ye),items:Oe(Gw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:E.value.unitsPerPack,"onUpdate:modelValue":W[3]||(W[3]=ye=>E.value.unitsPerPack=ye),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:E.value.mrp,"onUpdate:modelValue":W[4]||(W[4]=ye=>E.value.mrp=ye),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:E.value.discountPercentage,"onUpdate:modelValue":W[5]||(W[5]=ye=>E.value.discountPercentage=ye),modelModifiers:{number:!0},label:"Discount to Patients % *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0&&ye<=100||"Discount must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12"},{default:u(()=>[i(j,{class:"my-1"})]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:E.value.saleQuantityPacks,"onUpdate:modelValue":W[6]||(W[6]=ye=>E.value.saleQuantityPacks=ye),modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:de,"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:E.value.freeQuantityPacks,"onUpdate:modelValue":W[7]||(W[7]=ye=>E.value.freeQuantityPacks=ye),modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:te,"prepend-inner-icon":"mdi-gift"},null,8,["modelValue"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:E.value.cgstPercentage,"onUpdate:modelValue":W[8]||(W[8]=ye=>E.value.cgstPercentage=ye),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0&&ye<=100||"CGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:E.value.sgstPercentage,"onUpdate:modelValue":W[9]||(W[9]=ye=>E.value.sgstPercentage=ye),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0&&ye<=100||"SGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:b.value,"onUpdate:modelValue":W[10]||(W[10]=ye=>b.value=ye),label:"Price to Retailer (Excl. GST) per Pack () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:[ye=>Number(ye)>=0||"Price to retailer (excl. GST) must be non-negative"],"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:B},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[v("div",v7e,[v("div",h7e,"Price to Retailer (Incl. GST): "+K(T.value),1),W[16]||(W[16]=v("div",null,"Computed using CGST + SGST",-1))])]),_:1}),d.value?(P(),he(J,{key:1,cols:"12",md:"6"},{default:u(()=>[i(ie,{"model-value":d.value.displayText,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document",hint:"Invoice link cannot be changed","persistent-hint":""},null,8,["model-value"])]),_:1})):ge("",!0),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:E.value.inwardBillId,"onUpdate:modelValue":W[11]||(W[11]=ye=>E.value.inwardBillId=ye),label:"Inward Bill ID",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-receipt",hint:"Optional reference to inward bill","persistent-hint":""},null,8,["modelValue"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:E.value.location,"onUpdate:modelValue":W[12]||(W[12]=ye=>E.value.location=ye),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),i(J,{cols:"12"},{default:u(()=>[i(j,{class:"my-1"}),v("div",p7e,[C.value>0?(P(),Ae("div",g7e,[W[17]||(W[17]=v("strong",null,"Total Quantity:",-1)),N(" "+K(C.value)+" packs ("+K(D.value)+" units) ",1)])):ge("",!0),U.value!==null?(P(),Ae("div",y7e,[W[18]||(W[18]=v("strong",null,"Calculated Cost per Pack (Excl. GST):",-1)),N(" "+K(U.value.toFixed(2)),1)])):ge("",!0),H.value!==null?(P(),Ae("div",_7e,[W[19]||(W[19]=v("strong",null,"Calculated GST %:",-1)),N(" "+K(H.value.toFixed(2))+"% ",1)])):ge("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(j),i(be,{class:"pa-3"},{default:u(()=>[i(se),i(O,{onClick:ne},{default:u(()=>[...W[20]||(W[20]=[N(" Cancel ",-1)])]),_:1}),i(O,{color:"primary",variant:"outlined",onClick:q,disabled:!l.value||c.value,loading:c.value},{default:u(()=>[...W[21]||(W[21]=[N(" Update purchased inventory ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},b7e=en(w7e,[["__scopeId","data-v-b0e37027"]]),x7e={class:"text-body-2"},C7e={key:2,class:"text-caption text-medium-emphasis mt-1 ml-4"},S7e={key:3,class:"text-caption text-medium-emphasis mt-1 ml-4"},E7e={__name:"edit-inventory",props:{batchId:{type:Number,required:!0},batch:{type:Object,required:!0}},emits:["close","inventory-added"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=la(),r=e,s=t,o=R(null),l=R(!1),c=R(!1),f=R(!1),d=R(null),A=R(null),m=R("increase"),p=R(""),h=R("packs"),y=R(null),g=R(null),_=ee(()=>h.value==="packs"&&y.value&&A.value?.unitsPerPack>0?y.value*A.value.unitsPerPack:g.value||0),b=ee(()=>h.value==="units"&&g.value&&A.value?.unitsPerPack>0?(g.value/A.value.unitsPerPack).toFixed(2):y.value||0),S=()=>{h.value==="packs"?(y.value&&A.value?.unitsPerPack>0&&(g.value=y.value*A.value.unitsPerPack),h.value="units"):(g.value&&A.value?.unitsPerPack>0&&(y.value=g.value/A.value.unitsPerPack),h.value="packs")},B=ee(()=>[x=>x!=null&&x>0||"Quantity must be greater than 0",x=>{if(m.value==="decrease"&&A.value){const C=A.value.availableUnits||0;let D=0;return h.value==="packs"&&x&&A.value?.unitsPerPack>0?D=x*A.value.unitsPerPack:h.value==="units"&&x&&(D=x),D<=C||`Cannot decrease more than current stock (${C} units)`}return!0}]),F=async()=>{try{f.value=!0,d.value=null,r.batch?A.value={batchNumber:r.batch.batchNumber||"Unknown",medicineName:r.batch.medicineName||"Unknown",availableUnits:r.batch.availableUnits||0,medicineId:r.batch.medicineId,unitsPerPack:r.batch.unitsPerPack||1}:d.value="Batch information not available"}catch(x){console.error("Error loading batch info:",x),d.value=x.message||"Failed to load batch information"}finally{f.value=!1}},T=async()=>{if(!l.value){o.value?.validate();return}if(!m.value){a("Please select increase or decrease for stock correction");return}try{c.value=!0;let x=0;if(h.value==="packs"&&y.value&&A.value?.unitsPerPack>0)x=y.value*A.value.unitsPerPack;else if(h.value==="units"&&g.value)x=g.value;else{a("Please enter a valid quantity"),c.value=!1;return}const C=2;let D=x;m.value==="decrease"&&(D=-x);const{data:U,error:L}=await Oce(r.batchId,D,p.value||"Stock adjustment",C);if(L)a(L.response?.data?.error||"Failed to adjust inventory");else{const H=m.value==="increase"?"increased":"decreased";n(`Inventory ${H} successfully`),s("inventory-added"),E()}}catch(x){console.error("Error adjusting inventory:",x),a("An unexpected error occurred")}finally{c.value=!1}},E=()=>{m.value="increase",y.value=null,g.value=null,h.value="packs",p.value="",s("close")};return An(()=>{F()}),(x,C)=>{const D=I("v-icon"),U=I("v-btn"),L=I("v-card-title"),H=I("v-divider"),oe=I("v-progress-circular"),de=I("v-col"),te=I("v-row"),q=I("v-alert"),ce=I("v-radio"),le=I("v-radio-group"),Z=I("v-text-field"),ne=I("v-textarea"),G=I("v-form"),W=I("v-card-text"),Q=I("v-spacer"),O=I("v-card-actions"),ae=I("v-card");return P(),he(ae,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[i(L,{class:"d-flex align-center justify-space-between"},{default:u(()=>[C[6]||(C[6]=v("span",null,"Manage Inventory",-1)),i(U,{onClick:E,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[i(D,{size:"18"},{default:u(()=>[...C[5]||(C[5]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(H),i(W,{class:"pt-4"},{default:u(()=>[f.value?(P(),he(te,{key:0},{default:u(()=>[i(de,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[i(oe,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):A.value?(P(),Ae(ze,{key:1},[i(q,{type:"info",variant:"tonal",class:"mb-4"},{default:u(()=>[v("div",x7e,[C[7]||(C[7]=v("strong",null,"Batch:",-1)),N(" "+K(A.value.batchNumber),1),C[8]||(C[8]=v("br",null,null,-1)),C[9]||(C[9]=v("strong",null,"Medicine:",-1)),N(" "+K(A.value.medicineName),1),C[10]||(C[10]=v("br",null,null,-1)),C[11]||(C[11]=v("strong",null,"Current Stock:",-1)),N(" "+K(A.value.availableUnits||0)+" units ",1)])]),_:1}),i(G,{ref_key:"form",ref:o,modelValue:l.value,"onUpdate:modelValue":C[4]||(C[4]=j=>l.value=j)},{default:u(()=>[i(te,null,{default:u(()=>[i(de,{cols:"12"},{default:u(()=>[i(le,{modelValue:m.value,"onUpdate:modelValue":C[0]||(C[0]=j=>m.value=j),inline:"",rules:[j=>!!j||"Please select correction direction"]},{default:u(()=>[i(ce,{label:"Increase Stock",value:"increase",color:"success"}),i(ce,{label:"Decrease Stock",value:"decrease",color:"error"})]),_:1},8,["modelValue","rules"])]),_:1}),i(de,{cols:"12"},{default:u(()=>[h.value==="packs"?(P(),he(Z,{key:0,modelValue:y.value,"onUpdate:modelValue":C[1]||(C[1]=j=>y.value=j),modelModifiers:{number:!0},label:"Quantity (Packs) *",variant:"outlined",density:"comfortable",type:"number",rules:B.value,"prepend-inner-icon":"mdi-package-variant",hint:"Enter quantity in packs","persistent-hint":""},{"append-inner":u(()=>[i(U,{icon:"",size:"small",variant:"text",onClick:S,title:"Switch to Units"},{default:u(()=>[i(D,{size:"small"},{default:u(()=>[...C[12]||(C[12]=[N("mdi-swap-horizontal",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])):(P(),he(Z,{key:1,modelValue:g.value,"onUpdate:modelValue":C[2]||(C[2]=j=>g.value=j),modelModifiers:{number:!0},label:"Quantity (Units) *",variant:"outlined",density:"comfortable",type:"number",rules:B.value,"prepend-inner-icon":"mdi-package-variant",hint:"Enter quantity in units","persistent-hint":""},{"append-inner":u(()=>[i(U,{icon:"",size:"small",variant:"text",onClick:S,title:"Switch to Packs"},{default:u(()=>[i(D,{size:"small"},{default:u(()=>[...C[13]||(C[13]=[N("mdi-swap-horizontal",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])),h.value==="packs"&&A.value?.unitsPerPack>0&&y.value?(P(),Ae("div",C7e," = "+K(_.value)+" units ("+K(A.value.unitsPerPack)+" units/pack) ",1)):h.value==="units"&&A.value?.unitsPerPack>0&&g.value?(P(),Ae("div",S7e," = "+K(b.value)+" packs ("+K(A.value.unitsPerPack)+" units/pack) ",1)):ge("",!0)]),_:1}),i(de,{cols:"12"},{default:u(()=>[i(ne,{modelValue:p.value,"onUpdate:modelValue":C[3]||(C[3]=j=>p.value=j),label:"Reason/Notes *",variant:"outlined",density:"comfortable",rules:[j=>!!j||"Reason is required"],rows:"3","prepend-inner-icon":"mdi-note-text"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):d.value?(P(),Ae(ze,{key:2},[i(q,{type:"error",class:"mb-4"},{default:u(()=>[N(K(d.value),1)]),_:1}),i(U,{color:"primary",onClick:F,"prepend-icon":"mdi-refresh"},{default:u(()=>[...C[14]||(C[14]=[N(" Retry ",-1)])]),_:1})],64)):ge("",!0)]),_:1}),i(H),i(O,{class:"pa-4"},{default:u(()=>[i(Q),i(U,{variant:"outlined",onClick:E},{default:u(()=>[...C[15]||(C[15]=[N(" Cancel ",-1)])]),_:1}),i(U,{color:"primary",onClick:T,disabled:!l.value||c.value||!A.value,loading:c.value},{default:u(()=>[N(K(m.value==="increase"?"Increase Stock":"Decrease Stock"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},k7e=en(E7e,[["__scopeId","data-v-9d80d760"]]),B7e={class:"text-medium-emphasis"},T7e={key:0},I7e={__name:"remove-medicine-from-pharmacy",props:{medicine:{type:Object,required:!0}},emits:["close","medicine-removed"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=R(!1),l=()=>{a("close")},c=async()=>{try{o.value=!0;const f=await Mce(n.medicine.id);if(f.error){const d=f.error.response?.data?.error||f.error.message||"Failed to remove medicine from pharmacy";s(d)}else r("Medicine removed from pharmacy successfully"),a("medicine-removed"),l()}catch(f){console.error("Error removing medicine from pharmacy:",f),s("An unexpected error occurred while removing the medicine from pharmacy")}finally{o.value=!1}};return(f,d)=>{const A=I("v-card-title"),m=I("v-col"),p=I("v-icon"),h=I("v-btn"),y=I("v-row"),g=I("v-card"),_=I("v-card-text"),b=I("v-divider");return P(),he(g,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"11"},{default:u(()=>[i(A,{class:"pa-0 pl-2"},{default:u(()=>[...d[0]||(d[0]=[N("Remove Medicine from Pharmacy",-1)])]),_:1})]),_:1}),i(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(h,{icon:"",size:"x-small",onClick:l},{default:u(()=>[i(p,null,{default:u(()=>[...d[1]||(d[1]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(g,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(_,{class:"text-left"},{default:u(()=>[d[4]||(d[4]=N(" Are you sure you want to remove this medicine from pharmacy? ",-1)),d[5]||(d[5]=v("span",{class:"text-warning font-weight-bold"}," Medicine will not be shown in pharmacy operations. You will need to select and add it again later. ",-1)),d[6]||(d[6]=v("br",null,null,-1)),d[7]||(d[7]=v("br",null,null,-1)),v("span",B7e,[d[3]||(d[3]=N(" Medicine: ",-1)),v("strong",null,K(e.medicine?.productName||"N/A"),1),e.medicine?.marketer?(P(),Ae("span",T7e,[d[2]||(d[2]=N("  Marketer: ",-1)),v("strong",null,K(e.medicine.marketer),1)])):ge("",!0)])]),_:1})]),_:1})]),_:1}),i(b),i(y,{"no-gutters":""},{default:u(()=>[i(m,{cols:"2"}),i(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[i(h,{variant:"outlined",color:"error",onClick:c,loading:o.value,disabled:o.value},{default:u(()=>[...d[8]||(d[8]=[N(" Yes, Remove from Pharmacy ",-1)])]),_:1},8,["loading","disabled"])]),_:1}),i(m,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},F7e={class:"d-flex align-center"},P7e={class:"d-flex align-center"},D7e={class:"pr-3 d-flex"},U7e={class:"scrollable-content"},R7e={class:"text-center"},N7e={class:"text-center"},V7e={class:"text-body-2 text-medium-emphasis mb-4"},L7e={class:"text-center"},M7e={class:"text-center"},O7e={class:"text-body-2 text-medium-emphasis mb-4"},H7e={key:0},$7e={key:1},Q7e={class:"d-flex align-center justify-space-between w-100"},G7e={class:"flex-grow-1"},z7e={class:"d-flex align-center mb-1"},W7e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},K7e={class:"d-flex align-center flex-wrap"},j7e={class:"d-flex align-center ml-2"},q7e={key:0},Y7e={class:"batch-expiry-col"},X7e={class:"text-right"},J7e={class:"text-right"},Z7e={class:"text-right"},eGe={class:"text-right"},tGe={class:"text-right"},nGe={class:"text-center d-none d-lg-table-cell"},aGe={class:"d-lg-none"},rGe={colspan:10,class:"text-end py-1"},sGe={key:1,class:"text-body-2 text-medium-emphasis text-center py-2"},oGe={key:0,class:"text-medium-emphasis"},iGe={__name:"pharmacy-inventory",setup(e){const t=Ln(),{showSuccess:n,showError:a}=la(),r=ee(()=>t.getters["pharmacyModule/currentPharmacyId"]),s=R(0),o=R([]),l=R(null),c=R(!1),f=R(null),d=R(""),A=R(""),m=R(!1),p=R(!1),h=R(!1),y=R(!1),g=R(!1),_=R(!1),b=R(!1),S=R(!1),B=R(!1),F=R(!1),T=R(null),E=R(null);R(null);const x=R(null),C=R(null),D=R(null),U=R(new Map),L=R(new Set),H=R(!1),oe=R(null),de=bt=>!bt||bt===0?"error":bt<10?"warning":"success",te=bt=>{if(!bt)return!1;try{const Ze=new Date(bt),qt=new Date;return qt.setHours(0,0,0,0),Ze<qt}catch{return!1}},q=bt=>{if(!bt.batches||bt.batches.length===0)return!1;const Ze=new Date;return Ze.setHours(0,0,0,0),bt.batches.some(qt=>{if(!qt.expiryDate)return!1;try{const Vt=new Date(qt.expiryDate);return Vt.setHours(0,0,0,0),Vt<Ze&&(qt.availableUnits||0)>0}catch{return!1}})},ce=bt=>{if(!bt.batches||bt.batches.length===0)return!1;const Ze=new Date;Ze.setHours(0,0,0,0);const qt=new Date(Ze);return qt.setDate(qt.getDate()+15),bt.batches.some(Vt=>{if(!Vt.expiryDate)return!1;try{const zt=new Date(Vt.expiryDate);zt.setHours(0,0,0,0);const ln=zt>=Ze,Dn=zt<=qt;return ln&&Dn&&(Vt.availableUnits||0)>0}catch{return!1}})},le=bt=>{if(!bt)return"";try{return new Date(bt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return bt}},Z=bt=>bt==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(bt),ne=bt=>{const Ze=bt?.cost??0,qt=bt?.gstPercentage??(bt?.cgstPercentage??0)+(bt?.sgstPercentage??0),Vt=1+(Number(qt)||0)/100;return Vt>0?Ze/Vt:Ze},G=ee(()=>{let bt=o.value;if(d.value&&d.value.trim()!==""){const Ze=d.value.toLowerCase().trim();bt=bt.filter(qt=>(qt.productName||"").toLowerCase().includes(Ze))}if(A.value&&A.value.trim()!==""){const Ze=A.value.toLowerCase().trim();bt=bt.filter(qt=>(qt.group||"").toLowerCase().includes(Ze))}return m.value&&(bt=bt.filter(Ze=>Ze.hasExpiredBatchesWithInventory)),h.value&&(bt=bt.filter(Ze=>Ze.hasNearingExpiryBatchesWithInventory)),p.value&&(bt=bt.filter(Ze=>Ze.lowStock)),bt}),W=bt=>{if(!bt.batches||bt.batches.length===0)return{availableUnits:0,lowStock:!1};const Ze=new Date;Ze.setHours(0,0,0,0);const qt=bt.batches.filter(ln=>{if(!ln.expiryDate)return!0;try{return new Date(ln.expiryDate)>=Ze}catch{return!0}}).reduce((ln,Dn)=>ln+(Dn.availableUnits||0),0),Vt=bt.alertUnits||0,zt=qt<Vt;return{availableUnits:qt,lowStock:zt}},Q=async()=>{if(!r.value){a("Please select a pharmacy first");return}try{c.value=!0,f.value=null;const{data:bt,error:Ze}=await Bw(r.value);Ze?(f.value=Ze.response?.data?.error||Ze.message||"Failed to load inventory",o.value=[],a("Error loading inventory")):(o.value=(bt||[]).map(qt=>{const Vt=W(qt),zt=q(qt),ln=ce(qt);return{...qt,availableUnits:Vt.availableUnits,lowStock:Vt.lowStock,hasExpiredBatchesWithInventory:zt,hasNearingExpiryBatchesWithInventory:ln}}),await Nt())}catch(bt){console.error("Error in loadInventory:",bt),f.value=bt.message||"An unexpected error occurred",o.value=[],a("Error loading inventory")}finally{c.value=!1}},O=()=>{y.value=!0},ae=(bt=null)=>{if(T.value=bt,bt){const Ze=o.value.find(qt=>qt.id===bt);Ze?E.value={id:Ze.id,productName:Ze.productName,marketer:Ze.marketer}:E.value=null}else E.value=null;g.value=!0},j=bt=>{let Ze=null,qt=null;for(const Vt of o.value)if(Vt.batches&&(Ze=Vt.batches.find(zt=>zt.id===bt),Ze)){qt=Vt;break}Ze?(C.value={...Ze,medicineId:qt.id,medicineName:qt.productName,medicineMarketer:qt.marketer},B.value=!0):a("Batch not found")},J=bt=>{let Ze=null;for(const qt of o.value)if(qt.batches){const Vt=qt.batches.find(zt=>zt.id===bt);if(Vt){Ze={...Vt,medicineName:qt.productName||"Unknown",medicineId:qt.id,unitsPerPack:Vt.unitsPerPack||1};break}}Ze?(C.value=Ze,_.value=!0):a("Batch not found")},ie=()=>{b.value=!0},X=()=>{y.value=!1},fe=()=>{y.value=!1,Q()},M=()=>{g.value=!1,T.value=null,E.value=null},z=()=>{g.value=!1,T.value=null,E.value=null,Q()},se=()=>{_.value=!1,C.value=null},be=()=>{_.value=!1,C.value=null,Q()},Fe=()=>{b.value=!1},ye=()=>{b.value=!1,Q(),n("Medicine created successfully")},Qe=bt=>{x.value=bt,S.value=!0},_e=bt=>{D.value=bt,F.value=!0},Se=()=>{S.value=!1,x.value=null},Ee=bt=>{const Ze=o.value.findIndex(qt=>qt.id===bt.id);Ze!==-1&&(o.value[Ze]={...o.value[Ze],...bt}),S.value=!1,x.value=null,Q(),n("Medicine updated successfully")},Ue=()=>{B.value=!1,C.value=null},je=()=>{B.value=!1,C.value=null,Q()},at=()=>{F.value=!1,D.value=null},mt=()=>{F.value=!1,D.value=null,Q()},xe=bt=>U.value.has(bt)&&U.value.get(bt)===!0,Be=bt=>!!(bt.purchaseInvoiceId||bt.purchaseInvoiceIdentifier),Ye=bt=>xe(bt.id)?"Cannot delete: Inventory is used in a bill":Be(bt)?"Cannot delete: Batch is linked to a purchase invoice. Remove from invoice view instead.":"Delete Inventory",kt=bt=>L.value.has(bt),xt=async bt=>{if(U.value.has(bt))return U.value.get(bt);const{data:Ze,error:qt}=await Fce(bt);if(qt)return console.error("Error checking batch usage:",qt),U.value.set(bt,!1),!1;const Vt=Ze?.isUsed||!1;return U.value.set(bt,Vt),Vt},Nt=async()=>{U.value.clear();const bt=[];o.value.forEach(qt=>{qt.batches&&qt.batches.length>0&&qt.batches.forEach(Vt=>{bt.push(Vt.id)})});const Ze=bt.map(qt=>xt(qt));await Promise.all(Ze)},At=async bt=>{let Ze=null;for(const Vt of o.value)if(Vt.batches&&(Ze=Vt.batches.find(zt=>zt.id===bt),Ze))break;if(!Ze){a("Batch not found");return}if(Be(Ze)){a("Cannot delete batch: Batch is linked to a purchase invoice. Remove from invoice view instead.");return}if(await xt(bt)){a("Cannot delete batch: This inventory is being used in one or more bills");return}oe.value=Ze,H.value=!0},Ot=()=>{H.value=!1,oe.value=null},Dt=async bt=>{if(bt)try{L.value.add(bt);const{data:Ze,error:qt}=await Pce(bt);if(qt){const Vt=qt.message||"Failed to delete batch";a(Vt);return}U.value.delete(bt),H.value=!1,oe.value=null,n("Batch deleted successfully"),await Q()}catch(Ze){console.error("Error deleting batch:",Ze),a("An unexpected error occurred while deleting the batch")}finally{L.value.delete(bt)}};return Ge(r,(bt,Ze)=>{bt&&bt!==Ze&&Q()}),An(()=>{Q()}),OA(()=>{r.value&&Q()}),(bt,Ze)=>{const qt=I("v-alert"),Vt=I("v-tab"),zt=I("v-tabs"),ln=I("v-icon"),Dn=I("v-card-text"),vt=I("v-card"),et=I("v-btn"),Wt=I("v-tooltip"),_n=I("v-col"),na=I("v-row"),rt=I("v-progress-circular"),Pe=I("v-text-field"),ut=I("v-checkbox"),wt=I("v-chip"),Xt=I("v-card-title"),bn=I("v-divider"),wn=I("v-table"),Zn=I("v-lazy"),ua=I("v-window-item"),Ce=I("v-window"),He=I("v-main"),Re=I("v-dialog");return P(),Ae(ze,null,[i(He,null,{default:u(()=>[l.value?(P(),he(qt,{key:0,type:"error",dismissible:"","onClick:close":Ze[0]||(Ze[0]=Te=>l.value=null),class:"ma-3"},{default:u(()=>[N(K(l.value),1)]),_:1})):ge("",!0),i(na,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[i(_n,{cols:"12"},{default:u(()=>[i(vt,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[v("div",F7e,[i(zt,{modelValue:s.value,"onUpdate:modelValue":Ze[1]||(Ze[1]=Te=>s.value=Te),color:"primary","align-tabs":"start"},{default:u(()=>[i(Vt,{value:0},{default:u(()=>[...Ze[18]||(Ze[18]=[N("Inventory",-1)])]),_:1})]),_:1},8,["modelValue"]),o.value&&o.value.length>0?(P(),he(vt,{key:0,rounded:"0",class:"ml-3",color:"warning",variant:"tonal",style:{height:"fit-content"}},{default:u(()=>[i(Dn,{class:"py-1 px-2"},{default:u(()=>[v("div",P7e,[i(ln,{color:"warning",size:"small",class:"mr-2"},{default:u(()=>[...Ze[19]||(Ze[19]=[N("mdi-alert-circle",-1)])]),_:1}),Ze[20]||(Ze[20]=v("span",{class:"text-body-2 font-weight-medium reconciliation-banner-text"}," Before reconciliation, ensure no inventory blocked for draft bills. ",-1))])]),_:1})]),_:1})):ge("",!0)]),v("div",D7e,[i(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[i(et,{color:"primary","prepend-icon":"mdi-magnify-plus",onClick:O,style:{"margin-right":"2px"}},{default:u(()=>[...Ze[21]||(Ze[21]=[N(" Search & Add Medicine ",-1)])]),_:1})]),_:1}),i(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[i(et,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus-box",onClick:ie,style:{"margin-right":"2px"}},{default:u(()=>[...Ze[22]||(Ze[22]=[N(" Create & Add Medicine ",-1)])]),_:1})]),_:1}),i(Wt,{text:"Refresh Inventory"},{activator:u(({props:Te})=>[i(et,Ie({rounded:"x-small",onClick:Q,size:"small"},Te,{loading:c.value,class:"btn-hover-enhanced ml-1"}),{default:u(()=>[i(ln,null,{default:u(()=>[...Ze[23]||(Ze[23]=[N("mdi-refresh",-1)])]),_:1})]),_:1},16,["loading"])]),_:1})])]),_:1})]),_:1})]),_:1}),i(Ce,{modelValue:s.value,"onUpdate:modelValue":Ze[8]||(Ze[8]=Te=>s.value=Te),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[i(ua,{value:0,style:{height:"100%"}},{default:u(()=>[v("div",U7e,[c.value?(P(),he(na,{key:0,"no-gutters":""},{default:u(()=>[i(_n,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",R7e,[i(rt,{indeterminate:"",color:"primary",size:"64"}),Ze[24]||(Ze[24]=v("div",{class:"mt-4 text-subtitle-1"},"Loading inventory...",-1))])]),_:1})]),_:1})):f.value?(P(),he(na,{key:1,"no-gutters":""},{default:u(()=>[i(_n,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",N7e,[i(ln,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Ze[25]||(Ze[25]=[N("mdi-alert-circle",-1)])]),_:1}),Ze[27]||(Ze[27]=v("div",{class:"text-h6 mb-2"},"Failed to Load Inventory",-1)),v("div",V7e,K(f.value),1),i(et,{color:"primary",onClick:Q,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Ze[26]||(Ze[26]=[N(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):o.value&&o.value.length===0?(P(),he(na,{key:2,"no-gutters":""},{default:u(()=>[i(_n,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",L7e,[i(ln,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...Ze[28]||(Ze[28]=[N("mdi-pill-off",-1)])]),_:1}),Ze[30]||(Ze[30]=v("div",{class:"text-h6 mb-2"},"No Pharmacy Inventory",-1)),Ze[31]||(Ze[31]=v("div",{class:"text-body-2 text-medium-emphasis mb-4"},"Add medicines to start managing inventory",-1)),i(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[i(et,{color:"primary",onClick:O,"prepend-icon":"mdi-magnify-plus"},{default:u(()=>[...Ze[29]||(Ze[29]=[N(" Search & Add Medicine ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1})):o.value&&o.value.length>0?(P(),Ae(ze,{key:3},[i(na,{"no-gutters":"",class:"mb-2 align-center"},{default:u(()=>[i(_n,{cols:"12",md:"auto",class:"d-flex align-center flex-wrap gap-2"},{default:u(()=>[i(Pe,{modelValue:d.value,"onUpdate:modelValue":Ze[2]||(Ze[2]=Te=>d.value=Te),placeholder:"Filter by medicine name...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-magnify",class:"filter-input",style:{"max-width":"400px","min-width":"280px","margin-left":"4px"}},null,8,["modelValue"]),i(Pe,{modelValue:A.value,"onUpdate:modelValue":Ze[3]||(Ze[3]=Te=>A.value=Te),placeholder:"Filter by group...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-tag",class:"filter-input",style:{"max-width":"400px","min-width":"280px","margin-left":"4px"}},null,8,["modelValue"])]),_:1}),i(_n,{cols:"12",md:"auto",class:"d-flex align-center flex-wrap gap-2 ml-auto",style:{"margin-right":"2px"}},{default:u(()=>[i(ut,{modelValue:m.value,"onUpdate:modelValue":Ze[4]||(Ze[4]=Te=>m.value=Te),label:"Expired batches only",density:"compact","hide-details":"",color:"error",class:"filter-checkbox"},null,8,["modelValue"]),i(ut,{modelValue:h.value,"onUpdate:modelValue":Ze[5]||(Ze[5]=Te=>h.value=Te),label:"Nearing expiry",density:"compact","hide-details":"",color:"warning",class:"filter-checkbox"},null,8,["modelValue"]),i(ut,{modelValue:p.value,"onUpdate:modelValue":Ze[6]||(Ze[6]=Te=>p.value=Te),label:"Low stock only",density:"compact","hide-details":"",color:"warning",class:"filter-checkbox"},null,8,["modelValue"])]),_:1})]),_:1}),d.value&&d.value.trim()!==""||A.value&&A.value.trim()!==""||m.value||h.value||p.value?(P(),Ae(ze,{key:0},[G.value.length===0?(P(),he(na,{key:0,"no-gutters":""},{default:u(()=>[i(_n,{cols:"12",class:"d-flex justify-center align-center",style:{height:"40vh"}},{default:u(()=>[v("div",M7e,[i(ln,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...Ze[32]||(Ze[32]=[N("mdi-magnify-remove",-1)])]),_:1}),Ze[34]||(Ze[34]=v("div",{class:"text-h6 mb-2"},"No medicines found",-1)),v("div",O7e,[d.value&&d.value.trim()!==""?(P(),Ae("span",H7e,' No medicines match "'+K(d.value)+'" ',1)):(P(),Ae("span",$7e," No medicines match the selected filters "))]),i(et,{color:"primary",onClick:Ze[7]||(Ze[7]=Te=>{d.value="",A.value="",m.value=!1,h.value=!1,p.value=!1}),"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...Ze[33]||(Ze[33]=[N(" Clear All Filters ",-1)])]),_:1})])]),_:1})]),_:1})):ge("",!0)],64)):ge("",!0),(P(!0),Ae(ze,null,Jt(G.value,Te=>(P(),he(Zn,{key:Te?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[Te?(P(),he(vt,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[i(Xt,{class:"pb-0 pt-2"},{default:u(()=>[v("div",Q7e,[v("div",G7e,[v("div",z7e,[v("span",W7e,K(Te.productName||"Unknown Medicine"),1),i(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[i(Wt,{text:"Edit Medicine"},{activator:u(({props:Ve})=>[i(ln,Ie({size:"x-small"},{ref_for:!0},Ve,{class:"edit-icon flex-shrink-0 ml-1",onClick:$e=>Qe(Te),tabindex:"-1"}),{default:u(()=>[...Ze[35]||(Ze[35]=[N(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),i(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[i(Wt,{text:"Remove Medicine from Pharmacy"},{activator:u(({props:Ve})=>[i(ln,Ie({size:"x-small"},{ref_for:!0},Ve,{class:"edit-icon flex-shrink-0 ml-1",onClick:$e=>_e(Te),tabindex:"-1",color:"error"}),{default:u(()=>[...Ze[36]||(Ze[36]=[N(" mdi-delete-outline ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),v("div",K7e,[Te.group&&Te.group.trim()!==""?(P(),he(wt,{key:0,color:"info",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[N(K(Te.group),1)]),_:2},1024)):ge("",!0),i(wt,{color:de(Te.availableUnits),size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[i(ln,{size:"small",class:"mr-1"},{default:u(()=>[...Ze[37]||(Ze[37]=[N("mdi-package-variant",-1)])]),_:1}),N(" "+K(Te.availableUnits||0)+" units ",1)]),_:2},1032,["color"]),Te.lowStock?(P(),he(wt,{key:1,color:"warning",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[i(ln,{size:"small",class:"mr-1"},{default:u(()=>[...Ze[38]||(Ze[38]=[N("mdi-alert",-1)])]),_:1}),Ze[39]||(Ze[39]=N(" Low Stock ",-1))]),_:1})):ge("",!0),!Te.hsnCode||Te.hsnCode.trim()===""?(P(),he(wt,{key:2,color:"warning",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[i(ln,{size:"small",class:"mr-1"},{default:u(()=>[...Ze[40]||(Ze[40]=[N("mdi-alert-circle",-1)])]),_:1}),Ze[41]||(Ze[41]=N(" HSN Missing ",-1))]),_:1})):ge("",!0)])]),v("div",j7e,[i(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[i(et,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",size:"small",onClick:Ve=>ae(Te.id)},{default:u(()=>[...Ze[42]||(Ze[42]=[N(" Add Inventory ",-1)])]),_:1},8,["onClick"])]),_:2},1024)])])]),_:2},1024),Te.batches&&Te.batches.length>0?(P(),he(bn,{key:0})):ge("",!0),i(Dn,{class:lt({"pt-1 pb-1":Te.batches&&Te.batches.length>0,"pa-0":!Te.batches||Te.batches.length===0})},{default:u(()=>[Te.batches&&Te.batches.length>0?(P(),Ae("div",q7e,[i(wn,{density:"compact",class:"batch-table compact-table"},{default:u(()=>[Ze[43]||(Ze[43]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Batch #"),v("th",{class:"text-left batch-expiry-col"},"Expiry"),v("th",{class:"text-left"},"InwardBillID"),v("th",{class:"text-left"},"Location"),v("th",{class:"text-right"},"MRP/pack"),v("th",{class:"text-right"},"Cost/pack"),v("th",{class:"text-right"},"Units/pack"),v("th",{class:"text-right"},"Discount %"),v("th",{class:"text-right"},"Available Quantity"),v("th",{class:"text-center"})])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(Te.batches,Ve=>(P(),Ae(ze,{key:Ve.id},[v("tr",{class:lt({"batch-expired":te(Ve.expiryDate)})},[v("td",null,K(Ve.batchNumber),1),v("td",Y7e,[v("span",{class:lt({"text-error":te(Ve.expiryDate)})},K(le(Ve.expiryDate)),3)]),v("td",null,K(Ve.inwardBillId||Ve.purchaseInvoiceIdentifier||"-"),1),v("td",null,K(Ve.location||"-"),1),v("td",X7e,K(Z(Ve.mrp)),1),v("td",J7e,K(Z(ne(Ve))),1),v("td",Z7e,K(Ve.unitsPerPack??"-"),1),v("td",eGe,K(Ve.discountPercentage||0)+"%",1),v("td",tGe,[i(wt,{color:Ve.availableUnits>0?"success":"error",size:"small",variant:"tonal"},{default:u(()=>[N(K(Ve.availableUnits||0),1)]),_:2},1032,["color"])]),v("td",nGe,[i(En,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[i(Wt,{text:"Edit Purchased Inventory"},{activator:u(({props:$e})=>[i(et,Ie({icon:"mdi-pencil",size:"small",variant:"text",onClick:dt=>j(Ve.id),class:"mr-1"},{ref_for:!0},$e),null,16,["onClick"])]),_:2},1024)]),_:2},1024),i(En,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[i(Wt,{text:"Manage Inventory"},{activator:u(({props:$e})=>[i(et,Ie({icon:"mdi-swap-horizontal",size:"small",variant:"text",onClick:dt=>J(Ve.id)},{ref_for:!0},$e,{class:"mr-1"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024),i(En,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[i(Wt,{text:Ye(Ve)},{activator:u(({props:$e})=>[i(et,Ie({icon:"mdi-delete-outline",size:"small",variant:"text",onClick:dt=>At(Ve.id),disabled:xe(Ve.id)||Be(Ve)||kt(Ve.id),loading:kt(Ve.id),color:"error"},{ref_for:!0},$e),null,16,["onClick","disabled","loading"])]),_:2},1032,["text"])]),_:2},1024)])],2),v("tr",aGe,[v("td",rGe,[i(En,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[i(Wt,{text:"Edit Purchased Inventory"},{activator:u(({props:$e})=>[i(et,Ie({icon:"mdi-pencil",size:"small",variant:"text",onClick:dt=>j(Ve.id),class:"mr-1"},{ref_for:!0},$e),null,16,["onClick"])]),_:2},1024)]),_:2},1024),i(En,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[i(Wt,{text:"Manage Inventory"},{activator:u(({props:$e})=>[i(et,Ie({icon:"mdi-swap-horizontal",size:"small",variant:"text",onClick:dt=>J(Ve.id)},{ref_for:!0},$e,{class:"mr-1"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024),i(En,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[i(Wt,{text:Ye(Ve)},{activator:u(({props:$e})=>[i(et,Ie({icon:"mdi-delete-outline",size:"small",variant:"text",onClick:dt=>At(Ve.id),disabled:xe(Ve.id)||Be(Ve)||kt(Ve.id),loading:kt(Ve.id),color:"error"},{ref_for:!0},$e),null,16,["onClick","disabled","loading"])]),_:2},1032,["text"])]),_:2},1024)])])],64))),128))])]),_:2},1024)])):(P(),Ae("div",sGe,' No inventory available. Click on "Add Inventory" to add inventory. '))]),_:2},1032,["class"])]),_:2},1024)):ge("",!0)]),_:2},1024))),128))],64)):ge("",!0)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(Re,{modelValue:y.value,"onUpdate:modelValue":Ze[9]||(Ze[9]=Te=>y.value=Te),persistent:"","max-width":"700px"},{default:u(()=>[y.value?(P(),he(ZQe,{key:0,onClose:X,onMedicineAdded:fe})):ge("",!0)]),_:1},8,["modelValue"]),i(Re,{modelValue:g.value,"onUpdate:modelValue":Ze[10]||(Ze[10]=Te=>g.value=Te),persistent:"","max-width":"800px"},{default:u(()=>[g.value?(P(),he(f7e,{key:0,"medicine-id":T.value,"medicine-info":E.value,onClose:M,onBatchCreated:z},null,8,["medicine-id","medicine-info"])):ge("",!0)]),_:1},8,["modelValue"]),i(Re,{modelValue:_.value,"onUpdate:modelValue":Ze[11]||(Ze[11]=Te=>_.value=Te),persistent:"","max-width":"600px"},{default:u(()=>[_.value&&C.value?(P(),he(k7e,{key:0,"batch-id":C.value.id,batch:C.value,onClose:se,onInventoryAdded:be},null,8,["batch-id","batch"])):ge("",!0)]),_:1},8,["modelValue"]),i(Re,{modelValue:b.value,"onUpdate:modelValue":Ze[12]||(Ze[12]=Te=>b.value=Te),persistent:"","max-width":"40%"},{default:u(()=>[b.value?(P(),he(BT,{key:0,mode:"pharmacy",onClose:Fe,onMedicineCreated:ye})):ge("",!0)]),_:1},8,["modelValue"]),i(Re,{modelValue:S.value,"onUpdate:modelValue":Ze[13]||(Ze[13]=Te=>S.value=Te),persistent:"","max-width":"40%"},{default:u(()=>[S.value&&x.value?(P(),he(DH,{key:0,medicine:x.value,mode:"pharmacy",onClose:Se,"onUpdate:medicine":Ee},null,8,["medicine"])):ge("",!0)]),_:1},8,["modelValue"]),i(Re,{modelValue:B.value,"onUpdate:modelValue":Ze[14]||(Ze[14]=Te=>B.value=Te),persistent:"","max-width":"800px"},{default:u(()=>[B.value&&C.value?(P(),he(b7e,{key:0,"batch-id":C.value.id,batch:C.value,onClose:Ue,onBatchUpdated:je},null,8,["batch-id","batch"])):ge("",!0)]),_:1},8,["modelValue"]),i(Re,{modelValue:F.value,"onUpdate:modelValue":Ze[15]||(Ze[15]=Te=>F.value=Te),persistent:"","max-width":"30%"},{default:u(()=>[F.value&&D.value?(P(),he(I7e,{key:0,medicine:D.value,onClose:at,onMedicineRemoved:mt},null,8,["medicine"])):ge("",!0)]),_:1},8,["modelValue"]),i(Re,{modelValue:H.value,"onUpdate:modelValue":Ze[17]||(Ze[17]=Te=>H.value=Te),persistent:"","max-width":"500px"},{default:u(()=>[i(vt,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[i(na,{"no-gutters":""},{default:u(()=>[i(_n,{cols:"12"},{default:u(()=>[i(vt,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(na,{"no-gutters":""},{default:u(()=>[i(_n,{cols:"11"},{default:u(()=>[i(Xt,{class:"pa-0 pl-2"},{default:u(()=>[...Ze[44]||(Ze[44]=[N("Delete Inventory Batch",-1)])]),_:1})]),_:1}),i(_n,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[i(et,{icon:"",size:"x-small",onClick:Ot,disabled:kt(oe.value?.id)},{default:u(()=>[i(ln,null,{default:u(()=>[...Ze[45]||(Ze[45]=[N("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(na,{"no-gutters":""},{default:u(()=>[i(_n,{cols:"12"},{default:u(()=>[i(vt,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(na,{"no-gutters":""},{default:u(()=>[i(_n,{cols:"12"},{default:u(()=>[i(Dn,{class:"text-left"},{default:u(()=>[Ze[51]||(Ze[51]=N(" Are you sure you want to delete this inventory batch? ",-1)),Ze[52]||(Ze[52]=v("span",{class:"text-error font-weight-bold"}," This action cannot be undone. The batch and all associated inventory data will be permanently deleted. ",-1)),Ze[53]||(Ze[53]=v("br",null,null,-1)),Ze[54]||(Ze[54]=v("br",null,null,-1)),oe.value?(P(),Ae("span",oGe,[Ze[46]||(Ze[46]=v("strong",null,"Batch #:",-1)),N(" "+K(oe.value.batchNumber),1),Ze[47]||(Ze[47]=v("br",null,null,-1)),Ze[48]||(Ze[48]=v("strong",null,"Expiry:",-1)),N(" "+K(le(oe.value.expiryDate)),1),Ze[49]||(Ze[49]=v("br",null,null,-1)),Ze[50]||(Ze[50]=v("strong",null,"Available Units:",-1)),N(" "+K(oe.value.availableUnits||0),1)])):ge("",!0)]),_:1})]),_:1})]),_:1}),i(bn),i(na,{"no-gutters":""},{default:u(()=>[i(_n,{cols:"12",class:"pa-3 d-flex justify-end"},{default:u(()=>[i(et,{variant:"outlined",color:"error",onClick:Ze[16]||(Ze[16]=Te=>Dt(oe.value?.id)),loading:kt(oe.value?.id),disabled:!oe.value||kt(oe.value?.id),class:"mr-2"},{default:u(()=>[...Ze[55]||(Ze[55]=[N(" Delete ",-1)])]),_:1},8,["loading","disabled"]),i(et,{variant:"flat",color:"primary",onClick:Ot,disabled:kt(oe.value?.id)},{default:u(()=>[...Ze[56]||(Ze[56]=[N(" Cancel ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},lGe=en(iGe,[["__scopeId","data-v-731d7698"]]),uGe={__name:"pharmacy-supplier-form",props:{supplier:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=R(!0),l=R(!1),c=R(!1),f=R(null),d=R({identifier:"",supplierName:"",gstin:"",address:"",contactNumber:""});Ge(()=>n.supplier,p=>{p&&(d.value={...p})},{immediate:!0});const A=()=>{o.value=!1,a("close")},m=async()=>{if(!f.value)return;const{valid:p}=await f.value.validate();if(p){c.value=!0;try{const{data:h,error:y}=await Nce(d.value);if(y)throw y;r("Supplier created successfully"),a("saved"),A()}catch(h){console.error("Error creating supplier:",h),s(h.response?.data?.error||h.message||"Failed to create supplier")}finally{c.value=!1}}};return(p,h)=>{const y=I("v-icon"),g=I("v-btn"),_=I("v-card-title"),b=I("v-divider"),S=I("v-text-field"),B=I("v-textarea"),F=I("v-form"),T=I("v-card-text"),E=I("v-spacer"),x=I("v-card-actions"),C=I("v-card"),D=I("v-dialog");return P(),he(D,{modelValue:o.value,"onUpdate:modelValue":h[6]||(h[6]=U=>o.value=U),persistent:"","max-width":"600px"},{default:u(()=>[i(C,{rounded:"lg"},{default:u(()=>[i(_,{class:"d-flex align-center justify-space-between"},{default:u(()=>[h[8]||(h[8]=v("span",null,"Add Supplier",-1)),i(g,{onClick:A,variant:"text",size:"small"},{default:u(()=>[i(y,null,{default:u(()=>[...h[7]||(h[7]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(b),i(T,{class:"py-2"},{default:u(()=>[i(F,{ref_key:"form",ref:f,modelValue:l.value,"onUpdate:modelValue":h[5]||(h[5]=U=>l.value=U)},{default:u(()=>[i(S,{modelValue:d.value.identifier,"onUpdate:modelValue":h[0]||(h[0]=U=>d.value.identifier=U),label:"Identifier",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-identifier",class:"mb-1"},null,8,["modelValue"]),i(S,{modelValue:d.value.supplierName,"onUpdate:modelValue":h[1]||(h[1]=U=>d.value.supplierName=U),label:"Supplier Name *",variant:"outlined",density:"compact",rules:[U=>!!U||"Supplier name is required"],"prepend-inner-icon":"mdi-account",class:"mb-1"},null,8,["modelValue","rules"]),i(S,{modelValue:d.value.gstin,"onUpdate:modelValue":h[2]||(h[2]=U=>d.value.gstin=U),label:"GSTIN *",variant:"outlined",density:"compact",rules:[U=>!!U||"GSTIN is required"],"prepend-inner-icon":"mdi-card-account-details",class:"mb-1"},null,8,["modelValue","rules"]),i(B,{modelValue:d.value.address,"onUpdate:modelValue":h[3]||(h[3]=U=>d.value.address=U),label:"Address",variant:"outlined",density:"compact",rows:"2","prepend-inner-icon":"mdi-map-marker",class:"mb-1"},null,8,["modelValue"]),i(S,{modelValue:d.value.contactNumber,"onUpdate:modelValue":h[4]||(h[4]=U=>d.value.contactNumber=U),label:"Contact Number",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),i(b),i(x,{class:"pa-3"},{default:u(()=>[i(E),i(g,{onClick:A},{default:u(()=>[...h[9]||(h[9]=[N("Cancel",-1)])]),_:1}),i(g,{color:"primary",onClick:m,disabled:!l.value||c.value,loading:c.value},{default:u(()=>[...h[10]||(h[10]=[N(" Save ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},cGe={__name:"pharmacy-edit-supplier",props:{supplier:{type:Object,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=R(!0),l=R(!1),c=R(!1),f=R(null),d=R({identifier:"",supplierName:"",gstin:"",address:"",contactNumber:""});Ge(()=>n.supplier,p=>{p&&(d.value={identifier:p.identifier||"",supplierName:p.supplierName||"",gstin:p.gstin||"",address:p.address||"",contactNumber:p.contactNumber||""})},{immediate:!0});const A=()=>{o.value=!1,a("close")},m=async()=>{if(!f.value)return;const{valid:p}=await f.value.validate();if(p){c.value=!0;try{const{data:h,error:y}=await Vce(n.supplier.id,d.value);if(y)throw y;r("Supplier updated successfully"),a("saved"),A()}catch(h){console.error("Error updating supplier:",h),s(h.response?.data?.error||h.message||"Failed to update supplier")}finally{c.value=!1}}};return(p,h)=>{const y=I("v-icon"),g=I("v-btn"),_=I("v-card-title"),b=I("v-divider"),S=I("v-text-field"),B=I("v-textarea"),F=I("v-form"),T=I("v-card-text"),E=I("v-spacer"),x=I("v-card-actions"),C=I("v-card"),D=I("v-dialog");return P(),he(D,{modelValue:o.value,"onUpdate:modelValue":h[6]||(h[6]=U=>o.value=U),persistent:"","max-width":"600px"},{default:u(()=>[i(C,{rounded:"lg"},{default:u(()=>[i(_,{class:"d-flex align-center justify-space-between"},{default:u(()=>[h[8]||(h[8]=v("span",null,"Edit Supplier",-1)),i(g,{onClick:A,variant:"text",size:"small"},{default:u(()=>[i(y,null,{default:u(()=>[...h[7]||(h[7]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(b),i(T,{class:"py-2"},{default:u(()=>[i(F,{ref_key:"form",ref:f,modelValue:l.value,"onUpdate:modelValue":h[5]||(h[5]=U=>l.value=U)},{default:u(()=>[i(S,{modelValue:d.value.identifier,"onUpdate:modelValue":h[0]||(h[0]=U=>d.value.identifier=U),label:"Identifier",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-identifier",class:"mb-1"},null,8,["modelValue"]),i(S,{modelValue:d.value.supplierName,"onUpdate:modelValue":h[1]||(h[1]=U=>d.value.supplierName=U),label:"Supplier Name *",variant:"outlined",density:"compact",rules:[U=>!!U||"Supplier name is required"],"prepend-inner-icon":"mdi-account",class:"mb-1"},null,8,["modelValue","rules"]),i(S,{modelValue:d.value.gstin,"onUpdate:modelValue":h[2]||(h[2]=U=>d.value.gstin=U),label:"GSTIN *",variant:"outlined",density:"compact",rules:[U=>!!U||"GSTIN is required"],"prepend-inner-icon":"mdi-card-account-details",class:"mb-1"},null,8,["modelValue","rules"]),i(B,{modelValue:d.value.address,"onUpdate:modelValue":h[3]||(h[3]=U=>d.value.address=U),label:"Address",variant:"outlined",density:"compact",rows:"2","prepend-inner-icon":"mdi-map-marker",class:"mb-1"},null,8,["modelValue"]),i(S,{modelValue:d.value.contactNumber,"onUpdate:modelValue":h[4]||(h[4]=U=>d.value.contactNumber=U),label:"Contact Number",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),i(b),i(x,{class:"pa-3"},{default:u(()=>[i(E),i(g,{onClick:A},{default:u(()=>[...h[9]||(h[9]=[N("Cancel",-1)])]),_:1}),i(g,{color:"primary",onClick:m,disabled:!l.value||c.value,loading:c.value},{default:u(()=>[...h[10]||(h[10]=[N(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},dGe={__name:"pharmacy-purchase-invoice-form",props:{supplierId:{type:Number,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=Ln(),a=e,r=t,{showSuccess:s,showError:o}=la(),l=ee(()=>n.getters["pharmacyModule/currentPharmacyId"]),c=R(!0),f=R(!1),d=R(!1),A=R(null),m=R([]),p=R({supplierId:null,pharmacyPurchaseInvoiceDate:"",pharmacyPurchaseInvoiceIdentifier:"",status:1,additionalDiscount:0,paymentDueDate:"",paymentDate:""}),h=[{label:"Draft",value:1},{label:"Finalized",value:2}];Ge(()=>a.supplierId,_=>{_&&(p.value.supplierId=_)},{immediate:!0}),An(async()=>{const{data:_}=await pM();m.value=_||[]});const y=()=>{c.value=!1,r("close")},g=async()=>{if(!A.value)return;const{valid:_}=await A.value.validate();if(_){if(!l.value){o("Please select a pharmacy first");return}d.value=!0;try{const b={...p.value,pharmacyId:l.value},{data:S,error:B}=await Sce(b);if(B)throw B;s("Purchase invoice created successfully"),r("saved"),y()}catch(b){console.error("Error creating purchase invoice:",b),o(b.response?.data?.error||b.message||"Failed to create purchase invoice")}finally{d.value=!1}}};return(_,b)=>{const S=I("v-icon"),B=I("v-btn"),F=I("v-card-title"),T=I("v-divider"),E=I("v-select"),x=I("v-col"),C=I("v-text-field"),D=I("v-row"),U=I("v-form"),L=I("v-card-text"),H=I("v-spacer"),oe=I("v-card-actions"),de=I("v-card"),te=I("v-dialog");return P(),he(te,{modelValue:c.value,"onUpdate:modelValue":b[8]||(b[8]=q=>c.value=q),persistent:"","max-width":"700px"},{default:u(()=>[i(de,{rounded:"lg"},{default:u(()=>[i(F,{class:"d-flex align-center justify-space-between"},{default:u(()=>[b[10]||(b[10]=v("span",null,"Create Purchase Invoice",-1)),i(B,{onClick:y,variant:"text",size:"small"},{default:u(()=>[i(S,null,{default:u(()=>[...b[9]||(b[9]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(T),i(L,{class:"py-1"},{default:u(()=>[i(U,{ref_key:"form",ref:A,modelValue:f.value,"onUpdate:modelValue":b[7]||(b[7]=q=>f.value=q)},{default:u(()=>[i(D,{dense:""},{default:u(()=>[i(x,{cols:"12"},{default:u(()=>[i(E,{modelValue:p.value.supplierId,"onUpdate:modelValue":b[0]||(b[0]=q=>p.value.supplierId=q),items:m.value,"item-title":"supplierName","item-value":"id",label:"Supplier *",variant:"outlined",density:"compact",rules:[q=>!!q||"Supplier is required"],"prepend-inner-icon":"mdi-account",disabled:!!e.supplierId},null,8,["modelValue","items","rules","disabled"])]),_:1}),i(x,{cols:"12",md:"6"},{default:u(()=>[i(C,{modelValue:p.value.pharmacyPurchaseInvoiceDate,"onUpdate:modelValue":b[1]||(b[1]=q=>p.value.pharmacyPurchaseInvoiceDate=q),type:"date",label:"Invoice Date *",variant:"outlined",density:"compact",rules:[q=>!!q||"Invoice date is required"],"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue","rules"])]),_:1}),i(x,{cols:"12",md:"6"},{default:u(()=>[i(C,{modelValue:p.value.pharmacyPurchaseInvoiceIdentifier,"onUpdate:modelValue":b[2]||(b[2]=q=>p.value.pharmacyPurchaseInvoiceIdentifier=q),label:"Invoice Identifier *",variant:"outlined",density:"compact",rules:[q=>!!q||"Invoice identifier is required"],"prepend-inner-icon":"mdi-file-document"},null,8,["modelValue","rules"])]),_:1}),i(x,{cols:"12",md:"6"},{default:u(()=>[i(E,{modelValue:p.value.status,"onUpdate:modelValue":b[3]||(b[3]=q=>p.value.status=q),items:h,"item-title":"label","item-value":"value",label:"Status",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-check-circle"},null,8,["modelValue"])]),_:1}),i(x,{cols:"12",md:"6"},{default:u(()=>[i(C,{modelValue:p.value.additionalDiscount,"onUpdate:modelValue":b[4]||(b[4]=q=>p.value.additionalDiscount=q),modelModifiers:{number:!0},label:"Additional Discount ()",variant:"outlined",density:"compact",type:"number",rules:[q=>q==null||q>=0||"Additional discount cannot be negative"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),i(x,{cols:"12",md:"6"},{default:u(()=>[i(C,{modelValue:p.value.paymentDueDate,"onUpdate:modelValue":b[5]||(b[5]=q=>p.value.paymentDueDate=q),type:"date",label:"Payment Due Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-clock"},null,8,["modelValue"])]),_:1}),i(x,{cols:"12",md:"6"},{default:u(()=>[i(C,{modelValue:p.value.paymentDate,"onUpdate:modelValue":b[6]||(b[6]=q=>p.value.paymentDate=q),type:"date",label:"Payment Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-check"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(T),i(oe,{class:"pa-3"},{default:u(()=>[i(H),i(B,{onClick:y},{default:u(()=>[...b[11]||(b[11]=[N("Cancel",-1)])]),_:1}),i(B,{color:"primary",onClick:g,disabled:!f.value||d.value,loading:d.value},{default:u(()=>[...b[12]||(b[12]=[N(" Create Invoice ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},fGe={class:"text-center py-4"},AGe={__name:"pharmacy-edit-purchase-invoice",props:{invoiceId:{type:Number,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=R(!0),l=R(!1),c=R(!1),f=R(!1),d=R(null),A=R({status:1,additionalDiscount:0,paymentDueDate:"",paymentDate:""}),m=[{label:"Draft",value:1},{label:"Finalized",value:2}],p=async()=>{f.value=!0;try{const{data:_,error:b}=await Pg(n.invoiceId);if(b)throw b;A.value={status:_.status||1,additionalDiscount:_.additionalDiscount||0,paymentDueDate:_.paymentDueDate?h(_.paymentDueDate):"",paymentDate:_.paymentDate?h(_.paymentDate):""}}catch(_){console.error("Error loading invoice:",_),s(_.response?.data?.error||_.message||"Failed to load invoice")}finally{f.value=!1}};An(()=>{p()});const h=_=>_?new Date(_*1e3).toISOString().split("T")[0]:"",y=()=>{o.value=!1,a("close")},g=async()=>{if(!d.value)return;const{valid:_}=await d.value.validate();if(_){c.value=!0;try{const{data:b,error:S}=await Dce(n.invoiceId,A.value);if(S)throw S;r("Purchase invoice updated successfully"),a("saved"),y()}catch(b){console.error("Error updating purchase invoice:",b),s(b.response?.data?.error||b.message||"Failed to update purchase invoice")}finally{c.value=!1}}};return(_,b)=>{const S=I("v-icon"),B=I("v-btn"),F=I("v-card-title"),T=I("v-divider"),E=I("v-progress-circular"),x=I("v-card-text"),C=I("v-select"),D=I("v-text-field"),U=I("v-form"),L=I("v-spacer"),H=I("v-card-actions"),oe=I("v-card"),de=I("v-dialog");return P(),he(de,{modelValue:o.value,"onUpdate:modelValue":b[5]||(b[5]=te=>o.value=te),persistent:"","max-width":"600px"},{default:u(()=>[i(oe,{rounded:"lg"},{default:u(()=>[i(F,{class:"d-flex align-center justify-space-between"},{default:u(()=>[b[7]||(b[7]=v("span",null,"Edit Purchase Invoice",-1)),i(B,{onClick:y,variant:"text",size:"small"},{default:u(()=>[i(S,null,{default:u(()=>[...b[6]||(b[6]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(T),f.value?(P(),he(x,{key:0,class:"py-2"},{default:u(()=>[v("div",fGe,[i(E,{indeterminate:"",color:"primary"})])]),_:1})):(P(),he(x,{key:1,class:"py-2"},{default:u(()=>[i(U,{ref_key:"form",ref:d,modelValue:l.value,"onUpdate:modelValue":b[4]||(b[4]=te=>l.value=te)},{default:u(()=>[i(C,{modelValue:A.value.status,"onUpdate:modelValue":b[0]||(b[0]=te=>A.value.status=te),items:m,"item-title":"label","item-value":"value",label:"Status",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-check-circle",class:"mb-1"},null,8,["modelValue"]),i(D,{modelValue:A.value.additionalDiscount,"onUpdate:modelValue":b[1]||(b[1]=te=>A.value.additionalDiscount=te),modelModifiers:{number:!0},label:"Additional Discount ()",variant:"outlined",density:"compact",type:"number",rules:[te=>te==null||te>=0||"Additional discount cannot be negative"],"prepend-inner-icon":"mdi-currency-inr",class:"mb-1"},null,8,["modelValue","rules"]),i(D,{modelValue:A.value.paymentDueDate,"onUpdate:modelValue":b[2]||(b[2]=te=>A.value.paymentDueDate=te),type:"date",label:"Payment Due Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-clock",class:"mb-1"},null,8,["modelValue"]),i(D,{modelValue:A.value.paymentDate,"onUpdate:modelValue":b[3]||(b[3]=te=>A.value.paymentDate=te),type:"date",label:"Payment Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-check"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})),i(T),i(H,{class:"pa-3"},{default:u(()=>[i(L),i(B,{onClick:y},{default:u(()=>[...b[8]||(b[8]=[N("Cancel",-1)])]),_:1}),i(B,{color:"primary",onClick:g,disabled:!l.value||c.value,loading:c.value},{default:u(()=>[...b[9]||(b[9]=[N(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},mGe={class:"text-center py-4"},vGe={class:"text-body-2 mb-0.5"},hGe={class:"text-body-2 mb-0.5"},pGe={class:"text-body-2 mb-0.5"},gGe={class:"text-body-2 mb-0.5"},yGe={class:"text-body-2 mb-0.5"},_Ge={key:0,class:"text-body-2 mb-0.5"},wGe={key:0,class:"text-body-2 mb-0.5"},bGe={key:1,class:"text-body-2 mb-0.5"},xGe={key:2,class:"text-body-2 mb-0.5"},CGe={class:"text-right"},SGe={class:"text-right"},EGe={class:"text-right"},kGe={class:"text-right"},BGe={class:"text-right"},TGe={class:"text-right"},IGe={class:"text-center"},FGe={key:1,class:"text-body-2 text-medium-emphasis py-2 text-center"},PGe={key:0,class:"text-body-2 mb-1"},DGe={class:"text-body-2 mb-1"},UGe={class:"text-body-2 mb-1"},RGe={class:"text-body-2 mb-1"},NGe={key:0,class:"text-body-2 mb-1"},VGe={class:"text-subtitle-1 font-weight-bold"},LGe={class:"text-body-2 text-medium-emphasis mt-2"},MGe={__name:"pharmacy-purchase-invoice-view",props:{invoiceId:{type:Number,required:!0}},emits:["close","updated","add-batch"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=la(),o=R(!0),l=R(!1),c=R(null),f=R(!1),d=async()=>{l.value=!0;try{const{data:b,error:S}=await Pg(n.invoiceId);if(S)throw S;c.value=b}catch(b){console.error("Error loading invoice:",b),s(b.response?.data?.error||b.message||"Failed to load invoice")}finally{l.value=!1}};Ge(()=>n.invoiceId,()=>{d()},{immediate:!0});const A=()=>{o.value=!1,a("close")},m=()=>{a("add-batch",n.invoiceId)},p=()=>{f.value=!0},h=()=>{f.value=!1,d(),a("updated")},y=async b=>{if(confirm("Are you sure you want to remove this batch? This will delete the batch entirely."))try{const{error:S}=await Uce(n.invoiceId,b);if(S)throw S;r("Batch removed successfully"),d(),a("updated")}catch(S){console.error("Error removing batch:",S),s(S.response?.data?.error||S.message||"Failed to remove batch")}},g=b=>b?new Date(b*1e3).toLocaleDateString():"-",_=b=>b==null?"0.00":`${b.toFixed(2)}`;return(b,S)=>{const B=I("v-icon"),F=I("v-btn"),T=I("v-card-title"),E=I("v-divider"),x=I("v-progress-circular"),C=I("v-card-text"),D=I("v-chip"),U=I("v-col"),L=I("v-row"),H=I("v-table"),oe=I("v-spacer"),de=I("v-card-actions"),te=I("v-card"),q=I("v-dialog");return P(),Ae(ze,null,[i(q,{modelValue:o.value,"onUpdate:modelValue":S[0]||(S[0]=ce=>o.value=ce),persistent:"","max-width":"90%",scrollable:""},{default:u(()=>[i(te,{rounded:"lg"},{default:u(()=>[i(T,{class:"d-flex align-center justify-space-between"},{default:u(()=>[S[3]||(S[3]=v("span",null,"Purchase Invoice Details",-1)),i(F,{onClick:A,variant:"text",size:"small"},{default:u(()=>[i(B,null,{default:u(()=>[...S[2]||(S[2]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(E),l.value?(P(),he(C,{key:0,class:"py-2"},{default:u(()=>[v("div",mGe,[i(x,{indeterminate:"",color:"primary"})])]),_:1})):c.value?(P(),he(C,{key:1,class:"py-2"},{default:u(()=>[i(L,{dense:"",class:"mb-2"},{default:u(()=>[i(U,{cols:"12",md:"4"},{default:u(()=>[S[7]||(S[7]=v("div",{class:"text-subtitle-2 mb-1"},"Invoice Information",-1)),v("div",vGe,[S[4]||(S[4]=v("strong",null,"Date:",-1)),N(" "+K(g(c.value.pharmacyPurchaseInvoiceDate)),1)]),v("div",hGe,[S[5]||(S[5]=v("strong",null,"Identifier:",-1)),N(" "+K(c.value.pharmacyPurchaseInvoiceIdentifier),1)]),v("div",pGe,[S[6]||(S[6]=v("strong",null,"Status:",-1)),i(D,{color:c.value.status===2?"success":"warning",size:"small",variant:"tonal",class:"ml-2"},{default:u(()=>[N(K(c.value.statusLabel||"Draft"),1)]),_:1},8,["color"])])]),_:1}),i(U,{cols:"12",md:"4"},{default:u(()=>[S[11]||(S[11]=v("div",{class:"text-subtitle-2 mb-1"},"Supplier Information",-1)),v("div",gGe,[S[8]||(S[8]=v("strong",null,"Name:",-1)),N(" "+K(c.value.supplier?.supplierName||"-"),1)]),v("div",yGe,[S[9]||(S[9]=v("strong",null,"GSTIN:",-1)),N(" "+K(c.value.supplier?.gstin||"-"),1)]),c.value.supplier?.address?(P(),Ae("div",_Ge,[S[10]||(S[10]=v("strong",null,"Address:",-1)),N(" "+K(c.value.supplier.address),1)])):ge("",!0)]),_:1}),i(U,{cols:"12",md:"4"},{default:u(()=>[S[15]||(S[15]=v("div",{class:"text-subtitle-2 mb-1"},"Payment Information",-1)),c.value.paymentDueDate?(P(),Ae("div",wGe,[S[12]||(S[12]=v("strong",null,"Due Date:",-1)),N(" "+K(g(c.value.paymentDueDate)),1)])):ge("",!0),c.value.paymentDate?(P(),Ae("div",bGe,[S[13]||(S[13]=v("strong",null,"Payment Date:",-1)),N(" "+K(g(c.value.paymentDate)),1)])):(P(),Ae("div",xGe,[...S[14]||(S[14]=[v("strong",null,"Payment Status:",-1),N(),v("span",{class:"text-warning"},"Unpaid",-1)])]))]),_:1})]),_:1}),i(E,{class:"my-2"}),S[23]||(S[23]=v("div",{class:"text-subtitle-2 mb-1"},"Medicine Batches",-1)),c.value.batches&&c.value.batches.length>0?(P(),he(H,{key:0,density:"compact"},{default:u(()=>[S[16]||(S[16]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Medicine Name"),v("th",{class:"text-left"},"Batch Number"),v("th",{class:"text-left"},"Expiry Date"),v("th",{class:"text-left"},"Location"),v("th",{class:"text-right"},"MRP (per pack)"),v("th",{class:"text-right"},"Cost (per unit excl. GST)"),v("th",{class:"text-right"},"GST %"),v("th",{class:"text-right"},"Total Packs"),v("th",{class:"text-right"},"Total Units"),v("th",{class:"text-right"},"Total Cost"),v("th",{class:"text-center"},"Actions")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(c.value.batches,ce=>(P(),Ae("tr",{key:ce.id},[v("td",null,K(ce.medicine?.productName||"-"),1),v("td",null,K(ce.batchNumber),1),v("td",null,K(g(ce.expiryDate)),1),v("td",null,K(ce.location||"-"),1),v("td",CGe,K(_(ce.mrp)),1),v("td",SGe,K(_(ce.costPerUnitExclGst||0)),1),v("td",EGe,K(ce.gstPercentage||0)+"%",1),v("td",kGe,K(ce.totalPacks||0),1),v("td",BGe,K(ce.totalUnits||0),1),v("td",TGe,K(_(ce.totalCost||0)),1),v("td",IGe,[i(F,{size:"x-small",variant:"text",icon:"mdi-delete",color:"error",onClick:le=>y(ce.id)},null,8,["onClick"])])]))),128))])]),_:1})):(P(),Ae("div",FGe," No batches added yet ")),i(E,{class:"mb-3 mt-2"}),c.value.totals?(P(),he(L,{key:2,"no-gutters":""},{default:u(()=>[i(U,{cols:"8",class:"text-right"},{default:u(()=>[S[17]||(S[17]=v("div",{class:"text-body-2 mb-1"},"Base Cost Total:",-1)),S[18]||(S[18]=v("div",{class:"text-body-2 mb-1"},"GST:",-1)),S[19]||(S[19]=v("div",{class:"text-body-2 mb-1"},"Subtotal with GST:",-1)),c.value.totals.additionalDiscount>0?(P(),Ae("div",PGe,"Additional Discount:")):ge("",!0),S[20]||(S[20]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),i(U,{cols:"4",class:"text-right"},{default:u(()=>[v("div",DGe,K(_(c.value.totals.subtotal)),1),v("div",UGe,K(_(c.value.totals.totalGST)),1),v("div",RGe,K(_(c.value.totals.subtotalWithGST)),1),c.value.totals.additionalDiscount>0?(P(),Ae("div",NGe,"-"+K(_(c.value.totals.additionalDiscount)),1)):ge("",!0),v("div",VGe,K(_(c.value.totals.netAmount)),1)]),_:1})]),_:1})):ge("",!0),v("div",LGe,[S[21]||(S[21]=v("strong",null,"Medicine Count:",-1)),N(" "+K(c.value.medicineCount||0)+" | ",1),S[22]||(S[22]=v("strong",null,"Batch Count:",-1)),N(" "+K(c.value.batchCount||0),1)])]),_:1})):ge("",!0),i(E),i(de,{class:"pa-3"},{default:u(()=>[i(F,{color:"primary","prepend-icon":"mdi-plus",onClick:m},{default:u(()=>[...S[24]||(S[24]=[N(" Add Medicine Batch ",-1)])]),_:1}),i(oe),i(F,{color:"primary",variant:"outlined","prepend-icon":"mdi-pencil",onClick:p},{default:u(()=>[...S[25]||(S[25]=[N(" Edit Invoice ",-1)])]),_:1}),i(F,{onClick:A},{default:u(()=>[...S[26]||(S[26]=[N("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),f.value?(P(),he(AGe,{key:0,"invoice-id":e.invoiceId,onClose:S[1]||(S[1]=ce=>f.value=!1),onSaved:h},null,8,["invoice-id"])):ge("",!0)],64)}}},OGe={class:"pa-3 text-center text-medium-emphasis"},HGe={key:1},$Ge={class:"text-caption text-medium-emphasis"},QGe={class:"font-weight-medium"},GGe={class:"text-caption text-medium-emphasis"},zGe={key:0,class:"mb-0.5"},WGe={key:1,class:"mb-0.5"},KGe={key:2},jGe={__name:"pharmacy-add-medicine-batch",props:{purchaseInvoiceId:{type:Number,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=Ln(),a=e,r=t,{showSuccess:s,showError:o}=la(),l=ee(()=>n.getters["pharmacyModule/currentPharmacyId"]),c=R(!0),f=R(!1),d=R(!1),A=R(!1),m=R(null),p=R(null),h=R(null),y=R([]),g=R(""),_=R({batchNumber:"",expiryDate:"",packType:"",unitsPerPack:1,mrp:null,discountPercentage:0,saleQuantityPacks:0,freeQuantityPacks:0,cgstPercentage:0,sgstPercentage:0,location:""}),b=R("0.00"),S=ee(()=>Number(b.value??0)||0),B=()=>{b.value=(Number(b.value??0)||0).toFixed(2)},F=ee(()=>{const q=Number(_.value.cgstPercentage??0)||0,ce=Number(_.value.sgstPercentage??0)||0;return q+ce}),T=ee(()=>{const q=S.value||0,ce=Number(F.value??0)||0;return q*(1+ce/100)}),E=ee(()=>(Number(T.value??0)||0).toFixed(2)),x=ee(()=>{const q=_.value.saleQuantityPacks||0,ce=_.value.freeQuantityPacks||0;return q+ce}),C=ee(()=>x.value*(_.value.unitsPerPack||1)),D=ee(()=>{const q=_.value.saleQuantityPacks||0,ce=_.value.freeQuantityPacks||0,le=S.value||0,Z=q+ce;return Z===0?null:le*q/Z});An(async()=>{B(),await U(),await L()});const U=async()=>{if(!l.value){o("Please select a pharmacy first");return}A.value=!0;try{const{data:q,error:ce}=await Bw(l.value);if(ce){console.error("Error loading pharmacy medicines:",ce),o("Failed to load pharmacy medicines");return}y.value=(q||[]).map(le=>({id:le.id,productName:le.productName,marketer:le.marketer,productForm:le.productForm,group:le.group,hsnCode:le.hsnCode,displayName:le.productName}))}catch(q){console.error("Error loading pharmacy medicines:",q),o("Failed to load pharmacy medicines")}finally{A.value=!1}},L=async()=>{try{const{data:q}=await Pg(a.purchaseInvoiceId);q&&(g.value=`${q.pharmacyPurchaseInvoiceIdentifier} (${oe(q.pharmacyPurchaseInvoiceDate)})`)}catch(q){console.error("Error loading invoice info:",q)}},H=q=>{h.value=y.value.find(ce=>ce.id===q)},oe=q=>q?new Date(q*1e3).toLocaleDateString():"-",de=()=>{c.value=!1,r("close")},te=async()=>{if(!m.value)return;const{valid:q}=await m.value.validate();if(q){if(!p.value){o("Please select a medicine");return}if(!l.value){o("Please select a pharmacy first");return}d.value=!0;try{const ce={medicineId:p.value,pharmacyId:l.value,purchaseInvoiceId:a.purchaseInvoiceId,..._.value,priceToRetailer:Number(T.value??0)||0},{data:le,error:Z}=await vM(ce);if(Z)throw Z;s("Batch added successfully"),r("saved"),de()}catch(ce){console.error("Error creating batch:",ce),o(ce.response?.data?.error||ce.message||"Failed to create batch")}finally{d.value=!1}}};return(q,ce)=>{const le=I("v-icon"),Z=I("v-btn"),ne=I("v-card-title"),G=I("v-divider"),W=I("v-text-field"),Q=I("v-list-item-title"),O=I("v-list-item-subtitle"),ae=I("v-list-item"),j=I("v-autocomplete"),J=I("v-col"),ie=I("v-select"),X=I("v-row"),fe=I("v-form"),M=I("v-card-text"),z=I("v-spacer"),se=I("v-card-actions"),be=I("v-card"),Fe=I("v-dialog");return P(),he(Fe,{modelValue:c.value,"onUpdate:modelValue":ce[14]||(ce[14]=ye=>c.value=ye),persistent:"","max-width":"800px",scrollable:""},{default:u(()=>[i(be,{rounded:"lg"},{default:u(()=>[i(ne,{class:"d-flex align-center justify-space-between"},{default:u(()=>[ce[16]||(ce[16]=v("span",null,"Add Medicine Batch to Invoice",-1)),i(Z,{onClick:de,variant:"text",size:"small"},{default:u(()=>[i(le,null,{default:u(()=>[...ce[15]||(ce[15]=[N("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),i(G),i(M,{class:"py-1"},{default:u(()=>[i(fe,{ref_key:"form",ref:m,modelValue:f.value,"onUpdate:modelValue":ce[13]||(ce[13]=ye=>f.value=ye)},{default:u(()=>[e.purchaseInvoiceId?(P(),he(W,{key:0,"model-value":g.value,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document",class:"mb-1"},null,8,["model-value"])):ge("",!0),i(j,{modelValue:p.value,"onUpdate:modelValue":[ce[0]||(ce[0]=ye=>p.value=ye),H],items:y.value,"item-value":"id","item-title":"productName",label:"Select Medicine *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Medicine selection is required"],"prepend-inner-icon":"mdi-pill",loading:A.value,class:"mb-1"},{selection:u(({item:ye})=>[N(K(ye.raw.productName),1)]),item:u(({props:ye,item:Qe})=>[i(ae,fl(Al({...ye,title:void 0})),{prepend:u(()=>[i(le,null,{default:u(()=>[...ce[17]||(ce[17]=[N("mdi-pill",-1)])]),_:1})]),default:u(()=>[i(Q,{class:"text-wrap"},{default:u(()=>[N(K(Qe.raw.productName),1)]),_:2},1024),i(O,{class:"text-wrap"},{default:u(()=>[N(K([Qe.raw.marketer,Qe.raw.group,Qe.raw.productForm].filter(Boolean).join(" | ")||"No additional details"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[v("div",OGe,K(A.value?"Loading...":"No medicines found"),1)]),_:1},8,["modelValue","items","rules","loading"]),p.value&&h.value?(P(),Ae("div",HGe,[i(G,{class:"my-1"}),ce[22]||(ce[22]=v("div",{class:"text-caption font-weight-medium mb-1"},"Batch Details",-1)),i(X,{dense:""},{default:u(()=>[i(J,{cols:"12",md:"6"},{default:u(()=>[i(W,{modelValue:_.value.batchNumber,"onUpdate:modelValue":ce[1]||(ce[1]=ye=>_.value.batchNumber=ye),label:"Batch Number *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(W,{modelValue:_.value.expiryDate,"onUpdate:modelValue":ce[2]||(ce[2]=ye=>_.value.expiryDate=ye),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Expiry date is required"],"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(ie,{modelValue:_.value.packType,"onUpdate:modelValue":ce[3]||(ce[3]=ye=>_.value.packType=ye),items:Oe(Gw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(W,{modelValue:_.value.unitsPerPack,"onUpdate:modelValue":ce[4]||(ce[4]=ye=>_.value.unitsPerPack=ye),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(W,{modelValue:_.value.mrp,"onUpdate:modelValue":ce[5]||(ce[5]=ye=>_.value.mrp=ye),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(W,{modelValue:_.value.discountPercentage,"onUpdate:modelValue":ce[6]||(ce[6]=ye=>_.value.discountPercentage=ye),modelModifiers:{number:!0},label:"Discount to Patients %",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye==null||ye>=0&&ye<=100||"Discount must be between 0 and 100"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(W,{modelValue:_.value.saleQuantityPacks,"onUpdate:modelValue":ce[7]||(ce[7]=ye=>_.value.saleQuantityPacks=ye),modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0||"Sale quantity must be non-negative"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(W,{modelValue:_.value.freeQuantityPacks,"onUpdate:modelValue":ce[8]||(ce[8]=ye=>_.value.freeQuantityPacks=ye),modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0||"Free quantity must be non-negative"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(W,{modelValue:_.value.cgstPercentage,"onUpdate:modelValue":ce[9]||(ce[9]=ye=>_.value.cgstPercentage=ye),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null||"CGST percentage is required"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(W,{modelValue:_.value.sgstPercentage,"onUpdate:modelValue":ce[10]||(ce[10]=ye=>_.value.sgstPercentage=ye),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null||"SGST percentage is required"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[i(W,{modelValue:b.value,"onUpdate:modelValue":ce[11]||(ce[11]=ye=>b.value=ye),label:"Price to Retailer (Excl. GST) () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:[ye=>Number(ye)>=0||"Price to retailer (excl. GST) must be non-negative"],"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:B},null,8,["modelValue","rules"])]),_:1}),i(J,{cols:"12",md:"6"},{default:u(()=>[v("div",$Ge,[v("div",QGe,"Price to Retailer (Incl. GST): "+K(E.value),1),ce[18]||(ce[18]=v("div",null,"Computed using CGST + SGST",-1))])]),_:1}),i(J,{cols:"12"},{default:u(()=>[i(W,{modelValue:_.value.location,"onUpdate:modelValue":ce[12]||(ce[12]=ye=>_.value.location=ye),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),i(J,{cols:"12",class:"pt-1"},{default:u(()=>[i(G,{class:"mb-1"}),v("div",GGe,[x.value>0?(P(),Ae("div",zGe,[ce[19]||(ce[19]=v("strong",null,"Total Quantity:",-1)),N(" "+K(x.value)+" packs ("+K(C.value)+" units) ",1)])):ge("",!0),D.value!==null?(P(),Ae("div",WGe,[ce[20]||(ce[20]=v("strong",null,"Cost per Pack (Excl. GST):",-1)),N(" "+K(D.value.toFixed(2)),1)])):ge("",!0),F.value!==null?(P(),Ae("div",KGe,[ce[21]||(ce[21]=v("strong",null,"GST %:",-1)),N(" "+K(F.value.toFixed(2))+"% ",1)])):ge("",!0)])]),_:1})]),_:1})])):ge("",!0)]),_:1},8,["modelValue"])]),_:1}),i(G),i(se,{class:"pa-3"},{default:u(()=>[i(z),i(Z,{onClick:de},{default:u(()=>[...ce[23]||(ce[23]=[N("Cancel",-1)])]),_:1}),i(Z,{color:"primary",onClick:te,disabled:!f.value||!p.value||d.value,loading:d.value},{default:u(()=>[...ce[24]||(ce[24]=[N(" Add Batch ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},qGe={class:"d-flex align-center"},YGe={class:"pr-3 d-flex"},XGe={class:"scrollable-content"},JGe={class:"text-center"},ZGe={class:"text-center"},eze={class:"text-body-2 text-medium-emphasis mb-4"},tze={class:"text-center"},nze={class:"d-flex align-center justify-space-between w-100"},aze={class:"flex-grow-1"},rze={class:"d-flex align-center"},sze={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},oze={class:"d-flex align-center"},ize={key:0,class:"text-body-2 mb-2 px-0"},lze={class:"d-flex align-center flex-wrap text-left"},uze={key:0,class:"text-medium-emphasis mr-2"},cze={key:1,class:"text-medium-emphasis mr-2"},dze={key:2,class:"text-medium-emphasis"},fze={key:1},Aze={class:"text-right"},mze={class:"text-right"},vze={class:"text-right"},hze={class:"text-center"},pze={key:2,class:"text-body-2 text-medium-emphasis text-center py-2 px-4"},gze={__name:"pharmacy-purchase",setup(e){const t=Ln(),n=ee(()=>t.getters["pharmacyModule/currentPharmacyId"]),a=R(0),r=R(null),s=R(!1),o=R(null),l=R([]),c=R(""),f=R(""),d=R(!1),A=R(!1),m=R(null),p=R(!1),h=R(null),y=R(null),g=R(!1),_=R(null),b=ee(()=>{let le=l.value;if(c.value&&c.value.trim()!==""){const Z=c.value.toLowerCase();le=le.filter(ne=>ne.supplierName&&ne.supplierName.toLowerCase().includes(Z))}if(f.value&&f.value.trim()!==""){const Z=f.value.toLowerCase();le=le.map(ne=>{const G=(ne.invoices||[]).filter(W=>W.pharmacyPurchaseInvoiceIdentifier&&W.pharmacyPurchaseInvoiceIdentifier.toLowerCase().includes(Z));return{...ne,invoices:G}}).filter(ne=>ne.invoices.length>0)}return le}),S=async()=>{if(!n.value){o.value="Please select a pharmacy first";return}s.value=!0,o.value=null;try{const{data:le,error:Z}=await pM();if(Z)throw Z;const ne=await Promise.all((le||[]).map(async G=>{const{data:W}=await Cce(n.value,{supplierId:G.id});return{...G,invoices:W||[]}}));l.value=ne}catch(le){console.error("Error loading suppliers:",le),o.value=le.response?.data?.error||le.message||"Failed to load suppliers"}finally{s.value=!1}},B=()=>{m.value=null,d.value=!0},F=()=>{d.value=!1,m.value=null},T=le=>{m.value=le,A.value=!0},E=()=>{A.value=!1,m.value=null},x=()=>{F(),E(),S()},C=le=>{h.value=le,p.value=!0},D=()=>{p.value=!1,h.value=null},U=()=>{D(),S()},L=le=>{y.value=le},H=()=>{y.value=null},oe=le=>{_.value=le,g.value=!0},de=()=>{g.value=!1,_.value=null},te=()=>{de(),y.value&&(H(),L(_.value)),S()},q=le=>le?new Date(le*1e3).toLocaleDateString():"-",ce=le=>le==null?"0.00":`${le.toFixed(2)}`;return Ge(n,(le,Z)=>{le&&le!==Z&&S()}),An(()=>{S()}),(le,Z)=>{const ne=I("v-alert"),G=I("v-tab"),W=I("v-tabs"),Q=I("v-btn"),O=I("v-icon"),ae=I("v-tooltip"),j=I("v-card"),J=I("v-col"),ie=I("v-row"),X=I("v-progress-circular"),fe=I("v-text-field"),M=I("v-card-title"),z=I("v-divider"),se=I("v-chip"),be=I("v-table"),Fe=I("v-card-text"),ye=I("v-lazy"),Qe=I("v-window-item"),_e=I("v-window"),Se=I("v-main");return P(),he(Se,null,{default:u(()=>[r.value?(P(),he(ne,{key:0,type:"error",dismissible:"","onClick:close":Z[0]||(Z[0]=Ee=>r.value=null),class:"ma-3"},{default:u(()=>[N(K(r.value),1)]),_:1})):ge("",!0),i(ie,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[i(J,{cols:"12"},{default:u(()=>[i(j,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[v("div",qGe,[i(W,{modelValue:a.value,"onUpdate:modelValue":Z[1]||(Z[1]=Ee=>a.value=Ee),color:"primary","align-tabs":"start"},{default:u(()=>[i(G,{value:0},{default:u(()=>[...Z[5]||(Z[5]=[N("Purchase",-1)])]),_:1})]),_:1},8,["modelValue"])]),v("div",YGe,[i(En,{permission:"pharmacy.purchase.create"},{default:u(()=>[i(Q,{color:"primary","prepend-icon":"mdi-plus",onClick:B},{default:u(()=>[...Z[6]||(Z[6]=[N(" Add Supplier ",-1)])]),_:1})]),_:1}),i(ae,{text:"Refresh"},{activator:u(({props:Ee})=>[i(Q,Ie({rounded:"x-small",onClick:S,size:"small"},Ee,{loading:s.value,class:"btn-hover-enhanced ml-1"}),{default:u(()=>[i(O,null,{default:u(()=>[...Z[7]||(Z[7]=[N("mdi-refresh",-1)])]),_:1})]),_:1},16,["loading"])]),_:1})])]),_:1})]),_:1})]),_:1}),i(_e,{modelValue:a.value,"onUpdate:modelValue":Z[4]||(Z[4]=Ee=>a.value=Ee),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[i(Qe,{value:0,style:{height:"100%"}},{default:u(()=>[v("div",XGe,[s.value?(P(),he(ie,{key:0,"no-gutters":""},{default:u(()=>[i(J,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",JGe,[i(X,{indeterminate:"",color:"primary",size:"64"}),Z[8]||(Z[8]=v("div",{class:"mt-4 text-subtitle-1"},"Loading suppliers...",-1))])]),_:1})]),_:1})):o.value?(P(),he(ie,{key:1,"no-gutters":""},{default:u(()=>[i(J,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",ZGe,[i(O,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Z[9]||(Z[9]=[N("mdi-alert-circle",-1)])]),_:1}),Z[11]||(Z[11]=v("div",{class:"text-h6 mb-2"},"Failed to Load Suppliers",-1)),v("div",eze,K(o.value),1),i(Q,{color:"primary",onClick:S,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Z[10]||(Z[10]=[N(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):b.value.length===0?(P(),he(ie,{key:2,"no-gutters":""},{default:u(()=>[i(J,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",tze,[i(O,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...Z[12]||(Z[12]=[N("mdi-cart-off",-1)])]),_:1}),Z[14]||(Z[14]=v("div",{class:"text-h6 mb-2"},"No Suppliers",-1)),Z[15]||(Z[15]=v("div",{class:"text-body-2 text-medium-emphasis mb-4"},"Add suppliers to start managing purchase invoices",-1)),i(En,{permission:"pharmacy.purchase.create"},{default:u(()=>[i(Q,{color:"primary",onClick:B,"prepend-icon":"mdi-plus"},{default:u(()=>[...Z[13]||(Z[13]=[N(" Add Supplier ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1})):(P(),Ae(ze,{key:3},[i(ie,{"no-gutters":"",class:"mb-2"},{default:u(()=>[i(J,{cols:"12",class:"d-flex justify-center align-center flex-wrap gap-2"},{default:u(()=>[i(fe,{modelValue:c.value,"onUpdate:modelValue":Z[2]||(Z[2]=Ee=>c.value=Ee),placeholder:"Filter by supplier name...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-magnify",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"]),i(fe,{modelValue:f.value,"onUpdate:modelValue":Z[3]||(Z[3]=Ee=>f.value=Ee),placeholder:"Filter by invoice ID...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-file-document",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),(P(!0),Ae(ze,null,Jt(b.value,Ee=>(P(),he(ye,{key:Ee.id,options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[i(j,{style:{textAlign:"left"},density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[i(M,{class:"pb-0 pt-2"},{default:u(()=>[v("div",nze,[v("div",aze,[v("div",rze,[v("div",sze,K(Ee.supplierName||"Unknown Supplier"),1),i(En,{permission:"pharmacy.purchase.create",tag:"span"},{default:u(()=>[i(ae,{text:"Edit Supplier"},{activator:u(({props:Ue})=>[i(O,Ie({size:"x-small"},{ref_for:!0},Ue,{class:"edit-icon flex-shrink-0 ml-1",onClick:je=>T(Ee),tabindex:"-1"}),{default:u(()=>[...Z[16]||(Z[16]=[N(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)])]),v("div",oze,[i(En,{permission:"pharmacy.purchase.create"},{default:u(()=>[i(Q,{color:"primary",variant:"outlined","prepend-icon":"mdi-file-document-plus",size:"small",onClick:Ue=>C(Ee.id)},{default:u(()=>[...Z[17]||(Z[17]=[N(" Add Invoice ",-1)])]),_:1},8,["onClick"])]),_:2},1024)])])]),_:2},1024),i(Fe,{class:lt({"pt-1 pb-1":Ee.invoices&&Ee.invoices.length>0,"pt-1 pb-2":!Ee.invoices||Ee.invoices.length===0})},{default:u(()=>[Ee.gstin||Ee.address||Ee.contactNumber?(P(),Ae("div",ize,[v("div",lze,[Ee.gstin&&Ee.gstin.trim()!==""?(P(),Ae("span",uze," GSTIN: "+K(Ee.gstin),1)):ge("",!0),Ee.address?(P(),Ae("span",cze," Address: "+K(Ee.address),1)):ge("",!0),Ee.contactNumber?(P(),Ae("span",dze," Contact No.: "+K(Ee.contactNumber),1)):ge("",!0)])])):ge("",!0),Ee.invoices&&Ee.invoices.length>0?(P(),Ae("div",fze,[Ee.address||Ee.contactNumber?(P(),he(z,{key:0,class:"mb-2"})):ge("",!0),i(be,{density:"compact",class:"batch-table compact-table"},{default:u(()=>[Z[18]||(Z[18]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Date"),v("th",{class:"text-left"},"Invoice ID"),v("th",{class:"text-left"},"Status"),v("th",{class:"text-right"},"Total Amount"),v("th",{class:"text-right"},"Batches"),v("th",{class:"text-right"},"Medicines"),v("th",{class:"text-center"},"Actions")])],-1)),v("tbody",null,[(P(!0),Ae(ze,null,Jt(Ee.invoices,Ue=>(P(),Ae("tr",{key:Ue.id},[v("td",null,K(q(Ue.pharmacyPurchaseInvoiceDate)),1),v("td",null,K(Ue.pharmacyPurchaseInvoiceIdentifier),1),v("td",null,[i(se,{color:Ue.status===2?"success":"warning",size:"small",variant:"tonal"},{default:u(()=>[N(K(Ue.statusLabel||"Draft"),1)]),_:2},1032,["color"])]),v("td",Aze,K(ce(Ue.totalAmount||0)),1),v("td",mze,K(Ue.batchCount||0),1),v("td",vze,K(Ue.medicineCount||0),1),v("td",hze,[i(En,{feature:"pharmacy.purchase",tag:"span"},{default:u(()=>[i(ae,{text:"View Invoice"},{activator:u(({props:je})=>[i(Q,Ie({icon:"mdi-eye",size:"small",variant:"text",onClick:at=>L(Ue.id),class:"mr-1"},{ref_for:!0},je),null,16,["onClick"])]),_:2},1024)]),_:2},1024),i(En,{permission:"pharmacy.purchase.create",tag:"span"},{default:u(()=>[i(ae,{text:"Add Medicine Batch"},{activator:u(({props:je})=>[i(Q,Ie({icon:"mdi-plus",size:"small",variant:"text",onClick:at=>oe(Ue.id)},{ref_for:!0},je),null,16,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128))])]),_:2},1024)])):(P(),Ae("div",pze,' No purchase invoices yet. Click on "Add Invoice" to create one. '))]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024))),128))],64))])]),_:1})]),_:1},8,["modelValue"]),d.value?(P(),he(uGe,{key:1,supplier:m.value,onClose:F,onSaved:x},null,8,["supplier"])):ge("",!0),A.value?(P(),he(cGe,{key:2,supplier:m.value,onClose:E,onSaved:x},null,8,["supplier"])):ge("",!0),p.value?(P(),he(dGe,{key:3,"supplier-id":h.value,onClose:D,onSaved:U},null,8,["supplier-id"])):ge("",!0),y.value?(P(),he(MGe,{key:4,"invoice-id":y.value,onClose:H,onUpdated:U,onAddBatch:oe},null,8,["invoice-id"])):ge("",!0),g.value?(P(),he(jGe,{key:5,"purchase-invoice-id":_.value,onClose:de,onSaved:te},null,8,["purchase-invoice-id"])):ge("",!0)]),_:1})}}},yze=en(gze,[["__scopeId","data-v-f49a5380"]]),_ze={class:"mb-4"},wze={class:"mb-4"},bze={key:0,class:"filter-section mb-3"},xze={class:"filter-section-label mb-2"},Cze={key:0,class:"text-caption text-medium-emphasis mt-2"},Sze={key:1,class:"text-caption text-medium-emphasis mt-2"},Eze={class:"d-flex justify-center mt-2 mb-2"},kze={class:"d-flex justify-center mt-2"},Bze={key:1,class:"mt-4"},Tze={class:"text-caption text-medium-emphasis"},Ize={key:0},Fze={key:1},Pze={key:2},Dze={__name:"PharmacyReportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-report","clear-filters"],setup(e,{emit:t}){const n=Ln(),a=e,r=t,s=R({reportType:"",startDate:"",endDate:"",pharmacyId:null,...a.filters}),o=R([]),l=ee(()=>n.getters["pharmacyModule/currentPharmacyId"]);An(async()=>{const{data:y}=await eT();o.value=y||[],!s.value.pharmacyId&&l.value&&(s.value.pharmacyId=l.value,d())}),Ge(l,y=>{y&&!s.value.pharmacyId&&(s.value.pharmacyId=y,d())});const c=R([{label:"Medicine Wise Sales Report",value:"sales-report"},{label:"Billing Report",value:"billing-report"},{label:"Payment Report",value:"payment-report"},{label:"Inventory Transactions Report",value:"inventory-report"},{label:"Expired Inventory Report",value:"expired-inventory-report"},{label:"Purchase Bill Report",value:"purchase-bill-report"},{label:"HSN-wise GST Report",value:"hsn-wise-gst-report"},{label:"Rate-wise GST Report",value:"rate-wise-gst-report"},{label:"Inventory Snapshot Report",value:"inventory-snapshot-report"}]),f=ee(()=>!s.value.reportType||!s.value.pharmacyId?!1:s.value.reportType==="expired-inventory-report"||s.value.reportType==="inventory-snapshot-report"?!0:!!(s.value.startDate&&s.value.endDate));Ge(()=>a.filters,y=>{s.value={...s.value,...y}},{deep:!0});const d=()=>{r("filter-change",{...s.value})},A=()=>{f.value&&r("start-report",{...s.value})},m=()=>{s.value={reportType:"",startDate:"",endDate:"",pharmacyId:l.value||null},r("clear-filters"),d()},p=y=>{const g=c.value.find(_=>_.value===y);return g?g.label:y},h=y=>y?new Date(y).toLocaleDateString():"";return(y,g)=>{const _=I("v-card-text"),b=I("v-card"),S=I("v-label"),B=I("v-icon"),F=I("v-select"),T=I("v-text-field"),E=I("v-col"),x=I("v-row"),C=I("v-divider"),D=I("v-btn"),U=I("v-card-title"),L=I("v-form");return P(),he(b,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(_,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...g[6]||(g[6]=[v("strong",null,"Report Configuration",-1)])]),_:1})]),_:1}),i(_,{class:"pa-4"},{default:u(()=>[i(L,{onSubmit:gn(A,["prevent"])},{default:u(()=>[v("div",_ze,[i(S,{class:"text-subtitle-2 font-weight-medium mb-2"},{default:u(()=>[...g[7]||(g[7]=[N("Pharmacy",-1)])]),_:1}),i(F,{modelValue:s.value.pharmacyId,"onUpdate:modelValue":[g[0]||(g[0]=H=>s.value.pharmacyId=H),d],items:o.value,"item-title":"pharmacyName","item-value":"id",variant:"outlined",density:"comfortable",loading:o.value.length===0},{"prepend-inner":u(()=>[i(B,{color:"primary"},{default:u(()=>[...g[8]||(g[8]=[N("mdi-pill",-1)])]),_:1})]),_:1},8,["modelValue","items","loading"])]),v("div",wze,[i(S,{class:"text-subtitle-2 font-weight-medium mb-2"},{default:u(()=>[...g[9]||(g[9]=[N("Report Type",-1)])]),_:1}),i(F,{modelValue:s.value.reportType,"onUpdate:modelValue":[g[1]||(g[1]=H=>s.value.reportType=H),d],items:c.value,"item-title":"label","item-value":"value",variant:"outlined",density:"comfortable"},{"prepend-inner":u(()=>[i(B,{color:"primary"},{default:u(()=>[...g[10]||(g[10]=[N("mdi-chart-line",-1)])]),_:1})]),_:1},8,["modelValue","items"])]),s.value.reportType?(P(),Ae("div",bze,[v("div",xze,[s.value.reportType==="expired-inventory-report"||s.value.reportType==="inventory-snapshot-report"?(P(),Ae(ze,{key:0},[N(" Snapshot Report (Current Date) ")],64)):(P(),Ae(ze,{key:1},[N(" Select Date Range ")],64))]),i(x,{dense:""},{default:u(()=>[i(E,{cols:"6"},{default:u(()=>[i(T,{modelValue:s.value.startDate,"onUpdate:modelValue":[g[2]||(g[2]=H=>s.value.startDate=H),d],type:"date",label:"Start Date",variant:"outlined",density:"compact",class:"filter-input date-input",disabled:s.value.reportType==="expired-inventory-report"||s.value.reportType==="inventory-snapshot-report",onClick:g[3]||(g[3]=H=>H.target.showPicker&&H.target.showPicker())},null,8,["modelValue","disabled"])]),_:1}),i(E,{cols:"6"},{default:u(()=>[i(T,{modelValue:s.value.endDate,"onUpdate:modelValue":[g[4]||(g[4]=H=>s.value.endDate=H),d],type:"date",label:"End Date",variant:"outlined",density:"compact",class:"filter-input date-input",disabled:s.value.reportType==="expired-inventory-report"||s.value.reportType==="inventory-snapshot-report",onClick:g[5]||(g[5]=H=>H.target.showPicker&&H.target.showPicker())},null,8,["modelValue","disabled"])]),_:1})]),_:1}),s.value.reportType==="expired-inventory-report"?(P(),Ae("div",Cze," This report shows expired/expiring batches as of today (IST). Date range selection is not applicable. ")):ge("",!0),s.value.reportType==="inventory-snapshot-report"?(P(),Ae("div",Sze," This report shows current inventory state as of today. Date range selection is not applicable. ")):ge("",!0)])):ge("",!0),i(C,{class:"my-4"}),v("div",Eze,[i(D,{type:"submit",color:"primary",loading:e.loading,disabled:!f.value,"prepend-icon":"mdi-chart-line",class:"btn-hover-enhanced"},{default:u(()=>[...g[11]||(g[11]=[N(" Generate Report ",-1)])]),_:1},8,["loading","disabled"])]),v("div",kze,[i(D,{variant:"outlined",color:"secondary",onClick:m,"prepend-icon":"mdi-filter-remove",class:"btn-hover-enhanced"},{default:u(()=>[...g[12]||(g[12]=[N(" Clear All Filters ",-1)])]),_:1})]),s.value.reportType?(P(),Ae("div",Bze,[i(b,{variant:"outlined",class:"pa-3"},{default:u(()=>[i(U,{class:"text-subtitle-2 pa-0"},{default:u(()=>[...g[13]||(g[13]=[N("Report Preview",-1)])]),_:1}),i(_,{class:"pa-0 pt-2"},{default:u(()=>[v("div",Tze,[v("div",null,[g[14]||(g[14]=v("strong",null,"Type:",-1)),N(" "+K(p(s.value.reportType)),1)]),s.value.reportType==="expired-inventory-report"?(P(),Ae("div",Ize,[...g[15]||(g[15]=[v("strong",null,"Report Type:",-1),N(" Snapshot (Current Date - IST) ",-1)])])):ge("",!0),s.value.reportType==="inventory-snapshot-report"?(P(),Ae("div",Fze,[...g[16]||(g[16]=[v("strong",null,"Report Type:",-1),N(" Snapshot (Current Date) ",-1)])])):s.value.startDate&&s.value.endDate?(P(),Ae("div",Pze,[g[17]||(g[17]=v("strong",null,"Date Range:",-1)),N(" "+K(h(s.value.startDate))+" - "+K(h(s.value.endDate)),1)])):ge("",!0)])]),_:1})]),_:1})])):ge("",!0)]),_:1})]),_:1})]),_:1})}}},Uze=en(Dze,[["__scopeId","data-v-bd64e00a"]]),Rze={class:"scrollable-content"},Nze={class:"scrollable-content"},Vze={key:1},Lze={class:"text-center"},Mze={class:"mt-4 text-subtitle-1"},Oze={key:0,class:"mt-4"},Hze={class:"mb-2"},$ze={class:"mb-2"},Qze={key:0,class:"mb-2"},Gze={key:1},zze={class:"text-center"},Wze={__name:"pharmacy-reports",setup(e){const t=Ln(),n=R(!1),a=R(""),r=R(!1),s=R(""),o=R(!1),l=R(0),c=R(""),f=R([]),d=R(null),A=R(!1),m=R({reportType:"",startDate:"",endDate:"",pharmacyId:null}),p=ee(()=>t.getters["pharmacyModule/currentPharmacyId"]);An(()=>{p.value&&(m.value.pharmacyId=p.value)});const h=R([{title:"Date",key:"date",sortable:!0},{title:"Report Type",key:"reportType",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0}]),y=X=>{m.value={...m.value,...X}},g=()=>{m.value={reportType:"",startDate:"",endDate:"",pharmacyId:p.value||null}},_=async X=>{try{if(o.value=!0,l.value=0,c.value="Preparing report...",d.value=null,A.value=!1,console.log("Starting pharmacy report generation with filters:",X),X.reportType!=="expired-inventory-report"&&X.reportType!=="inventory-snapshot-report"){if(!X.startDate||!X.endDate)throw new Error("Please select both start and end dates for the report");const fe=new Date(X.startDate),M=new Date(X.endDate);if(fe>M)throw new Error("Start date must be less than or equal to end date")}if(X.reportType==="sales-report")await b(X);else if(X.reportType==="billing-report")await F(X);else if(X.reportType==="payment-report")await x(X);else if(X.reportType==="inventory-report")await U(X);else if(X.reportType==="expired-inventory-report")await oe(X);else if(X.reportType==="purchase-bill-report")await te(X);else if(X.reportType==="hsn-wise-gst-report")await le(X);else if(X.reportType==="rate-wise-gst-report")await G(X);else if(X.reportType==="inventory-snapshot-report")await O(X);else throw new Error("Invalid report type selected")}catch(fe){console.error("Report generation error:",fe),o.value=!1,l.value=0,c.value="",A.value=!1,r.value=!0,s.value="Report generation failed: "+fe.message}finally{setTimeout(()=>{A.value&&(o.value=!1)},1500)}},b=async X=>{try{l.value=20,c.value="Fetching medicine-wise sales data...";const fe=await it.get("/pharmacy/reports/medicine-wise-sales",{params:{pharmacyId:X.pharmacyId,startDate:X.startDate,endDate:X.endDate}});if(fe.data.success===!1)throw new Error(fe.data.error||"Failed to fetch medicine-wise sales data");const M=fe.data.data||[];l.value=60,c.value="Processing sales data...",l.value=80,c.value="Generating CSV file...";const z=S(M);l.value=90,c.value="Preparing download...";const se=`medicine_wise_sales_report_${X.startDate}_to_${X.endDate}.csv`,be=await B(z,se);if(!be.success)throw new Error(be.error||"Failed to save report file");l.value=100,c.value="Medicine Wise Sales Report generated successfully!",d.value={reportType:"Medicine Wise Sales Report",totalRecords:M.length,dateRange:{from:X.startDate,to:X.endDate},filename:se},A.value=!0;const Fe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Medicine Wise Sales Report",format:"CSV",recordCount:M.length,status:"Completed",filename:se};f.value.unshift(Fe),n.value=!0,a.value=`Medicine Wise Sales Report generated successfully! ${M.length} records included.`}catch(fe){throw console.error("Medicine Wise Sales Report generation error:",fe),fe}},S=X=>{const M=[["MedicineName","Company","GenericName","HSN","Group","BillID","BillDate","PatientName","DoctorName","BatchDetails","ExpiryDate","InwardBillID","MRP/unit","Cost/unit","Quantity","Discount%","TotalTaxableValue","GST Rate %","GSTAmount","Total Amount","CostAmount","ProfitAmount"].join(",")];return X.forEach(z=>{const se=[J(z.MedicineName),J(z.Company),J(z.GenericName),J(z.HSN),J(z.Group),J(z.BillID),z.BillDate,J(z.PatientName),J(z.DoctorName),J(z.BatchDetails),z.ExpiryDate,J(z.InwardBillID),z.MRPPerUnit,z.CostPerUnit,z.Quantity,z.DiscountPercentage,z.TotalTaxableValue,z.GSTRatePercentage,z.GSTAmount,z.TotalAmount,z.CostAmount,z.ProfitAmount];M.push(se.join(","))}),M.join(`
`)},B=async(X,fe)=>{try{const M=new Blob([X],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const z=await window.electronAPI.showSaveDialog({defaultPath:fe,filters:[{name:"CSV Files",extensions:["csv"]}]});return!z.canceled&&z.filePath?(await window.electronAPI.writeFile(z.filePath,X),{success:!0,filePath:z.filePath,filename:fe}):{success:!1,error:"Save canceled by user"}}else{const z=document.createElement("a"),se=URL.createObjectURL(M);return z.setAttribute("href",se),z.setAttribute("download",fe),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(se),{success:!0,filePath:`Downloaded: ${fe}`,filename:fe}}}catch(M){return console.error("Error saving Sales Report file:",M),{success:!1,error:M.message}}},F=async X=>{try{l.value=20,c.value="Fetching billing data...";const fe=await it.get("/pharmacy/reports/billing",{params:{pharmacyId:X.pharmacyId,startDate:X.startDate,endDate:X.endDate}});if(fe.data.success===!1)throw new Error(fe.data.error||"Failed to fetch billing data");const M=fe.data.data||[];l.value=60,c.value="Processing billing data...",l.value=80,c.value="Generating CSV file...";const z=T(M);l.value=90,c.value="Preparing download...";const se=`billing_report_${X.startDate}_to_${X.endDate}.csv`,be=await E(z,se);if(!be.success)throw new Error(be.error||"Failed to save report file");l.value=100,c.value="Billing Report generated successfully!",d.value={reportType:"Billing Report",totalRecords:M.length,dateRange:{from:X.startDate,to:X.endDate},filename:se},A.value=!0;const Fe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Billing Report",format:"CSV",recordCount:M.length,status:"Completed",filename:se};f.value.unshift(Fe),n.value=!0,a.value=`Billing Report generated successfully! ${M.length} records included.`}catch(fe){throw console.error("Billing Report generation error:",fe),fe}},T=X=>{const M=[["BillID","BillDate","PatientName","DoctorName","TotalMRP","TotalDiscount","TotalTaxableValue","TotalGST","AdditionalDiscount","NetAmount","Roundoff","FinalAmount"].join(",")];return X.forEach(z=>{const se=[J(z.BillID),z.BillDate,J(z.PatientName),J(z.DoctorName),z.TotalMRP,z.TotalDiscount,z.TotalTaxableValue,z.TotalGST,z.AdditionalDiscount,z.NetAmount,z.Roundoff,z.FinalAmount];M.push(se.join(","))}),M.join(`
`)},E=async(X,fe)=>{try{const M=new Blob([X],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const z=await window.electronAPI.showSaveDialog({defaultPath:fe,filters:[{name:"CSV Files",extensions:["csv"]}]});return!z.canceled&&z.filePath?(await window.electronAPI.writeFile(z.filePath,X),{success:!0,filePath:z.filePath,filename:fe}):{success:!1,error:"Save canceled by user"}}else{const z=document.createElement("a"),se=URL.createObjectURL(M);return z.setAttribute("href",se),z.setAttribute("download",fe),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(se),{success:!0,filePath:`Downloaded: ${fe}`,filename:fe}}}catch(M){return console.error("Error saving Billing Report file:",M),{success:!1,error:M.message}}},x=async X=>{try{l.value=20,c.value="Fetching payment data...";const fe=await it.get("/pharmacy/reports/payment",{params:{pharmacyId:X.pharmacyId,startDate:X.startDate,endDate:X.endDate}});if(fe.data.success===!1)throw new Error(fe.data.error||"Failed to fetch payment data");const M=fe.data.data||[];l.value=60,c.value="Processing payment data...",l.value=80,c.value="Generating CSV file...";const z=C(M);l.value=90,c.value="Preparing download...";const se=`payment_report_${X.startDate}_to_${X.endDate}.csv`,be=await D(z,se);if(!be.success)throw new Error(be.error||"Failed to save report file");l.value=100,c.value="Payment Report generated successfully!",d.value={reportType:"Payment Report",totalRecords:M.length,dateRange:{from:X.startDate,to:X.endDate},filename:se},A.value=!0;const Fe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Payment Report",format:"CSV",recordCount:M.length,status:"Completed",filename:se};f.value.unshift(Fe),n.value=!0,a.value=`Payment Report generated successfully! ${M.length} records included.`}catch(fe){throw console.error("Payment Report generation error:",fe),fe}},C=X=>{const M=[["BillID","BillDate","PatientName","Total Amount","Cash","Card","UPI","Bank Transfer","Cheque","Online","Other"].join(",")];return X.forEach(z=>{const se=[J(z.BillID),z.BillDate,J(z.PatientName),z.TotalAmount,z.Cash,z.Card,z.UPI,z.BankTransfer,z.Cheque,z.Online,z.Other];M.push(se.join(","))}),M.join(`
`)},D=async(X,fe)=>{try{const M=new Blob([X],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const z=await window.electronAPI.showSaveDialog({defaultPath:fe,filters:[{name:"CSV Files",extensions:["csv"]}]});return!z.canceled&&z.filePath?(await window.electronAPI.writeFile(z.filePath,X),{success:!0,filePath:z.filePath,filename:fe}):{success:!1,error:"Save canceled by user"}}else{const z=document.createElement("a"),se=URL.createObjectURL(M);return z.setAttribute("href",se),z.setAttribute("download",fe),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(se),{success:!0,filePath:`Downloaded: ${fe}`,filename:fe}}}catch(M){return console.error("Error saving Payment Report file:",M),{success:!1,error:M.message}}},U=async X=>{try{l.value=20,c.value="Fetching inventory transactions data...";const fe=await it.get("/pharmacy/reports/inventory-transactions",{params:{pharmacyId:X.pharmacyId,startDate:X.startDate,endDate:X.endDate}});if(fe.data.success===!1)throw new Error(fe.data.error||"Failed to fetch inventory transactions data");const M=fe.data.data||[];l.value=60,c.value="Processing inventory transactions data...",l.value=80,c.value="Generating CSV file...";const z=L(M);l.value=90,c.value="Preparing download...";const se=`inventory_transactions_report_${X.startDate}_to_${X.endDate}.csv`,be=await H(z,se);if(!be.success)throw new Error(be.error||"Failed to save report file");l.value=100,c.value="Inventory Transactions Report generated successfully!",d.value={reportType:"Inventory Transactions Report",totalRecords:M.length,dateRange:{from:X.startDate,to:X.endDate},filename:se},A.value=!0;const Fe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Inventory Transactions Report",format:"CSV",recordCount:M.length,status:"Completed",filename:se};f.value.unshift(Fe),n.value=!0,a.value=`Inventory Transactions Report generated successfully! ${M.length} records included.`}catch(fe){throw console.error("Inventory Transactions Report generation error:",fe),fe}},L=X=>{const M=[["Transaction Date","Medicine Name","Batch ID","Transaction Type","Quantity","Note","Inward Bill ID"].join(",")];return X.forEach(z=>{const se=[z.transactionDate,J(z.medicineName),J(z.batchId),J(z.transactionType),z.quantity,J(z.note),J(z.inwardBillId)];M.push(se.join(","))}),M.join(`
`)},H=async(X,fe)=>{try{const M=new Blob([X],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const z=await window.electronAPI.showSaveDialog({defaultPath:fe,filters:[{name:"CSV Files",extensions:["csv"]}]});return!z.canceled&&z.filePath?(await window.electronAPI.writeFile(z.filePath,X),{success:!0,filePath:z.filePath,filename:fe}):{success:!1,error:"Save canceled by user"}}else{const z=document.createElement("a"),se=URL.createObjectURL(M);return z.setAttribute("href",se),z.setAttribute("download",fe),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(se),{success:!0,filePath:`Downloaded: ${fe}`,filename:fe}}}catch(M){return console.error("Error saving Inventory Transactions Report file:",M),{success:!1,error:M.message}}},oe=async X=>{try{l.value=20,c.value="Fetching expired inventory data...";const fe=await it.get("/pharmacy/reports/expired-inventory",{params:{pharmacyId:X.pharmacyId}});if(fe.data.success===!1)throw new Error(fe.data.error||"Failed to fetch expired inventory data");const M=fe.data.data||[];l.value=60,c.value="Processing expired inventory data...",l.value=80,c.value="Generating CSV file...";const z=de(M);l.value=90,c.value="Preparing download...";const se=Tn(),be=`expired_inventory_report_${se}.csv`,Fe=await ie(z,be);if(!Fe.success)throw new Error(Fe.error||"Failed to save report file");l.value=100,c.value="Expired Inventory Report generated successfully!",d.value={reportType:"Expired Inventory Report",totalRecords:M.length,dateRange:{from:se,to:se},filename:be},A.value=!0;const ye={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Expired Inventory Report",format:"CSV",recordCount:M.length,status:"Completed",filename:be};f.value.unshift(ye),n.value=!0,a.value=`Expired Inventory Report generated successfully! ${M.length} records included.`}catch(fe){throw console.error("Expired Inventory Report generation error:",fe),fe}},de=X=>{const M=[["Medicine Name","Company Name","Batch ID","Expiry Date","MRP","cost excl. GST","GST%","cost incl. GST","Inventory Quantity"].join(",")];return X.forEach(z=>{const se=[J(z.medicineName),J(z.companyName),J(z.batchId),z.expiryDate,z.mrp,z["cost excl. GST"]||0,z["GST%"]||0,z["cost incl. GST"]||0,z.inventoryQuantity];M.push(se.join(","))}),M.join(`
`)},te=async X=>{try{l.value=20,c.value="Fetching purchase bill data...";const fe=await it.get("/pharmacy/reports/purchase-bill",{params:{pharmacyId:X.pharmacyId,startDate:X.startDate,endDate:X.endDate}});if(fe.data.success===!1)throw new Error(fe.data.error||"Failed to fetch purchase bill data");const M=fe.data.data||[];l.value=60,c.value="Processing purchase bill data...",l.value=80,c.value="Generating CSV file...";const z=q(M);l.value=90,c.value="Preparing download...";const se=`purchase_bill_report_${X.startDate}_to_${X.endDate}.csv`,be=await ce(z,se);if(!be.success)throw new Error(be.error||"Failed to save report file");l.value=100,c.value="Purchase Bill Report generated successfully!",d.value={reportType:"Purchase Bill Report",totalRecords:M.length,dateRange:{from:X.startDate,to:X.endDate},filename:se},A.value=!0;const Fe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Purchase Bill Report",format:"CSV",recordCount:M.length,status:"Completed",filename:se};f.value.unshift(Fe),n.value=!0,a.value=`Purchase Bill Report generated successfully! ${M.length} records included.`}catch(fe){throw console.error("Purchase Bill Report generation error:",fe),fe}},q=X=>{const M=[["SupplierName","SupplierGSTIN","TotalMRP","TotalTaxableValue","TotalGST","AdditionalDiscount","NetAmount"].join(",")];return X.forEach(z=>{const se=[J(z.SupplierName),J(z.SupplierGSTIN),z.TotalMRP,z.TotalTaxableValue,z.TotalGST,z.AdditionalDiscount,z.NetAmount];M.push(se.join(","))}),M.join(`
`)},ce=async(X,fe)=>{try{const M=new Blob([X],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const z=await window.electronAPI.showSaveDialog({defaultPath:fe,filters:[{name:"CSV Files",extensions:["csv"]}]});return!z.canceled&&z.filePath?(await window.electronAPI.writeFile(z.filePath,X),{success:!0,filePath:z.filePath,filename:fe}):{success:!1,error:"Save canceled by user"}}else{const z=document.createElement("a"),se=URL.createObjectURL(M);return z.setAttribute("href",se),z.setAttribute("download",fe),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(se),{success:!0,filePath:`Downloaded: ${fe}`,filename:fe}}}catch(M){return console.error("Error saving Purchase Bill Report file:",M),{success:!1,error:M.message}}},le=async X=>{try{l.value=20,c.value="Fetching HSN-wise GST data...";const fe=await it.get("/pharmacy/reports/hsn-wise-gst",{params:{pharmacyId:X.pharmacyId,startDate:X.startDate,endDate:X.endDate}});if(fe.data.success===!1)throw new Error(fe.data.error||"Failed to fetch HSN-wise GST data");const M=fe.data.data||[];l.value=60,c.value="Processing HSN-wise GST data...",l.value=80,c.value="Generating CSV file...";const z=Z(M);l.value=90,c.value="Preparing download...";const se=`hsn_wise_gst_report_${X.startDate}_to_${X.endDate}.csv`,be=await ne(z,se);if(!be.success)throw new Error(be.error||"Failed to save report file");l.value=100,c.value="HSN-wise GST Report generated successfully!",d.value={reportType:"HSN-wise GST Report",totalRecords:M.length,dateRange:{from:X.startDate,to:X.endDate},filename:se},A.value=!0;const Fe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"HSN-wise GST Report",format:"CSV",recordCount:M.length,status:"Completed",filename:se};f.value.unshift(Fe),n.value=!0,a.value=`HSN-wise GST Report generated successfully! ${M.length} records included.`}catch(fe){throw console.error("HSN-wise GST Report generation error:",fe),fe}},Z=X=>{const M=[["HSN","TotalQuantity","TotalTaxableValue","GSTAmount","TotalAmount"].join(",")];return X.forEach(z=>{const se=[J(z.HSN),z.TotalQuantity,z.TotalTaxableValue,z.GSTAmount,z.TotalAmount];M.push(se.join(","))}),M.join(`
`)},ne=async(X,fe)=>{try{const M=new Blob([X],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const z=await window.electronAPI.showSaveDialog({defaultPath:fe,filters:[{name:"CSV Files",extensions:["csv"]}]});return!z.canceled&&z.filePath?(await window.electronAPI.writeFile(z.filePath,X),{success:!0,filePath:z.filePath,filename:fe}):{success:!1,error:"Save canceled by user"}}else{const z=document.createElement("a"),se=URL.createObjectURL(M);return z.setAttribute("href",se),z.setAttribute("download",fe),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(se),{success:!0,filePath:`Downloaded: ${fe}`,filename:fe}}}catch(M){return console.error("Error saving HSN-wise GST Report file:",M),{success:!1,error:M.message}}},G=async X=>{try{l.value=20,c.value="Fetching rate-wise GST data...";const fe=await it.get("/pharmacy/reports/rate-wise-gst",{params:{pharmacyId:X.pharmacyId,startDate:X.startDate,endDate:X.endDate}});if(fe.data.success===!1)throw new Error(fe.data.error||"Failed to fetch rate-wise GST data");const M=fe.data.data||[];l.value=60,c.value="Processing rate-wise GST data...",l.value=80,c.value="Generating CSV file...";const z=W(M);l.value=90,c.value="Preparing download...";const se=`rate_wise_gst_report_${X.startDate}_to_${X.endDate}.csv`,be=await Q(z,se);if(!be.success)throw new Error(be.error||"Failed to save report file");l.value=100,c.value="Rate-wise GST Report generated successfully!",d.value={reportType:"Rate-wise GST Report",totalRecords:M.length,dateRange:{from:X.startDate,to:X.endDate},filename:se},A.value=!0;const Fe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Rate-wise GST Report",format:"CSV",recordCount:M.length,status:"Completed",filename:se};f.value.unshift(Fe),n.value=!0,a.value=`Rate-wise GST Report generated successfully! ${M.length} records included.`}catch(fe){throw console.error("Rate-wise GST Report generation error:",fe),fe}},W=X=>{const M=[["GST%","TotalTaxableValue","GSTAmount","TotalAmount"].join(",")];return X.forEach(z=>{const se=[z["GST%"],z.TotalTaxableValue,z.GSTAmount,z.TotalAmount];M.push(se.join(","))}),M.join(`
`)},Q=async(X,fe)=>{try{const M=new Blob([X],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const z=await window.electronAPI.showSaveDialog({defaultPath:fe,filters:[{name:"CSV Files",extensions:["csv"]}]});return!z.canceled&&z.filePath?(await window.electronAPI.writeFile(z.filePath,X),{success:!0,filePath:z.filePath,filename:fe}):{success:!1,error:"Save canceled by user"}}else{const z=document.createElement("a"),se=URL.createObjectURL(M);return z.setAttribute("href",se),z.setAttribute("download",fe),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(se),{success:!0,filePath:`Downloaded: ${fe}`,filename:fe}}}catch(M){return console.error("Error saving Rate-wise GST Report file:",M),{success:!1,error:M.message}}},O=async X=>{try{l.value=20,c.value="Fetching inventory snapshot data...";const fe=await it.get("/pharmacy/reports/inventory-snapshot",{params:{pharmacyId:X.pharmacyId}});if(fe.data.success===!1)throw new Error(fe.data.error||"Failed to fetch inventory snapshot data");const M=fe.data.data||[];l.value=60,c.value="Processing inventory snapshot data...",l.value=80,c.value="Generating CSV file...";const z=ae(M);l.value=90,c.value="Preparing download...";const se=Tn(),be=`inventory_snapshot_report_${se}.csv`,Fe=await j(z,be);if(!Fe.success)throw new Error(Fe.error||"Failed to save report file");l.value=100,c.value="Inventory Snapshot Report generated successfully!",d.value={reportType:"Inventory Snapshot Report",totalRecords:M.length,dateRange:{from:se,to:se},filename:be},A.value=!0;const ye={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Inventory Snapshot Report",format:"CSV",recordCount:M.length,status:"Completed",filename:be};f.value.unshift(ye),n.value=!0,a.value=`Inventory Snapshot Report generated successfully! ${M.length} records included.`}catch(fe){throw console.error("Inventory Snapshot Report generation error:",fe),fe}},ae=X=>{const M=[["MedicineName","HSN","Product_form","Group","batchNumber","Expiry Date","PackType","UnitsPerpack","MRP","COST excl. GST","GST%","COST incl. GST","Quantity","InwardBillID","Location"].join(",")];return X.forEach(z=>{const se=[J(z.MedicineName),J(z.HSN),J(z.Product_form),J(z.Group),J(z.batchNumber),z["Expiry Date"],J(z.PackType),z.UnitsPerpack,z.MRP,z["COST excl. GST"]||0,z["GST%"]||0,z["COST incl. GST"]||0,z.Quantity,J(z.InwardBillID),J(z.Location)];M.push(se.join(","))}),M.join(`
`)},j=async(X,fe)=>{try{const M=new Blob([X],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const z=await window.electronAPI.showSaveDialog({defaultPath:fe,filters:[{name:"CSV Files",extensions:["csv"]}]});return!z.canceled&&z.filePath?(await window.electronAPI.writeFile(z.filePath,X),{success:!0,filePath:z.filePath,filename:fe}):{success:!1,error:"Save canceled by user"}}else{const z=document.createElement("a"),se=URL.createObjectURL(M);return z.setAttribute("href",se),z.setAttribute("download",fe),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(se),{success:!0,filePath:`Downloaded: ${fe}`,filename:fe}}}catch(M){return console.error("Error saving Inventory Snapshot Report file:",M),{success:!1,error:M.message}}},J=X=>{if(X==null)return"";const fe=String(X);return fe.includes(",")||fe.includes('"')||fe.includes(`
`)?`"${fe.replace(/"/g,'""')}"`:fe},ie=async(X,fe)=>{try{const M=new Blob([X],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const z=await window.electronAPI.showSaveDialog({defaultPath:fe,filters:[{name:"CSV Files",extensions:["csv"]}]});return!z.canceled&&z.filePath?(await window.electronAPI.writeFile(z.filePath,X),{success:!0,filePath:z.filePath,filename:fe}):{success:!1,error:"Save canceled by user"}}else{const z=document.createElement("a"),se=URL.createObjectURL(M);return z.setAttribute("href",se),z.setAttribute("download",fe),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(se),{success:!0,filePath:`Downloaded: ${fe}`,filename:fe}}}catch(M){return console.error("Error saving Expired Inventory Report file:",M),{success:!1,error:M.message}}};return An(()=>{console.log("Pharmacy Reports page initialized")}),(X,fe)=>{const M=I("v-col"),z=I("v-card-text"),se=I("v-card"),be=I("v-progress-circular"),Fe=I("v-card-title"),ye=I("v-row"),Qe=I("v-data-table"),_e=I("v-icon"),Se=I("v-snackbar"),Ee=I("v-main");return P(),he(Ee,null,{default:u(()=>[i(En,{feature:"pharmacy.reports"},{default:u(()=>[i(ye,{"aria-label":"pharmacy reports row",style:{height:"calc(100vh - 64px)"},class:"d-flex align-stretch ma-0"},{default:u(()=>[i(M,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",Rze,[i(Uze,{filters:m.value,loading:o.value,onFilterChange:y,onStartReport:_,onClearFilters:g},null,8,["filters","loading"])])]),_:1}),i(M,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",Nze,[i(se,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i(se,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(z,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[f.value.length>0?(P(),Ae(ze,{key:0},[v("strong",null,K(f.value.length),1),N(" report"+K(f.value.length!==1?"s":"")+" available ",1)],64)):(P(),Ae("strong",Vze,"Generate Reports"))]),_:1})]),_:1}),o.value?(P(),he(ye,{key:0,"no-gutters":""},{default:u(()=>[i(M,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",Lze,[i(be,{"model-value":l.value,color:"primary",size:"64",width:"6"},{default:u(()=>[N(K(l.value)+"% ",1)]),_:1},8,["model-value"]),v("div",Mze,K(c.value||"Generating report..."),1),d.value?(P(),Ae("div",Oze,[i(se,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[i(Fe,{class:"text-h6"},{default:u(()=>[...fe[2]||(fe[2]=[N("Report Summary",-1)])]),_:1}),i(z,null,{default:u(()=>[v("div",Hze,[fe[3]||(fe[3]=v("strong",null,"Report Type:",-1)),N(" "+K(d.value.reportType),1)]),v("div",$ze,[fe[4]||(fe[4]=v("strong",null,"Total Records:",-1)),N(" "+K(d.value.totalRecords),1)]),d.value.dateRange?(P(),Ae("div",Qze,[fe[5]||(fe[5]=v("strong",null,"Date Range:",-1)),N(" "+K(d.value.dateRange.from)+" - "+K(d.value.dateRange.to),1)])):ge("",!0),A.value&&d.value.filename?(P(),Ae("div",Gze,[fe[6]||(fe[6]=v("strong",null,"File:",-1)),N(" "+K(d.value.filename),1)])):ge("",!0)]),_:1})]),_:1})])):ge("",!0)])]),_:1})]),_:1})):f.value.length>0?(P(),he(ye,{key:1,"no-gutters":""},{default:u(()=>[i(M,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[i(Qe,{headers:h.value,items:f.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"])]),_:1})]),_:1})):(P(),he(ye,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[i(M,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",zze,[i(_e,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...fe[7]||(fe[7]=[N("mdi-chart-line",-1)])]),_:1}),fe[8]||(fe[8]=v("div",{class:"text-h6 mb-2"},"Generate Reports",-1)),fe[9]||(fe[9]=v("div",{class:"text-body-2 text-medium-emphasis"},"Configure report settings and generate comprehensive pharmacy reports",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1}),i(Se,{modelValue:n.value,"onUpdate:modelValue":fe[0]||(fe[0]=Ue=>n.value=Ue),class:"elevation-24",color:"success"},{default:u(()=>[N(K(a.value),1)]),_:1},8,["modelValue"]),i(Se,{modelValue:r.value,"onUpdate:modelValue":fe[1]||(fe[1]=Ue=>r.value=Ue),class:"elevation-24",color:"error"},{default:u(()=>[N(K(s.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},Kze=en(Wze,[["__scopeId","data-v-a25da5a6"]]),rg=""+new URL("images/login_screen-CYaYXXaw.png",import.meta.url).href,jze=""+new URL("images/login_screen_card-37SK0J6l.png",import.meta.url).href,qze=""+new URL("google-ax7zTtAP.webp",import.meta.url).href,Yze={key:0,class:"window-controls"},Xze={class:"d-flex justify-center align-center",style:{height:"100%",padding:"40px"}},Jze={class:"card-content"},Zze={class:"terms-text mb-4 text-center text-caption"},eWe={__name:"login-page",setup(e){const t=Ln(),n=ml(),a=Oa(),r=ee(()=>t.state.auth.loading),s=ee(()=>t.state.auth.error),o=R(!1),l=ee(()=>t.getters["auth/isAuthenticated"]);Ge(l,(m,p)=>{if(a&&m&&!p){console.log("Google authentication completed, clearing desktop session and redirecting to passcode login..."),localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures");const h=t.getters["auth/currentUser"];if(h&&h.metadata){const y=h.metadata.creationTime===h.metadata.lastSignInTime;sessionStorage.setItem("isFirstTimeSignIn",y?"true":"false")}n.replace("/desktop/passcode")}},{immediate:!1}),An(()=>{if(!a){const h=new URLSearchParams(window.location.search).get("endpoint"),y=h?`/web/login?endpoint=${encodeURIComponent(h)}`:"/web/login";n.replace(y);return}const m=!!localStorage.getItem("desktopSessionToken");l.value&&(m?n.replace("/home"):n.replace("/desktop/passcode"))});const c=async()=>{try{console.log("Starting authentication process..."),localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures");const m=await t.dispatch("auth/signInWithGoogle");t.getters["auth/isAuthenticated"]?(sessionStorage.setItem("isFirstTimeSignIn",m?"true":"false"),await n.replace("/desktop/passcode")):console.error("Authentication failed or user not authenticated after attempt.")}catch(m){console.error("Component caught authentication error:",m)}},f=()=>{try{if(window.require){const{shell:m}=window.require("electron");m.openExternal("https://www.evamed.in/terms")}else window.open("https://www.evamed.in/terms","_blank")}catch(m){console.error("Error opening terms link:",m),window.open("https://www.evamed.in/terms","_blank")}},d=async()=>{if(!(!a||o.value))try{if(o.value=!0,window.require){const{ipcRenderer:m}=window.require("electron"),p=await m.invoke("toggle-fullscreen");if(p.success)console.log(`Fullscreen toggled: ${p.wasFullscreen}  ${p.isFullscreen}`),p.isFullscreen||console.log("Exited fullscreen - native window controls now available");else throw new Error(p.error||"Failed to exit fullscreen")}else throw new Error("Electron IPC not available")}catch(m){console.error("Failed to exit fullscreen:",m)}finally{o.value=!1}},A=async()=>{if(!(!a||o.value))try{if(o.value=!0,window.require){const{ipcRenderer:m}=window.require("electron"),p=await m.invoke("window-close");if(p.success)console.log("Window close initiated");else throw new Error(p.error||"Failed to close window")}else throw new Error("Electron IPC not available")}catch(m){console.error("Failed to close window:",m)}finally{o.value=!1}};return(m,p)=>{const h=I("v-icon"),y=I("v-btn"),g=I("v-tooltip"),_=I("v-img"),b=I("v-alert"),S=I("v-card");return P(),Ae("div",{class:"login-wrapper login-page-root",style:Mt({backgroundImage:`url(${Oe(rg)})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh"})},[Oe(a)?(P(),Ae("div",Yze,[i(g,{text:"Exit Fullscreen",location:"bottom"},{activator:u(({props:B})=>[i(y,Ie(B,{icon:"",size:"small",variant:"outlined",class:"control-btn",onClick:d,disabled:o.value}),{default:u(()=>[i(h,null,{default:u(()=>[...p[0]||(p[0]=[N("mdi-fullscreen-exit",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),i(g,{text:"Close",location:"bottom"},{activator:u(({props:B})=>[i(y,Ie(B,{icon:"",size:"small",variant:"outlined",class:"control-btn close-btn",onClick:A,disabled:o.value}),{default:u(()=>[i(h,null,{default:u(()=>[...p[1]||(p[1]=[N("mdi-close",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])):ge("",!0),v("div",Xze,[i(S,{elevation:"2",class:"login-card",rounded:"xl"},{default:u(()=>[i(_,{src:Oe(jze),cover:"",height:"300",class:"card-image"},null,8,["src"]),v("div",Jze,[v("p",Zze,[p[2]||(p[2]=N(" By continuing, you agree to our ",-1)),v("a",{href:"#",onClick:gn(f,["prevent"]),class:"terms-link"},"Terms and Conditions"),p[3]||(p[3]=N(". ",-1))]),Oe(a)?(P(),he(y,{key:0,block:"",variant:"elevated",size:"large",loading:r.value,disabled:r.value,onClick:c,class:"text-none btn-hover-enhanced login-button",color:"primary"},{prepend:u(()=>[i(_,{src:Oe(qze),height:"24",width:"24",contain:""},null,8,["src"])]),default:u(()=>[p[4]||(p[4]=N(" Sign in with Google ",-1))]),_:1},8,["loading","disabled"])):ge("",!0),s.value?(P(),he(b,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-4 text-left text-caption",closable:""},{default:u(()=>[N(K(s.value),1)]),_:1})):ge("",!0)])]),_:1})])],4)}}},tWe=en(eWe,[["__scopeId","data-v-42131e5c"]]),nWe={name:"WelcomePage",setup(){const e=ml(),t=R(!0),n=R(0),a=R({first_name:"",last_name:"",registrationNumber:"",phone:"",pincode:"",specialization:""}),r=R(null),s=R(!1),o=R(null),l=[A=>!!A||"this information is required"];return An(()=>{t.value=!0}),{showDialog:t,currentStep:n,userProfile:a,profileForm:r,isSubmitting:s,profileError:o,doctorSpecialization:Qw,nameRules:Cr,regNumberRules:KM,phoneRules:_h,pincodeRules:Wve,specializationRules:l,submitProfile:async()=>{const{valid:A}=await r.value.validate();if(!A){o.value="Please fill in all required fields correctly.";return}s.value=!0,o.value=null;try{const m=Js.currentUser;if(!m||!m.email)throw new Error("User authentication required");const p={first_name:a.value.first_name,last_name:a.value.last_name,email:m.email,phone:a.value.phone,address:"",city:"",state:"",country:"India",pincode:a.value.pincode,registration_number:a.value.registrationNumber,specialization:a.value.specialization,premium_level:"basic",premium_end_date:null,max_devices:1,auth_id:m.uid};console.log("=== DETAILED API PAYLOAD DEBUG ==="),console.log("Full payload:",JSON.stringify(p,null,2)),console.log("Registration number:",p.registration_number),console.log("Specialization:",p.specialization),console.log("Auth ID:",p.auth_id),console.log("=====================================");const h=await m.getIdToken(),g=await Rr.post("https://api.origamimed.com/users/",p,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(g.status===200||g.status===201)console.log("User profile created successfully"),n.value=1;else throw new Error("Failed to create user profile")}catch(m){if(console.error("Profile submission error:",m),m.response){const p=m.response.status;p>=400&&p<500?o.value="Please check your information and try again.":o.value="Server error. Please try again later."}else m.request?o.value="Network error. Please check your connection and try again.":o.value=m.message||"Something went wrong. Please try again."}finally{s.value=!1}},goToHome:()=>{t.value=!1,setTimeout(()=>{e.push("/home")},200)},openVideos:()=>{try{if(window.require){const{shell:A}=window.require("electron");A.openExternal("https://www.evamed.in/videos")}else window.open("https://www.evamed.in/videos","_blank")}catch(A){console.error("Error opening videos link:",A),window.open("https://www.evamed.in/videos","_blank")}}}}};function aWe(e,t,n,a,r,s){const o=I("v-toolbar-title"),l=I("v-toolbar"),c=I("v-stepper-item"),f=I("v-divider"),d=I("v-stepper-header"),A=I("v-text-field"),m=I("v-col"),p=I("v-combobox"),h=I("v-row"),y=I("v-form"),g=I("v-alert"),_=I("v-card-text"),b=I("v-spacer"),S=I("v-btn"),B=I("v-card-actions"),F=I("v-stepper-window-item"),T=I("v-list-item-title"),E=I("v-list-item-subtitle"),x=I("v-list-item"),C=I("v-list"),D=I("v-stepper-window"),U=I("v-stepper"),L=I("v-card"),H=I("v-dialog");return P(),Ae("div",null,[i(H,{modelValue:a.showDialog,"onUpdate:modelValue":t[10]||(t[10]=oe=>a.showDialog=oe),persistent:"","max-width":"700px","overlay-opacity":"0.7"},{default:u(()=>[i(L,null,{default:u(()=>[i(l,{color:"primary",dark:"",flat:"",class:"brand-blue-toolbar"},{default:u(()=>[i(o,null,{default:u(()=>[...t[11]||(t[11]=[N("Welcome to evamed!",-1)])]),_:1})]),_:1}),i(U,{modelValue:a.currentStep,"onUpdate:modelValue":t[9]||(t[9]=oe=>a.currentStep=oe),"alt-labels":""},{default:u(()=>[i(d,null,{default:u(()=>[i(c,{complete:a.currentStep>0,step:"1",title:"Setup Profile"},null,8,["complete"]),i(f),i(c,{step:"2",title:"Get Started"})]),_:1}),i(D,{modelValue:a.currentStep,"onUpdate:modelValue":t[8]||(t[8]=oe=>a.currentStep=oe)},{default:u(()=>[i(F,{value:0},{default:u(()=>[i(_,{class:"pt-4"},{default:u(()=>[t[13]||(t[13]=v("h2",{class:"text-h5 mb-3"},"Let's set up your profile with evamed.",-1)),t[14]||(t[14]=v("p",{class:"mb-4"},"Please provide your professional details to get started:",-1)),i(y,{ref:"profileForm",onSubmit:gn(a.submitProfile,["prevent"])},{default:u(()=>[i(h,{"no-gutters":"",class:"mx-0"},{default:u(()=>[i(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[i(A,{modelValue:a.userProfile.first_name,"onUpdate:modelValue":t[0]||(t[0]=oe=>a.userProfile.first_name=oe),label:"First Name",rules:a.nameRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),i(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[i(A,{modelValue:a.userProfile.last_name,"onUpdate:modelValue":t[1]||(t[1]=oe=>a.userProfile.last_name=oe),label:"Last Name",rules:a.nameRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),i(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[i(A,{modelValue:a.userProfile.registrationNumber,"onUpdate:modelValue":t[2]||(t[2]=oe=>a.userProfile.registrationNumber=oe),label:"Medical Registration Number",rules:a.regNumberRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),i(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[i(A,{modelValue:a.userProfile.phone,"onUpdate:modelValue":t[3]||(t[3]=oe=>a.userProfile.phone=oe),label:"Mobile Number",rules:a.phoneRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),i(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[i(A,{modelValue:a.userProfile.pincode,"onUpdate:modelValue":t[4]||(t[4]=oe=>a.userProfile.pincode=oe),label:"Practice Pincode",rules:a.pincodeRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),i(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[i(p,{modelValue:a.userProfile.specialization,"onUpdate:modelValue":t[5]||(t[5]=oe=>a.userProfile.specialization=oe),items:a.doctorSpecialization,label:"Specialization",rules:a.specializationRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]),a.profileError?(P(),he(g,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-4",closable:"","onClick:close":t[6]||(t[6]=oe=>a.profileError=null)},{default:u(()=>[N(K(a.profileError),1)]),_:1})):ge("",!0),i(g,{type:"info",variant:"tonal",density:"compact",class:"mt-4",icon:"mdi-information"},{default:u(()=>[...t[12]||(t[12]=[v("small",null," This information is shared with evamed. It is used to verify your identity and ensure only licensed practitioners can access the software. ",-1)])]),_:1})]),_:1}),i(B,{class:"px-6 pb-6"},{default:u(()=>[i(b),i(S,{color:"primary",class:"btn-hover-base text-none",onClick:a.submitProfile,loading:a.isSubmitting,disabled:a.isSubmitting},{default:u(()=>[...t[15]||(t[15]=[N(" Continue ",-1)])]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1}),i(F,{value:1},{default:u(()=>[i(_,{class:"pt-6"},{default:u(()=>[t[21]||(t[21]=v("h2",{class:"text-h5 mb-4"},"Let's get started",-1)),t[22]||(t[22]=v("p",{class:"mb-4"},"We're excited to have you onboard! Choose how you'd like to begin:",-1)),i(C,null,{default:u(()=>[i(x,{"prepend-icon":"mdi-play-circle"},{default:u(()=>[i(T,null,{default:u(()=>[...t[16]||(t[16]=[N("Watch demo videos",-1)])]),_:1}),i(E,null,{default:u(()=>[t[17]||(t[17]=N("View our tutorials and take a demo at ",-1)),v("a",{href:"#",onClick:t[7]||(t[7]=gn((...oe)=>a.openVideos&&a.openVideos(...oe),["prevent"])),class:"video-link"},"our website"),t[18]||(t[18]=N(".",-1))]),_:1})]),_:1}),i(x,{"prepend-icon":"mdi-account-cog"},{default:u(()=>[i(T,null,{default:u(()=>[...t[19]||(t[19]=[N("Setup your practice",-1)])]),_:1}),i(E,null,{default:u(()=>[...t[20]||(t[20]=[N("Configure your doctor, clinic and print details in the Admin tab.",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),i(B,{class:"px-6 pb-6"},{default:u(()=>[i(b),i(S,{color:"primary",class:"btn-hover-base text-none",onClick:a.goToHome},{default:u(()=>[...t[23]||(t[23]=[N(" GET STARTED ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])])}const rWe=en(nWe,[["render",aWe],["__scopeId","data-v-57136c3e"]]),sWe={class:"splash-screen"},oWe={class:"splash-content"},iWe={class:"logo-container"},lWe={class:"loading-container"},uWe={key:0,class:"timeout-message"},cWe={__name:"SplashScreen",setup(e){const t=R(!1);let n=null;return An(()=>{n=setTimeout(()=>{t.value=!0},3e3)}),Ri(()=>{n&&clearTimeout(n)}),(a,r)=>{const s=I("v-img"),o=I("v-progress-linear"),l=I("v-alert");return P(),Ae("div",sWe,[v("div",oWe,[v("div",iWe,[i(s,{src:Oe(oE),alt:"evamed Logo",width:"120",height:"120",class:"logo-image"},null,8,["src"])]),r[2]||(r[2]=v("h1",{class:"app-name"},"evamed",-1)),v("div",lWe,[r[0]||(r[0]=v("p",{class:"loading-text"},"Initializing...",-1)),i(o,{indeterminate:"",color:"primary",height:"4",rounded:"",class:"loading-bar"})]),t.value?(P(),Ae("div",uWe,[i(l,{type:"info",variant:"tonal",density:"compact",class:"mt-4"},{default:u(()=>[...r[1]||(r[1]=[N(" Taking longer than usual. Please wait... ",-1)])]),_:1})])):ge("",!0)])])}}},dWe=en(cWe,[["__scopeId","data-v-ff0066be"]]),fWe={class:"splash-page"},AWe={__name:"splash-page",setup(e){return(t,n)=>(P(),Ae("div",fWe,[i(dWe)]))}},mWe=en(AWe,[["__scopeId","data-v-bb0f5d68"]]),vWe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z'%20/%3e%3c/svg%3e",hWe={__name:"mobile-home",setup(e){const t=R("queue"),n=R(!1),a=r=>{t.value=r,setTimeout(()=>{n.value=!1},150)};return(r,s)=>{const o=I("v-app-bar-title"),l=I("v-spacer"),c=I("v-icon"),f=I("v-btn"),d=I("v-app-bar"),A=I("v-card-title"),m=I("v-col"),p=I("v-row"),h=I("v-card"),y=I("v-list-item-title"),g=I("v-list-item"),_=I("v-list"),b=I("v-navigation-drawer"),S=I("v-main");return P(),Ae(ze,null,[i(d,{density:"compact",color:"primary",elevation:"2",class:"app-header"},{default:u(()=>[i(o,{class:"text-h6 font-weight-medium"},{default:u(()=>[...s[5]||(s[5]=[N(" EvaMed ",-1)])]),_:1}),i(l),i(f,{icon:"",variant:"text",onClick:s[0]||(s[0]=gn(B=>n.value=!n.value,["stop"])),class:"btn-hover-base"},{default:u(()=>[i(c,null,{default:u(()=>[...s[6]||(s[6]=[v("img",{src:vWe,alt:"Menu",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1}),i(b,{modelValue:n.value,"onUpdate:modelValue":s[4]||(s[4]=B=>n.value=B),location:"bottom",temporary:"",class:"navigation-drawer",height:"280"},{default:u(()=>[i(h,{rounded:"lg",color:"surfaceContainer",class:"navigation-card"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(h,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[i(p,{"no-gutters":""},{default:u(()=>[i(m,{cols:"11"},{default:u(()=>[i(A,{class:"pa-0 pl-2"},{default:u(()=>[...s[7]||(s[7]=[N("Navigation",-1)])]),_:1})]),_:1}),i(m,{cols:"1"},{default:u(()=>[i(f,{icon:"",size:"x-small",onClick:s[1]||(s[1]=B=>n.value=!1)},{default:u(()=>[i(c,null,{default:u(()=>[...s[8]||(s[8]=[v("img",{src:su,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i(p,{"no-gutters":""},{default:u(()=>[i(m,{cols:"12"},{default:u(()=>[i(h,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[i(_,{class:"nav-list"},{default:u(()=>[i(g,{class:lt([{"active-item":t.value==="home"},"nav-item btn-hover-base"]),onClick:s[2]||(s[2]=B=>a("home")),ripple:""},{prepend:u(()=>[i(c,{color:t.value==="home"?"primary":"grey-darken-1",class:"nav-icon"},{default:u(()=>[...s[9]||(s[9]=[N(" mdi-home-outline ",-1)])]),_:1},8,["color"])]),default:u(()=>[i(y,{class:lt([{"active-title":t.value==="home"},"nav-title"])},{default:u(()=>[...s[10]||(s[10]=[N(" Home ",-1)])]),_:1},8,["class"])]),_:1},8,["class"]),i(g,{class:lt([{"active-item":t.value==="queue"},"nav-item btn-hover-base"]),onClick:s[3]||(s[3]=B=>a("queue")),ripple:""},{prepend:u(()=>[i(c,{color:t.value==="queue"?"primary":"grey-darken-1",class:"nav-icon"},{default:u(()=>[...s[11]||(s[11]=[N(" mdi-clipboard-list-outline ",-1)])]),_:1},8,["color"])]),default:u(()=>[i(y,{class:lt([{"active-title":t.value==="queue"},"nav-title"])},{default:u(()=>[...s[12]||(s[12]=[N(" Queue ",-1)])]),_:1},8,["class"])]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(S,{class:"pt-0"},{default:u(()=>[t.value==="home"?(P(),Ae(ze,{key:0},[N(" This is home ")],64)):ge("",!0),t.value==="queue"?(P(),he(kH,{key:1})):ge("",!0)]),_:1})],64)}}},pWe=en(hWe,[["__scopeId","data-v-dd4f3937"]]),gWe={class:"d-flex justify-center align-center",style:{height:"100%"}},yWe={class:"text-center"},_We={key:1,class:"d-flex justify-center align-center pa-4",style:{"min-height":"50vh"}},wWe={class:"text-center"},bWe={class:"d-flex justify-center align-center pa-4",style:{"min-height":"30vh"}},xWe={class:"text-center"},CWe={__name:"patient-detail-mobile",setup(e){const t=WA(),n=ml(),a=R(!0),r=R(!1),s=R(null),o=R(0),l=R(!1),c=R(""),f=R("info"),d=R(4e3),A=R(navigator.onLine),m=R(t.params.id),p=R({}),h=R([]),y=R({}),g=(q,ce="Unknown")=>{console.error(`Mobile Patient Detail Error (${ce}):`,q),q?.code==="NETWORK_ERROR"||q?.response?.status>=500||!q?.response||q?.message?.includes("timeout")?s.value=`${ce} error. Please check your connection and try again.`:(l.value=!0,c.value=`${ce}: ${q?.response?.data?.message||q.message||"Unknown error occurred"}`,f.value="error")},_=q=>{l.value=!0,c.value=q,f.value="success",d.value=3e3},b=q=>{l.value=!0,c.value=q,f.value="warning",d.value=5e3},S=ee(()=>{try{return p.value?.name||"Unknown Patient"}catch(q){return console.warn("Error accessing patient name:",q),"Unknown Patient"}}),B=(q,ce=15e3)=>Promise.race([q,new Promise((le,Z)=>setTimeout(()=>Z(new Error("Request timeout")),ce))]),F=()=>{try{window.history.length>1?n.back():n.push("/patients")}catch(q){console.error("Navigation error:",q),n.push("/patients")}},T=async()=>{try{if(!m.value)throw new Error("Patient ID is required");const q=await B(oT(m.value));if(!q?.data)throw new Error("No patient data received");p.value=Kn.cloneDeep(q.data),console.log("Patient details fetched:",p.value)}catch(q){g(q,"Failed to fetch patient details"),p.value={name:"Unknown Patient"}}},E=async()=>{try{if(!p.value?.id)throw new Error("Patient ID is required for consultations");const q=await B(u_(p.value.id));if(!q?.data){console.warn("No consultation data received"),h.value=[];return}h.value=Kn.cloneDeep(q.data),console.log("Consultations fetched:",h.value)}catch(q){g(q,"Failed to fetch consultations"),h.value=[]}},x=async()=>{try{await n.isReady();const q=t.params.id;if(!q)throw new Error("Patient ID not found in URL");if(!/^[a-zA-Z0-9-]+$/.test(q))throw new Error("Invalid patient ID format");m.value=q,console.log("Patient ID extracted from URL:",m.value)}catch(q){g(q,"Invalid URL parameters"),n.push("/patients")}},C=q=>{if(!q)return!1;const ce=new Date().toLocaleDateString("en-CA");return q===ce},D=ee(()=>{try{return!Array.isArray(h.value)||h.value.length===0?!1:h.value.some(q=>{try{if(!q?.consultationDate)return console.warn("Consultation missing consultationDate:",q),!1;const ce=C(q.consultationDate);return console.log("Consultation Date",q.consultationDate,"Is today:",ce),ce}catch(ce){return console.warn("Error processing consultation date:",ce),!1}})}catch(q){return console.error("Error checking consultation presence:",q),!1}}),U=async()=>{try{if(D.value){const q=h.value.find(ce=>{try{return ce?.consultationDate&&C(ce.consultationDate)}catch(le){return console.warn("Error processing consultation for selection:",le),!1}});y.value=q||{id:"0"},q?console.log("Today's consultation selected:",q):console.warn("Today's consultation found but could not be selected")}else console.log("No consultation found for today"),y.value={id:"0"}}catch(q){console.error("Error selecting today's consultation:",q),y.value={id:"0"}}},L=async()=>{if(!r.value)try{r.value=!0,await Promise.allSettled([T(),E()]),await U(),o.value+=1,_("Data refreshed successfully")}catch(q){g(q,"Failed to refresh data")}finally{r.value=!1}},H=q=>{console.error("Consultation component error:",q),g(q,"Consultation loading failed"),o.value+=1},oe=()=>{A.value=!0,_("Connection restored"),setTimeout(()=>{L()},1e3)},de=()=>{A.value=!1,b("You are now offline. Data may not be current.")},te=q=>{q.touches.length>1&&q.preventDefault()};return tu(async()=>{try{a.value=!0,console.log("Patient detail mobile page initializing..."),await x(),await T(),await E(),await U()}catch(q){g(q,"Failed to initialize page")}finally{a.value=!1}}),An(()=>{try{window.addEventListener("online",oe),window.addEventListener("offline",de),document.addEventListener("touchstart",te,{passive:!1});const q=document.querySelector("meta[name=viewport]");q&&q.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),console.log("Mobile patient detail page mounted successfully")}catch(q){console.error("Error setting up mobile optimizations:",q)}}),ha(()=>{try{window.removeEventListener("online",oe),window.removeEventListener("offline",de),document.removeEventListener("touchstart",te),a.value=!1,r.value=!1,s.value=null,l.value=!1,console.log("Mobile patient detail cleanup completed")}catch(q){console.error("Cleanup error:",q)}}),Ge(()=>t.params.id,async q=>{q&&q!==m.value&&(m.value=q,await L())}),(q,ce)=>{const le=I("v-alert"),Z=I("v-icon"),ne=I("v-app-bar-nav-icon"),G=I("v-toolbar-title"),W=I("v-app-bar"),Q=I("v-progress-circular"),O=I("v-card"),ae=I("v-main"),j=I("v-spacer"),J=I("v-btn"),ie=I("v-snackbar");return P(),Ae(ze,null,[s.value?(P(),he(le,{key:0,type:"error",variant:"tonal",closable:"","onClick:close":ce[0]||(ce[0]=X=>s.value=null),class:"ma-2",density:"compact"},{default:u(()=>[N(K(s.value),1)]),_:1})):ge("",!0),a.value?(P(),Ae(ze,{key:1},[i(W,{density:"compact"},{default:u(()=>[i(ne,null,{default:u(()=>[i(Z,{onClick:F,icon:"mdi-chevron-left",size:"large"})]),_:1}),i(G,{class:"text-h6"},{default:u(()=>[...ce[3]||(ce[3]=[N("Loading...",-1)])]),_:1})]),_:1}),i(ae,{class:"pt-0"},{default:u(()=>[i(O,{color:"surfaceContainer",flat:"",style:{height:"100vh"}},{default:u(()=>[v("div",gWe,[v("div",yWe,[i(Q,{indeterminate:"",color:"primary",size:"64"}),ce[4]||(ce[4]=v("div",{class:"mt-4 text-subtitle-1"},"Loading patient details...",-1))])])]),_:1})]),_:1})],64)):s.value?ge("",!0):(P(),Ae(ze,{key:2},[i(W,{density:"compact",class:"mobile-app-bar"},{default:u(()=>[i(ne,null,{default:u(()=>[i(Z,{onClick:F,icon:"mdi-chevron-left",size:"large"})]),_:1}),i(G,{class:"text-h6 patient-title"},{default:u(()=>[N(K(S.value),1)]),_:1}),i(j),i(J,{icon:"",onClick:L,loading:r.value,disabled:r.value,size:"small"},{default:u(()=>[i(Z,null,{default:u(()=>[...ce[5]||(ce[5]=[N("mdi-refresh",-1)])]),_:1})]),_:1},8,["loading","disabled"])]),_:1}),i(ae,{class:"pt-0"},{default:u(()=>[i(O,{color:"surfaceContainer",flat:"",class:"mobile-content"},{default:u(()=>[A.value?ge("",!0):(P(),he(le,{key:0,type:"warning",variant:"tonal",density:"compact",class:"ma-2"},{default:u(()=>[...ce[6]||(ce[6]=[N(" You are offline. Data may not be current. ",-1)])]),_:1})),!y.value?.id||y.value.id==="0"?(P(),Ae("div",_We,[v("div",wWe,[i(Z,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:u(()=>[...ce[7]||(ce[7]=[N("mdi-calendar-blank",-1)])]),_:1}),ce[9]||(ce[9]=v("div",{class:"text-h6 mb-2"},"No consultation today",-1)),ce[10]||(ce[10]=v("div",{class:"text-body-2 text-grey"},"No consultation has been created for today.",-1)),i(J,{variant:"outlined",onClick:L,class:"mt-4",loading:r.value},{default:u(()=>[...ce[8]||(ce[8]=[N(" Refresh ",-1)])]),_:1},8,["loading"])])])):(P(),he(yS,{key:2},{default:u(()=>[(P(),he(JH,{consultation:y.value,patient:p.value,key:`${y.value.id}-${o.value}`,onError:H},null,8,["consultation","patient"]))]),fallback:u(()=>[v("div",bWe,[v("div",xWe,[i(Q,{indeterminate:"",color:"primary",size:"48"}),ce[11]||(ce[11]=v("div",{class:"mt-3 text-body-2"},"Loading consultation...",-1))])])]),_:1}))]),_:1})]),_:1})],64)),i(ie,{modelValue:l.value,"onUpdate:modelValue":ce[2]||(ce[2]=X=>l.value=X),color:f.value,timeout:d.value,location:"bottom",class:"mobile-snackbar"},{actions:u(()=>[i(J,{variant:"text",size:"small",onClick:ce[1]||(ce[1]=X=>l.value=!1)},{default:u(()=>[...ce[12]||(ce[12]=[N(" Close ",-1)])]),_:1})]),default:u(()=>[N(K(c.value)+" ",1)]),_:1},8,["modelValue","color","timeout"])],64)}}},SWe=en(CWe,[["__scopeId","data-v-0a395890"]]),EWe={key:0,class:"window-controls"},kWe={class:"passcode-card"},BWe={key:0,class:"loading-section"},TWe={key:1,class:"user-section"},IWe={key:0,class:"user-selector mb-4"},FWe={class:"text-white text-caption"},PWe={class:"d-flex align-center user-selection-content"},DWe={class:"text-white text-caption"},UWe={class:"user-selection-text"},RWe={class:"user-avatar"},NWe={class:"welcome-text"},VWe={key:1,class:"subtitle"},LWe={class:"passcode-input-wrapper"},MWe=["type","disabled"],OWe={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},HWe={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},$We={key:0,class:"error-message"},QWe=["disabled"],GWe={key:0,class:"loading-spinner"},zWe={key:1},WWe={key:3,class:"footer-section"},KWe={__name:"passcode-login",setup(e){const t=Ln(),n=ml(),a=WA(),{loginWithPasscode:r,resetAllAuthState:s}=ph(),o=Oa(),l=R(!1),c=R(""),f=R(!1),d=R(null),A=R(!0),m=R(""),p=R(null),h=R(!1),y=R(!0),g=R(!1),_=()=>{if(g.value)return;const Z=document.querySelector(".passcode-input");Z&&document.activeElement!==Z&&(c.value="",Z.value="",Z.setAttribute("value",""),Z.removeAttribute("data-autofilled"))};Ge(()=>a.path,Z=>{Z==="/desktop/passcode"&&(c.value="",g.value=!1,_())},{immediate:!0}),Ge(c,(Z,ne)=>{!g.value&&Z&&Z.length>1&&(!ne||ne.length===0)&&Cn(()=>{if(!g.value){const G=document.querySelector(".passcode-input");G&&document.activeElement!==G&&(console.log("Clearing browser autofilled passcode"),_())}})},{immediate:!1});const b=R([]),S=R(null),B=R(!1),F=R(""),T=ee(()=>t.getters["auth/currentUser"]),E=ee(()=>T.value?.email||""),x=ee(()=>T.value?.displayName||""),C=ee(()=>{if(S.value){const Z=b.value.find(ne=>ne.id===S.value);if(Z)return Z.name||Z.email||"User"}return m.value||x.value||"User"}),D=Z=>!Z||Z==="User"?"?":Z.split(" ").map(ne=>ne[0]).join("").toUpperCase().slice(0,2),U=async()=>{B.value=!0;try{let Z;try{Z=await it.get("/desktop/auth/users")}catch{Z=await it.get("/admin/users")}const ne=Z.data?.users||(Array.isArray(Z.data)?Z.data:[]);if(Array.isArray(ne)&&ne.length>0){b.value=ne;const G=b.value.find(W=>W.isAdmin===!0)||b.value[0];G&&(S.value=G.id,F.value=G.email||"",p.value=G.id,m.value=G.name||"User")}}catch(Z){console.error("Failed to fetch users:",Z)}finally{B.value=!1}},L=ee(()=>b.value.map(Z=>{const ne=Z.name||Z.email||"Unknown User",G=Z.isAdmin?`${ne} (Admin)`:ne;return{value:Z.id,text:G,email:Z.email,raw:Z}})),H=Z=>{const ne=b.value.find(G=>G.id===Z);ne&&(p.value=ne.id,m.value=ne.name||"User",F.value=ne.email||"")};let oe=null,de=null;An(async()=>{if(c.value="",g.value=!1,A.value=!0,await Cn(),!T.value||!E.value){console.log("No Google auth found, redirecting to login..."),setTimeout(()=>{n.replace("/login")},100);return}_(),await U();try{const Z=sessionStorage.getItem("selectedUserId");if(Z){const ne=parseInt(Z),G=b.value.find(W=>W.id===ne);G&&(S.value=ne,p.value=ne,m.value=G.name||G.email||"User",F.value=G.email||"")}}catch(Z){console.error("Error verifying Google user:",Z)}finally{A.value=!1,await Cn();const Z=document.querySelector(".passcode-input");if(Z){de=Z,c.value="",Z.value="";const ne=()=>{g.value=!0};Z.addEventListener("keydown",ne),Z.addEventListener("keypress",ne),Z.addEventListener("input",Q=>{Q.inputType&&(Q.inputType.includes("insert")||Q.inputType.includes("delete"))&&ne(),document.activeElement===Z&&ne()}),Z.addEventListener("focus",()=>{setTimeout(()=>{!g.value&&(Z.value||c.value)&&document.activeElement!==Z&&(console.log("Clearing autofilled passcode on focus"),_())},100)}),Z.addEventListener("animationstart",Q=>{(Q.animationName==="onAutoFillStart"||Q.target.matches(":-webkit-autofill"))&&!g.value&&(console.log("Detected autofill animation, clearing passcode"),setTimeout(()=>{g.value||_()},100))});const G=new MutationObserver(Q=>{!g.value&&document.activeElement!==Z&&(Z.value||c.value)&&(console.log("MutationObserver detected value change, clearing passcode"),_())});oe=G,G.observe(Z,{attributes:!0,attributeFilter:["value"],childList:!1,subtree:!1}),[()=>{!g.value&&document.activeElement!==Z&&_()},()=>{!g.value&&document.activeElement!==Z&&_()},()=>{!g.value&&document.activeElement!==Z&&_()}].forEach((Q,O)=>{setTimeout(Q,(O+1)*200)})}y.value=!1}}),Ri(()=>{if(oe&&oe.disconnect(),de){const Z=de.cloneNode(!0);de.parentNode?.replaceChild(Z,de)}});const te=async()=>{if(!c.value){d.value="Please enter your passcode";return}const Z=S.value||p.value;if(!Z){d.value="Please select a user";return}f.value=!0,d.value=null;try{if((await r(c.value,Z)).success){sessionStorage.removeItem("selectedUserId");const G=sessionStorage.getItem("isFirstTimeSignIn")==="true";sessionStorage.removeItem("isFirstTimeSignIn");const W=G?"/welcome":"/home";n.replace(W)}}catch(ne){d.value=ne.response?.data?.error||ne.message||"Invalid passcode. Please try again.",c.value=""}finally{f.value=!1}},q=async()=>{try{s(),await t.dispatch("auth/signOut")}catch(Z){console.error("Error signing out:",Z)}n.replace("/login")},ce=async()=>{if(!(!o||l.value))try{if(l.value=!0,window.require){const{ipcRenderer:Z}=window.require("electron"),ne=await Z.invoke("toggle-fullscreen");if(ne.success)console.log(`Fullscreen toggled: ${ne.wasFullscreen}  ${ne.isFullscreen}`),ne.isFullscreen||console.log("Exited fullscreen - native window controls now available");else throw new Error(ne.error||"Failed to exit fullscreen")}else throw new Error("Electron IPC not available")}catch(Z){console.error("Failed to exit fullscreen:",Z)}finally{l.value=!1}},le=async()=>{if(!(!o||l.value))try{if(l.value=!0,window.require){const{ipcRenderer:Z}=window.require("electron"),ne=await Z.invoke("window-close");if(ne.success)console.log("Window close initiated");else throw new Error(ne.error||"Failed to close window")}else throw new Error("Electron IPC not available")}catch(Z){console.error("Failed to close window:",Z)}finally{l.value=!1}};return(Z,ne)=>{const G=I("v-icon"),W=I("v-btn"),Q=I("v-tooltip"),O=I("v-avatar"),ae=I("v-list-item"),j=I("v-select");return P(),Ae("div",{class:"passcode-login-container",style:Mt({backgroundImage:Oe(rg)?`url(${Oe(rg)})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh"})},[Oe(o)?(P(),Ae("div",EWe,[i(Q,{text:"Exit Fullscreen",location:"bottom"},{activator:u(({props:J})=>[i(W,Ie(J,{icon:"",size:"small",variant:"outlined",class:"control-btn",onClick:ce,disabled:l.value}),{default:u(()=>[i(G,null,{default:u(()=>[...ne[3]||(ne[3]=[N("mdi-fullscreen-exit",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),i(Q,{text:"Close",location:"bottom"},{activator:u(({props:J})=>[i(W,Ie(J,{icon:"",size:"small",variant:"outlined",class:"control-btn close-btn",onClick:le,disabled:l.value}),{default:u(()=>[i(G,null,{default:u(()=>[...ne[4]||(ne[4]=[N("mdi-close",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])):ge("",!0),v("div",kWe,[A.value?(P(),Ae("div",BWe,[...ne[5]||(ne[5]=[v("div",{class:"loading-spinner large"},null,-1),v("p",{class:"loading-text"},"Verifying your account...",-1)])])):(P(),Ae("div",TWe,[b.value.length>0?(P(),Ae("div",IWe,[i(j,{modelValue:S.value,"onUpdate:modelValue":[ne[0]||(ne[0]=J=>S.value=J),H],items:L.value,"item-title":"text","item-value":"value",label:"Select User",variant:"outlined",density:"compact",loading:B.value,class:"user-select-field",color:"primary"},{item:u(({props:J,item:ie})=>[i(ae,fl(Al(J)),{prepend:u(()=>[i(O,{size:"32",color:ie.raw.raw?.isAdmin?"primary":"secondary"},{default:u(()=>[v("span",FWe,K(D(ie.raw.text)),1)]),_:2},1032,["color"])]),_:2},1040)]),selection:u(({item:J})=>[v("div",PWe,[i(O,{size:"24",color:J.raw.raw?.isAdmin?"primary":"secondary",class:"mr-2 flex-shrink-0"},{default:u(()=>[v("span",DWe,K(D(J.raw.text)),1)]),_:2},1032,["color"]),v("span",UWe,K(J.raw.text),1)])]),_:1},8,["modelValue","items","loading"])])):ge("",!0),v("div",RWe,K(D(C.value)),1),v("h2",NWe,"Welcome, "+K(C.value)+"!",1),F.value?(P(),Ae("p",VWe,K(F.value),1)):ge("",!0),ne[6]||(ne[6]=v("p",{class:"subtitle"},"Enter your passcode to continue",-1))])),A.value?ge("",!0):(P(),Ae("form",{key:2,onSubmit:gn(te,["prevent"]),class:"passcode-form",autocomplete:"off","data-form-type":"other"},[v("div",LWe,[Sa(v("input",{"onUpdate:modelValue":ne[1]||(ne[1]=J=>c.value=J),type:h.value?"text":"password",class:"passcode-input",placeholder:"Enter passcode",disabled:f.value,autocomplete:"new-password","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true","data-safari-ignore":"true",name:"passcode-input-manual",id:"passcode-input-manual",autofocus:"",maxlength:"20"},null,8,MWe),[[P8,c.value]]),v("button",{type:"button",class:"passcode-toggle-btn",onClick:ne[2]||(ne[2]=J=>h.value=!h.value),tabindex:"-1"},[h.value?(P(),Ae("svg",OWe,[...ne[7]||(ne[7]=[v("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),v("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(P(),Ae("svg",HWe,[...ne[8]||(ne[8]=[v("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),v("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])]),d.value?(P(),Ae("div",$We,K(d.value),1)):ge("",!0),v("button",{type:"submit",class:"login-button",disabled:f.value||!c.value},[f.value?(P(),Ae("span",GWe)):(P(),Ae("span",zWe,"Continue"))],8,QWe)],32)),A.value?ge("",!0):(P(),Ae("div",WWe,[v("button",{class:"switch-account-btn",onClick:q}," Sign in with different account ")]))])],4)}}},jWe=en(KWe,[["__scopeId","data-v-e906f6a0"]]),qWe={class:"passcode-card"},YWe={class:"user-section"},XWe={key:0,class:"user-selector mb-4"},JWe={class:"text-white text-caption"},ZWe={class:"d-flex align-center user-selection-content"},eKe={class:"text-white text-caption"},tKe={class:"user-selection-text"},nKe={class:"user-avatar"},aKe={class:"welcome-text"},rKe={key:1,class:"subtitle"},sKe={class:"passcode-input-wrapper"},oKe=["type","disabled"],iKe={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},lKe={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},uKe={key:0,class:"error-message"},cKe=["disabled"],dKe={key:0,class:"loading-spinner"},fKe={key:1},AKe={__name:"login",setup(e){const t=ml(),{login:n}=KA(),a=R(""),r=R(!1),s=R(null),o=R([]),l=R(null),c=R(!1),f=R(!1),d=R(!0),A=R(!1),m=R(""),p=R(""),h=ee(()=>{if(l.value){const E=o.value.find(x=>x.id===l.value);if(E)return E.name||E.email||"User"}return p.value||"User"}),y=E=>!E||E==="User"?"?":E.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2),g=ee(()=>o.value.map(E=>{const x=E.name||E.email||"Unknown User",C=E.isAdmin?`${x} (Admin)`:x;return{value:E.id,text:C,email:E.email,raw:E}})),_=E=>{const x=o.value.find(C=>C.id===E);x&&(p.value=x.name||"User",m.value=x.email||"")},b=()=>{if(A.value)return;const E=document.querySelector(".passcode-input");E&&document.activeElement!==E&&(a.value="",E.value="",E.setAttribute("value",""),E.removeAttribute("data-autofilled"))};Ge(a,(E,x)=>{!A.value&&E&&E.length>1&&(!x||x.length===0)&&Cn(()=>{if(!A.value){const C=document.querySelector(".passcode-input");C&&document.activeElement!==C&&(console.log("Clearing browser autofilled passcode"),b())}})},{immediate:!1});const S=async()=>{c.value=!0;try{const E=await it.get("/web/auth/users"),x=E.data?.users||(Array.isArray(E.data)?E.data:[]);if(Array.isArray(x)&&x.length>0){o.value=x;const C=o.value.find(D=>D.isAdmin===!0)||o.value[0];C&&(l.value=C.id,m.value=C.email||"",p.value=C.name||"User")}}catch(E){console.error("Failed to fetch users:",E)}finally{c.value=!1}};let B=null,F=null;An(async()=>{a.value="",A.value=!1,b(),await S(),await Cn();const E=document.querySelector(".passcode-input");if(E){F=E,a.value="",E.value="";const x=()=>{A.value=!0};E.addEventListener("keydown",x),E.addEventListener("keypress",x),E.addEventListener("input",U=>{U.inputType&&(U.inputType.includes("insert")||U.inputType.includes("delete"))&&x(),document.activeElement===E&&x()}),E.addEventListener("focus",()=>{setTimeout(()=>{!A.value&&(E.value||a.value)&&document.activeElement!==E&&(console.log("Clearing autofilled passcode on focus"),b())},100)}),E.addEventListener("animationstart",U=>{(U.animationName==="onAutoFillStart"||U.target.matches(":-webkit-autofill"))&&!A.value&&(console.log("Detected autofill animation, clearing passcode"),setTimeout(()=>{A.value||b()},100))});const C=new MutationObserver(U=>{!A.value&&document.activeElement!==E&&(E.value||a.value)&&(console.log("MutationObserver detected value change, clearing passcode"),b())});B=C,C.observe(E,{attributes:!0,attributeFilter:["value"],childList:!1,subtree:!1}),[()=>{!A.value&&document.activeElement!==E&&b()},()=>{!A.value&&document.activeElement!==E&&b()},()=>{!A.value&&document.activeElement!==E&&b()}].forEach((U,L)=>{setTimeout(U,(L+1)*200)})}d.value=!1}),Ri(()=>{if(B&&B.disconnect(),F){const E=F.cloneNode(!0);F.parentNode?.replaceChild(E,F)}});const T=async()=>{if(!a.value){s.value="Please enter your passcode";return}if(!l.value){s.value="Please select a user";return}r.value=!0,s.value=null;try{(await n(a.value,l.value)).success&&t.push("/home")}catch(E){s.value=E.response?.data?.error||E.message||"Login failed. Please try again."}finally{r.value=!1}};return(E,x)=>{const C=I("v-avatar"),D=I("v-list-item"),U=I("v-select");return P(),Ae("div",{class:"passcode-login-container",style:Mt({backgroundImage:Oe(rg)?`url(${Oe(rg)})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh"})},[v("div",qWe,[v("div",YWe,[o.value.length>0?(P(),Ae("div",XWe,[i(U,{modelValue:l.value,"onUpdate:modelValue":[x[0]||(x[0]=L=>l.value=L),_],items:g.value,"item-title":"text","item-value":"value",label:"Select User",variant:"outlined",density:"compact",loading:c.value,class:"user-select-field",color:"primary"},{item:u(({props:L,item:H})=>[i(D,fl(Al(L)),{prepend:u(()=>[i(C,{size:"32",color:H.raw.raw?.isAdmin?"primary":"secondary"},{default:u(()=>[v("span",JWe,K(y(H.raw.text)),1)]),_:2},1032,["color"])]),_:2},1040)]),selection:u(({item:L})=>[v("div",ZWe,[i(C,{size:"24",color:L.raw.raw?.isAdmin?"primary":"secondary",class:"mr-2 flex-shrink-0"},{default:u(()=>[v("span",eKe,K(y(L.raw.text)),1)]),_:2},1032,["color"]),v("span",tKe,K(L.raw.text),1)])]),_:1},8,["modelValue","items","loading"])])):ge("",!0),v("div",nKe,K(y(h.value)),1),v("h2",aKe,"Welcome, "+K(h.value)+"!",1),m.value?(P(),Ae("p",rKe,K(m.value),1)):ge("",!0),x[3]||(x[3]=v("p",{class:"subtitle"},"Enter your passcode to continue",-1))]),v("form",{onSubmit:gn(T,["prevent"]),class:"passcode-form",autocomplete:"off","data-form-type":"other"},[v("div",sKe,[Sa(v("input",{"onUpdate:modelValue":x[1]||(x[1]=L=>a.value=L),type:f.value?"text":"password",class:"passcode-input",placeholder:"Enter passcode",disabled:r.value,autocomplete:"new-password","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true","data-safari-ignore":"true",name:"passcode-input-manual",id:"passcode-input-manual",autofocus:"",maxlength:"20"},null,8,oKe),[[P8,a.value]]),v("button",{type:"button",class:"passcode-toggle-btn",onClick:x[2]||(x[2]=L=>f.value=!f.value),tabindex:"-1"},[f.value?(P(),Ae("svg",iKe,[...x[4]||(x[4]=[v("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),v("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(P(),Ae("svg",lKe,[...x[5]||(x[5]=[v("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),v("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])]),s.value?(P(),Ae("div",uKe,K(s.value),1)):ge("",!0),v("button",{type:"submit",class:"login-button",disabled:r.value||!a.value},[r.value?(P(),Ae("span",dKe)):(P(),Ae("span",fKe,"Continue"))],8,cKe)],32),x[6]||(x[6]=v("div",{class:"footer-section"},[v("p",{class:"footer-text"},"Contact admin if you don't have a passcode")],-1))])],4)}}},mKe=en(AKe,[["__scopeId","data-v-d833d937"]]),vKe={class:"user-management-container"},hKe={key:0,class:"loading-container"},pKe={key:1,class:"error-container"},gKe={key:2,class:"users-list"},yKe={class:"user-info"},_Ke={class:"user-avatar"},wKe={class:"user-details"},bKe={class:"user-name"},xKe={class:"user-email"},CKe={class:"user-meta"},SKe={key:0,class:"badge badge-info"},EKe={key:1,class:"badge badge-warning"},kKe={class:"permission-count"},BKe={class:"user-actions"},TKe=["onClick"],IKe=["onClick"],FKe=["onClick"],PKe=["onClick"],DKe={key:0,class:"empty-state"},UKe={class:"modal-content"},RKe={key:0,class:"error-message"},NKe={key:1,class:"error-message"},VKe={class:"form-group"},LKe={class:"form-group"},MKe={class:"form-group"},OKe={class:"form-group"},HKe={key:0,class:"field-error-message"},$Ke={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",style:{display:"inline-block","vertical-align":"middle","margin-right":"4px"}},QKe={key:1,class:"field-help-text"},GKe={class:"form-actions"},zKe=["disabled"],WKe={key:0},KKe={key:1},jKe={class:"modal-content modal-large"},qKe={class:"modal-title"},YKe={class:"permissions-editor"},XKe={class:"features-list"},JKe={key:0,class:"loading-features"},ZKe={class:"feature-checkbox"},eje=["checked","onChange"],tje={class:"feature-name"},nje={class:"feature-description"},aje={key:0,class:"actions-section"},rje={class:"actions-list"},sje=["checked","onChange"],oje={class:"permissions-summary"},ije={class:"selected-permissions"},lje={key:0,class:"no-permissions"},uje={class:"form-actions"},cje={class:"modal-content"},dje={class:"modal-title"},fje={key:0,class:"passcode-result"},Aje={class:"passcode-display"},mje={key:1,class:"passcode-options"},vje={class:"form-actions"},hje={class:"modal-content"},pje={class:"modal-title"},gje={key:0,class:"loading-container"},yje={key:1,class:"error-message"},_je={key:2,class:"passcode-result"},wje={class:"passcode-display"},bje={__name:"user-management",setup(e){ph(),t2(it);const t=R([]),n=R([]),a=R(!0),r=R(null),s=R(!1),o=R(!1),l=R(!1),c=R(!1),f=R({name:"",email:"",doctorId:null,passcode:""}),d=R(null),A=R([]),m=R(null),p=R(null),h=R(!1),y=R(null),g=R(null),_=R(!1),b=R(null);R(!1);const S=it,B=async()=>{a.value=!0,r.value=null;try{const[Q,O]=await Promise.all([S.get("/admin/users"),S.get("/admin/users/features")]);t.value=Q.data.users||[],n.value=O.data.features||[]}catch(Q){r.value=Q.response?.data?.error||"Failed to load users",console.error("Load users error:",Q)}finally{a.value=!1}},F=Q=>Q?Q.split(" ").map(O=>O[0]).join("").toUpperCase().slice(0,2):"?",T=async()=>{p.value=null,y.value=null,h.value=!0;try{const Q=await S.post("/admin/users",{name:f.value.name,email:f.value.email||void 0,doctorId:f.value.doctorId||void 0,passcode:f.value.passcode?.trim()||void 0,generatePasscode:!f.value.passcode?.trim()});if(Q.data.success){const O=Q.data.passcode;alert(`User created!

Passcode: ${O}

Please save this passcode securely.`),E(),B()}}catch(Q){const O=Q.response?.data?.error||"Failed to create user";Q.response?.data?.code==="PASSCODE_NOT_UNIQUE"||O.toLowerCase().includes("passcode")?(y.value="This passcode is already in use by another user. Please use a different unique passcode.",p.value=null,setTimeout(()=>{const j=document.getElementById("passcode");j&&(j.focus(),j.scrollIntoView({behavior:"smooth",block:"center"}),j.classList.add("shake-animation"),setTimeout(()=>{j.classList.remove("shake-animation")},500))},100)):(p.value=O,y.value=null)}finally{h.value=!1}},E=()=>{s.value=!1,f.value={name:"",email:"",doctorId:null,passcode:""},p.value=null,y.value=null},x=Q=>{try{if(!n.value||n.value.length===0){console.warn("Features not loaded yet, loading now..."),B().then(()=>{n.value&&n.value.length>0?(d.value=Q,A.value=[...Q.permissions||[]],o.value=!0):alert("Failed to load features. Please try again.")});return}if(!Q||!Q.id){console.error("Invalid user data:",Q),alert("Invalid user data");return}d.value=Q,A.value=[...Q.permissions||[]],o.value=!0}catch(O){console.error("Error opening edit permissions modal:",O),alert("Error opening permissions editor. Please try again.")}},C=ee(()=>{const Q=new Set;return A.value&&A.value.length>0&&A.value.forEach(O=>{if(O&&typeof O=="string"){const ae=O.split(".")[0];ae&&Q.add(ae)}}),Q}),D=ee(()=>new Set(A.value||[])),U=Q=>C.value.has(Q),L=Q=>D.value.has(Q),H=(Q,O)=>{const ae=n.value.find(j=>j.id===Q);if(ae)if(O){const j=ae.actions.find(J=>J.action==="view");j&&!A.value.includes(j.id)&&A.value.push(j.id)}else A.value=A.value.filter(j=>!j.startsWith(`${Q}.`))},oe=(Q,O)=>{O?A.value.includes(Q)||A.value.push(Q):A.value=A.value.filter(ae=>ae!==Q)},de=async()=>{try{await S.put(`/admin/users/${d.value.id}/permissions`,{permissions:A.value}),alert("Permissions updated successfully!"),o.value=!1,B()}catch(Q){alert(Q.response?.data?.error||"Failed to update permissions")}},te=Q=>{d.value=Q,m.value=null,l.value=!0},q=async()=>{try{const Q=await S.put(`/admin/users/${d.value.id}/passcode`,{generateNew:!0});Q.data.success&&(m.value=Q.data.passcode)}catch(Q){alert(Q.response?.data?.error||"Failed to reset passcode")}},ce=()=>{l.value=!1,m.value=null},le=async Q=>{console.log("View passcode clicked for user:",Q),d.value=Q,g.value=null,b.value=null,_.value=!0,c.value=!0;try{console.log("Fetching passcode for user ID:",Q.id);const O=await S.get(`/admin/users/${Q.id}/passcode`);console.log("Passcode response:",O.data),O.data.success?g.value=O.data.passcode:b.value=O.data.error||"Failed to retrieve passcode"}catch(O){console.error("Error fetching passcode:",O),b.value=O.response?.data?.error||"Failed to retrieve passcode"}finally{_.value=!1}},Z=async()=>{if(g.value)try{await navigator.clipboard.writeText(g.value),alert("Passcode copied to clipboard!")}catch{const O=document.createElement("textarea");O.value=g.value,O.style.position="fixed",O.style.opacity="0",document.body.appendChild(O),O.select();try{document.execCommand("copy"),alert("Passcode copied to clipboard!")}catch{alert("Failed to copy passcode. Please copy manually.")}document.body.removeChild(O)}},ne=()=>{c.value=!1,g.value=null,b.value=null,_.value=!1},G=()=>{p.value=null,y.value=null,f.value={name:"",email:"",doctorId:null,passcode:""},s.value=!0},W=Q=>{alert("Edit user functionality coming soon")};return An(()=>{B()}),(Q,O)=>(P(),Ae("div",vKe,[v("div",{class:"page-header"},[O[11]||(O[11]=v("h1",{class:"page-title"},"User Management",-1)),v("button",{class:"btn-primary",onClick:G},[...O[10]||(O[10]=[v("span",{class:"btn-icon"},"+",-1),N(" Add User ",-1)])])]),a.value?(P(),Ae("div",hKe,[...O[12]||(O[12]=[v("div",{class:"loading-spinner"},null,-1),v("p",null,"Loading users...",-1)])])):r.value?(P(),Ae("div",pKe,[v("p",null,K(r.value),1),v("button",{class:"btn-secondary",onClick:B},"Retry")])):(P(),Ae("div",gKe,[(P(!0),Ae(ze,null,Jt(t.value,ae=>(P(),Ae("div",{key:ae.id,class:lt(["user-card",{inactive:!ae.isActive}])},[v("div",yKe,[v("div",_Ke,K(F(ae.name)),1),v("div",wKe,[v("h3",bKe,K(ae.name),1),v("p",xKe,K(ae.email||"No email"),1),v("div",CKe,[ae.doctorId?(P(),Ae("span",SKe,"Doctor #"+K(ae.doctorId),1)):ge("",!0),ae.isActive?ge("",!0):(P(),Ae("span",EKe,"Inactive")),v("span",kKe,K(ae.permissions.length)+" permissions",1)])])]),v("div",BKe,[v("button",{class:"btn-icon-action",onClick:j=>x(ae),title:"Edit Permissions"},[...O[13]||(O[13]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),v("polyline",{points:"16 17 21 12 16 7"}),v("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1)])],8,TKe),v("button",{class:"btn-icon-action",onClick:j=>le(ae),title:"View Passcode"},[...O[14]||(O[14]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),v("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,IKe),v("button",{class:"btn-icon-action",onClick:j=>te(ae),title:"Reset Passcode"},[...O[15]||(O[15]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),v("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)])],8,FKe),v("button",{class:"btn-icon-action",onClick:j=>W(),title:"Edit User"},[...O[16]||(O[16]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,PKe)])],2))),128)),t.value.length===0?(P(),Ae("div",DKe,[...O[17]||(O[17]=[v("p",null,"No users found. Create your first user to get started.",-1)])])):ge("",!0)])),s.value?(P(),Ae("div",{key:3,class:"modal-overlay",onClick:O[5]||(O[5]=gn(ae=>s.value=!1,["self"]))},[v("div",UKe,[O[25]||(O[25]=v("h2",{class:"modal-title"},"Create New User",-1)),y.value?(P(),Ae("div",RKe,[O[18]||(O[18]=v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("circle",{cx:"12",cy:"12",r:"10"}),v("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),v("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),v("span",null,K(y.value),1)])):ge("",!0),p.value&&!y.value?(P(),Ae("div",NKe,[O[19]||(O[19]=v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("circle",{cx:"12",cy:"12",r:"10"}),v("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),v("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),v("span",null,K(p.value),1)])):ge("",!0),v("form",{onSubmit:gn(T,["prevent"]),class:"modal-form"},[v("div",VKe,[O[20]||(O[20]=v("label",{for:"name"},"Name *",-1)),Sa(v("input",{id:"name","onUpdate:modelValue":O[0]||(O[0]=ae=>f.value.name=ae),type:"text",required:"",placeholder:"Enter user name"},null,512),[[Wf,f.value.name]])]),v("div",LKe,[O[21]||(O[21]=v("label",{for:"email"},"Email",-1)),Sa(v("input",{id:"email","onUpdate:modelValue":O[1]||(O[1]=ae=>f.value.email=ae),type:"email",placeholder:"Enter email (optional)"},null,512),[[Wf,f.value.email]])]),v("div",MKe,[O[22]||(O[22]=v("label",{for:"doctorId"},"Link to Doctor (ID)",-1)),Sa(v("input",{id:"doctorId","onUpdate:modelValue":O[2]||(O[2]=ae=>f.value.doctorId=ae),type:"number",placeholder:"Doctor ID (optional)"},null,512),[[Wf,f.value.doctorId,void 0,{number:!0}]])]),v("div",OKe,[O[24]||(O[24]=v("label",{for:"passcode"},"Passcode",-1)),Sa(v("input",{id:"passcode","onUpdate:modelValue":O[3]||(O[3]=ae=>f.value.passcode=ae),type:"text",class:lt({"input-error":y.value}),placeholder:"Enter passcode (leave empty to auto-generate)",onInput:O[4]||(O[4]=ae=>y.value=null)},null,34),[[Wf,f.value.passcode]]),y.value?(P(),Ae("p",HKe,[(P(),Ae("svg",$Ke,[...O[23]||(O[23]=[v("circle",{cx:"12",cy:"12",r:"10"},null,-1),v("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),v("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)])])),N(" "+K(y.value),1)])):(P(),Ae("p",QKe," Leave empty to auto-generate a unique passcode "))]),v("div",GKe,[v("button",{type:"button",class:"btn-secondary",onClick:E},"Cancel"),v("button",{type:"submit",class:"btn-primary",disabled:!f.value.name||h.value},[h.value?(P(),Ae("span",WKe,"Creating...")):(P(),Ae("span",KKe,"Create User"))],8,zKe)])],32)])])):ge("",!0),o.value?(P(),Ae("div",{key:4,class:"modal-overlay",onClick:O[7]||(O[7]=gn(ae=>o.value=!1,["self"]))},[v("div",jKe,[v("h2",qKe,"Edit Permissions: "+K(d.value?.name),1),v("div",YKe,[O[27]||(O[27]=v("p",{class:"help-text"}," Select features to grant access. Once a feature is selected, you can assign specific actions. ",-1)),v("div",XKe,[!n.value||n.value.length===0?(P(),Ae("div",JKe,[...O[26]||(O[26]=[v("p",null,"Loading features...",-1)])])):(P(!0),Ae(ze,{key:1},Jt(n.value,ae=>(P(),Ae("div",{key:ae.id,class:"feature-item"},[v("label",ZKe,[v("input",{type:"checkbox",checked:U(ae.id),onChange:j=>H(ae.id,j.target.checked)},null,40,eje),v("span",tje,K(ae.name),1),v("span",nje,K(ae.description),1)]),U(ae.id)?(P(),Ae("div",aje,[v("h4",null,"Actions for "+K(ae.name),1),v("div",rje,[(P(!0),Ae(ze,null,Jt(ae.actions,j=>(P(),Ae("label",{key:j.id,class:"action-checkbox"},[v("input",{type:"checkbox",checked:L(j.id),onChange:J=>oe(j.id,J.target.checked)},null,40,sje),v("span",null,K(j.description),1)]))),128))])])):ge("",!0)]))),128))]),v("div",oje,[v("h4",null,"Selected Permissions ("+K(A.value.length)+")",1),v("div",ije,[(P(!0),Ae(ze,null,Jt(A.value,ae=>(P(),Ae("span",{key:ae,class:"permission-badge"},K(ae),1))),128)),A.value.length===0?(P(),Ae("span",lje," No permissions selected ")):ge("",!0)])])]),v("div",uje,[v("button",{type:"button",class:"btn-secondary",onClick:O[6]||(O[6]=ae=>o.value=!1)},"Cancel"),v("button",{type:"button",class:"btn-primary",onClick:de},"Save Permissions")])])])):ge("",!0),l.value?(P(),Ae("div",{key:5,class:"modal-overlay",onClick:O[8]||(O[8]=gn(ae=>l.value=!1,["self"]))},[v("div",cje,[v("h2",dje,"Reset Passcode: "+K(d.value?.name),1),m.value?(P(),Ae("div",fje,[O[28]||(O[28]=v("p",{class:"passcode-label"},"New Passcode:",-1)),v("div",Aje,K(m.value),1),O[29]||(O[29]=v("p",{class:"passcode-warning"}," Save this passcode securely. It won't be shown again.",-1))])):(P(),Ae("div",mje,[...O[30]||(O[30]=[v("p",null,"Generate a new passcode for this user?",-1),v("p",{class:"warning-text"},"This will invalidate all active sessions for this user.",-1)])])),v("div",vje,[v("button",{type:"button",class:"btn-secondary",onClick:ce},K(m.value?"Close":"Cancel"),1),m.value?ge("",!0):(P(),Ae("button",{key:0,type:"button",class:"btn-primary",onClick:q}," Generate New Passcode "))])])])):ge("",!0),c.value?(P(),Ae("div",{key:6,class:"modal-overlay",onClick:O[9]||(O[9]=gn(ae=>c.value=!1,["self"]))},[v("div",hje,[v("h2",pje,"View Passcode: "+K(d.value?.name),1),_.value?(P(),Ae("div",gje,[...O[31]||(O[31]=[v("div",{class:"loading-spinner"},null,-1),v("p",null,"Loading passcode...",-1)])])):b.value?(P(),Ae("div",yje,[O[32]||(O[32]=v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("circle",{cx:"12",cy:"12",r:"10"}),v("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),v("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),v("span",null,K(b.value),1)])):g.value?(P(),Ae("div",_je,[O[33]||(O[33]=v("p",{class:"passcode-label"},"Passcode:",-1)),v("div",wje,K(g.value),1),v("button",{type:"button",class:"btn-secondary",onClick:Z,style:{"margin-top":"10px"}}," Copy to Clipboard "),O[34]||(O[34]=v("p",{class:"passcode-warning"}," This passcode is stored in plain text. Keep it secure.",-1))])):ge("",!0),v("div",{class:"form-actions"},[v("button",{type:"button",class:"btn-secondary",onClick:ne},"Close")])])])):ge("",!0)]))}},kN=en(bje,[["__scopeId","data-v-79c64cc9"]]),xje=[{path:"/",name:"SplashPage",component:mWe,meta:{requiresAuth:!1}},{name:"LoginPage",component:tWe,path:"/login",meta:{requiresAuth:!1}},{name:"MobileHome",component:pWe,path:"/mobile",meta:{requiresAuth:!1}},{name:"PatientDetailMobile",component:SWe,path:"/mobile/:id",meta:{requiresAuth:!1}},{name:"WelcomePage",component:rWe,path:"/welcome",meta:{requiresAuth:!0}},{name:"HomePage",component:jCe,path:"/home/:tab?",meta:{requiresAuth:!0,requiredFeature:"home"}},{name:"PatientsLandingPage",component:eEe,path:"/patients",meta:{requiresAuth:!0,requiredFeature:"patients"},children:[{path:":id",name:"PatientDetailPage",component:kIe,meta:{requiresAuth:!0,requiredFeature:"patients"}}]},{name:"TasksPage",component:cOe,path:"/tasks",meta:{requiresAuth:!0,requiredFeature:"tasks"}},{name:"AdminPage",component:lPe,path:"/admin",meta:{requiresAuth:!0,requiresAdmin:!0}},{name:"DataPage",component:u6e,path:"/data",meta:{requiresAuth:!0,requiredFeature:"data"}},{name:"ResearchPage",component:_Me,path:"/research",meta:{requiresAuth:!0,requiredFeature:"research"}},{name:"ReportsPage",component:lHe,path:"/reports",meta:{requiresAuth:!0,requiredFeature:"reports"}},{name:"PaymentsPage",component:DOe,path:"/payments",meta:{requiresAuth:!0,requiredFeature:"billing"}},{name:"PharmacyQueuePage",component:GQe,path:"/pharmacy/queue",meta:{requiresAuth:!0,requiredFeature:"pharmacy.queue"}},{name:"PharmacyInventoryPage",component:lGe,path:"/pharmacy/inventory",meta:{requiresAuth:!0,requiredFeature:"pharmacy.inventory"}},{name:"PharmacyPurchasePage",component:yze,path:"/pharmacy/purchase",meta:{requiresAuth:!0,requiredFeature:"pharmacy.purchase"}},{name:"PharmacyReportsPage",component:Kze,path:"/pharmacy/reports",meta:{requiresAuth:!0,requiredFeature:"pharmacy.reports"}},{name:"DesktopPasscodeLogin",component:jWe,path:"/desktop/passcode",meta:{requiresAuth:!1,requiresGoogleAuth:!0}},{name:"WebLogin",component:mKe,path:"/web/login",meta:{requiresAuth:!1}},{name:"UserManagement",component:kN,path:"/admin/users",meta:{requiresAuth:!0,requiresAdmin:!0}},{name:"UserManagementEdit",component:kN,path:"/admin/users/:id",meta:{requiresAuth:!0,requiresAdmin:!0}}],js=Vre({history:fre(),routes:xje});js.beforeEach(async(e,t,n)=>{const a=t.query.server||e.query.server,r=t.query.endpoint||e.query.endpoint;if((a||r)&&!e.query.server&&!e.query.endpoint)return console.log("Preserving query params:",{serverParam:a,endpointParam:r}),n({...e,query:{...e.query,...a&&{server:a},...r&&{endpoint:r}}});if(Oa()){const o=Ii.getters["auth/isAuthenticated"],l=!!localStorage.getItem("desktopSessionToken"),c=o&&l,f=ph(),d=f.isAdmin.value,A=f.permissions.value||[];console.log("Navigation guard triggered (Electron mode):",{to:e.path,from:t.path,requiresAuth:e.matched.some(_=>_.meta.requiresAuth),requiresGoogleAuth:e.matched.some(_=>_.meta.requiresGoogleAuth),requiresAdmin:e.matched.some(_=>_.meta.requiresAdmin),requiredFeature:e.meta.requiredFeature,requiredPermission:e.meta.requiredPermission,isGoogleAuthenticated:o,hasDesktopSession:l,isFullyAuthenticated:c,isAdmin:d,permissionsCount:A.length});const m=e.matched.some(_=>_.meta.requiresAuth),p=e.matched.some(_=>_.meta.requiresGoogleAuth),h=e.matched.some(_=>_.meta.requiresAdmin),y=e.meta.requiredFeature,g=e.meta.requiredPermission;if(m&&!c)if(o){console.log("Route requires auth, have Google auth but no passcode, redirecting to passcode page"),n("/desktop/passcode");return}else{console.log("Route requires auth but no Google auth, redirecting to login"),n("/login");return}if(h&&!(d||A.some(b=>b&&typeof b=="string"&&b.startsWith("admin.")))){console.log("Route requires admin access or admin permissions, redirecting to home"),n("/home");return}if(g&&!d){if(!A.includes(g)){console.log(`Route requires permission: ${g}, redirecting to home`),n("/home");return}}if(y&&((f.features.value||[]).find(b=>b&&b.id===y),!d)){if(!A.some(S=>!S||typeof S!="string"?!1:S===y?!0:S.startsWith(`${y}.`))){console.log(`Route requires feature access: ${y}, user doesn't have access, redirecting to home`),n("/home");return}}if(p&&!o){console.log("Route requires Google auth but user not signed in, redirecting to login"),n("/login");return}if(e.path==="/login"){if(c){console.log("Fully authenticated user trying to access login page, redirecting to home"),n("/home");return}else if(o){console.log("Google authenticated user trying to access login page, redirecting to passcode"),n("/desktop/passcode");return}}if(e.path==="/desktop/passcode"&&c){console.log("Fully authenticated user trying to access passcode page, redirecting to home"),n("/home");return}console.log("Navigation allowed (Electron mode)"),n()}else{const o=KA(),l=!!localStorage.getItem("sessionToken"),c=o.isAuthenticated.value,f=o.isAdmin.value,d=o.permissions.value||[];console.log("Navigation guard triggered (Web mode):",{to:e.path,from:t.path,requiresAuth:e.matched.some(g=>g.meta.requiresAuth),requiresAdmin:e.matched.some(g=>g.meta.requiresAdmin),requiredFeature:e.meta.requiredFeature,requiredPermission:e.meta.requiredPermission,hasSessionToken:l,isWebAuthenticated:c,sessionTokenValue:o.sessionToken.value?"exists":"null",isAdmin:f,permissionsCount:d.length});const A=e.matched.some(g=>g.meta.requiresAuth),m=e.matched.some(g=>g.meta.requiresAdmin),p=e.meta.requiredFeature,h=e.meta.requiredPermission,y=()=>{const b=new URLSearchParams(window.location.search).get("endpoint")||e.query.endpoint||t.query.endpoint;return b?`/web/login?endpoint=${encodeURIComponent(b)}`:"/web/login"};if(e.path==="/"&&!c){console.log("On splash page but not authenticated, redirecting to web login");const g=y();console.log("Redirecting to:",g),n(g);return}if(A&&!c){console.log("Route requires auth but not authenticated, redirecting to web login");const g=y();console.log("Redirecting to:",g),n(g);return}if(m&&!(f||d.includes("admin")||d.some(_=>_&&typeof _=="string"&&_.startsWith("admin.")))){console.log("Route requires admin access or admin permissions, redirecting to home"),n("/home");return}if(h&&!f){if(!d.includes(h)){console.log(`Route requires permission: ${h}, redirecting to home`),n("/home");return}}if(p&&!f){if(!d.some(_=>!_||typeof _!="string"?!1:_===p?!0:_.startsWith(`${p}.`))){console.log(`Route requires feature access: ${p}, user doesn't have access, redirecting to home`),n("/home");return}}if(e.path==="/web/login"&&c){console.log("Authenticated user trying to access web login page, redirecting to home"),n("/home");return}console.log("Navigation allowed (Web mode)"),n()}});const Cje=ot({...nn(),...Wa(h5(),["fullHeight"]),...Aa()},"VApp"),Sje=St()({name:"VApp",props:Cje(),setup(e,t){let{slots:n}=t;const a=Ra(e),{layoutClasses:r,getLayoutItem:s,items:o,layoutRef:l}=g5({...e,fullHeight:!0}),{rtlClasses:c}=as();return It(()=>v("div",{ref:l,class:lt(["v-application",a.themeClasses.value,r.value,c.value,e.class]),style:Mt([e.style])},[v("div",{class:"v-application__wrap"},[n.default?.()])])),{getLayoutItem:s,items:o,theme:a}}}),$n=ot({tag:{type:[String,Object,Function],default:"div"}},"tag"),eQ=ot({text:String,...nn(),...$n()},"VToolbarTitle"),l4=St()({name:"VToolbarTitle",props:eQ(),setup(e,t){let{slots:n}=t;return It(()=>{const a=!!(n.default||n.text||e.text);return i(e.tag,{class:lt(["v-toolbar-title",e.class]),style:Mt(e.style)},{default:()=>[a&&v("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,n.default?.()])]})}),{}}}),Eje=ot({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Li(e,t,n){return St()({name:e,props:Eje({mode:n,origin:t}),setup(a,r){let{slots:s}=r;const o={onBeforeEnter(l){a.origin&&(l.style.transformOrigin=a.origin)},onLeave(l){if(a.leaveAbsolute){const{offsetTop:c,offsetLeft:f,offsetWidth:d,offsetHeight:A}=l;l._transitionInitialStyles={position:l.style.position,top:l.style.top,left:l.style.left,width:l.style.width,height:l.style.height},l.style.position="absolute",l.style.top=`${c}px`,l.style.left=`${f}px`,l.style.width=`${d}px`,l.style.height=`${A}px`}a.hideOnLeave&&l.style.setProperty("display","none","important")},onAfterLeave(l){if(a.leaveAbsolute&&l?._transitionInitialStyles){const{position:c,top:f,left:d,width:A,height:m}=l._transitionInitialStyles;delete l._transitionInitialStyles,l.style.position=c||"",l.style.top=f||"",l.style.left=d||"",l.style.width=A||"",l.style.height=m||""}}};return()=>{const l=a.group?mB:jd;return nu(l,{name:a.disabled?"":e,css:!a.disabled,...a.group?void 0:{mode:a.mode},...a.disabled?{}:o},s.default)}}})}function tQ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return St()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(a,r){let{slots:s}=r;const o=a.group?mB:jd;return()=>nu(o,{name:a.disabled?"":e,css:!a.disabled,...a.disabled?{}:t},s.default)}})}function nQ(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",a=Wo(`offset-${n}`);return{onBeforeEnter(o){o._parent=o.parentNode,o._initialStyle={transition:o.style.transition,overflow:o.style.overflow,[n]:o.style[n]}},onEnter(o){const l=o._initialStyle;if(!l)return;o.style.setProperty("transition","none","important"),o.style.overflow="hidden";const c=`${o[a]}px`;o.style[n]="0",o.offsetHeight,o.style.transition=l.transition,e&&o._parent&&o._parent.classList.add(e),requestAnimationFrame(()=>{o.style[n]=c})},onAfterEnter:s,onEnterCancelled:s,onLeave(o){o._initialStyle={transition:"",overflow:o.style.overflow,[n]:o.style[n]},o.style.overflow="hidden",o.style[n]=`${o[a]}px`,o.offsetHeight,requestAnimationFrame(()=>o.style[n]="0")},onAfterLeave:r,onLeaveCancelled:r};function r(o){e&&o._parent&&o._parent.classList.remove(e),s(o)}function s(o){if(!o._initialStyle)return;const l=o._initialStyle[n];o.style.overflow=o._initialStyle.overflow,l!=null&&(o.style[n]=l),delete o._initialStyle}}const kje=ot({target:[Object,Array]},"v-dialog-transition"),WC=new WeakMap,eb=St()({name:"VDialogTransition",props:kje(),setup(e,t){let{slots:n}=t;const a={onBeforeEnter(r){r.style.pointerEvents="none",r.style.visibility="hidden"},async onEnter(r,s){await new Promise(p=>requestAnimationFrame(p)),await new Promise(p=>requestAnimationFrame(p)),r.style.visibility="";const o=TN(e.target,r),{x:l,y:c,sx:f,sy:d,speed:A}=o;WC.set(r,o);const m=jf(r,[{transform:`translate(${l}px, ${c}px) scale(${f}, ${d})`,opacity:0},{}],{duration:225*A,easing:Wte});BN(r)?.forEach(p=>{jf(p,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*A,easing:D0})}),m.finished.then(()=>s())},onAfterEnter(r){r.style.removeProperty("pointer-events")},onBeforeLeave(r){r.style.pointerEvents="none"},async onLeave(r,s){await new Promise(p=>requestAnimationFrame(p));let o;!WC.has(r)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?o=TN(e.target,r):o=WC.get(r);const{x:l,y:c,sx:f,sy:d,speed:A}=o;jf(r,[{},{transform:`translate(${l}px, ${c}px) scale(${f}, ${d})`,opacity:0}],{duration:125*A,easing:Kte}).finished.then(()=>s()),BN(r)?.forEach(p=>{jf(p,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*A,easing:D0})})},onAfterLeave(r){r.style.removeProperty("pointer-events")}};return()=>e.target?i(jd,Ie({name:"dialog-transition"},a,{css:!1}),n):i(jd,{name:"dialog-transition"},n)}});function BN(e){const t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return t&&[...t]}function TN(e,t){const n=W8(e),a=yB(t),[r,s]=getComputedStyle(t).transformOrigin.split(" ").map(_=>parseFloat(_)),[o,l]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let c=n.left+n.width/2;o==="left"||l==="left"?c-=n.width/2:(o==="right"||l==="right")&&(c+=n.width/2);let f=n.top+n.height/2;o==="top"||l==="top"?f-=n.height/2:(o==="bottom"||l==="bottom")&&(f+=n.height/2);const d=n.width/a.width,A=n.height/a.height,m=Math.max(1,d,A),p=d/m||0,h=A/m||0,y=a.width*a.height/(window.innerWidth*window.innerHeight),g=y>.12?Math.min(1.5,(y-.12)*10+1):1;return{x:c-(r+a.left),y:f-(s+a.top),sx:p,sy:h,speed:g}}const Bje=Li("fab-transition","center center","out-in"),Tje=Li("dialog-bottom-transition"),Ije=Li("dialog-top-transition"),sg=Li("fade-transition"),u4=Li("scale-transition"),Fje=Li("scroll-x-transition"),Pje=Li("scroll-x-reverse-transition"),Dje=Li("scroll-y-transition"),Uje=Li("scroll-y-reverse-transition"),Rje=Li("slide-x-transition"),Nje=Li("slide-x-reverse-transition"),c4=Li("slide-y-transition"),Vje=Li("slide-y-reverse-transition"),tb=tQ("expand-transition",nQ()),d4=tQ("expand-x-transition",nQ("",!0)),Lje=ot({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Gn=St(!1)({name:"VDefaultsProvider",props:Lje(),setup(e,t){let{slots:n}=t;const{defaults:a,disabled:r,reset:s,root:o,scoped:l}=MA(e);return kr(a,{reset:s,root:o,scoped:l,disabled:r}),()=>n.default?.()}}),$r=ot({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Qr(e){return{dimensionStyles:ee(()=>{const n={},a=Zt(e.height),r=Zt(e.maxHeight),s=Zt(e.maxWidth),o=Zt(e.minHeight),l=Zt(e.minWidth),c=Zt(e.width);return a!=null&&(n.height=a),r!=null&&(n.maxHeight=r),s!=null&&(n.maxWidth=s),o!=null&&(n.minHeight=o),l!=null&&(n.minWidth=l),c!=null&&(n.width=c),n})}}function Mje(e){return{aspectStyles:ee(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const aQ=ot({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...nn(),...$r()},"VResponsive"),nk=St()({name:"VResponsive",props:aQ(),setup(e,t){let{slots:n}=t;const{aspectStyles:a}=Mje(e),{dimensionStyles:r}=Qr(e);return It(()=>v("div",{class:lt(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:Mt([r.value,e.style])},[v("div",{class:"v-responsive__sizer",style:Mt(a.value)},null),n.additional?.(),n.default&&v("div",{class:lt(["v-responsive__content",e.contentClass])},[n.default()])])),{}}});function f4(e){return gB(()=>{const t=Uu(e),n=[],a={};if(t.background)if(IS(t.background)){if(a.backgroundColor=t.background,!t.text&&Ute(t.background)){const r=Ti(t.background);if(r.a==null||r.a===1){const s=n5(r);a.color=s,a.caretColor=s}}}else n.push(`bg-${t.background}`);return t.text&&(IS(t.text)?(a.color=t.text,a.caretColor=t.text):n.push(`text-${t.text}`)),{colorClasses:n,colorStyles:a}})}function $s(e){const{colorClasses:t,colorStyles:n}=f4(()=>({text:Uu(e)}));return{textColorClasses:t,textColorStyles:n}}function La(e){const{colorClasses:t,colorStyles:n}=f4(()=>({background:Uu(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}const dr=ot({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Tr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gu();return{roundedClasses:ee(()=>{const a=ts(e)?e.value:e.rounded,r=ts(e)?e.value:e.tile,s=[];if(r||a===!1)s.push("rounded-0");else if(a===!0||a==="")s.push(`${t}--rounded`);else if(typeof a=="string"||a===0)for(const o of String(a).split(" "))s.push(`rounded-${o}`);return s})}}const iu=ot({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),So=(e,t)=>{let{slots:n}=t;const{transition:a,disabled:r,group:s,...o}=e,{component:l=s?mB:jd,...c}=F0(a)?a:{};let f;return F0(a)?f=Ie(c,hte({disabled:r,group:s}),o):f=Ie({name:r||!a?"":a},o),nu(l,f,n)};function Oje(e,t){if(!vB)return;const n=t.modifiers||{},a=t.value,{handler:r,options:s}=typeof a=="object"?a:{handler:a,options:{}},o=new IntersectionObserver(function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1?arguments[1]:void 0;const f=e._observe?.[t.instance.$.uid];if(!f)return;const d=l.some(A=>A.isIntersecting);r&&(!n.quiet||f.init)&&(!n.once||d||f.init)&&r(d,l,c),d&&n.once?rQ(e,t):f.init=!0},s);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:o},o.observe(e)}function rQ(e,t){const n=e._observe?.[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const Jl={mounted:Oje,unmounted:rQ},sQ=ot({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...aQ(),...nn(),...dr(),...iu()},"VImg"),zc=St()({name:"VImg",directives:{vIntersect:Jl},props:sQ(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{backgroundColorClasses:r,backgroundColorStyles:s}=La(()=>e.color),{roundedClasses:o}=Tr(e),l=Nr("VImg"),c=Gt(""),f=R(),d=Gt(e.eager?"loading":"idle"),A=Gt(),m=Gt(),p=ee(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),h=ee(()=>p.value.aspect||A.value/m.value||0);Ge(()=>e.src,()=>{y(d.value!=="idle")}),Ge(h,(L,H)=>{!L&&H&&f.value&&B(f.value)}),tu(()=>y());function y(L){if(!(e.eager&&L)&&!(vB&&!L&&!e.eager)){if(d.value="loading",p.value.lazySrc){const H=new Image;H.src=p.value.lazySrc,B(H,null)}p.value.src&&Cn(()=>{n("loadstart",f.value?.currentSrc||p.value.src),setTimeout(()=>{if(!l.isUnmounted)if(f.value?.complete){if(f.value.naturalWidth||_(),d.value==="error")return;h.value||B(f.value,null),d.value==="loading"&&g()}else h.value||B(f.value),b()})})}}function g(){l.isUnmounted||(b(),B(f.value),d.value="loaded",n("load",f.value?.currentSrc||p.value.src))}function _(){l.isUnmounted||(d.value="error",n("error",f.value?.currentSrc||p.value.src))}function b(){const L=f.value;L&&(c.value=L.currentSrc||L.src)}let S=-1;ha(()=>{clearTimeout(S)});function B(L){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const oe=()=>{if(clearTimeout(S),l.isUnmounted)return;const{naturalHeight:de,naturalWidth:te}=L;de||te?(A.value=te,m.value=de):!L.complete&&d.value==="loading"&&H!=null?S=window.setTimeout(oe,H):(L.currentSrc.endsWith(".svg")||L.currentSrc.startsWith("data:image/svg+xml"))&&(A.value=1,m.value=1)};oe()}const F=qe(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),T=()=>{if(!p.value.src||d.value==="idle")return null;const L=v("img",{class:lt(["v-img__img",F.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:p.value.src,srcset:p.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:f,onLoad:g,onError:_},null),H=a.sources?.();return i(So,{transition:e.transition,appear:!0},{default:()=>[Sa(H?v("picture",{class:"v-img__picture"},[H,L]):L,[[fi,d.value==="loaded"]])]})},E=()=>i(So,{transition:e.transition},{default:()=>[p.value.lazySrc&&d.value!=="loaded"&&v("img",{class:lt(["v-img__img","v-img__img--preload",F.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:p.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),x=()=>a.placeholder?i(So,{transition:e.transition,appear:!0},{default:()=>[(d.value==="loading"||d.value==="error"&&!a.error)&&v("div",{class:"v-img__placeholder"},[a.placeholder()])]}):null,C=()=>a.error?i(So,{transition:e.transition,appear:!0},{default:()=>[d.value==="error"&&v("div",{class:"v-img__error"},[a.error()])]}):null,D=()=>e.gradient?v("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,U=Gt(!1);{const L=Ge(h,H=>{H&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{U.value=!0})}),L())})}return It(()=>{const L=nk.filterProps(e);return Sa(i(nk,Ie({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!U.value},r.value,o.value,e.class],style:[{width:Zt(e.width==="auto"?A.value:e.width)},s.value,e.style]},L,{aspectRatio:h.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>v(ze,null,[i(T,null,null),i(E,null,null),i(D,null,null),i(x,null,null),i(C,null,null)]),default:a.default}),[[Jl,{handler:y,options:e.options},null,{once:!0}]])}),{currentSrc:c,image:f,state:d,naturalWidth:A,naturalHeight:m}}}),Yo=ot({border:[Boolean,Number,String]},"border");function vi(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gu();return{borderClasses:ee(()=>{const a=e.border;return a===!0||a===""?`${t}--border`:typeof a=="string"||a===0?String(a).split(" ").map(r=>`border-${r}`):[]})}}const rs=ot({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function Is(e){return{elevationClasses:qe(()=>{const n=ts(e)?e.value:e.elevation;return n==null?[]:[`elevation-${n}`]})}}const Hje=[null,"prominent","default","comfortable","compact"],oQ=ot({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Hje.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Yo(),...nn(),...rs(),...dr(),...$n({tag:"header"}),...Aa()},"VToolbar"),ak=St()({name:"VToolbar",props:oQ(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=La(()=>e.color),{borderClasses:s}=vi(e),{elevationClasses:o}=Is(e),{roundedClasses:l}=Tr(e),{themeClasses:c}=Ra(e),{rtlClasses:f}=as(),d=Gt(e.extended===null?!!n.extension?.():e.extended),A=ee(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),m=ee(()=>d.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return kr({VBtn:{variant:"text"}}),It(()=>{const p=!!(e.title||n.title),h=!!(n.image||e.image),y=n.extension?.();return d.value=e.extended===null?!!y:e.extended,i(e.tag,{class:lt(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,s.value,o.value,l.value,c.value,f.value,e.class]),style:Mt([r.value,e.style])},{default:()=>[h&&v("div",{key:"image",class:"v-toolbar__image"},[n.image?i(Gn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):i(zc,{key:"image-img",cover:!0,src:e.image},null)]),i(Gn,{defaults:{VTabs:{height:Zt(A.value)}}},{default:()=>[v("div",{class:"v-toolbar__content",style:{height:Zt(A.value)}},[n.prepend&&v("div",{class:"v-toolbar__prepend"},[n.prepend?.()]),p&&i(l4,{key:"title",text:e.title},{text:n.title}),n.default?.(),n.append&&v("div",{class:"v-toolbar__append"},[n.append?.()])])]}),i(Gn,{defaults:{VTabs:{height:Zt(m.value)}}},{default:()=>[i(tb,null,{default:()=>[d.value&&v("div",{class:"v-toolbar__extension",style:{height:Zt(m.value)}},[y])]})]})]})}),{contentHeight:A,extensionHeight:m}}}),$je=ot({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Qje(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let a=0,r=0;const s=R(null),o=Gt(0),l=Gt(0),c=Gt(0),f=Gt(!1),d=Gt(!1),A=ee(()=>Number(e.scrollThreshold)),m=ee(()=>ar((A.value-o.value)/A.value||0)),p=()=>{const h=s.value;if(!h||n&&!n.value)return;a=o.value,o.value="window"in h?h.pageYOffset:h.scrollTop;const y=h instanceof Window?document.documentElement.scrollHeight:h.scrollHeight;if(r!==y){r=y;return}d.value=o.value<a,c.value=Math.abs(o.value-A.value)};return Ge(d,()=>{l.value=l.value||o.value}),Ge(f,()=>{l.value=0}),An(()=>{Ge(()=>e.scrollTarget,h=>{const y=h?document.querySelector(h):window;y&&y!==s.value&&(s.value?.removeEventListener("scroll",p),s.value=y,s.value.addEventListener("scroll",p,{passive:!0}))},{immediate:!0})}),ha(()=>{s.value?.removeEventListener("scroll",p)}),n&&Ge(n,p,{immediate:!0}),{scrollThreshold:A,currentScroll:o,currentThreshold:c,isScrollActive:f,scrollRatio:m,isScrollingUp:d,savedScroll:l}}function tm(){const e=Gt(!1);return An(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:qe(()=>e.value?void 0:{transition:"none !important"}),isBooted:uh(e)}}const Gje=ot({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...oQ(),...QA(),...$je(),height:{type:[Number,String],default:64}},"VAppBar"),zje=St()({name:"VAppBar",props:Gje(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=R(),r=fn(e,"modelValue"),s=ee(()=>{const b=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:b.has("hide"),fullyHide:b.has("fully-hide"),inverted:b.has("inverted"),collapse:b.has("collapse"),elevate:b.has("elevate"),fadeImage:b.has("fade-image")}}),o=ee(()=>{const b=s.value;return b.hide||b.fullyHide||b.inverted||b.collapse||b.elevate||b.fadeImage||!r.value}),{currentScroll:l,scrollThreshold:c,isScrollingUp:f,scrollRatio:d}=Qje(e,{canScroll:o}),A=qe(()=>s.value.hide||s.value.fullyHide),m=ee(()=>e.collapse||s.value.collapse&&(s.value.inverted?d.value>0:d.value===0)),p=ee(()=>e.flat||s.value.fullyHide&&!r.value||s.value.elevate&&(s.value.inverted?l.value>0:l.value===0)),h=ee(()=>s.value.fadeImage?s.value.inverted?1-d.value:d.value:void 0),y=ee(()=>{if(s.value.hide&&s.value.inverted)return 0;const b=a.value?.contentHeight??0,S=a.value?.extensionHeight??0;return A.value?l.value<c.value||s.value.fullyHide?b+S:b:b+S});ko(()=>!!e.scrollBehavior,()=>{Er(()=>{A.value?s.value.inverted?r.value=l.value>c.value:r.value=f.value||l.value<c.value:r.value=!0})});const{ssrBootStyles:g}=tm(),{layoutItemStyles:_}=GA({id:e.name,order:ee(()=>parseInt(e.order,10)),position:qe(()=>e.location),layoutSize:y,elementSize:Gt(void 0),active:r,absolute:qe(()=>e.absolute)});return It(()=>{const b=ak.filterProps(e);return i(ak,Ie({ref:a,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{..._.value,"--v-toolbar-image-opacity":h.value,height:void 0,...g.value},e.style]},b,{collapse:m.value,flat:p.value}),n)}),{}}}),Wje=[null,"default","comfortable","compact"],ps=ot({density:{type:String,default:"default",validator:e=>Wje.includes(e)}},"density");function Uo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gu();return{densityClasses:qe(()=>`${t}--density-${e.density}`)}}const Kje=["elevated","flat","tonal","outlined","text","plain"];function hf(e,t){return v(ze,null,[e&&v("span",{key:"overlay",class:lt(`${t}__overlay`)},null),v("span",{key:"underlay",class:lt(`${t}__underlay`)},null)])}const hl=ot({color:String,variant:{type:String,default:"elevated",validator:e=>Kje.includes(e)}},"variant");function nm(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gu();const n=qe(()=>{const{variant:s}=Uu(e);return`${t}--variant-${s}`}),{colorClasses:a,colorStyles:r}=f4(()=>{const{variant:s,color:o}=Uu(e);return{[["elevated","flat"].includes(s)?"background":"text"]:o}});return{colorClasses:a,colorStyles:r,variantClasses:n}}const iQ=ot({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...Yo(),...nn(),...ps(),...rs(),...dr(),...$n(),...Aa(),...hl()},"VBtnGroup"),rk=St()({name:"VBtnGroup",props:iQ(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ra(e),{densityClasses:r}=Uo(e),{borderClasses:s}=vi(e),{elevationClasses:o}=Is(e),{roundedClasses:l}=Tr(e);kr({VBtn:{height:qe(()=>e.direction==="horizontal"?"auto":null),baseColor:qe(()=>e.baseColor),color:qe(()=>e.color),density:qe(()=>e.density),flat:!0,variant:qe(()=>e.variant)}}),It(()=>i(e.tag,{class:lt(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},a.value,s.value,r.value,o.value,l.value,e.class]),style:Mt(e.style)},n))}}),am=ot({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),rm=ot({value:null,disabled:Boolean,selectedClass:String},"group-item");function sm(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const a=Nr("useGroupItem");if(!a)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const r=qo();za(Symbol.for(`${t.description}:id`),r);const s=Pn(t,null);if(!s){if(!n)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const o=qe(()=>e.value),l=ee(()=>!!(s.disabled.value||e.disabled));s.register({id:r,value:o,disabled:l},a),ha(()=>{s.unregister(r)});const c=ee(()=>s.isSelected(r)),f=ee(()=>s.items.value[0].id===r),d=ee(()=>s.items.value[s.items.value.length-1].id===r),A=ee(()=>c.value&&[s.selectedClass.value,e.selectedClass]);return Ge(c,m=>{a.emit("group:selected",{value:m})},{flush:"sync"}),{id:r,isSelected:c,isFirst:f,isLast:d,toggle:()=>s.select(r,!c.value),select:m=>s.select(r,m),selectedClass:A,value:o,disabled:l,group:s}}function pf(e,t){let n=!1;const a=As([]),r=fn(e,"modelValue",[],m=>m==null?[]:lQ(a,xr(m)),m=>{const p=qje(a,m);return e.multiple?p:p[0]}),s=Nr("useGroup");function o(m,p){const h=m,y=Symbol.for(`${t.description}:id`),_=av(y,s?.vnode).indexOf(p);Oe(h.value)==null&&(h.value=_,h.useIndexAsValue=!0),_>-1?a.splice(_,0,h):a.push(h)}function l(m){if(n)return;c();const p=a.findIndex(h=>h.id===m);a.splice(p,1)}function c(){const m=a.find(p=>!p.disabled);m&&e.mandatory==="force"&&!r.value.length&&(r.value=[m.id])}An(()=>{c()}),ha(()=>{n=!0}),ow(()=>{for(let m=0;m<a.length;m++)a[m].useIndexAsValue&&(a[m].value=m)});function f(m,p){const h=a.find(y=>y.id===m);if(!(p&&h?.disabled))if(e.multiple){const y=r.value.slice(),g=y.findIndex(b=>b===m),_=~g;if(p=p??!_,_&&e.mandatory&&y.length<=1||!_&&e.max!=null&&y.length+1>e.max)return;g<0&&p?y.push(m):g>=0&&!p&&y.splice(g,1),r.value=y}else{const y=r.value.includes(m);if(e.mandatory&&y||!y&&!p)return;r.value=p??!y?[m]:[]}}function d(m){if(e.multiple,r.value.length){const p=r.value[0],h=a.findIndex(_=>_.id===p);let y=(h+m)%a.length,g=a[y];for(;g.disabled&&y!==h;)y=(y+m)%a.length,g=a[y];if(g.disabled)return;r.value=[a[y].id]}else{const p=a.find(h=>!h.disabled);p&&(r.value=[p.id])}}const A={register:o,unregister:l,selected:r,select:f,disabled:qe(()=>e.disabled),prev:()=>d(a.length-1),next:()=>d(1),isSelected:m=>r.value.includes(m),selectedClass:qe(()=>e.selectedClass),items:qe(()=>a),getItemIndex:m=>jje(a,m)};return za(t,A),A}function jje(e,t){const n=lQ(e,[t]);return n.length?e.findIndex(a=>a.id===n[0]):-1}function lQ(e,t){const n=[];return t.forEach(a=>{const r=e.find(o=>ks(a,o.value)),s=e[a];r?.value!=null?n.push(r.id):s?.useIndexAsValue&&n.push(s.id)}),n}function qje(e,t){const n=[];return t.forEach(a=>{const r=e.findIndex(s=>s.id===a);if(~r){const s=e[r];n.push(s.value!=null?s.value:r)}}),n}const A4=Symbol.for("vuetify:v-btn-toggle"),Yje=ot({...iQ(),...am()},"VBtnToggle"),Xje=St()({name:"VBtnToggle",props:Yje(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:a,next:r,prev:s,select:o,selected:l}=pf(e,A4);return It(()=>{const c=rk.filterProps(e);return i(rk,Ie({class:["v-btn-toggle",e.class]},c,{style:e.style}),{default:()=>[n.default?.({isSelected:a,next:r,prev:s,select:o,selected:l})]})}),{next:r,prev:s,select:o}}}),Jje=["x-small","small","default","large","x-large"],Xu=ot({size:{type:[String,Number],default:"default"}},"size");function Ih(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gu();return gB(()=>{const n=e.size;let a,r;return R_(Jje,n)?a=`${t}--size-${n}`:n&&(r={width:Zt(n),height:Zt(n)}),{sizeClasses:a,sizeStyles:r}})}const Zje=ot({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:vn,opacity:[String,Number],...nn(),...Xu(),...$n({tag:"i"}),...Aa()},"VIcon"),Da=St()({name:"VIcon",props:Zje(),setup(e,t){let{attrs:n,slots:a}=t;const r=Gt(),{themeClasses:s}=TB(),{iconData:o}=Zne(()=>r.value||e.icon),{sizeClasses:l}=Ih(e),{textColorClasses:c,textColorStyles:f}=$s(()=>e.color);return It(()=>{const d=a.default?.();d&&(r.value=O8(d).filter(m=>m.type===yg&&m.children&&typeof m.children=="string")[0]?.children);const A=!!(n.onClick||n.onClickOnce);return i(o.value.component,{tag:e.tag,icon:o.value.icon,class:lt(["v-icon","notranslate",s.value,l.value,c.value,{"v-icon--clickable":A,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:Mt([{"--v-icon-opacity":e.opacity},l.value?void 0:{fontSize:Zt(e.size),height:Zt(e.size),width:Zt(e.size)},f.value,e.style]),role:A?"button":void 0,"aria-hidden":!A,tabindex:A?e.disabled?-1:0:void 0},{default:()=>[d]})}),{}}});function Wg(e,t){const n=R(),a=Gt(!1);if(vB){const r=new IntersectionObserver(s=>{a.value=!!s.find(o=>o.isIntersecting)},t);hs(()=>{r.disconnect()}),Ge(n,(s,o)=>{o&&(r.unobserve(o),a.value=!1),s&&r.observe(s)},{flush:"post"})}return{intersectionRef:n,isIntersecting:a}}const eqe=ot({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...nn(),...Xu(),...$n({tag:"div"}),...Aa()},"VProgressCircular"),BA=St()({name:"VProgressCircular",props:eqe(),setup(e,t){let{slots:n}=t;const a=20,r=2*Math.PI*a,s=R(),{themeClasses:o}=Ra(e),{sizeClasses:l,sizeStyles:c}=Ih(e),{textColorClasses:f,textColorStyles:d}=$s(()=>e.color),{textColorClasses:A,textColorStyles:m}=$s(()=>e.bgColor),{intersectionRef:p,isIntersecting:h}=Wg(),{resizeRef:y,contentRect:g}=Kl(),_=qe(()=>ar(parseFloat(e.modelValue),0,100)),b=qe(()=>Number(e.width)),S=qe(()=>c.value?Number(e.size):g.value?g.value.width:Math.max(b.value,32)),B=qe(()=>a/(1-b.value/S.value)*2),F=qe(()=>b.value/S.value*B.value),T=qe(()=>Zt((100-_.value)/100*r));return Er(()=>{p.value=s.value,y.value=s.value}),It(()=>i(e.tag,{ref:s,class:lt(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":h.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},o.value,l.value,f.value,e.class]),style:Mt([c.value,d.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:_.value},{default:()=>[v("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${B.value} ${B.value}`},[v("circle",{class:lt(["v-progress-circular__underlay",A.value]),style:Mt(m.value),fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":F.value,"stroke-dasharray":r,"stroke-dashoffset":0},null),v("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":F.value,"stroke-dasharray":r,"stroke-dashoffset":T.value},null)]),n.default&&v("div",{class:"v-progress-circular__content"},[n.default({value:_.value})])]})),{}}}),IN={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Jc=ot({location:String},"location");function om(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:a}=as();return{locationStyles:ee(()=>{if(!e.location)return{};const{side:s,align:o}=BS(e.location.split(" ").length>1?e.location:`${e.location} center`,a.value);function l(f){return n?n(f):0}const c={};return s!=="center"&&(t?c[IN[s]]=`calc(100% - ${l(s)}px)`:c[s]=0),o!=="center"?t?c[IN[o]]=`calc(100% - ${l(o)}px)`:c[o]=0:(s==="center"?c.top=c.left="50%":c[{top:"left",bottom:"left",left:"top",right:"top"}[s]]="50%",c.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[s]),c})}}const tqe=ot({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...nn(),...Jc({location:"top"}),...dr(),...$n(),...Aa()},"VProgressLinear"),nb=St()({name:"VProgressLinear",props:tqe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"modelValue"),{isRtl:r,rtlClasses:s}=as(),{themeClasses:o}=Ra(e),{locationStyles:l}=om(e),{textColorClasses:c,textColorStyles:f}=$s(()=>e.color),{backgroundColorClasses:d,backgroundColorStyles:A}=La(()=>e.bgColor||e.color),{backgroundColorClasses:m,backgroundColorStyles:p}=La(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:h,backgroundColorStyles:y}=La(()=>e.color),{roundedClasses:g}=Tr(e),{intersectionRef:_,isIntersecting:b}=Wg(),S=ee(()=>parseFloat(e.max)),B=ee(()=>parseFloat(e.height)),F=ee(()=>ar(parseFloat(e.bufferValue)/S.value*100,0,100)),T=ee(()=>ar(parseFloat(a.value)/S.value*100,0,100)),E=ee(()=>r.value!==e.reverse),x=ee(()=>e.indeterminate?"fade-transition":"slide-x-transition");function C(D){if(!_.value)return;const{left:U,right:L,width:H}=_.value.getBoundingClientRect(),oe=E.value?H-D.clientX+(L-H):D.clientX-U;a.value=Math.round(oe/H*S.value)}return It(()=>i(e.tag,{ref:_,class:lt(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&b.value,"v-progress-linear--reverse":E.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},g.value,o.value,s.value,e.class]),style:Mt([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?Zt(B.value):0,"--v-progress-linear-height":Zt(B.value),...e.absolute?l.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(a.value),S.value),onClick:e.clickable&&C},{default:()=>[e.stream&&v("div",{key:"stream",class:lt(["v-progress-linear__stream",c.value]),style:{...f.value,[E.value?"left":"right"]:Zt(-B.value),borderTop:`${Zt(B.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${Zt(B.value/4)})`,width:Zt(100-F.value,"%"),"--v-progress-linear-stream-to":Zt(B.value*(E.value?1:-1))}},null),v("div",{class:lt(["v-progress-linear__background",d.value]),style:Mt([A.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),v("div",{class:lt(["v-progress-linear__buffer",m.value]),style:Mt([p.value,{opacity:parseFloat(e.bufferOpacity),width:Zt(F.value,"%")}])},null),i(jd,{name:x.value},{default:()=>[e.indeterminate?v("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(D=>v("div",{key:D,class:lt(["v-progress-linear__indeterminate",D,h.value]),style:Mt(y.value)},null))]):v("div",{class:lt(["v-progress-linear__determinate",h.value]),style:Mt([y.value,{width:Zt(T.value,"%")}])},null)]}),n.default&&v("div",{class:"v-progress-linear__content"},[n.default({value:T.value,buffer:F.value})])]})),{}}}),ab=ot({loading:[Boolean,String]},"loader");function Kg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gu();return{loaderClasses:qe(()=>({[`${t}--loading`]:e.loading}))}}function jg(e,t){let{slots:n}=t;return v("div",{class:lt(`${e.name}__loader`)},[n.default?.({color:e.color,isActive:e.active})||i(nb,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const nqe=["static","relative","fixed","absolute","sticky"],Fh=ot({position:{type:String,validator:e=>nqe.includes(e)}},"position");function Ph(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gu();return{positionClasses:qe(()=>e.position?`${t}--${e.position}`:void 0)}}function aqe(){const e=Nr("useRoute");return ee(()=>e?.proxy?.$route)}function uQ(){return Nr("useRouter")?.proxy?.$router}function qg(e,t){const n=iw("RouterLink"),a=qe(()=>!!(e.href||e.to)),r=ee(()=>a?.value||tD(t,"click")||tD(e,"click"));if(typeof n=="string"||!("useLink"in n)){const d=qe(()=>e.href);return{isLink:a,isClickable:r,href:d,linkProps:As({href:d})}}const s=n.useLink({to:qe(()=>e.to||""),replace:qe(()=>e.replace)}),o=ee(()=>e.to?s:void 0),l=aqe(),c=ee(()=>o.value?e.exact?l.value?o.value.isExactActive?.value&&ks(o.value.route.value.query,l.value.query):o.value.isExactActive?.value??!1:o.value.isActive?.value??!1:!1),f=ee(()=>e.to?o.value?.route.value.href:e.href);return{isLink:a,isClickable:r,isActive:c,route:o.value?.route,navigate:o.value?.navigate,href:f,linkProps:As({href:f,"aria-current":qe(()=>c.value?"page":void 0)})}}const Yg=ot({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let KC=!1;function rqe(e,t){let n=!1,a,r;Ua&&e?.beforeEach&&(Cn(()=>{window.addEventListener("popstate",s),a=e.beforeEach((o,l,c)=>{KC?n?t(c):c():setTimeout(()=>n?t(c):c()),KC=!0}),r=e?.afterEach(()=>{KC=!1})}),hs(()=>{window.removeEventListener("popstate",s),a?.(),r?.()}));function s(o){o.state?.replaced||(n=!0,setTimeout(()=>n=!1))}}function sqe(e,t){Ge(()=>e.isActive?.value,n=>{e.isLink.value&&n!=null&&t&&Cn(()=>{t(n)})},{immediate:!0})}const sk=Symbol("rippleStop"),oqe=80;function FN(e,t){e.style.transform=t,e.style.webkitTransform=t}function ok(e){return e.constructor.name==="TouchEvent"}function cQ(e){return e.constructor.name==="KeyboardEvent"}const iqe=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=0,r=0;if(!cQ(e)){const A=t.getBoundingClientRect(),m=ok(e)?e.touches[e.touches.length-1]:e;a=m.clientX-A.left,r=m.clientY-A.top}let s=0,o=.3;t._ripple?.circle?(o=.15,s=t.clientWidth/2,s=n.center?s:s+Math.sqrt((a-s)**2+(r-s)**2)/4):s=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const l=`${(t.clientWidth-s*2)/2}px`,c=`${(t.clientHeight-s*2)/2}px`,f=n.center?l:`${a-s}px`,d=n.center?c:`${r-s}px`;return{radius:s,scale:o,x:f,y:d,centerX:l,centerY:c}},U2={show(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t?._ripple?.enabled)return;const a=document.createElement("span"),r=document.createElement("span");a.appendChild(r),a.className="v-ripple__container",n.class&&(a.className+=` ${n.class}`);const{radius:s,scale:o,x:l,y:c,centerX:f,centerY:d}=iqe(e,t,n),A=`${s*2}px`;r.className="v-ripple__animation",r.style.width=A,r.style.height=A,t.appendChild(a);const m=window.getComputedStyle(t);m&&m.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),r.classList.add("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--visible"),FN(r,`translate(${l}, ${c}) scale3d(${o},${o},${o})`),r.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.classList.remove("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--in"),FN(r,`translate(${f}, ${d}) scale3d(1,1,1)`)})})},hide(e){if(!e?._ripple?.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=Array.from(t).findLast(s=>!s.dataset.isHiding);if(n)n.dataset.isHiding="true";else return;const a=performance.now()-Number(n.dataset.activated),r=Math.max(250-a,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode?.parentNode===e&&e.removeChild(n.parentNode)},300)},r)}};function dQ(e){return typeof e>"u"||!!e}function og(e){const t={},n=e.currentTarget;if(!(!n?._ripple||n._ripple.touched||e[sk])){if(e[sk]=!0,ok(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||cQ(e),n._ripple.class&&(t.class=n._ripple.class),ok(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{U2.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{n?._ripple?.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},oqe)}else U2.show(e,n,t)}}function PN(e){e[sk]=!0}function ki(e){const t=e.currentTarget;if(t?._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{ki(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),U2.hide(t)}}function fQ(e){const t=e.currentTarget;t?._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let ig=!1;function DN(e,t){!ig&&t.includes(e.key)&&(ig=!0,og(e))}function AQ(e){ig=!1,ki(e)}function mQ(e){ig&&(ig=!1,ki(e))}function vQ(e,t,n){const{value:a,modifiers:r}=t,s=dQ(a);s||U2.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=s,e._ripple.centered=r.center,e._ripple.circle=r.circle;const o=F0(a)?a:{};o.class&&(e._ripple.class=o.class);const l=o.keys??["Enter","Space"];if(e._ripple.keyDownHandler=c=>DN(c,l),s&&!n){if(r.stop){e.addEventListener("touchstart",PN,{passive:!0}),e.addEventListener("mousedown",PN);return}e.addEventListener("touchstart",og,{passive:!0}),e.addEventListener("touchend",ki,{passive:!0}),e.addEventListener("touchmove",fQ,{passive:!0}),e.addEventListener("touchcancel",ki),e.addEventListener("mousedown",og),e.addEventListener("mouseup",ki),e.addEventListener("mouseleave",ki),e.addEventListener("keydown",c=>DN(c,l)),e.addEventListener("keyup",AQ),e.addEventListener("blur",mQ),e.addEventListener("dragstart",ki,{passive:!0})}else!s&&n&&hQ(e)}function hQ(e){e.removeEventListener("mousedown",og),e.removeEventListener("touchstart",og),e.removeEventListener("touchend",ki),e.removeEventListener("touchmove",fQ),e.removeEventListener("touchcancel",ki),e.removeEventListener("mouseup",ki),e.removeEventListener("mouseleave",ki),e._ripple?.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",AQ),e.removeEventListener("dragstart",ki),e.removeEventListener("blur",mQ)}function lqe(e,t){vQ(e,t,!1)}function uqe(e){hQ(e),delete e._ripple}function cqe(e,t){if(t.value===t.oldValue)return;const n=dQ(t.oldValue);vQ(e,t,n)}const Po={mounted:lqe,unmounted:uqe,updated:cqe},rb=ot({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:A4},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:vn,appendIcon:vn,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...Yo(),...nn(),...ps(),...$r(),...rs(),...rm(),...ab(),...Jc(),...Fh(),...dr(),...Yg(),...Xu(),...$n({tag:"button"}),...Aa(),...hl({variant:"elevated"})},"VBtn"),ta=St()({name:"VBtn",props:rb(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=Ra(e),{borderClasses:s}=vi(e),{densityClasses:o}=Uo(e),{dimensionStyles:l}=Qr(e),{elevationClasses:c}=Is(e),{loaderClasses:f}=Kg(e),{locationStyles:d}=om(e),{positionClasses:A}=Ph(e),{roundedClasses:m}=Tr(e),{sizeClasses:p,sizeStyles:h}=Ih(e),y=sm(e,e.symbol,!1),g=qg(e,n),_=ee(()=>e.active!==void 0?e.active:g.isLink.value?g.isActive?.value:y?.isSelected.value),b=qe(()=>_.value?e.activeColor??e.color:e.color),S=ee(()=>({color:y?.isSelected.value&&(!g.isLink.value||g.isActive?.value)||!y||g.isActive?.value?b.value??e.baseColor:e.baseColor,variant:e.variant})),{colorClasses:B,colorStyles:F,variantClasses:T}=nm(S),E=ee(()=>y?.disabled.value||e.disabled),x=qe(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),C=ee(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function D(U){E.value||g.isLink.value&&(U.metaKey||U.ctrlKey||U.shiftKey||U.button!==0||n.target==="_blank")||(g.navigate?.(U),y?.toggle())}return sqe(g,y?.select),It(()=>{const U=g.isLink.value?"a":e.tag,L=!!(e.prependIcon||a.prepend),H=!!(e.appendIcon||a.append),oe=!!(e.icon&&e.icon!==!0);return Sa(i(U,Ie({type:U==="a"?void 0:"button",class:["v-btn",y?.selectedClass.value,{"v-btn--active":_.value,"v-btn--block":e.block,"v-btn--disabled":E.value,"v-btn--elevated":x.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},r.value,s.value,B.value,o.value,c.value,f.value,A.value,m.value,p.value,T.value,e.class],style:[F.value,l.value,d.value,h.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:E.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:D,value:C.value},g.linkProps),{default:()=>[hf(!0,"v-btn"),!e.icon&&L&&v("span",{key:"prepend",class:"v-btn__prepend"},[a.prepend?i(Gn,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},a.prepend):i(Da,{key:"prepend-icon",icon:e.prependIcon},null)]),v("span",{class:"v-btn__content","data-no-activator":""},[!a.default&&oe?i(Da,{key:"content-icon",icon:e.icon},null):i(Gn,{key:"content-defaults",disabled:!oe,defaults:{VIcon:{icon:e.icon}}},{default:()=>[a.default?.()??K(e.text)]})]),!e.icon&&H&&v("span",{key:"append",class:"v-btn__append"},[a.append?i(Gn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},a.append):i(Da,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&v("span",{key:"loader",class:"v-btn__loader"},[a.loader?.()??i(BA,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[Po,!E.value&&e.ripple,"",{center:!!e.icon}]])}),{group:y}}}),dqe=ot({...rb({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),fqe=St()({name:"VAppBarNavIcon",props:dqe(),setup(e,t){let{slots:n}=t;return It(()=>i(ta,Ie(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),Aqe=St()({name:"VAppBarTitle",props:eQ(),setup(e,t){let{slots:n}=t;return It(()=>i(l4,Ie(e,{class:"v-app-bar-title"}),n)),{}}}),pQ=qc("v-alert-title"),mqe=ot({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function vqe(e,t){return{iconSize:ee(()=>{const a=new Map(e.iconSizes),r=e.iconSize??t()??"default";return a.has(r)?a.get(r):r})}}const hqe=["success","info","warning","error"],pqe=ot({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:vn,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>hqe.includes(e)},...nn(),...ps(),...$r(),...rs(),...mqe(),...Jc(),...Fh(),...dr(),...$n(),...Aa(),...hl({variant:"flat"})},"VAlert"),gqe=St()({name:"VAlert",props:pqe(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=fn(e,"modelValue"),s=qe(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:o}=vqe(e,()=>e.prominent?44:void 0),{themeClasses:l}=Ra(e),{colorClasses:c,colorStyles:f,variantClasses:d}=nm(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:A}=Uo(e),{dimensionStyles:m}=Qr(e),{elevationClasses:p}=Is(e),{locationStyles:h}=om(e),{positionClasses:y}=Ph(e),{roundedClasses:g}=Tr(e),{textColorClasses:_,textColorStyles:b}=$s(()=>e.borderColor),{t:S}=Ka(),B=qe(()=>({"aria-label":S(e.closeLabel),onClick(F){r.value=!1,n("click:close",F)}}));return()=>{const F=!!(a.prepend||s.value),T=!!(a.title||e.title),E=!!(a.close||e.closable),x={density:e.density,icon:s.value,size:e.iconSize||e.prominent?o.value:void 0};return r.value&&i(e.tag,{class:lt(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},l.value,c.value,A.value,p.value,y.value,g.value,d.value,e.class]),style:Mt([f.value,m.value,h.value,e.style]),role:"alert"},{default:()=>[hf(!1,"v-alert"),e.border&&v("div",{key:"border",class:lt(["v-alert__border",_.value]),style:Mt(b.value)},null),F&&v("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?i(Gn,{key:"prepend-defaults",disabled:!s.value,defaults:{VIcon:{...x}}},a.prepend):i(Da,Ie({key:"prepend-icon"},x),null)]),v("div",{class:"v-alert__content"},[T&&i(pQ,{key:"title"},{default:()=>[a.title?.()??e.title]}),a.text?.()??e.text,a.default?.()]),a.append&&v("div",{key:"append",class:"v-alert__append"},[a.append()]),E&&v("div",{key:"close",class:"v-alert__close"},[a.close?i(Gn,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[a.close?.({props:B.value})]}):i(ta,Ie({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},B.value),null)])]})}}}),yqe=ot({start:Boolean,end:Boolean,icon:vn,image:String,text:String,...Yo(),...nn(),...ps(),...dr(),...Xu(),...$n(),...Aa(),...hl({variant:"flat"})},"VAvatar"),cl=St()({name:"VAvatar",props:yqe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ra(e),{borderClasses:r}=vi(e),{colorClasses:s,colorStyles:o,variantClasses:l}=nm(e),{densityClasses:c}=Uo(e),{roundedClasses:f}=Tr(e),{sizeClasses:d,sizeStyles:A}=Ih(e);return It(()=>i(e.tag,{class:lt(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},a.value,r.value,s.value,c.value,f.value,d.value,l.value,e.class]),style:Mt([o.value,A.value,e.style])},{default:()=>[n.default?i(Gn,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?i(zc,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?i(Da,{key:"icon",icon:e.icon},null):e.text,hf(!1,"v-avatar")]})),{}}}),_qe=ot({text:String,onClick:Os(),...nn(),...Aa()},"VLabel"),Dh=St()({name:"VLabel",props:_qe(),setup(e,t){let{slots:n}=t;return It(()=>v("label",{class:lt(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:Mt(e.style),onClick:e.onClick},[e.text,n.default?.()])),{}}}),gQ=Symbol.for("vuetify:selection-control-group"),m4=ot({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:vn,trueIcon:vn,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:ks},...nn(),...ps(),...Aa()},"SelectionControlGroup"),wqe=ot({...m4({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),yQ=St()({name:"VSelectionControlGroup",props:wqe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"modelValue"),r=qo(),s=qe(()=>e.id||`v-selection-control-group-${r}`),o=qe(()=>e.name||s.value),l=new Set;return za(gQ,{modelValue:a,forceUpdate:()=>{l.forEach(c=>c())},onForceUpdate:c=>{l.add(c),hs(()=>{l.delete(c)})}}),kr({[e.defaultsTarget]:{color:qe(()=>e.color),disabled:qe(()=>e.disabled),density:qe(()=>e.density),error:qe(()=>e.error),inline:qe(()=>e.inline),modelValue:a,multiple:qe(()=>!!e.multiple||e.multiple==null&&Array.isArray(a.value)),name:o,falseIcon:qe(()=>e.falseIcon),trueIcon:qe(()=>e.trueIcon),readonly:qe(()=>e.readonly),ripple:qe(()=>e.ripple),type:qe(()=>e.type),valueComparator:qe(()=>e.valueComparator)}}),It(()=>v("div",{class:lt(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:Mt(e.style),role:e.type==="radio"?"radiogroup":void 0},[n.default?.()])),{}}}),sb=ot({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...nn(),...m4()},"VSelectionControl");function bqe(e){const t=Pn(gQ,void 0),{densityClasses:n}=Uo(e),a=fn(e,"modelValue"),r=ee(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),s=ee(()=>e.falseValue!==void 0?e.falseValue:!1),o=ee(()=>!!e.multiple||e.multiple==null&&Array.isArray(a.value)),l=ee({get(){const p=t?t.modelValue.value:a.value;return o.value?xr(p).some(h=>e.valueComparator(h,r.value)):e.valueComparator(p,r.value)},set(p){if(e.readonly)return;const h=p?r.value:s.value;let y=h;o.value&&(y=p?[...xr(a.value),h]:xr(a.value).filter(g=>!e.valueComparator(g,r.value))),t?t.modelValue.value=y:a.value=y}}),{textColorClasses:c,textColorStyles:f}=$s(()=>{if(!(e.error||e.disabled))return l.value?e.color:e.baseColor}),{backgroundColorClasses:d,backgroundColorStyles:A}=La(()=>l.value&&!e.error&&!e.disabled?e.color:e.baseColor),m=ee(()=>l.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:r,falseValue:s,model:l,textColorClasses:c,textColorStyles:f,backgroundColorClasses:d,backgroundColorStyles:A,icon:m}}const lf=St()({name:"VSelectionControl",directives:{vRipple:Po},inheritAttrs:!1,props:sb(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{group:r,densityClasses:s,icon:o,model:l,textColorClasses:c,textColorStyles:f,backgroundColorClasses:d,backgroundColorStyles:A,trueValue:m}=bqe(e),p=qo(),h=Gt(!1),y=Gt(!1),g=R(),_=qe(()=>e.id||`input-${p}`),b=qe(()=>!e.disabled&&!e.readonly);r?.onForceUpdate(()=>{g.value&&(g.value.checked=l.value)});function S(E){b.value&&(h.value=!0,Vv(E.target,":focus-visible")!==!1&&(y.value=!0))}function B(){h.value=!1,y.value=!1}function F(E){E.stopPropagation()}function T(E){if(!b.value){g.value&&(g.value.checked=l.value);return}e.readonly&&r&&Cn(()=>r.forceUpdate()),l.value=E.target.checked}return It(()=>{const E=a.label?a.label({label:e.label,props:{for:_.value}}):e.label,[x,C]=ff(n),D=v("input",Ie({ref:g,checked:l.value,disabled:!!e.disabled,id:_.value,onBlur:B,onFocus:S,onInput:T,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:m.value,name:e.name,"aria-checked":e.type==="checkbox"?l.value:void 0},C),null);return v("div",Ie({class:["v-selection-control",{"v-selection-control--dirty":l.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":h.value,"v-selection-control--focus-visible":y.value,"v-selection-control--inline":e.inline},s.value,e.class]},x,{style:e.style}),[v("div",{class:lt(["v-selection-control__wrapper",c.value]),style:Mt(f.value)},[a.default?.({backgroundColorClasses:d,backgroundColorStyles:A}),Sa(v("div",{class:lt(["v-selection-control__input"])},[a.input?.({model:l,textColorClasses:c,textColorStyles:f,backgroundColorClasses:d,backgroundColorStyles:A,inputNode:D,icon:o.value,props:{onFocus:S,onBlur:B,id:_.value}})??v(ze,null,[o.value&&i(Da,{key:"icon",icon:o.value},null),D])]),[[Po,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),E&&i(Dh,{for:_.value,onClick:F},{default:()=>[E]})])}),{isFocused:h,input:g}}}),_Q=ot({indeterminate:Boolean,indeterminateIcon:{type:vn,default:"$checkboxIndeterminate"},...sb({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Ou=St()({name:"VCheckboxBtn",props:_Q(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"indeterminate"),r=fn(e,"modelValue");function s(c){a.value&&(a.value=!1)}const o=qe(()=>a.value?e.indeterminateIcon:e.falseIcon),l=qe(()=>a.value?e.indeterminateIcon:e.trueIcon);return It(()=>{const c=Wa(lf.filterProps(e),["modelValue"]);return i(lf,Ie(c,{modelValue:r.value,"onUpdate:modelValue":[f=>r.value=f,s],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:o.value,trueIcon:l.value,"aria-checked":a.value?"mixed":void 0}),n)}),{}}});function wQ(e){const{t}=Ka();function n(a){let{name:r,color:s,...o}=a;const l={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],c=e[`onClick:${r}`];function f(A){A.key!=="Enter"&&A.key!==" "||(A.preventDefault(),A.stopPropagation(),cw(c,new PointerEvent("click",A)))}const d=c&&l?t(`$vuetify.input.${l}`,e.label??""):void 0;return i(Da,Ie({icon:e[`${r}Icon`],"aria-label":d,onClick:c,onKeydown:f,color:s},o),null)}return{InputIcon:n}}const xqe=ot({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...nn(),...iu({transition:{component:c4,leaveAbsolute:!0,group:!0}})},"VMessages"),bQ=St()({name:"VMessages",props:xqe(),setup(e,t){let{slots:n}=t;const a=ee(()=>xr(e.messages)),{textColorClasses:r,textColorStyles:s}=$s(()=>e.color);return It(()=>i(So,{transition:e.transition,tag:"div",class:lt(["v-messages",r.value,e.class]),style:Mt([s.value,e.style])},{default:()=>[e.active&&a.value.map((o,l)=>v("div",{class:"v-messages__message",key:`${l}-${a.value}`},[n.message?n.message({message:o}):o]))]})),{}}}),Xg=ot({focused:Boolean,"onUpdate:focused":Os()},"focus");function Zc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gu();const n=fn(e,"focused"),a=qe(()=>({[`${t}--focused`]:n.value}));function r(){n.value=!0}function s(){n.value=!1}return{focusClasses:a,isFocused:n,focus:r,blur:s}}const xQ=Symbol.for("vuetify:form"),Cqe=ot({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function Sqe(e){const t=fn(e,"modelValue"),n=qe(()=>e.disabled),a=qe(()=>e.readonly),r=Gt(!1),s=R([]),o=R([]);async function l(){const d=[];let A=!0;o.value=[],r.value=!0;for(const m of s.value){const p=await m.validate();if(p.length>0&&(A=!1,d.push({id:m.id,errorMessages:p})),!A&&e.fastFail)break}return o.value=d,r.value=!1,{valid:A,errors:o.value}}function c(){s.value.forEach(d=>d.reset())}function f(){s.value.forEach(d=>d.resetValidation())}return Ge(s,()=>{let d=0,A=0;const m=[];for(const p of s.value)p.isValid===!1?(A++,m.push({id:p.id,errorMessages:p.errorMessages})):p.isValid===!0&&d++;o.value=m,t.value=A>0?!1:d===s.value.length?!0:null},{deep:!0,flush:"post"}),za(xQ,{register:d=>{let{id:A,vm:m,validate:p,reset:h,resetValidation:y}=d;s.value.some(g=>g.id===A),s.value.push({id:A,validate:p,reset:h,resetValidation:y,vm:b_(m),isValid:null,errorMessages:[]})},unregister:d=>{s.value=s.value.filter(A=>A.id!==d)},update:(d,A,m)=>{const p=s.value.find(h=>h.id===d);p&&(p.isValid=A,p.errorMessages=m)},isDisabled:n,isReadonly:a,isValidating:r,isValid:t,items:s,validateOn:qe(()=>e.validateOn)}),{errors:o,isDisabled:n,isReadonly:a,isValidating:r,isValid:t,items:s,validate:l,reset:c,resetValidation:f}}function Jg(e){const t=Pn(xQ,null);return{...t,isReadonly:ee(()=>!!(e?.readonly??t?.isReadonly.value)),isDisabled:ee(()=>!!(e?.disabled??t?.isDisabled.value))}}const Eqe=Symbol.for("vuetify:rules");function kqe(e){const t=Pn(Eqe,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return t?.resolve(e)??qe(e)}const CQ=ot({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...Xg()},"validation");function SQ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gu(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qo();const a=fn(e,"modelValue"),r=ee(()=>e.validationValue===void 0?a.value:e.validationValue),s=Jg(e),o=kqe(()=>e.rules),l=R([]),c=Gt(!0),f=ee(()=>!!(xr(a.value===""?null:a.value).length||xr(r.value===""?null:r.value).length)),d=ee(()=>e.errorMessages?.length?xr(e.errorMessages).concat(l.value).slice(0,Math.max(0,Number(e.maxErrors))):l.value),A=ee(()=>{let B=(e.validateOn??s.validateOn?.value)||"input";B==="lazy"&&(B="input lazy"),B==="eager"&&(B="input eager");const F=new Set(B?.split(" ")??[]);return{input:F.has("input"),blur:F.has("blur")||F.has("input")||F.has("invalid-input"),invalidInput:F.has("invalid-input"),lazy:F.has("lazy"),eager:F.has("eager")}}),m=ee(()=>e.error||e.errorMessages?.length?!1:e.rules.length?c.value?l.value.length||A.value.lazy?null:!0:!l.value.length:!0),p=Gt(!1),h=ee(()=>({[`${t}--error`]:m.value===!1,[`${t}--dirty`]:f.value,[`${t}--disabled`]:s.isDisabled.value,[`${t}--readonly`]:s.isReadonly.value})),y=Nr("validation"),g=ee(()=>e.name??Oe(n));tu(()=>{s.register?.({id:g.value,vm:y,validate:S,reset:_,resetValidation:b})}),ha(()=>{s.unregister?.(g.value)}),An(async()=>{A.value.lazy||await S(!A.value.eager),s.update?.(g.value,m.value,d.value)}),ko(()=>A.value.input||A.value.invalidInput&&m.value===!1,()=>{Ge(r,()=>{if(r.value!=null)S();else if(e.focused){const B=Ge(()=>e.focused,F=>{F||S(),B()})}})}),ko(()=>A.value.blur,()=>{Ge(()=>e.focused,B=>{B||S()})}),Ge([m,d],()=>{s.update?.(g.value,m.value,d.value)});async function _(){a.value=null,await Cn(),await b()}async function b(){c.value=!0,A.value.lazy?l.value=[]:await S(!A.value.eager)}async function S(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const F=[];p.value=!0;for(const T of o.value){if(F.length>=Number(e.maxErrors??1))break;const x=await(typeof T=="function"?T:()=>T)(r.value);if(x!==!0){if(x!==!1&&typeof x!="string"){console.warn(`${x} is not a valid value. Rule functions must return boolean true or a string.`);continue}F.push(x||"")}}return l.value=F,p.value=!1,c.value=B,l.value}return{errorMessages:d,isDirty:f,isDisabled:s.isDisabled,isReadonly:s.isReadonly,isPristine:c,isValid:m,isValidating:p,reset:_,resetValidation:b,validate:S,validationClasses:h}}const ed=ot({id:String,appendIcon:vn,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:vn,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Os(),"onClick:append":Os(),...nn(),...ps(),...jc($r(),["maxWidth","minWidth","width"]),...Aa(),...CQ()},"VInput"),so=St()({name:"VInput",props:{...ed()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a,emit:r}=t;const{densityClasses:s}=Uo(e),{dimensionStyles:o}=Qr(e),{themeClasses:l}=Ra(e),{rtlClasses:c}=as(),{InputIcon:f}=wQ(e),d=qo(),A=ee(()=>e.id||`input-${d}`),{errorMessages:m,isDirty:p,isDisabled:h,isReadonly:y,isPristine:g,isValid:_,isValidating:b,reset:S,resetValidation:B,validate:F,validationClasses:T}=SQ(e,"v-input",A),E=ee(()=>e.errorMessages?.length||!g.value&&m.value.length?m.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages),x=qe(()=>E.value.length>0),C=qe(()=>!e.hideDetails||e.hideDetails==="auto"&&(x.value||!!a.details)),D=ee(()=>C.value?`${A.value}-messages`:void 0),U=ee(()=>({id:A,messagesId:D,isDirty:p,isDisabled:h,isReadonly:y,isPristine:g,isValid:_,isValidating:b,hasDetails:C,reset:S,resetValidation:B,validate:F})),L=qe(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),H=qe(()=>{if(e.iconColor)return e.iconColor===!0?L.value:e.iconColor});return It(()=>{const oe=!!(a.prepend||e.prependIcon),de=!!(a.append||e.appendIcon);return v("div",{class:lt(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},s.value,l.value,c.value,T.value,e.class]),style:Mt([o.value,e.style])},[oe&&v("div",{key:"prepend",class:"v-input__prepend"},[a.prepend?.(U.value),e.prependIcon&&i(f,{key:"prepend-icon",name:"prepend",color:H.value},null)]),a.default&&v("div",{class:"v-input__control"},[a.default?.(U.value)]),de&&v("div",{key:"append",class:"v-input__append"},[e.appendIcon&&i(f,{key:"append-icon",name:"append",color:H.value},null),a.append?.(U.value)]),C.value&&v("div",{id:D.value,class:"v-input__details",role:"alert","aria-live":"polite"},[i(bQ,{active:x.value,messages:E.value},{message:a.message}),a.details?.(U.value)])])}),{reset:S,resetValidation:B,validate:F,isValid:_,errorMessages:m}}}),jC=Symbol("Forwarded refs");function qC(e,t){let n=e;for(;n;){const a=Reflect.getOwnPropertyDescriptor(n,t);if(a)return a;n=Object.getPrototypeOf(n)}}function Fs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e[jC]=n,new Proxy(e,{get(r,s){if(Reflect.has(r,s))return Reflect.get(r,s);if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const o of n)if(o.value&&Reflect.has(o.value,s)){const l=Reflect.get(o.value,s);return typeof l=="function"?l.bind(o.value):l}}},has(r,s){if(Reflect.has(r,s))return!0;if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,s))return!0;return!1},set(r,s,o){if(Reflect.has(r,s))return Reflect.set(r,s,o);if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const l of n)if(l.value&&Reflect.has(l.value,s))return Reflect.set(l.value,s,o);return!1},getOwnPropertyDescriptor(r,s){const o=Reflect.getOwnPropertyDescriptor(r,s);if(o)return o;if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const l of n){if(!l.value)continue;const c=qC(l.value,s)??("_"in l.value?qC(l.value._?.setupState,s):void 0);if(c)return c}for(const l of n){const c=l.value&&l.value[jC];if(!c)continue;const f=c.slice();for(;f.length;){const d=f.shift(),A=qC(d.value,s);if(A)return A;const m=d.value&&d.value[jC];m&&f.push(...m)}}}}})}const Bqe=ot({...ed(),...Wa(_Q(),["inline"])},"VCheckbox"),Tqe=St()({name:"VCheckbox",inheritAttrs:!1,props:Bqe(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=fn(e,"modelValue"),{isFocused:s,focus:o,blur:l}=Zc(e),c=R(),f=qo();return It(()=>{const[d,A]=ff(n),m=so.filterProps(e),p=Ou.filterProps(e);return i(so,Ie({ref:c,class:["v-checkbox",e.class]},d,m,{modelValue:r.value,"onUpdate:modelValue":h=>r.value=h,id:e.id||`checkbox-${f}`,focused:s.value,style:e.style}),{...a,default:h=>{let{id:y,messagesId:g,isDisabled:_,isReadonly:b,isValid:S}=h;return i(Ou,Ie(p,{id:y.value,"aria-describedby":g.value,disabled:_.value,readonly:b.value},A,{error:S.value===!1,modelValue:r.value,"onUpdate:modelValue":B=>r.value=B,onFocus:o,onBlur:l}),a)}})}),Fs({},c)}});function Iqe(e){let{selectedElement:t,containerElement:n,isRtl:a,isHorizontal:r}=e;const s=lg(r,n),o=EQ(r,a,n),l=lg(r,t),c=kQ(r,t),f=l*.4;return o>c?c-f:o+s<c+l?c-s+l+f:o}function Fqe(e){let{selectedElement:t,containerElement:n,isHorizontal:a}=e;const r=lg(a,n),s=kQ(a,t),o=lg(a,t);return s-r/2+o/2}function UN(e,t){return t?.[e?"scrollWidth":"scrollHeight"]||0}function Pqe(e,t){return t?.[e?"clientWidth":"clientHeight"]||0}function EQ(e,t,n){if(!n)return 0;const{scrollLeft:a,offsetWidth:r,scrollWidth:s}=n;return e?t?s-r+a:a:n.scrollTop}function lg(e,t){return t?.[e?"offsetWidth":"offsetHeight"]||0}function kQ(e,t){return t?.[e?"offsetLeft":"offsetTop"]||0}const BQ=Symbol.for("vuetify:v-slide-group"),v4=ot({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:BQ},nextIcon:{type:vn,default:"$next"},prevIcon:{type:vn,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...nn(),...$A({mobile:null}),...$n(),...am({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),ug=St()({name:"VSlideGroup",props:v4(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:a}=as(),{displayClasses:r,mobile:s}=Vi(e),o=pf(e,e.symbol),l=Gt(!1),c=Gt(0),f=Gt(0),d=Gt(0),A=ee(()=>e.direction==="horizontal"),{resizeRef:m,contentRect:p}=Kl(),{resizeRef:h,contentRect:y}=Kl(),g=Wne(),_=ee(()=>({container:m.el,duration:200,easing:"easeOutQuart"})),b=ee(()=>o.selected.value.length?o.items.value.findIndex(G=>G.id===o.selected.value[0]):-1),S=ee(()=>o.selected.value.length?o.items.value.findIndex(G=>G.id===o.selected.value[o.selected.value.length-1]):-1);if(Ua){let G=-1;Ge(()=>[o.selected.value,p.value,y.value,A.value],()=>{cancelAnimationFrame(G),G=requestAnimationFrame(()=>{if(p.value&&y.value){const W=A.value?"width":"height";f.value=p.value[W],d.value=y.value[W],l.value=f.value+1<d.value}if(b.value>=0&&h.el){const W=h.el.children[S.value];F(W,e.centerActive)}})})}const B=Gt(!1);function F(G,W){let Q=0;W?Q=Fqe({containerElement:m.el,isHorizontal:A.value,selectedElement:G}):Q=Iqe({containerElement:m.el,isHorizontal:A.value,isRtl:a.value,selectedElement:G}),T(Q)}function T(G){if(!Ua||!m.el)return;const W=lg(A.value,m.el),Q=EQ(A.value,a.value,m.el);if(!(UN(A.value,m.el)<=W||Math.abs(G-Q)<16)){if(A.value&&a.value&&m.el){const{scrollWidth:ae,offsetWidth:j}=m.el;G=ae-j-G}A.value?g.horizontal(G,_.value):g(G,_.value)}}function E(G){const{scrollTop:W,scrollLeft:Q}=G.target;c.value=A.value?Q:W}function x(G){if(B.value=!0,!(!l.value||!h.el)){for(const W of G.composedPath())for(const Q of h.el.children)if(Q===W){F(Q);return}}}function C(G){B.value=!1}let D=!1;function U(G){!D&&!B.value&&!(G.relatedTarget&&h.el?.contains(G.relatedTarget))&&de(),D=!1}function L(){D=!0}function H(G){if(!h.el)return;function W(Q){G.preventDefault(),de(Q)}A.value?G.key==="ArrowRight"?W(a.value?"prev":"next"):G.key==="ArrowLeft"&&W(a.value?"next":"prev"):G.key==="ArrowDown"?W("next"):G.key==="ArrowUp"&&W("prev"),G.key==="Home"?W("first"):G.key==="End"&&W("last")}function oe(G,W){if(!G)return;let Q=G;do Q=Q?.[W==="next"?"nextElementSibling":"previousElementSibling"];while(Q?.hasAttribute("disabled"));return Q}function de(G){if(!h.el)return;let W;if(!G)W=P0(h.el)[0];else if(G==="next"){if(W=oe(h.el.querySelector(":focus"),G),!W)return de("first")}else if(G==="prev"){if(W=oe(h.el.querySelector(":focus"),G),!W)return de("last")}else G==="first"?(W=h.el.firstElementChild,W?.hasAttribute("disabled")&&(W=oe(W,"next"))):G==="last"&&(W=h.el.lastElementChild,W?.hasAttribute("disabled")&&(W=oe(W,"prev")));W&&W.focus({preventScroll:!0})}function te(G){const W=A.value&&a.value?-1:1,Q=(G==="prev"?-W:W)*f.value;let O=c.value+Q;if(A.value&&a.value&&m.el){const{scrollWidth:ae,offsetWidth:j}=m.el;O+=ae-j}T(O)}const q=ee(()=>({next:o.next,prev:o.prev,select:o.select,isSelected:o.isSelected})),ce=ee(()=>l.value||Math.abs(c.value)>0),le=ee(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!s.value;case!0:return ce.value;case"mobile":return s.value||ce.value;default:return!s.value&&ce.value}}),Z=ee(()=>Math.abs(c.value)>1),ne=ee(()=>{if(!m.value||!ce.value)return!1;const G=UN(A.value,m.el),W=Pqe(A.value,m.el);return G-W-Math.abs(c.value)>1});return It(()=>i(e.tag,{class:lt(["v-slide-group",{"v-slide-group--vertical":!A.value,"v-slide-group--has-affixes":le.value,"v-slide-group--is-overflowing":l.value},r.value,e.class]),style:Mt(e.style),tabindex:B.value||o.selected.value.length?-1:0,onFocus:U},{default:()=>[le.value&&v("div",{key:"prev",class:lt(["v-slide-group__prev",{"v-slide-group__prev--disabled":!Z.value}]),onMousedown:L,onClick:()=>Z.value&&te("prev")},[n.prev?.(q.value)??i(sg,null,{default:()=>[i(Da,{icon:a.value?e.nextIcon:e.prevIcon},null)]})]),v("div",{key:"container",ref:m,class:lt(["v-slide-group__container",e.contentClass]),onScroll:E},[v("div",{ref:h,class:"v-slide-group__content",onFocusin:x,onFocusout:C,onKeydown:H},[n.default?.(q.value)])]),le.value&&v("div",{key:"next",class:lt(["v-slide-group__next",{"v-slide-group__next--disabled":!ne.value}]),onMousedown:L,onClick:()=>ne.value&&te("next")},[n.next?.(q.value)??i(sg,null,{default:()=>[i(Da,{icon:a.value?e.prevIcon:e.nextIcon},null)]})])]})),{selected:o.selected,scrollTo:te,scrollOffset:c,focus:de,hasPrev:Z,hasNext:ne}}}),TQ=Symbol.for("vuetify:v-chip-group"),Dqe=ot({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:ks},...v4(),...nn(),...am({selectedClass:"v-chip--selected"}),...$n(),...Aa(),...hl({variant:"tonal"})},"VChipGroup"),Uqe=St()({name:"VChipGroup",props:Dqe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ra(e),{isSelected:r,select:s,next:o,prev:l,selected:c}=pf(e,TQ);return kr({VChip:{baseColor:qe(()=>e.baseColor),color:qe(()=>e.color),disabled:qe(()=>e.disabled),filter:qe(()=>e.filter),variant:qe(()=>e.variant)}}),It(()=>{const f=ug.filterProps(e);return i(ug,Ie(f,{class:["v-chip-group",{"v-chip-group--column":e.column},a.value,e.class],style:e.style}),{default:()=>[n.default?.({isSelected:r,select:s,next:o,prev:l,selected:c.value})]})}),{}}}),Rqe=ot({activeClass:String,appendAvatar:String,appendIcon:vn,baseColor:String,closable:Boolean,closeIcon:{type:vn,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:vn,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:vn,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Os(),onClickOnce:Os(),...Yo(),...nn(),...ps(),...rs(),...rm(),...dr(),...Yg(),...Xu(),...$n({tag:"span"}),...Aa(),...hl({variant:"tonal"})},"VChip"),Uh=St()({name:"VChip",directives:{vRipple:Po},props:Rqe(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{t:s}=Ka(),{borderClasses:o}=vi(e),{densityClasses:l}=Uo(e),{elevationClasses:c}=Is(e),{roundedClasses:f}=Tr(e),{sizeClasses:d}=Ih(e),{themeClasses:A}=Ra(e),m=fn(e,"modelValue"),p=sm(e,TQ,!1),h=qg(e,n),y=qe(()=>e.link!==!1&&h.isLink.value),g=ee(()=>!e.disabled&&e.link!==!1&&(!!p||e.link||h.isClickable.value)),_=qe(()=>({"aria-label":s(e.closeLabel),disabled:e.disabled,onClick(E){E.preventDefault(),E.stopPropagation(),m.value=!1,a("click:close",E)}})),{colorClasses:b,colorStyles:S,variantClasses:B}=nm(()=>({color:!p||p.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function F(E){a("click",E),g.value&&(h.navigate?.(E),p?.toggle())}function T(E){(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),F(E))}return()=>{const E=h.isLink.value?"a":e.tag,x=!!(e.appendIcon||e.appendAvatar),C=!!(x||r.append),D=!!(r.close||e.closable),U=!!(r.filter||e.filter)&&p,L=!!(e.prependIcon||e.prependAvatar),H=!!(L||r.prepend);return m.value&&Sa(i(E,Ie({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":g.value,"v-chip--filter":U,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&h.isActive?.value},A.value,o.value,b.value,l.value,c.value,f.value,d.value,B.value,p?.selectedClass.value,e.class],style:[S.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:g.value?0:void 0,onClick:F,onKeydown:g.value&&!y.value&&T},h.linkProps),{default:()=>[hf(g.value,"v-chip"),U&&i(d4,{key:"filter"},{default:()=>[Sa(v("div",{class:"v-chip__filter"},[r.filter?i(Gn,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},r.filter):i(Da,{key:"filter-icon",icon:e.filterIcon},null)]),[[fi,p.isSelected.value]])]}),H&&v("div",{key:"prepend",class:"v-chip__prepend"},[r.prepend?i(Gn,{key:"prepend-defaults",disabled:!L,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},r.prepend):v(ze,null,[e.prependIcon&&i(Da,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&i(cl,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),v("div",{class:"v-chip__content","data-no-activator":""},[r.default?.({isSelected:p?.isSelected.value,selectedClass:p?.selectedClass.value,select:p?.select,toggle:p?.toggle,value:p?.value.value,disabled:e.disabled})??K(e.text)]),C&&v("div",{key:"append",class:"v-chip__append"},[r.append?i(Gn,{key:"append-defaults",disabled:!x,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},r.append):v(ze,null,[e.appendIcon&&i(Da,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&i(cl,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),D&&v("button",Ie({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},_.value),[r.close?i(Gn,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},r.close):i(Da,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}),[[Po,g.value&&e.ripple,null]])}}}),Nqe=ot({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...nn(),...Aa()},"VDivider"),Fi=St()({name:"VDivider",props:Nqe(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=Ra(e),{textColorClasses:s,textColorStyles:o}=$s(()=>e.color),l=ee(()=>{const c={};return e.length&&(c[e.vertical?"height":"width"]=Zt(e.length)),e.thickness&&(c[e.vertical?"borderRightWidth":"borderTopWidth"]=Zt(e.thickness)),c});return It(()=>{const c=v("hr",{class:lt([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,s.value,e.class]),style:Mt([l.value,o.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return a.default?v("div",{class:lt(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[c,v("div",{class:"v-divider__content"},[a.default()]),c]):c}),{}}}),ik=Symbol.for("vuetify:list");function IQ(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const t=Pn(ik,{filterable:!1,hasPrepend:Gt(!1),updateHasPrepend:()=>null}),n={filterable:t.filterable||e,hasPrepend:Gt(!1),updateHasPrepend:a=>{a&&(n.hasPrepend.value=a)}};return za(ik,n),t}function FQ(){return Pn(ik,null)}const h4=e=>{const t={activate:n=>{let{id:a,value:r,activated:s}=n;return a=Sn(a),e&&!r&&s.size===1&&s.has(a)||(r?s.add(a):s.delete(a)),s},in:(n,a,r)=>{let s=new Set;if(n!=null)for(const o of xr(n))s=t.activate({id:o,value:!0,activated:new Set(s),children:a,parents:r});return s},out:n=>Array.from(n)};return t},PQ=e=>{const t=h4(e);return{activate:a=>{let{activated:r,id:s,...o}=a;s=Sn(s);const l=r.has(s)?new Set([s]):new Set;return t.activate({...o,id:s,activated:l})},in:(a,r,s)=>{let o=new Set;if(a!=null){const l=xr(a);l.length&&(o=t.in(l.slice(0,1),r,s))}return o},out:(a,r,s)=>t.out(a,r,s)}},Vqe=e=>{const t=h4(e);return{activate:a=>{let{id:r,activated:s,children:o,...l}=a;return r=Sn(r),o.has(r)?s:t.activate({id:r,activated:s,children:o,...l})},in:t.in,out:t.out}},Lqe=e=>{const t=PQ(e);return{activate:a=>{let{id:r,activated:s,children:o,...l}=a;return r=Sn(r),o.has(r)?s:t.activate({id:r,activated:s,children:o,...l})},in:t.in,out:t.out}},Mqe={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){const s=new Set;s.add(t);let o=r.get(t);for(;o!=null;)s.add(o),o=r.get(o);return s}else return a.delete(t),a},select:()=>null},DQ={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){let s=r.get(t);for(a.add(t);s!=null&&s!==t;)a.add(s),s=r.get(s);return a}else a.delete(t);return a},select:()=>null},Oqe={open:DQ.open,select:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(!n)return a;const s=[];let o=r.get(t);for(;o!=null;)s.push(o),o=r.get(o);return new Set(s)}},p4=e=>{const t={select:n=>{let{id:a,value:r,selected:s}=n;if(a=Sn(a),e&&!r){const o=Array.from(s.entries()).reduce((l,c)=>{let[f,d]=c;return d==="on"&&l.push(f),l},[]);if(o.length===1&&o[0]===a)return s}return s.set(a,r?"on":"off"),s},in:(n,a,r,s)=>{const o=new Map;for(const l of n||[])t.select({id:l,value:!0,selected:o,children:a,parents:r,disabled:s});return o},out:n=>{const a=[];for(const[r,s]of n.entries())s==="on"&&a.push(r);return a}};return t},UQ=e=>{const t=p4(e);return{select:a=>{let{selected:r,id:s,...o}=a;s=Sn(s);const l=r.has(s)?new Map([[s,r.get(s)]]):new Map;return t.select({...o,id:s,selected:l})},in:(a,r,s,o)=>a?.length?t.in(a.slice(0,1),r,s,o):new Map,out:(a,r,s)=>t.out(a,r,s)}},Hqe=e=>{const t=p4(e);return{select:a=>{let{id:r,selected:s,children:o,...l}=a;return r=Sn(r),o.has(r)?s:t.select({id:r,selected:s,children:o,...l})},in:t.in,out:t.out}},$qe=e=>{const t=UQ(e);return{select:a=>{let{id:r,selected:s,children:o,...l}=a;return r=Sn(r),o.has(r)?s:t.select({id:r,selected:s,children:o,...l})},in:t.in,out:t.out}},RQ=e=>{const t={select:n=>{let{id:a,value:r,selected:s,children:o,parents:l,disabled:c}=n;a=Sn(a);const f=new Map(s),d=[a];for(;d.length;){const m=d.shift();c.has(m)||s.set(Sn(m),r?"on":"off"),o.has(m)&&d.push(...o.get(m))}let A=Sn(l.get(a));for(;A;){let m=!0,p=!0;for(const h of o.get(A)){const y=Sn(h);if(!c.has(y)&&(s.get(y)!=="on"&&(m=!1),s.has(y)&&s.get(y)!=="off"&&(p=!1),!m&&!p))break}s.set(A,m?"on":p?"off":"indeterminate"),A=Sn(l.get(A))}return e&&!r&&Array.from(s.entries()).reduce((p,h)=>{let[y,g]=h;return g==="on"&&p.push(y),p},[]).length===0?f:s},in:(n,a,r,s)=>{let o=new Map;for(const l of n||[])o=t.select({id:l,value:!0,selected:o,children:a,parents:r,disabled:s});return o},out:(n,a)=>{const r=[];for(const[s,o]of n.entries())o==="on"&&!a.has(s)&&r.push(s);return r}};return t},Qqe=e=>{const t=RQ(e);return{select:t.select,in:t.in,out:(a,r,s)=>{const o=[];for(const[l,c]of a.entries())if(c==="on"){if(s.has(l)){const f=s.get(l);if(a.get(f)==="on")continue}o.push(l)}return o}}},cg=Symbol.for("vuetify:nested"),NQ={id:Gt(),root:{register:()=>null,unregister:()=>null,children:R(new Map),parents:R(new Map),disabled:R(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:R(!1),selectable:R(!1),opened:R(new Set),activated:R(new Set),selected:R(new Map),selectedValues:R([]),getPath:()=>[]}},Gqe=ot({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),zqe=e=>{let t=!1;const n=Gt(new Map),a=Gt(new Map),r=Gt(new Set),s=fn(e,"opened",e.opened,y=>new Set(Array.isArray(y)?y.map(g=>Sn(g)):y),y=>[...y.values()]),o=ee(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return Vqe(e.mandatory);case"single-leaf":return Lqe(e.mandatory);case"independent":return h4(e.mandatory);case"single-independent":default:return PQ(e.mandatory)}}),l=ee(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return $qe(e.mandatory);case"leaf":return Hqe(e.mandatory);case"independent":return p4(e.mandatory);case"single-independent":return UQ(e.mandatory);case"trunk":return Qqe(e.mandatory);case"classic":default:return RQ(e.mandatory)}}),c=ee(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return Oqe;case"single":return Mqe;case"multiple":default:return DQ}}),f=fn(e,"activated",e.activated,y=>o.value.in(y,n.value,a.value),y=>o.value.out(y,n.value,a.value)),d=fn(e,"selected",e.selected,y=>l.value.in(y,n.value,a.value,r.value),y=>l.value.out(y,n.value,a.value));ha(()=>{t=!0});function A(y){const g=[];let _=Sn(y);for(;_!==void 0;)g.unshift(_),_=a.value.get(_);return g}const m=Nr("nested"),p=new Set,h={id:Gt(),root:{opened:s,activatable:qe(()=>e.activatable),selectable:qe(()=>e.selectable),activated:f,selected:d,selectedValues:ee(()=>{const y=[];for(const[g,_]of d.value.entries())_==="on"&&y.push(g);return y}),register:(y,g,_,b)=>{if(p.has(y)){A(y).map(String).join(" -> "),A(g).concat(y).map(String).join(" -> ");return}else p.add(y);g&&y!==g&&a.value.set(y,g),_&&r.value.add(y),b&&n.value.set(y,[]),g!=null&&n.value.set(g,[...n.value.get(g)||[],y])},unregister:y=>{if(t)return;p.delete(y),n.value.delete(y),r.value.delete(y);const g=a.value.get(y);if(g){const _=n.value.get(g)??[];n.value.set(g,_.filter(b=>b!==y))}a.value.delete(y)},open:(y,g,_)=>{m.emit("click:open",{id:y,value:g,path:A(y),event:_});const b=c.value.open({id:y,value:g,opened:new Set(s.value),children:n.value,parents:a.value,event:_});b&&(s.value=b)},openOnSelect:(y,g,_)=>{const b=c.value.select({id:y,value:g,selected:new Map(d.value),opened:new Set(s.value),children:n.value,parents:a.value,event:_});b&&(s.value=b)},select:(y,g,_)=>{m.emit("click:select",{id:y,value:g,path:A(y),event:_});const b=l.value.select({id:y,value:g,selected:new Map(d.value),children:n.value,parents:a.value,disabled:r.value,event:_});b&&(d.value=b),h.root.openOnSelect(y,g,_)},activate:(y,g,_)=>{if(!e.activatable)return h.root.select(y,!0,_);m.emit("click:activate",{id:y,value:g,path:A(y),event:_});const b=o.value.activate({id:y,value:g,activated:new Set(f.value),children:n.value,parents:a.value,event:_});if(b.size!==f.value.size)f.value=b;else{for(const S of b)if(!f.value.has(S)){f.value=b;return}for(const S of f.value)if(!b.has(S)){f.value=b;return}}},children:n,parents:a,disabled:r,getPath:A}};return za(cg,h),h.root},VQ=(e,t,n)=>{const a=Pn(cg,NQ),r=Symbol("nested item"),s=ee(()=>{const l=Sn(Uu(e));return l!==void 0?l:r}),o={...a,id:s,open:(l,c)=>a.root.open(s.value,l,c),openOnSelect:(l,c)=>a.root.openOnSelect(s.value,l,c),isOpen:ee(()=>a.root.opened.value.has(s.value)),parent:ee(()=>a.root.parents.value.get(s.value)),activate:(l,c)=>a.root.activate(s.value,l,c),isActivated:ee(()=>a.root.activated.value.has(s.value)),select:(l,c)=>a.root.select(s.value,l,c),isSelected:ee(()=>a.root.selected.value.get(s.value)==="on"),isIndeterminate:ee(()=>a.root.selected.value.get(s.value)==="indeterminate"),isLeaf:ee(()=>!a.root.children.value.get(s.value)),isGroupActivator:a.isGroupActivator};return tu(()=>{a.isGroupActivator||a.root.register(s.value,a.id.value,Uu(t),n)}),ha(()=>{a.isGroupActivator||a.root.unregister(s.value)}),n&&za(cg,o),o},Wqe=()=>{const e=Pn(cg,NQ);za(cg,{...e,isGroupActivator:!0})},Kqe=Ni({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return Wqe(),()=>n.default?.()}}),LQ=ot({activeColor:String,baseColor:String,color:String,collapseIcon:{type:vn,default:"$collapse"},disabled:Boolean,expandIcon:{type:vn,default:"$expand"},rawId:[String,Number],prependIcon:vn,appendIcon:vn,fluid:Boolean,subgroup:Boolean,title:String,value:null,...nn(),...$n()},"VListGroup"),dg=St()({name:"VListGroup",props:LQ(),setup(e,t){let{slots:n}=t;const{isOpen:a,open:r,id:s}=VQ(()=>e.value,()=>e.disabled,!0),o=ee(()=>`v-list-group--id-${String(e.rawId??s.value)}`),l=FQ(),{isBooted:c}=tm();function f(p){["INPUT","TEXTAREA"].includes(p.target?.tagName)||r(!a.value,p)}const d=ee(()=>({onClick:f,class:"v-list-group__header",id:o.value})),A=ee(()=>a.value?e.collapseIcon:e.expandIcon),m=ee(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&A.value,appendIcon:e.appendIcon||!e.subgroup&&A.value,title:e.title,value:e.value}}));return It(()=>i(e.tag,{class:lt(["v-list-group",{"v-list-group--prepend":l?.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":a.value},e.class]),style:Mt(e.style)},{default:()=>[n.activator&&i(Gn,{defaults:m.value},{default:()=>[i(Kqe,null,{default:()=>[n.activator({props:d.value,isOpen:a.value})]})]}),i(So,{transition:{component:tb},disabled:!c.value},{default:()=>[Sa(v("div",{class:"v-list-group__items",role:"group","aria-labelledby":o.value},[n.default?.()]),[[fi,a.value]])]})]})),{isOpen:a}}}),jqe=ot({opacity:[Number,String],...nn(),...$n()},"VListItemSubtitle"),MQ=St()({name:"VListItemSubtitle",props:jqe(),setup(e,t){let{slots:n}=t;return It(()=>i(e.tag,{class:lt(["v-list-item-subtitle",e.class]),style:Mt([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),OQ=qc("v-list-item-title"),HQ=ot({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:vn,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:vn,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Os(),onClickOnce:Os(),...Yo(),...nn(),...ps(),...$r(),...rs(),...dr(),...Yg(),...$n(),...Aa(),...hl({variant:"text"})},"VListItem"),Zl=St()({name:"VListItem",directives:{vRipple:Po},props:HQ(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:a,emit:r}=t;const s=qg(e,n),o=ee(()=>e.value===void 0?s.href.value:e.value),{activate:l,isActivated:c,select:f,isOpen:d,isSelected:A,isIndeterminate:m,isGroupActivator:p,root:h,parent:y,openOnSelect:g,id:_}=VQ(o,()=>e.disabled,!1),b=FQ(),S=ee(()=>e.active!==!1&&(e.active||s.isActive?.value||(h.activatable.value?c.value:A.value))),B=qe(()=>e.link!==!1&&s.isLink.value),F=ee(()=>!!b&&(h.selectable.value||h.activatable.value||e.value!=null)),T=ee(()=>!e.disabled&&e.link!==!1&&(e.link||s.isClickable.value||F.value)),E=qe(()=>e.rounded||e.nav),x=qe(()=>e.color??e.activeColor),C=qe(()=>({color:S.value?x.value??e.baseColor:e.baseColor,variant:e.variant}));Ge(()=>s.isActive?.value,O=>{O&&D()}),tu(()=>{s.isActive?.value&&D()});function D(){y.value!=null&&h.open(y.value,!0),g(!0)}const{themeClasses:U}=Ra(e),{borderClasses:L}=vi(e),{colorClasses:H,colorStyles:oe,variantClasses:de}=nm(C),{densityClasses:te}=Uo(e),{dimensionStyles:q}=Qr(e),{elevationClasses:ce}=Is(e),{roundedClasses:le}=Tr(E),Z=qe(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),ne=qe(()=>e.ripple!==void 0&&e.ripple&&b?.filterable?{keys:["Enter"]}:e.ripple),G=ee(()=>({isActive:S.value,select:f,isOpen:d.value,isSelected:A.value,isIndeterminate:m.value}));function W(O){r("click",O),!["INPUT","TEXTAREA"].includes(O.target?.tagName)&&T.value&&(s.navigate?.(O),!p&&(h.activatable.value?l(!c.value,O):(h.selectable.value||e.value!=null)&&f(!A.value,O)))}function Q(O){const ae=O.target;["INPUT","TEXTAREA"].includes(ae.tagName)||(O.key==="Enter"||O.key===" "&&!b?.filterable)&&(O.preventDefault(),O.stopPropagation(),O.target.dispatchEvent(new MouseEvent("click",O)))}return It(()=>{const O=B.value?"a":e.tag,ae=a.title||e.title!=null,j=a.subtitle||e.subtitle!=null,J=!!(e.appendAvatar||e.appendIcon),ie=!!(J||a.append),X=!!(e.prependAvatar||e.prependIcon),fe=!!(X||a.prepend);return b?.updateHasPrepend(fe),e.activeColor&&K8("active-color",["color","base-color"]),Sa(i(O,Ie({class:["v-list-item",{"v-list-item--active":S.value,"v-list-item--disabled":e.disabled,"v-list-item--link":T.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!fe&&b?.hasPrepend.value,"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&S.value},U.value,L.value,H.value,te.value,ce.value,Z.value,le.value,de.value,e.class],style:[oe.value,q.value,e.style],tabindex:T.value?b?-2:0:void 0,"aria-selected":F.value?h.activatable.value?c.value:h.selectable.value?A.value:S.value:void 0,onClick:W,onKeydown:T.value&&!B.value&&Q},s.linkProps),{default:()=>[hf(T.value||S.value,"v-list-item"),fe&&v("div",{key:"prepend",class:"v-list-item__prepend"},[a.prepend?i(Gn,{key:"prepend-defaults",disabled:!X,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[a.prepend?.(G.value)]}):v(ze,null,[e.prependAvatar&&i(cl,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&i(Da,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),v("div",{class:"v-list-item__spacer"},null)]),v("div",{class:"v-list-item__content","data-no-activator":""},[ae&&i(OQ,{key:"title"},{default:()=>[a.title?.({title:e.title})??K(e.title)]}),j&&i(MQ,{key:"subtitle"},{default:()=>[a.subtitle?.({subtitle:e.subtitle})??K(e.subtitle)]}),a.default?.(G.value)]),ie&&v("div",{key:"append",class:"v-list-item__append"},[a.append?i(Gn,{key:"append-defaults",disabled:!J,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[a.append?.(G.value)]}):v(ze,null,[e.appendIcon&&i(Da,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&i(cl,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),v("div",{class:"v-list-item__spacer"},null)])]}),[[Po,T.value&&ne.value]])}),{activate:l,isActivated:c,isGroupActivator:p,isSelected:A,list:b,select:f,root:h,id:_,link:s}}}),qqe=ot({color:String,inset:Boolean,sticky:Boolean,title:String,...nn(),...$n()},"VListSubheader"),Rh=St()({name:"VListSubheader",props:qqe(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:r}=$s(()=>e.color);return It(()=>{const s=!!(n.default||e.title);return i(e.tag,{class:lt(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},a.value,e.class]),style:Mt([{textColorStyles:r},e.style])},{default:()=>[s&&v("div",{class:"v-list-subheader__text"},[n.default?.()??e.title])]})}),{}}}),Yqe=ot({items:Array,returnObject:Boolean},"VListChildren"),$Q=St()({name:"VListChildren",props:Yqe(),setup(e,t){let{slots:n}=t;return IQ(),()=>n.default?.()??e.items?.map(a=>{let{children:r,props:s,type:o,raw:l}=a;if(o==="divider")return n.divider?.({props:s})??i(Fi,s,null);if(o==="subheader")return n.subheader?.({props:s})??i(Rh,s,null);const c={subtitle:n.subtitle?d=>n.subtitle?.({...d,item:l}):void 0,prepend:n.prepend?d=>n.prepend?.({...d,item:l}):void 0,append:n.append?d=>n.append?.({...d,item:l}):void 0,title:n.title?d=>n.title?.({...d,item:l}):void 0},f=dg.filterProps(s);return r?i(dg,Ie(f,{value:e.returnObject?l:s?.value,rawId:s?.value}),{activator:d=>{let{props:A}=d;const m=Ie(s,A,{value:e.returnObject?l:s.value});return n.header?n.header({props:m}):i(Zl,m,c)},default:()=>i($Q,{items:r,returnObject:e.returnObject},n)}):n.item?n.item({props:s}):i(Zl,Ie(s,{value:e.returnObject?l:s.value}),c)})}}),QQ=ot({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),Xqe=new Set(["item","divider","subheader"]);function Fl(e,t){const n=Or(t,e.itemTitle,t),a=Or(t,e.itemValue,n),r=Or(t,e.itemChildren),s=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?Wa(t,["children"]):t:void 0:Or(t,e.itemProps);let o=Or(t,e.itemType,"item");Xqe.has(o)||(o="item");const l={title:n,value:a,...s};return{type:o,title:String(l.title??""),value:l.value,props:l,children:o==="item"&&Array.isArray(r)?GQ(e,r):void 0,raw:t}}Fl.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function GQ(e,t){const n=jc(e,Fl.neededProps),a=[];for(const r of t)a.push(Fl(n,r));return a}function g4(e){const t=ee(()=>GQ(e,e.items)),n=ee(()=>t.value.some(l=>l.value===null)),a=Gt(new Map),r=Gt([]);Er(()=>{const l=t.value,c=new Map,f=[];for(let d=0;d<l.length;d++){const A=l[d];if(kS(A.value)||A.value===null){let m=c.get(A.value);m||(m=[],c.set(A.value,m)),m.push(A)}else f.push(A)}a.value=c,r.value=f});function s(l){const c=a.value,f=t.value,d=r.value,A=n.value,m=e.returnObject,p=!!e.valueComparator,h=e.valueComparator||ks,y=jc(e,Fl.neededProps),g=[];e:for(const _ of l){if(!A&&_===null)continue;if(m&&typeof _=="string"){g.push(Fl(y,_));continue}const b=c.get(_);if(p||!b){for(const S of p?f:d)if(h(_,S.value)){g.push(S);continue e}g.push(Fl(y,_));continue}g.push(...b)}return g}function o(l){return e.returnObject?l.map(c=>{let{raw:f}=c;return f}):l.map(c=>{let{value:f}=c;return f})}return{items:t,transformIn:s,transformOut:o}}const Jqe=new Set(["item","divider","subheader"]);function Zqe(e,t){const n=kS(t)?t:Or(t,e.itemTitle),a=kS(t)?t:Or(t,e.itemValue,void 0),r=Or(t,e.itemChildren),s=e.itemProps===!0?Wa(t,["children"]):Or(t,e.itemProps);let o=Or(t,e.itemType,"item");Jqe.has(o)||(o="item");const l={title:n,value:a,...s};return{type:o,title:l.title,value:l.value,props:l,children:o==="item"&&r?zQ(e,r):void 0,raw:t}}function zQ(e,t){const n=[];for(const a of t)n.push(Zqe(e,a));return n}function WQ(e){return{items:ee(()=>zQ(e,e.items))}}const KQ=ot({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:vn,collapseIcon:vn,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Os(),"onClick:select":Os(),"onUpdate:opened":Os(),...Gqe({selectStrategy:"single-leaf",openStrategy:"list"}),...Yo(),...nn(),...ps(),...$r(),...rs(),...QQ(),...dr(),...$n(),...Aa(),...hl({variant:"text"})},"VList"),nh=St()({name:"VList",props:KQ(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:a}=WQ(e),{themeClasses:r}=Ra(e),{backgroundColorClasses:s,backgroundColorStyles:o}=La(()=>e.bgColor),{borderClasses:l}=vi(e),{densityClasses:c}=Uo(e),{dimensionStyles:f}=Qr(e),{elevationClasses:d}=Is(e),{roundedClasses:A}=Tr(e),{children:m,open:p,parents:h,select:y,getPath:g}=zqe(e),_=qe(()=>e.lines?`v-list--${e.lines}-line`:void 0),b=qe(()=>e.activeColor),S=qe(()=>e.baseColor),B=qe(()=>e.color);IQ({filterable:e.filterable}),kr({VListGroup:{activeColor:b,baseColor:S,color:B,expandIcon:qe(()=>e.expandIcon),collapseIcon:qe(()=>e.collapseIcon)},VListItem:{activeClass:qe(()=>e.activeClass),activeColor:b,baseColor:S,color:B,density:qe(()=>e.density),disabled:qe(()=>e.disabled),lines:qe(()=>e.lines),nav:qe(()=>e.nav),slim:qe(()=>e.slim),variant:qe(()=>e.variant)}});const F=Gt(!1),T=R();function E(H){F.value=!0}function x(H){F.value=!1}function C(H){!F.value&&!(H.relatedTarget&&T.value?.contains(H.relatedTarget))&&L()}function D(H){const oe=H.target;if(!(!T.value||oe.tagName==="INPUT"&&["Home","End"].includes(H.key)||oe.tagName==="TEXTAREA")){if(H.key==="ArrowDown")L("next");else if(H.key==="ArrowUp")L("prev");else if(H.key==="Home")L("first");else if(H.key==="End")L("last");else return;H.preventDefault()}}function U(H){F.value=!0}function L(H){if(T.value)return sA(T.value,H)}return It(()=>i(e.tag,{ref:T,class:lt(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},r.value,s.value,l.value,c.value,d.value,_.value,A.value,e.class]),style:Mt([o.value,f.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:E,onFocusout:x,onFocus:C,onKeydown:D,onMousedown:U},{default:()=>[i($Q,{items:a.value,returnObject:e.returnObject},n)]})),{open:p,select:y,focus:L,children:m,parents:h,getPath:g}}}),eYe=qc("v-list-img"),tYe=ot({start:Boolean,end:Boolean,...nn(),...$n()},"VListItemAction"),jQ=St()({name:"VListItemAction",props:tYe(),setup(e,t){let{slots:n}=t;return It(()=>i(e.tag,{class:lt(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:Mt(e.style)},n)),{}}}),nYe=ot({start:Boolean,end:Boolean,...nn(),...$n()},"VListItemMedia"),aYe=St()({name:"VListItemMedia",props:nYe(),setup(e,t){let{slots:n}=t;return It(()=>i(e.tag,{class:lt(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:Mt(e.style)},n)),{}}});function YC(e,t){return{x:e.x+t.x,y:e.y+t.y}}function rYe(e,t){return{x:e.x-t.x,y:e.y-t.y}}function RN(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:a}=e,r=a==="left"?0:a==="center"?t.width/2:a==="right"?t.width:a,s=n==="top"?0:n==="bottom"?t.height:n;return YC({x:r,y:s},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:a}=e,r=n==="left"?0:n==="right"?t.width:n,s=a==="top"?0:a==="center"?t.height/2:a==="bottom"?t.height:a;return YC({x:r,y:s},t)}return YC({x:t.width/2,y:t.height/2},t)}const qQ={static:iYe,connected:uYe},sYe=ot({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in qQ},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function oYe(e,t){const n=R({}),a=R();Ua&&ko(()=>!!(t.isActive.value&&e.locationStrategy),l=>{Ge(()=>e.locationStrategy,l),hs(()=>{window.removeEventListener("resize",r),visualViewport?.removeEventListener("resize",s),visualViewport?.removeEventListener("scroll",o),a.value=void 0}),window.addEventListener("resize",r,{passive:!0}),visualViewport?.addEventListener("resize",s,{passive:!0}),visualViewport?.addEventListener("scroll",o,{passive:!0}),typeof e.locationStrategy=="function"?a.value=e.locationStrategy(t,e,n)?.updateLocation:a.value=qQ[e.locationStrategy](t,e,n)?.updateLocation});function r(l){a.value?.(l)}function s(l){a.value?.(l)}function o(l){a.value?.(l)}return{contentStyles:n,updateLocation:a}}function iYe(){}function lYe(e,t){const n=yB(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function uYe(e,t,n){(Array.isArray(e.target.value)||Xte(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:r,preferredOrigin:s}=gB(()=>{const _=BS(t.location,e.isRtl.value),b=t.origin==="overlap"?_:t.origin==="auto"?Nx(_):BS(t.origin,e.isRtl.value);return _.side===b.side&&_.align===Vx(b).align?{preferredAnchor:nD(_),preferredOrigin:nD(b)}:{preferredAnchor:_,preferredOrigin:b}}),[o,l,c,f]=["minWidth","minHeight","maxWidth","maxHeight"].map(_=>ee(()=>{const b=parseFloat(t[_]);return isNaN(b)?1/0:b})),d=ee(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const _=t.offset.split(" ").map(parseFloat);return _.length<2&&_.push(0),_}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let A=!1,m=-1;const p=new H8(4),h=new ResizeObserver(()=>{if(!A)return;if(requestAnimationFrame(b=>{b!==m&&p.clear(),requestAnimationFrame(S=>{m=S})}),p.isFull){const b=p.values();if(ks(b.at(-1),b.at(-3))&&!ks(b.at(-1),b.at(-2)))return}const _=g();_&&p.push(_.flipped)});let y=new Fu({x:0,y:0,width:0,height:0});Ge(e.target,(_,b)=>{b&&!Array.isArray(b)&&h.unobserve(b),Array.isArray(_)?ks(_,b)||g():_&&h.observe(_)},{immediate:!0}),Ge(e.contentEl,(_,b)=>{b&&h.unobserve(b),_&&h.observe(_)},{immediate:!0}),hs(()=>{h.disconnect()});function g(){if(A=!1,requestAnimationFrame(()=>A=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(y=W8(e.target.value));const _=lYe(e.contentEl.value,e.isRtl.value),b=M_(e.contentEl.value),S=12;b.length||(b.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(_.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),_.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const B=b.reduce((H,oe)=>{const de=gte(oe);return H?new Fu({x:Math.max(H.left,de.left),y:Math.max(H.top,de.top),width:Math.min(H.right,de.right)-Math.max(H.left,de.left),height:Math.min(H.bottom,de.bottom)-Math.max(H.top,de.top)}):de},void 0);B.x+=S,B.y+=S,B.width-=S*2,B.height-=S*2;let F={anchor:r.value,origin:s.value};function T(H){const oe=new Fu(_),de=RN(H.anchor,y),te=RN(H.origin,oe);let{x:q,y:ce}=rYe(de,te);switch(H.anchor.side){case"top":ce-=d.value[0];break;case"bottom":ce+=d.value[0];break;case"left":q-=d.value[0];break;case"right":q+=d.value[0];break}switch(H.anchor.align){case"top":ce-=d.value[1];break;case"bottom":ce+=d.value[1];break;case"left":q-=d.value[1];break;case"right":q+=d.value[1];break}return oe.x+=q,oe.y+=ce,oe.width=Math.min(oe.width,c.value),oe.height=Math.min(oe.height,f.value),{overflows:rD(oe,B),x:q,y:ce}}let E=0,x=0;const C={x:0,y:0},D={x:!1,y:!1};let U=-1;for(;!(U++>10);){const{x:H,y:oe,overflows:de}=T(F);E+=H,x+=oe,_.x+=H,_.y+=oe;{const te=aD(F.anchor),q=de.x.before||de.x.after,ce=de.y.before||de.y.after;let le=!1;if(["x","y"].forEach(Z=>{if(Z==="x"&&q&&!D.x||Z==="y"&&ce&&!D.y){const ne={anchor:{...F.anchor},origin:{...F.origin}},G=Z==="x"?te==="y"?Vx:Nx:te==="y"?Nx:Vx;ne.anchor=G(ne.anchor),ne.origin=G(ne.origin);const{overflows:W}=T(ne);(W[Z].before<=de[Z].before&&W[Z].after<=de[Z].after||W[Z].before+W[Z].after<(de[Z].before+de[Z].after)/2)&&(F=ne,le=D[Z]=!0)}}),le)continue}de.x.before&&(E+=de.x.before,_.x+=de.x.before),de.x.after&&(E-=de.x.after,_.x-=de.x.after),de.y.before&&(x+=de.y.before,_.y+=de.y.before),de.y.after&&(x-=de.y.after,_.y-=de.y.after);{const te=rD(_,B);C.x=B.width-te.x.before-te.x.after,C.y=B.height-te.y.before-te.y.after,E+=te.x.before,_.x+=te.x.before,x+=te.y.before,_.y+=te.y.before}break}const L=aD(F.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${F.anchor.side} ${F.anchor.align}`,transformOrigin:`${F.origin.side} ${F.origin.align}`,top:Zt(XC(x)),left:e.isRtl.value?void 0:Zt(XC(E)),right:e.isRtl.value?Zt(XC(-E)):void 0,minWidth:Zt(L==="y"?Math.min(o.value,y.width):o.value),maxWidth:Zt(NN(ar(C.x,o.value===1/0?0:o.value,c.value))),maxHeight:Zt(NN(ar(C.y,l.value===1/0?0:l.value,f.value)))}),{available:C,contentBox:_,flipped:D}}return Ge(()=>[r.value,s.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>g()),Cn(()=>{const _=g();if(!_)return;const{available:b,contentBox:S}=_;S.height>b.y&&requestAnimationFrame(()=>{g(),requestAnimationFrame(()=>{g()})})}),{updateLocation:g}}function XC(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function NN(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let lk=!0;const R2=[];function cYe(e){!lk||R2.length?(R2.push(e),uk()):(lk=!1,e(),uk())}let VN=-1;function uk(){cancelAnimationFrame(VN),VN=requestAnimationFrame(()=>{const e=R2.shift();e&&e(),R2.length?uk():lk=!0})}const YQ={none:null,close:AYe,block:mYe,reposition:vYe},dYe=ot({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in YQ}},"VOverlay-scroll-strategies");function fYe(e,t){if(!Ua)return;let n;Er(async()=>{n?.stop(),t.isActive.value&&e.scrollStrategy&&(n=Gd(),await new Promise(a=>setTimeout(a)),n.active&&n.run(()=>{typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):YQ[e.scrollStrategy]?.(t,e,n)}))}),hs(()=>{n?.stop()})}function AYe(e){function t(n){e.isActive.value=!1}XQ(y4(e.target.value,e.contentEl.value),t)}function mYe(e,t){const n=e.root.value?.offsetParent,a=y4(e.target.value,e.contentEl.value),r=[...new Set([...M_(a,t.contained?n:void 0),...M_(e.contentEl.value,t.contained?n:void 0)])].filter(l=>!l.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,o=(l=>CB(l)&&l)(n||document.documentElement);o&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((l,c)=>{l.style.setProperty("--v-body-scroll-x",Zt(-l.scrollLeft)),l.style.setProperty("--v-body-scroll-y",Zt(-l.scrollTop)),l!==document.documentElement&&l.style.setProperty("--v-scrollbar-offset",Zt(s)),l.classList.add("v-overlay-scroll-blocked")}),hs(()=>{r.forEach((l,c)=>{const f=parseFloat(l.style.getPropertyValue("--v-body-scroll-x")),d=parseFloat(l.style.getPropertyValue("--v-body-scroll-y")),A=l.style.scrollBehavior;l.style.scrollBehavior="auto",l.style.removeProperty("--v-body-scroll-x"),l.style.removeProperty("--v-body-scroll-y"),l.style.removeProperty("--v-scrollbar-offset"),l.classList.remove("v-overlay-scroll-blocked"),l.scrollLeft=-f,l.scrollTop=-d,l.style.scrollBehavior=A}),o&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function vYe(e,t,n){let a=!1,r=-1,s=-1;function o(l){cYe(()=>{const c=performance.now();e.updateLocation.value?.(l),a=(performance.now()-c)/(1e3/60)>2})}s=(typeof requestIdleCallback>"u"?l=>l():requestIdleCallback)(()=>{n.run(()=>{XQ(y4(e.target.value,e.contentEl.value),l=>{a?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{o(l)})})):o(l)})})}),hs(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(s),cancelAnimationFrame(r)})}function y4(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(n=>!t?.contains(n)):e??t}function XQ(e,t){const n=[document,...M_(e)];n.forEach(a=>{a.addEventListener("scroll",t,{passive:!0})}),hs(()=>{n.forEach(a=>{a.removeEventListener("scroll",t)})})}const ck=Symbol.for("vuetify:v-menu"),_4=ot({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function w4(e,t){let n=()=>{};function a(o){n?.();const l=Number(o?e.openDelay:e.closeDelay);return new Promise(c=>{n=fte(l,()=>{t?.(o),c(o)})})}function r(){return a(!0)}function s(){return a(!1)}return{clearDelay:n,runOpenDelay:r,runCloseDelay:s}}const hYe=ot({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,..._4()},"VOverlay-activator");function pYe(e,t){let{isActive:n,isTop:a,contentEl:r}=t;const s=Nr("useActivator"),o=R();let l=!1,c=!1,f=!0;const d=ee(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),A=ee(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!d.value),{runOpenDelay:m,runCloseDelay:p}=w4(e,x=>{x===(e.openOnHover&&l||d.value&&c)&&!(e.openOnHover&&n.value&&!a.value)&&(n.value!==x&&(f=!0),n.value=x)}),h=R(),y={onClick:x=>{x.stopPropagation(),o.value=x.currentTarget||x.target,n.value||(h.value=[x.clientX,x.clientY]),n.value=!n.value},onMouseenter:x=>{x.sourceCapabilities?.firesTouchEvents||(l=!0,o.value=x.currentTarget||x.target,m())},onMouseleave:x=>{l=!1,p()},onFocus:x=>{Vv(x.target,":focus-visible")!==!1&&(c=!0,x.stopPropagation(),o.value=x.currentTarget||x.target,m())},onBlur:x=>{c=!1,x.stopPropagation(),p()}},g=ee(()=>{const x={};return A.value&&(x.onClick=y.onClick),e.openOnHover&&(x.onMouseenter=y.onMouseenter,x.onMouseleave=y.onMouseleave),d.value&&(x.onFocus=y.onFocus,x.onBlur=y.onBlur),x}),_=ee(()=>{const x={};if(e.openOnHover&&(x.onMouseenter=()=>{l=!0,m()},x.onMouseleave=()=>{l=!1,p()}),d.value&&(x.onFocusin=()=>{c=!0,m()},x.onFocusout=()=>{c=!1,p()}),e.closeOnContentClick){const C=Pn(ck,null);x.onClick=()=>{n.value=!1,C?.closeParents()}}return x}),b=ee(()=>{const x={};return e.openOnHover&&(x.onMouseenter=()=>{f&&(l=!0,f=!1,m())},x.onMouseleave=()=>{l=!1,p()}),x});Ge(a,x=>{x&&(e.openOnHover&&!l&&(!d.value||!c)||d.value&&!c&&(!e.openOnHover||!l))&&!r.value?.contains(document.activeElement)&&(n.value=!1)}),Ge(n,x=>{x||setTimeout(()=>{h.value=void 0})},{flush:"post"});const S=N_();Er(()=>{S.value&&Cn(()=>{o.value=S.el})});const B=N_(),F=ee(()=>e.target==="cursor"&&h.value?h.value:B.value?B.el:JQ(e.target,s)||o.value),T=ee(()=>Array.isArray(F.value)?void 0:F.value);let E;return Ge(()=>!!e.activator,x=>{x&&Ua?(E=Gd(),E.run(()=>{gYe(e,s,{activatorEl:o,activatorEvents:g})})):E&&E.stop()},{flush:"post",immediate:!0}),hs(()=>{E?.stop()}),{activatorEl:o,activatorRef:S,target:F,targetEl:T,targetRef:B,activatorEvents:g,contentEvents:_,scrimEvents:b}}function gYe(e,t,n){let{activatorEl:a,activatorEvents:r}=n;Ge(()=>e.activator,(c,f)=>{if(f&&c!==f){const d=l(f);d&&o(d)}c&&Cn(()=>s())},{immediate:!0}),Ge(()=>e.activatorProps,()=>{s()}),hs(()=>{o()});function s(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l(),f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;c&&yte(c,Ie(r.value,f))}function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l(),f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;c&&_te(c,Ie(r.value,f))}function l(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const f=JQ(c,t);return a.value=f?.nodeType===Node.ELEMENT_NODE?f:void 0,a.value}}function JQ(e,t){if(!e)return;let n;if(e==="parent"){let a=t?.proxy?.$el?.parentNode;for(;a?.hasAttribute("data-no-activator");)a=a.parentNode;n=a}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function ZQ(){if(!Ua)return Gt(!1);const{ssr:e}=Vi();if(e){const t=Gt(!1);return An(()=>{t.value=!0}),t}else return Gt(!0)}const b4=ot({eager:Boolean},"lazy");function x4(e,t){const n=Gt(!1),a=qe(()=>n.value||e.eager||t.value);Ge(t,()=>n.value=!0);function r(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:a,onAfterLeave:r}}function im(){const t=Nr("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const LN=Symbol.for("vuetify:stack"),xp=As([]);function yYe(e,t,n){const a=Nr("useStack"),r=!n,s=Pn(LN,void 0),o=As({activeChildren:new Set});za(LN,o);const l=Gt(Number(Uu(t)));ko(e,()=>{const d=xp.at(-1)?.[1];l.value=d?d+10:Number(Uu(t)),r&&xp.push([a.uid,l.value]),s?.activeChildren.add(a.uid),hs(()=>{if(r){const A=Sn(xp).findIndex(m=>m[0]===a.uid);xp.splice(A,1)}s?.activeChildren.delete(a.uid)})});const c=Gt(!0);r&&Er(()=>{const d=xp.at(-1)?.[0]===a.uid;setTimeout(()=>c.value=d)});const f=qe(()=>!o.activeChildren.size);return{globalTop:uh(c),localTop:f,stackStyles:qe(()=>({zIndex:l.value}))}}function _Ye(e){return{teleportTarget:ee(()=>{const n=e();if(n===!0||!Ua)return;const a=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(a==null)return;let r=[...a.children].find(s=>s.matches(".v-overlay-container"));return r||(r=document.createElement("div"),r.className="v-overlay-container",a.appendChild(r)),r})}}function wYe(){return!0}function e7(e,t,n){if(!e||t7(e,n)===!1)return!1;const a=a5(t);if(typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&a.host===e.target)return!1;const r=(typeof n.value=="object"&&n.value.include||(()=>[]))();return r.push(t),!r.some(s=>s?.contains(e.target))}function t7(e,t){return(typeof t.value=="object"&&t.value.closeConditional||wYe)(e)}function bYe(e,t,n){const a=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&e7(e,t,n)&&setTimeout(()=>{t7(e,n)&&a&&a(e)},0)}function MN(e,t){const n=a5(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const dk={mounted(e,t){const n=r=>bYe(r,e,t),a=r=>{e._clickOutside.lastMousedownWasOutside=e7(r,e,t)};MN(e,r=>{r.addEventListener("click",n,!0),r.addEventListener("mousedown",a,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:a}},beforeUnmount(e,t){e._clickOutside&&(MN(e,n=>{if(!n||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:a,onMousedown:r}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",a,!0),n.removeEventListener("mousedown",r,!0)}),delete e._clickOutside[t.instance.$.uid])}};function xYe(e){const{modelValue:t,color:n,...a}=e;return i(jd,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&v("div",Ie({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},a),null)]})}const Zg=ot({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...hYe(),...nn(),...$r(),...b4(),...sYe(),...dYe(),...Aa(),...iu()},"VOverlay"),Hu=St()({name:"VOverlay",directives:{vClickOutside:dk},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...Zg()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:a,emit:r}=t;const s=Nr("VOverlay"),o=R(),l=R(),c=R(),f=fn(e,"modelValue"),d=ee({get:()=>f.value,set:j=>{j&&e.disabled||(f.value=j)}}),{themeClasses:A}=Ra(e),{rtlClasses:m,isRtl:p}=as(),{hasContent:h,onAfterLeave:y}=x4(e,d),g=La(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:_,localTop:b,stackStyles:S}=yYe(d,()=>e.zIndex,e._disableGlobalStack),{activatorEl:B,activatorRef:F,target:T,targetEl:E,targetRef:x,activatorEvents:C,contentEvents:D,scrimEvents:U}=pYe(e,{isActive:d,isTop:b,contentEl:c}),{teleportTarget:L}=_Ye(()=>{const j=e.attach||e.contained;if(j)return j;const J=B?.value?.getRootNode()||s.proxy?.$el?.getRootNode();return J instanceof ShadowRoot?J:!1}),{dimensionStyles:H}=Qr(e),oe=ZQ(),{scopeId:de}=im();Ge(()=>e.disabled,j=>{j&&(d.value=!1)});const{contentStyles:te,updateLocation:q}=oYe(e,{isRtl:p,contentEl:c,target:T,isActive:d});fYe(e,{root:o,contentEl:c,targetEl:E,target:T,isActive:d,updateLocation:q});function ce(j){r("click:outside",j),e.persistent?Q():d.value=!1}function le(j){return d.value&&_.value&&(!e.scrim||j.target===l.value||j instanceof MouseEvent&&j.shadowTarget===l.value)}Ua&&Ge(d,j=>{j?window.addEventListener("keydown",Z):window.removeEventListener("keydown",Z)},{immediate:!0}),ha(()=>{Ua&&window.removeEventListener("keydown",Z)});function Z(j){j.key==="Escape"&&_.value&&(c.value?.contains(document.activeElement)||r("keydown",j),e.persistent?Q():(d.value=!1,c.value?.contains(document.activeElement)&&B.value?.focus()))}function ne(j){j.key==="Escape"&&!_.value||r("keydown",j)}const G=uQ();ko(()=>e.closeOnBack,()=>{rqe(G,j=>{_.value&&d.value?(j(!1),e.persistent?Q():d.value=!1):j()})});const W=R();Ge(()=>d.value&&(e.absolute||e.contained)&&L.value==null,j=>{if(j){const J=xB(o.value);J&&J!==document.scrollingElement&&(W.value=J.scrollTop)}});function Q(){e.noClickAnimation||c.value&&jf(c.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:D0})}function O(){r("afterEnter")}function ae(){y(),r("afterLeave")}return It(()=>v(ze,null,[n.activator?.({isActive:d.value,targetRef:x,props:Ie({ref:F},C.value,e.activatorProps)}),oe.value&&h.value&&i(gZ,{disabled:!L.value,to:L.value},{default:()=>[v("div",Ie({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":d.value,"v-overlay--contained":e.contained},A.value,m.value,e.class],style:[S.value,{"--v-overlay-opacity":e.opacity,top:Zt(W.value)},e.style],ref:o,onKeydown:ne},de,a),[i(xYe,Ie({color:g,modelValue:d.value&&!!e.scrim,ref:l},U.value),null),i(So,{appear:!0,persisted:!0,transition:e.transition,target:T.value,onAfterEnter:O,onAfterLeave:ae},{default:()=>[Sa(v("div",Ie({ref:c,class:["v-overlay__content",e.contentClass],style:[H.value,te.value]},D.value,e.contentProps),[n.default?.({isActive:d})]),[[fi,d.value],[dk,{handler:ce,closeConditional:le,include:()=>[B.value]}]])]})])]})])),{activatorEl:B,scrimEl:l,target:T,animateClick:Q,contentEl:c,globalTop:_,localTop:b,updateLocation:q}}}),n7=ot({id:String,submenu:Boolean,disableInitialFocus:Boolean,...Wa(Zg({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:eb}}),["absolute"])},"VMenu"),ah=St()({name:"VMenu",props:n7(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"modelValue"),{scopeId:r}=im(),{isRtl:s}=as(),o=qo(),l=qe(()=>e.id||`v-menu-${o}`),c=R(),f=Pn(ck,null),d=Gt(new Set);za(ck,{register(){d.value.add(o)},unregister(){d.value.delete(o)},closeParents(g){setTimeout(()=>{!d.value.size&&!e.persistent&&(g==null||c.value?.contentEl&&!Ate(g,c.value.contentEl))&&(a.value=!1,f?.closeParents())},40)}}),ha(()=>{f?.unregister(),document.removeEventListener("focusin",A)}),rw(()=>a.value=!1);async function A(g){const _=g.relatedTarget,b=g.target;await Cn(),a.value&&_!==b&&c.value?.contentEl&&c.value?.globalTop&&![document,c.value.contentEl].includes(b)&&!c.value.contentEl.contains(b)&&P0(c.value.contentEl)[0]?.focus()}Ge(a,g=>{g?(f?.register(),Ua&&!e.disableInitialFocus&&document.addEventListener("focusin",A,{once:!0})):(f?.unregister(),Ua&&document.removeEventListener("focusin",A))},{immediate:!0});function m(g){f?.closeParents(g)}function p(g){if(!e.disabled)if(g.key==="Tab"||g.key==="Enter"&&!e.closeOnContentClick){if(g.key==="Enter"&&(g.target instanceof HTMLTextAreaElement||g.target instanceof HTMLInputElement&&g.target.closest("form")))return;g.key==="Enter"&&g.preventDefault(),Q8(P0(c.value?.contentEl,!1),g.shiftKey?"prev":"next",b=>b.tabIndex>=0)||(a.value=!1,c.value?.activatorEl?.focus())}else e.submenu&&g.key===(s.value?"ArrowRight":"ArrowLeft")&&(a.value=!1,c.value?.activatorEl?.focus())}function h(g){if(e.disabled)return;const _=c.value?.contentEl;_&&a.value?g.key==="ArrowDown"?(g.preventDefault(),g.stopImmediatePropagation(),sA(_,"next")):g.key==="ArrowUp"?(g.preventDefault(),g.stopImmediatePropagation(),sA(_,"prev")):e.submenu&&(g.key===(s.value?"ArrowRight":"ArrowLeft")?a.value=!1:g.key===(s.value?"ArrowLeft":"ArrowRight")&&(g.preventDefault(),sA(_,"first"))):(e.submenu?g.key===(s.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(g.key))&&(a.value=!0,g.preventDefault(),setTimeout(()=>setTimeout(()=>h(g))))}const y=ee(()=>Ie({"aria-haspopup":"menu","aria-expanded":String(a.value),"aria-controls":l.value,onKeydown:h},e.activatorProps));return It(()=>{const g=Hu.filterProps(e);return i(Hu,Ie({ref:c,id:l.value,class:["v-menu",e.class],style:e.style},g,{modelValue:a.value,"onUpdate:modelValue":_=>a.value=_,absolute:!0,activatorProps:y.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":m,onKeydown:p},r),{activator:n.activator,default:function(){for(var _=arguments.length,b=new Array(_),S=0;S<_;S++)b[S]=arguments[S];return i(Gn,{root:"VMenu"},{default:()=>[n.default?.(...b)]})}})}),Fs({id:l,openChildren:d},c)}}),CYe=ot({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...nn(),...iu({transition:{component:c4}})},"VCounter"),ob=St()({name:"VCounter",functional:!0,props:CYe(),setup(e,t){let{slots:n}=t;const a=qe(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return It(()=>i(So,{transition:e.transition},{default:()=>[Sa(v("div",{class:lt(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:Mt(e.style)},[n.default?n.default({counter:a.value,max:e.max,value:e.value}):a.value]),[[fi,e.active]])]})),{}}}),SYe=ot({floating:Boolean,...nn()},"VFieldLabel"),Qp=St()({name:"VFieldLabel",props:SYe(),setup(e,t){let{slots:n}=t;return It(()=>i(Dh,{class:lt(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:Mt(e.style)},n)),{}}}),EYe=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],e1=ot({appendInnerIcon:vn,bgColor:String,clearable:Boolean,clearIcon:{type:vn,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:vn,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>EYe.includes(e)},"onClick:clear":Os(),"onClick:appendInner":Os(),"onClick:prependInner":Os(),...nn(),...ab(),...dr(),...Aa()},"VField"),uf=St()({name:"VField",inheritAttrs:!1,props:{id:String,...Xg(),...e1()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{themeClasses:s}=Ra(e),{loaderClasses:o}=Kg(e),{focusClasses:l,isFocused:c,focus:f,blur:d}=Zc(e),{InputIcon:A}=wQ(e),{roundedClasses:m}=Tr(e),{rtlClasses:p}=as(),h=qe(()=>e.dirty||e.active),y=qe(()=>!!(e.label||r.label)),g=qe(()=>!e.singleLine&&y.value),_=qo(),b=ee(()=>e.id||`input-${_}`),S=qe(()=>e.details?`${b.value}-messages`:void 0),B=R(),F=R(),T=R(),E=ee(()=>["plain","underlined"].includes(e.variant)),x=ee(()=>e.error||e.disabled?void 0:h.value&&c.value?e.color:e.baseColor),C=ee(()=>{if(!(!e.iconColor||e.glow&&!c.value))return e.iconColor===!0?x.value:e.iconColor}),{backgroundColorClasses:D,backgroundColorStyles:U}=La(()=>e.bgColor),{textColorClasses:L,textColorStyles:H}=$s(x);Ge(h,te=>{if(g.value){const q=B.value.$el,ce=F.value.$el;requestAnimationFrame(()=>{const le=yB(q),Z=ce.getBoundingClientRect(),ne=Z.x-le.x,G=Z.y-le.y-(le.height/2-Z.height/2),W=Z.width/.75,Q=Math.abs(W-le.width)>1?{maxWidth:Zt(W)}:void 0,O=getComputedStyle(q),ae=getComputedStyle(ce),j=parseFloat(O.transitionDuration)*1e3||150,J=parseFloat(ae.getPropertyValue("--v-field-label-scale")),ie=ae.getPropertyValue("color");q.style.visibility="visible",ce.style.visibility="hidden",jf(q,{transform:`translate(${ne}px, ${G}px) scale(${J})`,color:ie,...Q},{duration:j,easing:D0,direction:te?"normal":"reverse"}).finished.then(()=>{q.style.removeProperty("visibility"),ce.style.removeProperty("visibility")})})}},{flush:"post"});const oe=ee(()=>({isActive:h,isFocused:c,controlRef:T,blur:d,focus:f}));function de(te){te.target!==document.activeElement&&te.preventDefault()}return It(()=>{const te=e.variant==="outlined",q=!!(r["prepend-inner"]||e.prependInnerIcon),ce=!!(e.clearable||r.clear)&&!e.disabled,le=!!(r["append-inner"]||e.appendInnerIcon||ce),Z=()=>r.label?r.label({...oe.value,label:e.label,props:{for:b.value}}):e.label;return v("div",Ie({class:["v-field",{"v-field--active":h.value,"v-field--appended":le,"v-field--center-affix":e.centerAffix??!E.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":q,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!Z(),[`v-field--variant-${e.variant}`]:!0},s.value,D.value,l.value,o.value,m.value,p.value,e.class],style:[U.value,e.style],onClick:de},n),[v("div",{class:"v-field__overlay"},null),i(jg,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:r.loader}),q&&v("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&i(A,{key:"prepend-icon",name:"prependInner",color:C.value},null),r["prepend-inner"]?.(oe.value)]),v("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&g.value&&i(Qp,{key:"floating-label",ref:F,class:lt([L.value]),floating:!0,for:b.value,"aria-hidden":!h.value,style:Mt(H.value)},{default:()=>[Z()]}),y.value&&i(Qp,{key:"label",ref:B,for:b.value},{default:()=>[Z()]}),r.default?.({...oe.value,props:{id:b.value,class:"v-field__input","aria-describedby":S.value},focus:f,blur:d})??v("div",{id:b.value,class:"v-field__input","aria-describedby":S.value},null)]),ce&&i(d4,{key:"clear"},{default:()=>[Sa(v("div",{class:"v-field__clearable",onMousedown:ne=>{ne.preventDefault(),ne.stopPropagation()}},[i(Gn,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[r.clear?r.clear({...oe.value,props:{onFocus:f,onBlur:d,onClick:e["onClick:clear"],tabindex:-1}}):i(A,{name:"clear",onFocus:f,onBlur:d,tabindex:-1},null)]})]),[[fi,e.dirty]])]}),le&&v("div",{key:"append",class:"v-field__append-inner"},[r["append-inner"]?.(oe.value),e.appendInnerIcon&&i(A,{key:"append-icon",name:"appendInner",color:C.value},null)]),v("div",{class:lt(["v-field__outline",L.value]),style:Mt(H.value)},[te&&v(ze,null,[v("div",{class:"v-field__outline__start"},null),g.value&&v("div",{class:"v-field__outline__notch"},[i(Qp,{ref:F,floating:!0,for:b.value,"aria-hidden":!h.value},{default:()=>[Z()]})]),v("div",{class:"v-field__outline__end"},null)]),E.value&&g.value&&i(Qp,{ref:F,floating:!0,for:b.value,"aria-hidden":!h.value},{default:()=>[Z()]})])])}),{controlRef:T,fieldIconColor:C}}});function a7(e){function t(n,a){!e.autofocus||!n||a[0].target?.focus?.()}return{onIntersect:t}}const kYe=["color","file","time","date","datetime-local","week","month"],t1=ot({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...ed(),...e1()},"VTextField"),Wc=St()({name:"VTextField",directives:{vIntersect:Jl},inheritAttrs:!1,props:t1(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const s=fn(e,"modelValue"),{isFocused:o,focus:l,blur:c}=Zc(e),{onIntersect:f}=a7(e),d=ee(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:(s.value??"").toString().length),A=ee(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),m=ee(()=>["plain","underlined"].includes(e.variant)),p=R(),h=R(),y=R(),g=ee(()=>kYe.includes(e.type)||e.persistentPlaceholder||o.value||e.active);function _(){o.value||l(),Cn(()=>{y.value!==document.activeElement&&y.value?.focus()})}function b(T){a("mousedown:control",T),T.target!==y.value&&(_(),T.preventDefault())}function S(T){a("click:control",T)}function B(T,E){T.stopPropagation(),_(),Cn(()=>{s.value=null,E(),cw(e["onClick:clear"],T)})}function F(T){const E=T.target;if(s.value=E.value,e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type)){const x=[E.selectionStart,E.selectionEnd];Cn(()=>{E.selectionStart=x[0],E.selectionEnd=x[1]})}}return It(()=>{const T=!!(r.counter||e.counter!==!1&&e.counter!=null),E=!!(T||r.details),[x,C]=ff(n),{modelValue:D,...U}=so.filterProps(e),L=uf.filterProps(e);return i(so,Ie({ref:p,modelValue:s.value,"onUpdate:modelValue":H=>s.value=H,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":m.value},e.class],style:e.style},x,U,{centerAffix:!m.value,focused:o.value}),{...r,default:H=>{let{id:oe,isDisabled:de,isDirty:te,isReadonly:q,isValid:ce,hasDetails:le,reset:Z}=H;return i(uf,Ie({ref:h,onMousedown:b,onClick:S,"onClick:clear":ne=>B(ne,Z),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},Wa(L,["onClick:clear"]),{id:oe.value,active:g.value||te.value,dirty:te.value||e.dirty,disabled:de.value,focused:o.value,details:le.value,error:ce.value===!1}),{...r,default:ne=>{let{props:{class:G,...W}}=ne;const Q=Sa(v("input",Ie({ref:y,value:s.value,onInput:F,autofocus:e.autofocus,readonly:q.value,disabled:de.value,name:e.name,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:l,onBlur:c},W,C),null),[[Jl,{handler:f},null,{once:!0}]]);return v(ze,null,[e.prefix&&v("span",{class:"v-text-field__prefix"},[v("span",{class:"v-text-field__prefix__text"},[e.prefix])]),r.default?v("div",{class:lt(G),"data-no-activator":""},[r.default(),Q]):Ru(Q,{class:G}),e.suffix&&v("span",{class:"v-text-field__suffix"},[v("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:E?H=>v(ze,null,[r.details?.(H),T&&v(ze,null,[v("span",null,null),i(ob,{active:e.persistentCounter||o.value,value:d.value,max:A.value,disabled:e.disabled},r.counter)])]):void 0})}),Fs({},p,h,y)}}),BYe=ot({renderless:Boolean,...nn()},"VVirtualScrollItem"),r7=St()({name:"VVirtualScrollItem",inheritAttrs:!1,props:BYe(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{resizeRef:s,contentRect:o}=Kl(void 0,"border");Ge(()=>o.value?.height,l=>{l!=null&&a("update:height",l)}),It(()=>e.renderless?v(ze,null,[r.default?.({itemRef:s})]):v("div",Ie({ref:s,class:["v-virtual-scroll__item",e.class],style:e.style},n),[r.default?.()]))}}),TYe=-1,IYe=1,JC=100,s7=ot({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function o7(e,t){const n=Vi(),a=Gt(0);Er(()=>{a.value=parseFloat(e.itemHeight||0)});const r=Gt(0),s=Gt(Math.ceil((parseInt(e.height)||n.height.value)/(a.value||16))||1),o=Gt(0),l=Gt(0),c=R(),f=R();let d=0;const{resizeRef:A,contentRect:m}=Kl();Er(()=>{A.value=c.value});const p=ee(()=>c.value===document.documentElement?n.height.value:m.value?.height||parseInt(e.height)||0),h=ee(()=>!!(c.value&&f.value&&p.value&&a.value));let y=Array.from({length:t.value.length}),g=Array.from({length:t.value.length});const _=Gt(0);let b=-1;function S(Z){return y[Z]||a.value}const B=M8(()=>{const Z=performance.now();g[0]=0;const ne=t.value.length;for(let G=1;G<=ne-1;G++)g[G]=(g[G-1]||0)+S(G-1);_.value=Math.max(_.value,performance.now()-Z)},_),F=Ge(h,Z=>{Z&&(F(),d=f.value.offsetTop,B.immediate(),te(),~b&&Cn(()=>{Ua&&window.requestAnimationFrame(()=>{ce(b),b=-1})}))});hs(()=>{B.clear()});function T(Z,ne){const G=y[Z],W=a.value;a.value=W?Math.min(a.value,ne):ne,(G!==ne||W!==a.value)&&(y[Z]=ne,B())}function E(Z){Z=ar(Z,0,t.value.length-1);const ne=Math.floor(Z),G=Z%1,W=ne+1,Q=g[ne]||0,O=g[W]||Q;return Q+(O-Q)*G}function x(Z){return FYe(g,Z)}let C=0,D=0,U=0;Ge(p,(Z,ne)=>{ne&&(te(),Z<ne&&requestAnimationFrame(()=>{D=0,te()}))});let L=-1;function H(){if(!c.value||!f.value)return;const Z=c.value.scrollTop,ne=performance.now();ne-U>500?(D=Math.sign(Z-C),d=f.value.offsetTop):D=Z-C,C=Z,U=ne,window.clearTimeout(L),L=window.setTimeout(oe,500),te()}function oe(){!c.value||!f.value||(D=0,U=0,window.clearTimeout(L),te())}let de=-1;function te(){cancelAnimationFrame(de),de=requestAnimationFrame(q)}function q(){if(!c.value||!p.value||!a.value)return;const Z=C-d,ne=Math.sign(D),G=Math.max(0,Z-JC),W=ar(x(G),0,t.value.length),Q=Z+p.value+JC,O=ar(x(Q)+1,W+1,t.value.length);if((ne!==TYe||W<r.value)&&(ne!==IYe||O>s.value)){const ae=E(r.value)-E(W),j=E(O)-E(s.value);Math.max(ae,j)>JC?(r.value=W,s.value=O):(W<=0&&(r.value=W),O>=t.value.length&&(s.value=O))}o.value=E(r.value),l.value=E(t.value.length)-E(s.value)}function ce(Z){const ne=E(Z);!c.value||Z&&!ne?b=Z:c.value.scrollTop=ne}const le=ee(()=>t.value.slice(r.value,s.value).map((Z,ne)=>{const G=ne+r.value;return{raw:Z,index:G,key:Or(Z,e.itemKey,G)}}));return Ge(t,()=>{y=Array.from({length:t.value.length}),g=Array.from({length:t.value.length}),B.immediate(),te()},{deep:1}),{calculateVisibleItems:te,containerRef:c,markerRef:f,computedItems:le,paddingTop:o,paddingBottom:l,scrollToIndex:ce,handleScroll:H,handleScrollend:oe,handleItemResize:T}}function FYe(e,t){let n=e.length-1,a=0,r=0,s=null,o=-1;if(e[n]<t)return n;for(;a<=n;)if(r=a+n>>1,s=e[r],s>t)n=r-1;else if(s<t)o=r,a=r+1;else return s===t?r:a;return o}const PYe=ot({items:{type:Array,default:()=>[]},renderless:Boolean,...s7(),...nn(),...$r()},"VVirtualScroll"),ib=St()({name:"VVirtualScroll",props:PYe(),setup(e,t){let{slots:n}=t;const a=Nr("VVirtualScroll"),{dimensionStyles:r}=Qr(e),{calculateVisibleItems:s,containerRef:o,markerRef:l,handleScroll:c,handleScrollend:f,handleItemResize:d,scrollToIndex:A,paddingTop:m,paddingBottom:p,computedItems:h}=o7(e,qe(()=>e.items));return ko(()=>e.renderless,()=>{function y(){const _=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";o.value===document.documentElement?(document[_]("scroll",c,{passive:!0}),document[_]("scrollend",f)):(o.value?.[_]("scroll",c,{passive:!0}),o.value?.[_]("scrollend",f))}An(()=>{o.value=xB(a.vnode.el,!0),y(!0)}),hs(y)}),It(()=>{const y=h.value.map(g=>i(r7,{key:g.key,renderless:e.renderless,"onUpdate:height":_=>d(g.index,_)},{default:_=>n.default?.({item:g.raw,index:g.index,..._})}));return e.renderless?v(ze,null,[v("div",{ref:l,class:"v-virtual-scroll__spacer",style:{paddingTop:Zt(m.value)}},null),y,v("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Zt(p.value)}},null)]):v("div",{ref:o,class:lt(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:f,style:Mt([r.value,e.style])},[v("div",{ref:l,class:"v-virtual-scroll__container",style:{paddingTop:Zt(m.value),paddingBottom:Zt(p.value)}},[y])])}),{calculateVisibleItems:s,scrollToIndex:A}}});function C4(e,t){const n=Gt(!1);let a;function r(l){cancelAnimationFrame(a),n.value=!0,a=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{n.value=!1})})}async function s(){await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>{if(n.value){const c=Ge(n,()=>{c(),l()})}else l()})}async function o(l){if(l.key==="Tab"&&t.value?.focus(),!["PageDown","PageUp","Home","End"].includes(l.key))return;const c=e.value?.$el;if(!c)return;(l.key==="Home"||l.key==="End")&&c.scrollTo({top:l.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await s();const f=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(l.key==="PageDown"||l.key==="Home"){const d=c.getBoundingClientRect().top;for(const A of f)if(A.getBoundingClientRect().top>=d){A.focus();break}}else{const d=c.getBoundingClientRect().bottom;for(const A of[...f].reverse())if(A.getBoundingClientRect().bottom<=d){A.focus();break}}}return{onScrollPassive:r,onKeydown:o}}const S4=ot({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:vn,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...QQ({itemChildren:!1})},"Select"),DYe=ot({...S4(),...Wa(t1({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...iu({transition:{component:eb}})},"VSelect"),E4=St()({name:"VSelect",props:DYe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Ka(),r=R(),s=R(),o=R(),{items:l,transformIn:c,transformOut:f}=g4(e),d=fn(e,"modelValue",[],Z=>c(Z===null?[null]:xr(Z)),Z=>{const ne=f(Z);return e.multiple?ne:ne[0]??null}),A=ee(()=>typeof e.counterValue=="function"?e.counterValue(d.value):typeof e.counterValue=="number"?e.counterValue:d.value.length),m=Jg(e),p=ee(()=>d.value.map(Z=>Z.value)),h=Gt(!1);let y="",g=-1,_;const b=ee(()=>e.hideSelected?l.value.filter(Z=>!d.value.some(ne=>(e.valueComparator||ks)(ne,Z))):l.value),S=ee(()=>e.hideNoData&&!b.value.length||m.isReadonly.value||m.isDisabled.value),B=fn(e,"menu"),F=ee({get:()=>B.value,set:Z=>{B.value&&!Z&&s.value?.openChildren.size||Z&&S.value||(B.value=Z)}}),T=qe(()=>F.value?e.closeText:e.openText),E=ee(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),x=R(),C=C4(x,r);function D(Z){e.openOnClear&&(F.value=!0)}function U(){S.value||(F.value=!F.value)}function L(Z){Lv(Z)&&H(Z)}function H(Z){if(!Z.key||m.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(Z.key)&&Z.preventDefault(),["Enter","ArrowDown"," "].includes(Z.key)&&(F.value=!0),["Escape","Tab"].includes(Z.key)&&(F.value=!1),Z.key==="Home"?x.value?.focus("first"):Z.key==="End"&&x.value?.focus("last");const ne=1e3;if(!Lv(Z))return;const G=performance.now();G-_>ne&&(y="",g=-1),y+=Z.key.toLowerCase(),_=G;const W=b.value;function Q(){let ie=O();return ie||y.at(-1)===y.at(-2)&&(y=y.slice(0,-1),ie=O(),ie)||(g=-1,ie=O(),ie)?ie:(y=Z.key.toLowerCase(),O())}function O(){for(let ie=g+1;ie<W.length;ie++){const X=W[ie];if(X.title.toLowerCase().startsWith(y))return[X,ie]}}const ae=Q();if(!ae)return;const[j,J]=ae;g=J,x.value?.focus(J),e.multiple||(d.value=[j])}function oe(Z){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!Z.props.disabled)if(e.multiple){const G=d.value.findIndex(Q=>(e.valueComparator||ks)(Q.value,Z.value)),W=ne??!~G;if(~G){const Q=W?[...d.value,Z]:[...d.value];Q.splice(G,1),d.value=Q}else W&&(d.value=[...d.value,Z])}else{const G=ne!==!1;d.value=G?[Z]:[],Cn(()=>{F.value=!1})}}function de(Z){x.value?.$el.contains(Z.relatedTarget)||(F.value=!1)}function te(){e.eager&&o.value?.calculateVisibleItems()}function q(){h.value&&r.value?.focus()}function ce(Z){h.value=!0}function le(Z){if(Z==null)d.value=[];else if(Vv(r.value,":autofill")||Vv(r.value,":-webkit-autofill")){const ne=l.value.find(G=>G.title===Z);ne&&oe(ne)}else r.value&&(r.value.value="")}return Ge(F,()=>{if(!e.hideSelected&&F.value&&d.value.length){const Z=b.value.findIndex(ne=>d.value.some(G=>(e.valueComparator||ks)(G.value,ne.value)));Ua&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{Z>=0&&o.value?.scrollToIndex(Z)})}}),Ge(()=>e.items,(Z,ne)=>{F.value||h.value&&e.hideNoData&&!ne.length&&Z.length&&(F.value=!0)}),It(()=>{const Z=!!(e.chips||n.chip),ne=!!(!e.hideNoData||b.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),G=d.value.length>0,W=Wc.filterProps(e),Q=G||!h.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return i(Wc,Ie({ref:r},W,{modelValue:d.value.map(O=>O.props.title).join(", "),"onUpdate:modelValue":le,focused:h.value,"onUpdate:focused":O=>h.value=O,validationValue:d.externalValue,counterValue:A.value,dirty:G,class:["v-select",{"v-select--active-menu":F.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:Q,"onClick:clear":D,"onMousedown:control":U,onBlur:de,onKeydown:H,"aria-label":a(T.value),title:a(T.value)}),{...n,default:()=>v(ze,null,[i(ah,Ie({ref:s,modelValue:F.value,"onUpdate:modelValue":O=>F.value=O,activator:"parent",contentClass:"v-select__content",disabled:S.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:te,onAfterLeave:q},E.value),{default:()=>[ne&&i(nh,Ie({ref:x,selected:p.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:O=>O.preventDefault(),onKeydown:L,onFocusin:ce,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},C,e.listProps),{default:()=>[n["prepend-item"]?.(),!b.value.length&&!e.hideNoData&&(n["no-data"]?.()??i(Zl,{key:"no-data",title:a(e.noDataText)},null)),i(ib,{ref:o,renderless:!0,items:b.value,itemKey:"value"},{default:O=>{let{item:ae,index:j,itemRef:J}=O;const ie=vte(ae.props),X=Ie(ae.props,{ref:J,key:ae.value,onClick:()=>oe(ae,null)});return ae.type==="divider"?n.divider?.({props:ae.raw,index:j})??i(Fi,Ie(ae.props,{key:`divider-${j}`}),null):ae.type==="subheader"?n.subheader?.({props:ae.raw,index:j})??i(Rh,Ie(ae.props,{key:`subheader-${j}`}),null):n.item?.({item:ae,index:j,props:X})??i(Zl,Ie(X,{role:"option"}),{prepend:fe=>{let{isSelected:M}=fe;return v(ze,null,[e.multiple&&!e.hideSelected?i(Ou,{key:ae.value,modelValue:M,ripple:!1,tabindex:"-1"},null):void 0,ie.prependAvatar&&i(cl,{image:ie.prependAvatar},null),ie.prependIcon&&i(Da,{icon:ie.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),d.value.map((O,ae)=>{function j(fe){fe.stopPropagation(),fe.preventDefault(),oe(O,!1)}const J={"onClick:close":j,onKeydown(fe){fe.key!=="Enter"&&fe.key!==" "||(fe.preventDefault(),fe.stopPropagation(),j(fe))},onMousedown(fe){fe.preventDefault(),fe.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ie=Z?!!n.chip:!!n.selection,X=ie?dw(Z?n.chip({item:O,index:ae,props:J}):n.selection({item:O,index:ae})):void 0;if(!(ie&&!X))return v("div",{key:O.value,class:"v-select__selection"},[Z?n.chip?i(Gn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:O.title}}},{default:()=>[X]}):i(Uh,Ie({key:"chip",closable:e.closableChips,size:"small",text:O.title,disabled:O.props.disabled},J),null):X??v("span",{class:"v-select__selection-text"},[O.title,e.multiple&&ae<d.value.length-1&&v("span",{class:"v-select__selection-comma"},[N(",")])])])})]),"append-inner":function(){for(var O=arguments.length,ae=new Array(O),j=0;j<O;j++)ae[j]=arguments[j];return v(ze,null,[n["append-inner"]?.(...ae),e.menuIcon?i(Da,{class:"v-select__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Fs({isFocused:h,menu:F,select:oe},r)}}),UYe=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const a=[];let r=e.indexOf(t);for(;~r;)a.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return a.length?a:-1};function ZC(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const Nh=ot({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function RYe(e,t,n){const a=[],r=n?.default??UYe,s=n?.filterKeys?xr(n.filterKeys):!1,o=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return a;e:for(let l=0;l<e.length;l++){const[c,f=c]=xr(e[l]),d={},A={};let m=-1;if((t||o>0)&&!n?.noFilter){let p=!1;if(typeof c=="object"){if(c.type==="divider"||c.type==="subheader")continue;const g=s||Object.keys(f);p=g.length===o;for(const _ of g){const b=Or(f,_),S=n?.customKeyFilter?.[_];if(m=S?S(b,t,c):r(b,t,c),m!==-1&&m!==!1)S?d[_]=ZC(m,t):A[_]=ZC(m,t);else if(n?.filterMode==="every")continue e}}else m=r(c,t,c),m!==-1&&m!==!1&&(A.title=ZC(m,t));const h=Object.keys(A).length,y=Object.keys(d).length;if(!h&&!y||n?.filterMode==="union"&&y!==o&&!h||n?.filterMode==="intersection"&&(y!==o||!h&&o>0&&!p))continue}a.push({index:l,matches:{...A,...d}})}return a}function Vh(e,t,n,a){const r=Gt([]),s=Gt(new Map),o=ee(()=>a?.transform?Oe(t).map(c=>[c,a.transform(c)]):Oe(t));Er(()=>{const c=typeof n=="function"?n():Oe(n),f=typeof c!="string"&&typeof c!="number"?"":String(c),d=RYe(o.value,f,{customKeyFilter:{...e.customKeyFilter,...Oe(a?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),A=Oe(t),m=[],p=new Map;d.forEach(h=>{let{index:y,matches:g}=h;const _=A[y];m.push(_),p.set(_.value,g)}),r.value=m,s.value=p});function l(c){return s.value.get(c.value)}return{filteredItems:r,filteredMatches:s,getMatches:l}}function i7(e,t,n){return n==null||!n.length?t:n.map((a,r)=>{const s=r===0?0:n[r-1][1],o=[v("span",{class:lt(`${e}__unmask`)},[t.slice(s,a[0])]),v("span",{class:lt(`${e}__mask`)},[t.slice(a[0],a[1])])];return r===n.length-1&&o.push(v("span",{class:lt(`${e}__unmask`)},[t.slice(a[1])])),v(ze,null,[o])})}const NYe=ot({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Nh({filterKeys:["title"]}),...S4(),...Wa(t1({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...iu({transition:!1})},"VAutocomplete"),VYe=St()({name:"VAutocomplete",props:NYe(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Ka(),r=R(),s=Gt(!1),o=Gt(!0),l=Gt(!1),c=R(),f=R(),d=Gt(-1),{items:A,transformIn:m,transformOut:p}=g4(e),{textColorClasses:h,textColorStyles:y}=$s(()=>r.value?.color),g=fn(e,"search",""),_=fn(e,"modelValue",[],X=>m(X===null?[null]:xr(X)),X=>{const fe=p(X);return e.multiple?fe:fe[0]??null}),b=ee(()=>typeof e.counterValue=="function"?e.counterValue(_.value):typeof e.counterValue=="number"?e.counterValue:_.value.length),S=Jg(e),{filteredItems:B,getMatches:F}=Vh(e,A,()=>o.value?"":g.value),T=ee(()=>e.hideSelected?B.value.filter(X=>!_.value.some(fe=>fe.value===X.value)):B.value),E=ee(()=>!!(e.chips||n.chip)),x=ee(()=>E.value||!!n.selection),C=ee(()=>_.value.map(X=>X.props.value)),D=ee(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&g.value===T.value[0]?.title)&&T.value.length>0&&!o.value&&!l.value),U=ee(()=>e.hideNoData&&!T.value.length||S.isReadonly.value||S.isDisabled.value),L=fn(e,"menu"),H=ee({get:()=>L.value,set:X=>{L.value&&!X&&c.value?.openChildren.size||X&&U.value||(L.value=X)}}),oe=ee(()=>H.value?e.closeText:e.openText),de=R(),te=C4(de,r);function q(X){e.openOnClear&&(H.value=!0),g.value=""}function ce(){U.value||(H.value=!0)}function le(X){U.value||(s.value&&(X.preventDefault(),X.stopPropagation()),H.value=!H.value)}function Z(X){(Lv(X)||X.key==="Backspace")&&r.value?.focus()}function ne(X){if(S.isReadonly.value)return;const fe=r.value?.selectionStart,M=_.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(X.key)&&X.preventDefault(),["Enter","ArrowDown"].includes(X.key)&&(H.value=!0),["Escape"].includes(X.key)&&(H.value=!1),D.value&&["Enter","Tab"].includes(X.key)&&!_.value.some(z=>{let{value:se}=z;return se===T.value[0].value})&&ie(T.value[0]),X.key==="ArrowDown"&&D.value&&de.value?.focus("next"),["Backspace","Delete"].includes(X.key)){if(!e.multiple&&x.value&&_.value.length>0&&!g.value)return ie(_.value[0],!1);if(~d.value){X.preventDefault();const z=d.value;ie(_.value[d.value],!1),d.value=z>=M-1?M-2:z}else X.key==="Backspace"&&!g.value&&(d.value=M-1);return}if(e.multiple)if(X.key==="ArrowLeft"){if(d.value<0&&fe&&fe>0)return;const z=d.value>-1?d.value-1:M-1;if(_.value[z])d.value=z;else{const se=g.value?.length??null;d.value=-1,r.value?.setSelectionRange(se,se)}}else if(X.key==="ArrowRight"){if(d.value<0)return;const z=d.value+1;_.value[z]?d.value=z:(d.value=-1,r.value?.setSelectionRange(0,0))}else~d.value&&Lv(X)&&(d.value=-1)}function G(X){if(Vv(r.value,":autofill")||Vv(r.value,":-webkit-autofill")){const fe=A.value.find(M=>M.title===X.target.value);fe&&ie(fe)}}function W(){e.eager&&f.value?.calculateVisibleItems()}function Q(){s.value&&(o.value=!0,r.value?.focus())}function O(X){s.value=!0,setTimeout(()=>{l.value=!0})}function ae(X){l.value=!1}function j(X){(X==null||X===""&&!e.multiple&&!x.value)&&(_.value=[])}const J=Gt(!1);function ie(X){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!X||X.props.disabled))if(e.multiple){const M=_.value.findIndex(se=>(e.valueComparator||ks)(se.value,X.value)),z=fe??!~M;if(~M){const se=z?[..._.value,X]:[..._.value];se.splice(M,1),_.value=se}else z&&(_.value=[..._.value,X]);e.clearOnSelect&&(g.value="")}else{const M=fe!==!1;_.value=M?[X]:[],g.value=M&&!x.value?X.title:"",Cn(()=>{H.value=!1,o.value=!0})}}return Ge(s,(X,fe)=>{X!==fe&&(X?(J.value=!0,g.value=e.multiple||x.value?"":String(_.value.at(-1)?.props.title??""),o.value=!0,Cn(()=>J.value=!1)):(!e.multiple&&g.value==null&&(_.value=[]),H.value=!1,(e.multiple||x.value)&&(g.value=""),d.value=-1))}),Ge(g,X=>{!s.value||J.value||(X&&(H.value=!0),o.value=!X)}),Ge(H,()=>{if(!e.hideSelected&&H.value&&_.value.length){const X=T.value.findIndex(fe=>_.value.some(M=>fe.value===M.value));Ua&&window.requestAnimationFrame(()=>{X>=0&&f.value?.scrollToIndex(X)})}}),Ge(()=>e.items,(X,fe)=>{H.value||s.value&&!fe.length&&X.length&&(H.value=!0)}),It(()=>{const X=!!(!e.hideNoData||T.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),fe=_.value.length>0,M=Wc.filterProps(e);return i(Wc,Ie({ref:r},M,{modelValue:g.value,"onUpdate:modelValue":[z=>g.value=z,j],focused:s.value,"onUpdate:focused":z=>s.value=z,validationValue:_.externalValue,counterValue:b.value,dirty:fe,onChange:G,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":H.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!x.value,"v-autocomplete--selecting-index":d.value>-1},e.class],style:e.style,readonly:S.isReadonly.value,placeholder:fe?void 0:e.placeholder,"onClick:clear":q,"onMousedown:control":ce,onKeydown:ne}),{...n,default:()=>v(ze,null,[i(ah,Ie({ref:c,modelValue:H.value,"onUpdate:modelValue":z=>H.value=z,activator:"parent",contentClass:"v-autocomplete__content",disabled:U.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:W,onAfterLeave:Q},e.menuProps),{default:()=>[X&&i(nh,Ie({ref:de,filterable:!0,selected:C.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:z=>z.preventDefault(),onKeydown:Z,onFocusin:O,onFocusout:ae,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},te,e.listProps),{default:()=>[n["prepend-item"]?.(),!T.value.length&&!e.hideNoData&&(n["no-data"]?.()??i(Zl,{key:"no-data",title:a(e.noDataText)},null)),i(ib,{ref:f,renderless:!0,items:T.value,itemKey:"value"},{default:z=>{let{item:se,index:be,itemRef:Fe}=z;const ye=Ie(se.props,{ref:Fe,key:se.value,active:D.value&&be===0?!0:void 0,onClick:()=>ie(se,null)});return se.type==="divider"?n.divider?.({props:se.raw,index:be})??i(Fi,Ie(se.props,{key:`divider-${be}`}),null):se.type==="subheader"?n.subheader?.({props:se.raw,index:be})??i(Rh,Ie(se.props,{key:`subheader-${be}`}),null):n.item?.({item:se,index:be,props:ye})??i(Zl,Ie(ye,{role:"option"}),{prepend:Qe=>{let{isSelected:_e}=Qe;return v(ze,null,[e.multiple&&!e.hideSelected?i(Ou,{key:se.value,modelValue:_e,ripple:!1,tabindex:"-1"},null):void 0,se.props.prependAvatar&&i(cl,{image:se.props.prependAvatar},null),se.props.prependIcon&&i(Da,{icon:se.props.prependIcon},null)])},title:()=>o.value?se.title:i7("v-autocomplete",se.title,F(se)?.title)})}}),n["append-item"]?.()]})]}),_.value.map((z,se)=>{function be(_e){_e.stopPropagation(),_e.preventDefault(),ie(z,!1)}const Fe={"onClick:close":be,onKeydown(_e){_e.key!=="Enter"&&_e.key!==" "||(_e.preventDefault(),_e.stopPropagation(),be(_e))},onMousedown(_e){_e.preventDefault(),_e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ye=E.value?!!n.chip:!!n.selection,Qe=ye?dw(E.value?n.chip({item:z,index:se,props:Fe}):n.selection({item:z,index:se})):void 0;if(!(ye&&!Qe))return v("div",{key:z.value,class:lt(["v-autocomplete__selection",se===d.value&&["v-autocomplete__selection--selected",h.value]]),style:Mt(se===d.value?y.value:{})},[E.value?n.chip?i(Gn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:z.title}}},{default:()=>[Qe]}):i(Uh,Ie({key:"chip",closable:e.closableChips,size:"small",text:z.title,disabled:z.props.disabled},Fe),null):Qe??v("span",{class:"v-autocomplete__selection-text"},[z.title,e.multiple&&se<_.value.length-1&&v("span",{class:"v-autocomplete__selection-comma"},[N(",")])])])})]),"append-inner":function(){for(var z=arguments.length,se=new Array(z),be=0;be<z;be++)se[be]=arguments[be];return v(ze,null,[n["append-inner"]?.(...se),e.menuIcon?i(Da,{class:"v-autocomplete__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon,onMousedown:le,onClick:G8,"aria-label":a(oe.value),title:a(oe.value),tabindex:"-1"},null):void 0])}})}),Fs({isFocused:s,isPristine:o,menu:H,search:g,filteredItems:B,select:ie},r)}}),LYe=ot({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:vn,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...nn(),...Jc({location:"top end"}),...dr(),...$n(),...Aa(),...iu({transition:"scale-rotate-transition"}),...$r()},"VBadge"),MYe=St()({name:"VBadge",inheritAttrs:!1,props:LYe(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:a}=La(()=>e.color),{roundedClasses:r}=Tr(e),{t:s}=Ka(),{textColorClasses:o,textColorStyles:l}=$s(()=>e.textColor),{themeClasses:c}=TB(),{locationStyles:f}=om(e,!0,A=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(A)?Number(e.offsetY??0):["left","right"].includes(A)?Number(e.offsetX??0):0)),{dimensionStyles:d}=Qr(e);return It(()=>{const A=Number(e.content),m=!e.max||isNaN(A)?e.content:A<=Number(e.max)?A:`${e.max}+`,[p,h]=ES(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return i(e.tag,Ie({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},h,{style:e.style}),{default:()=>[v("div",{class:"v-badge__wrapper"},[t.slots.default?.(),i(So,{transition:e.transition},{default:()=>[Sa(v("span",Ie({class:["v-badge__badge",c.value,n.value,r.value,o.value],style:[a.value,l.value,d.value,e.inline?{}:f.value],"aria-atomic":"true","aria-label":s(e.label,A),"aria-live":"polite",role:"status"},p),[e.dot?void 0:t.slots.badge?t.slots.badge?.():e.icon?i(Da,{icon:e.icon},null):m]),[[fi,e.modelValue]])]})])]})}),{}}}),OYe=ot({color:String,density:String,...nn()},"VBannerActions"),l7=St()({name:"VBannerActions",props:OYe(),setup(e,t){let{slots:n}=t;return kr({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),It(()=>v("div",{class:lt(["v-banner-actions",e.class]),style:Mt(e.style)},[n.default?.()])),{}}}),u7=qc("v-banner-text"),HYe=ot({avatar:String,bgColor:String,color:String,icon:vn,lines:String,stacked:Boolean,sticky:Boolean,text:String,...Yo(),...nn(),...ps(),...$r(),...$A({mobile:null}),...rs(),...Jc(),...Fh(),...dr(),...$n(),...Aa()},"VBanner"),$Ye=St()({name:"VBanner",props:HYe(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=La(()=>e.bgColor),{borderClasses:s}=vi(e),{densityClasses:o}=Uo(e),{displayClasses:l,mobile:c}=Vi(e),{dimensionStyles:f}=Qr(e),{elevationClasses:d}=Is(e),{locationStyles:A}=om(e),{positionClasses:m}=Ph(e),{roundedClasses:p}=Tr(e),{themeClasses:h}=Ra(e),y=qe(()=>e.color),g=qe(()=>e.density);kr({VBannerActions:{color:y,density:g}}),It(()=>{const _=!!(e.text||n.text),b=!!(e.avatar||e.icon),S=!!(b||n.prepend);return i(e.tag,{class:lt(["v-banner",{"v-banner--stacked":e.stacked||c.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},h.value,a.value,s.value,o.value,l.value,d.value,m.value,p.value,e.class]),style:Mt([r.value,f.value,A.value,e.style]),role:"banner"},{default:()=>[S&&v("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?i(Gn,{key:"prepend-defaults",disabled:!b,defaults:{VAvatar:{color:y.value,density:g.value,icon:e.icon,image:e.avatar}}},n.prepend):i(cl,{key:"prepend-avatar",color:y.value,density:g.value,icon:e.icon,image:e.avatar},null)]),v("div",{class:"v-banner__content"},[_&&i(u7,{key:"text"},{default:()=>[n.text?.()??e.text]}),n.default?.()]),n.actions&&i(l7,{key:"actions"},n.actions)]})})}}),QYe=ot({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...Yo(),...nn(),...ps(),...rs(),...dr(),...QA({name:"bottom-navigation"}),...$n({tag:"header"}),...am({selectedClass:"v-btn--selected"}),...Aa()},"VBottomNavigation"),GYe=St()({name:"VBottomNavigation",props:QYe(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=TB(),{borderClasses:r}=vi(e),{backgroundColorClasses:s,backgroundColorStyles:o}=La(()=>e.bgColor),{densityClasses:l}=Uo(e),{elevationClasses:c}=Is(e),{roundedClasses:f}=Tr(e),{ssrBootStyles:d}=tm(),A=ee(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),m=fn(e,"active",e.active),{layoutItemStyles:p}=GA({id:e.name,order:ee(()=>parseInt(e.order,10)),position:qe(()=>"bottom"),layoutSize:qe(()=>m.value?A.value:0),elementSize:A,active:m,absolute:qe(()=>e.absolute)});return pf(e,A4),kr({VBtn:{baseColor:qe(()=>e.baseColor),color:qe(()=>e.color),density:qe(()=>e.density),stacked:qe(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),It(()=>i(e.tag,{class:lt(["v-bottom-navigation",{"v-bottom-navigation--active":m.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},a.value,s.value,r.value,l.value,c.value,f.value,e.class]),style:Mt([o.value,p.value,{height:Zt(A.value)},d.value,e.style])},{default:()=>[n.default&&v("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),c7=ot({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Zg({origin:"center center",scrollStrategy:"block",transition:{component:eb},zIndex:2400})},"VDialog"),fk=St()({name:"VDialog",props:c7(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=fn(e,"modelValue"),{scopeId:s}=im(),o=R();function l(d){const A=d.relatedTarget,m=d.target;if(A!==m&&o.value?.contentEl&&o.value?.globalTop&&![document,o.value.contentEl].includes(m)&&!o.value.contentEl.contains(m)){const p=P0(o.value.contentEl);if(!p.length)return;const h=p[0],y=p[p.length-1];A===h?y.focus():h.focus()}}ha(()=>{document.removeEventListener("focusin",l)}),Ua&&Ge(()=>r.value&&e.retainFocus,d=>{d?document.addEventListener("focusin",l):document.removeEventListener("focusin",l)},{immediate:!0});function c(){n("afterEnter"),(e.scrim||e.retainFocus)&&o.value?.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function f(){n("afterLeave")}return Ge(r,async d=>{d||(await Cn(),o.value.activatorEl?.focus({preventScroll:!0}))}),It(()=>{const d=Hu.filterProps(e),A=Ie({"aria-haspopup":"dialog"},e.activatorProps),m=Ie({tabindex:-1},e.contentProps);return i(Hu,Ie({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},d,{modelValue:r.value,"onUpdate:modelValue":p=>r.value=p,"aria-modal":"true",activatorProps:A,contentProps:m,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:c,onAfterLeave:f},s),{activator:a.activator,default:function(){for(var p=arguments.length,h=new Array(p),y=0;y<p;y++)h[y]=arguments[y];return i(Gn,{root:"VDialog"},{default:()=>[a.default?.(...h)]})}})}),Fs({},o)}}),zYe=ot({inset:Boolean,...c7({transition:"bottom-sheet-transition"})},"VBottomSheet"),WYe=St()({name:"VBottomSheet",props:zYe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"modelValue");return It(()=>{const r=fk.filterProps(e);return i(fk,Ie(r,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),n)}),{}}}),KYe=ot({divider:[Number,String],...nn()},"VBreadcrumbsDivider"),d7=St()({name:"VBreadcrumbsDivider",props:KYe(),setup(e,t){let{slots:n}=t;return It(()=>v("li",{"aria-hidden":"true",class:lt(["v-breadcrumbs-divider",e.class]),style:Mt(e.style)},[n?.default?.()??e.divider])),{}}}),jYe=ot({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...nn(),...Yg(),...$n({tag:"li"})},"VBreadcrumbsItem"),f7=St()({name:"VBreadcrumbsItem",props:jYe(),setup(e,t){let{slots:n,attrs:a}=t;const r=qg(e,a),s=ee(()=>e.active||r.isActive?.value),{textColorClasses:o,textColorStyles:l}=$s(()=>s.value?e.activeColor:e.color);return It(()=>i(e.tag,{class:lt(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":s.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:s.value&&e.activeClass},o.value,e.class]),style:Mt([l.value,e.style]),"aria-current":s.value?"page":void 0},{default:()=>[r.isLink.value?v("a",Ie({class:"v-breadcrumbs-item--link",onClick:r.navigate},r.linkProps),[n.default?.()??e.title]):n.default?.()??e.title]})),{}}}),qYe=ot({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:vn,items:{type:Array,default:()=>[]},...nn(),...ps(),...dr(),...$n({tag:"ul"})},"VBreadcrumbs"),YYe=St()({name:"VBreadcrumbs",props:qYe(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=La(()=>e.bgColor),{densityClasses:s}=Uo(e),{roundedClasses:o}=Tr(e);kr({VBreadcrumbsDivider:{divider:qe(()=>e.divider)},VBreadcrumbsItem:{activeClass:qe(()=>e.activeClass),activeColor:qe(()=>e.activeColor),color:qe(()=>e.color),disabled:qe(()=>e.disabled)}});const l=ee(()=>e.items.map(c=>typeof c=="string"?{item:{title:c},raw:c}:{item:c,raw:c}));return It(()=>{const c=!!(n.prepend||e.icon);return i(e.tag,{class:lt(["v-breadcrumbs",a.value,s.value,o.value,e.class]),style:Mt([r.value,e.style])},{default:()=>[c&&v("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?i(Gn,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},n.prepend):i(Da,{key:"prepend-icon",start:!0,icon:e.icon},null)]),l.value.map((f,d,A)=>{let{item:m,raw:p}=f;return v(ze,null,[n.item?.({item:m,index:d})??i(f7,Ie({key:d,disabled:d>=A.length-1},typeof m=="string"?{title:m}:m),{default:n.title?()=>n.title?.({item:m,index:d}):void 0}),d<A.length-1&&i(d7,null,{default:n.divider?()=>n.divider?.({item:p,index:d}):void 0})])}),n.default?.()]})}),{}}}),A7=St()({name:"VCardActions",props:nn(),setup(e,t){let{slots:n}=t;return kr({VBtn:{slim:!0,variant:"text"}}),It(()=>v("div",{class:lt(["v-card-actions",e.class]),style:Mt(e.style)},[n.default?.()])),{}}}),XYe=ot({opacity:[Number,String],...nn(),...$n()},"VCardSubtitle"),m7=St()({name:"VCardSubtitle",props:XYe(),setup(e,t){let{slots:n}=t;return It(()=>i(e.tag,{class:lt(["v-card-subtitle",e.class]),style:Mt([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),v7=qc("v-card-title"),JYe=ot({appendAvatar:String,appendIcon:vn,prependAvatar:String,prependIcon:vn,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...nn(),...ps()},"VCardItem"),h7=St()({name:"VCardItem",props:JYe(),setup(e,t){let{slots:n}=t;return It(()=>{const a=!!(e.prependAvatar||e.prependIcon),r=!!(a||n.prepend),s=!!(e.appendAvatar||e.appendIcon),o=!!(s||n.append),l=!!(e.title!=null||n.title),c=!!(e.subtitle!=null||n.subtitle);return v("div",{class:lt(["v-card-item",e.class]),style:Mt(e.style)},[r&&v("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?i(Gn,{key:"prepend-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):v(ze,null,[e.prependAvatar&&i(cl,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&i(Da,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),v("div",{class:"v-card-item__content"},[l&&i(v7,{key:"title"},{default:()=>[n.title?.()??K(e.title)]}),c&&i(m7,{key:"subtitle"},{default:()=>[n.subtitle?.()??K(e.subtitle)]}),n.default?.()]),o&&v("div",{key:"append",class:"v-card-item__append"},[n.append?i(Gn,{key:"append-defaults",disabled:!s,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):v(ze,null,[e.appendIcon&&i(Da,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&i(cl,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),ZYe=ot({opacity:[Number,String],...nn(),...$n()},"VCardText"),p7=St()({name:"VCardText",props:ZYe(),setup(e,t){let{slots:n}=t;return It(()=>i(e.tag,{class:lt(["v-card-text",e.class]),style:Mt([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),eXe=ot({appendAvatar:String,appendIcon:vn,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:vn,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Yo(),...nn(),...ps(),...$r(),...rs(),...ab(),...Jc(),...Fh(),...dr(),...Yg(),...$n(),...Aa(),...hl({variant:"elevated"})},"VCard"),tXe=St()({name:"VCard",directives:{vRipple:Po},props:eXe(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=Ra(e),{borderClasses:s}=vi(e),{colorClasses:o,colorStyles:l,variantClasses:c}=nm(e),{densityClasses:f}=Uo(e),{dimensionStyles:d}=Qr(e),{elevationClasses:A}=Is(e),{loaderClasses:m}=Kg(e),{locationStyles:p}=om(e),{positionClasses:h}=Ph(e),{roundedClasses:y}=Tr(e),g=qg(e,n);return It(()=>{const _=e.link!==!1&&g.isLink.value,b=!e.disabled&&e.link!==!1&&(e.link||g.isClickable.value),S=_?"a":e.tag,B=!!(a.title||e.title!=null),F=!!(a.subtitle||e.subtitle!=null),T=B||F,E=!!(a.append||e.appendAvatar||e.appendIcon),x=!!(a.prepend||e.prependAvatar||e.prependIcon),C=!!(a.image||e.image),D=T||x||E,U=!!(a.text||e.text!=null);return Sa(i(S,Ie({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":b},r.value,s.value,o.value,f.value,A.value,m.value,h.value,y.value,c.value,e.class],style:[l.value,d.value,p.value,e.style],onClick:b&&g.navigate,tabindex:e.disabled?-1:void 0},g.linkProps),{default:()=>[C&&v("div",{key:"image",class:"v-card__image"},[a.image?i(Gn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):i(zc,{key:"image-img",cover:!0,src:e.image},null)]),i(jg,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:a.loader}),D&&i(h7,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:a.item,prepend:a.prepend,title:a.title,subtitle:a.subtitle,append:a.append}),U&&i(p7,{key:"text"},{default:()=>[a.text?.()??e.text]}),a.default?.(),a.actions&&i(A7,null,{default:a.actions}),hf(b,"v-card")]}),[[Po,b&&e.ripple]])}),{}}}),nXe=e=>{const{touchstartX:t,touchendX:n,touchstartY:a,touchendY:r}=e,s=.5,o=16;e.offsetX=n-t,e.offsetY=r-a,Math.abs(e.offsetY)<s*Math.abs(e.offsetX)&&(e.left&&n<t-o&&e.left(e),e.right&&n>t+o&&e.right(e)),Math.abs(e.offsetX)<s*Math.abs(e.offsetY)&&(e.up&&r<a-o&&e.up(e),e.down&&r>a+o&&e.down(e))};function aXe(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function rXe(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),nXe(t)}function sXe(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function oXe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>aXe(n,t),touchend:n=>rXe(n,t),touchmove:n=>sXe(n,t)}}function iXe(e,t){const n=t.value,a=n?.parent?e.parentElement:e,r=n?.options??{passive:!0},s=t.instance?.$.uid;if(!a||s===void 0)return;const o=oXe(t.value);a._touchHandlers=a._touchHandlers??Object.create(null),a._touchHandlers[s]=o,V8(o).forEach(l=>{a.addEventListener(l,o[l],r)})}function lXe(e,t){const n=t.value?.parent?e.parentElement:e,a=t.instance?.$.uid;if(!n?._touchHandlers||a===void 0)return;const r=n._touchHandlers[a];V8(r).forEach(s=>{n.removeEventListener(s,r[s])}),delete n._touchHandlers[a]}const N2={mounted:iXe,unmounted:lXe},g7=Symbol.for("vuetify:v-window"),y7=Symbol.for("vuetify:v-window-group"),lb=ot({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...nn(),...$n(),...Aa()},"VWindow"),TA=St()({name:"VWindow",directives:{vTouch:N2},props:lb(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ra(e),{isRtl:r}=as(),{t:s}=Ka(),o=pf(e,y7),l=R(),c=ee(()=>r.value?!e.reverse:e.reverse),f=Gt(!1),d=ee(()=>{const B=e.direction==="vertical"?"y":"x",T=(c.value?!f.value:f.value)?"-reverse":"";return`v-window-${B}${T}-transition`}),A=Gt(0),m=R(void 0),p=ee(()=>o.items.value.findIndex(B=>o.selected.value.includes(B.id)));Ge(p,(B,F)=>{const T=o.items.value.length,E=T-1;T<=2?f.value=B<F:B===E&&F===0?f.value=!0:B===0&&F===E?f.value=!1:f.value=B<F}),za(g7,{transition:d,isReversed:f,transitionCount:A,transitionHeight:m,rootRef:l});const h=qe(()=>e.continuous||p.value!==0),y=qe(()=>e.continuous||p.value!==o.items.value.length-1);function g(){h.value&&o.prev()}function _(){y.value&&o.next()}const b=ee(()=>{const B=[],F={icon:r.value?e.nextIcon:e.prevIcon,class:`v-window__${c.value?"right":"left"}`,onClick:o.prev,"aria-label":s("$vuetify.carousel.prev")};B.push(h.value?n.prev?n.prev({props:F}):i(ta,F,null):v("div",null,null));const T={icon:r.value?e.prevIcon:e.nextIcon,class:`v-window__${c.value?"left":"right"}`,onClick:o.next,"aria-label":s("$vuetify.carousel.next")};return B.push(y.value?n.next?n.next({props:T}):i(ta,T,null):v("div",null,null)),B}),S=ee(()=>e.touch===!1?e.touch:{...{left:()=>{c.value?g():_()},right:()=>{c.value?_():g()},start:F=>{let{originalEvent:T}=F;T.stopPropagation()}},...e.touch===!0?{}:e.touch});return It(()=>Sa(i(e.tag,{ref:l,class:lt(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows},a.value,e.class]),style:Mt(e.style)},{default:()=>[v("div",{class:"v-window__container",style:{height:m.value}},[n.default?.({group:o}),e.showArrows!==!1&&v("div",{class:lt(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[b.value])]),n.additional?.({group:o})]}),[[N2,S.value]])),{group:o}}}),uXe=ot({color:String,cycle:Boolean,delimiterIcon:{type:vn,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...lb({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),cXe=St()({name:"VCarousel",props:uXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"modelValue"),{t:r}=Ka(),s=R();let o=-1;Ge(a,c),Ge(()=>e.interval,c),Ge(()=>e.cycle,f=>{f?c():window.clearTimeout(o)}),An(l);function l(){!e.cycle||!s.value||(o=window.setTimeout(s.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function c(){window.clearTimeout(o),window.requestAnimationFrame(l)}return It(()=>{const f=TA.filterProps(e);return i(TA,Ie({ref:s},f,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:Zt(e.height)},e.style]}),{default:n.default,additional:d=>{let{group:A}=d;return v(ze,null,[!e.hideDelimiters&&v("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[A.items.value.length>0&&i(Gn,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[A.items.value.map((m,p)=>{const h={id:`carousel-item-${m.id}`,"aria-label":r("$vuetify.carousel.ariaLabel.delimiter",p+1,A.items.value.length),class:["v-carousel__controls__item",A.isSelected(m.id)&&"v-btn--active"],onClick:()=>A.select(m.id,!0)};return n.item?n.item({props:h,item:m}):i(ta,Ie(m,h),null)})]})]),e.progress&&i(nb,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(A.getItemIndex(a.value)+1)/A.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}}),ub=ot({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...nn(),...rm(),...b4()},"VWindowItem"),IA=St()({name:"VWindowItem",directives:{vTouch:N2},props:ub(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=Pn(g7),r=sm(e,y7),{isBooted:s}=tm();if(!a||!r)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const o=Gt(!1),l=ee(()=>s.value&&(a.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function c(){!o.value||!a||(o.value=!1,a.transitionCount.value>0&&(a.transitionCount.value-=1,a.transitionCount.value===0&&(a.transitionHeight.value=void 0)))}function f(){o.value||!a||(o.value=!0,a.transitionCount.value===0&&(a.transitionHeight.value=Zt(a.rootRef.value?.clientHeight)),a.transitionCount.value+=1)}function d(){c()}function A(h){o.value&&Cn(()=>{!l.value||!o.value||!a||(a.transitionHeight.value=Zt(h.clientHeight))})}const m=ee(()=>{const h=a.isReversed.value?e.reverseTransition:e.transition;return l.value?{name:typeof h!="string"?a.transition.value:h,onBeforeEnter:f,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onAfterLeave:c,onLeaveCancelled:d,onEnter:A}:!1}),{hasContent:p}=x4(e,r.isSelected);return It(()=>i(So,{transition:m.value,disabled:!s.value},{default:()=>[Sa(v("div",{class:lt(["v-window-item",r.selectedClass.value,e.class]),style:Mt(e.style)},[p.value&&n.default?.()]),[[fi,r.isSelected.value]])]})),{groupItem:r}}}),dXe=ot({...sQ(),...ub()},"VCarouselItem"),fXe=St()({name:"VCarouselItem",inheritAttrs:!1,props:dXe(),setup(e,t){let{slots:n,attrs:a}=t;It(()=>{const r=zc.filterProps(e),s=IA.filterProps(e);return i(IA,Ie({class:["v-carousel-item",e.class]},s),{default:()=>[i(zc,Ie(a,r),n)]})})}}),AXe=qc("v-code","code"),mXe=ot({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...nn()},"VColorPickerCanvas"),vXe=Ni({name:"VColorPickerCanvas",props:mXe(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:n}=t;const a=Gt(!1),r=R(),s=Gt(parseFloat(e.width)),o=Gt(parseFloat(e.height)),l=R({x:0,y:0}),c=ee({get:()=>l.value,set(g){if(!r.value)return;const{x:_,y:b}=g;l.value=g,n("update:color",{h:e.color?.h??0,s:ar(_,0,s.value)/s.value,v:1-ar(b,0,o.value)/o.value,a:e.color?.a??1})}}),f=ee(()=>{const{x:g,y:_}=c.value,b=parseInt(e.dotSize,10)/2;return{width:Zt(e.dotSize),height:Zt(e.dotSize),transform:`translate(${Zt(g-b)}, ${Zt(_-b)})`}}),{resizeRef:d}=Kl(g=>{if(!d.el?.offsetParent)return;const{width:_,height:b}=g[0].contentRect;s.value=_,o.value=b});function A(g,_,b){const{left:S,top:B,width:F,height:T}=b;c.value={x:ar(g-S,0,F),y:ar(_-B,0,T)}}function m(g){g.type==="mousedown"&&g.preventDefault(),!e.disabled&&(p(g),window.addEventListener("mousemove",p),window.addEventListener("mouseup",h),window.addEventListener("touchmove",p),window.addEventListener("touchend",h))}function p(g){if(e.disabled||!r.value)return;a.value=!0;const _=dte(g);A(_.clientX,_.clientY,r.value.getBoundingClientRect())}function h(){window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",h),window.removeEventListener("touchmove",p),window.removeEventListener("touchend",h)}function y(){if(!r.value)return;const g=r.value,_=g.getContext("2d");if(!_)return;const b=_.createLinearGradient(0,0,g.width,0);b.addColorStop(0,"hsla(0, 0%, 100%, 1)"),b.addColorStop(1,`hsla(${e.color?.h??0}, 100%, 50%, 1)`),_.fillStyle=b,_.fillRect(0,0,g.width,g.height);const S=_.createLinearGradient(0,0,0,g.height);S.addColorStop(0,"hsla(0, 0%, 0%, 0)"),S.addColorStop(1,"hsla(0, 0%, 0%, 1)"),_.fillStyle=S,_.fillRect(0,0,g.width,g.height)}return Ge(()=>e.color?.h,y,{immediate:!0}),Ge(()=>[s.value,o.value],(g,_)=>{y(),l.value={x:c.value.x*g[0]/_[0],y:c.value.y*g[1]/_[1]}},{flush:"post"}),Ge(()=>e.color,()=>{if(a.value){a.value=!1;return}l.value=e.color?{x:e.color.s*s.value,y:(1-e.color.v)*o.value}:{x:0,y:0}},{deep:!0,immediate:!0}),An(()=>y()),It(()=>v("div",{ref:d,class:lt(["v-color-picker-canvas",e.class]),style:Mt(e.style),onMousedown:m,onTouchstartPassive:m},[v("canvas",{ref:r,width:s.value,height:o.value},null),e.color&&v("div",{class:lt(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:Mt(f.value)},null)])),{}}});function hXe(e,t){if(t){const{a:n,...a}=e;return a}return e}function pXe(e,t){if(t==null||typeof t=="string"){const n=e.a!==1;if(t?.startsWith("rgb(")){const{r,g:s,b:o,a:l}=Nu(e);return`rgb(${r} ${s} ${o}`+(n?` / ${l})`:")")}else if(t?.startsWith("hsl(")){const{h:r,s,l:o,a:l}=FS(e);return`hsl(${r} ${Math.round(s*100)} ${Math.round(o*100)}`+(n?` / ${l})`:")")}const a=t5(e);return e.a===1?a.slice(0,7):a}if(typeof t=="object"){let n;return Kf(t,["r","g","b"])?n=Nu(e):Kf(t,["h","s","l"])?n=FS(e):Kf(t,["h","s","v"])&&(n=e),hXe(n,!Kf(t,["a"])&&e.a===1)}return e}const uv={h:0,s:0,v:0,a:1},Ak={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)}),localeKey:"redInput"},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)}),localeKey:"greenInput"},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)}),localeKey:"blueInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:Nu,from:wg},gXe={...Ak,inputs:Ak.inputs?.slice(0,3)},mk={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)}),localeKey:"hueInput"},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,t)=>({...e,s:Number(t)}),localeKey:"saturationInput"},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,t)=>({...e,l:Number(t)}),localeKey:"lightnessInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:FS,from:wB},yXe={...mk,inputs:mk.inputs.slice(0,3)},_7={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t,localeKey:"hexaInput"}],to:t5,from:Nte},_Xe={..._7,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t,localeKey:"hexInput"}]},fA={rgb:gXe,rgba:Ak,hsl:yXe,hsla:mk,hex:_Xe,hexa:_7},wXe=e=>{let{label:t,...n}=e;return v("div",{class:"v-color-picker-edit__input"},[v("input",fl(Al(n)),null),v("span",null,[t])])},bXe=ot({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(fA).includes(e)},modes:{type:Array,default:()=>Object.keys(fA),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(fA).includes(t))},...nn()},"VColorPickerEdit"),xXe=Ni({name:"VColorPickerEdit",props:bXe(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Ka(),r=ee(()=>e.modes.map(o=>({...fA[o],name:o}))),s=ee(()=>{const o=r.value.find(c=>c.name===e.mode);if(!o)return[];const l=e.color?o.to(e.color):null;return o.inputs?.map(c=>{let{getValue:f,getColor:d,localeKey:A,...m}=c;return{...o.inputProps,...m,ariaLabel:a(`$vuetify.colorPicker.ariaLabel.${A}`),disabled:e.disabled,value:l&&f(l),onChange:p=>{const h=p.target;h&&n("update:color",o.from(d(l??o.to(uv),h.value)))}}})});return It(()=>v("div",{class:lt(["v-color-picker-edit",e.class]),style:Mt(e.style)},[s.value?.map(o=>i(wXe,o,null)),r.value.length>1&&i(ta,{icon:"$unfold",size:"x-small",variant:"plain","aria-label":a("$vuetify.colorPicker.ariaLabel.changeFormat"),onClick:()=>{const o=r.value.findIndex(l=>l.name===e.mode);n("update:mode",r.value[(o+1)%r.value.length].name)}},null)])),{}}}),k4=Symbol.for("vuetify:v-slider");function vk(e,t,n){const a=n==="vertical",r=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return a?s.clientY-(r.top+r.height/2):s.clientX-(r.left+r.width/2)}function CXe(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const w7=ot({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...dr(),...rs({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),b7=e=>{const t=ee(()=>parseFloat(e.min)),n=ee(()=>parseFloat(e.max)),a=ee(()=>Number(e.step)>0?parseFloat(e.step):0),r=ee(()=>Math.max(XP(a.value),XP(t.value)));function s(o){if(o=parseFloat(o),a.value<=0)return o;const l=ar(o,t.value,n.value),c=t.value%a.value;let f=Math.round((l-c)/a.value)*a.value+c;return l>f&&f+a.value>n.value&&(f=n.value),parseFloat(Math.min(f,n.value).toFixed(r.value))}return{min:t,max:n,step:a,decimals:r,roundValue:s}},x7=e=>{let{props:t,steps:n,onSliderStart:a,onSliderMove:r,onSliderEnd:s,getActiveThumb:o}=e;const{isRtl:l}=as(),c=qe(()=>t.reverse),f=ee(()=>t.direction==="vertical"),d=ee(()=>f.value!==c.value),{min:A,max:m,step:p,decimals:h,roundValue:y}=n,g=ee(()=>parseInt(t.thumbSize,10)),_=ee(()=>parseInt(t.tickSize,10)),b=ee(()=>parseInt(t.trackSize,10)),S=ee(()=>(m.value-A.value)/p.value),B=qe(()=>t.disabled),F=ee(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),T=ee(()=>t.error||t.disabled?void 0:t.thumbColor),E=ee(()=>t.error||t.disabled?void 0:t.trackColor??t.color),x=ee(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),C=Gt(!1),D=Gt(0),U=R(),L=R();function H(j){const J=U.value?.$el;if(!J)return;const ie=t.direction==="vertical",X=ie?"top":"left",fe=ie?"height":"width",M=ie?"clientY":"clientX",{[X]:z,[fe]:se}=J.getBoundingClientRect(),be=CXe(j,M);let Fe=ar((be-z-D.value)/se)||0;return(ie?d.value:d.value!==l.value)&&(Fe=1-Fe),y(A.value+Fe*(m.value-A.value))}const oe=j=>{const J=H(j);J!=null&&s({value:J}),C.value=!1,D.value=0},de=j=>{const J=H(j);L.value=o(j),L.value&&(C.value=!0,L.value.contains(j.target)?D.value=vk(j,L.value,t.direction):(D.value=0,J!=null&&r({value:J})),J!=null&&a({value:J}),Cn(()=>L.value?.focus()))},te={passive:!0,capture:!0};function q(j){const J=H(j);J!=null&&r({value:J})}function ce(j){j.stopPropagation(),j.preventDefault(),oe(j),window.removeEventListener("mousemove",q,te),window.removeEventListener("mouseup",ce)}function le(j){oe(j),window.removeEventListener("touchmove",q,te),j.target?.removeEventListener("touchend",le)}function Z(j){de(j),window.addEventListener("touchmove",q,te),j.target?.addEventListener("touchend",le,{passive:!1})}function ne(j){j.button===0&&(j.preventDefault(),de(j),window.addEventListener("mousemove",q,te),window.addEventListener("mouseup",ce,{passive:!1}))}const G=j=>{const J=(j-A.value)/(m.value-A.value)*100;return ar(isNaN(J)?0:J,0,100)},W=qe(()=>t.showTicks),Q=ee(()=>W.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(j=>({value:j,position:G(j),label:j.toString()})):Object.keys(t.ticks).map(j=>({value:parseFloat(j),position:G(parseFloat(j)),label:t.ticks[j]})):S.value!==1/0?Bi(S.value+1).map(j=>{const J=A.value+j*p.value;return{value:J,position:G(J)}}):[]:[]),O=ee(()=>Q.value.some(j=>{let{label:J}=j;return!!J})),ae={activeThumbRef:L,color:qe(()=>t.color),decimals:h,disabled:B,direction:qe(()=>t.direction),elevation:qe(()=>t.elevation),hasLabels:O,isReversed:c,indexFromEnd:d,min:A,max:m,mousePressed:C,noKeyboard:qe(()=>t.noKeyboard),numTicks:S,onSliderMousedown:ne,onSliderTouchstart:Z,parsedTicks:Q,parseMouseMove:H,position:G,readonly:qe(()=>t.readonly),rounded:qe(()=>t.rounded),roundValue:y,showTicks:W,startOffset:D,step:p,thumbSize:g,thumbColor:F,thumbLabelColor:T,thumbLabel:qe(()=>t.thumbLabel),ticks:qe(()=>t.ticks),tickSize:_,trackColor:E,trackContainerRef:U,trackFillColor:x,trackSize:b,vertical:f};return za(k4,ae),ae},SXe=ot({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...nn()},"VSliderThumb"),hk=St()({name:"VSliderThumb",directives:{vRipple:Po},props:SXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=Pn(k4),{isRtl:s,rtlClasses:o}=as();if(!r)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:l,max:c,thumbColor:f,thumbLabelColor:d,step:A,disabled:m,thumbSize:p,thumbLabel:h,direction:y,isReversed:g,vertical:_,readonly:b,elevation:S,mousePressed:B,decimals:F,indexFromEnd:T}=r,E=ee(()=>m.value?void 0:S.value),{elevationClasses:x}=Is(E),{textColorClasses:C,textColorStyles:D}=$s(f),{backgroundColorClasses:U,backgroundColorStyles:L}=La(d),{pageup:H,pagedown:oe,end:de,home:te,left:q,right:ce,down:le,up:Z}=SS,ne=[H,oe,de,te,q,ce,le,Z],G=ee(()=>A.value?[1,2,3]:[1,5,10]);function W(O,ae){if(e.noKeyboard||!ne.includes(O.key))return;O.preventDefault();const j=A.value||.1,J=(c.value-l.value)/j;if([q,ce,le,Z].includes(O.key)){const X=(_.value?[s.value?q:ce,g.value?le:Z]:T.value!==s.value?[q,Z]:[ce,Z]).includes(O.key)?1:-1,fe=O.shiftKey?2:O.ctrlKey?1:0;X===-1&&ae===c.value&&!fe&&!Number.isInteger(J)?ae=ae-J%1*j:ae=ae+X*j*G.value[fe]}else if(O.key===te)ae=l.value;else if(O.key===de)ae=c.value;else{const ie=O.key===oe?1:-1;ae=ae-ie*j*(J>100?J/10:10)}return Math.max(e.min,Math.min(e.max,ae))}function Q(O){const ae=W(O,e.modelValue);ae!=null&&a("update:modelValue",ae)}return It(()=>{const O=Zt(T.value?100-e.position:e.position,"%");return v("div",{class:lt(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&B.value},e.class,o.value]),style:Mt([{"--v-slider-thumb-position":O,"--v-slider-thumb-size":Zt(p.value)},e.style]),role:"slider",tabindex:m.value?-1:0,"aria-label":e.name,"aria-valuemin":l.value,"aria-valuemax":c.value,"aria-valuenow":e.modelValue,"aria-readonly":!!b.value,"aria-orientation":y.value,onKeydown:b.value?void 0:Q},[v("div",{class:lt(["v-slider-thumb__surface",C.value,x.value]),style:Mt(D.value)},null),Sa(v("div",{class:lt(["v-slider-thumb__ripple",C.value]),style:Mt(D.value)},null),[[Po,e.ripple,null,{circle:!0,center:!0}]]),i(u4,{origin:"bottom center"},{default:()=>[Sa(v("div",{class:"v-slider-thumb__label-container"},[v("div",{class:lt(["v-slider-thumb__label",U.value]),style:Mt(L.value)},[v("div",null,[n["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(A.value?F.value:1)]),v("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[fi,h.value&&e.focused||h.value==="always"]])]})])}),{}}}),EXe=ot({start:{type:Number,required:!0},stop:{type:Number,required:!0},...nn()},"VSliderTrack"),C7=St()({name:"VSliderTrack",props:EXe(),emits:{},setup(e,t){let{slots:n}=t;const a=Pn(k4);if(!a)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:r,parsedTicks:s,rounded:o,showTicks:l,tickSize:c,trackColor:f,trackFillColor:d,trackSize:A,vertical:m,min:p,max:h,indexFromEnd:y}=a,{roundedClasses:g}=Tr(o),{backgroundColorClasses:_,backgroundColorStyles:b}=La(d),{backgroundColorClasses:S,backgroundColorStyles:B}=La(f),F=ee(()=>`inset-${m.value?"block":"inline"}-${y.value?"end":"start"}`),T=ee(()=>m.value?"height":"width"),E=ee(()=>({[F.value]:"0%",[T.value]:"100%"})),x=ee(()=>e.stop-e.start),C=ee(()=>({[F.value]:Zt(e.start,"%"),[T.value]:Zt(x.value,"%")})),D=ee(()=>l.value?(m.value?s.value.slice().reverse():s.value).map((L,H)=>{const oe=L.value!==p.value&&L.value!==h.value?Zt(L.position,"%"):void 0;return v("div",{key:L.value,class:lt(["v-slider-track__tick",{"v-slider-track__tick--filled":L.position>=e.start&&L.position<=e.stop,"v-slider-track__tick--first":L.value===p.value,"v-slider-track__tick--last":L.value===h.value}]),style:{[F.value]:oe}},[(L.label||n["tick-label"])&&v("div",{class:"v-slider-track__tick-label"},[n["tick-label"]?.({tick:L,index:H})??L.label])])}):[]);return It(()=>v("div",{class:lt(["v-slider-track",g.value,e.class]),style:Mt([{"--v-slider-track-size":Zt(A.value),"--v-slider-tick-size":Zt(c.value)},e.style])},[v("div",{class:lt(["v-slider-track__background",S.value,{"v-slider-track__background--opacity":!!r.value||!d.value}]),style:{...E.value,...B.value}},null),v("div",{class:lt(["v-slider-track__fill",_.value]),style:{...C.value,...b.value}},null),l.value&&v("div",{class:lt(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":l.value==="always"}])},[D.value])])),{}}}),kXe=ot({...Xg(),...w7(),...ed(),modelValue:{type:[Number,String],default:0}},"VSlider"),pk=St()({name:"VSlider",props:kXe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=R(),s=R(),{rtlClasses:o}=as(),l=b7(e),c=fn(e,"modelValue",void 0,x=>l.roundValue(x??l.min.value)),{min:f,max:d,mousePressed:A,roundValue:m,onSliderMousedown:p,onSliderTouchstart:h,trackContainerRef:y,position:g,hasLabels:_,readonly:b,noKeyboard:S}=x7({props:e,steps:l,onSliderStart:()=>{a("start",c.value)},onSliderEnd:x=>{let{value:C}=x;const D=m(C);c.value=D,a("end",D)},onSliderMove:x=>{let{value:C}=x;return c.value=m(C)},getActiveThumb:()=>r.value?.$el}),{isFocused:B,focus:F,blur:T}=Zc(e),E=ee(()=>g(c.value));return It(()=>{const x=so.filterProps(e),C=!!(e.label||n.label||n.prepend);return i(so,Ie({ref:s,class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||_.value,"v-slider--focused":B.value,"v-slider--pressed":A.value,"v-slider--disabled":e.disabled},o.value,e.class],style:e.style},x,{focused:B.value}),{...n,prepend:C?D=>v(ze,null,[n.label?.(D)??(e.label?i(Dh,{id:D.id.value,class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(D)]):void 0,default:D=>{let{id:U,messagesId:L}=D;return v("div",{class:"v-slider__container",onMousedown:b.value?void 0:p,onTouchstartPassive:b.value?void 0:h},[v("input",{id:U.value,name:e.name||U.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:c.value},null),i(C7,{ref:y,start:0,stop:E.value},{"tick-label":n["tick-label"]}),i(hk,{ref:r,"aria-describedby":L.value,focused:B.value,noKeyboard:S.value,min:f.value,max:d.value,modelValue:c.value,"onUpdate:modelValue":H=>c.value=H,position:E.value,elevation:e.elevation,onFocus:F,onBlur:T,ripple:e.ripple,name:e.name},{"thumb-label":n["thumb-label"]})])}})}),Fs({focus:()=>r.value?.$el.focus()},s)}}),BXe=ot({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...nn()},"VColorPickerPreview"),TXe=Ni({name:"VColorPickerPreview",props:BXe(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Ka(),r=new AbortController;Ri(()=>r.abort());async function s(){if(!KP||e.disabled)return;const o=new window.EyeDropper;try{const l=await o.open({signal:r.signal}),c=wg(Ti(l.sRGBHex));n("update:color",{...e.color??uv,...c})}catch{}}return It(()=>v("div",{class:lt(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:Mt(e.style)},[KP&&v("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[i(ta,{"aria-label":a("$vuetify.colorPicker.ariaLabel.eyedropper"),density:"comfortable",disabled:e.disabled,icon:"$eyeDropper",variant:"plain",onClick:s},null)]),v("div",{class:"v-color-picker-preview__dot"},[v("div",{style:{background:J8(e.color??uv)}},null)]),v("div",{class:"v-color-picker-preview__sliders"},[i(pk,{class:"v-color-picker-preview__track v-color-picker-preview__hue",name:a("$vuetify.colorPicker.ariaLabel.hueSlider"),modelValue:e.color?.h,"onUpdate:modelValue":o=>n("update:color",{...e.color??uv,h:o}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&i(pk,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",name:a("$vuetify.colorPicker.ariaLabel.alphaSlider"),modelValue:e.color?.a??1,"onUpdate:modelValue":o=>n("update:color",{...e.color??uv,a:o}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])),{}}}),IXe={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},FXe={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},PXe={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},DXe={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},UXe={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},RXe={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},NXe={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},VXe={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},LXe={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},MXe={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},OXe={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},HXe={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},$Xe={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},QXe={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},GXe={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},zXe={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},WXe={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},KXe={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},jXe={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},qXe={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},YXe={red:IXe,pink:FXe,purple:PXe,deepPurple:DXe,indigo:UXe,blue:RXe,lightBlue:NXe,cyan:VXe,teal:LXe,green:MXe,lightGreen:OXe,lime:HXe,yellow:$Xe,amber:QXe,orange:GXe,deepOrange:zXe,brown:WXe,blueGrey:KXe,grey:jXe,shades:qXe},XXe=ot({swatches:{type:Array,default:()=>JXe(YXe)},disabled:Boolean,color:Object,maxHeight:[Number,String],...nn()},"VColorPickerSwatches");function JXe(e){return Object.keys(e).map(t=>{const n=e[t];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const ZXe=Ni({name:"VColorPickerSwatches",props:XXe(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;return It(()=>v("div",{class:lt(["v-color-picker-swatches",e.class]),style:Mt([{maxHeight:Zt(e.maxHeight)},e.style])},[v("div",null,[e.swatches.map(a=>v("div",{class:"v-color-picker-swatches__swatch"},[a.map(r=>{const s=Ti(r),o=wg(s),l=X8(s);return v("div",{class:"v-color-picker-swatches__color",onClick:()=>o&&n("update:color",o)},[v("div",{style:{background:l}},[e.color&&ks(e.color,o)?i(Da,{size:"x-small",icon:"$success",color:Ote(r,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),eJe=qc("v-picker-title"),B4=ot({color:String,...Yo(),...nn(),...$r(),...rs(),...Jc(),...Fh(),...dr(),...$n(),...Aa()},"VSheet"),fg=St()({name:"VSheet",props:B4(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ra(e),{backgroundColorClasses:r,backgroundColorStyles:s}=La(()=>e.color),{borderClasses:o}=vi(e),{dimensionStyles:l}=Qr(e),{elevationClasses:c}=Is(e),{locationStyles:f}=om(e),{positionClasses:d}=Ph(e),{roundedClasses:A}=Tr(e);return It(()=>i(e.tag,{class:lt(["v-sheet",a.value,r.value,o.value,c.value,d.value,A.value,e.class]),style:Mt([s.value,l.value,f.value,e.style])},n)),{}}}),cb=ot({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,...B4()},"VPicker"),rh=St()({name:"VPicker",props:cb(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=La(()=>e.color);return It(()=>{const s=fg.filterProps(e),o=!!(e.title||n.title);return i(fg,Ie(s,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&v("div",{key:"header",class:lt([a.value]),style:Mt([r.value])},[o&&i(eJe,{key:"picker-title"},{default:()=>[n.title?.()??e.title]}),n.header&&v("div",{class:"v-picker__header"},[n.header()])]),v("div",{class:"v-picker__body"},[n.default?.()]),n.actions&&i(Gn,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[v("div",{class:"v-picker__actions"},[n.actions()])]})]})}),{}}}),tJe=ot({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(fA).includes(e)},modes:{type:Array,default:()=>Object.keys(fA),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(fA).includes(t))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...cb({hideHeader:!0})},"VColorPicker"),nJe=Ni({name:"VColorPicker",props:tJe(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"mode"),r=R(null),s=fn(e,"modelValue",void 0,d=>{if(d==null||d==="")return null;let A;try{A=wg(Ti(d))}catch{return null}return A},d=>d?pXe(d,e.modelValue):null),o=ee(()=>s.value?{...s.value,h:r.value??s.value.h}:null),{rtlClasses:l}=as();let c=!0;Ge(s,d=>{if(!c){c=!0;return}d&&(r.value=d.h)},{immediate:!0});const f=d=>{c=!1,r.value=d.h,s.value=d};return tu(()=>{e.modes.includes(a.value)||(a.value=e.modes[0])}),kr({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),It(()=>{const d=rh.filterProps(e);return i(rh,Ie(d,{class:["v-color-picker",l.value,e.class],style:[{"--v-color-picker-color-hsv":J8({...o.value??uv,a:1})},e.style]}),{...n,default:()=>v(ze,null,[!e.hideCanvas&&i(vXe,{key:"canvas",color:o.value,"onUpdate:color":f,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&v("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&i(TXe,{key:"preview",color:o.value,"onUpdate:color":f,hideAlpha:!a.value.endsWith("a"),disabled:e.disabled},null),!e.hideInputs&&i(xXe,{key:"edit",modes:e.modes,mode:a.value,"onUpdate:mode":A=>a.value=A,color:o.value,"onUpdate:color":f,disabled:e.disabled},null)]),e.showSwatches&&i(ZXe,{key:"swatches",color:o.value,"onUpdate:color":f,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),aJe=ot({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Nh({filterKeys:["title"]}),...S4({hideNoData:!0,returnObject:!0}),...Wa(t1({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...iu({transition:!1})},"VCombobox"),rJe=St()({name:"VCombobox",props:aJe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Ka(),s=R(),o=Gt(!1),l=Gt(!0),c=Gt(!1),f=R(),d=R(),A=Gt(-1);let m=!1;const{items:p,transformIn:h,transformOut:y}=g4(e),{textColorClasses:g,textColorStyles:_}=$s(()=>s.value?.color),b=fn(e,"modelValue",[],fe=>h(xr(fe)),fe=>{const M=y(fe);return e.multiple?M:M[0]??null}),S=Jg(e),B=ee(()=>!!(e.chips||a.chip)),F=ee(()=>B.value||!!a.selection),T=Gt(!e.multiple&&!F.value?b.value[0]?.title??"":""),E=ee({get:()=>T.value,set:async fe=>{if(T.value=fe??"",!e.multiple&&!F.value&&(b.value=[Fl(e,fe)],Cn(()=>d.value?.scrollToIndex(0))),fe&&e.multiple&&e.delimiters?.length){const M=e.delimiters.map(V_).join("|"),z=fe.split(new RegExp(`(?:${M})+`));if(z.length>1){for(let se of z)se=se.trim(),se&&(j(Fl(e,se)),await Cn());T.value=""}}fe||(A.value=-1),l.value=!fe}}),x=ee(()=>typeof e.counterValue=="function"?e.counterValue(b.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?b.value.length:E.value.length),{filteredItems:C,getMatches:D}=Vh(e,p,()=>l.value?"":E.value),U=ee(()=>e.hideSelected?C.value.filter(fe=>!b.value.some(M=>M.value===fe.value)):C.value),L=ee(()=>e.hideNoData&&!U.value.length||S.isReadonly.value||S.isDisabled.value),H=fn(e,"menu"),oe=ee({get:()=>H.value,set:fe=>{H.value&&!fe&&f.value?.openChildren.size||fe&&L.value||(H.value=fe)}}),de=qe(()=>oe.value?e.closeText:e.openText);Ge(T,fe=>{m?Cn(()=>m=!1):o.value&&!oe.value&&(oe.value=!0),n("update:search",fe)}),Ge(b,fe=>{!e.multiple&&!F.value&&(T.value=fe[0]?.title??"")});const te=ee(()=>b.value.map(fe=>fe.value)),q=ee(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&E.value===U.value[0]?.title)&&U.value.length>0&&!l.value&&!c.value),ce=R(),le=C4(ce,s);function Z(fe){m=!0,e.openOnClear&&(oe.value=!0)}function ne(){L.value||(oe.value=!0)}function G(fe){L.value||(o.value&&(fe.preventDefault(),fe.stopPropagation()),oe.value=!oe.value)}function W(fe){(Lv(fe)||fe.key==="Backspace")&&s.value?.focus()}function Q(fe){if(ute(fe)||S.isReadonly.value)return;const M=s.value?.selectionStart,z=b.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(fe.key)&&fe.preventDefault(),["Enter","ArrowDown"].includes(fe.key)&&(oe.value=!0),["Escape"].includes(fe.key)&&(oe.value=!1),["Enter","Escape","Tab"].includes(fe.key)&&(q.value&&["Enter","Tab"].includes(fe.key)&&!b.value.some(se=>{let{value:be}=se;return be===U.value[0].value})&&j(C.value[0]),l.value=!0),fe.key==="ArrowDown"&&q.value&&ce.value?.focus("next"),fe.key==="Enter"&&E.value&&(j(Fl(e,E.value)),F.value&&(T.value="")),["Backspace","Delete"].includes(fe.key)){if(!e.multiple&&F.value&&b.value.length>0&&!E.value)return j(b.value[0],!1);if(~A.value){fe.preventDefault();const se=A.value;j(b.value[A.value],!1),A.value=se>=z-1?z-2:se}else fe.key==="Backspace"&&!E.value&&(A.value=z-1);return}if(e.multiple)if(fe.key==="ArrowLeft"){if(A.value<0&&M&&M>0)return;const se=A.value>-1?A.value-1:z-1;b.value[se]?A.value=se:(A.value=-1,s.value?.setSelectionRange(E.value.length,E.value.length))}else if(fe.key==="ArrowRight"){if(A.value<0)return;const se=A.value+1;b.value[se]?A.value=se:(A.value=-1,s.value?.setSelectionRange(0,0))}else~A.value&&Lv(fe)&&(A.value=-1)}function O(){e.eager&&d.value?.calculateVisibleItems()}function ae(){o.value&&(l.value=!0,s.value?.focus())}function j(fe){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!fe||fe.props.disabled))if(e.multiple){const z=b.value.findIndex(be=>(e.valueComparator||ks)(be.value,fe.value)),se=M??!~z;if(~z){const be=se?[...b.value,fe]:[...b.value];be.splice(z,1),b.value=be}else se&&(b.value=[...b.value,fe]);e.clearOnSelect&&(E.value="")}else{const z=M!==!1;b.value=z?[fe]:[],T.value=z&&!F.value?fe.title:"",Cn(()=>{oe.value=!1,l.value=!0})}}function J(fe){o.value=!0,setTimeout(()=>{c.value=!0})}function ie(fe){c.value=!1}function X(fe){(fe==null||fe===""&&!e.multiple&&!F.value)&&(b.value=[])}return Ge(o,(fe,M)=>{if(!(fe||fe===M)&&(A.value=-1,oe.value=!1,E.value)){if(e.multiple){j(Fl(e,E.value));return}if(!F.value)return;b.value.some(z=>{let{title:se}=z;return se===E.value})?T.value="":j(Fl(e,E.value))}}),Ge(oe,()=>{if(!e.hideSelected&&oe.value&&b.value.length){const fe=U.value.findIndex(M=>b.value.some(z=>(e.valueComparator||ks)(z.value,M.value)));Ua&&window.requestAnimationFrame(()=>{fe>=0&&d.value?.scrollToIndex(fe)})}}),Ge(()=>e.items,(fe,M)=>{oe.value||o.value&&!M.length&&fe.length&&(oe.value=!0)}),It(()=>{const fe=!!(!e.hideNoData||U.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),M=b.value.length>0,z=Wc.filterProps(e);return i(Wc,Ie({ref:s},z,{modelValue:E.value,"onUpdate:modelValue":[se=>E.value=se,X],focused:o.value,"onUpdate:focused":se=>o.value=se,validationValue:b.externalValue,counterValue:x.value,dirty:M,class:["v-combobox",{"v-combobox--active-menu":oe.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!F.value,"v-combobox--selecting-index":A.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:S.isReadonly.value,placeholder:M?void 0:e.placeholder,"onClick:clear":Z,"onMousedown:control":ne,onKeydown:Q}),{...a,default:()=>v(ze,null,[i(ah,Ie({ref:f,modelValue:oe.value,"onUpdate:modelValue":se=>oe.value=se,activator:"parent",contentClass:"v-combobox__content",disabled:L.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:O,onAfterLeave:ae},e.menuProps),{default:()=>[fe&&i(nh,Ie({ref:ce,filterable:!0,selected:te.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:se=>se.preventDefault(),onKeydown:W,onFocusin:J,onFocusout:ie,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},le,e.listProps),{default:()=>[a["prepend-item"]?.(),!U.value.length&&!e.hideNoData&&(a["no-data"]?.()??i(Zl,{key:"no-data",title:r(e.noDataText)},null)),i(ib,{ref:d,renderless:!0,items:U.value,itemKey:"value"},{default:se=>{let{item:be,index:Fe,itemRef:ye}=se;const Qe=Ie(be.props,{ref:ye,key:be.value,active:q.value&&Fe===0?!0:void 0,onClick:()=>j(be,null)});return be.type==="divider"?a.divider?.({props:be.raw,index:Fe})??i(Fi,Ie(be.props,{key:`divider-${Fe}`}),null):be.type==="subheader"?a.subheader?.({props:be.raw,index:Fe})??i(Rh,Ie(be.props,{key:`subheader-${Fe}`}),null):a.item?.({item:be,index:Fe,props:Qe})??i(Zl,Ie(Qe,{role:"option"}),{prepend:_e=>{let{isSelected:Se}=_e;return v(ze,null,[e.multiple&&!e.hideSelected?i(Ou,{key:be.value,modelValue:Se,ripple:!1,tabindex:"-1"},null):void 0,be.props.prependAvatar&&i(cl,{image:be.props.prependAvatar},null),be.props.prependIcon&&i(Da,{icon:be.props.prependIcon},null)])},title:()=>l.value?be.title:i7("v-combobox",be.title,D(be)?.title)})}}),a["append-item"]?.()]})]}),b.value.map((se,be)=>{function Fe(Se){Se.stopPropagation(),Se.preventDefault(),j(se,!1)}const ye={"onClick:close":Fe,onKeydown(Se){Se.key!=="Enter"&&Se.key!==" "||(Se.preventDefault(),Se.stopPropagation(),Fe(Se))},onMousedown(Se){Se.preventDefault(),Se.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Qe=B.value?!!a.chip:!!a.selection,_e=Qe?dw(B.value?a.chip({item:se,index:be,props:ye}):a.selection({item:se,index:be})):void 0;if(!(Qe&&!_e))return v("div",{key:se.value,class:lt(["v-combobox__selection",be===A.value&&["v-combobox__selection--selected",g.value]]),style:Mt(be===A.value?_.value:{})},[B.value?a.chip?i(Gn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:se.title}}},{default:()=>[_e]}):i(Uh,Ie({key:"chip",closable:e.closableChips,size:"small",text:se.title,disabled:se.props.disabled},ye),null):_e??v("span",{class:"v-combobox__selection-text"},[se.title,e.multiple&&be<b.value.length-1&&v("span",{class:"v-combobox__selection-comma"},[N(",")])])])})]),"append-inner":function(){for(var se=arguments.length,be=new Array(se),Fe=0;Fe<se;Fe++)be[Fe]=arguments[Fe];return v(ze,null,[a["append-inner"]?.(...be),(!e.hideNoData||e.items.length)&&e.menuIcon?i(Da,{class:"v-combobox__menu-icon",color:s.value?.fieldIconColor,icon:e.menuIcon,onMousedown:G,onClick:G8,"aria-label":r(de.value),title:r(de.value),tabindex:"-1"},null):void 0])}})}),Fs({isFocused:o,isPristine:l,menu:oe,search:E,selectionIndex:A,filteredItems:C,select:j},s)}}),sJe=ot({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),oJe=St()({name:"VConfirmEdit",props:sJe(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=fn(e,"modelValue"),s=R();Er(()=>{s.value=structuredClone(Sn(r.value))});const{t:o}=Ka(),l=ee(()=>ks(r.value,s.value));function c(y){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(y):l.value}const f=ee(()=>c("save")),d=ee(()=>c("cancel"));function A(){r.value=s.value,n("save",s.value)}function m(){s.value=structuredClone(Sn(r.value)),n("cancel")}function p(y){return v(ze,null,[i(ta,Ie({disabled:d.value,variant:"text",color:e.color,onClick:m,text:o(e.cancelText)},y),null),i(ta,Ie({disabled:f.value,variant:"text",color:e.color,onClick:A,text:o(e.okText)},y),null)])}let h=!1;return It(()=>v(ze,null,[a.default?.({model:s,save:A,cancel:m,isPristine:l.value,get actions(){return h=!0,p}}),!e.hideActions&&!h&&p()])),{save:A,cancel:m,isPristine:l}}}),S7=ot({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),E7=Symbol.for("vuetify:datatable:expanded");function db(e){const t=qe(()=>e.expandOnClick),n=fn(e,"expanded",e.expanded,l=>new Set(l),l=>[...l.values()]);function a(l,c){const f=new Set(n.value);c?f.add(l.value):f.delete(l.value),n.value=f}function r(l){return n.value.has(l.value)}function s(l){a(l,!r(l))}const o={expand:a,expanded:n,expandOnClick:t,isExpanded:r,toggleExpand:s};return za(E7,o),o}function k7(){const e=Pn(E7);if(!e)throw new Error("foo");return e}const T4=ot({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),B7=Symbol.for("vuetify:data-table-group");function I4(e){return{groupBy:fn(e,"groupBy")}}function fb(e){const{disableSort:t,groupBy:n,sortBy:a}=e,r=R(new Set),s=ee(()=>n.value.map(d=>({...d,order:d.order??!1})).concat(t?.value?[]:a.value));function o(d){return r.value.has(d.id)}function l(d){const A=new Set(r.value);o(d)?A.delete(d.id):A.add(d.id),r.value=A}function c(d){function A(m){const p=[];for(const h of m.items)"type"in h&&h.type==="group"?p.push(...A(h)):p.push(h);return[...new Set(p)]}return A({items:d})}const f={sortByWithGroups:s,toggleGroup:l,opened:r,groupBy:n,extractRows:c,isGroupOpen:o};return za(B7,f),f}function T7(){const e=Pn(B7);if(!e)throw new Error("Missing group!");return e}function iJe(e,t){if(!e.length)return[];const n=new Map;for(const a of e){const r=hA(a.raw,t);n.has(r)||n.set(r,[]),n.get(r).push(a)}return n}function I7(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const r=iJe(e,t[0]),s=[],o=t.slice(1);return r.forEach((l,c)=>{const f=t[0],d=`${a}_${f}_${c}`;s.push({depth:n,id:d,key:f,value:c,items:o.length?I7(l,o,n+1,d):l,type:"group"})}),s}function F7(e,t){const n=[];for(const a of e)"type"in a&&a.type==="group"?(a.value!=null&&n.push(a),(t.has(a.id)||a.value==null)&&n.push(...F7(a.items,t))):n.push(a);return n}function Ab(e,t,n){return{flatItems:ee(()=>{if(!t.value.length)return e.value;const r=I7(e.value,t.value.map(s=>s.key));return F7(r,n.value)})}}function mb(e){let{page:t,itemsPerPage:n,sortBy:a,groupBy:r,search:s}=e;const o=Nr("VDataTable"),l=()=>({page:t.value,itemsPerPage:n.value,sortBy:a.value,groupBy:r.value,search:s.value});let c=null;Ge(l,f=>{ks(c,f)||(c&&c.search!==f.search&&(t.value=1),o.emit("update:options",f),c=f)},{deep:!0,immediate:!0})}const F4=ot({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),P7=Symbol.for("vuetify:data-table-pagination");function P4(e){const t=fn(e,"page",void 0,a=>Number(a??1)),n=fn(e,"itemsPerPage",void 0,a=>Number(a??10));return{page:t,itemsPerPage:n}}function D4(e){const{page:t,itemsPerPage:n,itemsLength:a}=e,r=ee(()=>n.value===-1?0:n.value*(t.value-1)),s=ee(()=>n.value===-1?a.value:Math.min(a.value,r.value+n.value)),o=ee(()=>n.value===-1||a.value===0?1:Math.ceil(a.value/n.value));Ge([t,o],()=>{t.value>o.value&&(t.value=o.value)});function l(m){n.value=m,t.value=1}function c(){t.value=ar(t.value+1,1,o.value)}function f(){t.value=ar(t.value-1,1,o.value)}function d(m){t.value=ar(m,1,o.value)}const A={page:t,itemsPerPage:n,startIndex:r,stopIndex:s,pageCount:o,itemsLength:a,nextPage:c,prevPage:f,setPage:d,setItemsPerPage:l};return za(P7,A),A}function lJe(){const e=Pn(P7);if(!e)throw new Error("Missing pagination!");return e}function D7(e){const t=Nr("usePaginatedItems"),{items:n,startIndex:a,stopIndex:r,itemsPerPage:s}=e,o=ee(()=>s.value<=0?n.value:n.value.slice(a.value,r.value));return Ge(o,l=>{t.emit("update:currentItems",l)},{immediate:!0}),{paginatedItems:o}}const uJe={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:n}=e;return new Set(n?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},U7={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,currentPage:n,selected:a}=e;return U7.select({items:n,value:t,selected:a})}},R7={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,allItems:n,selected:a}=e;return R7.select({items:n,value:t,selected:a})}},N7=ot({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:ks}},"DataTable-select"),V7=Symbol.for("vuetify:data-table-selection");function vb(e,t){let{allItems:n,currentPage:a}=t;const r=fn(e,"modelValue",e.modelValue,b=>new Set(xr(b).map(S=>n.value.find(B=>e.valueComparator(S,B.value))?.value??S)),b=>[...b.values()]),s=ee(()=>n.value.filter(b=>b.selectable)),o=ee(()=>a.value.filter(b=>b.selectable)),l=ee(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return uJe;case"all":return R7;case"page":default:return U7}}),c=Gt(null);function f(b){return xr(b).every(S=>r.value.has(S.value))}function d(b){return xr(b).some(S=>r.value.has(S.value))}function A(b,S){const B=l.value.select({items:b,value:S,selected:new Set(r.value)});r.value=B}function m(b,S,B){const F=[];if(S=S??a.value.findIndex(T=>T.value===b.value),e.selectStrategy!=="single"&&B?.shiftKey&&c.value!==null){const[T,E]=[c.value,S].sort((x,C)=>x-C);F.push(...a.value.slice(T,E+1).filter(x=>x.selectable))}else F.push(b),c.value=S;A(F,!f([b]))}function p(b){const S=l.value.selectAll({value:b,allItems:s.value,currentPage:o.value,selected:new Set(r.value)});r.value=S}const h=ee(()=>r.value.size>0),y=ee(()=>{const b=l.value.allSelected({allItems:s.value,currentPage:o.value});return!!b.length&&f(b)}),g=qe(()=>l.value.showSelectAll),_={toggleSelect:m,select:A,selectAll:p,isSelected:f,isSomeSelected:d,someSelected:h,allSelected:y,showSelectAll:g,lastSelectedIndex:c,selectStrategy:l};return za(V7,_),_}function hb(){const e=Pn(V7);if(!e)throw new Error("Missing selection!");return e}const L7=ot({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),M7=Symbol.for("vuetify:data-table-sort");function pb(e){const t=fn(e,"sortBy"),n=qe(()=>e.mustSort),a=qe(()=>e.multiSort);return{sortBy:t,mustSort:n,multiSort:a}}function gb(e){const{sortBy:t,mustSort:n,multiSort:a,page:r}=e,s=c=>{if(c.key==null)return;let f=t.value.map(A=>({...A}))??[];const d=f.find(A=>A.key===c.key);d?d.order==="desc"?n.value&&f.length===1?d.order="asc":f=f.filter(A=>A.key!==c.key):d.order="desc":a.value?f.push({key:c.key,order:"asc"}):f=[{key:c.key,order:"asc"}],t.value=f,r&&(r.value=1)};function o(c){return!!t.value.find(f=>f.key===c.key)}const l={sortBy:t,toggleSort:s,isSorted:o};return za(M7,l),l}function O7(){const e=Pn(M7);if(!e)throw new Error("Missing sort!");return e}function U4(e,t,n,a){const r=Ka();return{sortedItems:ee(()=>n.value.length?cJe(t.value,n.value,r.current.value,{transform:a?.transform,sortFunctions:{...e.customKeySort,...a?.sortFunctions?.value},sortRawFunctions:a?.sortRawFunctions?.value}):t.value)}}function cJe(e,t,n,a){const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return e.map(o=>[o,a?.transform?a.transform(o):o]).sort((o,l)=>{for(let c=0;c<t.length;c++){let f=!1;const d=t[c].key,A=t[c].order??"asc";if(A===!1)continue;let m=hA(o[1],d),p=hA(l[1],d),h=o[0].raw,y=l[0].raw;if(A==="desc"&&([m,p]=[p,m],[h,y]=[y,h]),a?.sortRawFunctions?.[d]){const g=a.sortRawFunctions[d](h,y);if(g==null)continue;if(f=!0,g)return g}if(a?.sortFunctions?.[d]){const g=a.sortFunctions[d](m,p);if(g==null)continue;if(f=!0,g)return g}if(!f&&(m instanceof Date&&p instanceof Date&&(m=m.getTime(),p=p.getTime()),[m,p]=[m,p].map(g=>g!=null?g.toString().toLocaleLowerCase():g),m!==p))return Z1(m)&&Z1(p)?0:Z1(m)?-1:Z1(p)?1:!isNaN(m)&&!isNaN(p)?Number(m)-Number(p):r.compare(m,p)}return 0}).map(o=>{let[l]=o;return l})}const dJe=ot({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function fJe(e,t){const n=e.returnObject?t:Or(t,e.itemValue),a=Or(t,e.itemSelectable,!0);return{type:"item",value:n,selectable:a,raw:t}}function AJe(e,t){const n=[];for(const a of t)n.push(fJe(e,a));return n}function mJe(e){return{items:ee(()=>AJe(e,e.items))}}const vJe=ot({search:String,loading:Boolean,...nn(),...dJe(),...N7(),...L7(),...F4({itemsPerPage:5}),...S7(),...T4(),...Nh(),...$n(),...iu({transition:{component:sg,hideOnLeave:!0}})},"VDataIterator"),hJe=St()({name:"VDataIterator",props:vJe(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"groupBy"),r=qe(()=>e.search),{items:s}=mJe(e),{filteredItems:o}=Vh(e,s,r,{transform:ne=>ne.raw}),{sortBy:l,multiSort:c,mustSort:f}=pb(e),{page:d,itemsPerPage:A}=P4(e),{toggleSort:m}=gb({sortBy:l,multiSort:c,mustSort:f,page:d}),{sortByWithGroups:p,opened:h,extractRows:y,isGroupOpen:g,toggleGroup:_}=fb({groupBy:a,sortBy:l}),{sortedItems:b}=U4(e,o,p,{transform:ne=>ne.raw}),{flatItems:S}=Ab(b,a,h),B=qe(()=>S.value.length),{startIndex:F,stopIndex:T,pageCount:E,prevPage:x,nextPage:C,setItemsPerPage:D,setPage:U}=D4({page:d,itemsPerPage:A,itemsLength:B}),{paginatedItems:L}=D7({items:S,startIndex:F,stopIndex:T,itemsPerPage:A}),H=ee(()=>y(L.value)),{isSelected:oe,select:de,selectAll:te,toggleSelect:q}=vb(e,{allItems:s,currentPage:H}),{isExpanded:ce,toggleExpand:le}=db(e);mb({page:d,itemsPerPage:A,sortBy:l,groupBy:a,search:r});const Z=ee(()=>({page:d.value,itemsPerPage:A.value,sortBy:l.value,pageCount:E.value,toggleSort:m,prevPage:x,nextPage:C,setPage:U,setItemsPerPage:D,isSelected:oe,select:de,selectAll:te,toggleSelect:q,isExpanded:ce,toggleExpand:le,isGroupOpen:g,toggleGroup:_,items:H.value,groupedItems:L.value}));return It(()=>i(e.tag,{class:lt(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Mt(e.style)},{default:()=>[n.header?.(Z.value),i(So,{transition:e.transition},{default:()=>[e.loading?i(jg,{key:"loader",name:"v-data-iterator",active:!0},{default:ne=>n.loader?.(ne)}):v("div",{key:"items"},[L.value.length?n.default?.(Z.value):n["no-data"]?.()])]}),n.footer?.(Z.value)]})),{}}});function pJe(){const e=R([]);JL(()=>e.value=[]);function t(n,a){e.value[a]=n}return{refs:e,updateRef:t}}const gJe=ot({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:vn,default:"$first"},prevIcon:{type:vn,default:"$prev"},nextIcon:{type:vn,default:"$next"},lastIcon:{type:vn,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Yo(),...nn(),...ps(),...rs(),...dr(),...Xu(),...$n({tag:"nav"}),...Aa(),...hl({variant:"text"})},"VPagination"),gk=St()({name:"VPagination",props:gJe(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=fn(e,"modelValue"),{t:s,n:o}=Ka(),{isRtl:l}=as(),{themeClasses:c}=Ra(e),{width:f}=Vi(),d=Gt(-1);kr(void 0,{scoped:!0});const{resizeRef:A}=Kl(x=>{if(!x.length)return;const{target:C,contentRect:D}=x[0],U=C.querySelector(".v-pagination__list > *");if(!U)return;const L=D.width,H=U.offsetWidth+parseFloat(getComputedStyle(U).marginRight)*2;d.value=y(L,H)}),m=ee(()=>parseInt(e.length,10)),p=ee(()=>parseInt(e.start,10)),h=ee(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):d.value>=0?d.value:y(f.value,58));function y(x,C){const D=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((x-C*D)/C).toFixed(2))))}const g=ee(()=>{if(m.value<=0||isNaN(m.value)||m.value>Number.MAX_SAFE_INTEGER)return[];if(h.value<=0)return[];if(h.value===1)return[r.value];if(m.value<=h.value)return Bi(m.value,p.value);const x=h.value%2===0,C=x?h.value/2:Math.floor(h.value/2),D=x?C:C+1,U=m.value-C;if(D-r.value>=0)return[...Bi(Math.max(1,h.value-1),p.value),e.ellipsis,m.value];if(r.value-U>=(x?1:0)){const L=h.value-1,H=m.value-L+p.value;return[p.value,e.ellipsis,...Bi(L,H)]}else{const L=Math.max(1,h.value-2),H=L===1?r.value:r.value-Math.ceil(L/2)+p.value;return[p.value,e.ellipsis,...Bi(L,H),e.ellipsis,m.value]}});function _(x,C,D){x.preventDefault(),r.value=C,D&&a(D,C)}const{refs:b,updateRef:S}=pJe();kr({VPaginationBtn:{color:qe(()=>e.color),border:qe(()=>e.border),density:qe(()=>e.density),size:qe(()=>e.size),variant:qe(()=>e.variant),rounded:qe(()=>e.rounded),elevation:qe(()=>e.elevation)}});const B=ee(()=>g.value.map((x,C)=>{const D=U=>S(U,C);if(typeof x=="string")return{isActive:!1,key:`ellipsis-${C}`,page:x,props:{ref:D,ellipsis:!0,icon:!0,disabled:!0}};{const U=x===r.value;return{isActive:U,key:x,page:o(x),props:{ref:D,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:U?e.activeColor:e.color,"aria-current":U,"aria-label":s(U?e.currentPageAriaLabel:e.pageAriaLabel,x),onClick:L=>_(L,x)}}}})),F=ee(()=>{const x=!!e.disabled||r.value<=p.value,C=!!e.disabled||r.value>=p.value+m.value-1;return{first:e.showFirstLastPage?{icon:l.value?e.lastIcon:e.firstIcon,onClick:D=>_(D,p.value,"first"),disabled:x,"aria-label":s(e.firstAriaLabel),"aria-disabled":x}:void 0,prev:{icon:l.value?e.nextIcon:e.prevIcon,onClick:D=>_(D,r.value-1,"prev"),disabled:x,"aria-label":s(e.previousAriaLabel),"aria-disabled":x},next:{icon:l.value?e.prevIcon:e.nextIcon,onClick:D=>_(D,r.value+1,"next"),disabled:C,"aria-label":s(e.nextAriaLabel),"aria-disabled":C},last:e.showFirstLastPage?{icon:l.value?e.firstIcon:e.lastIcon,onClick:D=>_(D,p.value+m.value-1,"last"),disabled:C,"aria-label":s(e.lastAriaLabel),"aria-disabled":C}:void 0}});function T(){const x=r.value-p.value;b.value[x]?.$el.focus()}function E(x){x.key===SS.left&&!e.disabled&&r.value>Number(e.start)?(r.value=r.value-1,Cn(T)):x.key===SS.right&&!e.disabled&&r.value<p.value+m.value-1&&(r.value=r.value+1,Cn(T))}return It(()=>i(e.tag,{ref:A,class:lt(["v-pagination",c.value,e.class]),style:Mt(e.style),role:"navigation","aria-label":s(e.ariaLabel),onKeydown:E,"data-test":"v-pagination-root"},{default:()=>[v("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&v("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(F.value.first):i(ta,Ie({_as:"VPaginationBtn"},F.value.first),null)]),v("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(F.value.prev):i(ta,Ie({_as:"VPaginationBtn"},F.value.prev),null)]),B.value.map((x,C)=>v("li",{key:x.key,class:lt(["v-pagination__item",{"v-pagination__item--is-active":x.isActive}]),"data-test":"v-pagination-item"},[n.item?n.item(x):i(ta,Ie({_as:"VPaginationBtn"},x.props),{default:()=>[x.page]})])),v("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(F.value.next):i(ta,Ie({_as:"VPaginationBtn"},F.value.next),null)]),e.showFirstLastPage&&v("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(F.value.last):i(ta,Ie({_as:"VPaginationBtn"},F.value.last),null)])])]})),{}}}),R4=ot({prevIcon:{type:vn,default:"$prev"},nextIcon:{type:vn,default:"$next"},firstIcon:{type:vn,default:"$first"},lastIcon:{type:vn,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Ag=St()({name:"VDataTableFooter",props:R4(),setup(e,t){let{slots:n}=t;const{t:a}=Ka(),{page:r,pageCount:s,startIndex:o,stopIndex:l,itemsLength:c,itemsPerPage:f,setItemsPerPage:d}=lJe(),A=ee(()=>e.itemsPerPageOptions.map(m=>typeof m=="number"?{value:m,title:m===-1?a("$vuetify.dataFooter.itemsPerPageAll"):String(m)}:{...m,title:isNaN(Number(m.title))?a(m.title):m.title}));return It(()=>{const m=gk.filterProps(e);return v("div",{class:"v-data-table-footer"},[n.prepend?.(),v("div",{class:"v-data-table-footer__items-per-page"},[v("span",{"aria-label":a(e.itemsPerPageText)},[a(e.itemsPerPageText)]),i(E4,{items:A.value,modelValue:f.value,"onUpdate:modelValue":p=>d(Number(p)),density:"compact",variant:"outlined",hideDetails:!0},null)]),v("div",{class:"v-data-table-footer__info"},[v("div",null,[a(e.pageText,c.value?o.value+1:0,l.value,c.value)])]),v("div",{class:"v-data-table-footer__pagination"},[i(gk,Ie({modelValue:r.value,"onUpdate:modelValue":p=>r.value=p,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:s.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},m),null)])])}),{}}}),V2=zte({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const a=e.tag??"td",r=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return i(a,{class:lt(["v-data-table__td",{"v-data-table-column--fixed":r==="start","v-data-table-column--fixed-end":r==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:Zt(e.height),width:Zt(e.width),maxWidth:Zt(e.maxWidth),left:r==="start"?Zt(e.fixedOffset||null):void 0,right:r==="end"?Zt(e.fixedEndOffset||null):void 0}},{default:()=>[n.default?.()]})}),yJe=ot({headers:Array},"DataTable-header"),H7=Symbol.for("vuetify:data-table-headers"),$7={title:"",sortable:!1},_Je={...$7,width:48};function wJe(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,a)=>{let r=!1;for(let s=0;s<t.length;s++)if(t[s].priority>a){t.splice(s,0,{element:n,priority:a}),r=!0;break}r||t.push({element:n,priority:a})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const a=Math.floor(t[0].priority);for(let r=0;r<t.length;r++)Math.floor(t[r].priority)===a&&(n+=1);return n},dequeue:()=>t.shift()}}function yk(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)yk(n,t);return t}function Q7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&Q7(n.children,t);return t}function bJe(e){if(e.key){if(e.key==="data-table-group")return $7;if(["data-table-expand","data-table-select"].includes(e.key))return _Je}}function N4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>N4(n,t+1))):t}function xJe(e){let t=!1;function n(s,o){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(s)if(l!=="none"&&(s.fixed=l),s.fixed===!0&&(s.fixed="start"),s.fixed===o)if(s.children)if(o==="start")for(let c=s.children.length-1;c>=0;c--)n(s.children[c],o,o);else for(let c=0;c<s.children.length;c++)n(s.children[c],o,o);else!t&&o==="start"?s.lastFixed=!0:!t&&o==="end"?s.firstFixedEnd=!0:isNaN(Number(s.width))?(`${s.key}`,void 0):s.minWidth=Math.max(Number(s.width)||0,Number(s.minWidth)||0),t=!0;else if(s.children)if(o==="start")for(let c=s.children.length-1;c>=0;c--)n(s.children[c],o);else for(let c=0;c<s.children.length;c++)n(s.children[c],o);else t=!1}for(let s=e.length-1;s>=0;s--)n(e[s],"start");for(let s=0;s<e.length;s++)n(e[s],"end");let a=0;for(let s=0;s<e.length;s++)a=G7(e[s],a);let r=0;for(let s=e.length-1;s>=0;s--)r=z7(e[s],r)}function G7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=G7(n,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function z7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=z7(n,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function CJe(e,t){const n=[];let a=0;const r=wJe(e);for(;r.size()>0;){let o=r.count();const l=[];let c=1;for(;o>0;){const{element:f,priority:d}=r.dequeue(),A=t-a-N4(f);if(l.push({...f,rowspan:A??1,colspan:f.children?yk(f).length:1}),f.children)for(const m of f.children){const p=d%1+c/Math.pow(10,a+2);r.enqueue(m,a+A+p)}c+=1,o-=1}a+=1,n.push(l)}return{columns:e.map(o=>yk(o)).flat(),headers:n}}function W7(e){const t=[];for(const n of e){const a={...bJe(n),...n},r=a.key??(typeof a.value=="string"?a.value:null),s=a.value??r??null,o={...a,key:r,value:s,sortable:a.sortable??(a.key!=null||!!a.sort),children:a.children?W7(a.children):void 0};t.push(o)}return t}function V4(e,t){const n=R([]),a=R([]),r=R({}),s=R({}),o=R({});Er(()=>{const f=(e.headers||Object.keys(e.items[0]??{}).map(y=>({key:y,title:Qu(y)}))).slice(),d=Q7(f);t?.groupBy?.value.length&&!d.has("data-table-group")&&f.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!d.has("data-table-select")&&f.unshift({key:"data-table-select"}),t?.showExpand?.value&&!d.has("data-table-expand")&&f.push({key:"data-table-expand"});const A=W7(f);xJe(A);const m=Math.max(...A.map(y=>N4(y)))+1,p=CJe(A,m);n.value=p.headers,a.value=p.columns;const h=p.headers.flat(1);for(const y of h)y.key&&(y.sortable&&(y.sort&&(r.value[y.key]=y.sort),y.sortRaw&&(s.value[y.key]=y.sortRaw)),y.filter&&(o.value[y.key]=y.filter))});const l={headers:n,columns:a,sortFunctions:r,sortRawFunctions:s,filterFunctions:o};return za(H7,l),l}function yb(){const e=Pn(H7);if(!e)throw new Error("Missing headers!");return e}const K7=ot({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:vn,default:"$sortAsc"},sortDescIcon:{type:vn,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...$A(),...ab()},"VDataTableHeaders"),FA=St()({name:"VDataTableHeaders",props:K7(),setup(e,t){let{slots:n}=t;const{t:a}=Ka(),{toggleSort:r,sortBy:s,isSorted:o}=O7(),{someSelected:l,allSelected:c,selectAll:f,showSelectAll:d}=hb(),{columns:A,headers:m}=yb(),{loaderClasses:p}=Kg(e);function h(C,D){if(!(e.sticky||e.fixedHeader)&&!C.fixed)return;const U=typeof C.fixed=="string"?C.fixed:C.fixed?"start":"none";return{position:"sticky",left:U==="start"?Zt(C.fixedOffset):void 0,right:U==="end"?Zt(C.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${D})`:void 0}}function y(C,D){C.key==="Enter"&&!e.disableSort&&r(D)}function g(C){const D=s.value.find(U=>U.key===C.key);return D?D.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:_,backgroundColorStyles:b}=La(()=>e.color),{displayClasses:S,mobile:B}=Vi(e),F=ee(()=>({headers:m.value,columns:A.value,toggleSort:r,isSorted:o,sortBy:s.value,someSelected:l.value,allSelected:c.value,selectAll:f,getSortIcon:g})),T=ee(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},S.value,p.value]),E=C=>{let{column:D,x:U,y:L}=C;const H=D.key==="data-table-select"||D.key==="data-table-expand",oe=Ie(e.headerProps??{},D.headerProps??{});return i(V2,Ie({tag:"th",align:D.align,class:[{"v-data-table__th--sortable":D.sortable&&!e.disableSort,"v-data-table__th--sorted":o(D),"v-data-table__th--fixed":D.fixed},...T.value],style:{width:Zt(D.width),minWidth:Zt(D.minWidth),maxWidth:Zt(D.maxWidth),...h(D,L)},colspan:D.colspan,rowspan:D.rowspan,fixed:D.fixed,nowrap:D.nowrap,lastFixed:D.lastFixed,firstFixedEnd:D.firstFixedEnd,noPadding:H,tabindex:D.sortable?0:void 0,onClick:D.sortable?()=>r(D):void 0,onKeydown:D.sortable?de=>y(de,D):void 0},oe),{default:()=>{const de=`header.${D.key}`,te={column:D,selectAll:f,isSorted:o,toggleSort:r,sortBy:s.value,someSelected:l.value,allSelected:c.value,getSortIcon:g};return n[de]?n[de](te):D.key==="data-table-select"?n["header.data-table-select"]?.(te)??(d.value&&i(Ou,{modelValue:c.value,indeterminate:l.value&&!c.value,"onUpdate:modelValue":f},null)):v("div",{class:"v-data-table-header__content"},[v("span",null,[D.title]),D.sortable&&!e.disableSort&&i(Da,{key:"icon",class:"v-data-table-header__sort-icon",icon:g(D)},null),e.multiSort&&o(D)&&v("div",{key:"badge",class:lt(["v-data-table-header__sort-badge",..._.value]),style:Mt(b.value)},[s.value.findIndex(q=>q.key===D.key)+1])])}})},x=()=>{const C=ee(()=>A.value.filter(U=>U?.sortable&&!e.disableSort)),D=ee(()=>{if(A.value.find(L=>L.key==="data-table-select")!=null)return c.value?"$checkboxOn":l.value?"$checkboxIndeterminate":"$checkboxOff"});return i(V2,Ie({tag:"th",class:[...T.value],colspan:m.value.length+1},e.headerProps),{default:()=>[v("div",{class:"v-data-table-header__content"},[i(E4,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:C.value,label:a("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>s.value=[],appendIcon:D.value,"onClick:append":()=>f(!c.value)},{chip:U=>i(Uh,{onClick:U.item.raw?.sortable?()=>r(U.item.raw):void 0,onMousedown:L=>{L.preventDefault(),L.stopPropagation()}},{default:()=>[U.item.title,i(Da,{class:lt(["v-data-table__td-sort-icon",o(U.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:g(U.item.raw),size:"small"},null)]})})])]})};It(()=>B.value?v("tr",null,[i(x,null,null)]):v(ze,null,[n.headers?n.headers(F.value):m.value.map((C,D)=>v("tr",null,[C.map((U,L)=>i(E,{column:U,x:L,y:D},null))])),e.loading&&v("tr",{class:"v-data-table-progress"},[v("th",{colspan:A.value.length},[i(jg,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),SJe=ot({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),EJe=St()({name:"VDataTableGroupHeaderRow",props:SJe(),setup(e,t){let{slots:n}=t;const{isGroupOpen:a,toggleGroup:r,extractRows:s}=T7(),{isSelected:o,isSomeSelected:l,select:c}=hb(),{columns:f}=yb(),d=ee(()=>s([e.item]));return()=>v("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[f.value.map(A=>{if(A.key==="data-table-group"){const m=a(e.item)?"$expand":"$next",p=()=>r(e.item);return n["data-table-group"]?.({item:e.item,count:d.value.length,props:{icon:m,onClick:p}})??i(V2,{class:"v-data-table-group-header-row__column"},{default:()=>[i(ta,{size:"small",variant:"text",icon:m,onClick:p},null),v("span",null,[e.item.value]),v("span",null,[N("("),d.value.length,N(")")])]})}if(A.key==="data-table-select"){const m=o(d.value),p=l(d.value)&&!m,h=y=>c(d.value,y);return n["data-table-select"]?.({props:{modelValue:m,indeterminate:p,"onUpdate:modelValue":h}})??v("td",null,[i(Ou,{modelValue:m,indeterminate:p,"onUpdate:modelValue":h},null)])}return v("td",null,null)})])}}),kJe=ot({index:Number,item:Object,cellProps:[Object,Function],onClick:Os(),onContextmenu:Os(),onDblclick:Os(),...$A()},"VDataTableRow"),L4=St()({name:"VDataTableRow",props:kJe(),setup(e,t){let{slots:n}=t;const{displayClasses:a,mobile:r}=Vi(e,"v-data-table__tr"),{isSelected:s,toggleSelect:o,someSelected:l,allSelected:c,selectAll:f}=hb(),{isExpanded:d,toggleExpand:A}=k7(),{toggleSort:m,sortBy:p,isSorted:h}=O7(),{columns:y}=yb();It(()=>v("tr",{class:lt(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},a.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&y.value.map((g,_)=>{const b=e.item,S=`item.${g.key}`,B=`header.${g.key}`,F={index:e.index,item:b.raw,internalItem:b,value:hA(b.columns,g.key),column:g,isSelected:s,toggleSelect:o,isExpanded:d,toggleExpand:A},T={column:g,selectAll:f,isSorted:h,toggleSort:m,sortBy:p.value,someSelected:l.value,allSelected:c.value,getSortIcon:()=>""},E=typeof e.cellProps=="function"?e.cellProps({index:F.index,item:F.item,internalItem:F.internalItem,value:F.value,column:g}):e.cellProps,x=typeof g.cellProps=="function"?g.cellProps({index:F.index,item:F.item,internalItem:F.internalItem,value:F.value}):g.cellProps;return i(V2,Ie({align:g.align,class:{"v-data-table__td--expanded-row":g.key==="data-table-expand","v-data-table__td--select-row":g.key==="data-table-select"},fixed:g.fixed,fixedOffset:g.fixedOffset,fixedEndOffset:g.fixedEndOffset,lastFixed:g.lastFixed,firstFixedEnd:g.firstFixedEnd,maxWidth:r.value?void 0:g.maxWidth,noPadding:g.key==="data-table-select"||g.key==="data-table-expand",nowrap:g.nowrap,width:r.value?void 0:g.width},E,x),{default:()=>{if(g.key==="data-table-select")return n["item.data-table-select"]?.({...F,props:{disabled:!b.selectable,modelValue:s([b]),onClick:gn(()=>o(b),["stop"])}})??i(Ou,{disabled:!b.selectable,modelValue:s([b]),onClick:gn(D=>o(b,e.index,D),["stop"])},null);if(g.key==="data-table-expand")return n["item.data-table-expand"]?.({...F,props:{icon:d(b)?"$collapse":"$expand",size:"small",variant:"text",onClick:gn(()=>A(b),["stop"])}})??i(ta,{icon:d(b)?"$collapse":"$expand",size:"small",variant:"text",onClick:gn(()=>A(b),["stop"])},null);if(n[S]&&!r.value)return n[S](F);const C=K(F.value);return r.value?v(ze,null,[v("div",{class:"v-data-table__td-title"},[n[B]?.(T)??g.title]),v("div",{class:"v-data-table__td-value"},[n[S]?.(F)??C])]):C}})})]))}}),j7=ot({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...$A()},"VDataTableRows"),PA=St()({name:"VDataTableRows",inheritAttrs:!1,props:j7(),setup(e,t){let{attrs:n,slots:a}=t;const{columns:r}=yb(),{expandOnClick:s,toggleExpand:o,isExpanded:l}=k7(),{isSelected:c,toggleSelect:f}=hb(),{toggleGroup:d,isGroupOpen:A}=T7(),{t:m}=Ka(),{mobile:p}=Vi(e);return It(()=>e.loading&&(!e.items.length||a.loading)?v("tr",{class:"v-data-table-rows-loading",key:"loading"},[v("td",{colspan:r.value.length},[a.loading?.()??m(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?v("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[v("td",{colspan:r.value.length},[a["no-data"]?.()??m(e.noDataText)])]):v(ze,null,[e.items.map((h,y)=>{if(h.type==="group"){const b={index:y,item:h,columns:r.value,isExpanded:l,toggleExpand:o,isSelected:c,toggleSelect:f,toggleGroup:d,isGroupOpen:A};return a["group-header"]?a["group-header"](b):i(EJe,Ie({key:`group-header_${h.id}`,item:h},vD(n,":group-header",()=>b)),a)}const g={index:y,item:h.raw,internalItem:h,columns:r.value,isExpanded:l,toggleExpand:o,isSelected:c,toggleSelect:f},_={...g,props:Ie({key:`item_${h.key??h.index}`,onClick:s.value?()=>{o(h)}:void 0,index:y,item:h,cellProps:e.cellProps,mobile:p.value},vD(n,":row",()=>g),typeof e.rowProps=="function"?e.rowProps({item:g.item,index:g.index,internalItem:g.internalItem}):e.rowProps)};return v(ze,{key:_.props.key},[a.item?a.item(_):i(L4,_.props,a),l(h)&&a["expanded-row"]?.(g)])})])),{}}}),q7=ot({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...nn(),...ps(),...$n(),...Aa()},"VTable"),DA=St()({name:"VTable",props:q7(),setup(e,t){let{slots:n,emit:a}=t;const{themeClasses:r}=Ra(e),{densityClasses:s}=Uo(e);return It(()=>{const o={VCheckboxBtn:{density:e.density}};return i(e.tag,{class:lt(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},r.value,s.value,e.class]),style:Mt(e.style)},{default:()=>[n.top?.(),i(Gn,{defaults:o},{default:()=>[n.default?v("div",{class:"v-table__wrapper",style:{height:Zt(e.height)}},[v("table",null,[n.default()])]):n.wrapper?.()]}),n.bottom?.()]})}),{}}}),BJe=ot({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function TJe(e,t,n,a){const r=e.returnObject?t:Or(t,e.itemValue),s=Or(t,e.itemSelectable,!0),o=a.reduce((l,c)=>(c.key!=null&&(l[c.key]=Or(t,c.value)),l),{});return{type:"item",key:e.returnObject?Or(t,e.itemValue):r,index:n,value:r,selectable:s,columns:o,raw:t}}function IJe(e,t,n){return t.map((a,r)=>TJe(e,a,r,n))}function M4(e,t){return{items:ee(()=>IJe(e,e.items,t.value))}}const O4=ot({...j7(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...S7(),...T4(),...yJe(),...BJe(),...N7(),...L7(),...K7(),...q7()},"DataTable"),FJe=ot({...F4(),...O4(),...Nh(),...R4()},"VDataTable"),PJe=St()({name:"VDataTable",props:FJe(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=I4(e),{sortBy:s,multiSort:o,mustSort:l}=pb(e),{page:c,itemsPerPage:f}=P4(e),{disableSort:d}=MA(e),{columns:A,headers:m,sortFunctions:p,sortRawFunctions:h,filterFunctions:y}=V4(e,{groupBy:r,showSelect:qe(()=>e.showSelect),showExpand:qe(()=>e.showExpand)}),{items:g}=M4(e,A),_=qe(()=>e.search),{filteredItems:b}=Vh(e,g,_,{transform:j=>j.columns,customKeyFilter:y}),{toggleSort:S}=gb({sortBy:s,multiSort:o,mustSort:l,page:c}),{sortByWithGroups:B,opened:F,extractRows:T,isGroupOpen:E,toggleGroup:x}=fb({groupBy:r,sortBy:s,disableSort:d}),{sortedItems:C}=U4(e,b,B,{transform:j=>({...j.raw,...j.columns}),sortFunctions:p,sortRawFunctions:h}),{flatItems:D}=Ab(C,r,F),U=ee(()=>D.value.length),{startIndex:L,stopIndex:H,pageCount:oe,setItemsPerPage:de}=D4({page:c,itemsPerPage:f,itemsLength:U}),{paginatedItems:te}=D7({items:D,startIndex:L,stopIndex:H,itemsPerPage:f}),q=ee(()=>T(te.value)),{isSelected:ce,select:le,selectAll:Z,toggleSelect:ne,someSelected:G,allSelected:W}=vb(e,{allItems:g,currentPage:q}),{isExpanded:Q,toggleExpand:O}=db(e);mb({page:c,itemsPerPage:f,sortBy:s,groupBy:r,search:_}),kr({VDataTableRows:{hideNoData:qe(()=>e.hideNoData),noDataText:qe(()=>e.noDataText),loading:qe(()=>e.loading),loadingText:qe(()=>e.loadingText)}});const ae=ee(()=>({page:c.value,itemsPerPage:f.value,sortBy:s.value,pageCount:oe.value,toggleSort:S,setItemsPerPage:de,someSelected:G.value,allSelected:W.value,isSelected:ce,select:le,selectAll:Z,toggleSelect:ne,isExpanded:Q,toggleExpand:O,isGroupOpen:E,toggleGroup:x,items:q.value.map(j=>j.raw),internalItems:q.value,groupedItems:te.value,columns:A.value,headers:m.value}));return It(()=>{const j=Ag.filterProps(e),J=FA.filterProps(e),ie=PA.filterProps(e),X=DA.filterProps(e);return i(DA,Ie({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},X,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(ae.value),default:()=>a.default?a.default(ae.value):v(ze,null,[a.colgroup?.(ae.value),!e.hideDefaultHeader&&v("thead",{key:"thead"},[i(FA,J,a)]),a.thead?.(ae.value),!e.hideDefaultBody&&v("tbody",null,[a["body.prepend"]?.(ae.value),a.body?a.body(ae.value):i(PA,Ie(n,ie,{items:te.value}),a),a["body.append"]?.(ae.value)]),a.tbody?.(ae.value),a.tfoot?.(ae.value)]),bottom:()=>a.bottom?a.bottom(ae.value):!e.hideDefaultFooter&&v(ze,null,[i(Fi,null,null),i(Ag,j,{prepend:a["footer.prepend"]})])})}),{}}}),DJe=ot({...Wa(O4(),["hideDefaultFooter"]),...T4(),...s7(),...Nh()},"VDataTableVirtual"),UJe=St()({name:"VDataTableVirtual",props:DJe(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=I4(e),{sortBy:s,multiSort:o,mustSort:l}=pb(e),{disableSort:c}=MA(e),{columns:f,headers:d,filterFunctions:A,sortFunctions:m,sortRawFunctions:p}=V4(e,{groupBy:r,showSelect:qe(()=>e.showSelect),showExpand:qe(()=>e.showExpand)}),{items:h}=M4(e,f),y=qe(()=>e.search),{filteredItems:g}=Vh(e,h,y,{transform:X=>X.columns,customKeyFilter:A}),{toggleSort:_}=gb({sortBy:s,multiSort:o,mustSort:l}),{sortByWithGroups:b,opened:S,extractRows:B,isGroupOpen:F,toggleGroup:T}=fb({groupBy:r,sortBy:s,disableSort:c}),{sortedItems:E}=U4(e,g,b,{transform:X=>({...X.raw,...X.columns}),sortFunctions:m,sortRawFunctions:p}),{flatItems:x}=Ab(E,r,S),C=ee(()=>B(x.value)),{isSelected:D,select:U,selectAll:L,toggleSelect:H,someSelected:oe,allSelected:de}=vb(e,{allItems:C,currentPage:C}),{isExpanded:te,toggleExpand:q}=db(e),{containerRef:ce,markerRef:le,paddingTop:Z,paddingBottom:ne,computedItems:G,handleItemResize:W,handleScroll:Q,handleScrollend:O,calculateVisibleItems:ae,scrollToIndex:j}=o7(e,x),J=ee(()=>G.value.map(X=>X.raw));mb({sortBy:s,page:Gt(1),itemsPerPage:Gt(-1),groupBy:r,search:y}),kr({VDataTableRows:{hideNoData:qe(()=>e.hideNoData),noDataText:qe(()=>e.noDataText),loading:qe(()=>e.loading),loadingText:qe(()=>e.loadingText)}});const ie=ee(()=>({sortBy:s.value,toggleSort:_,someSelected:oe.value,allSelected:de.value,isSelected:D,select:U,selectAll:L,toggleSelect:H,isExpanded:te,toggleExpand:q,isGroupOpen:F,toggleGroup:T,items:C.value.map(X=>X.raw),internalItems:C.value,groupedItems:x.value,columns:f.value,headers:d.value}));return It(()=>{const X=FA.filterProps(e),fe=PA.filterProps(e),M=DA.filterProps(e);return i(DA,Ie({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},M,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(ie.value),wrapper:()=>v("div",{ref:ce,onScrollPassive:Q,onScrollend:O,class:"v-table__wrapper",style:{height:Zt(e.height)}},[v("table",null,[a.colgroup?.(ie.value),!e.hideDefaultHeader&&v("thead",{key:"thead"},[i(FA,X,a)]),a.thead?.(ie.value),!e.hideDefaultBody&&v("tbody",{key:"tbody"},[v("tr",{ref:le,style:{height:Zt(Z.value),border:0}},[v("td",{colspan:f.value.length,style:{height:0,border:0}},null)]),a["body.prepend"]?.(ie.value),i(PA,Ie(n,fe,{items:J.value}),{...a,item:z=>i(r7,{key:z.internalItem.index,renderless:!0,"onUpdate:height":se=>W(z.internalItem.index,se)},{default:se=>{let{itemRef:be}=se;return a.item?.({...z,itemRef:be})??i(L4,Ie(z.props,{ref:be,key:z.internalItem.index,index:z.internalItem.index}),a)}})}),a["body.append"]?.(ie.value),v("tr",{style:{height:Zt(ne.value),border:0}},[v("td",{colspan:f.value.length,style:{height:0,border:0}},null)])]),a.tbody?.(ie.value),a.tfoot?.(ie.value)])]),bottom:()=>a.bottom?.(ie.value)})}),{calculateVisibleItems:ae,scrollToIndex:j}}}),RJe=ot({itemsLength:{type:[Number,String],required:!0},...F4(),...O4(),...R4()},"VDataTableServer"),NJe=St()({name:"VDataTableServer",props:RJe(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=I4(e),{sortBy:s,multiSort:o,mustSort:l}=pb(e),{page:c,itemsPerPage:f}=P4(e),{disableSort:d}=MA(e),A=ee(()=>parseInt(e.itemsLength,10)),{columns:m,headers:p}=V4(e,{groupBy:r,showSelect:qe(()=>e.showSelect),showExpand:qe(()=>e.showExpand)}),{items:h}=M4(e,m),{toggleSort:y}=gb({sortBy:s,multiSort:o,mustSort:l,page:c}),{opened:g,isGroupOpen:_,toggleGroup:b,extractRows:S}=fb({groupBy:r,sortBy:s,disableSort:d}),{pageCount:B,setItemsPerPage:F}=D4({page:c,itemsPerPage:f,itemsLength:A}),{flatItems:T}=Ab(h,r,g),{isSelected:E,select:x,selectAll:C,toggleSelect:D,someSelected:U,allSelected:L}=vb(e,{allItems:h,currentPage:h}),{isExpanded:H,toggleExpand:oe}=db(e),de=ee(()=>S(h.value));mb({page:c,itemsPerPage:f,sortBy:s,groupBy:r,search:qe(()=>e.search)}),za("v-data-table",{toggleSort:y,sortBy:s}),kr({VDataTableRows:{hideNoData:qe(()=>e.hideNoData),noDataText:qe(()=>e.noDataText),loading:qe(()=>e.loading),loadingText:qe(()=>e.loadingText)}});const te=ee(()=>({page:c.value,itemsPerPage:f.value,sortBy:s.value,pageCount:B.value,toggleSort:y,setItemsPerPage:F,someSelected:U.value,allSelected:L.value,isSelected:E,select:x,selectAll:C,toggleSelect:D,isExpanded:H,toggleExpand:oe,isGroupOpen:_,toggleGroup:b,items:de.value.map(q=>q.raw),internalItems:de.value,groupedItems:T.value,columns:m.value,headers:p.value}));It(()=>{const q=Ag.filterProps(e),ce=FA.filterProps(e),le=PA.filterProps(e),Z=DA.filterProps(e);return i(DA,Ie({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Z,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(te.value),default:()=>a.default?a.default(te.value):v(ze,null,[a.colgroup?.(te.value),!e.hideDefaultHeader&&v("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[i(FA,ce,a)]),a.thead?.(te.value),!e.hideDefaultBody&&v("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a["body.prepend"]?.(te.value),a.body?a.body(te.value):i(PA,Ie(n,le,{items:T.value}),a),a["body.append"]?.(te.value)]),a.tbody?.(te.value),a.tfoot?.(te.value)]),bottom:()=>a.bottom?a.bottom(te.value):!e.hideDefaultFooter&&v(ze,null,[i(Fi,null,null),i(Ag,q,{prepend:a["footer.prepend"]})])})})}}),VJe=ot({fluid:{type:Boolean,default:!1},...nn(),...$r(),...$n()},"VContainer"),LJe=St()({name:"VContainer",props:VJe(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=as(),{dimensionStyles:r}=Qr(e);return It(()=>i(e.tag,{class:lt(["v-container",{"v-container--fluid":e.fluid},a.value,e.class]),style:Mt([r.value,e.style])},n)),{}}}),Y7=fw.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),X7=fw.reduce((e,t)=>{const n="offset"+Qu(t);return e[n]={type:[String,Number],default:null},e},{}),J7=fw.reduce((e,t)=>{const n="order"+Qu(t);return e[n]={type:[String,Number],default:null},e},{}),ON={col:Object.keys(Y7),offset:Object.keys(X7),order:Object.keys(J7)};function MJe(e,t,n){let a=e;if(!(n==null||n===!1)){if(t){const r=t.replace(e,"");a+=`-${r}`}return e==="col"&&(a="v-"+a),e==="col"&&(n===""||n===!0)||(a+=`-${n}`),a.toLowerCase()}}const OJe=["auto","start","end","center","baseline","stretch"],HJe=ot({cols:{type:[Boolean,String,Number],default:!1},...Y7,offset:{type:[String,Number],default:null},...X7,order:{type:[String,Number],default:null},...J7,alignSelf:{type:String,default:null,validator:e=>OJe.includes(e)},...nn(),...$n()},"VCol"),$Je=St()({name:"VCol",props:HJe(),setup(e,t){let{slots:n}=t;const a=ee(()=>{const r=[];let s;for(s in ON)ON[s].forEach(l=>{const c=e[l],f=MJe(s,l,c);f&&r.push(f)});const o=r.some(l=>l.startsWith("v-col-"));return r.push({"v-col":!o||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),r});return()=>nu(e.tag,{class:[a.value,e.class],style:e.style},n.default?.())}}),H4=["start","end","center"],Z7=["space-between","space-around","space-evenly"];function $4(e,t){return fw.reduce((n,a)=>{const r=e+Qu(a);return n[r]=t(),n},{})}const QJe=[...H4,"baseline","stretch"],eG=e=>QJe.includes(e),tG=$4("align",()=>({type:String,default:null,validator:eG})),GJe=[...H4,...Z7],nG=e=>GJe.includes(e),aG=$4("justify",()=>({type:String,default:null,validator:nG})),zJe=[...H4,...Z7,"stretch"],rG=e=>zJe.includes(e),sG=$4("alignContent",()=>({type:String,default:null,validator:rG})),HN={align:Object.keys(tG),justify:Object.keys(aG),alignContent:Object.keys(sG)},WJe={align:"align",justify:"justify",alignContent:"align-content"};function KJe(e,t,n){let a=WJe[e];if(n!=null){if(t){const r=t.replace(e,"");a+=`-${r}`}return a+=`-${n}`,a.toLowerCase()}}const jJe=ot({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:eG},...tG,justify:{type:String,default:null,validator:nG},...aG,alignContent:{type:String,default:null,validator:rG},...sG,...nn(),...$n()},"VRow"),qJe=St()({name:"VRow",props:jJe(),setup(e,t){let{slots:n}=t;const a=ee(()=>{const r=[];let s;for(s in HN)HN[s].forEach(o=>{const l=e[o],c=KJe(s,o,l);c&&r.push(c)});return r.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),r});return()=>nu(e.tag,{class:["v-row",a.value,e.class],style:e.style},n.default?.())}}),oG=qc("v-spacer","div","VSpacer"),iG=ot({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:vn,default:"$next"},prevIcon:{type:vn,default:"$prev"},modeIcon:{type:vn,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),_k=St()({name:"VDatePickerControls",props:iG(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Ka(),r=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),s=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),o=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),l=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function c(){n("click:prev")}function f(){n("click:next")}function d(){n("click:year")}function A(){n("click:month")}return It(()=>v("div",{class:lt(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":Zt(e.controlHeight)}},[i(ta,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:r.value,text:e.text,variant:"text",rounded:!0,onClick:A},null),i(ta,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:s.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.selectYear"),onClick:d},null),i(oG,null,null),v("div",{class:"v-date-picker-controls__month"},[i(ta,{"data-testid":"prev-month",disabled:o.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:c},null),i(ta,{"data-testid":"next-month",disabled:l.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:f},null)])])),{}}}),YJe=ot({appendIcon:vn,color:String,header:String,transition:String,onClick:Os()},"VDatePickerHeader"),wk=St()({name:"VDatePickerHeader",props:YJe(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:a}=t;const{backgroundColorClasses:r,backgroundColorStyles:s}=La(()=>e.color);function o(){n("click")}function l(){n("click:append")}return It(()=>{const c=!!(a.default||e.header),f=!!(a.append||e.appendIcon);return v("div",{class:lt(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},r.value]),style:Mt(s.value),onClick:o},[a.prepend&&v("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),c&&i(So,{key:"content",name:e.transition},{default:()=>[v("div",{key:e.header,class:"v-date-picker-header__content"},[a.default?.()??e.header])]}),f&&v("div",{class:"v-date-picker-header__append"},[a.append?i(Gn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[a.append?.()]}):i(ta,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:l},null)])])}),{}}}),XJe=ot({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function JJe(e){const t=xg(),n=fn(e,"modelValue",[],p=>xr(p).map(h=>t.date(h))),a=ee(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),r=fn(e,"year",void 0,p=>{const h=p!=null?Number(p):t.getYear(a.value);return t.startOfYear(t.setYear(t.date(),h))},p=>t.getYear(p)),s=fn(e,"month",void 0,p=>{const h=p!=null?Number(p):t.getMonth(a.value),y=t.setYear(t.startOfMonth(t.date()),t.getYear(r.value));return t.setMonth(y,h)},p=>t.getMonth(p)),o=ee(()=>{const p=t.toJsDate(t.startOfWeek(t.date(),e.firstDayOfWeek)).getDay();return t.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((h,y)=>e.weekdays.includes((y+p)%7))}),l=ee(()=>{const p=t.getWeekArray(s.value,e.firstDayOfWeek),h=p.flat(),y=42;if(e.weeksInMonth==="static"&&h.length<y){const g=h[h.length-1];let _=[];for(let b=1;b<=y-h.length;b++)_.push(t.addDays(g,b)),b%7===0&&(p.push(_),_=[])}return p});function c(p,h){return p.filter(y=>e.weekdays.includes(t.toJsDate(y).getDay())).map((y,g)=>{const _=t.toISO(y),b=!t.isSameMonth(y,s.value),S=t.isSameDay(y,t.startOfMonth(s.value)),B=t.isSameDay(y,t.endOfMonth(s.value)),F=t.isSameDay(y,s.value),T=e.weekdays.length;return{date:y,formatted:t.format(y,"keyboardDate"),isAdjacent:b,isDisabled:m(y),isEnd:B,isHidden:b&&!e.showAdjacentMonths,isSame:F,isSelected:n.value.some(E=>t.isSameDay(y,E)),isStart:S,isToday:t.isSameDay(y,h),isWeekEnd:g%T===T-1,isWeekStart:g%T===0,isoDate:_,localized:t.format(y,"dayOfMonth"),month:t.getMonth(y),year:t.getYear(y)}})}const f=ee(()=>{const p=t.startOfWeek(a.value,e.firstDayOfWeek),h=[];for(let g=0;g<=6;g++)h.push(t.addDays(p,g));const y=t.date();return c(h,y)}),d=ee(()=>{const p=l.value.flat(),h=t.date();return c(p,h)}),A=ee(()=>l.value.map(p=>p.length?t.getWeek(p[0],e.firstDayOfWeek):null));function m(p){if(e.disabled)return!0;const h=t.date(p);return e.min&&t.isBefore(t.endOfDay(h),t.date(e.min))||e.max&&t.isAfter(h,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(y=>t.isSameDay(t.date(y),h)):typeof e.allowedDates=="function"?!e.allowedDates(h):!1}return{displayValue:a,daysInMonth:d,daysInWeek:f,genDays:c,model:n,weeksInMonth:l,weekdayLabels:o,weekNumbers:A}}const lG=ot({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Wa(XJe(),["displayValue"])},"VDatePickerMonth"),bk=St()({name:"VDatePickerMonth",props:lG(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=R(),{t:s}=Ka(),{daysInMonth:o,model:l,weekNumbers:c,weekdayLabels:f}=JJe(e),d=xg(),A=Gt(),m=Gt(),p=Gt(!1),h=qe(()=>p.value?e.reverseTransition:e.transition);e.multiple==="range"&&l.value.length>0&&(A.value=l.value[0],l.value.length>1&&(m.value=l.value[l.value.length-1]));const y=ee(()=>{const B=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return l.value.length>=B});Ge(o,(B,F)=>{F&&(p.value=d.isBefore(B[0].date,F[0].date))});function g(B){const F=d.startOfDay(B);if(l.value.length===0?A.value=void 0:l.value.length===1&&(A.value=l.value[0],m.value=void 0),!A.value)A.value=F,l.value=[A.value];else if(m.value)A.value=B,m.value=void 0,l.value=[A.value];else{if(d.isSameDay(F,A.value)){A.value=void 0,l.value=[];return}else d.isBefore(F,A.value)?(m.value=d.endOfDay(A.value),A.value=F):m.value=d.endOfDay(F);l.value=Hne(d,A.value,m.value)}}function _(B){const F=d.format(B.date,"fullDateWithWeekday"),T=B.isToday?"currentDate":"selectDate";return s(`$vuetify.datePicker.ariaLabel.${T}`,F)}function b(B){const F=l.value.findIndex(T=>d.isSameDay(T,B));if(F===-1)l.value=[...l.value,B];else{const T=[...l.value];T.splice(F,1),l.value=T}}function S(B){e.multiple==="range"?g(B):e.multiple?b(B):l.value=[B]}It(()=>v("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&v("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&v("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[N("")]),c.value.map(B=>v("div",{class:lt(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[B]))]),i(So,{name:h.value},{default:()=>[v("div",{ref:r,key:o.value[0].date?.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&f.value.map(B=>v("div",{class:lt(["v-date-picker-month__day","v-date-picker-month__weekday"])},[B])),o.value.map((B,F)=>{const T={props:{class:"v-date-picker-month__day-btn",color:B.isSelected||B.isToday?e.color:void 0,disabled:B.isDisabled,icon:!0,ripple:!1,text:B.localized,variant:B.isSelected?"flat":B.isToday?"outlined":"text","aria-label":_(B),"aria-current":B.isToday?"date":void 0,onClick:()=>S(B.date)},item:B,i:F};return y.value&&!B.isSelected&&(B.isDisabled=!0),v("div",{class:lt(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":B.isAdjacent,"v-date-picker-month__day--hide-adjacent":B.isHidden,"v-date-picker-month__day--selected":B.isSelected,"v-date-picker-month__day--week-end":B.isWeekEnd,"v-date-picker-month__day--week-start":B.isWeekStart}]),"data-v-date":B.isDisabled?void 0:B.isoDate},[(e.showAdjacentMonths||!B.isAdjacent)&&(a.day?.(T)??i(ta,T.props,null))])})])]})]))}}),uG=ot({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),xk=St()({name:"VDatePickerMonths",props:uG(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=xg(),s=fn(e,"modelValue"),o=ee(()=>{let c=r.startOfYear(r.date());return e.year&&(c=r.setYear(c,e.year)),Bi(12).map(f=>{const d=r.format(c,"monthShort"),A=r.format(c,"month"),m=!!(!l(f)||e.min&&r.isAfter(r.startOfMonth(r.date(e.min)),c)||e.max&&r.isAfter(c,r.startOfMonth(r.date(e.max))));return c=r.getNextMonth(c),{isDisabled:m,text:d,label:A,value:f}})});Er(()=>{s.value=s.value??r.getMonth(r.date())});function l(c){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(c):typeof e.allowedMonths=="function"?e.allowedMonths(c):!0}return It(()=>v("div",{class:"v-date-picker-months",style:{height:Zt(e.height)}},[v("div",{class:"v-date-picker-months__content"},[o.value.map((c,f)=>{const d={active:s.value===f,ariaLabel:c.label,color:s.value===f?e.color:void 0,disabled:c.isDisabled,rounded:!0,text:c.text,variant:s.value===c.value?"flat":"text",onClick:()=>A(f)};function A(m){if(s.value===m){n("update:modelValue",s.value);return}s.value=m}return a.month?.({month:c,i:f,props:d})??i(ta,Ie({key:"month"},d),null)})])])),{}}}),cG=ot({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),Ck=St()({name:"VDatePickerYears",props:cG(),directives:{vIntersect:Jl},emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=xg(),s=fn(e,"modelValue"),o=ee(()=>{const d=r.getYear(r.date());let A=d-100,m=d+52;e.min&&(A=r.getYear(r.date(e.min))),e.max&&(m=r.getYear(r.date(e.max)));let p=r.startOfYear(r.date());return p=r.setYear(p,A),Bi(m-A+1,A).map(h=>{const y=r.format(p,"year");return p=r.setYear(p,r.getYear(p)+1),{text:y,value:h,isDisabled:!f(h)}})});Er(()=>{s.value=s.value??r.getYear(r.date())});const l=N_();function c(){l.el?.focus(),l.el?.scrollIntoView({block:"center"})}function f(d){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(d):typeof e.allowedYears=="function"?e.allowedYears(d):!0}return It(()=>Sa(v("div",{class:"v-date-picker-years",style:{height:Zt(e.height)}},[v("div",{class:"v-date-picker-years__content"},[o.value.map((d,A)=>{const m={ref:s.value===d.value?l:void 0,active:s.value===d.value,color:s.value===d.value?e.color:void 0,rounded:!0,text:d.text,disabled:d.isDisabled,variant:s.value===d.value?"flat":"text",onClick:()=>{if(s.value===d.value){n("update:modelValue",s.value);return}s.value=d.value}};return a.year?.({year:d,i:A,props:m})??i(ta,Ie({key:"month"},m),null)})])]),[[Jl,{handler:c},null,{once:!0}]])),{}}}),ZJe=ot({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...iG(),...lG({weeksInMonth:"static"}),...Wa(uG(),["modelValue"]),...Wa(cG(),["modelValue"]),...cb({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),eZe=St()({name:"VDatePicker",props:ZJe(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=xg(),{t:s}=Ka(),{rtlClasses:o}=as(),l=fn(e,"modelValue",void 0,ce=>xr(ce).map(le=>r.date(le)),ce=>e.multiple?ce:ce[0]),c=fn(e,"viewMode"),f=ee(()=>{const ce=r.date(e.min);return e.min&&r.isValid(ce)?ce:null}),d=ee(()=>{const ce=r.date(e.max);return e.max&&r.isValid(ce)?ce:null}),A=ee(()=>{const ce=r.date();let le=ce;return l.value?.[0]?le=r.date(l.value[0]):f.value&&r.isBefore(ce,f.value)?le=f.value:d.value&&r.isAfter(ce,d.value)&&(le=d.value),le&&r.isValid(le)?le:ce}),m=qe(()=>e.headerColor??e.color),p=fn(e,"month"),h=ee({get:()=>Number(p.value??r.getMonth(r.startOfMonth(A.value))),set:ce=>p.value=ce}),y=fn(e,"year"),g=ee({get:()=>Number(y.value??r.getYear(r.startOfYear(r.setMonth(A.value,h.value)))),set:ce=>y.value=ce}),_=Gt(!1),b=ee(()=>e.multiple&&l.value.length>1?s("$vuetify.datePicker.itemsSelected",l.value.length):l.value[0]&&r.isValid(l.value[0])?r.format(r.date(l.value[0]),"normalDateWithWeekday"):s(e.header)),S=ee(()=>{let ce=r.date();return ce=r.setDate(ce,1),ce=r.setMonth(ce,h.value),ce=r.setYear(ce,g.value),r.format(ce,"monthAndYear")}),B=qe(()=>`date-picker-header${_.value?"-reverse":""}-transition`),F=ee(()=>{if(e.disabled)return!0;const ce=[];if(c.value!=="month")ce.push("prev","next");else{let le=r.date();if(le=r.startOfMonth(le),le=r.setMonth(le,h.value),le=r.setYear(le,g.value),f.value){const Z=r.addDays(r.startOfMonth(le),-1);r.isAfter(f.value,Z)&&ce.push("prev")}if(d.value){const Z=r.addDays(r.endOfMonth(le),1);r.isAfter(Z,d.value)&&ce.push("next")}}return ce}),T=ee(()=>e.allowedYears||C),E=ee(()=>e.allowedMonths||D);function x(ce,le){const Z=e.allowedDates;if(typeof Z!="function")return!0;const ne=r.getDiff(le,ce,"days");for(let G=0;G<ne;G++)if(Z(r.addDays(ce,G)))return!0;return!1}function C(ce){if(typeof e.allowedDates=="function"){const le=r.parseISO(`${ce}-01-01`);return x(le,r.endOfYear(le))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const le of e.allowedDates)if(r.getYear(r.date(le))===ce)return!0;return!1}return!0}function D(ce){if(typeof e.allowedDates=="function"){const le=String(ce+1).padStart(2,"0"),Z=r.parseISO(`${g.value}-${le}-01`);return x(Z,r.endOfMonth(Z))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const le of e.allowedDates)if(r.getYear(r.date(le))===g.value&&r.getMonth(r.date(le))===ce)return!0;return!1}return!0}function U(){h.value<11?h.value++:(g.value++,h.value=0,q()),te()}function L(){h.value>0?h.value--:(g.value--,h.value=11,q()),te()}function H(){c.value="month"}function oe(){c.value=c.value==="months"?"month":"months"}function de(){c.value=c.value==="year"?"month":"year"}function te(){c.value==="months"&&oe()}function q(){c.value==="year"&&de()}return Ge(l,(ce,le)=>{const Z=xr(le),ne=xr(ce);if(!ne.length)return;const G=r.date(Z[Z.length-1]),W=r.date(ne[ne.length-1]),Q=r.getMonth(W),O=r.getYear(W);Q!==h.value&&(h.value=Q,te()),O!==g.value&&(g.value=O,q()),_.value=r.isBefore(G,W)}),It(()=>{const ce=rh.filterProps(e),le=_k.filterProps(e),Z=wk.filterProps(e),ne=bk.filterProps(e),G=Wa(xk.filterProps(e),["modelValue"]),W=Wa(Ck.filterProps(e),["modelValue"]),Q={color:m.value,header:b.value,transition:B.value};return i(rh,Ie(ce,{color:m.value,class:["v-date-picker",`v-date-picker--${c.value}`,{"v-date-picker--show-week":e.showWeek},o.value,e.class],style:e.style}),{title:()=>a.title?.()??v("div",{class:"v-date-picker__title"},[s(e.title)]),header:()=>a.header?i(Gn,{defaults:{VDatePickerHeader:{...Q}}},{default:()=>[a.header?.(Q)]}):i(wk,Ie({key:"header"},Z,Q,{onClick:c.value!=="month"?H:void 0}),{prepend:a.prepend,append:a.append}),default:()=>v(ze,null,[i(_k,Ie(le,{disabled:F.value,text:S.value,"onClick:next":U,"onClick:prev":L,"onClick:month":oe,"onClick:year":de}),null),i(sg,{hideOnLeave:!0},{default:()=>[c.value==="months"?i(xk,Ie({key:"date-picker-months"},G,{modelValue:h.value,"onUpdate:modelValue":[O=>h.value=O,te],min:f.value,max:d.value,year:g.value,allowedMonths:E.value}),{month:a.month}):c.value==="year"?i(Ck,Ie({key:"date-picker-years"},W,{modelValue:g.value,"onUpdate:modelValue":[O=>g.value=O,q],min:f.value,max:d.value,allowedYears:T.value}),{year:a.year}):i(bk,Ie({key:"date-picker-month"},ne,{modelValue:l.value,"onUpdate:modelValue":O=>l.value=O,month:h.value,"onUpdate:month":[O=>h.value=O,te],year:g.value,"onUpdate:year":[O=>g.value=O,q],min:f.value,max:d.value}),{day:a.day})]})]),actions:a.actions})}),{}}}),tZe=ot({actionText:String,bgColor:String,color:String,icon:vn,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...nn(),...$r(),...Xu({size:void 0}),...Aa()},"VEmptyState"),nZe=St()({name:"VEmptyState",props:tZe(),emits:{"click:action":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{themeClasses:r}=Ra(e),{backgroundColorClasses:s,backgroundColorStyles:o}=La(()=>e.bgColor),{dimensionStyles:l}=Qr(e),{displayClasses:c}=Vi();function f(d){n("click:action",d)}return It(()=>{const d=!!(a.actions||e.actionText),A=!!(a.headline||e.headline),m=!!(a.title||e.title),p=!!(a.text||e.text),h=!!(a.media||e.image||e.icon),y=e.size||(e.image?200:96);return v("div",{class:lt(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},r.value,s.value,c.value,e.class]),style:Mt([o.value,l.value,e.style])},[h&&v("div",{key:"media",class:"v-empty-state__media"},[a.media?i(Gn,{key:"media-defaults",defaults:{VImg:{src:e.image,height:y},VIcon:{size:y,icon:e.icon}}},{default:()=>[a.media()]}):v(ze,null,[e.image?i(zc,{key:"image",src:e.image,height:y},null):e.icon?i(Da,{key:"icon",color:e.color,size:y,icon:e.icon},null):void 0])]),A&&v("div",{key:"headline",class:"v-empty-state__headline"},[a.headline?.()??e.headline]),m&&v("div",{key:"title",class:"v-empty-state__title"},[a.title?.()??e.title]),p&&v("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Zt(e.textWidth)}},[a.text?.()??e.text]),a.default&&v("div",{key:"content",class:"v-empty-state__content"},[a.default()]),d&&v("div",{key:"actions",class:"v-empty-state__actions"},[i(Gn,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[a.actions?.({props:{onClick:f}})??i(ta,{onClick:f},null)]})])])}),{}}}),mg=Symbol.for("vuetify:v-expansion-panel"),dG=ot({...nn(),...b4()},"VExpansionPanelText"),Sk=St()({name:"VExpansionPanelText",props:dG(),setup(e,t){let{slots:n}=t;const a=Pn(mg);if(!a)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:r,onAfterLeave:s}=x4(e,a.isSelected);return It(()=>i(tb,{onAfterLeave:s},{default:()=>[Sa(v("div",{class:lt(["v-expansion-panel-text",e.class]),style:Mt(e.style)},[n.default&&r.value&&v("div",{class:"v-expansion-panel-text__wrapper"},[n.default?.()])]),[[fi,a.isSelected.value]])]})),{}}}),fG=ot({color:String,expandIcon:{type:vn,default:"$expand"},collapseIcon:{type:vn,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...nn(),...$r()},"VExpansionPanelTitle"),Ek=St()({name:"VExpansionPanelTitle",directives:{vRipple:Po},props:fG(),setup(e,t){let{slots:n}=t;const a=Pn(mg);if(!a)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:s}=La(()=>e.color),{dimensionStyles:o}=Qr(e),l=ee(()=>({collapseIcon:e.collapseIcon,disabled:a.disabled.value,expanded:a.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),c=qe(()=>a.isSelected.value?e.collapseIcon:e.expandIcon);return It(()=>Sa(v("button",{class:lt(["v-expansion-panel-title",{"v-expansion-panel-title--active":a.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},r.value,e.class]),style:Mt([s.value,o.value,e.style]),type:"button",tabindex:a.disabled.value?-1:void 0,disabled:a.disabled.value,"aria-expanded":a.isSelected.value,onClick:e.readonly?void 0:a.toggle},[v("span",{class:"v-expansion-panel-title__overlay"},null),n.default?.(l.value),!e.hideActions&&i(Gn,{defaults:{VIcon:{icon:c.value}}},{default:()=>[v("span",{class:"v-expansion-panel-title__icon"},[n.actions?.(l.value)??i(Da,null,null)])]})]),[[Po,e.ripple]])),{}}}),AG=ot({title:String,text:String,bgColor:String,...rs(),...rm(),...dr(),...$n(),...fG(),...dG()},"VExpansionPanel"),aZe=St()({name:"VExpansionPanel",props:AG(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=sm(e,mg),{backgroundColorClasses:r,backgroundColorStyles:s}=La(()=>e.bgColor),{elevationClasses:o}=Is(e),{roundedClasses:l}=Tr(e),c=qe(()=>a?.disabled.value||e.disabled),f=ee(()=>a.group.items.value.reduce((m,p,h)=>(a.group.selected.value.includes(p.id)&&m.push(h),m),[])),d=ee(()=>{const m=a.group.items.value.findIndex(p=>p.id===a.id);return!a.isSelected.value&&f.value.some(p=>p-m===1)}),A=ee(()=>{const m=a.group.items.value.findIndex(p=>p.id===a.id);return!a.isSelected.value&&f.value.some(p=>p-m===-1)});return za(mg,a),It(()=>{const m=!!(n.text||e.text),p=!!(n.title||e.title),h=Ek.filterProps(e),y=Sk.filterProps(e);return i(e.tag,{class:lt(["v-expansion-panel",{"v-expansion-panel--active":a.isSelected.value,"v-expansion-panel--before-active":d.value,"v-expansion-panel--after-active":A.value,"v-expansion-panel--disabled":c.value},l.value,r.value,e.class]),style:Mt([s.value,e.style])},{default:()=>[v("div",{class:lt(["v-expansion-panel__shadow",...o.value])},null),i(Gn,{defaults:{VExpansionPanelTitle:{...h},VExpansionPanelText:{...y}}},{default:()=>[p&&i(Ek,{key:"title"},{default:()=>[n.title?n.title():e.title]}),m&&i(Sk,{key:"text"},{default:()=>[n.text?n.text():e.text]}),n.default?.()]})]})}),{groupItem:a}}}),rZe=["default","accordion","inset","popout"],sZe=ot({flat:Boolean,...am(),...jc(AG(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Aa(),...nn(),...$n(),variant:{type:String,default:"default",validator:e=>rZe.includes(e)}},"VExpansionPanels"),oZe=St()({name:"VExpansionPanels",props:sZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:a,prev:r}=pf(e,mg),{themeClasses:s}=Ra(e),o=qe(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return kr({VExpansionPanel:{bgColor:qe(()=>e.bgColor),collapseIcon:qe(()=>e.collapseIcon),color:qe(()=>e.color),eager:qe(()=>e.eager),elevation:qe(()=>e.elevation),expandIcon:qe(()=>e.expandIcon),focusable:qe(()=>e.focusable),hideActions:qe(()=>e.hideActions),readonly:qe(()=>e.readonly),ripple:qe(()=>e.ripple),rounded:qe(()=>e.rounded),static:qe(()=>e.static)}}),It(()=>i(e.tag,{class:lt(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},s.value,o.value,e.class]),style:Mt(e.style)},{default:()=>[n.default?.({prev:r,next:a})]})),{next:a,prev:r}}}),iZe=ot({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...Wa(rb({active:!0}),["location"]),...QA(),...Jc(),...iu({transition:"fab-transition"})},"VFab"),lZe=St()({name:"VFab",props:iZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"modelValue"),r=Gt(56),s=R(),{resizeRef:o}=Kl(A=>{A.length&&(r.value=A[0].target.clientHeight)}),l=qe(()=>e.app||e.absolute),c=ee(()=>l.value?e.location?.split(" ").shift()??"bottom":!1),f=ee(()=>l.value?e.location?.split(" ")[1]??"end":!1);ko(()=>e.app,()=>{const A=GA({id:e.name,order:ee(()=>parseInt(e.order,10)),position:c,layoutSize:ee(()=>e.layout?r.value+24:0),elementSize:ee(()=>r.value+24),active:ee(()=>e.app&&a.value),absolute:qe(()=>e.absolute)});Er(()=>{s.value=A.layoutItemStyles.value})});const d=R();return It(()=>{const A=ta.filterProps(e);return v("div",{ref:d,class:lt(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${c.value}`]:l.value,[`v-fab--${f.value}`]:l.value},e.class]),style:Mt([e.app?{...s.value}:{height:e.absolute?"100%":"inherit"},e.style])},[v("div",{class:"v-fab__container"},[i(So,{appear:e.appear,transition:e.transition},{default:()=>[Sa(i(ta,Ie({ref:o},A,{active:void 0,location:void 0}),n),[[fi,e.active]])]})])])}),{}}});function uZe(){function e(n){return[...n.dataTransfer?.items??[]].filter(r=>r.kind==="file").map(r=>r.webkitGetAsEntry()).filter(Boolean).length>0||[...n.dataTransfer?.files??[]].length>0}async function t(n){const a=[],r=[...n.dataTransfer?.items??[]].filter(s=>s.kind==="file").map(s=>s.webkitGetAsEntry()).filter(Boolean);if(r.length)for(const s of r){const o=await mG(s,vG(".",s));a.push(...o.map(l=>l.file))}else a.push(...n.dataTransfer?.files??[]);return a}return{handleDrop:t,hasFilesOrFolders:e}}function mG(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((n,a)=>{e.isFile?e.file(s=>n([{file:s,path:t}]),a):e.isDirectory&&e.createReader().readEntries(async s=>{const o=[];for(const l of s)o.push(...await mG(l,vG(t,l)));n(o)})})}function vG(e,t){return t.isDirectory?`${e}/${t.name}`:e}const cZe=ot({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...ed({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>xr(e).every(t=>t!=null&&typeof t=="object")},...e1({clearable:!0})},"VFileInput"),dZe=St()({name:"VFileInput",inheritAttrs:!1,props:cZe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{t:s}=Ka(),o=fn(e,"modelValue",e.modelValue,de=>xr(de),de=>!e.multiple&&Array.isArray(de)?de[0]:de),{isFocused:l,focus:c,blur:f}=Zc(e),d=ee(()=>typeof e.showSize!="boolean"?e.showSize:void 0),A=ee(()=>(o.value??[]).reduce((de,te)=>{let{size:q=0}=te;return de+q},0)),m=ee(()=>eD(A.value,d.value)),p=ee(()=>(o.value??[]).map(de=>{const{name:te="",size:q=0}=de;return e.showSize?`${te} (${eD(q,d.value)})`:te})),h=ee(()=>{const de=o.value?.length??0;return e.showSize?s(e.counterSizeString,de,m.value):s(e.counterString,de)}),y=R(),g=R(),_=R(),b=qe(()=>l.value||e.active),S=ee(()=>["plain","underlined"].includes(e.variant)),B=Gt(!1),{handleDrop:F,hasFilesOrFolders:T}=uZe();function E(){_.value!==document.activeElement&&_.value?.focus(),l.value||c()}function x(de){_.value?.click()}function C(de){a("mousedown:control",de)}function D(de){_.value?.click(),a("click:control",de)}function U(de){de.stopPropagation(),E(),Cn(()=>{o.value=[],cw(e["onClick:clear"],de)})}function L(de){de.preventDefault(),de.stopImmediatePropagation(),B.value=!0}function H(de){de.preventDefault(),B.value=!1}async function oe(de){if(de.preventDefault(),de.stopImmediatePropagation(),B.value=!1,!_.value||!T(de))return;const te=new DataTransfer;for(const q of await F(de))te.items.add(q);_.value.files=te.files,_.value.dispatchEvent(new Event("change",{bubbles:!0}))}return Ge(o,de=>{(!Array.isArray(de)||!de.length)&&_.value&&(_.value.value="")}),It(()=>{const de=!!(r.counter||e.counter),te=!!(de||r.details),[q,ce]=ff(n),{modelValue:le,...Z}=so.filterProps(e),ne={...uf.filterProps(e),"onClick:clear":U};return i(so,Ie({ref:y,modelValue:e.multiple?o.value:o.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":B.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":S.value},e.class],style:e.style,"onClick:prepend":x},q,Z,{centerAffix:!S.value,focused:l.value}),{...r,default:G=>{let{id:W,isDisabled:Q,isDirty:O,isReadonly:ae,isValid:j,hasDetails:J}=G;return i(uf,Ie({ref:g,prependIcon:e.prependIcon,onMousedown:C,onClick:D,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ne,{id:W.value,active:b.value||O.value,dirty:O.value||e.dirty,disabled:Q.value,focused:l.value,details:J.value,error:j.value===!1,onDragover:L,onDrop:oe}),{...r,default:ie=>{let{props:{class:X,...fe}}=ie;return v(ze,null,[v("input",Ie({ref:_,type:"file",readonly:ae.value,disabled:Q.value,multiple:e.multiple,name:e.name,onClick:M=>{M.stopPropagation(),ae.value&&M.preventDefault(),E()},onChange:M=>{if(!M.target)return;const z=M.target;o.value=[...z.files??[]]},onDragleave:H,onFocus:E,onBlur:f},fe,ce),null),v("div",{class:lt(X)},[!!o.value?.length&&!e.hideInput&&(r.selection?r.selection({fileNames:p.value,totalBytes:A.value,totalBytesReadable:m.value}):e.chips?p.value.map(M=>i(Uh,{key:M,size:"small",text:M},null)):p.value.join(", "))])])}})},details:te?G=>v(ze,null,[r.details?.(G),de&&v(ze,null,[v("span",null,null),i(ob,{active:!!o.value?.length,value:h.value,disabled:e.disabled},r.counter)])]):void 0})}),Fs({},y,g,_)}}),fZe=ot({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Yo(),...nn(),...rs(),...QA(),...dr(),...$n({tag:"footer"}),...Aa()},"VFooter"),AZe=St()({name:"VFooter",props:fZe(),setup(e,t){let{slots:n}=t;const a=R(),{themeClasses:r}=Ra(e),{backgroundColorClasses:s,backgroundColorStyles:o}=La(()=>e.color),{borderClasses:l}=vi(e),{elevationClasses:c}=Is(e),{roundedClasses:f}=Tr(e),d=Gt(32),{resizeRef:A}=Kl(p=>{p.length&&(d.value=p[0].target.clientHeight)}),m=ee(()=>e.height==="auto"?d.value:parseInt(e.height,10));return ko(()=>e.app,()=>{const p=GA({id:e.name,order:ee(()=>parseInt(e.order,10)),position:qe(()=>"bottom"),layoutSize:m,elementSize:ee(()=>e.height==="auto"?void 0:m.value),active:qe(()=>e.app),absolute:qe(()=>e.absolute)});Er(()=>{a.value=p.layoutItemStyles.value})}),It(()=>i(e.tag,{ref:A,class:lt(["v-footer",r.value,s.value,l.value,c.value,f.value,e.class]),style:Mt([o.value,e.app?a.value:{height:Zt(e.height)},e.style])},n)),{}}}),mZe=ot({...nn(),...Cqe()},"VForm"),vZe=St()({name:"VForm",props:mZe(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=Sqe(e),s=R();function o(c){c.preventDefault(),r.reset()}function l(c){const f=c,d=r.validate();f.then=d.then.bind(d),f.catch=d.catch.bind(d),f.finally=d.finally.bind(d),a("submit",f),f.defaultPrevented||d.then(A=>{let{valid:m}=A;m&&s.value?.submit()}),f.preventDefault()}return It(()=>v("form",{ref:s,class:lt(["v-form",e.class]),style:Mt(e.style),novalidate:!0,onReset:o,onSubmit:l},[n.default?.(r)])),Fs(r,s)}}),hZe=ot({disabled:Boolean,modelValue:{type:Boolean,default:null},..._4()},"VHover"),pZe=St()({name:"VHover",props:hZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"modelValue"),{runOpenDelay:r,runCloseDelay:s}=w4(e,o=>!e.disabled&&(a.value=o));return()=>n.default?.({isHovering:a.value,props:{onMouseenter:r,onMouseleave:s}})}}),gZe=ot({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...$r(),...$n()},"VInfiniteScroll"),$N=Ni({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:n}=t;const{intersectionRef:a,isIntersecting:r}=Wg();return Ge(r,async s=>{n("intersect",e.side,s)}),It(()=>v("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:a},[N("")])),{}}}),yZe=St()({name:"VInfiniteScroll",props:gZe(),emits:{load:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=R(),s=Gt("ok"),o=Gt("ok"),l=ee(()=>Zt(e.margin)),c=Gt(!1);function f(T){if(!r.value)return;const E=e.direction==="vertical"?"scrollTop":"scrollLeft";r.value[E]=T}function d(){if(!r.value)return 0;const T=e.direction==="vertical"?"scrollTop":"scrollLeft";return r.value[T]}function A(){if(!r.value)return 0;const T=e.direction==="vertical"?"scrollHeight":"scrollWidth";return r.value[T]}function m(){if(!r.value)return 0;const T=e.direction==="vertical"?"clientHeight":"clientWidth";return r.value[T]}An(()=>{r.value&&(e.side==="start"?f(A()):e.side==="both"&&f(A()/2-m()/2))});function p(T,E){T==="start"?s.value=E:T==="end"?o.value=E:T==="both"&&(s.value=E,o.value=E)}function h(T){return T==="start"?s.value:o.value}let y=0;function g(T,E){c.value=E,c.value&&_(T)}function _(T){if(e.mode!=="manual"&&!c.value)return;const E=h(T);if(!r.value||["empty","loading"].includes(E))return;y=A(),p(T,"loading");function x(C){p(T,C),Cn(()=>{C==="empty"||C==="error"||(C==="ok"&&T==="start"&&f(A()-y+d()),e.mode!=="manual"&&Cn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{_(T)})})})}))})}a("load",{side:T,done:x})}const{t:b}=Ka();function S(T,E){if(e.side!==T&&e.side!=="both")return;const x=()=>_(T),C={side:T,props:{onClick:x,color:e.color}};return E==="error"?n.error?.(C):E==="empty"?n.empty?.(C)??v("div",null,[b(e.emptyText)]):e.mode==="manual"?E==="loading"?n.loading?.(C)??i(BA,{indeterminate:!0,color:e.color},null):n["load-more"]?.(C)??i(ta,{variant:"outlined",color:e.color,onClick:x},{default:()=>[b(e.loadMoreText)]}):n.loading?.(C)??i(BA,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:B}=Qr(e);It(()=>{const T=e.tag,E=e.side==="start"||e.side==="both",x=e.side==="end"||e.side==="both",C=e.mode==="intersect";return i(T,{ref:r,class:lt(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":E,"v-infinite-scroll--end":x}]),style:Mt(B.value)},{default:()=>[v("div",{class:"v-infinite-scroll__side"},[S("start",s.value)]),E&&C&&i($N,{key:"start",side:"start",onIntersect:g,rootMargin:l.value},null),n.default?.(),x&&C&&i($N,{key:"end",side:"end",onIntersect:g,rootMargin:l.value},null),v("div",{class:"v-infinite-scroll__side"},[S("end",o.value)])]})});function F(T){const E=T??e.side;p(E,"ok"),Cn(()=>{f(A()-y+d()),e.mode!=="manual"&&Cn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{E==="both"?(_("start"),_("end")):_(E)})})})})})}return{reset:F}}}),hG=Symbol.for("vuetify:v-item-group"),_Ze=ot({...nn(),...am({selectedClass:"v-item--selected"}),...$n(),...Aa()},"VItemGroup"),wZe=St()({name:"VItemGroup",props:_Ze(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ra(e),{isSelected:r,select:s,next:o,prev:l,selected:c}=pf(e,hG);return()=>i(e.tag,{class:lt(["v-item-group",a.value,e.class]),style:Mt(e.style)},{default:()=>[n.default?.({isSelected:r,select:s,next:o,prev:l,selected:c.value})]})}}),bZe=St()({name:"VItem",props:rm(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:a,select:r,toggle:s,selectedClass:o,value:l,disabled:c}=sm(e,hG);return()=>n.default?.({isSelected:a.value,selectedClass:o.value,select:r,toggle:s,value:l.value,disabled:c.value})}}),xZe=ot({color:String,...Yo(),...nn(),...dr(),...$n({tag:"kbd"}),...Aa(),...rs()},"VKbd"),CZe=St()({name:"VKbd",props:xZe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ra(e),{borderClasses:r}=vi(e),{roundedClasses:s}=Tr(e),{backgroundColorClasses:o,backgroundColorStyles:l}=La(()=>e.color),{elevationClasses:c}=Is(e);return It(()=>i(e.tag,{class:lt(["v-kbd",a.value,o.value,r.value,c.value,s.value,e.class]),style:Mt([l.value,e.style])},n)),{}}}),SZe=ot({...nn(),...$r(),...h5()},"VLayout"),EZe=St()({name:"VLayout",props:SZe(),setup(e,t){let{slots:n}=t;const{layoutClasses:a,layoutStyles:r,getLayoutItem:s,items:o,layoutRef:l}=g5(e),{dimensionStyles:c}=Qr(e);return It(()=>v("div",{ref:l,class:lt([a.value,e.class]),style:Mt([c.value,r.value,e.style])},[n.default?.()])),{getLayoutItem:s,items:o}}}),kZe=ot({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...nn(),...QA()},"VLayoutItem"),BZe=St()({name:"VLayoutItem",props:kZe(),setup(e,t){let{slots:n}=t;const{layoutItemStyles:a}=GA({id:e.name,order:ee(()=>parseInt(e.order,10)),position:qe(()=>e.position),elementSize:qe(()=>e.size),layoutSize:qe(()=>e.size),active:qe(()=>e.modelValue),absolute:qe(()=>e.absolute)});return()=>v("div",{class:lt(["v-layout-item",e.class]),style:Mt([a.value,e.style])},[n.default?.()])}}),TZe=ot({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...nn(),...$r(),...$n(),...iu({transition:"fade-transition"})},"VLazy"),IZe=St()({name:"VLazy",directives:{vIntersect:Jl},props:TZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Qr(e),r=fn(e,"modelValue");function s(o){r.value||(r.value=o)}return It(()=>Sa(i(e.tag,{class:lt(["v-lazy",e.class]),style:Mt([a.value,e.style])},{default:()=>[r.value&&i(So,{transition:e.transition,appear:!0},{default:()=>[n.default?.()]})]}),[[Jl,{handler:s,options:e.options},null]])),{}}}),FZe=ot({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...nn()},"VLocaleProvider"),PZe=St()({name:"VLocaleProvider",props:FZe(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=nne(e);return It(()=>v("div",{class:lt(["v-locale-provider",a.value,e.class]),style:Mt(e.style)},[n.default?.()])),{}}}),DZe=ot({scrollable:Boolean,...nn(),...$r(),...$n({tag:"main"})},"VMain"),UZe=St()({name:"VMain",props:DZe(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Qr(e),{mainStyles:r}=p5(),{ssrBootStyles:s}=tm();return It(()=>i(e.tag,{class:lt(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:Mt([r.value,s.value,a.value,e.style])},{default:()=>[e.scrollable?v("div",{class:"v-main__scroller"},[n.default?.()]):n.default?.()]})),{}}});function RZe(e){let{rootEl:t,isSticky:n,layoutItemStyles:a}=e;const r=Gt(!1),s=Gt(0),o=ee(()=>{const f=typeof r.value=="boolean"?"top":r.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,r.value?{[f]:Zt(s.value)}:{top:a.value.top}]});An(()=>{Ge(n,f=>{f?window.addEventListener("scroll",c,{passive:!0}):window.removeEventListener("scroll",c)},{immediate:!0})}),ha(()=>{window.removeEventListener("scroll",c)});let l=0;function c(){const f=l>window.scrollY?"up":"down",d=t.value.getBoundingClientRect(),A=parseFloat(a.value.top??0),m=window.scrollY-Math.max(0,s.value-A),p=d.height+Math.max(s.value,A)-window.scrollY-window.innerHeight,h=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;d.height<window.innerHeight-A?(r.value="top",s.value=A):f==="up"&&r.value==="bottom"||f==="down"&&r.value==="top"?(s.value=window.scrollY+d.top-h,r.value=!0):f==="down"&&p<=0?(s.value=0,r.value="bottom"):f==="up"&&m<=0&&(h?r.value!=="top"&&(s.value=-m+h+A,r.value="top"):(s.value=d.top+m,r.value="top")),l=window.scrollY}return{isStuck:r,stickyStyles:o}}const NZe=100,VZe=20;function QN(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function GN(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const a=QN(t),r=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(r-a)*Math.abs(r),n===e.length-1&&(t*=.5)}return QN(t)*1e3}function LZe(){const e={};function t(r){Array.from(r.changedTouches).forEach(s=>{(e[s.identifier]??(e[s.identifier]=new H8(VZe))).push([r.timeStamp,s])})}function n(r){Array.from(r.changedTouches).forEach(s=>{delete e[s.identifier]})}function a(r){const s=e[r]?.values().reverse();if(!s)throw new Error(`No samples for touch id ${r}`);const o=s[0],l=[],c=[];for(const f of s){if(o[0]-f[0]>NZe)break;l.push({t:f[0],d:f[1].clientX}),c.push({t:f[0],d:f[1].clientY})}return{x:GN(l),y:GN(c),get direction(){const{x:f,y:d}=this,[A,m]=[Math.abs(f),Math.abs(d)];return A>m&&f>=0?"right":A>m&&f<=0?"left":m>A&&d>=0?"down":m>A&&d<=0?"up":MZe()}}}return{addMovement:t,endTouch:n,getVelocity:a}}function MZe(){throw new Error}function OZe(e){let{el:t,isActive:n,isTemporary:a,width:r,touchless:s,position:o}=e;An(()=>{window.addEventListener("touchstart",b,{passive:!0}),window.addEventListener("touchmove",S,{passive:!1}),window.addEventListener("touchend",B,{passive:!0})}),ha(()=>{window.removeEventListener("touchstart",b),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",B)});const l=ee(()=>["left","right"].includes(o.value)),{addMovement:c,endTouch:f,getVelocity:d}=LZe();let A=!1;const m=Gt(!1),p=Gt(0),h=Gt(0);let y;function g(T,E){return(o.value==="left"?T:o.value==="right"?document.documentElement.clientWidth-T:o.value==="top"?T:o.value==="bottom"?document.documentElement.clientHeight-T:qm())-(E?r.value:0)}function _(T){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const x=o.value==="left"?(T-h.value)/r.value:o.value==="right"?(document.documentElement.clientWidth-T-h.value)/r.value:o.value==="top"?(T-h.value)/r.value:o.value==="bottom"?(document.documentElement.clientHeight-T-h.value)/r.value:qm();return E?ar(x):x}function b(T){if(s.value)return;const E=T.changedTouches[0].clientX,x=T.changedTouches[0].clientY,C=25,D=o.value==="left"?E<C:o.value==="right"?E>document.documentElement.clientWidth-C:o.value==="top"?x<C:o.value==="bottom"?x>document.documentElement.clientHeight-C:qm(),U=n.value&&(o.value==="left"?E<r.value:o.value==="right"?E>document.documentElement.clientWidth-r.value:o.value==="top"?x<r.value:o.value==="bottom"?x>document.documentElement.clientHeight-r.value:qm());(D||U||n.value&&a.value)&&(y=[E,x],h.value=g(l.value?E:x,n.value),p.value=_(l.value?E:x),A=h.value>-20&&h.value<80,f(T),c(T))}function S(T){const E=T.changedTouches[0].clientX,x=T.changedTouches[0].clientY;if(A){if(!T.cancelable){A=!1;return}const D=Math.abs(E-y[0]),U=Math.abs(x-y[1]);(l.value?D>U&&D>3:U>D&&U>3)?(m.value=!0,A=!1):(l.value?U:D)>3&&(A=!1)}if(!m.value)return;T.preventDefault(),c(T);const C=_(l.value?E:x,!1);p.value=Math.max(0,Math.min(1,C)),C>1?h.value=g(l.value?E:x,!0):C<0&&(h.value=g(l.value?E:x,!1))}function B(T){if(A=!1,!m.value)return;c(T),m.value=!1;const E=d(T.changedTouches[0].identifier),x=Math.abs(E.x),C=Math.abs(E.y);(l.value?x>C&&x>400:C>x&&C>3)?n.value=E.direction===({left:"right",right:"left",top:"down",bottom:"up"}[o.value]||qm()):n.value=p.value>.5}const F=ee(()=>m.value?{transform:o.value==="left"?`translateX(calc(-100% + ${p.value*r.value}px))`:o.value==="right"?`translateX(calc(100% - ${p.value*r.value}px))`:o.value==="top"?`translateY(calc(-100% + ${p.value*r.value}px))`:o.value==="bottom"?`translateY(calc(100% - ${p.value*r.value}px))`:qm(),transition:"none"}:void 0);return ko(m,()=>{const T=t.value?.style.transform??null,E=t.value?.style.transition??null;Er(()=>{t.value?.style.setProperty("transform",F.value?.transform||"none"),t.value?.style.setProperty("transition",F.value?.transition||null)}),hs(()=>{t.value?.style.setProperty("transform",T),t.value?.style.setProperty("transition",E)})}),{isDragging:m,dragProgress:p,dragStyles:F}}function qm(){throw new Error}const HZe=["start","end","left","right","top","bottom"],$Ze=ot({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>HZe.includes(e)},sticky:Boolean,...Yo(),...nn(),..._4(),...$A({mobile:null}),...rs(),...QA(),...dr(),...$n({tag:"nav"}),...Aa()},"VNavigationDrawer"),QZe=St()({name:"VNavigationDrawer",props:$Ze(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{isRtl:s}=as(),{themeClasses:o}=Ra(e),{borderClasses:l}=vi(e),{backgroundColorClasses:c,backgroundColorStyles:f}=La(()=>e.color),{elevationClasses:d}=Is(e),{displayClasses:A,mobile:m}=Vi(e),{roundedClasses:p}=Tr(e),h=uQ(),y=fn(e,"modelValue",null,Z=>!!Z),{ssrBootStyles:g}=tm(),{scopeId:_}=im(),b=R(),S=Gt(!1),{runOpenDelay:B,runCloseDelay:F}=w4(e,Z=>{S.value=Z}),T=ee(()=>e.rail&&e.expandOnHover&&S.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),E=ee(()=>TS(e.location,s.value)),x=qe(()=>e.persistent),C=ee(()=>!e.permanent&&(m.value||e.temporary)),D=ee(()=>e.sticky&&!C.value&&E.value!=="bottom");ko(()=>e.expandOnHover&&e.rail!=null,()=>{Ge(S,Z=>a("update:rail",!Z))}),ko(()=>!e.disableResizeWatcher,()=>{Ge(C,Z=>!e.permanent&&Cn(()=>y.value=!Z))}),ko(()=>!e.disableRouteWatcher&&!!h,()=>{Ge(h.currentRoute,()=>C.value&&(y.value=!1))}),Ge(()=>e.permanent,Z=>{Z&&(y.value=!0)}),e.modelValue==null&&!C.value&&(y.value=e.permanent||!m.value);const{isDragging:U,dragProgress:L}=OZe({el:b,isActive:y,isTemporary:C,width:T,touchless:qe(()=>e.touchless),position:E}),H=ee(()=>{const Z=C.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):T.value;return U.value?Z*L.value:Z}),{layoutItemStyles:oe,layoutItemScrimStyles:de}=GA({id:e.name,order:ee(()=>parseInt(e.order,10)),position:E,layoutSize:H,elementSize:T,active:uh(y),disableTransitions:qe(()=>U.value),absolute:ee(()=>e.absolute||D.value&&typeof te.value!="string")}),{isStuck:te,stickyStyles:q}=RZe({rootEl:b,isSticky:D,layoutItemStyles:oe}),ce=La(()=>typeof e.scrim=="string"?e.scrim:null),le=ee(()=>({...U.value?{opacity:L.value*.2,transition:"none"}:void 0,...de.value}));return kr({VList:{bgColor:"transparent"}}),It(()=>{const Z=r.image||e.image;return v(ze,null,[i(e.tag,Ie({ref:b,onMouseenter:B,onMouseleave:F,class:["v-navigation-drawer",`v-navigation-drawer--${E.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":S.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":C.value,"v-navigation-drawer--persistent":x.value,"v-navigation-drawer--active":y.value,"v-navigation-drawer--sticky":D.value},o.value,c.value,l.value,A.value,d.value,p.value,e.class],style:[f.value,oe.value,g.value,q.value,e.style]},_,n),{default:()=>[Z&&v("div",{key:"image",class:"v-navigation-drawer__img"},[r.image?i(Gn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},r.image):i(zc,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),r.prepend&&v("div",{class:"v-navigation-drawer__prepend"},[r.prepend?.()]),v("div",{class:"v-navigation-drawer__content"},[r.default?.()]),r.append&&v("div",{class:"v-navigation-drawer__append"},[r.append?.()])]}),i(jd,{name:"fade-transition"},{default:()=>[C.value&&(U.value||y.value)&&!!e.scrim&&v("div",Ie({class:["v-navigation-drawer__scrim",ce.backgroundColorClasses.value],style:[le.value,ce.backgroundColorStyles.value],onClick:()=>{x.value||(y.value=!1)}},_),null)]})])}),{isStuck:te}}}),GZe=Ni({name:"VNoSsr",setup(e,t){let{slots:n}=t;const a=ZQ();return()=>a.value&&n.default?.()}}),zZe=50,WZe=500;function KZe(e){let{toggleUpDown:t}=e,n=-1,a=-1;hs(s);function r(l){s(),o(l),window.addEventListener("pointerup",s),document.addEventListener("blur",s),n=window.setTimeout(()=>{a=window.setInterval(()=>o(l),zZe)},WZe)}function s(){window.clearTimeout(n),window.clearInterval(a),window.removeEventListener("pointerup",s),document.removeEventListener("blur",s)}function o(l){t(l==="up")}return{holdStart:r,holdStop:s}}const jZe=ot({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...Wa(t1(),["modelValue","validationValue"])},"VNumberInput"),qZe=St()({name:"VNumberInput",props:{...jZe()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=R(),{holdStart:r,holdStop:s}=KZe({toggleUpDown:C}),o=Jg(e),l=ee(()=>o.isDisabled.value||o.isReadonly.value),c=Gt(e.focused),{decimalSeparator:f}=Ka(),d=ee(()=>e.decimalSeparator?.[0]||f.value);function A(ne){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const Q=G==null?String(ne):ne.toFixed(G);if(c.value&&W)return Number(Q).toString().replace(".",d.value);if(e.minFractionDigits===null||G!==null&&G<e.minFractionDigits)return Q.replace(".",d.value);let[O,ae]=Q.split(".");return ae=(ae??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`,"g"),""),[O,ae].filter(Boolean).join(d.value)}const m=fn(e,"modelValue",null,ne=>ne??null,ne=>ne==null?ne??null:ar(Number(ne),e.min,e.max)),p=Gt(null);Er(()=>{c.value&&!l.value||(m.value==null?p.value=null:isNaN(m.value)||(p.value=A(m.value)))});const h=ee({get:()=>p.value,set(ne){if(ne===null||ne===""){m.value=null,p.value=null;return}const G=Number(ne.replace(d.value,"."));!isNaN(G)&&G<=e.max&&G>=e.min&&(m.value=G,p.value=ne)}}),y=ee(()=>l.value?!1:(m.value??0)+e.step<=e.max),g=ee(()=>l.value?!1:(m.value??0)-e.step>=e.min),_=ee(()=>e.hideInput?"stacked":e.controlVariant),b=qe(()=>_.value==="split"?"$plus":"$collapse"),S=qe(()=>_.value==="split"?"$minus":"$expand"),B=qe(()=>_.value==="split"?"default":"small"),F=qe(()=>_.value==="stacked"?"auto":"100%"),T={props:{onClick:L,onPointerup:H,onPointerdown:oe,onPointercancel:H}},E={props:{onClick:L,onPointerup:H,onPointerdown:de,onPointercancel:H}};Ge(()=>e.precision,()=>q()),Ge(()=>e.minFractionDigits,()=>q()),An(()=>{te()});function x(ne){if(ne==null)return 0;const G=ne.toString(),W=G.indexOf(".");return~W?G.length-W:0}function C(){let ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(l.value)return;if(m.value==null){h.value=A(ar(0,e.min,e.max));return}let G=Math.max(x(m.value),x(e.step));e.precision!=null&&(G=Math.max(G,e.precision)),ne?y.value&&(h.value=A(m.value+e.step,G)):g.value&&(h.value=A(m.value-e.step,G))}function D(ne){if(!ne.data)return;const G=ne.target,{value:W,selectionStart:Q,selectionEnd:O}=G??{},ae=W?W.slice(0,Q)+ne.data+W.slice(O):ne.data,j=mte(ae,e.precision,d.value);if(new RegExp(`^-?\\d*${V_(d.value)}?\\d*$`).test(ae)||(ne.preventDefault(),G.value=j),e.precision!=null){if(ae.split(d.value)[1]?.length>e.precision){ne.preventDefault(),G.value=j;const J=(Q??0)+ne.data.length;G.setSelectionRange(J,J)}e.precision===0&&ae.includes(d.value)&&(ne.preventDefault(),G.value=j)}}async function U(ne){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(ne.key)||ne.ctrlKey||["ArrowDown","ArrowUp"].includes(ne.key)&&(ne.preventDefault(),ne.stopPropagation(),te(),await Cn(),ne.key==="ArrowDown"?C(!1):C())}function L(ne){ne.stopPropagation()}function H(ne){ne.currentTarget?.releasePointerCapture(ne.pointerId),ne.preventDefault(),s()}function oe(ne){ne.currentTarget?.setPointerCapture(ne.pointerId),ne.preventDefault(),ne.stopPropagation(),r("up")}function de(ne){ne.currentTarget?.setPointerCapture(ne.pointerId),ne.preventDefault(),ne.stopPropagation(),r("down")}function te(){if(l.value||!a.value)return;const ne=a.value.value,G=Number(ne.replace(d.value,"."));ne&&!isNaN(G)?h.value=A(ar(G,e.min,e.max)):h.value=null}function q(){l.value||(h.value=m.value!==null&&!isNaN(m.value)?A(m.value,e.precision,!1):null)}function ce(){if(!l.value){if(m.value===null||isNaN(m.value)){h.value=null;return}h.value=m.value.toString().replace(".",d.value)}}function le(){ce()}function Z(){te()}return It(()=>{const{modelValue:ne,...G}=Wc.filterProps(e);function W(){return n.increment?i(Gn,{key:"increment-defaults",defaults:{VBtn:{disabled:!y.value,height:F.value,size:B.value,icon:b.value,variant:"text"}}},{default:()=>[n.increment(T)]}):i(ta,{"aria-hidden":"true","data-testid":"increment",disabled:!y.value,height:F.value,icon:b.value,key:"increment-btn",onClick:L,onPointerdown:oe,onPointerup:H,onPointercancel:H,size:B.value,variant:"text",tabindex:"-1"},null)}function Q(){return n.decrement?i(Gn,{key:"decrement-defaults",defaults:{VBtn:{disabled:!g.value,height:F.value,size:B.value,icon:S.value,variant:"text"}}},{default:()=>[n.decrement(E)]}):i(ta,{"aria-hidden":"true","data-testid":"decrement",disabled:!g.value,height:F.value,icon:S.value,key:"decrement-btn",onClick:L,onPointerdown:de,onPointerup:H,onPointercancel:H,size:B.value,variant:"text",tabindex:"-1"},null)}function O(){return v("div",{class:"v-number-input__control"},[Q(),i(Fi,{vertical:_.value!=="stacked"},null),W()])}function ae(){return!e.hideInput&&!e.inset?i(Fi,{vertical:!0},null):void 0}const j=_.value==="split"?v("div",{class:"v-number-input__control"},[i(Fi,{vertical:!0},null),W()]):e.reverse||_.value==="hidden"?void 0:v(ze,null,[ae(),O()]),J=n["append-inner"]||j,ie=_.value==="split"?v("div",{class:"v-number-input__control"},[Q(),i(Fi,{vertical:!0},null)]):e.reverse&&_.value!=="hidden"?v(ze,null,[O(),ae()]):void 0,X=n["prepend-inner"]||ie;return i(Wc,Ie({ref:a},G,{modelValue:h.value,"onUpdate:modelValue":fe=>h.value=fe,focused:c.value,"onUpdate:focused":fe=>c.value=fe,validationValue:m.value,onBeforeinput:D,onFocus:le,onBlur:Z,onKeydown:U,class:["v-number-input",{"v-number-input--default":_.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":_.value==="split","v-number-input--stacked":_.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...n,"append-inner":J?function(){for(var fe=arguments.length,M=new Array(fe),z=0;z<fe;z++)M[z]=arguments[z];return v(ze,null,[n["append-inner"]?.(...M),j])}:void 0,"prepend-inner":X?function(){for(var fe=arguments.length,M=new Array(fe),z=0;z<fe;z++)M[z]=arguments[z];return v(ze,null,[ie,n["prepend-inner"]?.(...M)])}:void 0})}),Fs({},a)}}),YZe=ot({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...$r(),...Xg(),...jc(e1({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),XZe=St()({name:"VOtpInput",props:YZe(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{dimensionStyles:s}=Qr(e),{isFocused:o,focus:l,blur:c}=Zc(e),f=fn(e,"modelValue","",D=>D==null?[]:String(D).split(""),D=>D.join("")),{t:d}=Ka(),A=ee(()=>Number(e.length)),m=ee(()=>Array(A.value).fill(0)),p=R(-1),h=R(),y=R([]),g=ee(()=>y.value[p.value]);let _=!1;ko(()=>e.autofocus,()=>{const D=Gd();D.run(()=>{const{intersectionRef:U,isIntersecting:L}=Wg();Er(()=>{U.value=y.value[0]}),Ge(L,H=>{H&&(U.value?.focus(),D.stop())})})});function b(){if(C(g.value.value)){g.value.value="";return}if(_)return;const D=f.value.slice(),U=g.value.value;D[p.value]=U;let L=null;p.value>f.value.length?L=f.value.length+1:p.value+1!==A.value&&(L="next"),f.value=D,L&&sA(h.value,L)}function S(){_=!1,b()}function B(D){const U=f.value.slice(),L=p.value;let H=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(D.key)&&(D.preventDefault(),D.key==="ArrowLeft"?H="prev":D.key==="ArrowRight"?H="next":["Backspace","Delete"].includes(D.key)&&(U[p.value]="",f.value=U,p.value>0&&D.key==="Backspace"?H="prev":requestAnimationFrame(()=>{y.value[L]?.select()})),requestAnimationFrame(()=>{H!=null&&sA(h.value,H)}))}function F(D,U){U.preventDefault(),U.stopPropagation();const L=U?.clipboardData?.getData("Text").trim().slice(0,A.value)??"",H=L.length-1===-1?D:L.length-1;C(L)||(f.value=L.split(""),p.value=H)}function T(){f.value=[]}function E(D,U){l(),p.value=U}function x(){c(),p.value=-1}function C(D){return e.type==="number"&&/[^0-9]/g.test(D)}return kr({VField:{color:qe(()=>e.color),bgColor:qe(()=>e.color),baseColor:qe(()=>e.baseColor),disabled:qe(()=>e.disabled),error:qe(()=>e.error),variant:qe(()=>e.variant)}},{scoped:!0}),Ge(f,D=>{D.length===A.value&&a("finish",D.join(""))},{deep:!0}),Ge(p,D=>{D<0||Cn(()=>{y.value[D]?.select()})}),It(()=>{const[D,U]=ff(n);return v("div",Ie({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},D),[v("div",{ref:h,class:"v-otp-input__content",style:Mt([s.value])},[m.value.map((L,H)=>v(ze,null,[e.divider&&H!==0&&v("span",{class:"v-otp-input__divider"},[e.divider]),i(uf,{focused:o.value&&e.focusAll||p.value===H,key:H},{...r,loader:void 0,default:()=>v("input",{ref:oe=>y.value[H]=oe,"aria-label":d(e.label,H+1),autofocus:H===0&&e.autofocus,autocomplete:"one-time-code",class:lt(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:H===0?A.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:f.value[H],onInput:b,onFocus:oe=>E(oe,H),onBlur:x,onKeydown:B,onCompositionstart:()=>_=!0,onCompositionend:S,onPaste:oe=>F(H,oe)},null)})])),v("input",Ie({class:"v-otp-input-input",type:"hidden"},U,{value:f.value.join("")}),null),i(Hu,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>[r.loader?.()??i(BA,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}),r.default?.()])])}),{blur:()=>{y.value?.some(D=>D.blur())},focus:()=>{y.value?.[0].focus()},reset:T,isFocused:o}}});function JZe(e){return Math.floor(Math.abs(e))*Math.sign(e)}const ZZe=ot({scale:{type:[Number,String],default:.5},...nn()},"VParallax"),eet=St()({name:"VParallax",props:ZZe(),setup(e,t){let{slots:n}=t;const{intersectionRef:a,isIntersecting:r}=Wg(),{resizeRef:s,contentRect:o}=Kl(),{height:l}=Vi(),c=R();Er(()=>{a.value=s.value=c.value?.$el});let f;Ge(r,p=>{p?(f=xB(a.value),f=f===document.scrollingElement?document:f,f.addEventListener("scroll",m,{passive:!0}),m()):f.removeEventListener("scroll",m)}),ha(()=>{f?.removeEventListener("scroll",m)}),Ge(l,m),Ge(()=>o.value?.height,m);const d=ee(()=>1-ar(Number(e.scale)));let A=-1;function m(){r.value&&(cancelAnimationFrame(A),A=requestAnimationFrame(()=>{const p=(c.value?.$el).querySelector(".v-img__img");if(!p)return;const h=f instanceof Document?document.documentElement.clientHeight:f.clientHeight,y=f instanceof Document?window.scrollY:f.scrollTop,g=a.value.getBoundingClientRect().top+y,_=o.value.height,b=g+(_-h)/2,S=JZe((y-b)*d.value),B=Math.max(1,(d.value*(h-_)+_)/_);p.style.setProperty("transform",`translateY(${S}px) scale(${B})`)}))}return It(()=>i(zc,{class:lt(["v-parallax",{"v-parallax--active":r.value},e.class]),style:Mt(e.style),ref:c,cover:!0,onLoadstart:m,onLoad:m},n)),{}}}),tet=ot({...sb({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),net=St()({name:"VRadio",props:tet(),setup(e,t){let{slots:n}=t;return It(()=>{const a=lf.filterProps(e);return i(lf,Ie(a,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),aet=ot({height:{type:[Number,String],default:"auto"},...ed(),...Wa(m4(),["multiple"]),trueIcon:{type:vn,default:"$radioOn"},falseIcon:{type:vn,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),ret=St()({name:"VRadioGroup",inheritAttrs:!1,props:aet(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=qo(),s=ee(()=>e.id||`radio-group-${r}`),o=fn(e,"modelValue"),l=R();return It(()=>{const[c,f]=ff(n),d=so.filterProps(e),A=lf.filterProps(e),m=a.label?a.label({label:e.label,props:{for:s.value}}):e.label;return i(so,Ie({ref:l,class:["v-radio-group",e.class],style:e.style},c,d,{modelValue:o.value,"onUpdate:modelValue":p=>o.value=p,id:s.value}),{...a,default:p=>{let{id:h,messagesId:y,isDisabled:g,isReadonly:_}=p;return v(ze,null,[m&&i(Dh,{id:h.value},{default:()=>[m]}),i(yQ,Ie(A,{id:h.value,"aria-describedby":y.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:g.value,readonly:_.value,"aria-labelledby":m?h.value:void 0,multiple:!1},f,{modelValue:o.value,"onUpdate:modelValue":b=>o.value=b}),a)])}})}),Fs({},l)}}),set=ot({...Xg(),...ed(),...w7(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),oet=St()({name:"VRangeSlider",props:set(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=R(),s=R(),o=R(),{rtlClasses:l}=as();function c(D){if(!r.value||!s.value)return;const U=vk(D,r.value.$el,e.direction),L=vk(D,s.value.$el,e.direction),H=Math.abs(U),oe=Math.abs(L);return H<oe||H===oe&&U<0?r.value.$el:s.value.$el}const f=b7(e),d=fn(e,"modelValue",void 0,D=>D?.length?D.map(U=>f.roundValue(U)):[0,0]),{activeThumbRef:A,hasLabels:m,max:p,min:h,mousePressed:y,onSliderMousedown:g,onSliderTouchstart:_,position:b,trackContainerRef:S,readonly:B}=x7({props:e,steps:f,onSliderStart:()=>{a("start",d.value)},onSliderEnd:D=>{let{value:U}=D;const L=A.value===r.value?.$el?[U,d.value[1]]:[d.value[0],U];!e.strict&&L[0]<L[1]&&(d.value=L),a("end",d.value)},onSliderMove:D=>{let{value:U}=D;const[L,H]=d.value;!e.strict&&L===H&&L!==h.value&&(A.value=U>L?s.value?.$el:r.value?.$el,A.value?.focus()),A.value===r.value?.$el?d.value=[Math.min(U,H),H]:d.value=[L,Math.max(L,U)]},getActiveThumb:c}),{isFocused:F,focus:T,blur:E}=Zc(e),x=ee(()=>b(d.value[0])),C=ee(()=>b(d.value[1]));return It(()=>{const D=so.filterProps(e),U=!!(e.label||n.label||n.prepend);return i(so,Ie({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||m.value,"v-slider--focused":F.value,"v-slider--pressed":y.value,"v-slider--disabled":e.disabled},l.value,e.class],style:e.style,ref:o},D,{focused:F.value}),{...n,prepend:U?L=>v(ze,null,[n.label?.(L)??(e.label?i(Dh,{class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(L)]):void 0,default:L=>{let{id:H,messagesId:oe}=L;return v("div",{class:"v-slider__container",onMousedown:B.value?void 0:g,onTouchstartPassive:B.value?void 0:_},[v("input",{id:`${H.value}_start`,name:e.name||H.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:d.value[0]},null),v("input",{id:`${H.value}_stop`,name:e.name||H.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:d.value[1]},null),i(C7,{ref:S,start:x.value,stop:C.value},{"tick-label":n["tick-label"]}),i(hk,{ref:r,"aria-describedby":oe.value,focused:F&&A.value===r.value?.$el,modelValue:d.value[0],"onUpdate:modelValue":de=>d.value=[de,d.value[1]],onFocus:de=>{T(),A.value=r.value?.$el,p.value!==h.value&&d.value[0]===d.value[1]&&d.value[1]===h.value&&de.relatedTarget!==s.value?.$el&&(r.value?.$el.blur(),s.value?.$el.focus())},onBlur:()=>{E(),A.value=void 0},min:h.value,max:d.value[1],position:x.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]}),i(hk,{ref:s,"aria-describedby":oe.value,focused:F&&A.value===s.value?.$el,modelValue:d.value[1],"onUpdate:modelValue":de=>d.value=[d.value[0],de],onFocus:de=>{T(),A.value=s.value?.$el,p.value!==h.value&&d.value[0]===d.value[1]&&d.value[0]===p.value&&de.relatedTarget!==r.value?.$el&&(s.value?.$el.blur(),r.value?.$el.focus())},onBlur:()=>{E(),A.value=void 0},min:d.value[0],max:p.value,position:C.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),Fs({focus:()=>r.value?.$el.focus()},o)}}),iet=ot({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:vn,default:"$ratingEmpty"},fullIcon:{type:vn,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...nn(),...ps(),...Xu(),...$n(),...Aa()},"VRating"),uet=St()({name:"VRating",props:iet(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Ka(),{themeClasses:r}=Ra(e),s=fn(e,"modelValue"),o=ee(()=>ar(parseFloat(s.value),0,Number(e.length))),l=ee(()=>Bi(Number(e.length),1)),c=ee(()=>l.value.flatMap(g=>e.halfIncrements?[g-.5,g]:[g])),f=Gt(-1),d=ee(()=>c.value.map(g=>{const _=e.hover&&f.value>-1,b=o.value>=g,S=f.value>=g,F=(_?S:b)?e.fullIcon:e.emptyIcon,T=e.activeColor??e.color,E=b||S?T:e.color;return{isFilled:b,isHovered:S,icon:F,color:E}})),A=ee(()=>[0,...c.value].map(g=>{function _(){f.value=g}function b(){f.value=-1}function S(){e.disabled||e.readonly||(s.value=o.value===g&&e.clearable?0:g)}return{onMouseenter:e.hover?_:void 0,onMouseleave:e.hover?b:void 0,onClick:S}})),m=qo(),p=ee(()=>e.name??`v-rating-${m}`);function h(g){let{value:_,index:b,showStar:S=!0}=g;const{onMouseenter:B,onMouseleave:F,onClick:T}=A.value[b+1],E=`${p.value}-${String(_).replace(".","-")}`,x={color:d.value[b]?.color,density:e.density,disabled:e.disabled,icon:d.value[b]?.icon,ripple:e.ripple,size:e.size,variant:"plain"};return v(ze,null,[v("label",{for:E,class:lt({"v-rating__item--half":e.halfIncrements&&_%1>0,"v-rating__item--full":e.halfIncrements&&_%1===0}),onMouseenter:B,onMouseleave:F,onClick:T},[v("span",{class:"v-rating__hidden"},[a(e.itemAriaLabel,_,e.length)]),S?n.item?n.item({...d.value[b],props:x,value:_,index:b,rating:o.value}):i(ta,Ie({"aria-label":a(e.itemAriaLabel,_,e.length)},x),null):void 0]),v("input",{class:"v-rating__hidden",name:p.value,id:E,type:"radio",value:_,checked:o.value===_,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function y(g){return n["item-label"]?n["item-label"](g):g.label?v("span",null,[g.label]):v("span",null,[N("")])}return It(()=>{const g=!!e.itemLabels?.length||n["item-label"];return i(e.tag,{class:lt(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},r.value,e.class]),style:Mt(e.style)},{default:()=>[i(h,{value:0,index:-1,showStar:!1},null),l.value.map((_,b)=>v("div",{class:"v-rating__wrapper"},[g&&e.itemLabelPosition==="top"?y({value:_,index:b,label:e.itemLabels?.[b]}):void 0,v("div",{class:"v-rating__item"},[e.halfIncrements?v(ze,null,[i(h,{value:_-.5,index:b*2},null),i(h,{value:_,index:b*2+1},null)]):i(h,{value:_,index:b},null)]),g&&e.itemLabelPosition==="bottom"?y({value:_,index:b,label:e.itemLabels?.[b]}):void 0]))]})}),{}}}),cet={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function det(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return v("div",{class:lt(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[t])}function zN(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>_b(t))}function _b(e){let t=[];if(!e)return t;const n=cet[e];if(e!==n){if(e.includes(","))return WN(e);if(e.includes("@"))return zN(e);n.includes(",")?t=WN(n):n.includes("@")?t=zN(n):n&&t.push(_b(n))}return[det(e,t)]}function WN(e){return e.replace(/\s/g,"").split(",").map(_b)}const fet=ot({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...$r(),...rs(),...Aa()},"VSkeletonLoader"),Aet=St()({name:"VSkeletonLoader",props:fet(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=La(()=>e.color),{dimensionStyles:s}=Qr(e),{elevationClasses:o}=Is(e),{themeClasses:l}=Ra(e),{t:c}=Ka(),f=ee(()=>_b(xr(e.type).join(",")));return It(()=>{const d=!n.default||e.loading,A=e.boilerplate||!d?{}:{ariaLive:"polite",ariaLabel:c(e.loadingText),role:"alert"};return v("div",Ie({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},l.value,a.value,o.value],style:[r.value,d?s.value:{}]},A),[d?f.value:n.default?.()])}),{}}}),met=St()({name:"VSlideGroupItem",props:rm(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=sm(e,BQ);return()=>n.default?.({isSelected:a.isSelected.value,select:a.select,toggle:a.toggle,selectedClass:a.selectedClass.value})}});function vet(e){const t=Gt(e());let n=-1;function a(){clearInterval(n)}function r(){a(),Cn(()=>t.value=e())}function s(o){const l=o?getComputedStyle(o):{transitionDuration:.2},c=parseFloat(l.transitionDuration)*1e3||200;if(a(),t.value<=0)return;const f=performance.now();n=window.setInterval(()=>{const d=performance.now()-f+c;t.value=Math.max(e()-d,0),t.value<=0&&a()},c)}return hs(a),{clear:a,time:t,start:s,reset:r}}const pG=ot({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Jc({location:"bottom"}),...Fh(),...dr(),...hl(),...Aa(),...Wa(Zg({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),kk=St()({name:"VSnackbar",props:pG(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"modelValue"),{positionClasses:r}=Ph(e),{scopeId:s}=im(),{themeClasses:o}=Ra(e),{colorClasses:l,colorStyles:c,variantClasses:f}=nm(e),{roundedClasses:d}=Tr(e),A=vet(()=>Number(e.timeout)),m=R(),p=R(),h=Gt(!1),y=Gt(0),g=R(),_=Pn(R0,void 0);ko(()=>!!_,()=>{const U=p5();Er(()=>{g.value=U.mainStyles.value})}),Ge(a,S),Ge(()=>e.timeout,S),An(()=>{a.value&&S()});let b=-1;function S(){A.reset(),window.clearTimeout(b);const U=Number(e.timeout);if(!a.value||U===-1)return;const L=hB(p.value);A.start(L),b=window.setTimeout(()=>{a.value=!1},U)}function B(){A.reset(),window.clearTimeout(b)}function F(){h.value=!0,B()}function T(){h.value=!1,S()}function E(U){y.value=U.touches[0].clientY}function x(U){Math.abs(y.value-U.changedTouches[0].clientY)>50&&(a.value=!1)}function C(){h.value&&T()}const D=ee(()=>e.location.split(" ").reduce((U,L)=>(U[`v-snackbar--${L}`]=!0,U),{}));return It(()=>{const U=Hu.filterProps(e),L=!!(n.default||n.text||e.text);return i(Hu,Ie({ref:m,class:["v-snackbar",{"v-snackbar--active":a.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},D.value,r.value,e.class],style:[g.value,e.style]},U,{modelValue:a.value,"onUpdate:modelValue":H=>a.value=H,contentProps:Ie({class:["v-snackbar__wrapper",o.value,l.value,d.value,f.value],style:[c.value],onPointerenter:F,onPointerleave:T},U.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:E,onTouchend:x,onAfterLeave:C},s),{default:()=>[hf(!1,"v-snackbar"),e.timer&&!h.value&&v("div",{key:"timer",class:"v-snackbar__timer"},[i(nb,{ref:p,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,modelValue:A.time.value},null)]),L&&v("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[n.text?.()??e.text,n.default?.()]),n.actions&&i(Gn,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[v("div",{class:"v-snackbar__actions"},[n.actions({isActive:a})])]})],activator:n.activator})}),Fs({},m)}}),het=ot({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...Wa(pG(),["modelValue"])},"VSnackbarQueue"),pet=St()({name:"VSnackbarQueue",props:het(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Ka(),s=Gt(!1),o=Gt(!1),l=Gt();Ge(()=>e.modelValue.length,(m,p)=>{!o.value&&m>p&&f()}),Ge(s,m=>{m&&(o.value=!0)});function c(){e.modelValue.length?f():(l.value=void 0,o.value=!1)}function f(){const[m,...p]=e.modelValue;n("update:modelValue",p),l.value=typeof m=="string"?{text:m}:m,Cn(()=>{s.value=!0})}function d(){s.value=!1}const A=ee(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:r(e.closeText)}));It(()=>{const m=!!(e.closable||a.actions),{modelValue:p,...h}=kk.filterProps(e);return v(ze,null,[o.value&&!!l.value&&(a.default?i(Gn,{defaults:{VSnackbar:l.value}},{default:()=>[a.default({item:l.value})]}):i(kk,Ie(h,l.value,{modelValue:s.value,"onUpdate:modelValue":y=>s.value=y,onAfterLeave:c}),{text:a.text?()=>a.text?.({item:l.value}):void 0,actions:m?()=>v(ze,null,[a.actions?i(Gn,{defaults:{VBtn:A.value}},{default:()=>[a.actions({item:l.value,props:{onClick:d}})]}):i(ta,Ie(A.value,{onClick:d}),null)]):void 0}))])})}}),gG=ot({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),yG=ot({autoLineWidth:Boolean,...gG()},"VBarline"),KN=St()({name:"VBarline",props:yG(),setup(e,t){let{slots:n}=t;const a=qo(),r=ee(()=>e.id||`barline-${a}`),s=ee(()=>Number(e.autoDrawDuration)||500),o=ee(()=>!!(e.showLabels||e.labels.length>0||n?.label)),l=ee(()=>parseFloat(e.lineWidth)||4),c=ee(()=>Math.max(e.modelValue.length*l.value,Number(e.width))),f=ee(()=>({minX:0,maxX:c.value,minY:0,maxY:parseInt(e.height,10)})),d=ee(()=>e.modelValue.map(g=>Or(g,e.itemValue,g)));function A(g,_){const{minX:b,maxX:S,minY:B,maxY:F}=_,T=g.length;let E=e.max!=null?Number(e.max):Math.max(...g),x=e.min!=null?Number(e.min):Math.min(...g);x>0&&e.min==null&&(x=0),E<0&&e.max==null&&(E=0);const C=S/(T===1?2:T),D=(F-B)/(E-x||1),U=F-Math.abs(x*D);return g.map((L,H)=>{const oe=Math.abs(D*L);return{x:b+H*C,y:U-oe+ +(L<0)*oe,height:oe,value:L}})}const m=ee(()=>{const g=[],_=A(d.value,f.value),b=_.length;for(let S=0;g.length<b;S++){const B=_[S];let F=e.labels[S];F||(F=typeof B=="object"?B.value:B),g.push({x:B.x,value:String(F)})}return g}),p=ee(()=>A(d.value,f.value)),h=ee(()=>p.value.length===1?(f.value.maxX-l.value)/2:(Math.abs(p.value[0].x-p.value[1].x)-l.value)/2),y=ee(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));It(()=>{const g=e.gradient.slice().length?e.gradient.slice().reverse():[""];return v("svg",{display:"block"},[v("defs",null,[v("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[g.map((_,b)=>v("stop",{offset:b/Math.max(g.length-1,1),"stop-color":_||"currentColor"},null))])]),v("clipPath",{id:`${r.value}-clip`},[p.value.map(_=>v("rect",{x:_.x+h.value,y:_.y,width:l.value,height:_.height,rx:y.value,ry:y.value},[e.autoDraw&&v(ze,null,[v("animate",{attributeName:"y",from:_.y+_.height,to:_.y,dur:`${s.value}ms`,fill:"freeze"},null),v("animate",{attributeName:"height",from:"0",to:_.height,dur:`${s.value}ms`,fill:"freeze"},null)])]))]),o.value&&v("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[m.value.map((_,b)=>v("text",{x:_.x+h.value+l.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:b,value:_.value})??_.value]))]),v("g",{"clip-path":`url(#${r.value}-clip)`,fill:`url(#${r.value})`},[v("rect",{x:0,y:0,width:Math.max(e.modelValue.length*l.value,Number(e.width)),height:e.height},null)])])})}});function get(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const r=e.shift(),s=e[e.length-1];return(n?`M${r.x} ${a-r.x+2} L${r.x} ${r.y}`:`M${r.x} ${r.y}`)+e.map((o,l)=>{const c=e[l+1],f=e[l-1]||r,d=c&&yet(c,o,f);if(!c||d)return`L${o.x} ${o.y}`;const A=Math.min(jN(f,o),jN(c,o)),p=A/2<t?A/2:t,h=qN(f,o,p),y=qN(c,o,p);return`L${h.x} ${h.y}S${o.x} ${o.y} ${y.x} ${y.y}`}).join("")+(n?`L${s.x} ${a-r.x+2} Z`:"")}function Hy(e){return parseInt(e,10)}function yet(e,t,n){return Hy(e.x+n.x)===Hy(2*t.x)&&Hy(e.y+n.y)===Hy(2*t.y)}function jN(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function qN(e,t,n){const a={x:e.x-t.x,y:e.y-t.y},r=Math.sqrt(a.x*a.x+a.y*a.y),s={x:a.x/r,y:a.y/r};return{x:t.x+s.x*n,y:t.y+s.y*n}}const _G=ot({fill:Boolean,...gG()},"VTrendline"),YN=St()({name:"VTrendline",props:_G(),setup(e,t){let{slots:n}=t;const a=qo(),r=ee(()=>e.id||`trendline-${a}`),s=ee(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),o=R(0),l=R(null);function c(g,_){const{minX:b,maxX:S,minY:B,maxY:F}=_;g.length===1&&(g=[g[0],g[0]]);const T=g.length,E=e.max!=null?Number(e.max):Math.max(...g),x=e.min!=null?Number(e.min):Math.min(...g),C=(S-b)/(T-1),D=(F-B)/(E-x||1);return g.map((U,L)=>({x:b+L*C,y:F-(U-x)*D,value:U}))}const f=ee(()=>!!(e.showLabels||e.labels.length>0||n?.label)),d=ee(()=>parseFloat(e.lineWidth)||4),A=ee(()=>Number(e.width)),m=ee(()=>{const g=Number(e.padding);return{minX:g,maxX:A.value-g,minY:g,maxY:parseInt(e.height,10)-g}}),p=ee(()=>e.modelValue.map(g=>Or(g,e.itemValue,g))),h=ee(()=>{const g=[],_=c(p.value,m.value),b=_.length;for(let S=0;g.length<b;S++){const B=_[S];let F=e.labels[S];F||(F=typeof B=="object"?B.value:B),g.push({x:B.x,value:String(F)})}return g});Ge(()=>e.modelValue,async()=>{if(await Cn(),!e.autoDraw||!l.value)return;const g=l.value,_=g.getTotalLength();e.fill?(g.style.transformOrigin="bottom center",g.style.transition="none",g.style.transform="scaleY(0)",g.getBoundingClientRect(),g.style.transition=`transform ${s.value}ms ${e.autoDrawEasing}`,g.style.transform="scaleY(1)"):(g.style.strokeDasharray=`${_}`,g.style.strokeDashoffset=`${_}`,g.getBoundingClientRect(),g.style.transition=`stroke-dashoffset ${s.value}ms ${e.autoDrawEasing}`,g.style.strokeDashoffset="0"),o.value=_},{immediate:!0});function y(g){const _=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return get(c(p.value,m.value),_,g,parseInt(e.height,10))}It(()=>{const g=e.gradient.slice().length?e.gradient.slice().reverse():[""];return v("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[v("defs",null,[v("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[g.map((_,b)=>v("stop",{offset:b/Math.max(g.length-1,1),"stop-color":_||"currentColor"},null))])]),f.value&&v("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[h.value.map((_,b)=>v("text",{x:_.x+d.value/2+d.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:b,value:_.value})??_.value]))]),v("path",{ref:l,d:y(e.fill),fill:e.fill?`url(#${r.value})`:"none",stroke:e.fill?"none":`url(#${r.value})`},null),e.fill&&v("path",{d:y(!1),fill:"none",stroke:e.color??e.gradient?.[0]},null)])})}}),_et=ot({type:{type:String,default:"trend"},...yG(),..._G()},"VSparkline"),wet=St()({name:"VSparkline",props:_et(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:r}=$s(()=>e.color),s=ee(()=>!!(e.showLabels||e.labels.length>0||n?.label)),o=ee(()=>{let l=parseInt(e.height,10);return s.value&&(l+=parseInt(e.labelSize,10)*1.5),l});It(()=>{const l=e.type==="trend"?YN:KN,c=e.type==="trend"?YN.filterProps(e):KN.filterProps(e);return i(l,Ie({key:e.type,class:a.value,style:r.value,viewBox:`0 0 ${e.width} ${parseInt(o.value,10)}`},c),n)})}}),bet=ot({...nn(),...n7({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),xet=St()({name:"VSpeedDial",props:bet(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"modelValue"),r=R(),s=ee(()=>{const[l,c="center"]=e.location?.split(" ")??[];return`${l} ${c}`}),o=ee(()=>({[`v-speed-dial__content--${s.value.replace(" ","-")}`]:!0}));return It(()=>{const l=ah.filterProps(e);return i(ah,Ie(l,{modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,class:e.class,style:e.style,contentClass:["v-speed-dial__content",o.value,e.contentClass],location:s.value,ref:r,transition:"fade-transition"}),{...n,default:c=>i(Gn,{defaults:{VBtn:{size:"small"}}},{default:()=>[i(So,{appear:!0,group:!0,transition:e.transition},{default:()=>[n.default?.(c)]})]})})}),{}}}),Q4=Symbol.for("vuetify:v-stepper"),wG=ot({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),bG=St()({name:"VStepperActions",props:wG(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Ka();function s(){n("click:prev")}function o(){n("click:next")}return It(()=>{const l={onClick:s},c={onClick:o};return v("div",{class:"v-stepper-actions"},[i(Gn,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:r(e.prevText),variant:"text"}}},{default:()=>[a.prev?.({props:l})??i(ta,l,null)]}),i(Gn,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:r(e.nextText),variant:"tonal"}}},{default:()=>[a.next?.({props:c})??i(ta,c,null)]})])}),{}}}),xG=qc("v-stepper-header"),Cet=ot({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:vn,default:"$complete"},editable:Boolean,editIcon:{type:vn,default:"$edit"},error:Boolean,errorIcon:{type:vn,default:"$error"},icon:vn,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),Eet=ot({...Cet(),...rm()},"VStepperItem"),CG=St()({name:"VStepperItem",directives:{vRipple:Po},props:Eet(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=sm(e,Q4,!0),r=ee(()=>a?.value.value??e.value),s=ee(()=>e.rules.every(m=>m()===!0)),o=ee(()=>!e.disabled&&e.editable),l=ee(()=>!e.disabled&&e.editable),c=ee(()=>e.error||!s.value),f=ee(()=>e.complete||e.rules.length>0&&s.value),d=ee(()=>c.value?e.errorIcon:f.value?e.completeIcon:a.isSelected.value&&e.editable?e.editIcon:e.icon),A=ee(()=>({canEdit:l.value,hasError:c.value,hasCompleted:f.value,title:e.title,subtitle:e.subtitle,step:r.value,value:e.value}));return It(()=>{const m=(!a||a.isSelected.value||f.value||l.value)&&!c.value&&!e.disabled,p=!!(e.title!=null||n.title),h=!!(e.subtitle!=null||n.subtitle);function y(){a?.toggle()}return Sa(v("button",{class:lt(["v-stepper-item",{"v-stepper-item--complete":f.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":c.value},a?.selectedClass.value]),disabled:!e.editable,type:"button",onClick:y},[o.value&&hf(!0,"v-stepper-item"),i(cl,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:m?e.color:void 0,size:24},{default:()=>[n.icon?.(A.value)??(d.value?i(Da,{icon:d.value},null):r.value)]}),v("div",{class:"v-stepper-item__content"},[p&&v("div",{key:"title",class:"v-stepper-item__title"},[n.title?.(A.value)??e.title]),h&&v("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[n.subtitle?.(A.value)??e.subtitle]),n.default?.(A.value)])]),[[Po,e.editable&&e.ripple,null]])}),{}}}),ket=ot({...Wa(lb(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),SG=St()({name:"VStepperWindow",props:ket(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Pn(Q4,null),r=fn(e,"modelValue"),s=ee({get(){return r.value!=null||!a?r.value:a.items.value.find(o=>a.selected.value.includes(o.id))?.value},set(o){r.value=o}});return It(()=>{const o=TA.filterProps(e);return i(TA,Ie({_as:"VStepperWindow"},o,{modelValue:s.value,"onUpdate:modelValue":l=>s.value=l,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),Bet=ot({...ub()},"VStepperWindowItem"),EG=St()({name:"VStepperWindowItem",props:Bet(),setup(e,t){let{slots:n}=t;return It(()=>{const a=IA.filterProps(e);return i(IA,Ie({_as:"VStepperWindowItem"},a,{class:["v-stepper-window-item",e.class],style:e.style}),n)}),{}}}),Tet=ot({altLabels:Boolean,bgColor:String,completeIcon:vn,editIcon:vn,editable:Boolean,errorIcon:vn,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...$A()},"Stepper"),Iet=ot({...Tet(),...am({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...B4(),...jc(wG(),["prevText","nextText"])},"VStepper"),Fet=St()({name:"VStepper",props:Iet(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{items:a,next:r,prev:s,selected:o}=pf(e,Q4),{displayClasses:l,mobile:c}=Vi(e),{completeIcon:f,editIcon:d,errorIcon:A,color:m,editable:p,prevText:h,nextText:y}=MA(e),g=ee(()=>e.items.map((S,B)=>{const F=Or(S,e.itemTitle,S),T=Or(S,e.itemValue,B+1);return{title:F,value:T,raw:S}})),_=ee(()=>a.value.findIndex(S=>o.value.includes(S.id))),b=ee(()=>e.disabled?e.disabled:_.value===0?"prev":_.value===a.value.length-1?"next":!1);return kr({VStepperItem:{editable:p,errorIcon:A,completeIcon:f,editIcon:d,prevText:h,nextText:y},VStepperActions:{color:m,disabled:b,prevText:h,nextText:y}}),It(()=>{const S=fg.filterProps(e),B=!!(n.header||e.items.length),F=e.items.length>0,T=!e.hideActions&&!!(F||n.actions);return i(fg,Ie(S,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":c.value},l.value,e.class],style:e.style}),{default:()=>[B&&i(xG,{key:"stepper-header"},{default:()=>[g.value.map((E,x)=>{let{raw:C,...D}=E;return v(ze,null,[!!x&&i(Fi,null,null),i(CG,D,{default:n[`header-item.${D.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})])})]}),F&&i(SG,{key:"stepper-window"},{default:()=>[g.value.map(E=>i(EG,{value:E.value},{default:()=>n[`item.${E.value}`]?.(E)??n.item?.(E)}))]}),n.default?.({prev:s,next:r}),T&&(n.actions?.({next:r,prev:s})??i(bG,{key:"stepper-actions","onClick:prev":s,"onClick:next":r},n))]})}),{prev:s,next:r}}}),Pet=ot({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...ed(),...sb()},"VSwitch"),Det=St()({name:"VSwitch",inheritAttrs:!1,props:Pet(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=fn(e,"indeterminate"),s=fn(e,"modelValue"),{loaderClasses:o}=Kg(e),{isFocused:l,focus:c,blur:f}=Zc(e),d=R(),A=R(),m=Ua&&window.matchMedia("(forced-colors: active)").matches,p=qe(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),h=qo(),y=qe(()=>e.id||`switch-${h}`);function g(){r.value&&(r.value=!1)}function _(b){b.stopPropagation(),b.preventDefault(),d.value?.input?.click()}return It(()=>{const[b,S]=ff(n),B=so.filterProps(e),F=lf.filterProps(e);return i(so,Ie({ref:A,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":r.value},o.value,e.class]},b,B,{modelValue:s.value,"onUpdate:modelValue":T=>s.value=T,id:y.value,focused:l.value,style:e.style}),{...a,default:T=>{let{id:E,messagesId:x,isDisabled:C,isReadonly:D,isValid:U}=T;const L={model:s,isValid:U};return i(lf,Ie({ref:d},F,{modelValue:s.value,"onUpdate:modelValue":[H=>s.value=H,g],id:E.value,"aria-describedby":x.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:C.value,readonly:D.value,onFocus:c,onBlur:f},S),{...a,default:H=>{let{backgroundColorClasses:oe,backgroundColorStyles:de}=H;return v("div",{class:lt(["v-switch__track",m?void 0:oe.value]),style:Mt(de.value),onClick:_},[a["track-true"]&&v("div",{key:"prepend",class:"v-switch__track-true"},[a["track-true"](L)]),a["track-false"]&&v("div",{key:"append",class:"v-switch__track-false"},[a["track-false"](L)])])},input:H=>{let{inputNode:oe,icon:de,backgroundColorClasses:te,backgroundColorStyles:q}=H;return v(ze,null,[oe,v("div",{class:lt(["v-switch__thumb",{"v-switch__thumb--filled":de||e.loading},e.inset||m?void 0:te.value]),style:Mt(e.inset?void 0:q.value)},[a.thumb?i(Gn,{defaults:{VIcon:{icon:de,size:"x-small"}}},{default:()=>[a.thumb({...L,icon:de})]}):i(u4,null,{default:()=>[e.loading?i(jg,{name:"v-switch",active:!0,color:U.value===!1?void 0:p.value},{default:ce=>a.loader?a.loader(ce):i(BA,{active:ce.isActive,color:ce.color,indeterminate:!0,size:"16",width:"2"},null)}):de&&i(Da,{key:String(de),icon:de,size:"x-small"},null)]})])])}})}})}),Fs({},A)}}),Uet=ot({color:String,height:[Number,String],window:Boolean,...nn(),...rs(),...QA(),...dr(),...$n(),...Aa()},"VSystemBar"),Ret=St()({name:"VSystemBar",props:Uet(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ra(e),{backgroundColorClasses:r,backgroundColorStyles:s}=La(()=>e.color),{elevationClasses:o}=Is(e),{roundedClasses:l}=Tr(e),{ssrBootStyles:c}=tm(),f=ee(()=>e.height??(e.window?32:24)),{layoutItemStyles:d}=GA({id:e.name,order:ee(()=>parseInt(e.order,10)),position:Gt("top"),layoutSize:f,elementSize:f,active:ee(()=>!0),absolute:qe(()=>e.absolute)});return It(()=>i(e.tag,{class:lt(["v-system-bar",{"v-system-bar--window":e.window},a.value,r.value,o.value,l.value,e.class]),style:Mt([s.value,d.value,c.value,e.style])},n)),{}}}),G4=Symbol.for("vuetify:v-tabs"),Net=ot({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Wa(rb({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),kG=St()({name:"VTab",props:Net(),setup(e,t){let{slots:n,attrs:a}=t;const{textColorClasses:r,textColorStyles:s}=$s(()=>e.sliderColor),o=R(),l=R(),c=ee(()=>e.direction==="horizontal"),f=ee(()=>o.value?.group?.isSelected.value??!1);function d(A){let{value:m}=A;if(m){const p=o.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),h=l.value;if(!p||!h)return;const y=getComputedStyle(p).color,g=p.getBoundingClientRect(),_=h.getBoundingClientRect(),b=c.value?"x":"y",S=c.value?"X":"Y",B=c.value?"right":"bottom",F=c.value?"width":"height",T=g[b],E=_[b],x=T>E?g[B]-_[B]:g[b]-_[b],C=Math.sign(x)>0?c.value?"right":"bottom":Math.sign(x)<0?c.value?"left":"top":"center",U=(Math.abs(x)+(Math.sign(x)<0?g[F]:_[F]))/Math.max(g[F],_[F])||0,L=g[F]/_[F]||0,H=1.5;jf(h,{backgroundColor:[y,"currentcolor"],transform:[`translate${S}(${x}px) scale${S}(${L})`,`translate${S}(${x/H}px) scale${S}(${(U-1)/H+1})`,"none"],transformOrigin:Array(3).fill(C)},{duration:225,easing:D0})}}return It(()=>{const A=ta.filterProps(e);return i(ta,Ie({symbol:G4,ref:o,class:["v-tab",e.class],style:e.style,tabindex:f.value?0:-1,role:"tab","aria-selected":String(f.value),active:!1},A,a,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":d}),{...n,default:()=>v(ze,null,[n.default?.()??e.text,!e.hideSlider&&v("div",{ref:l,class:lt(["v-tab__slider",r.value]),style:Mt(s.value)},null)])})}),Fs({},o)}}),Vet=ot({...Wa(lb(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),BG=St()({name:"VTabsWindow",props:Vet(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Pn(G4,null),r=fn(e,"modelValue"),s=ee({get(){return r.value!=null||!a?r.value:a.items.value.find(o=>a.selected.value.includes(o.id))?.value},set(o){r.value=o}});return It(()=>{const o=TA.filterProps(e);return i(TA,Ie({_as:"VTabsWindow"},o,{modelValue:s.value,"onUpdate:modelValue":l=>s.value=l,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),Let=ot({...ub()},"VTabsWindowItem"),TG=St()({name:"VTabsWindowItem",props:Let(),setup(e,t){let{slots:n}=t;return It(()=>{const a=IA.filterProps(e);return i(IA,Ie({_as:"VTabsWindowItem"},a,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function Met(e){return e?e.map(t=>F0(t)?t:{text:t,value:t}):[]}const Oet=ot({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...v4({mandatory:"force",selectedClass:"v-tab-item--selected"}),...ps(),...$n()},"VTabs"),Het=St()({name:"VTabs",props:Oet(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=fn(e,"modelValue"),s=ee(()=>Met(e.items)),{densityClasses:o}=Uo(e),{backgroundColorClasses:l,backgroundColorStyles:c}=La(()=>e.bgColor),{scopeId:f}=im();return kr({VTab:{color:qe(()=>e.color),direction:qe(()=>e.direction),stacked:qe(()=>e.stacked),fixed:qe(()=>e.fixedTabs),sliderColor:qe(()=>e.sliderColor),hideSlider:qe(()=>e.hideSlider)}}),It(()=>{const d=ug.filterProps(e),A=!!(a.window||e.items.length>0);return v(ze,null,[i(ug,Ie(d,{modelValue:r.value,"onUpdate:modelValue":m=>r.value=m,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},o.value,l.value,e.class],style:[{"--v-tabs-height":Zt(e.height)},c.value,e.style],role:"tablist",symbol:G4},f,n),{default:()=>[a.default?.()??s.value.map(m=>a.tab?.({item:m})??i(kG,Ie(m,{key:m.text,value:m.value}),{default:a[`tab.${m.value}`]?()=>a[`tab.${m.value}`]?.({item:m}):void 0}))]}),A&&i(BG,Ie({modelValue:r.value,"onUpdate:modelValue":m=>r.value=m,key:"tabs-window"},f),{default:()=>[s.value.map(m=>a.item?.({item:m})??i(TG,{value:m.value},{default:()=>a[`item.${m.value}`]?.({item:m})})),a.window?.()]})])}),{}}}),$et=ot({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...ed(),...e1()},"VTextarea"),Qet=St()({name:"VTextarea",directives:{vIntersect:Jl},inheritAttrs:!1,props:$et(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const s=fn(e,"modelValue"),{isFocused:o,focus:l,blur:c}=Zc(e),{onIntersect:f}=a7(e),d=ee(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),A=ee(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),m=R(),p=R(),h=Gt(""),y=R(),g=ee(()=>e.persistentPlaceholder||o.value||e.active);function _(){y.value!==document.activeElement&&y.value?.focus(),o.value||l()}function b(U){_(),a("click:control",U)}function S(U){a("mousedown:control",U)}function B(U){U.stopPropagation(),_(),Cn(()=>{s.value="",cw(e["onClick:clear"],U)})}function F(U){const L=U.target;if(s.value=L.value,e.modelModifiers?.trim){const H=[L.selectionStart,L.selectionEnd];Cn(()=>{L.selectionStart=H[0],L.selectionEnd=H[1]})}}const T=R(),E=R(Number(e.rows)),x=ee(()=>["plain","underlined"].includes(e.variant));Er(()=>{e.autoGrow||(E.value=Number(e.rows))});function C(){e.autoGrow&&Cn(()=>{if(!T.value||!p.value)return;const U=getComputedStyle(T.value),L=getComputedStyle(p.value.$el),H=parseFloat(U.getPropertyValue("--v-field-padding-top"))+parseFloat(U.getPropertyValue("--v-input-padding-top"))+parseFloat(U.getPropertyValue("--v-field-padding-bottom")),oe=T.value.scrollHeight,de=parseFloat(U.lineHeight),te=Math.max(parseFloat(e.rows)*de+H,parseFloat(L.getPropertyValue("--v-input-control-height"))),q=parseFloat(e.maxRows)*de+H||1/0,ce=ar(oe??0,te,q);E.value=Math.floor((ce-H)/de),h.value=Zt(ce)})}An(C),Ge(s,C),Ge(()=>e.rows,C),Ge(()=>e.maxRows,C),Ge(()=>e.density,C),Ge(E,U=>{a("update:rows",U)});let D;return Ge(T,U=>{U?(D=new ResizeObserver(C),D.observe(T.value)):D?.disconnect()}),ha(()=>{D?.disconnect()}),It(()=>{const U=!!(r.counter||e.counter||e.counterValue),L=!!(U||r.details),[H,oe]=ff(n),{modelValue:de,...te}=so.filterProps(e),q={...uf.filterProps(e),"onClick:clear":B};return i(so,Ie({ref:m,modelValue:s.value,"onUpdate:modelValue":ce=>s.value=ce,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":x.value},e.class],style:e.style},H,te,{centerAffix:E.value===1&&!x.value,focused:o.value}),{...r,default:ce=>{let{id:le,isDisabled:Z,isDirty:ne,isReadonly:G,isValid:W,hasDetails:Q}=ce;return i(uf,Ie({ref:p,style:{"--v-textarea-control-height":h.value},onClick:b,onMousedown:S,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},q,{id:le.value,active:g.value||ne.value,centerAffix:E.value===1&&!x.value,dirty:ne.value||e.dirty,disabled:Z.value,focused:o.value,details:Q.value,error:W.value===!1}),{...r,default:O=>{let{props:{class:ae,...j}}=O;return v(ze,null,[e.prefix&&v("span",{class:"v-text-field__prefix"},[e.prefix]),Sa(v("textarea",Ie({ref:y,class:ae,value:s.value,onInput:F,autofocus:e.autofocus,readonly:G.value,disabled:Z.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:_,onBlur:c},j,oe),null),[[Jl,{handler:f},null,{once:!0}]]),e.autoGrow&&Sa(v("textarea",{class:lt([ae,"v-textarea__sizer"]),id:`${j.id}-sizer`,"onUpdate:modelValue":J=>s.value=J,ref:T,readonly:!0,"aria-hidden":"true"},null),[[Wf,s.value]]),e.suffix&&v("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:L?ce=>v(ze,null,[r.details?.(ce),U&&v(ze,null,[v("span",null,null),i(ob,{active:e.persistentCounter||o.value,value:d.value,max:A.value,disabled:e.disabled},r.counter)])]):void 0})}),Fs({},m,p,y)}}),Get=ot({withBackground:Boolean,...nn(),...Aa(),...$n()},"VThemeProvider"),zet=St()({name:"VThemeProvider",props:Get(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ra(e);return()=>e.withBackground?i(e.tag,{class:lt(["v-theme-provider",a.value,e.class]),style:Mt(e.style)},{default:()=>[n.default?.()]}):n.default?.()}}),Wet=ot({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:vn,iconColor:String,lineColor:String,...nn(),...dr(),...Xu(),...rs()},"VTimelineDivider"),Ket=St()({name:"VTimelineDivider",props:Wet(),setup(e,t){let{slots:n}=t;const{sizeClasses:a,sizeStyles:r}=Ih(e,"v-timeline-divider__dot"),{backgroundColorStyles:s,backgroundColorClasses:o}=La(()=>e.dotColor),{roundedClasses:l}=Tr(e,"v-timeline-divider__dot"),{elevationClasses:c}=Is(e),{backgroundColorClasses:f,backgroundColorStyles:d}=La(()=>e.lineColor);return It(()=>v("div",{class:lt(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:Mt(e.style)},[v("div",{class:lt(["v-timeline-divider__before",f.value]),style:Mt(d.value)},null),!e.hideDot&&v("div",{key:"dot",class:lt(["v-timeline-divider__dot",c.value,l.value,a.value]),style:Mt(r.value)},[v("div",{class:lt(["v-timeline-divider__inner-dot",o.value,l.value]),style:Mt(s.value)},[n.default?i(Gn,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):i(Da,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),v("div",{class:lt(["v-timeline-divider__after",f.value]),style:Mt(d.value)},null)])),{}}}),IG=ot({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:vn,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...nn(),...$r(),...rs(),...dr(),...Xu(),...$n()},"VTimelineItem"),jet=St()({name:"VTimelineItem",props:IG(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Qr(e),r=Gt(0),s=R();return Ge(s,o=>{o&&(r.value=o.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width??0)},{flush:"post"}),It(()=>v("div",{class:lt(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:Mt([{"--v-timeline-dot-size":Zt(r.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${Zt(e.lineInset)})`:Zt(0)},e.style])},[v("div",{class:"v-timeline-item__body",style:Mt(a.value)},[n.default?.()]),i(Ket,{ref:s,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),e.density!=="compact"&&v("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&n.opposite?.()])])),{}}}),qet=ot({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...jc(IG({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...nn(),...ps(),...$n(),...Aa()},"VTimeline"),Yet=St()({name:"VTimeline",props:qet(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ra(e),{densityClasses:r}=Uo(e),{rtlClasses:s}=as();kr({VTimelineDivider:{lineColor:qe(()=>e.lineColor)},VTimelineItem:{density:qe(()=>e.density),dotColor:qe(()=>e.dotColor),fillDot:qe(()=>e.fillDot),hideOpposite:qe(()=>e.hideOpposite),iconColor:qe(()=>e.iconColor),lineColor:qe(()=>e.lineColor),lineInset:qe(()=>e.lineInset),size:qe(()=>e.size)}});const o=ee(()=>{const c=e.side?e.side:e.density!=="default"?"end":null;return c&&`v-timeline--side-${c}`}),l=ee(()=>{const c=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return c;case"start":return c[0];case"end":return c[1];default:return null}});return It(()=>i(e.tag,{class:lt(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,l.value,{"v-timeline--inset-line":!!e.lineInset},a.value,r.value,o.value,s.value,e.class]),style:Mt([{"--v-timeline-line-thickness":Zt(e.lineThickness)},e.style])},n)),{}}});function Zf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(t,"0")}const Xet=ot({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),Bk=St()({name:"VTimePickerClock",props:Xet(),emits:{change:e=>!0,input:e=>!0},setup(e,t){let{emit:n}=t;const a=R(null),r=R(null),s=R(void 0),o=R(!1),l=R(null),c=R(null),f=M8(le=>n("change",le),750),{textColorClasses:d,textColorStyles:A}=$s(()=>e.color),{backgroundColorClasses:m,backgroundColorStyles:p}=La(()=>e.color),h=ee(()=>e.max-e.min+1),y=ee(()=>e.double?h.value/2:h.value),g=ee(()=>360/y.value),_=ee(()=>g.value*Math.PI/180),b=ee(()=>e.modelValue==null?e.min:e.modelValue),S=ee(()=>.62),B=ee(()=>{const le=[];for(let Z=e.min;Z<=e.max;Z=Z+e.step)le.push(Z);return le});Ge(()=>e.modelValue,le=>{s.value=le});function F(le){s.value!==le&&(s.value=le),n("input",le)}function T(le){return!e.allowedValues||e.allowedValues(le)}function E(le){if(!e.scrollable||e.disabled)return;le.preventDefault();const Z=Math.sign(-le.deltaY||1);let ne=b.value;do ne=ne+Z,ne=(ne-e.min+h.value)%h.value+e.min;while(!T(ne)&&ne!==b.value);ne!==e.displayedValue&&F(ne),f(ne)}function x(le){return e.double&&le-e.min>=y.value}function C(le){return x(le)?S.value:1}function D(le){const Z=e.rotate*Math.PI/180;return{x:Math.sin((le-e.min)*_.value+Z)*C(le),y:-Math.cos((le-e.min)*_.value+Z)*C(le)}}function U(le,Z){const ne=(Math.round(le/g.value)+(Z?y.value:0))%h.value+e.min;return le<360-g.value/2?ne:Z?e.max-y.value+1:e.min}function L(le){const{x:Z,y:ne}=D(le);return{left:`${Math.round(50+Z*50)}%`,top:`${Math.round(50+ne*50)}%`}}function H(le,Z){const ne=Z.x-le.x,G=Z.y-le.y;return Math.sqrt(ne*ne+G*G)}function oe(le,Z){const ne=2*Math.atan2(Z.y-le.y-H(le,Z),Z.x-le.x);return Math.abs(ne*180/Math.PI)}function de(le){l.value===null&&(l.value=le),c.value=le,F(le)}function te(le){if(le.preventDefault(),!o.value&&le.type!=="click"||!a.value)return;const{width:Z,top:ne,left:G}=a.value?.getBoundingClientRect(),{width:W}=r.value?.getBoundingClientRect()??{width:0},{clientX:Q,clientY:O}="touches"in le?le.touches[0]:le,ae={x:Z/2,y:-Z/2},j={x:Q-G,y:ne-O},J=Math.round(oe(ae,j)-e.rotate+360)%360,ie=e.double&&H(ae,j)<(W+W*S.value)/4,X=Math.ceil(15/g.value);let fe;for(let M=0;M<X;M++)if(fe=U(J+M*g.value,ie),T(fe)||(fe=U(J-M*g.value,ie),T(fe)))return de(fe)}function q(le){e.disabled||(le.preventDefault(),window.addEventListener("mousemove",te),window.addEventListener("touchmove",te),window.addEventListener("mouseup",ce),window.addEventListener("touchend",ce),l.value=null,c.value=null,o.value=!0,te(le))}function ce(le){le.stopPropagation(),window.removeEventListener("mousemove",te),window.removeEventListener("touchmove",te),window.removeEventListener("mouseup",ce),window.removeEventListener("touchend",ce),o.value=!1,c.value!==null&&T(c.value)&&n("change",c.value)}It(()=>v("div",{class:lt([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:q,onTouchstart:q,onWheel:E,ref:a},[v("div",{class:"v-time-picker-clock__inner",ref:r},[v("div",{class:lt([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":x(e.modelValue)},d.value]),style:Mt([{transform:`rotate(${e.rotate+g.value*(b.value-e.min)}deg) scaleY(${C(b.value)})`},A.value])},null),B.value.map(le=>{const Z=le===b.value;return v("div",{class:lt([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":Z,"v-time-picker-clock__item--disabled":e.disabled||!T(le)},Z&&m.value]),style:Mt([L(le),Z&&p.value])},[v("span",null,[e.format(le)])])})])]))}}),Jet=ot({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),Tk=St()({name:"VTimePickerControls",props:Jet(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Ka();return It(()=>{let s=e.hour;return e.ampm&&(s=s?(s-1)%12+1:12),v("div",{class:"v-time-picker-controls"},[v("div",{class:lt({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[i(ta,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:lt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":Zf(`${s}`),onClick:()=>n("update:viewMode","hour")},null),v("span",{class:lt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[N(":")]),i(ta,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:lt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":Zf(e.minute),onClick:()=>n("update:viewMode","minute")},null),e.useSeconds&&v("span",{class:lt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[N(":")]),e.useSeconds&&i(ta,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>n("update:viewMode","second"),class:lt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":Zf(e.second)},null),e.ampm&&v("div",{class:"v-time-picker-controls__ampm"},[i(ta,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:lt({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:r("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?n("update:period","am"):null},null),i(ta,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:lt({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:r("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),Zet=Bi(24),FG=Bi(12),ett=FG.map(e=>e+12);Bi(60);const ttt=ot({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...Wa(cb({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),ntt=St()({name:"VTimePicker",props:ttt(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Ka(),s=R(null),o=R(null),l=R(null),c=R(null),f=R(null),d=R(null),A=R("am"),m=fn(e,"viewMode","hour"),p=R(null),h=R(null),y=ee(()=>{let L;if(e.allowedHours instanceof Array?L=de=>e.allowedHours.includes(de):L=e.allowedHours,!e.min&&!e.max)return L;const H=e.min?Number(e.min.split(":")[0]):0,oe=e.max?Number(e.max.split(":")[0]):23;return de=>de>=Number(H)&&de<=Number(oe)&&(!L||L(de))}),g=ee(()=>{let L;const H=!y.value||s.value===null||y.value(s.value);if(e.allowedMinutes instanceof Array?L=Z=>e.allowedMinutes.includes(Z):L=e.allowedMinutes,!e.min&&!e.max)return H?L:()=>!1;const[oe,de]=e.min?e.min.split(":").map(Number):[0,0],[te,q]=e.max?e.max.split(":").map(Number):[23,59],ce=oe*60+Number(de),le=te*60+Number(q);return Z=>{const ne=60*s.value+Z;return ne>=ce&&ne<=le&&H&&(!L||L(Z))}}),_=ee(()=>{let L;const oe=(!y.value||s.value===null||y.value(s.value))&&(!g.value||o.value===null||g.value(o.value));if(e.allowedSeconds instanceof Array?L=W=>e.allowedSeconds.includes(W):L=e.allowedSeconds,!e.min&&!e.max)return oe?L:()=>!1;const[de,te,q]=e.min?e.min.split(":").map(Number):[0,0,0],[ce,le,Z]=e.max?e.max.split(":").map(Number):[23,59,59],ne=de*3600+te*60+Number(q||0),G=ce*3600+le*60+Number(Z||0);return W=>{const Q=3600*s.value+60*o.value+W;return Q>=ne&&Q<=G&&oe&&(!L||L(W))}}),b=ee(()=>e.format==="ampm");Ge(()=>e.modelValue,L=>E(L)),An(()=>{E(e.modelValue)});function S(){return s.value!=null&&o.value!=null&&(!e.useSeconds||l.value!=null)?`${Zf(s.value)}:${Zf(o.value)}`+(e.useSeconds?`:${Zf(l.value)}`:""):null}function B(){const L=S();L!==null&&n("update:modelValue",L)}function F(L){return L?(L-1)%12+1:12}function T(L,H){return L%12+(H==="pm"?12:0)}function E(L){if(L==null||L==="")s.value=null,o.value=null,l.value=null;else if(L instanceof Date)s.value=L.getHours(),o.value=L.getMinutes(),l.value=L.getSeconds();else{const[H,,oe,,de,te]=L.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);s.value=te?T(parseInt(H,10),te):parseInt(H,10),o.value=parseInt(oe,10),l.value=parseInt(de||0,10)}A.value=s.value==null||s.value<12?"am":"pm"}function x(L,H){const oe=y.value;if(!oe)return H;const de=b.value?H<12?FG:ett:Zet;return((de.find(q=>oe((q+H)%de.length+de[0]))||0)+H)%de.length+de[0]}function C(L){if(A.value=L,s.value!=null){const H=s.value+(A.value==="am"?-12:12);s.value=x("hour",H)}return n("update:period",L),B(),!0}function D(L){m.value==="hour"?s.value=b.value?T(L,A.value):L:m.value==="minute"?o.value=L:l.value=L}function U(L){switch(m.value||"hour"){case"hour":n("update:hour",L);break;case"minute":n("update:minute",L);break;case"second":n("update:second",L);break}const H=s.value!==null&&o.value!==null&&(e.useSeconds?l.value!==null:!0);m.value==="hour"?m.value="minute":e.useSeconds&&m.value==="minute"&&(m.value="second"),!(s.value===c.value&&o.value===f.value&&(!e.useSeconds||l.value===d.value)||S()===null)&&(c.value=s.value,f.value=o.value,e.useSeconds&&(d.value=l.value),H&&B())}It(()=>{const L=rh.filterProps(e),H=Tk.filterProps(e),oe=Bk.filterProps(Wa(e,["format","modelValue","min","max"]));return i(rh,Ie(L,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>a.title?.()??v("div",{class:"v-time-picker__title"},[r(e.title)]),header:()=>i(Tk,Ie(H,{ampm:b.value,hour:s.value,minute:o.value,period:A.value,second:l.value,viewMode:m.value,"onUpdate:period":de=>C(de),"onUpdate:viewMode":de=>m.value=de,ref:p}),null),default:()=>i(Bk,Ie(oe,{allowedValues:m.value==="hour"?y.value:m.value==="minute"?g.value:_.value,double:m.value==="hour"&&!b.value,format:m.value==="hour"?b.value?F:de=>de:de=>Zf(de,2),max:m.value==="hour"?b.value&&A.value==="am"?11:23:59,min:m.value==="hour"&&b.value&&A.value==="pm"?12:0,size:20,step:m.value==="hour"?1:5,modelValue:m.value==="hour"?s.value:m.value==="minute"?o.value:l.value,onChange:U,onInput:D,ref:h}),null),actions:a.actions})})}}),att=ot({...nn(),...hl({variant:"text"})},"VToolbarItems"),rtt=St()({name:"VToolbarItems",props:att(),setup(e,t){let{slots:n}=t;return kr({VBtn:{color:qe(()=>e.color),height:"inherit",variant:qe(()=>e.variant)}}),It(()=>v("div",{class:lt(["v-toolbar-items",e.class]),style:Mt(e.style)},[n.default?.()])),{}}}),stt=ot({id:String,interactive:Boolean,text:String,...Wa(Zg({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),PG=St()({name:"VTooltip",props:stt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=fn(e,"modelValue"),{scopeId:r}=im(),s=qo(),o=qe(()=>e.id||`v-tooltip-${s}`),l=R(),c=ee(()=>e.location.split(" ").length>1?e.location:e.location+" center"),f=ee(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),d=qe(()=>e.transition!=null?e.transition:a.value?"scale-transition":"fade-transition"),A=ee(()=>Ie({"aria-describedby":o.value},e.activatorProps));return It(()=>{const m=Hu.filterProps(e);return i(Hu,Ie({ref:l,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:o.value},m,{modelValue:a.value,"onUpdate:modelValue":p=>a.value=p,transition:d.value,absolute:!0,location:c.value,origin:f.value,persistent:!0,role:"tooltip",activatorProps:A.value,_disableGlobalStack:!0},r),{activator:n.activator,default:function(){for(var p=arguments.length,h=new Array(p),y=0;y<p;y++)h[y]=arguments[y];return n.default?.(...h)??e.text}})}),Fs({},l)}}),ott=ot({...Wa(LQ({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),Ik=St()({name:"VTreeviewGroup",props:ott(),setup(e,t){let{slots:n}=t;const a=R(),r=ee(()=>a.value?.isOpen?e.collapseIcon:e.expandIcon),s=ee(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:r.value}}));return It(()=>{const o=dg.filterProps(e);return i(dg,Ie(o,{ref:a,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?l=>v(ze,null,[i(Gn,{defaults:s.value},{default:()=>[n.activator?.(l)]})]):void 0})}),{}}}),DG=Symbol.for("vuetify:v-treeview"),UG=ot({loading:Boolean,hideActions:Boolean,indentLines:Array,toggleIcon:vn,...HQ({slim:!0})},"VTreeviewItem"),Fk=St()({name:"VTreeviewItem",props:UG(),emits:{toggleExpand:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=Pn(DG,{visibleIds:R()}).visibleIds,s=R(),o=ee(()=>s.value?.root.activatable.value&&s.value?.isGroupActivator),l=ee(()=>s.value?.link.isClickable.value||e.value!=null&&!!s.value?.list),c=ee(()=>!e.disabled&&e.link!==!1&&(e.link||l.value||o.value)),f=ee(()=>r.value&&!r.value.has(Sn(s.value?.id)));function d(m){c.value&&o.value&&s.value?.activate(!s.value?.isActivated,m)}function A(m){m.preventDefault(),m.stopPropagation(),a("toggleExpand",m)}return It(()=>{const m=Zl.filterProps(e),p=n.prepend||e.toggleIcon||e.indentLines;return i(Zl,Ie({ref:s},m,{active:s.value?.isActivated||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":o.value,"v-treeview-item--filtered":f.value},e.class],ripple:!1,onClick:d}),{...n,prepend:p?h=>v(ze,null,[e.indentLines&&e.indentLines.length>0?v("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(y=>v("div",{class:lt(`v-treeview-indent-line v-treeview-indent-line--${y}`)},null))]):"",!e.hideActions&&i(jQ,{start:!0},{default:()=>[e.toggleIcon?i(ta,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:A},{loader:()=>i(BA,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}):v("div",{class:"v-treeview-item__level"},null)]}),n.prepend?.(h)]):void 0})}),Fs({},s)}}),RG=ot({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:vn,default:"$checkboxIndeterminate"},falseIcon:vn,trueIcon:vn,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...jc(UG(),["hideActions"]),...ps()},"VTreeviewChildren"),L2=St()({name:"VTreeviewChildren",props:RG(),setup(e,t){let{slots:n}=t;const a=As(new Set),r=R([]),s=ee(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function o(c){try{if(!e.items?.length||!e.loadChildren)return;c?.children?.length===0&&(a.add(c.value),await e.loadChildren(c.raw))}finally{a.delete(c.value)}}function l(c,f){e.selectable&&c(f)}return()=>n.default?.()??e.items?.map((c,f,d)=>{const{children:A,props:m}=c,p=a.has(c.value),h=!!d.at(f+1)?.children,y=e.path?.length??0,g=d.length-1===f,_={index:f,depth:y,isFirst:f===0,isLast:g,path:[...e.path,f],hideAction:e.hideActions},b=Yte({depth:y,isLast:g,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),S={prepend:T=>v(ze,null,[e.selectable&&(!A||A&&!["leaf","single-leaf"].includes(e.selectStrategy))&&v("div",null,[i(Ou,{key:c.value,modelValue:T.isSelected,disabled:e.disabled,loading:p,color:e.selectedColor,density:e.density,indeterminate:T.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":E=>l(T.select,E),onClick:E=>E.stopPropagation(),onKeydown:E=>{["Enter","Space"].includes(E.key)&&(E.stopPropagation(),l(T.select,T.isSelected))}},null)]),n.prepend?.({...T,..._,item:c.raw,internalItem:c})]),append:n.append?T=>n.append?.({...T,..._,item:c.raw,internalItem:c}):void 0,title:n.title?T=>n.title?.({...T,item:c.raw,internalItem:c}):void 0,subtitle:n.subtitle?T=>n.subtitle?.({...T,item:c.raw,internalItem:c}):void 0},B=Ik.filterProps(m),F=L2.filterProps({...e,..._});return A?i(Ik,Ie(B,{value:e.returnObject?c.raw:B?.value,rawId:B?.value}),{activator:T=>{let{props:E}=T;const x={...m,...E,value:m?.value,onToggleExpand:[()=>o(c),E.onClick],onClick:s.value?[()=>o(c),E.onClick]:()=>l(r.value[f]?.select,!r.value[f]?.isSelected)};return i(Fk,Ie({ref:C=>r.value[f]=C},x,{hideActions:e.hideActions,indentLines:b.node,value:e.returnObject?c.raw:m.value,loading:p}),S)},default:()=>i(L2,Ie(F,{items:A,indentLinesVariant:e.indentLinesVariant,parentIndentLines:b.children,isLastGroup:h,returnObject:e.returnObject}),n)}):Rx(n.item,{props:m,item:c.raw,internalItem:c},()=>c.type==="divider"?Rx(n.divider,{props:c.raw},()=>i(Fi,c.props,null)):c.type==="subheader"?Rx(n.subheader,{props:c.raw},()=>i(Rh,c.props,null)):i(Fk,Ie(m,{hideActions:e.hideActions,indentLines:b.leaf,value:e.returnObject?Sn(c.raw):m.value}),S))})}});function NG(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const n of e)t.push(n),n.children&&NG(n.children,t);return t}const itt=ot({openAll:Boolean,indentLines:[Boolean,String],search:String,...Nh({filterKeys:["title"]}),...Wa(RG(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...Wa(KQ({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),ltt=St()({name:"VTreeview",props:itt(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n,emit:a}=t;const{items:r}=WQ(e),s=qe(()=>e.activeColor),o=qe(()=>e.baseColor),l=qe(()=>e.color),c=fn(e,"activated"),f=fn(e,"selected"),d=ee({get:()=>e.modelValue??f.value,set(S){f.value=S,a("update:modelValue",S)}}),A=R(),m=ee(()=>e.openAll?b(r.value):e.opened),p=ee(()=>NG(r.value)),h=qe(()=>e.search),{filteredItems:y}=Vh(e,p,h),g=ee(()=>{if(!h.value)return null;const S=A.value?.getPath;return S?new Set(y.value.flatMap(B=>{const F=e.returnObject?B.raw:B.props.value;return[...S(F),..._(F)].map(Sn)})):null});function _(S){const B=[],F=(A.value?.children.get(S)??[]).slice();for(;F.length;){const T=F.shift();T&&(B.push(T),F.push(...(A.value?.children.get(T)??[]).slice()))}return B}function b(S){let B=[];for(const F of S)F.children&&(B.push(e.returnObject?Sn(F.raw):F.value),F.children&&(B=B.concat(b(F.children))));return B}return za(DG,{visibleIds:g}),kr({VTreeviewGroup:{activeColor:s,baseColor:o,color:l,collapseIcon:qe(()=>e.collapseIcon),expandIcon:qe(()=>e.expandIcon)},VTreeviewItem:{activeClass:qe(()=>e.activeClass),activeColor:s,baseColor:o,color:l,density:qe(()=>e.density),disabled:qe(()=>e.disabled),lines:qe(()=>e.lines),variant:qe(()=>e.variant)}}),It(()=>{const S=nh.filterProps(e),B=L2.filterProps(e),F=typeof e.indentLines=="boolean"?"default":e.indentLines;return i(nh,Ie({ref:A},S,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:m.value,activated:c.value,"onUpdate:activated":T=>c.value=T,selected:d.value,"onUpdate:selected":T=>d.value=T}),{default:()=>[i(L2,Ie(B,{density:e.density,returnObject:e.returnObject,items:r.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:F}),n)]})}),{}}}),utt=St()({name:"VValidation",props:CQ(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=SQ(e,"validation");return()=>n.default?.(a)}}),ctt=Object.freeze(Object.defineProperty({__proto__:null,VAlert:gqe,VAlertTitle:pQ,VApp:Sje,VAppBar:zje,VAppBarNavIcon:fqe,VAppBarTitle:Aqe,VAutocomplete:VYe,VAvatar:cl,VBadge:MYe,VBanner:$Ye,VBannerActions:l7,VBannerText:u7,VBottomNavigation:GYe,VBottomSheet:WYe,VBreadcrumbs:YYe,VBreadcrumbsDivider:d7,VBreadcrumbsItem:f7,VBtn:ta,VBtnGroup:rk,VBtnToggle:Xje,VCard:tXe,VCardActions:A7,VCardItem:h7,VCardSubtitle:m7,VCardText:p7,VCardTitle:v7,VCarousel:cXe,VCarouselItem:fXe,VCheckbox:Tqe,VCheckboxBtn:Ou,VChip:Uh,VChipGroup:Uqe,VClassIcon:BB,VCode:AXe,VCol:$Je,VColorPicker:nJe,VCombobox:rJe,VComponentIcon:LS,VConfirmEdit:oJe,VContainer:LJe,VCounter:ob,VDataIterator:hJe,VDataTable:PJe,VDataTableFooter:Ag,VDataTableHeaders:FA,VDataTableRow:L4,VDataTableRows:PA,VDataTableServer:NJe,VDataTableVirtual:UJe,VDatePicker:eZe,VDatePickerControls:_k,VDatePickerHeader:wk,VDatePickerMonth:bk,VDatePickerMonths:xk,VDatePickerYears:Ck,VDefaultsProvider:Gn,VDialog:fk,VDialogBottomTransition:Tje,VDialogTopTransition:Ije,VDialogTransition:eb,VDivider:Fi,VEmptyState:nZe,VExpandTransition:tb,VExpandXTransition:d4,VExpansionPanel:aZe,VExpansionPanelText:Sk,VExpansionPanelTitle:Ek,VExpansionPanels:oZe,VFab:lZe,VFabTransition:Bje,VFadeTransition:sg,VField:uf,VFieldLabel:Qp,VFileInput:dZe,VFooter:AZe,VForm:vZe,VHover:pZe,VIcon:Da,VImg:zc,VInfiniteScroll:yZe,VInput:so,VItem:bZe,VItemGroup:wZe,VKbd:CZe,VLabel:Dh,VLayout:EZe,VLayoutItem:BZe,VLazy:IZe,VLigatureIcon:Yne,VList:nh,VListGroup:dg,VListImg:eYe,VListItem:Zl,VListItemAction:jQ,VListItemMedia:aYe,VListItemSubtitle:MQ,VListItemTitle:OQ,VListSubheader:Rh,VLocaleProvider:PZe,VMain:UZe,VMenu:ah,VMessages:bQ,VNavigationDrawer:QZe,VNoSsr:GZe,VNumberInput:qZe,VOtpInput:XZe,VOverlay:Hu,VPagination:gk,VParallax:eet,VProgressCircular:BA,VProgressLinear:nb,VRadio:net,VRadioGroup:ret,VRangeSlider:oet,VRating:uet,VResponsive:nk,VRow:qJe,VScaleTransition:u4,VScrollXReverseTransition:Pje,VScrollXTransition:Fje,VScrollYReverseTransition:Uje,VScrollYTransition:Dje,VSelect:E4,VSelectionControl:lf,VSelectionControlGroup:yQ,VSheet:fg,VSkeletonLoader:Aet,VSlideGroup:ug,VSlideGroupItem:met,VSlideXReverseTransition:Nje,VSlideXTransition:Rje,VSlideYReverseTransition:Vje,VSlideYTransition:c4,VSlider:pk,VSnackbar:kk,VSnackbarQueue:pet,VSpacer:oG,VSparkline:wet,VSpeedDial:xet,VStepper:Fet,VStepperActions:bG,VStepperHeader:xG,VStepperItem:CG,VStepperWindow:SG,VStepperWindowItem:EG,VSvgIcon:kB,VSwitch:Det,VSystemBar:Ret,VTab:kG,VTable:DA,VTabs:Het,VTabsWindow:BG,VTabsWindowItem:TG,VTextField:Wc,VTextarea:Qet,VThemeProvider:zet,VTimePicker:ntt,VTimePickerClock:Bk,VTimePickerControls:Tk,VTimeline:Yet,VTimelineItem:jet,VToolbar:ak,VToolbarItems:rtt,VToolbarTitle:l4,VTooltip:PG,VTreeview:ltt,VTreeviewGroup:Ik,VTreeviewItem:Fk,VValidation:utt,VVirtualScroll:ib,VWindow:TA,VWindowItem:IA},Symbol.toStringTag,{value:"Module"}));function dtt(e,t){const n=t.modifiers||{},a=t.value,{once:r,immediate:s,...o}=n,l=!Object.keys(o).length,{handler:c,options:f}=typeof a=="object"?a:{handler:a,options:{attributes:o?.attr??l,characterData:o?.char??l,childList:o?.child??l,subtree:o?.sub??l}},d=new MutationObserver(function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1?arguments[1]:void 0;c?.(A,m),r&&VG(e,t)});s&&c?.([],d),e._mutate=Object(e._mutate),e._mutate[t.instance.$.uid]={observer:d},d.observe(e,f)}function VG(e,t){e._mutate?.[t.instance.$.uid]&&(e._mutate[t.instance.$.uid].observer.disconnect(),delete e._mutate[t.instance.$.uid])}const ftt={mounted:dtt,unmounted:VG};function Att(e,t){const n=t.value,a={passive:!t.modifiers?.active};window.addEventListener("resize",n,a),e._onResize=Object(e._onResize),e._onResize[t.instance.$.uid]={handler:n,options:a},t.modifiers?.quiet||n()}function mtt(e,t){if(!e._onResize?.[t.instance.$.uid])return;const{handler:n,options:a}=e._onResize[t.instance.$.uid];window.removeEventListener("resize",n,a),delete e._onResize[t.instance.$.uid]}const vtt={mounted:Att,unmounted:mtt};function LG(e,t){const{self:n=!1}=t.modifiers??{},a=t.value,r=typeof a=="object"&&a.options||{passive:!0},s=typeof a=="function"||"handleEvent"in a?a:a.handler,o=n?e:t.arg?document.querySelector(t.arg):window;o&&(o.addEventListener("scroll",s,r),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:s,options:r,target:n?void 0:o})}function MG(e,t){if(!e._onScroll?.[t.instance.$.uid])return;const{handler:n,options:a,target:r=e}=e._onScroll[t.instance.$.uid];r.removeEventListener("scroll",n,a),delete e._onScroll[t.instance.$.uid]}function htt(e,t){t.value!==t.oldValue&&(MG(e,t),LG(e,t))}const ptt={mounted:LG,unmounted:MG,updated:htt};function gtt(e,t){const n=typeof e=="string"?I(e):e,a=ytt(n,t);return{mounted:a,updated:a,unmounted(r){U8(null,r)}}}function ytt(e,t){return function(n,a,r){const s=typeof t=="function"?t(a):t,o=a.value?.text??a.value??s?.text,l=F0(a.value)?a.value:{},c=()=>o??n.textContent,f=(r.ctx===a.instance.$?_tt(r,a.instance.$)?.provides:r.ctx?.provides)??a.instance.$.provides,d=nu(e,Ie(s,l),c);d.appContext=Object.assign(Object.create(null),a.instance.$.appContext,{provides:f}),U8(d,n)}}function _tt(e,t){const n=new Set,a=s=>{for(const o of s){if(!o)continue;if(o===e||o.el&&e.el&&o.el===e.el)return!0;n.add(o);let l;if(o.suspense?l=a([o.ssContent]):Array.isArray(o.children)?l=a(o.children):o.component?.vnode&&(l=a([o.component?.subTree])),l)return l;n.delete(o)}return!1};if(!a([t.subTree]))return t;const r=Array.from(n).reverse();for(const s of r)if(s.component)return s.component;return t}const wtt=gtt(PG,e=>({activator:"parent",location:e.arg?.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value})),btt=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:dk,Intersect:Jl,Mutate:ftt,Resize:vtt,Ripple:Po,Scroll:ptt,Tooltip:wtt,Touch:N2},Symbol.toStringTag,{value:"Module"}));const xtt=new Map,Ctt={activated:!1,tokenObservers:[]};function eu(e){return xtt.get(e)||Object.assign({},Ctt)}const XN={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3};class Stt{constructor(t,n,a,r,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=a,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new L0,this.pending.promise.catch(n=>{}),await Ett(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new L0,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Ett(e){return new Promise(t=>{setTimeout(t,e)})}const ktt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},M2=new mh("appCheck","AppCheck",ktt);function OG(e){if(!eu(e).activated)throw M2.create("use-before-activation",{appName:e.name})}const Btt="firebase-app-check-database",Ttt=1,Pk="firebase-app-check-store";let $y=null;function Itt(){return $y||($y=new Promise((e,t)=>{try{const n=indexedDB.open(Btt,Ttt);n.onsuccess=a=>{e(a.target.result)},n.onerror=a=>{var r;t(M2.create("storage-open",{originalErrorMessage:(r=a.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=a=>{const r=a.target.result;switch(a.oldVersion){case 0:r.createObjectStore(Pk,{keyPath:"compositeKey"})}}}catch(n){t(M2.create("storage-open",{originalErrorMessage:n?.message}))}}),$y)}function Ftt(e,t){return Ptt(Dtt(e),t)}async function Ptt(e,t){const a=(await Itt()).transaction(Pk,"readwrite"),s=a.objectStore(Pk).put({compositeKey:e,value:t});return new Promise((o,l)=>{s.onsuccess=c=>{o()},a.onerror=c=>{var f;l(M2.create("storage-set",{originalErrorMessage:(f=c.target.error)===null||f===void 0?void 0:f.message}))}})}function Dtt(e){return`${e.options.appId}-${e.name}`}const Dk=new Bg("@firebase/app-check");function JN(e,t){return b6()?Ftt(e,t).catch(n=>{Dk.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}const Utt={error:"UNKNOWN_ERROR"};function Rtt(e){return bw.encodeString(JSON.stringify(e),!1)}async function Uk(e,t=!1,n=!1){const a=e.app;OG(a);const r=eu(a);let s=r.token,o;if(s&&!Gp(s)&&(r.token=void 0,s=void 0),!s){const f=await r.cachedTokenPromise;f&&(Gp(f)?s=f:await JN(a,void 0))}if(!t&&s&&Gp(s))return{token:s.token};let l=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=await eu(a).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?Dk.warn(f.message):n&&Dk.error(f),o=f}let c;return s?o?Gp(s)?c={token:s.token,internalError:o}:c=eV(o):(c={token:s.token},r.token=s,await JN(a,s)):c=eV(o),l&&Mtt(a,c),c}async function Ntt(e){const t=e.app;OG(t);const{provider:n}=eu(t);{const{token:a}=await n.getToken();return{token:a}}}function Vtt(e,t,n,a){const{app:r}=e,s=eu(r),o={next:n,error:a,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Gp(s.token)){const l=s.token;Promise.resolve().then(()=>{n({token:l.token}),ZN(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ZN(e))}function HG(e,t){const n=eu(e),a=n.tokenObservers.filter(r=>r.next!==t);a.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=a}function ZN(e){const{app:t}=e,n=eu(t);let a=n.tokenRefresher;a||(a=Ltt(e),n.tokenRefresher=a),!a.isRunning()&&n.isTokenAutoRefreshEnabled&&a.start()}function Ltt(e){const{app:t}=e;return new Stt(async()=>{const n=eu(t);let a;if(n.token?a=await Uk(e,!0):a=await Uk(e),a.error)throw a.error;if(a.internalError)throw a.internalError},()=>!0,()=>{const n=eu(t);if(n.token){let a=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const r=n.token.expireTimeMillis-300*1e3;return a=Math.min(a,r),Math.max(0,a-Date.now())}else return 0},XN.RETRIAL_MIN_WAIT,XN.RETRIAL_MAX_WAIT)}function Mtt(e,t){const n=eu(e).tokenObservers;for(const a of n)try{a.type==="EXTERNAL"&&t.error!=null?a.error(t.error):a.next(t)}catch{}}function Gp(e){return e.expireTimeMillis-Date.now()>0}function eV(e){return{token:Rtt(Utt),error:e}}class Ott{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=eu(this.app);for(const n of t)HG(this.app,n.next);return Promise.resolve()}}function Htt(e,t){return new Ott(e,t)}function $tt(e){return{getToken:t=>Uk(e,t),getLimitedUseToken:()=>Ntt(e),addTokenListener:t=>Vtt(e,"INTERNAL",t),removeTokenListener:t=>HG(e.app,t)}}const Qtt="@firebase/app-check",Gtt="0.10.1",ztt="app-check",tV="app-check-internal";function Wtt(){Vu(new ql(ztt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Htt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(tV).initialize()})),Vu(new ql(tV,e=>{const t=e.getProvider("app-check").getImmediate();return $tt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Pi(Qtt,Gtt)}Wtt();const $G=Symbol("firebaseApp");function Ktt(e){return HA()&&Pn($G,null)||B6(e)}const Qy=new WeakMap;function jtt(e,t){if(!Qy.has(e)){const n=Gd(!0);Qy.set(e,n);const{unmount:a}=t;t.unmount=()=>{a.call(t),n.stop(),Qy.delete(e)}}return Qy.get(e)}const qtt=new WeakMap,Gy=new WeakMap;function Ytt(e){const t=Ktt(e);if(!Gy.has(t)){let n;const r=[new Promise(s=>{n=s}),s=>{Gy.set(t,s),n(s.value)}];Gy.set(t,r)}return Gy.get(t)}function Xtt(e,t){eM(t,n=>{const a=Ytt();e.value=n,Array.isArray(a)&&a[1](e)})}var nV={};const aV="@firebase/database",rV="1.0.20";let QG="";function Jtt(e){QG=e}class Ztt{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Zs(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:M0(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class ent{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Yc(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const GG=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ztt(t)}}catch{}return new ent},eA=GG("localStorage"),tnt=GG("sessionStorage");const Iv=new Bg("@firebase/database"),nnt=(function(){let e=1;return function(){return e++}})(),zG=function(e){const t=zoe(e),n=new Ooe;n.update(t);const a=n.digest();return bw.encodeByteArray(a)},n1=function(...e){let t="";for(let n=0;n<e.length;n++){const a=e[n];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?t+=n1.apply(null,a):typeof a=="object"?t+=Zs(a):t+=a,t+=" "}return t};let g0=null,sV=!0;const ant=function(e,t){dn(!0,"Can't turn on custom loggers persistently."),Iv.logLevel=Za.VERBOSE,g0=Iv.log.bind(Iv)},po=function(...e){if(sV===!0&&(sV=!1,g0===null&&tnt.get("logging_enabled")===!0&&ant()),g0){const t=n1.apply(null,e);g0(t)}},a1=function(e){return function(...t){po(e,...t)}},Rk=function(...e){const t="FIREBASE INTERNAL ERROR: "+n1(...e);Iv.error(t)},UA=function(...e){const t=`FIREBASE FATAL ERROR: ${n1(...e)}`;throw Iv.error(t),new Error(t)},Di=function(...e){const t="FIREBASE WARNING: "+n1(...e);Iv.warn(t)},rnt=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Di("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},WG=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},snt=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},sh="[MIN_NAME]",RA="[MAX_NAME]",Lh=function(e,t){if(e===t)return 0;if(e===sh||t===RA)return-1;if(t===sh||e===RA)return 1;{const n=oV(e),a=oV(t);return n!==null?a!==null?n-a===0?e.length-t.length:n-a:-1:a!==null?1:e<t?-1:1}},ont=function(e,t){return e===t?0:e<t?-1:1},Cp=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Zs(t))},z4=function(e){if(typeof e!="object"||e===null)return Zs(e);const t=[];for(const a in e)t.push(a);t.sort();let n="{";for(let a=0;a<t.length;a++)a!==0&&(n+=","),n+=Zs(t[a]),n+=":",n+=z4(e[t[a]]);return n+="}",n},KG=function(e,t){const n=e.length;if(n<=t)return[e];const a=[];for(let r=0;r<n;r+=t)r+t>n?a.push(e.substring(r,n)):a.push(e.substring(r,r+t));return a};function dl(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const jG=function(e){dn(!WG(e),"Invalid JSON number");const t=11,n=52,a=(1<<t-1)-1;let r,s,o,l,c;e===0?(s=0,o=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-a)?(l=Math.min(Math.floor(Math.log(e)/Math.LN2),a),s=l+a,o=Math.round(e*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(e/Math.pow(2,1-a-n))));const f=[];for(c=n;c;c-=1)f.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)f.push(s%2?1:0),s=Math.floor(s/2);f.push(r?1:0),f.reverse();const d=f.join("");let A="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),A=A+m}return A.toLowerCase()},int=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},lnt=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},unt=new RegExp("^-?(0*)\\d{1,10}$"),cnt=-2147483648,dnt=2147483647,oV=function(e){if(unt.test(e)){const t=Number(e);if(t>=cnt&&t<=dnt)return t}return null},r1=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw Di("Exception was thrown by user callback.",n),t},Math.floor(0))}},fnt=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},y0=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class Ant{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,nl(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(a=>this.appCheck=a)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,a)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,a):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(a=>a.addTokenListener(t))}notifyForInvalidToken(){Di(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class mnt{constructor(t,n,a){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(po("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,a)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,a):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Di(t)}}const W4="5",qG="v",YG="s",XG="r",JG="f",ZG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ez="ls",tz="p",Nk="ac",nz="websocket",az="long_polling";class vnt{constructor(t,n,a,r,s=!1,o="",l=!1,c=!1,f=null){this.secure=n,this.namespace=a,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=eA.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&eA.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function hnt(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function rz(e,t,n){dn(typeof t=="string","typeof type must == string"),dn(typeof n=="object","typeof params must == object");let a;if(t===nz)a=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===az)a=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);hnt(e)&&(n.ns=e.namespace);const r=[];return dl(n,(s,o)=>{r.push(s+"="+o)}),a+r.join("&")}class pnt{constructor(){this.counters_={}}incrementCounter(t,n=1){Yc(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return yoe(this.counters_)}}const eS={},tS={};function K4(e){const t=e.toString();return eS[t]||(eS[t]=new pnt),eS[t]}function gnt(e,t){const n=e.toString();return tS[n]||(tS[n]=t()),tS[n]}class ynt{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<a.length;++r)a[r]&&r1(()=>{this.onMessage_(a[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const iV="start",_nt="close",wnt="pLPCommand",bnt="pRTLPCB",sz="id",oz="pw",iz="ser",xnt="cb",Cnt="seg",Snt="ts",Ent="d",knt="dframe",lz=1870,uz=30,Bnt=lz-uz,Tnt=25e3,Int=3e4;class cv{constructor(t,n,a,r,s,o,l){this.connId=t,this.repoInfo=n,this.applicationId=a,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=a1(t),this.stats_=K4(n),this.urlFn=c=>(this.appCheckToken&&(c[Nk]=this.appCheckToken),rz(n,az,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ynt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Int)),snt(()=>{if(this.isClosed_)return;this.scriptTagHolder=new j4((...s)=>{const[o,l,c,f,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===iV)this.id=l,this.password=c;else if(o===_nt)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const a={};a[iV]="t",a[iz]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[xnt]=this.scriptTagHolder.uniqueCallbackIdentifier),a[qG]=W4,this.transportSessionId&&(a[YG]=this.transportSessionId),this.lastSessionId&&(a[ez]=this.lastSessionId),this.applicationId&&(a[tz]=this.applicationId),this.appCheckToken&&(a[Nk]=this.appCheckToken),typeof location<"u"&&location.hostname&&ZG.test(location.hostname)&&(a[XG]=JG);const r=this.urlFn(a);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cv.forceAllow_=!0}static forceDisallow(){cv.forceDisallow_=!0}static isAvailable(){return cv.forceAllow_?!0:!cv.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!int()&&!lnt()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Zs(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=h6(n),r=KG(a,Bnt);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const a={};a[knt]="t",a[sz]=t,a[oz]=n,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Zs(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class j4{constructor(t,n,a,r){this.onDisconnect=a,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=nnt(),window[wnt+this.uniqueCallbackIdentifier]=t,window[bnt+this.uniqueCallbackIdentifier]=n,this.myIFrame=j4.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){po("frame writing exception"),l.stack&&po(l.stack),po(l)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||po("No IE domain setting required")}catch{const a=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[sz]=this.myID,t[oz]=this.myPW,t[iz]=this.currentSerial;let n=this.urlFn(t),a="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uz+a.length<=lz;){const o=this.pendingSegs.shift();a=a+"&"+Cnt+r+"="+o.seg+"&"+Snt+r+"="+o.ts+"&"+Ent+r+"="+o.d,r++}return n=n+a,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,a){this.pendingSegs.push({seg:t,ts:n,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const a=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(a,Math.floor(Tnt)),s=()=>{clearTimeout(r),a()};this.addTag(t,s)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=t,a.onload=a.onreadystatechange=function(){const r=a.readyState;(!r||r==="loaded"||r==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),n())},a.onerror=()=>{po("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}const Fnt=16384,Pnt=45e3;let O2=null;typeof MozWebSocket<"u"?O2=MozWebSocket:typeof WebSocket<"u"&&(O2=WebSocket);class Pl{constructor(t,n,a,r,s,o,l){this.connId=t,this.applicationId=a,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=a1(this.connId),this.stats_=K4(n),this.connURL=Pl.connectionURL_(n,o,l,r,a),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,a,r,s){const o={};return o[qG]=W4,typeof location<"u"&&location.hostname&&ZG.test(location.hostname)&&(o[XG]=JG),n&&(o[YG]=n),a&&(o[ez]=a),r&&(o[Nk]=r),s&&(o[tz]=s),rz(t,nz,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,eA.set("previous_websocket_failure",!0);try{let a;Doe(),this.mySock=new O2(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const r=a.message||a.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const r=a.message||a.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Pl.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(n);a&&a.length>1&&parseFloat(a[1])<4.4&&(t=!0)}return!t&&O2!==null&&!Pl.forceDisallow_}static previouslyFailed(){return eA.isInMemoryStorage||eA.get("previous_websocket_failure")===!0}markConnectionHealthy(){eA.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const a=M0(n);this.onMessage(a)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(dn(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const a=this.extractFrameCount_(n);a!==null&&this.appendFrame_(a)}}send(t){this.resetKeepAlive();const n=Zs(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=KG(n,Fnt);a.length>1&&this.sendString_(String(a.length));for(let r=0;r<a.length;r++)this.sendString_(a[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Pnt))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Pl.responsesRequiredToBeHealthy=2;Pl.healthyTimeout=3e4;class vg{static get ALL_TRANSPORTS(){return[cv,Pl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=Pl&&Pl.isAvailable();let a=n&&!Pl.previouslyFailed();if(t.webSocketOnly&&(n||Di("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Pl];else{const r=this.transports_=[];for(const s of vg.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);vg.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}vg.globalTransportInitialized_=!1;const Dnt=6e4,Unt=5e3,Rnt=10*1024,Nnt=100*1024,nS="t",lV="d",Vnt="s",uV="r",Lnt="e",cV="o",dV="a",fV="n",AV="p",Mnt="h";class Ont{constructor(t,n,a,r,s,o,l,c,f,d){this.id=t,this.repoInfo_=n,this.applicationId_=a,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=c,this.onKill_=f,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=a1("c:"+this.id+":"),this.transportManager_=new vg(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,a)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=y0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Nnt?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Rnt?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(nS in t){const n=t[nS];n===dV?this.upgradeIfSecondaryHealthy_():n===uV?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===cV&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=Cp("t",t),a=Cp("d",t);if(n==="c")this.onSecondaryControl_(a);else if(n==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:AV,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:dV,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:fV,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=Cp("t",t),a=Cp("d",t);n==="c"?this.onControl_(a):n==="d"&&this.onDataMessage_(a)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=Cp(nS,t);if(lV in t){const a=t[lV];if(n===Mnt){const r=Object.assign({},a);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===fV){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Vnt?this.onConnectionShutdown_(a):n===uV?this.onReset_(a):n===Lnt?Rk("Server Error: "+a):n===cV?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rk("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,a=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),W4!==a&&Di("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,a),y0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Dnt))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):y0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Unt))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:AV,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(eA.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class cz{put(t,n,a,r){}merge(t,n,a,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,a){}onDisconnectMerge(t,n,a){}onDisconnectCancel(t,n){}reportStats(t){}}class dz{constructor(t){this.allowedEvents_=t,this.listeners_={},dn(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const a=[...this.listeners_[t]];for(let r=0;r<a.length;r++)a[r].callback.apply(a[r].context,n)}}on(t,n,a){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:a});const r=this.getInitialEvent(t);r&&n.apply(a,r)}off(t,n,a){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!a||a===r[s].context)){r.splice(s,1);return}}validateEventType_(t){dn(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}class H2 extends dz{static getInstance(){return new H2}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!HB()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return dn(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const mV=32,vV=768;class Br{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let a=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[a]=this.pieces_[r],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function or(){return new Br("")}function Ia(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function cf(e){return e.pieces_.length-e.pieceNum_}function br(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Br(e.pieces_,t)}function fz(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Hnt(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Az(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function mz(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Br(t,0)}function Ms(e,t){const n=[];for(let a=e.pieceNum_;a<e.pieces_.length;a++)n.push(e.pieces_[a]);if(t instanceof Br)for(let a=t.pieceNum_;a<t.pieces_.length;a++)n.push(t.pieces_[a]);else{const a=t.split("/");for(let r=0;r<a.length;r++)a[r].length>0&&n.push(a[r])}return new Br(n,0)}function Ca(e){return e.pieceNum_>=e.pieces_.length}function ol(e,t){const n=Ia(e),a=Ia(t);if(n===null)return t;if(n===a)return ol(br(e),br(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function vz(e,t){if(cf(e)!==cf(t))return!1;for(let n=e.pieceNum_,a=t.pieceNum_;n<=e.pieces_.length;n++,a++)if(e.pieces_[n]!==t.pieces_[a])return!1;return!0}function Vl(e,t){let n=e.pieceNum_,a=t.pieceNum_;if(cf(e)>cf(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[a])return!1;++n,++a}return!0}class $nt{constructor(t,n){this.errorPrefix_=n,this.parts_=Az(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=Cw(this.parts_[a]);hz(this)}}function Qnt(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Cw(t),hz(e)}function Gnt(e){const t=e.parts_.pop();e.byteLength_-=Cw(t),e.parts_.length>0&&(e.byteLength_-=1)}function hz(e){if(e.byteLength_>vV)throw new Error(e.errorPrefix_+"has a key path longer than "+vV+" bytes ("+e.byteLength_+").");if(e.parts_.length>mV)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mV+") or object contains a cycle "+$f(e))}function $f(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}class q4 extends dz{static getInstance(){return new q4}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const a=!document[t];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(t){return dn(t==="visible","Unknown event type: "+t),[this.visible_]}}const Sp=1e3,znt=300*1e3,hV=30*1e3,Wnt=1.3,Knt=3e4,jnt="server_kill",pV=3;class Rc extends cz{constructor(t,n,a,r,s,o,l,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=a,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=Rc.nextPersistentConnectionId_++,this.log_=a1("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Sp,this.maxReconnectDelay_=znt,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");q4.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&H2.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,a){const r=++this.requestNumber_,s={r,a:t,b:n};this.log_(Zs(s)),dn(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),a&&(this.requestCBHash_[r]=a)}get(t){this.initConnection_();const n=new L0,r={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(t,n,a,r){this.initConnection_();const s=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),dn(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),dn(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:r,hashFn:n,query:t,tag:a};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,a=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(a)})}sendListen_(t){const n=t.query,a=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+a+" for "+r);const s={p:a},o="q";t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(o,s,l=>{const c=l.d,f=l.s;Rc.warnOnListenWarnings_(c,n),(this.listens.get(a)&&this.listens.get(a).get(r))===t&&(this.log_("listen response",l),f!=="ok"&&this.removeListen_(a,r),t.onComplete&&t.onComplete(f,c))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Yc(t,"w")){const a=Gv(t,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Di(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Moe(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=hV)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=Loe(t)?"auth":"gauth",a={cred:t};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(n,a,r=>{const s=r.s,o=r.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,a=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,a)})}unlisten(t,n){const a=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+a+" "+r),dn(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,r)&&this.connected_&&this.sendUnlisten_(a,r,t._queryObject,n)}sendUnlisten_(t,n,a,r){this.log_("Unlisten on "+t+" for "+n);const s={p:t},o="n";r&&(s.q=a,s.t=r),this.sendRequest(o,s)}onDisconnectPut(t,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:a})}onDisconnectMerge(t,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:a})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,a,r){const s={p:n,d:a};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(t,n,a,r){this.putInternal("p",t,n,a,r)}merge(t,n,a,r){this.putInternal("m",t,n,a,r)}putInternal(t,n,a,r,s){this.initConnection_();const o={p:n,d:a};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,a=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,a,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,a=>{if(a.s!=="ok"){const s=a.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Zs(t));const n=t.r,a=this.requestCBHash_[n];a&&(delete this.requestCBHash_[n],a(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):Rk("Unrecognized action received from server: "+Zs(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){dn(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Sp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Sp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Knt&&(this.reconnectDelay_=Sp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Wnt)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Rc.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const c=function(){l?l.close():(o=!0,a())},f=function(A){dn(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(A)};this.realtime_={close:c,sendRequest:f};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[A,m]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?po("getToken() completed but was canceled"):(po("getToken() completed. Creating connection."),this.authToken_=A&&A.accessToken,this.appCheckToken_=m&&m.token,l=new Ont(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,a,p=>{Di(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(jnt)},s))}catch(A){this.log_("Failed to get token: "+A),o||(this.repoInfo_.nodeAdmin&&Di(A),c())}}}interrupt(t){po("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){po("Resuming connection for reason: "+t),delete this.interruptReasons_[t],jS(this.interruptReasons_)&&(this.reconnectDelay_=Sp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let a;n?a=n.map(s=>z4(s)).join("$"):a="default";const r=this.removeListen_(t,a);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,n){const a=new Br(t).toString();let r;if(this.listens.has(a)){const s=this.listens.get(a);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(a)}else r=void 0;return r}onAuthRevoked_(t,n){po("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pV&&(this.reconnectDelay_=hV,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){po("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pV&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+QG.replace(/\./g,"-")]=1,HB()?t["framework.cordova"]=1:w6()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=H2.getInstance().currentlyOnline();return jS(this.interruptReasons_)&&t}}Rc.nextPersistentConnectionId_=0;Rc.nextConnectionId_=0;class Fa{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new Fa(t,n)}}class wb{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const a=new Fa(sh,t),r=new Fa(sh,n);return this.compare(a,r)!==0}minPost(){return Fa.MIN}}let zy;class pz extends wb{static get __EMPTY_NODE(){return zy}static set __EMPTY_NODE(t){zy=t}compare(t,n){return Lh(t.name,n.name)}isDefinedOn(t){throw Ah("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Fa.MIN}maxPost(){return new Fa(RA,zy)}makePost(t,n){return dn(typeof t=="string","KeyIndex indexValue must always be a string."),new Fa(t,zy)}toString(){return".key"}}const Fv=new pz;class Wy{constructor(t,n,a,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?a(t.key,n):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Ls{constructor(t,n,a,r,s){this.key=t,this.value=n,this.color=a??Ls.RED,this.left=r??ui.EMPTY_NODE,this.right=s??ui.EMPTY_NODE}copy(t,n,a,r,s){return new Ls(t??this.key,n??this.value,a??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,a){let r=this;const s=a(t,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(t,n,a),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(t,n,a)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ui.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let a,r;if(a=this,n(t,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),n(t,a.key)===0){if(a.right.isEmpty())return ui.EMPTY_NODE;r=a.right.min_(),a=a.copy(r.key,r.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Ls.RED=!0;Ls.BLACK=!1;class qnt{copy(t,n,a,r,s){return this}insert(t,n,a){return new Ls(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ui{constructor(t,n=ui.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new ui(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ls.BLACK,null,null))}remove(t){return new ui(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ls.BLACK,null,null))}get(t){let n,a=this.root_;for(;!a.isEmpty();){if(n=this.comparator_(t,a.key),n===0)return a.value;n<0?a=a.left:n>0&&(a=a.right)}return null}getPredecessorKey(t){let n,a=this.root_,r=null;for(;!a.isEmpty();)if(n=this.comparator_(t,a.key),n===0){if(a.left.isEmpty())return r?r.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else n<0?a=a.left:n>0&&(r=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Wy(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Wy(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Wy(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Wy(this.root_,null,this.comparator_,!0,t)}}ui.EMPTY_NODE=new qnt;function Ynt(e,t){return Lh(e.name,t.name)}function Y4(e,t){return Lh(e,t)}let Vk;function Xnt(e){Vk=e}const gz=function(e){return typeof e=="number"?"number:"+jG(e):"string:"+e},yz=function(e){if(e.isLeafNode()){const t=e.val();dn(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Yc(t,".sv"),"Priority must be a string or number.")}else dn(e===Vk||e.isEmpty(),"priority of unexpected type.");dn(e===Vk||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gV;class Ns{static set __childrenNodeConstructor(t){gV=t}static get __childrenNodeConstructor(){return gV}constructor(t,n=Ns.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,dn(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yz(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Ns(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Ns.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ca(t)?this:Ia(t)===".priority"?this.priorityNode_:Ns.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Ns.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const a=Ia(t);return a===null?n:n.isEmpty()&&a!==".priority"?this:(dn(a!==".priority"||cf(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,Ns.__childrenNodeConstructor.EMPTY_NODE.updateChild(br(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+gz(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=jG(this.value_):t+=this.value_,this.lazyHash_=zG(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Ns.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ns.__childrenNodeConstructor?-1:(dn(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,a=typeof this.value_,r=Ns.VALUE_TYPE_ORDER.indexOf(n),s=Ns.VALUE_TYPE_ORDER.indexOf(a);return dn(r>=0,"Unknown leaf type: "+n),dn(s>=0,"Unknown leaf type: "+a),r===s?a==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ns.VALUE_TYPE_ORDER=["object","boolean","number","string"];let _z,wz;function Jnt(e){_z=e}function Znt(e){wz=e}class eat extends wb{compare(t,n){const a=t.node.getPriority(),r=n.node.getPriority(),s=a.compareTo(r);return s===0?Lh(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Fa.MIN}maxPost(){return new Fa(RA,new Ns("[PRIORITY-POST]",wz))}makePost(t,n){const a=_z(t);return new Fa(n,new Ns("[PRIORITY-POST]",a))}toString(){return".priority"}}const Eo=new eat;const tat=Math.log(2);class nat{constructor(t){const n=s=>parseInt(Math.log(s)/tat,10),a=s=>parseInt(Array(s+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const r=a(this.count);this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const $2=function(e,t,n,a){e.sort(t);const r=function(c,f){const d=f-c;let A,m;if(d===0)return null;if(d===1)return A=e[c],m=n?n(A):A,new Ls(m,A.node,Ls.BLACK,null,null);{const p=parseInt(d/2,10)+c,h=r(c,p),y=r(p+1,f);return A=e[p],m=n?n(A):A,new Ls(m,A.node,Ls.BLACK,h,y)}},s=function(c){let f=null,d=null,A=e.length;const m=function(h,y){const g=A-h,_=A;A-=h;const b=r(g+1,_),S=e[g],B=n?n(S):S;p(new Ls(B,S.node,y,null,b))},p=function(h){f?(f.left=h,f=h):(d=h,f=h)};for(let h=0;h<c.count;++h){const y=c.nextBitIsOne(),g=Math.pow(2,c.count-(h+1));y?m(g,Ls.BLACK):(m(g,Ls.BLACK),m(g,Ls.RED))}return d},o=new nat(e.length),l=s(o);return new ui(a||t,l)};let aS;const Ym={};class Ic{static get Default(){return dn(Ym&&Eo,"ChildrenNode.ts has not been loaded"),aS=aS||new Ic({".priority":Ym},{".priority":Eo}),aS}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=Gv(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof ui?n:null}hasIndex(t){return Yc(this.indexSet_,t.toString())}addIndex(t,n){dn(t!==Fv,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let r=!1;const s=n.getIterator(Fa.Wrap);let o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),a.push(o),o=s.getNext();let l;r?l=$2(a,t.getCompare()):l=Ym;const c=t.toString(),f=Object.assign({},this.indexSet_);f[c]=t;const d=Object.assign({},this.indexes_);return d[c]=l,new Ic(d,f)}addToIndexes(t,n){const a=z_(this.indexes_,(r,s)=>{const o=Gv(this.indexSet_,s);if(dn(o,"Missing index implementation for "+s),r===Ym)if(o.isDefinedOn(t.node)){const l=[],c=n.getIterator(Fa.Wrap);let f=c.getNext();for(;f;)f.name!==t.name&&l.push(f),f=c.getNext();return l.push(t),$2(l,o.getCompare())}else return Ym;else{const l=n.get(t.name);let c=r;return l&&(c=c.remove(new Fa(t.name,l))),c.insert(t,t.node)}});return new Ic(a,this.indexSet_)}removeFromIndexes(t,n){const a=z_(this.indexes_,r=>{if(r===Ym)return r;{const s=n.get(t.name);return s?r.remove(new Fa(t.name,s)):r}});return new Ic(a,this.indexSet_)}}let Ep;class er{static get EMPTY_NODE(){return Ep||(Ep=new er(new ui(Y4),null,Ic.Default))}constructor(t,n,a){this.children_=t,this.priorityNode_=n,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&yz(this.priorityNode_),this.children_.isEmpty()&&dn(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ep}updatePriority(t){return this.children_.isEmpty()?this:new er(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?Ep:n}}getChild(t){const n=Ia(t);return n===null?this:this.getImmediateChild(n).getChild(br(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(dn(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const a=new Fa(t,n);let r,s;n.isEmpty()?(r=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(a,this.children_));const o=r.isEmpty()?Ep:this.priorityNode_;return new er(r,o,s)}}updateChild(t,n){const a=Ia(t);if(a===null)return n;{dn(Ia(t)!==".priority"||cf(t)===1,".priority must be the last token in a path");const r=this.getImmediateChild(a).updateChild(br(t),n);return this.updateImmediateChild(a,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let a=0,r=0,s=!0;if(this.forEachChild(Eo,(o,l)=>{n[o]=l.val(t),a++,s&&er.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!t&&s&&r<2*a){const o=[];for(const l in n)o[l]=n[l];return o}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+gz(this.getPriority().val())+":"),this.forEachChild(Eo,(n,a)=>{const r=a.hash();r!==""&&(t+=":"+n+":"+r)}),this.lazyHash_=t===""?"":zG(t)}return this.lazyHash_}getPredecessorChildName(t,n,a){const r=this.resolveIndex_(a);if(r){const s=r.getPredecessorKey(new Fa(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const a=n.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new Fa(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const a=n.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new Fa(n,this.children_.get(n)):null}forEachChild(t,n){const a=this.resolveIndex_(t);return a?a.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const a=this.resolveIndex_(n);if(a)return a.getIteratorFrom(t,r=>r);{const r=this.children_.getIteratorFrom(t.name,Fa.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,t)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const a=this.resolveIndex_(n);if(a)return a.getReverseIteratorFrom(t,r=>r);{const r=this.children_.getReverseIteratorFrom(t.name,Fa.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,t)>0;)r.getNext(),s=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===s1?-1:0}withIndex(t){if(t===Fv||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new er(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Fv||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const a=this.getIterator(Eo),r=n.getIterator(Eo);let s=a.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=a.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===Fv?null:this.indexMap_.get(t.toString())}}er.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class aat extends er{constructor(){super(new ui(Y4),er.EMPTY_NODE,Ic.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return er.EMPTY_NODE}isEmpty(){return!1}}const s1=new aat;Object.defineProperties(Fa,{MIN:{value:new Fa(sh,er.EMPTY_NODE)},MAX:{value:new Fa(RA,s1)}});pz.__EMPTY_NODE=er.EMPTY_NODE;Ns.__childrenNodeConstructor=er;Xnt(s1);Znt(s1);const rat=!0;function go(e,t=null){if(e===null)return er.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),dn(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new Ns(n,go(t))}if(!(e instanceof Array)&&rat){const n=[];let a=!1;if(dl(e,(o,l)=>{if(o.substring(0,1)!=="."){const c=go(l);c.isEmpty()||(a=a||!c.getPriority().isEmpty(),n.push(new Fa(o,c)))}}),n.length===0)return er.EMPTY_NODE;const s=$2(n,Ynt,o=>o.name,Y4);if(a){const o=$2(n,Eo.getCompare());return new er(s,go(t),new Ic({".priority":o},{".priority":Eo}))}else return new er(s,go(t),Ic.Default)}else{let n=er.EMPTY_NODE;return dl(e,(a,r)=>{if(Yc(e,a)&&a.substring(0,1)!=="."){const s=go(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(a,s))}}),n.updatePriority(go(t))}}Jnt(go);class sat extends wb{constructor(t){super(),this.indexPath_=t,dn(!Ca(t)&&Ia(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const a=this.extractChild(t.node),r=this.extractChild(n.node),s=a.compareTo(r);return s===0?Lh(t.name,n.name):s}makePost(t,n){const a=go(t),r=er.EMPTY_NODE.updateChild(this.indexPath_,a);return new Fa(n,r)}maxPost(){const t=er.EMPTY_NODE.updateChild(this.indexPath_,s1);return new Fa(RA,t)}toString(){return Az(this.indexPath_,0).join("/")}}class oat extends wb{compare(t,n){const a=t.node.compareTo(n.node);return a===0?Lh(t.name,n.name):a}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Fa.MIN}maxPost(){return Fa.MAX}makePost(t,n){const a=go(t);return new Fa(n,a)}toString(){return".value"}}const iat=new oat;function lat(e){return{type:"value",snapshotNode:e}}function uat(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function cat(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function yV(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function dat(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}class X4{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Eo}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return dn(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return dn(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:sh}hasEnd(){return this.endSet_}getIndexEndValue(){return dn(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return dn(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:RA}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return dn(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Eo}copy(){const t=new X4;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function _V(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Eo?n="$priority":e.index_===iat?n="$value":e.index_===Fv?n="$key":(dn(e.index_ instanceof sat,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Zs(n),e.startSet_){const a=e.startAfterSet_?"startAfter":"startAt";t[a]=Zs(e.indexStartValue_),e.startNameSet_&&(t[a]+=","+Zs(e.indexStartName_))}if(e.endSet_){const a=e.endBeforeSet_?"endBefore":"endAt";t[a]=Zs(e.indexEndValue_),e.endNameSet_&&(t[a]+=","+Zs(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function wV(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Eo&&(t.i=e.index_.toString()),t}class Q2 extends cz{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(dn(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,a,r){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=a,this.appCheckTokenProvider_=r,this.log_=a1("p:rest:"),this.listens_={}}listen(t,n,a,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const o=Q2.getListenId_(t,a),l={};this.listens_[o]=l;const c=_V(t._queryParams);this.restRequest_(s+".json",c,(f,d)=>{let A=d;if(f===404&&(A=null,f=null),f===null&&this.onDataUpdate_(s,A,!1,a),Gv(this.listens_,o)===l){let m;f?f===401?m="permission_denied":m="rest_error:"+f:m="ok",r(m,null)}})}unlisten(t,n){const a=Q2.getListenId_(t,n);delete this.listens_[a]}get(t){const n=_V(t._queryParams),a=t._path.toString(),r=new L0;return this.restRequest_(a+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(a,l,!1,null),r.resolve(l)):r.reject(new Error(l))}),r.promise}refreshAuthToken(t){}restRequest_(t,n={},a){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+vh(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(a&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=M0(l.responseText)}catch{Di("Failed to parse JSON response for "+o+": "+l.responseText)}a(null,c)}else l.status!==401&&l.status!==404&&Di("Got unsuccessful REST response for "+o+" Status: "+l.status),a(l.status);a=null}},l.open("GET",o,!0),l.send()})}}class fat{constructor(){this.rootNode_=er.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}function G2(){return{value:null,children:new Map}}function bz(e,t,n){if(Ca(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const a=Ia(t);e.children.has(a)||e.children.set(a,G2());const r=e.children.get(a);t=br(t),bz(r,t,n)}}function Lk(e,t,n){e.value!==null?n(t,e.value):Aat(e,(a,r)=>{const s=new Br(t.toString()+"/"+a);Lk(r,s,n)})}function Aat(e,t){e.children.forEach((n,a)=>{t(a,n)})}class mat{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&dl(this.last_,(a,r)=>{n[a]=n[a]-r}),this.last_=t,n}}const bV=10*1e3,vat=30*1e3,hat=300*1e3;class pat{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new mat(t);const a=bV+(vat-bV)*Math.random();y0(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const t=this.statsListener_.get(),n={};let a=!1;dl(t,(r,s)=>{s>0&&Yc(this.statsToReport_,r)&&(n[r]=s,a=!0)}),a&&this.server_.reportStats(n),y0(this.reportStats_.bind(this),Math.floor(Math.random()*2*hat))}}var Bu;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Bu||(Bu={}));function xz(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Cz(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Sz(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class z2{constructor(t,n,a){this.path=t,this.affectedTree=n,this.revert=a,this.type=Bu.ACK_USER_WRITE,this.source=xz()}operationForChild(t){if(Ca(this.path)){if(this.affectedTree.value!=null)return dn(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Br(t));return new z2(or(),n,this.revert)}}else return dn(Ia(this.path)===t,"operationForChild called for unrelated child."),new z2(br(this.path),this.affectedTree,this.revert)}}class NA{constructor(t,n,a){this.source=t,this.path=n,this.snap=a,this.type=Bu.OVERWRITE}operationForChild(t){return Ca(this.path)?new NA(this.source,or(),this.snap.getImmediateChild(t)):new NA(this.source,br(this.path),this.snap)}}class hg{constructor(t,n,a){this.source=t,this.path=n,this.children=a,this.type=Bu.MERGE}operationForChild(t){if(Ca(this.path)){const n=this.children.subtree(new Br(t));return n.isEmpty()?null:n.value?new NA(this.source,or(),n.value):new hg(this.source,or(),n)}else return dn(Ia(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new hg(this.source,br(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class J4{constructor(t,n,a){this.node_=t,this.fullyInitialized_=n,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Ca(t))return this.isFullyInitialized()&&!this.filtered_;const n=Ia(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function gat(e,t,n,a){const r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(dat(o.childName,o.snapshotNode))}),kp(e,r,"child_removed",t,a,n),kp(e,r,"child_added",t,a,n),kp(e,r,"child_moved",s,a,n),kp(e,r,"child_changed",t,a,n),kp(e,r,"value",t,a,n),r}function kp(e,t,n,a,r,s){const o=a.filter(l=>l.type===n);o.sort((l,c)=>_at(e,l,c)),o.forEach(l=>{const c=yat(e,l,s);r.forEach(f=>{f.respondsTo(l.type)&&t.push(f.createEvent(c,e.query_))})})}function yat(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function _at(e,t,n){if(t.childName==null||n.childName==null)throw Ah("Should only compare child_ events.");const a=new Fa(t.childName,t.snapshotNode),r=new Fa(n.childName,n.snapshotNode);return e.index_.compare(a,r)}function Ez(e,t){return{eventCache:e,serverCache:t}}function _0(e,t,n,a){return Ez(new J4(t,n,a),e.serverCache)}function kz(e,t,n,a){return Ez(e.eventCache,new J4(t,n,a))}function Mk(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function VA(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let rS;const wat=()=>(rS||(rS=new ui(ont)),rS);class wr{static fromObject(t){let n=new wr(null);return dl(t,(a,r)=>{n=n.set(new Br(a),r)}),n}constructor(t,n=wat()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:or(),value:this.value};if(Ca(t))return null;{const a=Ia(t),r=this.children.get(a);if(r!==null){const s=r.findRootMostMatchingPathAndValue(br(t),n);return s!=null?{path:Ms(new Br(a),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Ca(t))return this;{const n=Ia(t),a=this.children.get(n);return a!==null?a.subtree(br(t)):new wr(null)}}set(t,n){if(Ca(t))return new wr(n,this.children);{const a=Ia(t),s=(this.children.get(a)||new wr(null)).set(br(t),n),o=this.children.insert(a,s);return new wr(this.value,o)}}remove(t){if(Ca(t))return this.children.isEmpty()?new wr(null):new wr(null,this.children);{const n=Ia(t),a=this.children.get(n);if(a){const r=a.remove(br(t));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new wr(null):new wr(this.value,s)}else return this}}get(t){if(Ca(t))return this.value;{const n=Ia(t),a=this.children.get(n);return a?a.get(br(t)):null}}setTree(t,n){if(Ca(t))return n;{const a=Ia(t),s=(this.children.get(a)||new wr(null)).setTree(br(t),n);let o;return s.isEmpty()?o=this.children.remove(a):o=this.children.insert(a,s),new wr(this.value,o)}}fold(t){return this.fold_(or(),t)}fold_(t,n){const a={};return this.children.inorderTraversal((r,s)=>{a[r]=s.fold_(Ms(t,r),n)}),n(t,this.value,a)}findOnPath(t,n){return this.findOnPath_(t,or(),n)}findOnPath_(t,n,a){const r=this.value?a(n,this.value):!1;if(r)return r;if(Ca(t))return null;{const s=Ia(t),o=this.children.get(s);return o?o.findOnPath_(br(t),Ms(n,s),a):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,or(),n)}foreachOnPath_(t,n,a){if(Ca(t))return this;{this.value&&a(n,this.value);const r=Ia(t),s=this.children.get(r);return s?s.foreachOnPath_(br(t),Ms(n,r),a):new wr(null)}}foreach(t){this.foreach_(or(),t)}foreach_(t,n){this.children.inorderTraversal((a,r)=>{r.foreach_(Ms(t,a),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,a)=>{a.value&&t(n,a.value)})}}class Ql{constructor(t){this.writeTree_=t}static empty(){return new Ql(new wr(null))}}function w0(e,t,n){if(Ca(t))return new Ql(new wr(n));{const a=e.writeTree_.findRootMostValueAndPath(t);if(a!=null){const r=a.path;let s=a.value;const o=ol(r,t);return s=s.updateChild(o,n),new Ql(e.writeTree_.set(r,s))}else{const r=new wr(n),s=e.writeTree_.setTree(t,r);return new Ql(s)}}}function xV(e,t,n){let a=e;return dl(n,(r,s)=>{a=w0(a,Ms(t,r),s)}),a}function CV(e,t){if(Ca(t))return Ql.empty();{const n=e.writeTree_.setTree(t,new wr(null));return new Ql(n)}}function Ok(e,t){return lm(e,t)!=null}function lm(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(ol(n.path,t)):null}function SV(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Eo,(a,r)=>{t.push(new Fa(a,r))}):e.writeTree_.children.inorderTraversal((a,r)=>{r.value!=null&&t.push(new Fa(a,r.value))}),t}function Qd(e,t){if(Ca(t))return e;{const n=lm(e,t);return n!=null?new Ql(new wr(n)):new Ql(e.writeTree_.subtree(t))}}function Hk(e){return e.writeTree_.isEmpty()}function oh(e,t){return Bz(or(),e.writeTree_,t)}function Bz(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let a=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(dn(s.value!==null,"Priority writes must always be leaf nodes"),a=s.value):n=Bz(Ms(e,r),s,n)}),!n.getChild(e).isEmpty()&&a!==null&&(n=n.updateChild(Ms(e,".priority"),a)),n}}function Tz(e,t){return Uz(t,e)}function bat(e,t,n,a,r){dn(a>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:a,visible:r}),r&&(e.visibleWrites=w0(e.visibleWrites,t,n)),e.lastWriteId=a}function xat(e,t){for(let n=0;n<e.allWrites.length;n++){const a=e.allWrites[n];if(a.writeId===t)return a}return null}function Cat(e,t){const n=e.allWrites.findIndex(l=>l.writeId===t);dn(n>=0,"removeWrite called with nonexistent writeId.");const a=e.allWrites[n];e.allWrites.splice(n,1);let r=a.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const l=e.allWrites[o];l.visible&&(o>=n&&Sat(l,a.path)?r=!1:Vl(a.path,l.path)&&(s=!0)),o--}if(r){if(s)return Eat(e),!0;if(a.snap)e.visibleWrites=CV(e.visibleWrites,a.path);else{const l=a.children;dl(l,c=>{e.visibleWrites=CV(e.visibleWrites,Ms(a.path,c))})}return!0}else return!1}function Sat(e,t){if(e.snap)return Vl(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Vl(Ms(e.path,n),t))return!0;return!1}function Eat(e){e.visibleWrites=Iz(e.allWrites,kat,or()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function kat(e){return e.visible}function Iz(e,t,n){let a=Ql.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const o=s.path;let l;if(s.snap)Vl(n,o)?(l=ol(n,o),a=w0(a,l,s.snap)):Vl(o,n)&&(l=ol(o,n),a=w0(a,or(),s.snap.getChild(l)));else if(s.children){if(Vl(n,o))l=ol(n,o),a=xV(a,l,s.children);else if(Vl(o,n))if(l=ol(o,n),Ca(l))a=xV(a,or(),s.children);else{const c=Gv(s.children,Ia(l));if(c){const f=c.getChild(br(l));a=w0(a,or(),f)}}}else throw Ah("WriteRecord should have .snap or .children")}}return a}function Fz(e,t,n,a,r){if(!a&&!r){const s=lm(e.visibleWrites,t);if(s!=null)return s;{const o=Qd(e.visibleWrites,t);if(Hk(o))return n;if(n==null&&!Ok(o,or()))return null;{const l=n||er.EMPTY_NODE;return oh(o,l)}}}else{const s=Qd(e.visibleWrites,t);if(!r&&Hk(s))return n;if(!r&&n==null&&!Ok(s,or()))return null;{const o=function(f){return(f.visible||r)&&(!a||!~a.indexOf(f.writeId))&&(Vl(f.path,t)||Vl(t,f.path))},l=Iz(e.allWrites,o,t),c=n||er.EMPTY_NODE;return oh(l,c)}}}function Bat(e,t,n){let a=er.EMPTY_NODE;const r=lm(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Eo,(s,o)=>{a=a.updateImmediateChild(s,o)}),a;if(n){const s=Qd(e.visibleWrites,t);return n.forEachChild(Eo,(o,l)=>{const c=oh(Qd(s,new Br(o)),l);a=a.updateImmediateChild(o,c)}),SV(s).forEach(o=>{a=a.updateImmediateChild(o.name,o.node)}),a}else{const s=Qd(e.visibleWrites,t);return SV(s).forEach(o=>{a=a.updateImmediateChild(o.name,o.node)}),a}}function Tat(e,t,n,a,r){dn(a||r,"Either existingEventSnap or existingServerSnap must exist");const s=Ms(t,n);if(Ok(e.visibleWrites,s))return null;{const o=Qd(e.visibleWrites,s);return Hk(o)?r.getChild(n):oh(o,r.getChild(n))}}function Iat(e,t,n,a){const r=Ms(t,n),s=lm(e.visibleWrites,r);if(s!=null)return s;if(a.isCompleteForChild(n)){const o=Qd(e.visibleWrites,r);return oh(o,a.getNode().getImmediateChild(n))}else return null}function Fat(e,t){return lm(e.visibleWrites,t)}function Pat(e,t,n,a,r,s,o){let l;const c=Qd(e.visibleWrites,t),f=lm(c,or());if(f!=null)l=f;else if(n!=null)l=oh(c,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],A=o.getCompare(),m=s?l.getReverseIteratorFrom(a,o):l.getIteratorFrom(a,o);let p=m.getNext();for(;p&&d.length<r;)A(p,a)!==0&&d.push(p),p=m.getNext();return d}else return[]}function Dat(){return{visibleWrites:Ql.empty(),allWrites:[],lastWriteId:-1}}function $k(e,t,n,a){return Fz(e.writeTree,e.treePath,t,n,a)}function Pz(e,t){return Bat(e.writeTree,e.treePath,t)}function EV(e,t,n,a){return Tat(e.writeTree,e.treePath,t,n,a)}function W2(e,t){return Fat(e.writeTree,Ms(e.treePath,t))}function Uat(e,t,n,a,r,s){return Pat(e.writeTree,e.treePath,t,n,a,r,s)}function Z4(e,t,n){return Iat(e.writeTree,e.treePath,t,n)}function Dz(e,t){return Uz(Ms(e.treePath,t),e.writeTree)}function Uz(e,t){return{treePath:e,writeTree:t}}class Rat{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,a=t.childName;dn(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),dn(a!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(a);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(a,yV(a,t.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(a);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(a,cat(a,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(a,uat(a,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(a,yV(a,t.snapshotNode,r.oldSnap));else throw Ah("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(a,t)}getChanges(){return Array.from(this.changeMap.values())}}class Nat{getCompleteChild(t){return null}getChildAfterChild(t,n,a){return null}}const Rz=new Nat;class eI{constructor(t,n,a=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=a}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const a=this.optCompleteServerCache_!=null?new J4(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Z4(this.writes_,t,a)}}getChildAfterChild(t,n,a){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:VA(this.viewCache_),s=Uat(this.writes_,r,n,1,a,t);return s.length===0?null:s[0]}}function Vat(e,t){dn(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),dn(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Lat(e,t,n,a,r){const s=new Rat;let o,l;if(n.type===Bu.OVERWRITE){const f=n;f.source.fromUser?o=Qk(e,t,f.path,f.snap,a,r,s):(dn(f.source.fromServer,"Unknown source."),l=f.source.tagged||t.serverCache.isFiltered()&&!Ca(f.path),o=K2(e,t,f.path,f.snap,a,r,l,s))}else if(n.type===Bu.MERGE){const f=n;f.source.fromUser?o=Oat(e,t,f.path,f.children,a,r,s):(dn(f.source.fromServer,"Unknown source."),l=f.source.tagged||t.serverCache.isFiltered(),o=Gk(e,t,f.path,f.children,a,r,l,s))}else if(n.type===Bu.ACK_USER_WRITE){const f=n;f.revert?o=Qat(e,t,f.path,a,r,s):o=Hat(e,t,f.path,f.affectedTree,a,r,s)}else if(n.type===Bu.LISTEN_COMPLETE)o=$at(e,t,n.path,a,s);else throw Ah("Unknown operation type: "+n.type);const c=s.getChanges();return Mat(t,o,c),{viewCache:o,changes:c}}function Mat(e,t,n){const a=t.eventCache;if(a.isFullyInitialized()){const r=a.getNode().isLeafNode()||a.getNode().isEmpty(),s=Mk(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!a.getNode().equals(s)||!a.getNode().getPriority().equals(s.getPriority()))&&n.push(lat(Mk(t)))}}function Nz(e,t,n,a,r,s){const o=t.eventCache;if(W2(a,n)!=null)return t;{let l,c;if(Ca(n))if(dn(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const f=VA(t),d=f instanceof er?f:er.EMPTY_NODE,A=Pz(a,d);l=e.filter.updateFullNode(t.eventCache.getNode(),A,s)}else{const f=$k(a,VA(t));l=e.filter.updateFullNode(t.eventCache.getNode(),f,s)}else{const f=Ia(n);if(f===".priority"){dn(cf(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=t.serverCache.getNode();const A=EV(a,n,d,c);A!=null?l=e.filter.updatePriority(d,A):l=o.getNode()}else{const d=br(n);let A;if(o.isCompleteForChild(f)){c=t.serverCache.getNode();const m=EV(a,n,o.getNode(),c);m!=null?A=o.getNode().getImmediateChild(f).updateChild(d,m):A=o.getNode().getImmediateChild(f)}else A=Z4(a,f,t.serverCache);A!=null?l=e.filter.updateChild(o.getNode(),f,A,d,r,s):l=o.getNode()}}return _0(t,l,o.isFullyInitialized()||Ca(n),e.filter.filtersNodes())}}function K2(e,t,n,a,r,s,o,l){const c=t.serverCache;let f;const d=o?e.filter:e.filter.getIndexedFilter();if(Ca(n))f=d.updateFullNode(c.getNode(),a,null);else if(d.filtersNodes()&&!c.isFiltered()){const p=c.getNode().updateChild(n,a);f=d.updateFullNode(c.getNode(),p,null)}else{const p=Ia(n);if(!c.isCompleteForPath(n)&&cf(n)>1)return t;const h=br(n),g=c.getNode().getImmediateChild(p).updateChild(h,a);p===".priority"?f=d.updatePriority(c.getNode(),g):f=d.updateChild(c.getNode(),p,g,h,Rz,null)}const A=kz(t,f,c.isFullyInitialized()||Ca(n),d.filtersNodes()),m=new eI(r,A,s);return Nz(e,A,n,r,m,l)}function Qk(e,t,n,a,r,s,o){const l=t.eventCache;let c,f;const d=new eI(r,t,s);if(Ca(n))f=e.filter.updateFullNode(t.eventCache.getNode(),a,o),c=_0(t,f,!0,e.filter.filtersNodes());else{const A=Ia(n);if(A===".priority")f=e.filter.updatePriority(t.eventCache.getNode(),a),c=_0(t,f,l.isFullyInitialized(),l.isFiltered());else{const m=br(n),p=l.getNode().getImmediateChild(A);let h;if(Ca(m))h=a;else{const y=d.getCompleteChild(A);y!=null?fz(m)===".priority"&&y.getChild(mz(m)).isEmpty()?h=y:h=y.updateChild(m,a):h=er.EMPTY_NODE}if(p.equals(h))c=t;else{const y=e.filter.updateChild(l.getNode(),A,h,m,d,o);c=_0(t,y,l.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function kV(e,t){return e.eventCache.isCompleteForChild(t)}function Oat(e,t,n,a,r,s,o){let l=t;return a.foreach((c,f)=>{const d=Ms(n,c);kV(t,Ia(d))&&(l=Qk(e,l,d,f,r,s,o))}),a.foreach((c,f)=>{const d=Ms(n,c);kV(t,Ia(d))||(l=Qk(e,l,d,f,r,s,o))}),l}function BV(e,t,n){return n.foreach((a,r)=>{t=t.updateChild(a,r)}),t}function Gk(e,t,n,a,r,s,o,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,f;Ca(n)?f=a:f=new wr(null).setTree(n,a);const d=t.serverCache.getNode();return f.children.inorderTraversal((A,m)=>{if(d.hasChild(A)){const p=t.serverCache.getNode().getImmediateChild(A),h=BV(e,p,m);c=K2(e,c,new Br(A),h,r,s,o,l)}}),f.children.inorderTraversal((A,m)=>{const p=!t.serverCache.isCompleteForChild(A)&&m.value===null;if(!d.hasChild(A)&&!p){const h=t.serverCache.getNode().getImmediateChild(A),y=BV(e,h,m);c=K2(e,c,new Br(A),y,r,s,o,l)}}),c}function Hat(e,t,n,a,r,s,o){if(W2(r,n)!=null)return t;const l=t.serverCache.isFiltered(),c=t.serverCache;if(a.value!=null){if(Ca(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return K2(e,t,n,c.getNode().getChild(n),r,s,l,o);if(Ca(n)){let f=new wr(null);return c.getNode().forEachChild(Fv,(d,A)=>{f=f.set(new Br(d),A)}),Gk(e,t,n,f,r,s,l,o)}else return t}else{let f=new wr(null);return a.foreach((d,A)=>{const m=Ms(n,d);c.isCompleteForPath(m)&&(f=f.set(d,c.getNode().getChild(m)))}),Gk(e,t,n,f,r,s,l,o)}}function $at(e,t,n,a,r){const s=t.serverCache,o=kz(t,s.getNode(),s.isFullyInitialized()||Ca(n),s.isFiltered());return Nz(e,o,n,a,Rz,r)}function Qat(e,t,n,a,r,s){let o;if(W2(a,n)!=null)return t;{const l=new eI(a,t,r),c=t.eventCache.getNode();let f;if(Ca(n)||Ia(n)===".priority"){let d;if(t.serverCache.isFullyInitialized())d=$k(a,VA(t));else{const A=t.serverCache.getNode();dn(A instanceof er,"serverChildren would be complete if leaf node"),d=Pz(a,A)}d=d,f=e.filter.updateFullNode(c,d,s)}else{const d=Ia(n);let A=Z4(a,d,t.serverCache);A==null&&t.serverCache.isCompleteForChild(d)&&(A=c.getImmediateChild(d)),A!=null?f=e.filter.updateChild(c,d,A,br(n),l,s):t.eventCache.getNode().hasChild(d)?f=e.filter.updateChild(c,d,er.EMPTY_NODE,br(n),l,s):f=c,f.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=$k(a,VA(t)),o.isLeafNode()&&(f=e.filter.updateFullNode(f,o,s)))}return o=t.serverCache.isFullyInitialized()||W2(a,or())!=null,_0(t,f,o,e.filter.filtersNodes())}}function Gat(e,t){const n=VA(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ca(t)&&!n.getImmediateChild(Ia(t)).isEmpty())?n.getChild(t):null}function TV(e,t,n,a){t.type===Bu.MERGE&&t.source.queryId!==null&&(dn(VA(e.viewCache_),"We should always have a full cache before handling merges"),dn(Mk(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=Lat(e.processor_,r,t,n,a);return Vat(e.processor_,s.viewCache),dn(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,zat(e,s.changes,s.viewCache.eventCache.getNode())}function zat(e,t,n,a){const r=e.eventRegistrations_;return gat(e.eventGenerator_,t,n,r)}let IV;function Wat(e){dn(!IV,"__referenceConstructor has already been defined"),IV=e}function tI(e,t,n,a){const r=t.source.queryId;if(r!==null){const s=e.views.get(r);return dn(s!=null,"SyncTree gave us an op for an invalid query."),TV(s,t,n,a)}else{let s=[];for(const o of e.views.values())s=s.concat(TV(o,t,n,a));return s}}function nI(e,t){let n=null;for(const a of e.views.values())n=n||Gat(a,t);return n}let FV;function Kat(e){dn(!FV,"__referenceConstructor has already been defined"),FV=e}class PV{constructor(t){this.listenProvider_=t,this.syncPointTree_=new wr(null),this.pendingWriteTree_=Dat(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jat(e,t,n,a,r){return bat(e.pendingWriteTree_,t,n,a,r),r?xb(e,new NA(xz(),t,n)):[]}function dv(e,t,n=!1){const a=xat(e.pendingWriteTree_,t);if(Cat(e.pendingWriteTree_,t)){let s=new wr(null);return a.snap!=null?s=s.set(or(),!0):dl(a.children,o=>{s=s.set(new Br(o),!0)}),xb(e,new z2(a.path,s,n))}else return[]}function bb(e,t,n){return xb(e,new NA(Cz(),t,n))}function qat(e,t,n){const a=wr.fromObject(n);return xb(e,new hg(Cz(),t,a))}function Yat(e,t,n,a){const r=Oz(e,a);if(r!=null){const s=Hz(r),o=s.path,l=s.queryId,c=ol(o,t),f=new NA(Sz(l),c,n);return $z(e,o,f)}else return[]}function Xat(e,t,n,a){const r=Oz(e,a);if(r){const s=Hz(r),o=s.path,l=s.queryId,c=ol(o,t),f=wr.fromObject(n),d=new hg(Sz(l),c,f);return $z(e,o,d)}else return[]}function Vz(e,t,n){const r=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(o,l)=>{const c=ol(o,t),f=nI(l,c);if(f)return f});return Fz(r,t,s,n,!0)}function xb(e,t){return Lz(t,e.syncPointTree_,null,Tz(e.pendingWriteTree_,or()))}function Lz(e,t,n,a){if(Ca(e.path))return Mz(e,t,n,a);{const r=t.get(or());n==null&&r!=null&&(n=nI(r,or()));let s=[];const o=Ia(e.path),l=e.operationForChild(o),c=t.children.get(o);if(c&&l){const f=n?n.getImmediateChild(o):null,d=Dz(a,o);s=s.concat(Lz(l,c,f,d))}return r&&(s=s.concat(tI(r,e,a,n))),s}}function Mz(e,t,n,a){const r=t.get(or());n==null&&r!=null&&(n=nI(r,or()));let s=[];return t.children.inorderTraversal((o,l)=>{const c=n?n.getImmediateChild(o):null,f=Dz(a,o),d=e.operationForChild(o);d&&(s=s.concat(Mz(d,l,c,f)))}),r&&(s=s.concat(tI(r,e,a,n))),s}function Oz(e,t){return e.tagToQueryMap.get(t)}function Hz(e){const t=e.indexOf("$");return dn(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Br(e.substr(0,t))}}function $z(e,t,n){const a=e.syncPointTree_.get(t);dn(a,"Missing sync point for query tag that we're tracking");const r=Tz(e.pendingWriteTree_,t);return tI(a,n,r,null)}class aI{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new aI(n)}node(){return this.node_}}class rI{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Ms(this.path_,t);return new rI(this.syncTree_,n)}node(){return Vz(this.syncTree_,this.path_)}}const Jat=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},DV=function(e,t,n){if(!e||typeof e!="object")return e;if(dn(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Zat(e[".sv"],t,n);if(typeof e[".sv"]=="object")return ert(e[".sv"],t);dn(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Zat=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:dn(!1,"Unexpected server value: "+e)}},ert=function(e,t,n){e.hasOwnProperty("increment")||dn(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const a=e.increment;typeof a!="number"&&dn(!1,"Unexpected increment value: "+a);const r=t.node();if(dn(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return a;const o=r.getValue();return typeof o!="number"?a:o+a},trt=function(e,t,n,a){return sI(t,new rI(n,e),a)},nrt=function(e,t,n){return sI(e,new aI(t),n)};function sI(e,t,n){const a=e.getPriority().val(),r=DV(a,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const o=e,l=DV(o.getValue(),t,n);return l!==o.getValue()||r!==o.getPriority().val()?new Ns(l,go(r)):e}else{const o=e;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Ns(r))),o.forEachChild(Eo,(l,c)=>{const f=sI(c,t.getImmediateChild(l),n);f!==c&&(s=s.updateImmediateChild(l,f))}),s}}class oI{constructor(t="",n=null,a={children:{},childCount:0}){this.name=t,this.parent=n,this.node=a}}function iI(e,t){let n=t instanceof Br?t:new Br(t),a=e,r=Ia(n);for(;r!==null;){const s=Gv(a.node.children,r)||{children:{},childCount:0};a=new oI(r,a,s),n=br(n),r=Ia(n)}return a}function Mh(e){return e.node.value}function Qz(e,t){e.node.value=t,zk(e)}function Gz(e){return e.node.childCount>0}function art(e){return Mh(e)===void 0&&!Gz(e)}function Cb(e,t){dl(e.node.children,(n,a)=>{t(new oI(n,e,a))})}function zz(e,t,n,a){n&&t(e),Cb(e,r=>{zz(r,t,!0)})}function rrt(e,t,n){let a=e.parent;for(;a!==null;){if(t(a))return!0;a=a.parent}return!1}function o1(e){return new Br(e.parent===null?e.name:o1(e.parent)+"/"+e.name)}function zk(e){e.parent!==null&&srt(e.parent,e.name,e)}function srt(e,t,n){const a=art(n),r=Yc(e.node.children,t);a&&r?(delete e.node.children[t],e.node.childCount--,zk(e)):!a&&!r&&(e.node.children[t]=n.node,e.node.childCount++,zk(e))}const ort=/[\[\].#$\/\u0000-\u001F\u007F]/,irt=/[\[\].#$\u0000-\u001F\u007F]/,sS=10*1024*1024,Wz=function(e){return typeof e=="string"&&e.length!==0&&!ort.test(e)},lrt=function(e){return typeof e=="string"&&e.length!==0&&!irt.test(e)},urt=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),lrt(e)},Kz=function(e,t,n){const a=n instanceof Br?new $nt(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+$f(a));if(typeof t=="function")throw new Error(e+"contains a function "+$f(a)+" with contents = "+t.toString());if(WG(t))throw new Error(e+"contains "+t.toString()+" "+$f(a));if(typeof t=="string"&&t.length>sS/3&&Cw(t)>sS)throw new Error(e+"contains a string greater than "+sS+" utf8 bytes "+$f(a)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(dl(t,(o,l)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Wz(o)))throw new Error(e+" contains an invalid key ("+o+") "+$f(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Qnt(a,o),Kz(e,l,a),Gnt(a)}),r&&s)throw new Error(e+' contains ".value" child '+$f(a)+" in addition to actual children.")}},crt=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Wz(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!urt(n))throw new Error(Goe(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class drt{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function frt(e,t){let n=null;for(let a=0;a<t.length;a++){const r=t[a],s=r.getPath();n!==null&&!vz(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function um(e,t,n){frt(e,n),Art(e,a=>Vl(a,t)||Vl(t,a))}function Art(e,t){e.recursionDepth_++;let n=!0;for(let a=0;a<e.eventLists_.length;a++){const r=e.eventLists_[a];if(r){const s=r.path;t(s)?(mrt(e.eventLists_[a]),e.eventLists_[a]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function mrt(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const a=n.getEventRunner();g0&&po("event: "+n.toString()),r1(a)}}}const vrt="repo_interrupt",hrt=25;class prt{constructor(t,n,a,r){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=a,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new drt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=G2(),this.transactionQueueTree_=new oI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function grt(e,t,n){if(e.stats_=K4(e.repoInfo_),e.forceRestClient_||fnt())e.server_=new Q2(e.repoInfo_,(a,r,s,o)=>{UV(e,a,r,s,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>RV(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Zs(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}e.persistentConnection_=new Rc(e.repoInfo_,t,(a,r,s,o)=>{UV(e,a,r,s,o)},a=>{RV(e,a)},a=>{_rt(e,a)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(a=>{e.server_.refreshAuthToken(a)}),e.appCheckProvider_.addTokenChangeListener(a=>{e.server_.refreshAppCheckToken(a.token)}),e.statsReporter_=gnt(e.repoInfo_,()=>new pat(e.stats_,e.server_)),e.infoData_=new fat,e.infoSyncTree_=new PV({startListening:(a,r,s,o)=>{let l=[];const c=e.infoData_.getNode(a._path);return c.isEmpty()||(l=bb(e.infoSyncTree_,a._path,c),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),lI(e,"connected",!1),e.serverSyncTree_=new PV({startListening:(a,r,s,o)=>(e.server_.listen(a,s,r,(l,c)=>{const f=o(l,c);um(e.eventQueue_,a._path,f)}),[]),stopListening:(a,r)=>{e.server_.unlisten(a,r)}})}function yrt(e){const n=e.infoData_.getNode(new Br(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function jz(e){return Jat({timestamp:yrt(e)})}function UV(e,t,n,a,r){e.dataUpdateCount++;const s=new Br(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(a){const c=z_(n,f=>go(f));o=Xat(e.serverSyncTree_,s,c,r)}else{const c=go(n);o=Yat(e.serverSyncTree_,s,c,r)}else if(a){const c=z_(n,f=>go(f));o=qat(e.serverSyncTree_,s,c)}else{const c=go(n);o=bb(e.serverSyncTree_,s,c)}let l=s;o.length>0&&(l=cI(e,s)),um(e.eventQueue_,l,o)}function RV(e,t){lI(e,"connected",t),t===!1&&brt(e)}function _rt(e,t){dl(t,(n,a)=>{lI(e,n,a)})}function lI(e,t,n){const a=new Br("/.info/"+t),r=go(n);e.infoData_.updateSnapshot(a,r);const s=bb(e.infoSyncTree_,a,r);um(e.eventQueue_,a,s)}function wrt(e){return e.nextWriteId_++}function brt(e){qz(e,"onDisconnectEvents");const t=jz(e),n=G2();Lk(e.onDisconnect_,or(),(r,s)=>{const o=trt(r,s,e.serverSyncTree_,t);bz(n,r,o)});let a=[];Lk(n,or(),(r,s)=>{a=a.concat(bb(e.serverSyncTree_,r,s));const o=Ert(e,r);cI(e,o)}),e.onDisconnect_=G2(),um(e.eventQueue_,or(),a)}function xrt(e){e.persistentConnection_&&e.persistentConnection_.interrupt(vrt)}function qz(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),po(n,...t)}function Yz(e,t,n){return Vz(e.serverSyncTree_,t,n)||er.EMPTY_NODE}function uI(e,t=e.transactionQueueTree_){if(t||Sb(e,t),Mh(t)){const n=Jz(e,t);dn(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&Crt(e,o1(t),n)}else Gz(t)&&Cb(t,n=>{uI(e,n)})}function Crt(e,t,n){const a=n.map(f=>f.currentWriteId),r=Yz(e,t,a);let s=r;const o=r.hash();for(let f=0;f<n.length;f++){const d=n[f];dn(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const A=ol(t,d.path);s=s.updateChild(A,d.currentOutputSnapshotRaw)}const l=s.val(!0),c=t;e.server_.put(c.toString(),l,f=>{qz(e,"transaction put response",{path:c.toString(),status:f});let d=[];if(f==="ok"){const A=[];for(let m=0;m<n.length;m++)n[m].status=2,d=d.concat(dv(e.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&A.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();Sb(e,iI(e.transactionQueueTree_,t)),uI(e,e.transactionQueueTree_),um(e.eventQueue_,t,d);for(let m=0;m<A.length;m++)r1(A[m])}else{if(f==="datastale")for(let A=0;A<n.length;A++)n[A].status===3?n[A].status=4:n[A].status=0;else{Di("transaction at "+c.toString()+" failed: "+f);for(let A=0;A<n.length;A++)n[A].status=4,n[A].abortReason=f}cI(e,t)}},o)}function cI(e,t){const n=Xz(e,t),a=o1(n),r=Jz(e,n);return Srt(e,r,a),a}function Srt(e,t,n){if(t.length===0)return;const a=[];let r=[];const o=t.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<t.length;l++){const c=t[l],f=ol(n,c.path);let d=!1,A;if(dn(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,A=c.abortReason,r=r.concat(dv(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=hrt)d=!0,A="maxretry",r=r.concat(dv(e.serverSyncTree_,c.currentWriteId,!0));else{const m=Yz(e,c.path,o);c.currentInputSnapshot=m;const p=t[l].update(m.val());if(p!==void 0){Kz("transaction failed: Data returned ",p,c.path);let h=go(p);typeof p=="object"&&p!=null&&Yc(p,".priority")||(h=h.updatePriority(m.getPriority()));const g=c.currentWriteId,_=jz(e),b=nrt(h,m,_);c.currentOutputSnapshotRaw=h,c.currentOutputSnapshotResolved=b,c.currentWriteId=wrt(e),o.splice(o.indexOf(g),1),r=r.concat(jat(e.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),r=r.concat(dv(e.serverSyncTree_,g,!0))}else d=!0,A="nodata",r=r.concat(dv(e.serverSyncTree_,c.currentWriteId,!0))}um(e.eventQueue_,n,r),r=[],d&&(t[l].status=2,(function(m){setTimeout(m,Math.floor(0))})(t[l].unwatcher),t[l].onComplete&&(A==="nodata"?a.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):a.push(()=>t[l].onComplete(new Error(A),!1,null))))}Sb(e,e.transactionQueueTree_);for(let l=0;l<a.length;l++)r1(a[l]);uI(e,e.transactionQueueTree_)}function Xz(e,t){let n,a=e.transactionQueueTree_;for(n=Ia(t);n!==null&&Mh(a)===void 0;)a=iI(a,n),t=br(t),n=Ia(t);return a}function Jz(e,t){const n=[];return Zz(e,t,n),n.sort((a,r)=>a.order-r.order),n}function Zz(e,t,n){const a=Mh(t);if(a)for(let r=0;r<a.length;r++)n.push(a[r]);Cb(t,r=>{Zz(e,r,n)})}function Sb(e,t){const n=Mh(t);if(n){let a=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[a]=n[r],a++);n.length=a,Qz(t,n.length>0?n:void 0)}Cb(t,a=>{Sb(e,a)})}function Ert(e,t){const n=o1(Xz(e,t)),a=iI(e.transactionQueueTree_,t);return rrt(a,r=>{oS(e,r)}),oS(e,a),zz(a,r=>{oS(e,r)}),n}function oS(e,t){const n=Mh(t);if(n){const a=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(dn(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(dn(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(dv(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&a.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Qz(t,void 0):n.length=s+1,um(e.eventQueue_,o1(t),r);for(let o=0;o<a.length;o++)r1(a[o])}}function krt(e){let t="";const n=e.split("/");for(let a=0;a<n.length;a++)if(n[a].length>0){let r=n[a];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function Brt(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const a=n.split("=");a.length===2?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Di(`Invalid query segment '${n}' in query '${e}'`)}return t}const NV=function(e,t){const n=Trt(e),a=n.namespace;n.domain==="firebase.com"&&UA(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&n.domain!=="localhost"&&UA("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||rnt();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new vnt(n.host,n.secure,a,r,t,"",a!==n.subdomain),path:new Br(n.pathString)}},Trt=function(e){let t="",n="",a="",r="",s="",o=!0,l="https",c=443;if(typeof e=="string"){let f=e.indexOf("//");f>=0&&(l=e.substring(0,f-1),e=e.substring(f+2));let d=e.indexOf("/");d===-1&&(d=e.length);let A=e.indexOf("?");A===-1&&(A=e.length),t=e.substring(0,Math.min(d,A)),d<A&&(r=krt(e.substring(d,A)));const m=Brt(e.substring(Math.min(e.length,A)));f=t.indexOf(":"),f>=0?(o=l==="https"||l==="wss",c=parseInt(t.substring(f+1),10)):f=t.length;const p=t.slice(0,f);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const h=t.indexOf(".");a=t.substring(0,h).toLowerCase(),n=t.substring(h+1),s=a}"ns"in m&&(s=m.ns)}return{host:t,port:c,domain:n,subdomain:a,secure:o,scheme:l,pathString:r,namespace:s}};class dI{constructor(t,n,a,r){this._repo=t,this._path=n,this._queryParams=a,this._orderByCalled=r}get key(){return Ca(this._path)?null:fz(this._path)}get ref(){return new Oh(this._repo,this._path)}get _queryIdentifier(){const t=wV(this._queryParams),n=z4(t);return n==="{}"?"default":n}get _queryObject(){return wV(this._queryParams)}isEqual(t){if(t=Wu(t),!(t instanceof dI))return!1;const n=this._repo===t._repo,a=vz(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return n&&a&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Hnt(this._path)}}class Oh extends dI{constructor(t,n){super(t,n,new X4,!1)}get parent(){const t=mz(this._path);return t===null?null:new Oh(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}Wat(Oh);Kat(Oh);const Irt="FIREBASE_DATABASE_EMULATOR_HOST",Wk={};let Frt=!1;function Prt(e,t,n,a,r){let s=a||e.options.databaseURL;s===void 0&&(e.options.projectId||UA("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),po("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=NV(s,r),l=o.repoInfo,c;typeof process<"u"&&nV&&(c=nV[Irt]),c?(s=`http://${c}?ns=${l.namespace}`,o=NV(s,r),l=o.repoInfo):o.repoInfo.secure;const f=new mnt(e.name,e.options,t);crt("Invalid Firebase Database URL",o),Ca(o.path)||UA("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Urt(l,e,f,new Ant(e,n));return new Rrt(d,e)}function Drt(e,t){const n=Wk[t];(!n||n[e.key]!==e)&&UA(`Database ${t}(${e.repoInfo_}) has already been deleted.`),xrt(e),delete n[e.key]}function Urt(e,t,n,a){let r=Wk[t.name];r||(r={},Wk[t.name]=r);let s=r[e.toURLString()];return s&&UA("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new prt(e,Frt,n,a),r[e.toURLString()]=s,s}class Rrt{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(grt(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oh(this._repo,or())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Drt(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&UA("Cannot call "+t+" on a deleted database.")}}function Nrt(e){Jtt(Af),Vu(new ql("database",(t,{instanceIdentifier:n})=>{const a=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return Prt(a,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Pi(aV,rV,e),Pi(aV,rV,"esm2017")}Rc.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Rc.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};Nrt();var VV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fI;(function(){var e;function t(E,x){function C(){}C.prototype=x.prototype,E.D=x.prototype,E.prototype=new C,E.prototype.constructor=E,E.C=function(D,U,L){for(var H=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)H[oe-2]=arguments[oe];return x.prototype[U].apply(D,H)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,n),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,x,C){C||(C=0);var D=Array(16);if(typeof x=="string")for(var U=0;16>U;++U)D[U]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(U=0;16>U;++U)D[U]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=E.g[0],C=E.g[1],U=E.g[2];var L=E.g[3],H=x+(L^C&(U^L))+D[0]+3614090360&4294967295;x=C+(H<<7&4294967295|H>>>25),H=L+(U^x&(C^U))+D[1]+3905402710&4294967295,L=x+(H<<12&4294967295|H>>>20),H=U+(C^L&(x^C))+D[2]+606105819&4294967295,U=L+(H<<17&4294967295|H>>>15),H=C+(x^U&(L^x))+D[3]+3250441966&4294967295,C=U+(H<<22&4294967295|H>>>10),H=x+(L^C&(U^L))+D[4]+4118548399&4294967295,x=C+(H<<7&4294967295|H>>>25),H=L+(U^x&(C^U))+D[5]+1200080426&4294967295,L=x+(H<<12&4294967295|H>>>20),H=U+(C^L&(x^C))+D[6]+2821735955&4294967295,U=L+(H<<17&4294967295|H>>>15),H=C+(x^U&(L^x))+D[7]+4249261313&4294967295,C=U+(H<<22&4294967295|H>>>10),H=x+(L^C&(U^L))+D[8]+1770035416&4294967295,x=C+(H<<7&4294967295|H>>>25),H=L+(U^x&(C^U))+D[9]+2336552879&4294967295,L=x+(H<<12&4294967295|H>>>20),H=U+(C^L&(x^C))+D[10]+4294925233&4294967295,U=L+(H<<17&4294967295|H>>>15),H=C+(x^U&(L^x))+D[11]+2304563134&4294967295,C=U+(H<<22&4294967295|H>>>10),H=x+(L^C&(U^L))+D[12]+1804603682&4294967295,x=C+(H<<7&4294967295|H>>>25),H=L+(U^x&(C^U))+D[13]+4254626195&4294967295,L=x+(H<<12&4294967295|H>>>20),H=U+(C^L&(x^C))+D[14]+2792965006&4294967295,U=L+(H<<17&4294967295|H>>>15),H=C+(x^U&(L^x))+D[15]+1236535329&4294967295,C=U+(H<<22&4294967295|H>>>10),H=x+(U^L&(C^U))+D[1]+4129170786&4294967295,x=C+(H<<5&4294967295|H>>>27),H=L+(C^U&(x^C))+D[6]+3225465664&4294967295,L=x+(H<<9&4294967295|H>>>23),H=U+(x^C&(L^x))+D[11]+643717713&4294967295,U=L+(H<<14&4294967295|H>>>18),H=C+(L^x&(U^L))+D[0]+3921069994&4294967295,C=U+(H<<20&4294967295|H>>>12),H=x+(U^L&(C^U))+D[5]+3593408605&4294967295,x=C+(H<<5&4294967295|H>>>27),H=L+(C^U&(x^C))+D[10]+38016083&4294967295,L=x+(H<<9&4294967295|H>>>23),H=U+(x^C&(L^x))+D[15]+3634488961&4294967295,U=L+(H<<14&4294967295|H>>>18),H=C+(L^x&(U^L))+D[4]+3889429448&4294967295,C=U+(H<<20&4294967295|H>>>12),H=x+(U^L&(C^U))+D[9]+568446438&4294967295,x=C+(H<<5&4294967295|H>>>27),H=L+(C^U&(x^C))+D[14]+3275163606&4294967295,L=x+(H<<9&4294967295|H>>>23),H=U+(x^C&(L^x))+D[3]+4107603335&4294967295,U=L+(H<<14&4294967295|H>>>18),H=C+(L^x&(U^L))+D[8]+1163531501&4294967295,C=U+(H<<20&4294967295|H>>>12),H=x+(U^L&(C^U))+D[13]+2850285829&4294967295,x=C+(H<<5&4294967295|H>>>27),H=L+(C^U&(x^C))+D[2]+4243563512&4294967295,L=x+(H<<9&4294967295|H>>>23),H=U+(x^C&(L^x))+D[7]+1735328473&4294967295,U=L+(H<<14&4294967295|H>>>18),H=C+(L^x&(U^L))+D[12]+2368359562&4294967295,C=U+(H<<20&4294967295|H>>>12),H=x+(C^U^L)+D[5]+4294588738&4294967295,x=C+(H<<4&4294967295|H>>>28),H=L+(x^C^U)+D[8]+2272392833&4294967295,L=x+(H<<11&4294967295|H>>>21),H=U+(L^x^C)+D[11]+1839030562&4294967295,U=L+(H<<16&4294967295|H>>>16),H=C+(U^L^x)+D[14]+4259657740&4294967295,C=U+(H<<23&4294967295|H>>>9),H=x+(C^U^L)+D[1]+2763975236&4294967295,x=C+(H<<4&4294967295|H>>>28),H=L+(x^C^U)+D[4]+1272893353&4294967295,L=x+(H<<11&4294967295|H>>>21),H=U+(L^x^C)+D[7]+4139469664&4294967295,U=L+(H<<16&4294967295|H>>>16),H=C+(U^L^x)+D[10]+3200236656&4294967295,C=U+(H<<23&4294967295|H>>>9),H=x+(C^U^L)+D[13]+681279174&4294967295,x=C+(H<<4&4294967295|H>>>28),H=L+(x^C^U)+D[0]+3936430074&4294967295,L=x+(H<<11&4294967295|H>>>21),H=U+(L^x^C)+D[3]+3572445317&4294967295,U=L+(H<<16&4294967295|H>>>16),H=C+(U^L^x)+D[6]+76029189&4294967295,C=U+(H<<23&4294967295|H>>>9),H=x+(C^U^L)+D[9]+3654602809&4294967295,x=C+(H<<4&4294967295|H>>>28),H=L+(x^C^U)+D[12]+3873151461&4294967295,L=x+(H<<11&4294967295|H>>>21),H=U+(L^x^C)+D[15]+530742520&4294967295,U=L+(H<<16&4294967295|H>>>16),H=C+(U^L^x)+D[2]+3299628645&4294967295,C=U+(H<<23&4294967295|H>>>9),H=x+(U^(C|~L))+D[0]+4096336452&4294967295,x=C+(H<<6&4294967295|H>>>26),H=L+(C^(x|~U))+D[7]+1126891415&4294967295,L=x+(H<<10&4294967295|H>>>22),H=U+(x^(L|~C))+D[14]+2878612391&4294967295,U=L+(H<<15&4294967295|H>>>17),H=C+(L^(U|~x))+D[5]+4237533241&4294967295,C=U+(H<<21&4294967295|H>>>11),H=x+(U^(C|~L))+D[12]+1700485571&4294967295,x=C+(H<<6&4294967295|H>>>26),H=L+(C^(x|~U))+D[3]+2399980690&4294967295,L=x+(H<<10&4294967295|H>>>22),H=U+(x^(L|~C))+D[10]+4293915773&4294967295,U=L+(H<<15&4294967295|H>>>17),H=C+(L^(U|~x))+D[1]+2240044497&4294967295,C=U+(H<<21&4294967295|H>>>11),H=x+(U^(C|~L))+D[8]+1873313359&4294967295,x=C+(H<<6&4294967295|H>>>26),H=L+(C^(x|~U))+D[15]+4264355552&4294967295,L=x+(H<<10&4294967295|H>>>22),H=U+(x^(L|~C))+D[6]+2734768916&4294967295,U=L+(H<<15&4294967295|H>>>17),H=C+(L^(U|~x))+D[13]+1309151649&4294967295,C=U+(H<<21&4294967295|H>>>11),H=x+(U^(C|~L))+D[4]+4149444226&4294967295,x=C+(H<<6&4294967295|H>>>26),H=L+(C^(x|~U))+D[11]+3174756917&4294967295,L=x+(H<<10&4294967295|H>>>22),H=U+(x^(L|~C))+D[2]+718787259&4294967295,U=L+(H<<15&4294967295|H>>>17),H=C+(L^(U|~x))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+x&4294967295,E.g[1]=E.g[1]+(U+(H<<21&4294967295|H>>>11))&4294967295,E.g[2]=E.g[2]+U&4294967295,E.g[3]=E.g[3]+L&4294967295}a.prototype.u=function(E,x){x===void 0&&(x=E.length);for(var C=x-this.blockSize,D=this.B,U=this.h,L=0;L<x;){if(U==0)for(;L<=C;)r(this,E,L),L+=this.blockSize;if(typeof E=="string"){for(;L<x;)if(D[U++]=E.charCodeAt(L++),U==this.blockSize){r(this,D),U=0;break}}else for(;L<x;)if(D[U++]=E[L++],U==this.blockSize){r(this,D),U=0;break}}this.h=U,this.o+=x},a.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var x=1;x<E.length-8;++x)E[x]=0;var C=8*this.o;for(x=E.length-8;x<E.length;++x)E[x]=C&255,C/=256;for(this.u(E),E=Array(16),x=C=0;4>x;++x)for(var D=0;32>D;D+=8)E[C++]=this.g[x]>>>D&255;return E};function s(E,x){var C=l;return Object.prototype.hasOwnProperty.call(C,E)?C[E]:C[E]=x(E)}function o(E,x){this.h=x;for(var C=[],D=!0,U=E.length-1;0<=U;U--){var L=E[U]|0;D&&L==x||(C[U]=L,D=!1)}this.g=C}var l={};function c(E){return-128<=E&&128>E?s(E,function(x){return new o([x|0],0>x?-1:0)}):new o([E|0],0>E?-1:0)}function f(E){if(isNaN(E)||!isFinite(E))return A;if(0>E)return g(f(-E));for(var x=[],C=1,D=0;E>=C;D++)x[D]=E/C|0,C*=4294967296;return new o(x,0)}function d(E,x){if(E.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(E.charAt(0)=="-")return g(d(E.substring(1),x));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=f(Math.pow(x,8)),D=A,U=0;U<E.length;U+=8){var L=Math.min(8,E.length-U),H=parseInt(E.substring(U,U+L),x);8>L?(L=f(Math.pow(x,L)),D=D.j(L).add(f(H))):(D=D.j(C),D=D.add(f(H)))}return D}var A=c(0),m=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(y(this))return-g(this).m();for(var E=0,x=1,C=0;C<this.g.length;C++){var D=this.i(C);E+=(0<=D?D:4294967296+D)*x,x*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(h(this))return"0";if(y(this))return"-"+g(this).toString(E);for(var x=f(Math.pow(E,6)),C=this,D="";;){var U=B(C,x).g;C=_(C,U.j(x));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(E);if(C=U,h(C))return L+D;for(;6>L.length;)L="0"+L;D=L+D}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function h(E){if(E.h!=0)return!1;for(var x=0;x<E.g.length;x++)if(E.g[x]!=0)return!1;return!0}function y(E){return E.h==-1}e.l=function(E){return E=_(this,E),y(E)?-1:h(E)?0:1};function g(E){for(var x=E.g.length,C=[],D=0;D<x;D++)C[D]=~E.g[D];return new o(C,~E.h).add(m)}e.abs=function(){return y(this)?g(this):this},e.add=function(E){for(var x=Math.max(this.g.length,E.g.length),C=[],D=0,U=0;U<=x;U++){var L=D+(this.i(U)&65535)+(E.i(U)&65535),H=(L>>>16)+(this.i(U)>>>16)+(E.i(U)>>>16);D=H>>>16,L&=65535,H&=65535,C[U]=H<<16|L}return new o(C,C[C.length-1]&-2147483648?-1:0)};function _(E,x){return E.add(g(x))}e.j=function(E){if(h(this)||h(E))return A;if(y(this))return y(E)?g(this).j(g(E)):g(g(this).j(E));if(y(E))return g(this.j(g(E)));if(0>this.l(p)&&0>E.l(p))return f(this.m()*E.m());for(var x=this.g.length+E.g.length,C=[],D=0;D<2*x;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var U=0;U<E.g.length;U++){var L=this.i(D)>>>16,H=this.i(D)&65535,oe=E.i(U)>>>16,de=E.i(U)&65535;C[2*D+2*U]+=H*de,b(C,2*D+2*U),C[2*D+2*U+1]+=L*de,b(C,2*D+2*U+1),C[2*D+2*U+1]+=H*oe,b(C,2*D+2*U+1),C[2*D+2*U+2]+=L*oe,b(C,2*D+2*U+2)}for(D=0;D<x;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=x;D<2*x;D++)C[D]=0;return new o(C,0)};function b(E,x){for(;(E[x]&65535)!=E[x];)E[x+1]+=E[x]>>>16,E[x]&=65535,x++}function S(E,x){this.g=E,this.h=x}function B(E,x){if(h(x))throw Error("division by zero");if(h(E))return new S(A,A);if(y(E))return x=B(g(E),x),new S(g(x.g),g(x.h));if(y(x))return x=B(E,g(x)),new S(g(x.g),x.h);if(30<E.g.length){if(y(E)||y(x))throw Error("slowDivide_ only works with positive integers.");for(var C=m,D=x;0>=D.l(E);)C=F(C),D=F(D);var U=T(C,1),L=T(D,1);for(D=T(D,2),C=T(C,2);!h(D);){var H=L.add(D);0>=H.l(E)&&(U=U.add(C),L=H),D=T(D,1),C=T(C,1)}return x=_(E,U.j(x)),new S(U,x)}for(U=A;0<=E.l(x);){for(C=Math.max(1,Math.floor(E.m()/x.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),L=f(C),H=L.j(x);y(H)||0<H.l(E);)C-=D,L=f(C),H=L.j(x);h(L)&&(L=m),U=U.add(L),E=_(E,H)}return new S(U,E)}e.A=function(E){return B(this,E).h},e.and=function(E){for(var x=Math.max(this.g.length,E.g.length),C=[],D=0;D<x;D++)C[D]=this.i(D)&E.i(D);return new o(C,this.h&E.h)},e.or=function(E){for(var x=Math.max(this.g.length,E.g.length),C=[],D=0;D<x;D++)C[D]=this.i(D)|E.i(D);return new o(C,this.h|E.h)},e.xor=function(E){for(var x=Math.max(this.g.length,E.g.length),C=[],D=0;D<x;D++)C[D]=this.i(D)^E.i(D);return new o(C,this.h^E.h)};function F(E){for(var x=E.g.length+1,C=[],D=0;D<x;D++)C[D]=E.i(D)<<1|E.i(D-1)>>>31;return new o(C,E.h)}function T(E,x){var C=x>>5;x%=32;for(var D=E.g.length-C,U=[],L=0;L<D;L++)U[L]=0<x?E.i(L+C)>>>x|E.i(L+C+1)<<32-x:E.i(L+C);return new o(U,E.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=d,fI=o}).apply(typeof VV<"u"?VV:typeof self<"u"?self:typeof window<"u"?window:{});var Ky=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(V,ve,we){return V==Array.prototype||V==Object.prototype||(V[ve]=we.value),V};function n(V){V=[typeof globalThis=="object"&&globalThis,V,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ky=="object"&&Ky];for(var ve=0;ve<V.length;++ve){var we=V[ve];if(we&&we.Math==Math)return we}throw Error("Cannot find global object")}var a=n(this);function r(V,ve){if(ve)e:{var we=a;V=V.split(".");for(var Le=0;Le<V.length-1;Le++){var _t=V[Le];if(!(_t in we))break e;we=we[_t]}V=V[V.length-1],Le=we[V],ve=ve(Le),ve!=Le&&ve!=null&&t(we,V,{configurable:!0,writable:!0,value:ve})}}function s(V,ve){V instanceof String&&(V+="");var we=0,Le=!1,_t={next:function(){if(!Le&&we<V.length){var Pt=we++;return{value:ve(Pt,V[Pt]),done:!1}}return Le=!0,{done:!0,value:void 0}}};return _t[Symbol.iterator]=function(){return _t},_t}r("Array.prototype.values",function(V){return V||function(){return s(this,function(ve,we){return we})}});var o=o||{},l=this||self;function c(V){var ve=typeof V;return ve=ve!="object"?ve:V?Array.isArray(V)?"array":ve:"null",ve=="array"||ve=="object"&&typeof V.length=="number"}function f(V){var ve=typeof V;return ve=="object"&&V!=null||ve=="function"}function d(V,ve,we){return V.call.apply(V.bind,arguments)}function A(V,ve,we){if(!V)throw Error();if(2<arguments.length){var Le=Array.prototype.slice.call(arguments,2);return function(){var _t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_t,Le),V.apply(ve,_t)}}return function(){return V.apply(ve,arguments)}}function m(V,ve,we){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:A,m.apply(null,arguments)}function p(V,ve){var we=Array.prototype.slice.call(arguments,1);return function(){var Le=we.slice();return Le.push.apply(Le,arguments),V.apply(this,Le)}}function h(V,ve){function we(){}we.prototype=ve.prototype,V.aa=ve.prototype,V.prototype=new we,V.prototype.constructor=V,V.Qb=function(Le,_t,Pt){for(var an=Array(arguments.length-2),Ha=2;Ha<arguments.length;Ha++)an[Ha-2]=arguments[Ha];return ve.prototype[_t].apply(Le,an)}}function y(V){const ve=V.length;if(0<ve){const we=Array(ve);for(let Le=0;Le<ve;Le++)we[Le]=V[Le];return we}return[]}function g(V,ve){for(let we=1;we<arguments.length;we++){const Le=arguments[we];if(c(Le)){const _t=V.length||0,Pt=Le.length||0;V.length=_t+Pt;for(let an=0;an<Pt;an++)V[_t+an]=Le[an]}else V.push(Le)}}class _{constructor(ve,we){this.i=ve,this.j=we,this.h=0,this.g=null}get(){let ve;return 0<this.h?(this.h--,ve=this.g,this.g=ve.next,ve.next=null):ve=this.i(),ve}}function b(V){return/^[\s\xa0]*$/.test(V)}function S(){var V=l.navigator;return V&&(V=V.userAgent)?V:""}function B(V){return B[" "](V),V}B[" "]=function(){};var F=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function T(V,ve,we){for(const Le in V)ve.call(we,V[Le],Le,V)}function E(V,ve){for(const we in V)ve.call(void 0,V[we],we,V)}function x(V){const ve={};for(const we in V)ve[we]=V[we];return ve}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(V,ve){let we,Le;for(let _t=1;_t<arguments.length;_t++){Le=arguments[_t];for(we in Le)V[we]=Le[we];for(let Pt=0;Pt<C.length;Pt++)we=C[Pt],Object.prototype.hasOwnProperty.call(Le,we)&&(V[we]=Le[we])}}function U(V){var ve=1;V=V.split(":");const we=[];for(;0<ve&&V.length;)we.push(V.shift()),ve--;return V.length&&we.push(V.join(":")),we}function L(V){l.setTimeout(()=>{throw V},0)}function H(){var V=le;let ve=null;return V.g&&(ve=V.g,V.g=V.g.next,V.g||(V.h=null),ve.next=null),ve}class oe{constructor(){this.h=this.g=null}add(ve,we){const Le=de.get();Le.set(ve,we),this.h?this.h.next=Le:this.g=Le,this.h=Le}}var de=new _(()=>new te,V=>V.reset());class te{constructor(){this.next=this.g=this.h=null}set(ve,we){this.h=ve,this.g=we,this.next=null}reset(){this.next=this.g=this.h=null}}let q,ce=!1,le=new oe,Z=()=>{const V=l.Promise.resolve(void 0);q=()=>{V.then(ne)}};var ne=()=>{for(var V;V=H();){try{V.h.call(V.g)}catch(we){L(we)}var ve=de;ve.j(V),100>ve.h&&(ve.h++,V.next=ve.g,ve.g=V)}ce=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(V,ve){this.type=V,this.g=this.target=ve,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Q=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var V=!1,ve=Object.defineProperty({},"passive",{get:function(){V=!0}});try{const we=()=>{};l.addEventListener("test",we,ve),l.removeEventListener("test",we,ve)}catch{}return V})();function O(V,ve){if(W.call(this,V?V.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,V){var we=this.type=V.type,Le=V.changedTouches&&V.changedTouches.length?V.changedTouches[0]:null;if(this.target=V.target||V.srcElement,this.g=ve,ve=V.relatedTarget){if(F){e:{try{B(ve.nodeName);var _t=!0;break e}catch{}_t=!1}_t||(ve=null)}}else we=="mouseover"?ve=V.fromElement:we=="mouseout"&&(ve=V.toElement);this.relatedTarget=ve,Le?(this.clientX=Le.clientX!==void 0?Le.clientX:Le.pageX,this.clientY=Le.clientY!==void 0?Le.clientY:Le.pageY,this.screenX=Le.screenX||0,this.screenY=Le.screenY||0):(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0),this.button=V.button,this.key=V.key||"",this.ctrlKey=V.ctrlKey,this.altKey=V.altKey,this.shiftKey=V.shiftKey,this.metaKey=V.metaKey,this.pointerId=V.pointerId||0,this.pointerType=typeof V.pointerType=="string"?V.pointerType:ae[V.pointerType]||"",this.state=V.state,this.i=V,V.defaultPrevented&&O.aa.h.call(this)}}h(O,W);var ae={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var V=this.i;V.preventDefault?V.preventDefault():V.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),J=0;function ie(V,ve,we,Le,_t){this.listener=V,this.proxy=null,this.src=ve,this.type=we,this.capture=!!Le,this.ha=_t,this.key=++J,this.da=this.fa=!1}function X(V){V.da=!0,V.listener=null,V.proxy=null,V.src=null,V.ha=null}function fe(V){this.src=V,this.g={},this.h=0}fe.prototype.add=function(V,ve,we,Le,_t){var Pt=V.toString();V=this.g[Pt],V||(V=this.g[Pt]=[],this.h++);var an=z(V,ve,Le,_t);return-1<an?(ve=V[an],we||(ve.fa=!1)):(ve=new ie(ve,this.src,Pt,!!Le,_t),ve.fa=we,V.push(ve)),ve};function M(V,ve){var we=ve.type;if(we in V.g){var Le=V.g[we],_t=Array.prototype.indexOf.call(Le,ve,void 0),Pt;(Pt=0<=_t)&&Array.prototype.splice.call(Le,_t,1),Pt&&(X(ve),V.g[we].length==0&&(delete V.g[we],V.h--))}}function z(V,ve,we,Le){for(var _t=0;_t<V.length;++_t){var Pt=V[_t];if(!Pt.da&&Pt.listener==ve&&Pt.capture==!!we&&Pt.ha==Le)return _t}return-1}var se="closure_lm_"+(1e6*Math.random()|0),be={};function Fe(V,ve,we,Le,_t){if(Array.isArray(ve)){for(var Pt=0;Pt<ve.length;Pt++)Fe(V,ve[Pt],we,Le,_t);return null}return we=mt(we),V&&V[j]?V.K(ve,we,f(Le)?!!Le.capture:!1,_t):ye(V,ve,we,!1,Le,_t)}function ye(V,ve,we,Le,_t,Pt){if(!ve)throw Error("Invalid event type");var an=f(_t)?!!_t.capture:!!_t,Ha=je(V);if(Ha||(V[se]=Ha=new fe(V)),we=Ha.add(ve,we,Le,an,Pt),we.proxy)return we;if(Le=Qe(),we.proxy=Le,Le.src=V,Le.listener=we,V.addEventListener)Q||(_t=an),_t===void 0&&(_t=!1),V.addEventListener(ve.toString(),Le,_t);else if(V.attachEvent)V.attachEvent(Ee(ve.toString()),Le);else if(V.addListener&&V.removeListener)V.addListener(Le);else throw Error("addEventListener and attachEvent are unavailable.");return we}function Qe(){function V(we){return ve.call(V.src,V.listener,we)}const ve=Ue;return V}function _e(V,ve,we,Le,_t){if(Array.isArray(ve))for(var Pt=0;Pt<ve.length;Pt++)_e(V,ve[Pt],we,Le,_t);else Le=f(Le)?!!Le.capture:!!Le,we=mt(we),V&&V[j]?(V=V.i,ve=String(ve).toString(),ve in V.g&&(Pt=V.g[ve],we=z(Pt,we,Le,_t),-1<we&&(X(Pt[we]),Array.prototype.splice.call(Pt,we,1),Pt.length==0&&(delete V.g[ve],V.h--)))):V&&(V=je(V))&&(ve=V.g[ve.toString()],V=-1,ve&&(V=z(ve,we,Le,_t)),(we=-1<V?ve[V]:null)&&Se(we))}function Se(V){if(typeof V!="number"&&V&&!V.da){var ve=V.src;if(ve&&ve[j])M(ve.i,V);else{var we=V.type,Le=V.proxy;ve.removeEventListener?ve.removeEventListener(we,Le,V.capture):ve.detachEvent?ve.detachEvent(Ee(we),Le):ve.addListener&&ve.removeListener&&ve.removeListener(Le),(we=je(ve))?(M(we,V),we.h==0&&(we.src=null,ve[se]=null)):X(V)}}}function Ee(V){return V in be?be[V]:be[V]="on"+V}function Ue(V,ve){if(V.da)V=!0;else{ve=new O(ve,this);var we=V.listener,Le=V.ha||V.src;V.fa&&Se(V),V=we.call(Le,ve)}return V}function je(V){return V=V[se],V instanceof fe?V:null}var at="__closure_events_fn_"+(1e9*Math.random()>>>0);function mt(V){return typeof V=="function"?V:(V[at]||(V[at]=function(ve){return V.handleEvent(ve)}),V[at])}function xe(){G.call(this),this.i=new fe(this),this.M=this,this.F=null}h(xe,G),xe.prototype[j]=!0,xe.prototype.removeEventListener=function(V,ve,we,Le){_e(this,V,ve,we,Le)};function Be(V,ve){var we,Le=V.F;if(Le)for(we=[];Le;Le=Le.F)we.push(Le);if(V=V.M,Le=ve.type||ve,typeof ve=="string")ve=new W(ve,V);else if(ve instanceof W)ve.target=ve.target||V;else{var _t=ve;ve=new W(Le,V),D(ve,_t)}if(_t=!0,we)for(var Pt=we.length-1;0<=Pt;Pt--){var an=ve.g=we[Pt];_t=Ye(an,Le,!0,ve)&&_t}if(an=ve.g=V,_t=Ye(an,Le,!0,ve)&&_t,_t=Ye(an,Le,!1,ve)&&_t,we)for(Pt=0;Pt<we.length;Pt++)an=ve.g=we[Pt],_t=Ye(an,Le,!1,ve)&&_t}xe.prototype.N=function(){if(xe.aa.N.call(this),this.i){var V=this.i,ve;for(ve in V.g){for(var we=V.g[ve],Le=0;Le<we.length;Le++)X(we[Le]);delete V.g[ve],V.h--}}this.F=null},xe.prototype.K=function(V,ve,we,Le){return this.i.add(String(V),ve,!1,we,Le)},xe.prototype.L=function(V,ve,we,Le){return this.i.add(String(V),ve,!0,we,Le)};function Ye(V,ve,we,Le){if(ve=V.i.g[String(ve)],!ve)return!0;ve=ve.concat();for(var _t=!0,Pt=0;Pt<ve.length;++Pt){var an=ve[Pt];if(an&&!an.da&&an.capture==we){var Ha=an.listener,Wr=an.ha||an.src;an.fa&&M(V.i,an),_t=Ha.call(Wr,Le)!==!1&&_t}}return _t&&!Le.defaultPrevented}function kt(V,ve,we){if(typeof V=="function")we&&(V=m(V,we));else if(V&&typeof V.handleEvent=="function")V=m(V.handleEvent,V);else throw Error("Invalid listener argument");return 2147483647<Number(ve)?-1:l.setTimeout(V,ve||0)}function xt(V){V.g=kt(()=>{V.g=null,V.i&&(V.i=!1,xt(V))},V.l);const ve=V.h;V.h=null,V.m.apply(null,ve)}class Nt extends G{constructor(ve,we){super(),this.m=ve,this.l=we,this.h=null,this.i=!1,this.g=null}j(ve){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function At(V){G.call(this),this.h=V,this.g={}}h(At,G);var Ot=[];function Dt(V){T(V.g,function(ve,we){this.g.hasOwnProperty(we)&&Se(ve)},V),V.g={}}At.prototype.N=function(){At.aa.N.call(this),Dt(this)},At.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bt=l.JSON.stringify,Ze=l.JSON.parse,qt=class{stringify(V){return l.JSON.stringify(V,void 0)}parse(V){return l.JSON.parse(V,void 0)}};function Vt(){}Vt.prototype.h=null;function zt(V){return V.h||(V.h=V.i())}function ln(){}var Dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vt(){W.call(this,"d")}h(vt,W);function et(){W.call(this,"c")}h(et,W);var Wt={},_n=null;function na(){return _n=_n||new xe}Wt.La="serverreachability";function rt(V){W.call(this,Wt.La,V)}h(rt,W);function Pe(V){const ve=na();Be(ve,new rt(ve))}Wt.STAT_EVENT="statevent";function ut(V,ve){W.call(this,Wt.STAT_EVENT,V),this.stat=ve}h(ut,W);function wt(V){const ve=na();Be(ve,new ut(ve,V))}Wt.Ma="timingevent";function Xt(V,ve){W.call(this,Wt.Ma,V),this.size=ve}h(Xt,W);function bn(V,ve){if(typeof V!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){V()},ve)}function wn(){this.g=!0}wn.prototype.xa=function(){this.g=!1};function Zn(V,ve,we,Le,_t,Pt){V.info(function(){if(V.g)if(Pt)for(var an="",Ha=Pt.split("&"),Wr=0;Wr<Ha.length;Wr++){var ka=Ha[Wr].split("=");if(1<ka.length){var ys=ka[0];ka=ka[1];var ja=ys.split("_");an=2<=ja.length&&ja[1]=="type"?an+(ys+"="+ka+"&"):an+(ys+"=redacted&")}}else an=null;else an=Pt;return"XMLHTTP REQ ("+Le+") [attempt "+_t+"]: "+ve+`
`+we+`
`+an})}function ua(V,ve,we,Le,_t,Pt,an){V.info(function(){return"XMLHTTP RESP ("+Le+") [ attempt "+_t+"]: "+ve+`
`+we+`
`+Pt+" "+an})}function Ce(V,ve,we,Le){V.info(function(){return"XMLHTTP TEXT ("+ve+"): "+Re(V,we)+(Le?" "+Le:"")})}function He(V,ve){V.info(function(){return"TIMEOUT: "+ve})}wn.prototype.info=function(){};function Re(V,ve){if(!V.g)return ve;if(!ve)return null;try{var we=JSON.parse(ve);if(we){for(V=0;V<we.length;V++)if(Array.isArray(we[V])){var Le=we[V];if(!(2>Le.length)){var _t=Le[1];if(Array.isArray(_t)&&!(1>_t.length)){var Pt=_t[0];if(Pt!="noop"&&Pt!="stop"&&Pt!="close")for(var an=1;an<_t.length;an++)_t[an]=""}}}}return bt(we)}catch{return ve}}var Te={NO_ERROR:0,TIMEOUT:8},Ve={},$e;function dt(){}h(dt,Vt),dt.prototype.g=function(){return new XMLHttpRequest},dt.prototype.i=function(){return{}},$e=new dt;function Bt(V,ve,we,Le){this.j=V,this.i=ve,this.l=we,this.R=Le||1,this.U=new At(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yt}function yt(){this.i=null,this.g="",this.h=!1}var gt={},pt={};function tt(V,ve,we){V.L=1,V.v=ft(Rt(ve)),V.m=we,V.P=!0,re(V,null)}function re(V,ve){V.F=Date.now(),nt(V),V.A=Rt(V.v);var we=V.A,Le=V.R;Array.isArray(Le)||(Le=[String(Le)]),gf(we.i,"t",Le),V.C=0,we=V.j.J,V.h=new yt,V.g=wa(V.j,we?ve:null,!V.m),0<V.O&&(V.M=new Nt(m(V.Y,V,V.g),V.O)),ve=V.U,we=V.g,Le=V.ca;var _t="readystatechange";Array.isArray(_t)||(_t&&(Ot[0]=_t.toString()),_t=Ot);for(var Pt=0;Pt<_t.length;Pt++){var an=Fe(we,_t[Pt],Le||ve.handleEvent,!1,ve.h||ve);if(!an)break;ve.g[an.key]=an}ve=V.H?x(V.H):{},V.m?(V.u||(V.u="POST"),ve["Content-Type"]="application/x-www-form-urlencoded",V.g.ea(V.A,V.u,V.m,ve)):(V.u="GET",V.g.ea(V.A,V.u,null,ve)),Pe(),Zn(V.i,V.u,V.A,V.l,V.R,V.m)}Bt.prototype.ca=function(V){V=V.target;const ve=this.M;ve&&Fn(V)==3?ve.j():this.Y(V)},Bt.prototype.Y=function(V){try{if(V==this.g)e:{const ja=Fn(this.g);var ve=this.g.Ba();const fu=this.g.Z();if(!(3>ja)&&(ja!=3||this.g&&(this.h.h||this.g.oa()||nd(this.g)))){this.J||ja!=4||ve==7||(ve==8||0>=fu?Pe(3):Pe(2)),Ct(this);var we=this.g.Z();this.X=we;t:if(ue(this)){var Le=nd(this.g);V="";var _t=Le.length,Pt=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Et(this),Xe(this);var an="";break t}this.h.i=new l.TextDecoder}for(ve=0;ve<_t;ve++)this.h.h=!0,V+=this.h.i.decode(Le[ve],{stream:!(Pt&&ve==_t-1)});Le.length=0,this.h.g+=V,this.C=0,an=this.h.g}else an=this.g.oa();if(this.o=we==200,ua(this.i,this.u,this.A,this.l,this.R,ja,we),this.o){if(this.T&&!this.K){t:{if(this.g){var Ha,Wr=this.g;if((Ha=Wr.g?Wr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Ha)){var ka=Ha;break t}}ka=null}if(we=ka)Ce(this.i,this.l,we,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ca(this,we);else{this.o=!1,this.s=3,wt(12),Et(this),Xe(this);break e}}if(this.P){we=!0;let Ws;for(;!this.J&&this.C<an.length;)if(Ws=We(this,an),Ws==pt){ja==4&&(this.s=4,wt(14),we=!1),Ce(this.i,this.l,null,"[Incomplete Response]");break}else if(Ws==gt){this.s=4,wt(15),Ce(this.i,this.l,an,"[Invalid Chunk]"),we=!1;break}else Ce(this.i,this.l,Ws,null),ca(this,Ws);if(ue(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ja!=4||an.length!=0||this.h.h||(this.s=1,wt(16),we=!1),this.o=this.o&&we,!we)Ce(this.i,this.l,an,"[Invalid Chunked Response]"),Et(this),Xe(this);else if(0<an.length&&!this.W){this.W=!0;var ys=this.j;ys.g==this&&ys.ba&&!ys.M&&(ys.j.info("Great, no buffering proxy detected. Bytes received: "+an.length),Fr(ys),ys.M=!0,wt(11))}}else Ce(this.i,this.l,an,null),ca(this,an);ja==4&&Et(this),this.o&&!this.J&&(ja==4?ga(this.j,this):(this.o=!1,nt(this)))}else ad(this.g),we==400&&0<an.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Et(this),Xe(this)}}}catch{}finally{}};function ue(V){return V.g?V.u=="GET"&&V.L!=2&&V.j.Ca:!1}function We(V,ve){var we=V.C,Le=ve.indexOf(`
`,we);return Le==-1?pt:(we=Number(ve.substring(we,Le)),isNaN(we)?gt:(Le+=1,Le+we>ve.length?pt:(ve=ve.slice(Le,Le+we),V.C=Le+we,ve)))}Bt.prototype.cancel=function(){this.J=!0,Et(this)};function nt(V){V.S=Date.now()+V.I,Yt(V,V.I)}function Yt(V,ve){if(V.B!=null)throw Error("WatchDog timer not null");V.B=bn(m(V.ba,V),ve)}function Ct(V){V.B&&(l.clearTimeout(V.B),V.B=null)}Bt.prototype.ba=function(){this.B=null;const V=Date.now();0<=V-this.S?(He(this.i,this.A),this.L!=2&&(Pe(),wt(17)),Et(this),this.s=2,Xe(this)):Yt(this,this.S-V)};function Xe(V){V.j.G==0||V.J||ga(V.j,V)}function Et(V){Ct(V);var ve=V.M;ve&&typeof ve.ma=="function"&&ve.ma(),V.M=null,Dt(V.U),V.g&&(ve=V.g,V.g=null,ve.abort(),ve.ma())}function ca(V,ve){try{var we=V.j;if(we.G!=0&&(we.g==V||Qn(we.h,V))){if(!V.K&&Qn(we.h,V)&&we.G==3){try{var Le=we.Da.g.parse(ve)}catch{Le=null}if(Array.isArray(Le)&&Le.length==3){var _t=Le;if(_t[0]==0){e:if(!we.u){if(we.g)if(we.g.F+3e3<V.F)du(we),ac(we);else break e;zs(we),wt(18)}}else we.za=_t[1],0<we.za-we.T&&37500>_t[2]&&we.F&&we.v==0&&!we.C&&(we.C=bn(m(we.Za,we),6e3));if(1>=ma(we.h)&&we.ca){try{we.ca()}catch{}we.ca=void 0}}else Jo(we,11)}else if((V.K||we.g==V)&&du(we),!b(ve))for(_t=we.Da.g.parse(ve),ve=0;ve<_t.length;ve++){let ka=_t[ve];if(we.T=ka[0],ka=ka[1],we.G==2)if(ka[0]=="c"){we.K=ka[1],we.ia=ka[2];const ys=ka[3];ys!=null&&(we.la=ys,we.j.info("VER="+we.la));const ja=ka[4];ja!=null&&(we.Aa=ja,we.j.info("SVER="+we.Aa));const fu=ka[5];fu!=null&&typeof fu=="number"&&0<fu&&(Le=1.5*fu,we.L=Le,we.j.info("backChannelRequestTimeoutMs_="+Le)),Le=we;const Ws=V.g;if(Ws){const _f=Ws.g?Ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_f){var Pt=Le.h;Pt.g||_f.indexOf("spdy")==-1&&_f.indexOf("quic")==-1&&_f.indexOf("h2")==-1||(Pt.j=Pt.l,Pt.g=new Set,Pt.h&&(fr(Pt,Pt.h),Pt.h=null))}if(Le.D){const pm=Ws.g?Ws.g.getResponseHeader("X-HTTP-Session-Id"):null;pm&&(Le.ya=pm,pa(Le.I,Le.D,pm))}}we.G=3,we.l&&we.l.ua(),we.ba&&(we.R=Date.now()-V.F,we.j.info("Handshake RTT: "+we.R+"ms")),Le=we;var an=V;if(Le.qa=Ke(Le,Le.J?Le.ia:null,Le.W),an.K){oo(Le.h,an);var Ha=an,Wr=Le.L;Wr&&(Ha.I=Wr),Ha.B&&(Ct(Ha),nt(Ha)),Le.g=an}else $i(Le);0<we.i.length&&Gs(we)}else ka[0]!="stop"&&ka[0]!="close"||Jo(we,7);else we.G==3&&(ka[0]=="stop"||ka[0]=="close"?ka[0]=="stop"?Jo(we,7):nc(we):ka[0]!="noop"&&we.l&&we.l.ta(ka),we.v=0)}}Pe(4)}catch{}}var Un=class{constructor(V,ve){this.g=V,this.map=ve}};function Vr(V){this.l=V||10,l.PerformanceNavigationTiming?(V=l.performance.getEntriesByType("navigation"),V=0<V.length&&(V[0].nextHopProtocol=="hq"||V[0].nextHopProtocol=="h2")):V=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=V?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mn(V){return V.h?!0:V.g?V.g.size>=V.j:!1}function ma(V){return V.h?1:V.g?V.g.size:0}function Qn(V,ve){return V.h?V.h==ve:V.g?V.g.has(ve):!1}function fr(V,ve){V.g?V.g.add(ve):V.h=ve}function oo(V,ve){V.h&&V.h==ve?V.h=null:V.g&&V.g.has(ve)&&V.g.delete(ve)}Vr.prototype.cancel=function(){if(this.i=Qs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const V of this.g.values())V.cancel();this.g.clear()}};function Qs(V){if(V.h!=null)return V.i.concat(V.h.D);if(V.g!=null&&V.g.size!==0){let ve=V.i;for(const we of V.g.values())ve=ve.concat(we.D);return ve}return y(V.i)}function Mi(V){if(V.V&&typeof V.V=="function")return V.V();if(typeof Map<"u"&&V instanceof Map||typeof Set<"u"&&V instanceof Set)return Array.from(V.values());if(typeof V=="string")return V.split("");if(c(V)){for(var ve=[],we=V.length,Le=0;Le<we;Le++)ve.push(V[Le]);return ve}ve=[],we=0;for(Le in V)ve[we++]=V[Le];return ve}function Zu(V){if(V.na&&typeof V.na=="function")return V.na();if(!V.V||typeof V.V!="function"){if(typeof Map<"u"&&V instanceof Map)return Array.from(V.keys());if(!(typeof Set<"u"&&V instanceof Set)){if(c(V)||typeof V=="string"){var ve=[];V=V.length;for(var we=0;we<V;we++)ve.push(we);return ve}ve=[],we=0;for(const Le in V)ve[we++]=Le;return ve}}}function ss(V,ve){if(V.forEach&&typeof V.forEach=="function")V.forEach(ve,void 0);else if(c(V)||typeof V=="string")Array.prototype.forEach.call(V,ve,void 0);else for(var we=Zu(V),Le=Mi(V),_t=Le.length,Pt=0;Pt<_t;Pt++)ve.call(void 0,Le[Pt],we&&we[Pt],V)}var Gr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ir(V,ve){if(V){V=V.split("&");for(var we=0;we<V.length;we++){var Le=V[we].indexOf("="),_t=null;if(0<=Le){var Pt=V[we].substring(0,Le);_t=V[we].substring(Le+1)}else Pt=V[we];ve(Pt,_t?decodeURIComponent(_t.replace(/\+/g," ")):"")}}}function Ps(V){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,V instanceof Ps){this.h=V.h,Ar(this,V.j),this.o=V.o,this.g=V.g,Rn(this,V.s),this.l=V.l;var ve=V.i,we=new pl;we.i=ve.i,ve.g&&(we.g=new Map(ve.g),we.h=ve.h),os(this,we),this.m=V.m}else V&&(ve=String(V).match(Gr))?(this.h=!1,Ar(this,ve[1]||"",!0),this.o=on(ve[2]||""),this.g=on(ve[3]||"",!0),Rn(this,ve[4]),this.l=on(ve[5]||"",!0),os(this,ve[6]||"",!0),this.m=on(ve[7]||"")):(this.h=!1,this.i=new pl(null,this.h))}Ps.prototype.toString=function(){var V=[],ve=this.j;ve&&V.push(Bn(ve,lu,!0),":");var we=this.g;return(we||ve=="file")&&(V.push("//"),(ve=this.o)&&V.push(Bn(ve,lu,!0),"@"),V.push(encodeURIComponent(String(we)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),we=this.s,we!=null&&V.push(":",String(we))),(we=this.l)&&(this.g&&we.charAt(0)!="/"&&V.push("/"),V.push(Bn(we,we.charAt(0)=="/"?cm:Hh,!0))),(we=this.i.toString())&&V.push("?",we),(we=this.m)&&V.push("#",Bn(we,fm)),V.join("")};function Rt(V){return new Ps(V)}function Ar(V,ve,we){V.j=we?on(ve,!0):ve,V.j&&(V.j=V.j.replace(/:$/,""))}function Rn(V,ve){if(ve){if(ve=Number(ve),isNaN(ve)||0>ve)throw Error("Bad port number "+ve);V.s=ve}else V.s=null}function os(V,ve,we){ve instanceof pl?(V.i=ve,$h(V.i,V.h)):(we||(ve=Bn(ve,dm)),V.i=new pl(ve,V.h))}function pa(V,ve,we){V.i.set(ve,we)}function ft(V){return pa(V,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),V}function on(V,ve){return V?ve?decodeURI(V.replace(/%25/g,"%2525")):decodeURIComponent(V):""}function Bn(V,ve,we){return typeof V=="string"?(V=encodeURI(V).replace(ve,Ma),we&&(V=V.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V):null}function Ma(V){return V=V.charCodeAt(0),"%"+(V>>4&15).toString(16)+(V&15).toString(16)}var lu=/[#\/\?@]/g,Hh=/[#\?:]/g,cm=/[#\?]/g,dm=/[#\?@]/g,fm=/#/g;function pl(V,ve){this.h=this.g=null,this.i=V||null,this.j=!!ve}function Oi(V){V.g||(V.g=new Map,V.h=0,V.i&&Ir(V.i,function(ve,we){V.add(decodeURIComponent(ve.replace(/\+/g," ")),we)}))}e=pl.prototype,e.add=function(V,ve){Oi(this),this.i=null,V=uu(this,V);var we=this.g.get(V);return we||this.g.set(V,we=[]),we.push(ve),this.h+=1,this};function Am(V,ve){Oi(V),ve=uu(V,ve),V.g.has(ve)&&(V.i=null,V.h-=V.g.get(ve).length,V.g.delete(ve))}function mm(V,ve){return Oi(V),ve=uu(V,ve),V.g.has(ve)}e.forEach=function(V,ve){Oi(this),this.g.forEach(function(we,Le){we.forEach(function(_t){V.call(ve,_t,Le,this)},this)},this)},e.na=function(){Oi(this);const V=Array.from(this.g.values()),ve=Array.from(this.g.keys()),we=[];for(let Le=0;Le<ve.length;Le++){const _t=V[Le];for(let Pt=0;Pt<_t.length;Pt++)we.push(ve[Le])}return we},e.V=function(V){Oi(this);let ve=[];if(typeof V=="string")mm(this,V)&&(ve=ve.concat(this.g.get(uu(this,V))));else{V=Array.from(this.g.values());for(let we=0;we<V.length;we++)ve=ve.concat(V[we])}return ve},e.set=function(V,ve){return Oi(this),this.i=null,V=uu(this,V),mm(this,V)&&(this.h-=this.g.get(V).length),this.g.set(V,[ve]),this.h+=1,this},e.get=function(V,ve){return V?(V=this.V(V),0<V.length?String(V[0]):ve):ve};function gf(V,ve,we){Am(V,ve),0<we.length&&(V.i=null,V.g.set(uu(V,ve),y(we)),V.h+=we.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const V=[],ve=Array.from(this.g.keys());for(var we=0;we<ve.length;we++){var Le=ve[we];const Pt=encodeURIComponent(String(Le)),an=this.V(Le);for(Le=0;Le<an.length;Le++){var _t=Pt;an[Le]!==""&&(_t+="="+encodeURIComponent(String(an[Le]))),V.push(_t)}}return this.i=V.join("&")};function uu(V,ve){return ve=String(ve),V.j&&(ve=ve.toLowerCase()),ve}function $h(V,ve){ve&&!V.j&&(Oi(V),V.i=null,V.g.forEach(function(we,Le){var _t=Le.toLowerCase();Le!=_t&&(Am(this,Le),gf(this,_t,we))},V)),V.j=ve}function Qh(V,ve){const we=new wn;if(l.Image){const Le=new Image;Le.onload=p(Xo,we,"TestLoadImage: loaded",!0,ve,Le),Le.onerror=p(Xo,we,"TestLoadImage: error",!1,ve,Le),Le.onabort=p(Xo,we,"TestLoadImage: abort",!1,ve,Le),Le.ontimeout=p(Xo,we,"TestLoadImage: timeout",!1,ve,Le),l.setTimeout(function(){Le.ontimeout&&Le.ontimeout()},1e4),Le.src=V}else ve(!1)}function ec(V,ve){const we=new wn,Le=new AbortController,_t=setTimeout(()=>{Le.abort(),Xo(we,"TestPingServer: timeout",!1,ve)},1e4);fetch(V,{signal:Le.signal}).then(Pt=>{clearTimeout(_t),Pt.ok?Xo(we,"TestPingServer: ok",!0,ve):Xo(we,"TestPingServer: server error",!1,ve)}).catch(()=>{clearTimeout(_t),Xo(we,"TestPingServer: error",!1,ve)})}function Xo(V,ve,we,Le,_t){try{_t&&(_t.onload=null,_t.onerror=null,_t.onabort=null,_t.ontimeout=null),Le(we)}catch{}}function Gh(){this.g=new qt}function zh(V,ve,we){const Le=we||"";try{ss(V,function(_t,Pt){let an=_t;f(_t)&&(an=bt(_t)),ve.push(Le+Pt+"="+encodeURIComponent(an))})}catch(_t){throw ve.push(Le+"type="+encodeURIComponent("_badmap")),_t}}function td(V){this.l=V.Ub||null,this.j=V.eb||!1}h(td,Vt),td.prototype.g=function(){return new tc(this.l,this.j)},td.prototype.i=(function(V){return function(){return V}})({});function tc(V,ve){xe.call(this),this.D=V,this.o=ve,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}h(tc,xe),e=tc.prototype,e.open=function(V,ve){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=V,this.A=ve,this.readyState=1,Ea(this)},e.send=function(V){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ve={headers:this.u,method:this.B,credentials:this.m,cache:void 0};V&&(ve.body=V),(this.D||l).fetch(new Request(this.A,ve)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Na(this)),this.readyState=0},e.Sa=function(V){if(this.g&&(this.l=V,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=V.headers,this.readyState=2,Ea(this)),this.g&&(this.readyState=3,Ea(this),this.g)))if(this.responseType==="arraybuffer")V.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in V){if(this.j=V.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vm(this)}else V.text().then(this.Ra.bind(this),this.ga.bind(this))};function vm(V){V.j.read().then(V.Pa.bind(V)).catch(V.ga.bind(V))}e.Pa=function(V){if(this.g){if(this.o&&V.value)this.response.push(V.value);else if(!this.o){var ve=V.value?V.value:new Uint8Array(0);(ve=this.v.decode(ve,{stream:!V.done}))&&(this.response=this.responseText+=ve)}V.done?Na(this):Ea(this),this.readyState==3&&vm(this)}},e.Ra=function(V){this.g&&(this.response=this.responseText=V,Na(this))},e.Qa=function(V){this.g&&(this.response=V,Na(this))},e.ga=function(){this.g&&Na(this)};function Na(V){V.readyState=4,V.l=null,V.j=null,V.v=null,Ea(V)}e.setRequestHeader=function(V,ve){this.u.append(V,ve)},e.getResponseHeader=function(V){return this.h&&this.h.get(V.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const V=[],ve=this.h.entries();for(var we=ve.next();!we.done;)we=we.value,V.push(we[0]+": "+we[1]),we=ve.next();return V.join(`\r
`)};function Ea(V){V.onreadystatechange&&V.onreadystatechange.call(V)}Object.defineProperty(tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(V){this.m=V?"include":"same-origin"}});function Ne(V){let ve="";return T(V,function(we,Le){ve+=Le,ve+=":",ve+=we,ve+=`\r
`}),ve}function me(V,ve,we){e:{for(Le in we){var Le=!1;break e}Le=!0}Le||(we=Ne(we),typeof V=="string"?we!=null&&encodeURIComponent(String(we)):pa(V,ve,we))}function Ht(V){xe.call(this),this.headers=new Map,this.o=V||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}h(Ht,xe);var un=/^https?$/i,Ut=["POST","PUT"];e=Ht.prototype,e.Ha=function(V){this.J=V},e.ea=function(V,ve,we,Le){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+V);ve=ve?ve.toUpperCase():"GET",this.D=V,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$e.g(),this.v=this.o?zt(this.o):zt($e),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(ve,String(V),!0),this.B=!1}catch(Pt){hn(this,Pt);return}if(V=we||"",we=new Map(this.headers),Le)if(Object.getPrototypeOf(Le)===Object.prototype)for(var _t in Le)we.set(_t,Le[_t]);else if(typeof Le.keys=="function"&&typeof Le.get=="function")for(const Pt of Le.keys())we.set(Pt,Le.get(Pt));else throw Error("Unknown input type for opt_headers: "+String(Le));Le=Array.from(we.keys()).find(Pt=>Pt.toLowerCase()=="content-type"),_t=l.FormData&&V instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ut,ve,void 0))||Le||_t||we.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pt,an]of we)this.g.setRequestHeader(Pt,an);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rr(this),this.u=!0,this.g.send(V),this.u=!1}catch(Pt){hn(this,Pt)}};function hn(V,ve){V.h=!1,V.g&&(V.j=!0,V.g.abort(),V.j=!1),V.l=ve,V.m=5,rn(V),sn(V)}function rn(V){V.A||(V.A=!0,Be(V,"complete"),Be(V,"error"))}e.abort=function(V){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=V||7,Be(this,"complete"),Be(this,"abort"),sn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sn(this,!0)),Ht.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qn(this):this.bb())},e.bb=function(){qn(this)};function qn(V){if(V.h&&typeof o<"u"&&(!V.v[1]||Fn(V)!=4||V.Z()!=2)){if(V.u&&Fn(V)==4)kt(V.Ea,0,V);else if(Be(V,"readystatechange"),Fn(V)==4){V.h=!1;try{const an=V.Z();e:switch(an){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ve=!0;break e;default:ve=!1}var we;if(!(we=ve)){var Le;if(Le=an===0){var _t=String(V.D).match(Gr)[1]||null;!_t&&l.self&&l.self.location&&(_t=l.self.location.protocol.slice(0,-1)),Le=!un.test(_t?_t.toLowerCase():"")}we=Le}if(we)Be(V,"complete"),Be(V,"success");else{V.m=6;try{var Pt=2<Fn(V)?V.g.statusText:""}catch{Pt=""}V.l=Pt+" ["+V.Z()+"]",rn(V)}}finally{sn(V)}}}}function sn(V,ve){if(V.g){rr(V);const we=V.g,Le=V.v[0]?()=>{}:null;V.g=null,V.v=null,ve||Be(V,"ready");try{we.onreadystatechange=Le}catch{}}}function rr(V){V.I&&(l.clearTimeout(V.I),V.I=null)}e.isActive=function(){return!!this.g};function Fn(V){return V.g?V.g.readyState:0}e.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(V){if(this.g){var ve=this.g.responseText;return V&&ve.indexOf(V)==0&&(ve=ve.substring(V.length)),Ze(ve)}};function nd(V){try{if(!V.g)return null;if("response"in V.g)return V.g.response;switch(V.H){case"":case"text":return V.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in V.g)return V.g.mozResponseArrayBuffer}return null}catch{return null}}function ad(V){const ve={};V=(V.g&&2<=Fn(V)&&V.g.getAllResponseHeaders()||"").split(`\r
`);for(let Le=0;Le<V.length;Le++){if(b(V[Le]))continue;var we=U(V[Le]);const _t=we[0];if(we=we[1],typeof we!="string")continue;we=we.trim();const Pt=ve[_t]||[];ve[_t]=Pt,Pt.push(we)}E(ve,function(Le){return Le.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function is(V,ve,we){return we&&we.internalChannelParams&&we.internalChannelParams[V]||ve}function _r(V){this.Aa=0,this.i=[],this.j=new wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=is("failFast",!1,V),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=is("baseRetryDelayMs",5e3,V),this.cb=is("retryDelaySeedMs",1e4,V),this.Wa=is("forwardChannelMaxRetries",2,V),this.wa=is("forwardChannelRequestTimeoutMs",2e4,V),this.pa=V&&V.xmlHttpFactory||void 0,this.Xa=V&&V.Tb||void 0,this.Ca=V&&V.useFetchStreams||!1,this.L=void 0,this.J=V&&V.supportsCrossDomainXhr||!1,this.K="",this.h=new Vr(V&&V.concurrentRequestLimit),this.Da=new Gh,this.P=V&&V.fastHandshake||!1,this.O=V&&V.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=V&&V.Rb||!1,V&&V.xa&&this.j.xa(),V&&V.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&V&&V.detectBufferingProxy||!1,this.ja=void 0,V&&V.longPollingTimeout&&0<V.longPollingTimeout&&(this.ja=V.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=_r.prototype,e.la=8,e.G=1,e.connect=function(V,ve,we,Le){wt(0),this.W=V,this.H=ve||{},we&&Le!==void 0&&(this.H.OSID=we,this.H.OAID=Le),this.F=this.X,this.I=Ke(this,null,this.W),Gs(this)};function nc(V){if(Hi(V),V.G==3){var ve=V.U++,we=Rt(V.I);if(pa(we,"SID",V.K),pa(we,"RID",ve),pa(we,"TYPE","terminate"),cu(V,we),ve=new Bt(V,V.j,ve),ve.L=2,ve.v=ft(Rt(we)),we=!1,l.navigator&&l.navigator.sendBeacon)try{we=l.navigator.sendBeacon(ve.v.toString(),"")}catch{}!we&&l.Image&&(new Image().src=ve.v,we=!0),we||(ve.g=wa(ve.j,null),ve.g.ea(ve.v)),ve.F=Date.now(),nt(ve)}hm(V)}function ac(V){V.g&&(Fr(V),V.g.cancel(),V.g=null)}function Hi(V){ac(V),V.u&&(l.clearTimeout(V.u),V.u=null),du(V),V.h.cancel(),V.s&&(typeof V.s=="number"&&l.clearTimeout(V.s),V.s=null)}function Gs(V){if(!Mn(V.h)&&!V.s){V.s=!0;var ve=V.Ga;q||Z(),ce||(q(),ce=!0),le.add(ve,V),V.B=0}}function gs(V,ve){return ma(V.h)>=V.h.j-(V.s?1:0)?!1:V.s?(V.i=ve.D.concat(V.i),!0):V.G==1||V.G==2||V.B>=(V.Va?0:V.Wa)?!1:(V.s=bn(m(V.Ga,V,ve),Ds(V,V.B)),V.B++,!0)}e.Ga=function(V){if(this.s)if(this.s=null,this.G==1){if(!V){this.U=Math.floor(1e5*Math.random()),V=this.U++;const _t=new Bt(this,this.j,V);let Pt=this.o;if(this.S&&(Pt?(Pt=x(Pt),D(Pt,this.S)):Pt=this.S),this.m!==null||this.O||(_t.H=Pt,Pt=null),this.P)e:{for(var ve=0,we=0;we<this.i.length;we++){t:{var Le=this.i[we];if("__data__"in Le.map&&(Le=Le.map.__data__,typeof Le=="string")){Le=Le.length;break t}Le=void 0}if(Le===void 0)break;if(ve+=Le,4096<ve){ve=we;break e}if(ve===4096||we===this.i.length-1){ve=we+1;break e}}ve=1e3}else ve=1e3;ve=zr(this,_t,ve),we=Rt(this.I),pa(we,"RID",V),pa(we,"CVER",22),this.D&&pa(we,"X-HTTP-Session-Id",this.D),cu(this,we),Pt&&(this.O?ve="headers="+encodeURIComponent(String(Ne(Pt)))+"&"+ve:this.m&&me(we,this.m,Pt)),fr(this.h,_t),this.Ua&&pa(we,"TYPE","init"),this.P?(pa(we,"$req",ve),pa(we,"SID","null"),_t.T=!0,tt(_t,we,null)):tt(_t,we,ve),this.G=2}}else this.G==3&&(V?aa(this,V):this.i.length==0||Mn(this.h)||aa(this))};function aa(V,ve){var we;ve?we=ve.l:we=V.U++;const Le=Rt(V.I);pa(Le,"SID",V.K),pa(Le,"RID",we),pa(Le,"AID",V.T),cu(V,Le),V.m&&V.o&&me(Le,V.m,V.o),we=new Bt(V,V.j,we,V.B+1),V.m===null&&(we.H=V.o),ve&&(V.i=ve.D.concat(V.i)),ve=zr(V,we,1e3),we.I=Math.round(.5*V.wa)+Math.round(.5*V.wa*Math.random()),fr(V.h,we),tt(we,Le,ve)}function cu(V,ve){V.H&&T(V.H,function(we,Le){pa(ve,Le,we)}),V.l&&ss({},function(we,Le){pa(ve,Le,we)})}function zr(V,ve,we){we=Math.min(V.i.length,we);var Le=V.l?m(V.l.Na,V.l,V):null;e:{var _t=V.i;let Pt=-1;for(;;){const an=["count="+we];Pt==-1?0<we?(Pt=_t[0].g,an.push("ofs="+Pt)):Pt=0:an.push("ofs="+Pt);let Ha=!0;for(let Wr=0;Wr<we;Wr++){let ka=_t[Wr].g;const ys=_t[Wr].map;if(ka-=Pt,0>ka)Pt=Math.max(0,_t[Wr].g-100),Ha=!1;else try{zh(ys,an,"req"+ka+"_")}catch{Le&&Le(ys)}}if(Ha){Le=an.join("&");break e}}}return V=V.i.splice(0,we),ve.D=V,Le}function $i(V){if(!V.g&&!V.u){V.Y=1;var ve=V.Fa;q||Z(),ce||(q(),ce=!0),le.add(ve,V),V.v=0}}function zs(V){return V.g||V.u||3<=V.v?!1:(V.Y++,V.u=bn(m(V.Fa,V),Ds(V,V.v)),V.v++,!0)}e.Fa=function(){if(this.u=null,rc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var V=2*this.R;this.j.info("BP detection timer enabled: "+V),this.A=bn(m(this.ab,this),V)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),ac(this),rc(this))};function Fr(V){V.A!=null&&(l.clearTimeout(V.A),V.A=null)}function rc(V){V.g=new Bt(V,V.j,"rpc",V.Y),V.m===null&&(V.g.H=V.o),V.g.O=0;var ve=Rt(V.qa);pa(ve,"RID","rpc"),pa(ve,"SID",V.K),pa(ve,"AID",V.T),pa(ve,"CI",V.F?"0":"1"),!V.F&&V.ja&&pa(ve,"TO",V.ja),pa(ve,"TYPE","xmlhttp"),cu(V,ve),V.m&&V.o&&me(ve,V.m,V.o),V.L&&(V.g.I=V.L);var we=V.g;V=V.ia,we.L=1,we.v=ft(Rt(ve)),we.m=null,we.P=!0,re(we,V)}e.Za=function(){this.C!=null&&(this.C=null,ac(this),zs(this),wt(19))};function du(V){V.C!=null&&(l.clearTimeout(V.C),V.C=null)}function ga(V,ve){var we=null;if(V.g==ve){du(V),Fr(V),V.g=null;var Le=2}else if(Qn(V.h,ve))we=ve.D,oo(V.h,ve),Le=1;else return;if(V.G!=0){if(ve.o)if(Le==1){we=ve.m?ve.m.length:0,ve=Date.now()-ve.F;var _t=V.B;Le=na(),Be(Le,new Xt(Le,we)),Gs(V)}else $i(V);else if(_t=ve.s,_t==3||_t==0&&0<ve.X||!(Le==1&&gs(V,ve)||Le==2&&zs(V)))switch(we&&0<we.length&&(ve=V.h,ve.i=ve.i.concat(we)),_t){case 1:Jo(V,5);break;case 4:Jo(V,10);break;case 3:Jo(V,6);break;default:Jo(V,2)}}}function Ds(V,ve){let we=V.Ta+Math.floor(Math.random()*V.cb);return V.isActive()||(we*=2),we*ve}function Jo(V,ve){if(V.j.info("Error code "+ve),ve==2){var we=m(V.fb,V),Le=V.Xa;const _t=!Le;Le=new Ps(Le||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ar(Le,"https"),ft(Le),_t?Qh(Le.toString(),we):ec(Le.toString(),we)}else wt(2);V.G=0,V.l&&V.l.sa(ve),hm(V),Hi(V)}e.fb=function(V){V?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function hm(V){if(V.G=0,V.ka=[],V.l){const ve=Qs(V.h);(ve.length!=0||V.i.length!=0)&&(g(V.ka,ve),g(V.ka,V.i),V.h.i.length=0,y(V.i),V.i.length=0),V.l.ra()}}function Ke(V,ve,we){var Le=we instanceof Ps?Rt(we):new Ps(we);if(Le.g!="")ve&&(Le.g=ve+"."+Le.g),Rn(Le,Le.s);else{var _t=l.location;Le=_t.protocol,ve=ve?ve+"."+_t.hostname:_t.hostname,_t=+_t.port;var Pt=new Ps(null);Le&&Ar(Pt,Le),ve&&(Pt.g=ve),_t&&Rn(Pt,_t),we&&(Pt.l=we),Le=Pt}return we=V.D,ve=V.ya,we&&ve&&pa(Le,we,ve),pa(Le,"VER",V.la),cu(V,Le),Le}function wa(V,ve,we){if(ve&&!V.J)throw Error("Can't create secondary domain capable XhrIo object.");return ve=V.Ca&&!V.pa?new Ht(new td({eb:we})):new Ht(V.pa),ve.Ha(V.J),ve}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function hi(){}e=hi.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Zo(V,ve){xe.call(this),this.g=new _r(ve),this.l=V,this.h=ve&&ve.messageUrlParams||null,V=ve&&ve.messageHeaders||null,ve&&ve.clientProtocolHeaderRequired&&(V?V["X-Client-Protocol"]="webchannel":V={"X-Client-Protocol":"webchannel"}),this.g.o=V,V=ve&&ve.initMessageHeaders||null,ve&&ve.messageContentType&&(V?V["X-WebChannel-Content-Type"]=ve.messageContentType:V={"X-WebChannel-Content-Type":ve.messageContentType}),ve&&ve.va&&(V?V["X-WebChannel-Client-Profile"]=ve.va:V={"X-WebChannel-Client-Profile":ve.va}),this.g.S=V,(V=ve&&ve.Sb)&&!b(V)&&(this.g.m=V),this.v=ve&&ve.supportsCrossDomainXhr||!1,this.u=ve&&ve.sendRawJson||!1,(ve=ve&&ve.httpSessionIdParam)&&!b(ve)&&(this.g.D=ve,V=this.h,V!==null&&ve in V&&(V=this.h,ve in V&&delete V[ve])),this.j=new pi(this)}h(Zo,xe),Zo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zo.prototype.close=function(){nc(this.g)},Zo.prototype.o=function(V){var ve=this.g;if(typeof V=="string"){var we={};we.__data__=V,V=we}else this.u&&(we={},we.__data__=bt(V),V=we);ve.i.push(new Un(ve.Ya++,V)),ve.G==3&&Gs(ve)},Zo.prototype.N=function(){this.g.l=null,delete this.j,nc(this.g),delete this.g,Zo.aa.N.call(this)};function Wh(V){vt.call(this),V.__headers__&&(this.headers=V.__headers__,this.statusCode=V.__status__,delete V.__headers__,delete V.__status__);var ve=V.__sm__;if(ve){e:{for(const we in ve){V=we;break e}V=void 0}(this.i=V)&&(V=this.i,ve=ve!==null&&V in ve?ve[V]:void 0),this.data=ve}else this.data=V}h(Wh,vt);function yf(){et.call(this),this.status=1}h(yf,et);function pi(V){this.g=V}h(pi,hi),pi.prototype.ua=function(){Be(this.g,"a")},pi.prototype.ta=function(V){Be(this.g,new Wh(V))},pi.prototype.sa=function(V){Be(this.g,new yf)},pi.prototype.ra=function(){Be(this.g,"b")},Zo.prototype.send=Zo.prototype.o,Zo.prototype.open=Zo.prototype.m,Zo.prototype.close=Zo.prototype.close,Te.NO_ERROR=0,Te.TIMEOUT=8,Te.HTTP_ERROR=6,Ve.COMPLETE="complete",ln.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",xe.prototype.listen=xe.prototype.K,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha}).apply(typeof Ky<"u"?Ky:typeof self<"u"?self:typeof window<"u"?window:{});const LV="@firebase/firestore",MV="4.8.0";class Ci{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ci.UNAUTHENTICATED=new Ci(null),Ci.GOOGLE_CREDENTIALS=new Ci("google-credentials-uid"),Ci.FIRST_PARTY=new Ci("first-party-uid"),Ci.MOCK_USER=new Ci("mock-user");let Eb="11.10.0";const j2=new Bg("@firebase/firestore");function Ll(e,...t){if(j2.logLevel<=Za.DEBUG){const n=t.map(tW);j2.debug(`Firestore (${Eb}): ${e}`,...n)}}function eW(e,...t){if(j2.logLevel<=Za.ERROR){const n=t.map(tW);j2.error(`Firestore (${Eb}): ${e}`,...n)}}function tW(e){if(typeof e=="string")return e;try{return(function(n){return JSON.stringify(n)})(e)}catch{return e}}function q2(e,t,n){let a="Unexpected state";typeof t=="string"?a=t:n=t,nW(e,a,n)}function nW(e,t,n){let a=`FIRESTORE (${Eb}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw eW(a),new Error(a)}function b0(e,t,n,a){let r="Unexpected state";typeof n=="string"?r=n:a=n,e||nW(t,r,a)}const Qa={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Ga extends zu{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class x0{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class Vrt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Lrt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Ci.UNAUTHENTICATED)))}shutdown(){}}class Mrt{constructor(t){this.t=t,this.currentUser=Ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){b0(this.o===void 0,42304);let a=this.i;const r=c=>this.i!==a?(a=this.i,n(c)):Promise.resolve();let s=new x0;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new x0,t.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const c=s;t.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},l=c=>{Ll("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ll("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new x0)}}),0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==t?(Ll("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(b0(typeof a.accessToken=="string",31837,{l:a}),new Vrt(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return b0(t===null||typeof t=="string",2055,{h:t}),new Ci(t)}}class Ort{constructor(t,n,a){this.P=t,this.T=n,this.I=a,this.type="FirstParty",this.user=Ci.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Hrt{constructor(t,n,a){this.P=t,this.T=n,this.I=a}getToken(){return Promise.resolve(new Ort(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Ci.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class OV{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $rt{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nl(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){b0(this.o===void 0,3512);const a=s=>{s.error!=null&&Ll("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Ll("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable((()=>a(s)))};const r=s=>{Ll("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>r(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):Ll("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new OV(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(b0(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new OV(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Qrt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let a=0;a<e;a++)n[a]=Math.floor(256*Math.random());return n}function Grt(){return new TextEncoder}class zrt{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const r=Qrt(40);for(let s=0;s<r.length;++s)a.length<20&&r[s]<n&&(a+=t.charAt(r[s]%62))}return a}}function Gl(e,t){return e<t?-1:e>t?1:0}function Wrt(e,t){let n=0;for(;n<e.length&&n<t.length;){const a=e.codePointAt(n),r=t.codePointAt(n);if(a!==r){if(a<128&&r<128)return Gl(a,r);{const s=Grt(),o=Krt(s.encode(HV(e,n)),s.encode(HV(t,n)));return o!==0?o:Gl(a,r)}}n+=a>65535?2:1}return Gl(e.length,t.length)}function HV(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Krt(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Gl(e[n],t[n]);return Gl(e.length,t.length)}const $V="__name__";class xu{constructor(t,n,a){n===void 0?n=0:n>t.length&&q2(637,{offset:n,range:t.length}),a===void 0?a=t.length-n:a>t.length-n&&q2(1746,{length:a,range:t.length-n}),this.segments=t,this.offset=n,this.len=a}get length(){return this.len}isEqual(t){return xu.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof xu?t.forEach((a=>{n.push(a)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,a=this.limit();n<a;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const a=Math.min(t.length,n.length);for(let r=0;r<a;r++){const s=xu.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return Gl(t.length,n.length)}static compareSegments(t,n){const a=xu.isNumericId(t),r=xu.isNumericId(n);return a&&!r?-1:!a&&r?1:a&&r?xu.extractNumericId(t).compare(xu.extractNumericId(n)):Wrt(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return fI.fromString(t.substring(4,t.length-2))}}class Bl extends xu{construct(t,n,a){return new Bl(t,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const a of t){if(a.indexOf("//")>=0)throw new Ga(Qa.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((r=>r.length>0)))}return new Bl(n)}static emptyPath(){return new Bl([])}}const jrt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zf extends xu{construct(t,n,a){return new zf(t,n,a)}static isValidIdentifier(t){return jrt.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zf.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$V}static keyField(){return new zf([$V])}static fromServerFormat(t){const n=[];let a="",r=0;const s=()=>{if(a.length===0)throw new Ga(Qa.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let o=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new Ga(Qa.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ga(Qa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(a+=l,r++):(s(),r++)}if(s(),o)throw new Ga(Qa.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new zf(n)}static emptyPath(){return new zf([])}}class tA{constructor(t){this.path=t}static fromPath(t){return new tA(Bl.fromString(t))}static fromName(t){return new tA(Bl.fromString(t).popFirst(5))}static empty(){return new tA(Bl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Bl.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Bl.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new tA(new Bl(t.slice()))}}function qrt(e,t,n,a){if(t===!0&&a===!0)throw new Ga(Qa.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Yrt(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function vs(e,t){const n={typeString:e};return t&&(n.value=t),n}function i1(e,t){if(!Yrt(e))throw new Ga(Qa.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in t)if(t[a]){const r=t[a].typeString,s="value"in t[a]?{value:t[a].value}:void 0;if(!(a in e)){n=`JSON missing required field: '${a}'`;break}const o=e[a];if(r&&typeof o!==r){n=`JSON field '${a}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${a}' field to equal '${s.value}'`;break}}if(n)throw new Ga(Qa.INVALID_ARGUMENT,n);return!0}const QV=-62135596800,GV=1e6;class Su{static now(){return Su.fromMillis(Date.now())}static fromDate(t){return Su.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),a=Math.floor((t-1e3*n)*GV);return new Su(n,a)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ga(Qa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ga(Qa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<QV)throw new Ga(Qa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ga(Qa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GV}_compareTo(t){return this.seconds===t.seconds?Gl(this.nanoseconds,t.nanoseconds):Gl(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Su._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(i1(t,Su._jsonSchema))return new Su(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-QV;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Su._jsonSchemaVersion="firestore/timestamp/1.0",Su._jsonSchema={type:vs("string",Su._jsonSchemaVersion),seconds:vs("number"),nanoseconds:vs("number")};function Xrt(e){return e.name==="IndexedDbTransactionError"}class Jrt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class LA{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Jrt("Invalid base64 string: "+s):s}})(t);return new LA(n)}static fromUint8Array(t){const n=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(t);return new LA(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let r=0;r<n.length;r++)a[r]=n.charCodeAt(r);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Gl(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}LA.EMPTY_BYTE_STRING=new LA("");const zV="(default)";class Y2{constructor(t,n){this.projectId=t,this.database=n||zV}static empty(){return new Y2("","")}get isDefaultDatabase(){return this.database===zV}isEqual(t){return t instanceof Y2&&t.projectId===this.projectId&&t.database===this.database}}class Zrt{constructor(t,n=null,a=[],r=[],s=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=r,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function est(e){return new Zrt(e)}var WV,Ba;(Ba=WV||(WV={}))[Ba.OK=0]="OK",Ba[Ba.CANCELLED=1]="CANCELLED",Ba[Ba.UNKNOWN=2]="UNKNOWN",Ba[Ba.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ba[Ba.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ba[Ba.NOT_FOUND=5]="NOT_FOUND",Ba[Ba.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ba[Ba.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ba[Ba.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ba[Ba.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ba[Ba.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ba[Ba.ABORTED=10]="ABORTED",Ba[Ba.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ba[Ba.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ba[Ba.INTERNAL=13]="INTERNAL",Ba[Ba.UNAVAILABLE=14]="UNAVAILABLE",Ba[Ba.DATA_LOSS=15]="DATA_LOSS";new fI([4294967295,4294967295],0);const tst=41943040;const nst=1048576;function iS(){return typeof document<"u"?document:null}class ast{constructor(t,n,a=1e3,r=1.5,s=6e4){this.Fi=t,this.timerId=n,this.d_=a,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),a=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-a);r>0&&Ll("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}class AI{constructor(t,n,a,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=a,this.op=r,this.removalCallback=s,this.deferred=new x0,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,a,r,s){const o=Date.now()+a,l=new AI(t,n,o,r,s);return l.start(a),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ga(Qa.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var KV,jV;(jV=KV||(KV={})).Fa="default",jV.Cache="cache";function rst(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}const qV=new Map;const sst="firestore.googleapis.com",YV=!0;class XV{constructor(t){var n,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Ga(Qa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sst,this.ssl=YV}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:YV;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=tst;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<nst)throw new Ga(Qa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qrt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rst((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ga(Qa.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ga(Qa.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ga(Qa.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(a,r){return a.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ost{constructor(t,n,a,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=a,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XV({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ga(Qa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ga(Qa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XV(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Lrt;switch(a.type){case"firstParty":return new Hrt(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ga(Qa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=qV.get(n);a&&(Ll("ComponentProvider","Removing Datastore"),qV.delete(n),a.terminate())})(this),Promise.resolve()}}class mI{constructor(t,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new mI(this.firestore,t,this._query)}}class Tu{constructor(t,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vI(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Tu(this.firestore,t,this._key)}toJSON(){return{type:Tu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,a){if(i1(n,Tu._jsonSchema))return new Tu(t,a||null,new tA(Bl.fromString(n.referencePath)))}}Tu._jsonSchemaVersion="firestore/documentReference/1.0",Tu._jsonSchema={type:vs("string",Tu._jsonSchemaVersion),referencePath:vs("string")};class vI extends mI{constructor(t,n,a){super(t,n,est(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Tu(this.firestore,null,new tA(t))}withConverter(t){return new vI(this.firestore,t,this._path)}}const JV="AsyncQueue";class ZV{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ast(this,"async_queue_retry"),this.oc=()=>{const a=iS();a&&Ll(JV,"Visibility state changed to "+a.visibilityState),this.F_.y_()},this._c=t;const n=iS();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=iS();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new x0;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Xrt(t))throw t;Ll(JV,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const n=this._c.then((()=>(this.nc=!0,t().catch((a=>{throw this.tc=a,this.nc=!1,eW("INTERNAL UNHANDLED ERROR: ",eL(a)),a})).then((a=>(this.nc=!1,a))))));return this._c=n,n}enqueueAfterDelay(t,n,a){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const r=AI.createAndSchedule(this,t,n,a,(s=>this.lc(s)));return this.ec.push(r),r}ac(){this.tc&&q2(47125,{hc:eL(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function eL(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class ist extends ost{constructor(t,n,a,r){super(t,n,a,r),this.type="firestore",this._queue=new ZV,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ZV(t),this._firestoreClient=void 0,await t}}}class Cc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Cc(LA.fromBase64String(t))}catch(n){throw new Ga(Qa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Cc(LA.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Cc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(i1(t,Cc._jsonSchema))return Cc.fromBase64String(t.bytes)}}Cc._jsonSchemaVersion="firestore/bytes/1.0",Cc._jsonSchema={type:vs("string",Cc._jsonSchemaVersion),bytes:vs("string")};class aW{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ga(Qa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zf(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class AA{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ga(Qa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ga(Qa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Gl(this._lat,t._lat)||Gl(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:AA._jsonSchemaVersion}}static fromJSON(t){if(i1(t,AA._jsonSchema))return new AA(t.latitude,t.longitude)}}AA._jsonSchemaVersion="firestore/geoPoint/1.0",AA._jsonSchema={type:vs("string",AA._jsonSchemaVersion),latitude:vs("number"),longitude:vs("number")};class mA{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(a,r){if(a.length!==r.length)return!1;for(let s=0;s<a.length;++s)if(a[s]!==r[s])return!1;return!0})(this._values,t._values)}toJSON(){return{type:mA._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(i1(t,mA._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new mA(t.vectorValues);throw new Ga(Qa.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mA._jsonSchemaVersion="firestore/vectorValue/1.0",mA._jsonSchema={type:vs("string",mA._jsonSchemaVersion),vectorValues:vs("object")};const lst=new RegExp("[~\\*/\\[\\]]");function ust(e,t,n){if(t.search(lst)>=0)throw tL(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e);try{return new aW(...t.split("."))._internalPath}catch{throw tL(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e)}}function tL(e,t,n,a,r){let s=`Function ${t}() called with invalid data`;s+=". ";let o="";return new Ga(Qa.INVALID_ARGUMENT,s+e+o)}class rW{constructor(t,n,a,r,s){this._firestore=t,this._userDataWriter=n,this._key=a,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new cst(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(sW("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cst extends rW{data(){return super.data()}}function sW(e,t){return typeof t=="string"?ust(e,t):t instanceof aW?t._internalPath:t._delegate._internalPath}class jy{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Pv extends rW{constructor(t,n,a,r,s,o){super(t,n,a,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new y_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const a=this._document.data.field(sW("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ga(Qa.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Pv._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Pv._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pv._jsonSchema={type:vs("string",Pv._jsonSchemaVersion),bundleSource:vs("string","DocumentSnapshot"),bundleName:vs("string"),bundle:vs("string")};class y_ extends Pv{data(t={}){return super.data(t)}}class C0{constructor(t,n,a,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new jy(r.hasPendingWrites,r.fromCache),this.query=a}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((a=>{t.call(n,new y_(this._firestore,this._userDataWriter,a.key,a,new jy(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ga(Qa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((l=>{const c=new y_(r._firestore,r._userDataWriter,l.doc.key,l.doc,new jy(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((l=>s||l.type!==3)).map((l=>{const c=new y_(r._firestore,r._userDataWriter,l.doc.key,l.doc,new jy(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,d=-1;return l.type!==0&&(f=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:dst(l.type),doc:c,oldIndex:f,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ga(Qa.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=C0._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=zrt.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],r=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),a.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function dst(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q2(61501,{type:e})}}C0._jsonSchemaVersion="firestore/querySnapshot/1.0",C0._jsonSchema={type:vs("string",C0._jsonSchemaVersion),bundleSource:vs("string","QuerySnapshot"),bundleName:vs("string"),bundle:vs("string")};(function(t,n=!0){(function(r){Eb=r})(Af),Vu(new ql("firestore",((a,{instanceIdentifier:r,options:s})=>{const o=a.getProvider("app").getImmediate(),l=new ist(new Mrt(a.getProvider("auth-internal")),new $rt(o,a.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ga(Qa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Y2(f.options.projectId,d)})(o,r),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l}),"PUBLIC").setMultipleInstances(!0)),Pi(LV,MV,t),Pi(LV,MV,"esm2017")})();const oW="firebasestorage.googleapis.com",fst="storageBucket",Ast=120*1e3,mst=600*1e3;class Ju extends zu{constructor(t,n,a=0){super(lS(t),`Firebase Storage: ${n} (${lS(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ju.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return lS(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $u;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($u||($u={}));function lS(e){return"storage/"+e}function vst(){const e="An unknown error occurred, please check the error payload for server response.";return new Ju($u.UNKNOWN,e)}function hst(){return new Ju($u.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pst(){return new Ju($u.CANCELED,"User canceled the upload/download.")}function gst(e){return new Ju($u.INVALID_URL,"Invalid URL '"+e+"'.")}function yst(e){return new Ju($u.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function nL(e){return new Ju($u.INVALID_ARGUMENT,e)}function iW(){return new Ju($u.APP_DELETED,"The Firebase app was deleted.")}function _st(e){return new Ju($u.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Ml{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let a;try{a=Ml.makeFromUrl(t,n)}catch{return new Ml(t,"")}if(a.path==="")return a;throw yst(t)}static makeFromUrl(t,n){let a=null;const r="([A-Za-z0-9.\\-_]+)";function s(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function f(B){B.path_=decodeURIComponent(B.path)}const d="v[A-Za-z0-9_]+",A=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${A}/${d}/b/${r}/o${m}`,"i"),h={bucket:1,path:3},y=n===oW?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",_=new RegExp(`^https?://${y}/${r}/${g}`,"i"),S=[{regex:l,indices:c,postModify:s},{regex:p,indices:h,postModify:f},{regex:_,indices:{bucket:1,path:2},postModify:f}];for(let B=0;B<S.length;B++){const F=S[B],T=F.regex.exec(t);if(T){const E=T[F.indices.bucket];let x=T[F.indices.path];x||(x=""),a=new Ml(E,x),F.postModify(a);break}}if(a==null)throw gst(t);return a}}class wst{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function bst(e,t,n){let a=1,r=null,s=null,o=!1,l=0;function c(){return l===2}let f=!1;function d(...g){f||(f=!0,t.apply(null,g))}function A(g){r=setTimeout(()=>{r=null,e(p,c())},g)}function m(){s&&clearTimeout(s)}function p(g,..._){if(f){m();return}if(g){m(),d.call(null,g,..._);return}if(c()||o){m(),d.call(null,g,..._);return}a<64&&(a*=2);let S;l===1?(l=2,S=0):S=(a+Math.random())*1e3,A(S)}let h=!1;function y(g){h||(h=!0,m(),!f&&(r!==null?(g||(l=2),clearTimeout(r),A(0)):g||(l=1)))}return A(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function xst(e){e(!1)}function Cst(e){return e!==void 0}function aL(e,t,n,a){if(a<t)throw nL(`Invalid value for '${e}'. Expected ${t} or greater.`);if(a>n)throw nL(`Invalid value for '${e}'. Expected ${n} or less.`)}function Sst(e){const t=encodeURIComponent;let n="?";for(const a in e)if(e.hasOwnProperty(a)){const r=t(a)+"="+t(e[a]);n=n+r+"&"}return n=n.slice(0,-1),n}var X2;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(X2||(X2={}));function Est(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}class kst{constructor(t,n,a,r,s,o,l,c,f,d,A,m=!0,p=!1){this.url_=t,this.method_=n,this.headers_=a,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=d,this.connectionFactory_=A,this.retry=m,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,y)=>{this.resolve_=h,this.reject_=y,this.start_()})}start_(){const t=(a,r)=>{if(r){a(!1,new qy(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===X2.NO_ERROR,c=s.getStatus();if(!l||Est(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===X2.ABORT;a(!1,new qy(!1,null,d));return}const f=this.successCodes_.indexOf(c)!==-1;a(!0,new qy(f,s))})},n=(a,r)=>{const s=this.resolve_,o=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Cst(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=vst();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(r.canceled){const c=this.appDelete_?iW():pst();o(c)}else{const c=hst();o(c)}};this.canceled_?n(!1,new qy(!1,null,!0)):this.backoffId_=bst(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&xst(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qy{constructor(t,n,a){this.wasSuccessCode=t,this.connection=n,this.canceled=!!a}}function Bst(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Tst(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Ist(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Fst(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Pst(e,t,n,a,r,s,o=!0,l=!1){const c=Sst(e.urlParams),f=e.url+c,d=Object.assign({},e.headers);return Ist(d,t),Bst(d,n),Tst(d,s),Fst(d,a),new kst(f,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o,l)}function Dst(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Ust(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}class J2{constructor(t,n){this._service=t,n instanceof Ml?this._location=n:this._location=Ml.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new J2(t,n)}get root(){const t=new Ml(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ust(this._location.path)}get storage(){return this._service}get parent(){const t=Dst(this._location.path);if(t===null)return null;const n=new Ml(this._location.bucket,t);return new J2(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw _st(t)}}function rL(e,t){const n=t?.[fst];return n==null?null:Ml.makeFromBucketSpec(n,e)}class Rst{constructor(t,n,a,r,s,o=!1){this.app=t,this._authProvider=n,this._appCheckProvider=a,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=oW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ast,this._maxUploadRetryTime=mst,this._requests=new Set,r!=null?this._bucket=Ml.makeFromBucketSpec(r,this._host):this._bucket=rL(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ml.makeFromBucketSpec(this._url,t):this._bucket=rL(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){aL("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){aL("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(nl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new J2(this,t)}_makeRequest(t,n,a,r,s=!0){if(this._deleted)return new wst(iW());{const o=Pst(t,this._appId,a,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[a,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,a,r).getPromise()}}const sL="@firebase/storage",oL="0.13.14";const Nst="storage";function Vst(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new Rst(n,a,r,t,Af)}function Lst(){Vu(new ql(Nst,Vst,"PUBLIC").setMultipleInstances(!0)),Pi(sL,oL,""),Pi(sL,oL,"esm2017")}Lst();function Mst(e){return Hst({initialUser:e,dependencies:{popupRedirectResolver:dM,persistence:[lM,YB,XB]}})}const Ost=Symbol("VueFireAuth");function Hst({dependencies:e,initialUser:t}){return(n,a)=>{const[r,s]=$st(n,a,t,e);Xtt(r,s)}}function $st(e,t,n,a,r=j6(e,a)){const s=jtt(e,t).run(()=>R(n));return qtt.set(e,s),t.provide(Ost,r),[s,r]}function Qst(e,{firebaseApp:t,modules:n=[]}){e.provide($G,t);for(const a of n)a(t,e)}const Gst=()=>{console.log(" Clearing desktop session on app startup - passcode will be required"),localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures")};Gst();window.addEventListener("unhandledrejection",e=>{e.reason&&typeof e.reason.code=="string"&&e.reason.code.startsWith("auth/")&&(console.warn("Unhandled Firebase Auth error (suppressed):",e.reason.code,e.reason.message),e.preventDefault())});console.log("Vue app starting in environment:",Oa()?"Electron":"Web");if(Oa())try{const{ipcRenderer:e}=window.electron||window.require("electron");e.on("server-ready",(t,n)=>{console.log("Server ready event received");const{localIP:a}=n||{};if(a&&Oa()){const r=xo(a).api.https;Tw(r),console.log("Local IP:",a)}}),e.on("server-error",(t,n)=>{console.error("Server error received:",n)})}catch(e){console.error("Failed to set up IPC listeners:",e)}const zst={dark:!1,colors:{primary:"#133665",surfaceTint:"#415F91",onPrimary:"#FFFFFF",primaryContainer:"#506DA0",onPrimaryContainer:"#FFFFFF",secondary:"#2E3647",onSecondary:"#FFFFFF",secondaryContainer:"#646D80",onSecondaryContainer:"#FFFFFF",tertiary:"#452E4A",onTertiary:"#FFFFFF",tertiaryContainer:"#7F6484",onTertiaryContainer:"#FFFFFF",error:"#740006",onError:"#FFFFFF",errorContainer:"#CF2C27",onErrorContainer:"#FFFFFF",background:"#F9F9FF",onBackground:"#191C20",surface:"#F9F9FF",onSurface:"#0F1116",surfaceVariant:"#E0E2EC",onSurfaceVariant:"#33363E",outline:"#4F525A",outlineVariant:"#6A6D75",shadow:"#000000",scrim:"#000000",inverseSurface:"#2E3036",inverseOnSurface:"#F0F0F7",inversePrimary:"#AAC7FF",primaryFixed:"#506DA0",onPrimaryFixed:"#FFFFFF",primaryFixedDim:"#375586",onPrimaryFixedVariant:"#FFFFFF",secondaryFixed:"#646D80",onSecondaryFixed:"#FFFFFF",secondaryFixedDim:"#4C5567",onSecondaryFixedVariant:"#FFFFFF",tertiaryFixed:"#7F6484",onTertiaryFixed:"#FFFFFF",tertiaryFixedDim:"#654C6B",onTertiaryFixedVariant:"#FFFFFF",surfaceDim:"#C5C6CD",surfaceBright:"#F9F9FF",surfaceContainerLowest:"#FFFFFF",surfaceContainerLow:"#F3F3FA",surfaceContainer:"#E7E8EE",surfaceContainerHigh:"#DCDCE3",surfaceContainerHighest:"#D1D1D8"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},Wst=y5({components:ctt,directives:btt,theme:{defaultTheme:"myCustomLightTheme",themes:{myCustomLightTheme:zst}},defaults:{VBtn:{color:"primary",rounded:"sm",size:"small"},VSnackbar:{timeout:3e3},VSheet:{rounded:"sm",colour:"surface"},VTextField:{density:"compact"},VTooltip:{location:"top",openDelay:1e3}}}),l1=tte(nme);l1.use(js);l1.use(Wst);l1.use(Ii);Oa()&&l1.use(Qst,{firebaseApp:l_,modules:[Mst()]});let fv=!1;const Xm=()=>{if(!fv){console.log("Mounting app");try{l1.mount("#app"),fv=!0,console.log("App mounted successfully")}catch(e){console.error("Error mounting app:",e)}}},Kst=async()=>{try{console.log("Starting app initialization..."),console.log("Environment:",Oa()?"Electron":"Web"),console.log("Initializing API client...");try{await gM(),console.log("API client initialized with URL parameters")}catch(e){console.warn("API client initialization failed:",e)}console.log("Initializing network API...");try{const e=await YH();console.log("Network API initialized:",e)}catch(e){console.warn("Network API initialization failed:",e)}if(Oa()){console.log("Testing Firebase Auth..."),console.log("Auth object:",Js),console.log("Auth app:",Js?.app),console.log("Auth currentUser:",Js?.currentUser),console.log("Setting up auth state listener...");try{const e=Js.onAuthStateChanged(n=>{console.log(" Auth state changed!"),console.log("Initial auth state:",n?"User logged in":"No user"),console.log("User object:",n),Ii.commit("auth/SET_USER",n),Xm(),setTimeout(()=>{fv&&js.currentRoute.value.path==="/"&&(n?!!localStorage.getItem("desktopSessionToken")?(console.log("Authenticated user with valid desktop session, navigating to home"),js.push("/home")):(console.log("Google auth detected, but passcode required - navigating to passcode page"),js.push("/desktop/passcode")):(console.log("No authenticated user, navigating to login"),js.push("/login")))},100)},n=>{console.error("Auth state change error:",n),n.code==="auth/network-request-failed"&&console.warn("Network request failed - this is common in Electron. Continuing with offline mode."),Xm(),setTimeout(()=>{fv&&js.currentRoute.value.path==="/"&&js.push("/login")},100)});console.log("Auth state listener set up successfully, unsubscribe function:",typeof e);const t=setTimeout(()=>{fv||(console.log("Auth state listener timeout - mounting app with current user"),Ii.commit("auth/SET_USER",Js.currentUser),Xm(),Cn(()=>{try{js.currentRoute.value.path==="/"&&(Js.currentUser?!!localStorage.getItem("desktopSessionToken")?(console.log("Timeout: Authenticated user with desktop session, navigating to home"),js.push("/home")):(console.log("Timeout: Google auth detected, passcode required - navigating to passcode page"),js.push("/desktop/passcode")):(console.log("Timeout: No authenticated user, navigating to login"),js.push("/login")))}catch(n){console.error("Navigation error during timeout:",n)}}))},3e3);window.backupTimeout=t}catch(e){console.error("Failed to set up auth state listener:",e),Ii.commit("auth/SET_USER",null),Xm()}}else console.log("Web mode: Checking web session..."),wM(),console.log("Web mode: Session interceptors set up"),Xm(),setTimeout(async()=>{if(fv){const e=js.currentRoute.value.path,t=KA();if(console.log("Web mode initialization - current route:",e),console.log("Session token exists:",!!t.sessionToken.value),t.sessionToken.value)try{if(console.log("Verifying existing session token..."),(await t.verifySession()).valid)console.log("Web session valid"),e==="/"&&js.push("/home");else if(console.log("Web session invalid, clearing session"),t.clearSession(),e!=="/web/login"){const r=new URLSearchParams(window.location.search).get("endpoint"),s=r?`/web/login?endpoint=${encodeURIComponent(r)}`:"/web/login";js.push(s)}}catch(n){if(console.warn("Session verification failed:",n),t.clearSession(),e!=="/web/login"&&e!=="/"){const r=new URLSearchParams(window.location.search).get("endpoint"),s=r?`/web/login?endpoint=${encodeURIComponent(r)}`:"/web/login";js.push(s)}}else if(e==="/"){console.log("No web session, navigating to web login");const a=new URLSearchParams(window.location.search).get("endpoint"),r=a?`/web/login?endpoint=${encodeURIComponent(a)}`:"/web/login";js.push(r)}}},100)}catch(e){console.error("Error initializing app:",e),Ii.commit("auth/SET_USER",null),Xm()}};console.log("Starting Vue app initialization...");Kst();export{it as a,oy as c,To as f,EM as g,jA as p};
